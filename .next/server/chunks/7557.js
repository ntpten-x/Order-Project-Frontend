"use strict";exports.id=7557,exports.ids=[7557],exports.modules={61758:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(17577);let a={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 00-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 100 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 00-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 00-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6z"}}]},name:"shopping-cart",theme:"outlined"};var o=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let s=i.forwardRef((e,t)=>i.createElement(o.Z,n({},e,{ref:t,icon:a})))},11834:(e,t,r)=>{r.d(t,{Z:()=>U});var i=r(10326),a=r(17577),o=r(46226),n=r(58184),s=r(46752),l=r(97458),d=r(61357),p=r(71935),c=r(92121),m=r(43778),x=r(75698),y=r(11401),g=r(90218),h=r(75958),f=r(49909),u=r(31916),b=r(62938),j=r(38572),w=r(72380),k=r(46024),v=r(63191),z=r(2643),S=r(61758),C=r(49965),_=r(35047),F=r(63196),Z=r(37938),B=r(44976),I=r(20108),R=r(3341),N=r(19211),T=r(47374),$=r(93312),E=r(77626),W=r.n(E);let P={primary:"#3B82F6",primaryDark:"#2563EB",primaryLight:"#EFF6FF",primaryBorder:"#BFDBFE",success:"#10B981",successLight:"#ECFDF5",warning:"#F59E0B",warningLight:"#FFFBEB",warningBorder:"#FDE68A",text:"#1E293B",textSecondary:"#64748B",background:"#F8FAFC",white:"#FFFFFF"},D={productName:{fontSize:15,fontWeight:600,lineHeight:1.4},productPrice:{fontSize:18,fontWeight:700},cartItemName:{fontSize:14,fontWeight:600}},A={container:{minHeight:"100vh",background:P.background,display:"flex",flexDirection:"column",paddingBottom:100},header:{background:"linear-gradient(145deg, #3B82F6 0%, #60A5FA 50%, #93C5FD 100%)",padding:"20px 24px",boxShadow:"0 4px 20px rgba(59, 130, 246, 0.15)",position:"sticky",top:0,zIndex:100,borderRadius:"0 0 24px 24px"},headerContent:{maxWidth:1400,margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},headerLeft:{display:"flex",alignItems:"center",gap:14,flex:1,minWidth:0},headerBackButton:{display:"flex",alignItems:"center",justifyContent:"center",width:42,height:42,borderRadius:14,background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#fff",cursor:"pointer",transition:"all 0.2s ease"},headerIconWrapper:{width:48,height:48,borderRadius:16,background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",display:"flex",alignItems:"center",justifyContent:"center"},headerInfo:{flex:1,minWidth:0},headerTitle:{color:"#fff",fontSize:22,fontWeight:700,margin:0,lineHeight:1.2,textShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},headerSubtitle:{color:"rgba(255, 255, 255, 0.9)",fontSize:14,marginTop:4,fontWeight:500},headerActions:{display:"flex",alignItems:"center",gap:10},categoryBar:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",padding:"14px 24px",borderBottom:"1px solid rgba(226, 232, 240, 0.8)",position:"sticky",top:84,zIndex:99,overflowX:"auto",whiteSpace:"nowrap"},categoryScroll:{maxWidth:1400,margin:"0 auto",display:"flex",gap:10},content:{maxWidth:1400,margin:"0 auto",padding:"24px",flex:1,width:"100%"},productGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:20},productCard:{background:P.white,borderRadius:20,overflow:"hidden",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",border:"1px solid rgba(226, 232, 240, 0.8)",position:"relative"},productImage:{width:"100%",height:160,position:"relative",overflow:"hidden",background:`linear-gradient(135deg, ${P.primaryLight} 0%, #DBEAFE 100%)`},productInfo:{padding:16},productName:{...D.productName,color:P.text,marginBottom:6,display:"block"},productCategory:{fontSize:11,color:P.textSecondary,marginBottom:10},productFooter:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:14,paddingTop:12,borderTop:"1px solid #F1F5F9"},productPrice:{...D.productPrice,color:P.primary},addButton:{background:`linear-gradient(135deg, ${P.success} 0%, #059669 100%)`,color:"#fff",border:"none",borderRadius:12,padding:"10px 16px",fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:6,boxShadow:`0 4px 12px ${P.success}40`},paginationContainer:{display:"flex",justifyContent:"center",marginTop:32,padding:"24px 0"},floatingCartButton:{width:64,height:64,borderRadius:20,background:`linear-gradient(145deg, ${P.primary} 0%, ${P.primaryDark} 100%)`,boxShadow:`0 8px 24px ${P.primary}50`,display:"flex",alignItems:"center",justifyContent:"center",border:"3px solid #fff"},loadingContainer:{textAlign:"center",padding:80,background:"#fff",borderRadius:24,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.04)"},emptyContainer:{textAlign:"center",padding:80,background:"#fff",borderRadius:24,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.04)"}};D.cartItemName,P.text,P.textSecondary,P.warningLight,P.warningBorder;let L=()=>i.jsx(W(),{id:"efceaaedb43f8b20",dynamic:[P.primaryBorder,P.primary,P.primary,P.primary,P.primary],children:`.pos-product-card{-webkit-transform:translatey(0);-moz-transform:translatey(0);-ms-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}.pos-product-card:hover{-webkit-transform:translatey(-6px);-moz-transform:translatey(-6px);-ms-transform:translatey(-6px);-o-transform:translatey(-6px);transform:translatey(-6px);-webkit-box-shadow:0 12px 32px rgba(0,0,0,.1);-moz-box-shadow:0 12px 32px rgba(0,0,0,.1);box-shadow:0 12px 32px rgba(0,0,0,.1);border-color:${P.primaryBorder}}.pos-product-card:active{-webkit-transform:translatey(-2px)scale(.99);-moz-transform:translatey(-2px)scale(.99);-ms-transform:translatey(-2px)scale(.99);-o-transform:translatey(-2px)scale(.99);transform:translatey(-2px)scale(.99)}.pos-add-button:hover{background:-webkit-linear-gradient(315deg,#059669 0%,#047857 100%);background:-moz-linear-gradient(315deg,#059669 0%,#047857 100%);background:-o-linear-gradient(315deg,#059669 0%,#047857 100%);background:linear-gradient(135deg,#059669 0%,#047857 100%);-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-ms-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05);-webkit-box-shadow:0 6px 16px rgba(16,185,129,.5);-moz-box-shadow:0 6px 16px rgba(16,185,129,.5);box-shadow:0 6px 16px rgba(16,185,129,.5)}.pos-add-button:active{-webkit-transform:scale(.98);-moz-transform:scale(.98);-ms-transform:scale(.98);-o-transform:scale(.98);transform:scale(.98)}@-webkit-keyframes pos-fade-in{from{opacity:0;-webkit-transform:translatey(16px);transform:translatey(16px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes pos-fade-in{from{opacity:0;-moz-transform:translatey(16px);transform:translatey(16px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes pos-fade-in{from{opacity:0;-o-transform:translatey(16px);transform:translatey(16px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes pos-fade-in{from{opacity:0;-webkit-transform:translatey(16px);-moz-transform:translatey(16px);-o-transform:translatey(16px);transform:translatey(16px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.pos-fade-in{-webkit-animation:pos-fade-in.4s ease-out forwards;-moz-animation:pos-fade-in.4s ease-out forwards;-o-animation:pos-fade-in.4s ease-out forwards;animation:pos-fade-in.4s ease-out forwards}.pos-delay-1{-webkit-animation-delay:.05s;-moz-animation-delay:.05s;-o-animation-delay:.05s;animation-delay:.05s;opacity:0}.pos-delay-2{-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s;opacity:0}.pos-delay-3{-webkit-animation-delay:.15s;-moz-animation-delay:.15s;-o-animation-delay:.15s;animation-delay:.15s;opacity:0}.pos-delay-4{-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s;opacity:0}.pos-category-bar::-webkit-scrollbar{height:4px}.pos-category-bar::-webkit-scrollbar-track{background:transparent}.pos-category-bar::-webkit-scrollbar-thumb{background:#CBD5E1;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.pos-category-btn{-webkit-border-radius:12px!important;-moz-border-radius:12px!important;border-radius:12px!important;font-weight:600!important;height:42px!important;padding:0 20px!important;border:1.5px solid#E2E8F0!important;-webkit-transition:all.2s ease!important;-moz-transition:all.2s ease!important;-o-transition:all.2s ease!important;transition:all.2s ease!important}.pos-category-btn:hover{border-color:${P.primary}!important;color:${P.primary}!important}.pos-header-back:hover{background:rgba(255,255,255,.3)!important;-webkit-transform:translatex(-2px);-moz-transform:translatex(-2px);-ms-transform:translatex(-2px);-o-transform:translatex(-2px);transform:translatex(-2px)}.pos-floating-btn-container{position:fixed!important;bottom:32px!important;right:32px!important;z-index:1000!important;-webkit-transition:all.3s cubic-bezier(.175,.885,.32,1.275);-moz-transition:all.3s cubic-bezier(.175,.885,.32,1.275);-o-transition:all.3s cubic-bezier(.175,.885,.32,1.275);transition:all.3s cubic-bezier(.175,.885,.32,1.275)}@-webkit-keyframes pos-pulse{0%,100%{-webkit-box-shadow:0 8px 24px ${P.primary}50;box-shadow:0 8px 24px ${P.primary}50}50%{-webkit-box-shadow:0 12px 32px ${P.primary}70;box-shadow:0 12px 32px ${P.primary}70}}@-moz-keyframes pos-pulse{0%,100%{-moz-box-shadow:0 8px 24px ${P.primary}50;box-shadow:0 8px 24px ${P.primary}50}50%{-moz-box-shadow:0 12px 32px ${P.primary}70;box-shadow:0 12px 32px ${P.primary}70}}@-o-keyframes pos-pulse{0%,100%{box-shadow:0 8px 24px ${P.primary}50}50%{box-shadow:0 12px 32px ${P.primary}70}}@keyframes pos-pulse{0%,100%{-webkit-box-shadow:0 8px 24px ${P.primary}50;-moz-box-shadow:0 8px 24px ${P.primary}50;box-shadow:0 8px 24px ${P.primary}50}50%{-webkit-box-shadow:0 12px 32px ${P.primary}70;-moz-box-shadow:0 12px 32px ${P.primary}70;box-shadow:0 12px 32px ${P.primary}70}}.pos-cart-pulse{-webkit-animation:pos-pulse 2s ease-in-out infinite;-moz-animation:pos-pulse 2s ease-in-out infinite;-o-animation:pos-pulse 2s ease-in-out infinite;animation:pos-pulse 2s ease-in-out infinite}@media(max-width:768px){.pos-header-mobile{padding:16px 16px 20px!important;-webkit-border-radius:0 0 20px 20px!important;-moz-border-radius:0 0 20px 20px!important;border-radius:0 0 20px 20px!important}.pos-header-title-mobile{font-size:18px!important}.pos-header-subtitle-mobile{font-size:12px!important}.pos-category-bar-mobile{padding:12px 16px!important;top:76px!important}.pos-content-mobile{padding:16px!important}.pos-product-grid-mobile{grid-template-columns:repeat(2,1fr)!important;gap:14px!important}.pos-product-image-mobile{height:130px!important}.pos-product-info-mobile{padding:12px!important}.pos-product-name-mobile{font-size:13px!important;line-height:1.3!important}.pos-product-price-mobile{font-size:15px!important}.pos-add-button-mobile{padding:8px 12px!important;font-size:11px!important;-webkit-border-radius:10px!important;-moz-border-radius:10px!important;border-radius:10px!important}.pos-floating-btn-container{bottom:100px!important;right:20px!important}.pos-product-card{min-height:220px}.pos-category-btn{height:38px!important;padding:0 16px!important;font-size:13px!important}}@media(max-width:480px){.pos-product-grid-mobile{gap:10px!important}.pos-product-image-mobile{height:110px!important}.pos-product-info-mobile{padding:10px!important}.pos-product-footer-mobile{-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-moz-box-orient:vertical!important;-moz-box-direction:normal!important;-ms-flex-direction:column!important;flex-direction:column!important;gap:10px!important;-webkit-box-align:stretch!important;-webkit-align-items:stretch!important;-moz-box-align:stretch!important;-ms-flex-align:stretch!important;align-items:stretch!important}.pos-add-button-mobile{width:100%!important;-webkit-box-pack:center!important;-webkit-justify-content:center!important;-moz-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important}}@media(min-width:1200px){.pos-product-grid{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))!important;gap:24px!important}}@media(min-width:1600px){.pos-product-grid{grid-template-columns:repeat(auto-fill,minmax(240px,1fr))!important}}@media(hover:none){.pos-product-card:active{-webkit-transform:scale(.98)!important;-moz-transform:scale(.98)!important;-ms-transform:scale(.98)!important;-o-transform:scale(.98)!important;transform:scale(.98)!important}.pos-product-card:hover{-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important;-webkit-box-shadow:0 4px 16px rgba(0,0,0,.04)!important;-moz-box-shadow:0 4px 16px rgba(0,0,0,.04)!important;box-shadow:0 4px 16px rgba(0,0,0,.04)!important}}`});var q=r(41947),O=r(49227);let{Title:H,Text:M}=n.default;function U({title:e,subtitle:t,icon:r,onConfirmOrder:n}){let{isLoading:u}=(0,Z.x)(),E=(0,_.useRouter)(),[W,D]=(0,a.useState)(1),[U,J]=(0,a.useState)(void 0),{data:K=[]}=(0,$.L)(),{products:Y,isLoading:V,total:X}=function(e=1,t=20,r){let{socket:i}=(0,a.useContext)(N.J);(0,B.NL)();let{data:o,error:n,isLoading:s,refetch:l}=(0,I.a)({queryKey:["products",e,t,r||"all"],queryFn:async()=>{let i=new URLSearchParams;return r&&i.append("category_id",r),await T.R.findAll(e,t,void 0,i)},placeholderData:R.Wk,staleTime:3e4});return{products:o?.data||[],total:o?.total||0,currentPage:o?.page||1,lastPage:o?.last_page||1,isLoading:s,isError:n,mutate:l}}(W,20,U),[Q,ee]=(0,a.useState)(!1),[et,er]=(0,a.useState)(!1),[ei,ea]=(0,a.useState)(!1),{cartItems:eo,addToCart:en,removeFromCart:es,updateQuantity:el,updateItemNote:ed,clearCart:ep,updateItemDetails:ec,orderMode:em,getTotalItems:ex,getSubtotal:ey,getFinalPrice:eg}=(0,F.j)(),eh=ex(),ef=ey(),eu=eg(),eb=Math.max(0,ef-eu),ej=e=>"DELIVERY"===em?Number(e.price_delivery??e.price):Number(e.price),[ew,ek]=(0,a.useState)(!1),[ev,ez]=(0,a.useState)(null),[eS,eC]=(0,a.useState)(""),[e_,eF]=(0,a.useState)(!1),[eZ,eB]=(0,a.useState)(null),eI=(e,t,r)=>{eB({id:e,name:t,details:r||[]}),eF(!0)},eR=(e,t,r)=>{ez({id:e,name:t,note:r}),eC(r||""),ek(!0)},eN=e=>{en(e);let t=e.display_name||e.product_name||"สินค้า";s.ZP.open({type:"success",content:`เพิ่ม ${t} ลงตะกร้าแล้ว`,key:"cart-add",duration:1.2})},eT=async()=>{try{ea(!0),await n(),er(!1),ee(!1)}catch(e){console.error(e)}finally{ea(!1)}};return(0,i.jsxs)(i.Fragment,{children:[i.jsx(L,{}),(0,i.jsxs)("div",{style:A.container,children:[i.jsx("header",{style:A.header,className:"pos-header-mobile",role:"banner",children:i.jsx("div",{style:A.headerContent,children:(0,i.jsxs)("div",{style:A.headerLeft,children:[i.jsx("button",{className:"pos-header-back",style:A.headerBackButton,onClick:()=>E.back(),"aria-label":"กลับ",children:i.jsx(z.Z,{style:{fontSize:18}})}),i.jsx("div",{style:A.headerIconWrapper,children:r}),(0,i.jsxs)("div",{style:A.headerInfo,children:[i.jsx(H,{level:4,style:A.headerTitle,className:"pos-header-title-mobile",children:e}),i.jsx(M,{style:A.headerSubtitle,className:"pos-header-subtitle-mobile",children:t})]})]})})}),i.jsx("nav",{style:A.categoryBar,className:"pos-category-bar pos-category-bar-mobile",role:"navigation","aria-label":"ตัวกรองหมวดหมู่",children:(0,i.jsxs)("div",{style:A.categoryScroll,children:[i.jsx(p.ZP,{type:U?"text":"primary",onClick:()=>{J(void 0),D(1)},className:"pos-category-btn",style:{background:U?"white":P.primary,borderColor:U?"#E2E8F0":P.primary,color:U?"#64748B":"#fff",border:U?"1px solid #E2E8F0":`1px solid ${P.primary}`,fontWeight:U?400:600,boxShadow:U?"none":"0 4px 12px rgba(79, 70, 229, 0.2)",height:36,padding:"0 20px",borderRadius:18,transition:"all 0.3s ease"},children:"ทั้งหมด"}),K.map(e=>i.jsx(p.ZP,{type:U===e.id?"primary":"text",onClick:()=>{J(e.id),D(1)},className:"pos-category-btn",style:{background:U===e.id?P.primary:"white",borderColor:U===e.id?P.primary:"#E2E8F0",color:U===e.id?"#fff":"#64748B",border:U===e.id?`1px solid ${P.primary}`:"1px solid #E2E8F0",fontWeight:U===e.id?600:400,boxShadow:U===e.id?"0 4px 12px rgba(79, 70, 229, 0.2)":"none",height:36,padding:"0 20px",borderRadius:18,transition:"all 0.3s ease"},children:e.display_name},e.id))]})}),i.jsx("main",{style:A.content,className:"pos-content-mobile",role:"main",children:V&&!u?(0,i.jsxs)("div",{style:A.loadingContainer,children:[i.jsx(c.Z,{size:"large"}),i.jsx(M,{style:{display:"block",marginTop:16,color:P.textSecondary},children:"กำลังโหลดสินค้า..."})]}):Y.length>0?(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{style:A.productGrid,className:"pos-product-grid pos-product-grid-mobile",children:Y.map((e,t)=>(0,i.jsxs)("article",{className:`pos-product-card pos-fade-in pos-delay-${t%4+1}`,style:A.productCard,onClick:()=>eN(e),role:"button",tabIndex:0,"aria-label":`เพิ่ม ${e.display_name} ลงตะกร้า`,onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),eN(e))},children:[i.jsx("div",{style:A.productImage,className:"pos-product-image-mobile",children:(0,O.dU)(e)?i.jsx(o.default,{alt:e.product_name,src:e.img_url,fill:!0,style:{objectFit:"cover"},sizes:"(max-width: 768px) 50vw, 220px"}):i.jsx("div",{style:{width:"100%",height:"100%",background:`linear-gradient(135deg, ${P.primaryLight} 0%, #DBEAFE 100%)`,display:"flex",justifyContent:"center",alignItems:"center"},children:i.jsx(b.Z,{style:{fontSize:48,color:P.primary,opacity:.4}})})}),(0,i.jsxs)("div",{style:A.productInfo,className:"pos-product-info-mobile",children:[i.jsx(M,{ellipsis:!0,style:A.productName,className:"pos-product-name-mobile",children:e.display_name}),i.jsx(d.Z,{color:"blue",style:{fontSize:10,marginBottom:0,borderRadius:6,border:"none",background:P.primaryLight,color:P.primary},children:(0,O.r6)(e)}),(0,i.jsxs)("div",{style:A.productFooter,className:"pos-product-footer-mobile",children:[i.jsx(M,{style:A.productPrice,className:"pos-product-price-mobile",children:(0,O.T4)(ej(e))}),i.jsx(p.ZP,{type:"primary",size:"small",icon:i.jsx(w.Z,{}),className:"pos-add-button pos-add-button-mobile",style:A.addButton,onClick:t=>{t.stopPropagation(),eN(e)},children:"เพิ่ม"})]})]})]},e.id))}),i.jsx("div",{style:A.paginationContainer,children:i.jsx(m.Z,{current:W,total:X,pageSize:20,onChange:e=>D(e),showSizeChanger:!1,showTotal:e=>`ทั้งหมด ${e} รายการ`})})]}):i.jsx("div",{style:{background:"#fff",borderRadius:24,padding:"80px 24px",textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.04)"},children:i.jsx(x.Z,{image:x.Z.PRESENTED_IMAGE_SIMPLE,imageStyle:{height:120},description:(0,i.jsxs)("div",{style:{marginTop:20},children:[i.jsx(H,{level:4,style:{marginBottom:8,color:P.text},children:"ยังไม่มีข้อมูลสินค้า"}),i.jsx(M,{type:"secondary",style:{fontSize:15},children:"กรุณาเพิ่มสินค้าก่อนใช้งาน"})]}),children:i.jsx(p.ZP,{type:"primary",size:"large",icon:i.jsx(b.Z,{}),style:{height:52,padding:"0 40px",borderRadius:16,fontSize:16,fontWeight:600,marginTop:20,background:`linear-gradient(135deg, ${P.primary} 0%, ${P.primaryDark} 100%)`,border:"none",boxShadow:`0 8px 20px ${P.primary}40`},onClick:()=>E.push("/pos/products"),children:"ไปหน้าจัดการสินค้า"})})})}),i.jsx("div",{className:"pos-floating-btn-container",children:i.jsx(y.Z,{count:eh,size:"default",offset:[-5,5],children:i.jsx(p.ZP,{type:"primary",shape:"circle",size:"large",icon:i.jsx(S.Z,{style:{fontSize:26}}),onClick:()=>ee(!0),style:A.floatingCartButton,className:eh>0?"pos-cart-pulse":"","aria-label":`ตะกร้าสินค้า ${eh} รายการ`})})}),i.jsx(g.Z,{title:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[i.jsx("div",{style:{width:40,height:40,background:"#ecfdf5",borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(S.Z,{style:{fontSize:20,color:"#10b981"}})}),(0,i.jsxs)("div",{children:[i.jsx(M,{style:{fontSize:18,fontWeight:700,color:"#1e293b",display:"block",lineHeight:1.2},children:"ตะกร้าสินค้า"}),(0,i.jsxs)(M,{type:"secondary",style:{fontSize:12,fontWeight:500},children:[eh," รายการ"]})]})]}),placement:"right",onClose:()=>ee(!1),open:Q,width:420,styles:{wrapper:{maxWidth:"100vw"},body:{padding:"16px 20px",background:"#f8fafc"},header:{padding:"20px",borderBottom:"1px solid #f1f5f9"},footer:{padding:"20px",borderTop:"1px solid #e2e8f0",background:"white"}},footer:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)(M,{type:"secondary",style:{fontSize:15},children:["ยอดรวม (",eh," รายการ)"]}),i.jsx(M,{style:{fontWeight:600,fontSize:16},children:(0,O.T4)(ef)})]}),eb>0&&(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx(M,{type:"secondary",style:{fontSize:15},children:"ส่วนลด"}),(0,i.jsxs)(M,{style:{fontWeight:600,fontSize:16,color:"#ef4444"},children:["-",(0,O.T4)(eb)]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[i.jsx(M,{style:{fontSize:16,fontWeight:700,color:"#1e293b"},children:"ยอดสุทธิ"}),i.jsx("div",{style:{textAlign:"right"},children:i.jsx(H,{level:2,style:{margin:0,color:"#10b981",lineHeight:1},children:(0,O.T4)(eu)})})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginTop:8},children:[i.jsx(p.ZP,{size:"large",danger:!0,icon:i.jsx(v.Z,{}),onClick:()=>{h.Z.confirm({title:"ล้างตะกร้าสินค้า?",content:"รายการทั้งหมดจะถูกลบ และไม่สามารถย้อนกลับได้",okText:"ล้างตะกร้า",okType:"danger",cancelText:"ยกเลิก",centered:!0,onOk:ep})},disabled:0===eo.length,style:{borderRadius:12,height:48,fontWeight:600,border:"none",background:"#fef2f2",color:"#ef4444"},children:"ล้างตะกร้า"}),i.jsx(p.ZP,{type:"primary",size:"large",onClick:()=>{if(0===eo.length){s.ZP.warning("กรุณาเพิ่มสินค้าลงตะกร้าก่อน");return}er(!0)},disabled:0===eo.length,style:{borderRadius:12,height:48,fontWeight:700,background:"#10b981",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.4)"},children:"ชำระเงิน"})]})]}),children:eo.length>0?i.jsx(l.Z,{dataSource:eo,renderItem:e=>{let t=ej(e.product),r=(e.details||[]).reduce((e,t)=>e+Number(t.extra_price||0),0),a=Number(e.discount||0),o=Math.max(0,(t+r)*e.quantity-a);return i.jsx(l.Z.Item,{style:{padding:"12px",marginBottom:"12px",background:"#fff",borderRadius:"16px",border:"none",transition:"all 0.2s",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},className:"cart-item-hover",children:(0,i.jsxs)("div",{style:{display:"flex",gap:12,width:"100%"},children:[i.jsx("div",{style:{flexShrink:0},children:e.product.img_url?i.jsx("div",{style:{width:72,height:72,borderRadius:12,overflow:"hidden",border:"1px solid #f1f5f9"},children:i.jsx("img",{src:e.product.img_url,alt:e.product.display_name||e.product.product_name,style:{width:"100%",height:"100%",objectFit:"cover"}})}):i.jsx("div",{style:{width:72,height:72,borderRadius:12,background:"#f8fafc",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #f1f5f9"},children:i.jsx(b.Z,{style:{fontSize:24,color:"#94a3b8"}})})}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,i.jsxs)("div",{style:{flex:1},children:[i.jsx(M,{style:{fontWeight:600,fontSize:15,color:"#1e293b",display:"block",lineHeight:1.2,marginBottom:4},children:e.product.display_name||e.product.product_name}),i.jsx(d.Z,{style:{border:"none",background:"#f1f5f9",color:"#64748b",fontSize:11,padding:"0 6px",margin:0,borderRadius:6},children:e.product.category?.display_name||"ทั่วไป"})]}),i.jsx(M,{style:{fontWeight:700,fontSize:16,color:"#10b981",whiteSpace:"nowrap",marginLeft:8},children:(0,O.T4)(o)})]}),e.details&&e.details.length>0&&i.jsx("div",{style:{marginTop:6,marginBottom:4},children:e.details.map((e,t)=>(0,i.jsxs)(M,{style:{display:"block",fontSize:12,color:"#10b981",lineHeight:1.4},children:["+ ",e.detail_name," ",(0,i.jsxs)("span",{style:{opacity:.8},children:["(+",(0,O.T4)(Number(e.extra_price||0)),")"]})]},t))}),e.notes&&i.jsx("div",{style:{marginTop:4,background:"#fef2f2",padding:"2px 6px",borderRadius:4,display:"inline-block",border:"1px solid #fecaca"},children:(0,i.jsxs)(M,{style:{fontSize:11,color:"#ef4444"},children:["โน้ต: ",e.notes]})}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:8},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",background:"#f8fafc",borderRadius:8,padding:"2px",border:"1px solid #e2e8f0"},children:[i.jsx(p.ZP,{type:"text",size:"small",icon:i.jsx(j.Z,{style:{fontSize:10}}),"aria-label":"ลดจำนวน",onClick:()=>el(e.cart_item_id,e.quantity-1),style:{width:24,height:24,borderRadius:6,background:"white",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"}}),i.jsx(M,{style:{margin:"0 8px",fontWeight:600,minWidth:16,textAlign:"center",fontSize:13},children:e.quantity}),i.jsx(p.ZP,{type:"text",size:"small",icon:i.jsx(w.Z,{style:{fontSize:10}}),"aria-label":"เพิ่มจำนวน",onClick:()=>el(e.cart_item_id,e.quantity+1),style:{width:24,height:24,borderRadius:6,background:"#10b981",color:"white"}})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:4},children:[i.jsx(p.ZP,{type:"text",icon:i.jsx(k.Z,{}),size:"small","aria-label":"แก้ไขโน้ต",onClick:()=>{eR(e.cart_item_id,e.product.display_name,e.notes||"")},style:{color:"#64748b",background:"#f1f5f9",borderRadius:6,width:28,height:28}}),i.jsx(p.ZP,{type:"text",icon:i.jsx(w.Z,{}),size:"small","aria-label":"เพิ่มรายละเอียด",onClick:()=>{eI(e.cart_item_id,e.product.display_name,e.details)},style:{color:"#10b981",background:"#ecfdf5",borderRadius:6,width:28,height:28}}),i.jsx(p.ZP,{type:"text",danger:!0,icon:i.jsx(v.Z,{}),size:"small","aria-label":"ลบออกจากตะกร้า",onClick:()=>es(e.cart_item_id),style:{background:"#fef2f2",borderRadius:6,width:28,height:28}})]})]})]})]})},e.cart_item_id)},split:!1}):(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",opacity:.5},children:[i.jsx(S.Z,{style:{fontSize:64,color:"#cbd5e1",marginBottom:16}}),i.jsx(M,{style:{color:"#64748b",fontSize:16},children:"ไม่มีสินค้าในตะกร้า"}),i.jsx(M,{style:{color:"#94a3b8",fontSize:14},children:"เลือกสินค้าจากเมนูเพื่อเพิ่มลงตะกร้า"})]})}),Q&&i.jsx(g.Z,{title:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,color:"#fff"},children:[i.jsx(S.Z,{style:{fontSize:20}}),i.jsx("span",{style:{fontWeight:700,fontSize:18},children:"สรุปรายการออเดอร์"})]}),width:420,open:et,onClose:()=>er(!1),closeIcon:i.jsx(C.Z,{style:{color:"#fff"}}),styles:{wrapper:{maxWidth:"100vw"},header:{background:`linear-gradient(145deg, ${P.primary} 0%, ${P.primaryDark} 100%)`,padding:"20px 24px"},body:{padding:"0 24px"},footer:{padding:"16px 24px"}},footer:i.jsx("div",{style:{padding:"8px 0"},children:i.jsx(p.ZP,{type:"primary",block:!0,size:"large",loading:ei,onClick:eT,style:{background:`linear-gradient(135deg, ${P.success} 0%, #059669 100%)`,border:"none",height:56,fontWeight:700,fontSize:18,borderRadius:14,boxShadow:`0 8px 20px ${P.success}40`},children:"ยืนยันการสั่งออเดอร์"})}),children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:24,padding:"24px 0"},children:[(0,i.jsxs)("section",{children:[i.jsx(H,{level:5,style:{marginBottom:16,color:P.text},children:"รายการที่สั่ง"}),i.jsx(l.Z,{itemLayout:"horizontal",dataSource:(0,q.S)(eo),renderItem:e=>(0,i.jsxs)("div",{style:{display:"flex",gap:12,padding:"14px 0",borderBottom:"1px dashed #E2E8F0"},children:[i.jsx("div",{style:{width:44,height:44,borderRadius:10,overflow:"hidden",flexShrink:0,border:"1px solid #E2E8F0"},children:e.product.img_url?i.jsx("img",{src:e.product.img_url,alt:e.product.display_name,style:{width:"100%",height:"100%",objectFit:"cover"}}):i.jsx("div",{style:{width:"100%",height:"100%",background:P.primaryLight,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(b.Z,{style:{fontSize:16,color:P.primary,opacity:.5}})})}),i.jsx("div",{style:{flex:1,minWidth:0},children:(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[i.jsx(M,{strong:!0,style:{fontSize:14,display:"block",marginBottom:4},children:e.product.display_name}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx(M,{type:"secondary",style:{fontSize:12},children:"ราคาอาหาร"}),i.jsx(M,{type:"secondary",style:{fontSize:12},children:(0,O.T4)(ej(e.product))})]}),e.details&&e.details.map((e,t)=>(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsxs)(M,{style:{fontSize:12,color:P.success},children:["+ ",e.detail_name]}),i.jsx(M,{style:{fontSize:12,color:P.success},children:(0,O.T4)(Number(e.extra_price))})]},t)),i.jsx("div",{style:{marginTop:4},children:(0,i.jsxs)(M,{style:{fontSize:12,fontWeight:700,color:"#B45309"},children:["จำนวน : ☓ ",e.quantity]})})]}),e.notes&&i.jsx("div",{style:{marginTop:8,padding:"6px 10px",background:"#fef2f2",borderRadius:8,borderLeft:"3px solid #ef4444"},children:(0,i.jsxs)(M,{italic:!0,style:{fontSize:12,color:"#ef4444"},children:["โน๊ต: ",e.notes]})})]}),i.jsx(M,{strong:!0,style:{fontSize:15,marginLeft:12,color:P.primary},children:(0,O.T4)((ej(e.product)+(e.details||[]).reduce((e,t)=>e+Number(t.extra_price),0))*e.quantity)})]})})]},e.id)})]}),(0,i.jsxs)("section",{style:{background:"#F8FAFC",padding:16,borderRadius:14,border:"1px solid #E2E8F0"},children:[i.jsx(M,{strong:!0,style:{fontSize:14,marginBottom:12,display:"block",color:P.textSecondary},children:"สรุปตามหมวดหมู่"}),(()=>{let e={};return eo.forEach(t=>{let r=t.product.category?.display_name||"อื่นๆ";e[r]=(e[r]||0)+t.quantity}),Object.entries(e).map(([e,t])=>(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[i.jsx(M,{type:"secondary",style:{fontSize:13},children:e}),(0,i.jsxs)(M,{strong:!0,style:{fontSize:13},children:[t," รายการ"]})]},e))})()]}),(0,i.jsxs)("section",{style:{background:"#fff",padding:"20px",borderTop:"2px solid #E2E8F0"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[i.jsx(M,{type:"secondary",style:{fontSize:15},children:"รวมจำนวนทั้งหมด"}),(0,i.jsxs)(M,{strong:!0,style:{fontSize:15},children:[eh," รายการ"]})]}),eb>0&&(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[i.jsx(M,{type:"secondary",style:{fontSize:15},children:"ส่วนลด"}),(0,i.jsxs)(M,{strong:!0,style:{fontSize:15,color:"#ef4444"},children:["-",(0,O.T4)(eb)]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx(M,{style:{fontSize:20,fontWeight:700,color:P.text},children:"ยอดรวมสุทธิ"}),i.jsx(M,{style:{fontSize:32,fontWeight:800,color:P.primary},children:(0,O.T4)(eu)})]})]})]})}),i.jsx(h.Z,{title:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[i.jsx("div",{style:{width:36,height:36,borderRadius:10,background:P.warningLight,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(k.Z,{style:{color:P.warning,fontSize:16}})}),(0,i.jsxs)("span",{children:["ระบุรายละเอียด: ",ev?.name]})]}),open:ew,onOk:()=>{ev&&(ed(ev.id,eS),ek(!1),ez(null),s.ZP.success("บันทึกโน๊ตเรียบร้อยแล้ว"))},onCancel:()=>{ek(!1),ez(null)},okText:"บันทึก",cancelText:"ยกเลิก",centered:!0,okButtonProps:{style:{background:P.primary,borderRadius:10,height:42}},cancelButtonProps:{style:{borderRadius:10,height:42}},children:(0,i.jsxs)("div",{style:{padding:"16px 0"},children:[i.jsx(M,{style:{display:"block",marginBottom:10,color:P.textSecondary},children:"รายละเอียด / หมายเหตุ"}),i.jsx(f.default.TextArea,{rows:4,value:eS,onChange:e=>eC(e.target.value),placeholder:"เช่น ไม่ใส่ผัก, หวานน้อย, แยกน้ำ...",maxLength:200,showCount:!0,style:{borderRadius:10}})]})}),i.jsx(G,{item:eZ,isOpen:e_,onClose:()=>{eF(!1),eB(null)},onSave:e=>{eZ&&ec(eZ.id,e)}})]})]})}function G({item:e,isOpen:t,onClose:r,onSave:o}){let[n,s]=(0,a.useState)([]),l=e=>{s(n.filter((t,r)=>r!==e))},d=(e,t,r)=>{let i=[...n];i[e]={...i[e],[t]:r},s(i)};return i.jsx(h.Z,{title:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[i.jsx("div",{style:{width:36,height:36,borderRadius:10,background:P.successLight,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(w.Z,{style:{color:P.success,fontSize:16}})}),(0,i.jsxs)("span",{children:["รายละเอียดเพิ่มเติม: ",e?.name]})]}),open:t,onCancel:r,footer:[i.jsx(p.ZP,{onClick:r,style:{borderRadius:10,height:42},children:"ยกเลิก"},"cancel"),i.jsx(p.ZP,{type:"primary",onClick:()=>{o(n.filter(e=>""!==e.detail_name.trim())),r()},style:{background:P.success,borderRadius:10,height:42},children:"บันทึก"},"save")],width:520,centered:!0,children:(0,i.jsxs)("div",{style:{padding:"16px 0"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[i.jsx(M,{strong:!0,style:{color:P.textSecondary},children:"รายการเพิ่มเติม"}),i.jsx(p.ZP,{type:"dashed",size:"small",icon:i.jsx(w.Z,{}),onClick:()=>{s([...n,{detail_name:"",extra_price:0}])},style:{borderRadius:8},children:"เพิ่มรายการ"})]}),0===n.length?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"32px",background:"#F8FAFC",borderRadius:12,color:P.textSecondary},children:[i.jsx(w.Z,{style:{fontSize:24,marginBottom:8,opacity:.4}}),i.jsx("div",{children:"ไม่มีรายการเพิ่มเติม"})]}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:n.map((e,t)=>(0,i.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[i.jsx(f.default,{placeholder:"ชื่อรายการ",value:e.detail_name,onChange:e=>d(t,"detail_name",e.target.value),style:{flex:2,borderRadius:8,height:42}}),i.jsx(u.Z,{placeholder:"ราคา",value:e.extra_price,onChange:e=>d(t,"extra_price",e||0),style:{flex:1,height:42},inputMode:"decimal",controls:!1,min:0,precision:2,formatter:e=>null==e||""===e?"":`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>{let t=Number.parseFloat((e??"").replace(/[^\d.]/g,""));return Number.isFinite(t)?t:0},onKeyDown:t=>{/^[0-9]$/.test(t.key)||["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","."].includes(t.key)||t.preventDefault(),"."===t.key&&e.extra_price.toString().includes(".")&&t.preventDefault()}}),i.jsx(p.ZP,{danger:!0,type:"text",icon:i.jsx(v.Z,{}),onClick:()=>l(t),style:{borderRadius:8,height:42,width:42}})]},t))})]})})}},93312:(e,t,r)=>{r.d(t,{L:()=>s});var i=r(20108),a=r(51562),o=r(69711);let n="pos:categories";function s(){return(0,i.a)({queryKey:["categories"],queryFn:async()=>{let e=await a.G.findAll();return e?.length&&(0,o.v)(n,e),e},initialData:()=>(0,o.t)(n,3e5)||void 0,staleTime:3e5,refetchOnWindowFocus:!1,retry:1})}},10985:(e,t,r)=>{var i;r.d(t,{c:()=>i}),function(e){e.Available="Available",e.Unavailable="Unavailable"}(i||(i={}))},2504:(e,t,r)=>{r.d(t,{NE:()=>d,Th:()=>s,Do:()=>p,Yx:()=>c,Zu:()=>m,Oi:()=>l,W9:()=>o,Tf:()=>n});var i=r(10985),a=r(13976);function o(e){let t={total:e.length,available:0,occupied:0,inactive:0};return e.forEach(e=>{e.is_active?e.status===i.c.Available?t.available++:t.occupied++:t.inactive++}),t}function n(e){return[...e].sort((e,t)=>{let r=parseInt(e.table_name.replace(/\D/g,"")),i=parseInt(t.table_name.replace(/\D/g,""));return isNaN(r)||isNaN(i)?e.table_name.localeCompare(t.table_name):r-i})}function s(e){return e.filter(e=>e.is_active)}function l(e){return e.is_active?"WaitingForPayment"===e.active_order_status?"waitingForPayment":e.status===i.c.Available?"available":"occupied":"inactive"}function d(e){return e?({Pending:"กำลังดำเนินการ",Cooking:"กำลังปรุง",Served:"เสิร์ฟแล้ว",WaitingForOrder:"รอรับออเดอร์",WaitingForPayment:"รอชำระเงิน",Paid:"ชำระเงินแล้ว",Completed:"เสร็จสมบูรณ์",Cancelled:"ยกเลิก"})[e]||e:""}function p(e){return e.reduce((e,t)=>(e.total++,t.status===a.i.Pending&&e.pending++,t.status===a.i.Cooking&&e.cooking++,t.status===a.i.Served&&e.served++,e),{total:0,pending:0,cooking:0,served:0})}function c(e){switch(e.status){case a.i.Pending:case a.i.Cooking:return"occupied";case a.i.Served:return"waitingForPayment";case a.i.Paid:return"available";default:return"inactive"}}let m=e=>{switch(e){case a.m.DineIn:case"DineIn":return"/pos/channels/dine-in";case a.m.TakeAway:case"TakeAway":return"/pos/channels/takeaway";case a.m.Delivery:case"Delivery":return"/pos/channels/delivery";default:return"/pos/orders"}}},41947:(e,t,r)=>{r.d(t,{S:()=>i});let i=e=>{if(!e?.length)return[];let t=new Map;for(let r of e){let e=r.details?.length?JSON.stringify([...r.details].sort((e,t)=>e.detail_name.localeCompare(t.detail_name))):"[]",i=(r.notes??"").trim(),a=String(r.status??""),o=r.product?.id??r.product_id??"unknown",n=`${o}|${e}|${i}|${a}`,s=t.get(n);if(s){s.quantity+=Number(r.quantity),s.total_price+=Number(r.total_price??0),s.originalItems.push(r);continue}let l={...r,id:String(r?.id??n),quantity:Number(r.quantity),total_price:Number(r.total_price??0),originalItems:[r]};t.set(n,l)}return Array.from(t.values())}},69711:(e,t,r)=>{r.d(t,{t:()=>a,v:()=>o});let i=()=>!1,a=(e,t)=>{if(!i())return null;try{let r=window.localStorage.getItem(e);if(!r)return null;let i=JSON.parse(r);if(!i?.ts||Date.now()-i.ts>t)return null;return i.data??null}catch{return null}},o=(e,t)=>{if(i())try{let r={ts:Date.now(),data:t};window.localStorage.setItem(e,JSON.stringify(r))}catch{}}},49227:(e,t,r)=>{function i(e){return`฿${e.toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2})}`}function a(e){return e.category?.display_name||"ไม่มีหมวดหมู่"}function o(e){return!!e.img_url&&e.img_url.length>0}r.d(t,{T4:()=>i,dU:()=>o,r6:()=>a})}};