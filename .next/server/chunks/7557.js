"use strict";exports.id=7557,exports.ids=[7557],exports.modules={61758:(e,t,a)=>{a.d(t,{Z:()=>s});var i=a(17577);let r={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 00-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 100 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 00-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 00-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6z"}}]},name:"shopping-cart",theme:"outlined"};var n=a(74082);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let s=i.forwardRef((e,t)=>i.createElement(n.Z,o({},e,{ref:t,icon:r})))},11834:(e,t,a)=>{a.d(t,{Z:()=>G});var i=a(10326),r=a(17577),n=a(46226),o=a(58184),s=a(46752),l=a(71935),d=a(92121),c=a(61357),p=a(43778),f=a(75698),m=a(11401),y=a(90218),x=a(75958),g=a(97458),h=a(49909),u=a(31916),b=a(2643),j=a(62938),w=a(72380),k=a(61758),v=a(63191),S=a(46024),z=a(38572),C=a(35047),_=a(63196),Z=a(37938),T=a(44976),I=a(20108),P=a(3341),N=a(19211),R=a(47374),E=a(93312),B=a(77626),F=a.n(B);let $={primary:"#1890ff",primaryBorder:"#91d5ff",success:"#52c41a",warningLight:"#fff7e6",warningBorder:"#ffd591",text:"#262626",textSecondary:"#8c8c8c",background:"#f0f2f5",white:"#ffffff"},W={productName:{fontSize:15,fontWeight:600,lineHeight:1.3},productPrice:{fontSize:18,fontWeight:700},cartItemName:{fontSize:14,fontWeight:600}},D={container:{minHeight:"100vh",background:$.background,display:"flex",flexDirection:"column",paddingBottom:100},header:{background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",padding:"16px 20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",position:"sticky",top:0,zIndex:100},headerContent:{maxWidth:1400,margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},headerLeft:{display:"flex",alignItems:"center",gap:12,flex:1,minWidth:0},headerInfo:{flex:1,minWidth:0},headerTitle:{color:"#fff",fontSize:20,fontWeight:700,margin:0,lineHeight:1.2},headerSubtitle:{color:"rgba(255,255,255,0.85)",fontSize:13,marginTop:2},headerActions:{display:"flex",alignItems:"center",gap:8},categoryBar:{background:"#fff",padding:"12px 20px",borderBottom:"1px solid #f0f0f0",position:"sticky",top:64,zIndex:99,overflowX:"auto",whiteSpace:"nowrap"},categoryScroll:{maxWidth:1400,margin:"0 auto",display:"flex",gap:8},content:{maxWidth:1400,margin:"0 auto",padding:"20px",flex:1,width:"100%"},productGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:16},productCard:{background:$.white,borderRadius:12,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",border:"1px solid #f0f0f0"},productImage:{width:"100%",height:180,position:"relative",overflow:"hidden",background:"#f5f5f5"},productInfo:{padding:14},productName:{...W.productName,color:$.text,marginBottom:4,display:"block"},productCategory:{fontSize:11,color:$.textSecondary,marginBottom:8},productFooter:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:12},productPrice:{...W.productPrice,color:$.primary},addButton:{background:$.success,color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:4},paginationContainer:{display:"flex",justifyContent:"center",marginTop:24,padding:"20px 0"},floatingCartButton:{width:60,height:60,borderRadius:"50%",background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",boxShadow:"0 6px 20px rgba(24, 144, 255, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid #fff"},loadingContainer:{textAlign:"center",padding:60,background:"#fff",borderRadius:12},emptyContainer:{textAlign:"center",padding:60,background:"#fff",borderRadius:12}},O={cartHeader:{display:"flex",alignItems:"center",gap:8},cartItem:{padding:"14px 0",borderBottom:"1px solid #f0f0f0"},cartItemImage:{width:50,height:50,borderRadius:8,objectFit:"cover",background:"#f5f5f5"},cartItemInfo:{flex:1},cartItemName:{...W.cartItemName,color:$.text,marginBottom:2},cartItemPrice:{fontSize:12,color:$.textSecondary},cartItemNote:{marginTop:4,background:$.warningLight,padding:"2px 6px",borderRadius:4,border:`1px dashed ${$.warningBorder}`,display:"inline-block",fontSize:11},quantityControl:{display:"flex",alignItems:"center",gap:8,background:"#f5f5f5",padding:"2px 8px",borderRadius:20},checkoutSummary:{background:"#fafafa",padding:20,borderRadius:12,marginBottom:24}},L=()=>i.jsx(F(),{id:"79b16174f4c6f989",dynamic:[$.primaryBorder],children:`.pos-product-card:hover{-webkit-transform:translatey(-4px);-moz-transform:translatey(-4px);-ms-transform:translatey(-4px);-o-transform:translatey(-4px);transform:translatey(-4px);-webkit-box-shadow:0 8px 24px rgba(0,0,0,.12);-moz-box-shadow:0 8px 24px rgba(0,0,0,.12);box-shadow:0 8px 24px rgba(0,0,0,.12);border-color:${$.primaryBorder}}.pos-product-card:active{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px)}.pos-add-button:hover{background:#73d13d;-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-ms-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05)}.pos-add-button:active{-webkit-transform:scale(.98);-moz-transform:scale(.98);-ms-transform:scale(.98);-o-transform:scale(.98);transform:scale(.98)}@-webkit-keyframes pos-fade-in{from{opacity:0;-webkit-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes pos-fade-in{from{opacity:0;-moz-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes pos-fade-in{from{opacity:0;-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes pos-fade-in{from{opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.pos-fade-in{-webkit-animation:pos-fade-in.4s ease-out forwards;-moz-animation:pos-fade-in.4s ease-out forwards;-o-animation:pos-fade-in.4s ease-out forwards;animation:pos-fade-in.4s ease-out forwards}.pos-delay-1{-webkit-animation-delay:.05s;-moz-animation-delay:.05s;-o-animation-delay:.05s;animation-delay:.05s;opacity:0}.pos-delay-2{-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s;opacity:0}.pos-delay-3{-webkit-animation-delay:.15s;-moz-animation-delay:.15s;-o-animation-delay:.15s;animation-delay:.15s;opacity:0}.pos-delay-4{-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s;opacity:0}.pos-category-bar::-webkit-scrollbar{height:4px}.pos-category-bar::-webkit-scrollbar-track{background:#f0f0f0}.pos-category-bar::-webkit-scrollbar-thumb{background:#d9d9d9;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}@media(max-width:768px){.pos-header-mobile{padding:12px 16px!important}.pos-header-title-mobile{font-size:16px!important}.pos-header-subtitle-mobile{font-size:12px!important}.pos-category-bar-mobile{padding:10px 16px!important;top:56px!important}.pos-content-mobile{padding:16px!important}.pos-product-grid-mobile{grid-template-columns:repeat(2,1fr)!important;gap:12px!important}.pos-product-image-mobile{height:140px!important}.pos-product-info-mobile{padding:12px!important}.pos-product-name-mobile{font-size:14px!important}.pos-product-price-mobile{font-size:16px!important}.pos-add-button-mobile{padding:6px 12px!important;font-size:12px!important}}.pos-floating-btn-container{position:fixed!important;bottom:32px!important;right:32px!important;left:auto!important;z-index:1000!important;-webkit-transition:all.3s cubic-bezier(.175,.885,.32,1.275);-moz-transition:all.3s cubic-bezier(.175,.885,.32,1.275);-o-transition:all.3s cubic-bezier(.175,.885,.32,1.275);transition:all.3s cubic-bezier(.175,.885,.32,1.275)}@media(max-width:768px){.pos-floating-btn-container{bottom:100px!important;right:20px!important;left:auto!important}}@media(max-width:480px){.pos-product-grid-mobile{gap:10px!important}}@media(min-width:1400px){.pos-product-grid{grid-template-columns:repeat(auto-fill,minmax(240px,1fr))!important}}`});var A=a(49227);let{Title:q,Text:U}=o.default;function G({title:e,subtitle:t,icon:a,onConfirmOrder:o}){let{isLoading:u}=(0,Z.x)(),B=(0,C.useRouter)(),[F,W]=(0,r.useState)(1),[G,X]=(0,r.useState)(void 0),{data:J=[]}=(0,E.L)(),{products:M,isLoading:K,total:Y}=function(e=1,t=20,a){let{socket:i}=(0,r.useContext)(N.J);(0,T.NL)();let{data:n,error:o,isLoading:s,refetch:l}=(0,I.a)({queryKey:["products",e,t,a],queryFn:async()=>{let i=new URLSearchParams;return a&&i.append("category_id",a),await R.R.findAll(e,t,void 0,i)},placeholderData:P.Wk,staleTime:2e3});return{products:n?.data||[],total:n?.total||0,currentPage:n?.page||1,lastPage:n?.last_page||1,isLoading:s,isError:o,mutate:l}}(F,20,G),[Q,V]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1),[ea,ei]=(0,r.useState)(!1),{cartItems:er,addToCart:en,removeFromCart:eo,updateQuantity:es,updateItemNote:el,clearCart:ed,removeDetailFromItem:ec,updateItemDetails:ep,getTotalItems:ef,getSubtotal:em,getFinalPrice:ey}=(0,_.j)(),[ex,eg]=(0,r.useState)(!1),[eh,eu]=(0,r.useState)(null),[eb,ej]=(0,r.useState)(""),[ew,ek]=(0,r.useState)(!1),[ev,eS]=(0,r.useState)(null),ez=(e,t,a)=>{eS({id:e,name:t,details:a||[]}),ek(!0)},eC=(e,t,a)=>{eu({id:e,name:t,note:a}),ej(a||""),eg(!0)},e_=e=>{en(e),s.ZP.success(`เพิ่ม ${e.display_name} ลงตะกร้าแล้ว`)},eZ=async()=>{try{ei(!0),await o(),et(!1),V(!1)}catch(e){console.error(e)}finally{ei(!1)}};return(0,i.jsxs)(i.Fragment,{children:[i.jsx(L,{}),(0,i.jsxs)("div",{style:D.container,children:[i.jsx("div",{style:D.header,className:"pos-header-mobile",children:i.jsx("div",{style:D.headerContent,children:(0,i.jsxs)("div",{style:D.headerLeft,children:[i.jsx(l.ZP,{type:"text",icon:i.jsx(b.Z,{style:{color:"#fff"}}),onClick:()=>B.back(),style:{color:"#fff",padding:"4px 8px",background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.3)",borderRadius:8}}),i.jsx("div",{style:{display:"flex",alignItems:"center"},children:a}),(0,i.jsxs)("div",{style:D.headerInfo,children:[i.jsx(q,{level:4,style:D.headerTitle,className:"pos-header-title-mobile",children:e}),i.jsx(U,{style:D.headerSubtitle,className:"pos-header-subtitle-mobile",children:t})]})]})})}),i.jsx("div",{style:D.categoryBar,className:"pos-category-bar pos-category-bar-mobile",children:(0,i.jsxs)("div",{style:D.categoryScroll,children:[i.jsx(l.ZP,{type:G?"default":"primary",onClick:()=>{X(void 0),W(1)},shape:"round",size:"large",children:"ทั้งหมด"}),J.map(e=>i.jsx(l.ZP,{type:G===e.id?"primary":"default",onClick:()=>{X(e.id),W(1)},shape:"round",size:"large",children:e.display_name},e.id))]})}),i.jsx("div",{style:D.content,className:"pos-content-mobile",children:K&&!u?i.jsx("div",{style:D.loadingContainer,children:i.jsx(d.Z,{size:"large"})}):M.length>0?(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{style:D.productGrid,className:"pos-product-grid pos-product-grid-mobile",children:M.map((e,t)=>(0,i.jsxs)("div",{className:`pos-product-card pos-fade-in pos-delay-${t%4+1}`,style:D.productCard,onClick:()=>e_(e),children:[i.jsx("div",{style:D.productImage,className:"pos-product-image-mobile",children:(0,A.dU)(e)?i.jsx(n.default,{alt:e.product_name,src:e.img_url,fill:!0,style:{objectFit:"cover"},sizes:"(max-width: 768px) 50vw, 220px"}):i.jsx("div",{style:{width:"100%",height:"100%",background:"linear-gradient(135deg, #e6f7ff 0%, #bae7ff 100%)",display:"flex",justifyContent:"center",alignItems:"center"},children:i.jsx(j.Z,{style:{fontSize:40,color:$.primary,opacity:.35}})})}),(0,i.jsxs)("div",{style:D.productInfo,className:"pos-product-info-mobile",children:[i.jsx(U,{ellipsis:!0,style:D.productName,className:"pos-product-name-mobile",children:e.display_name}),i.jsx(c.Z,{color:"blue",style:{fontSize:10,marginBottom:8},children:(0,A.r6)(e)}),(0,i.jsxs)("div",{style:D.productFooter,children:[i.jsx(U,{style:D.productPrice,className:"pos-product-price-mobile",children:(0,A.T4)(Number(e.price))}),i.jsx(l.ZP,{type:"primary",size:"small",icon:i.jsx(w.Z,{}),className:"pos-add-button pos-add-button-mobile",style:D.addButton,onClick:t=>{t.stopPropagation(),e_(e)},children:"เพิ่ม"})]})]})]},e.id))}),i.jsx("div",{style:D.paginationContainer,children:i.jsx(p.Z,{current:F,total:Y,pageSize:20,onChange:e=>W(e),showSizeChanger:!1,showTotal:e=>`ทั้งหมด ${e} รายการ`})})]}):i.jsx("div",{style:{background:"#fff",borderRadius:24,padding:"100px 24px",textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.04)",marginTop:20},children:i.jsx(f.Z,{image:f.Z.PRESENTED_IMAGE_SIMPLE,imageStyle:{height:120},description:(0,i.jsxs)("div",{style:{marginTop:20},children:[i.jsx(q,{level:4,style:{marginBottom:8},children:"ยังไม่มีข้อมูลสินค้า"}),i.jsx(U,{type:"secondary",style:{fontSize:16},children:"กรุณาเพิ่มสินค้าก่อนใช้งาน"})]}),children:i.jsx(l.ZP,{type:"primary",size:"large",icon:i.jsx(j.Z,{}),style:{height:50,padding:"0 40px",borderRadius:25,fontSize:16,marginTop:20,background:$.primary,border:"none"},onClick:()=>B.push("/pos/products"),children:"ไปหน้าจัดการสินค้า"})})})}),i.jsx("div",{className:"pos-floating-btn-container",children:i.jsx(m.Z,{count:ef(),size:"default",offset:[-5,5],children:i.jsx(l.ZP,{type:"primary",shape:"circle",size:"large",icon:i.jsx(k.Z,{style:{fontSize:22}}),onClick:()=>V(!0),style:D.floatingCartButton})})}),(0,i.jsxs)(y.Z,{title:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,i.jsxs)("div",{style:O.cartHeader,children:[i.jsx(k.Z,{style:{fontSize:18,color:$.primary}}),i.jsx("span",{children:"ตะกร้าสินค้า"}),i.jsx(m.Z,{count:ef(),style:{marginLeft:8}})]}),i.jsx(l.ZP,{danger:!0,type:"text",onClick:()=>{er.length>0&&x.Z.confirm({title:"ล้างตะกร้า",content:"คุณต้องการล้างสินค้าทั้งหมดในตะกร้าใช่หรือไม่?",okText:"ใช่, ล้างตะกร้า",cancelText:"ยกเลิก",okType:"danger",onOk:()=>{ed(),s.ZP.success("ล้างตะกร้าเรียบร้อยแล้ว"),V(!1)}})},icon:i.jsx(v.Z,{}),style:{fontSize:16},children:"ล้างตะกร้า"})]}),placement:"right",width:420,open:Q,onClose:()=>V(!1),footer:er.length>0&&(0,i.jsxs)("div",{style:{padding:"12px 0"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[i.jsx(U,{type:"secondary",children:"รวมเป็นเงิน"}),i.jsx(U,{strong:!0,style:{fontSize:16},children:(0,A.T4)(em())})]}),i.jsx(l.ZP,{type:"primary",block:!0,size:"large",onClick:()=>{if(0===er.length){s.ZP.warning("กรุณาเพิ่มสินค้าลงตะกร้าก่อน");return}et(!0)},style:{background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",border:"none",height:48,fontWeight:600,fontSize:16},children:"ดำเนินการสั่งออเดอร์"})]}),children:[er.length>0?i.jsx(g.Z,{dataSource:er,renderItem:e=>i.jsx(g.Z.Item,{style:O.cartItem,children:(0,i.jsxs)("div",{style:{width:"100%"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[i.jsx("div",{style:{marginRight:12,flexShrink:0},children:(0,A.dU)(e.product)?i.jsx(n.default,{src:e.product.img_url,alt:e.product.product_name,width:50,height:50,style:O.cartItemImage}):i.jsx("div",{style:{...O.cartItemImage,display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(j.Z,{style:{fontSize:20,color:"#ccc"}})})}),(0,i.jsxs)("div",{style:O.cartItemInfo,children:[i.jsx(U,{strong:!0,style:O.cartItemName,children:e.product.display_name}),i.jsx("div",{style:{marginTop:2},children:(0,i.jsxs)(U,{type:"secondary",style:O.cartItemPrice,children:[(0,A.T4)(Number(e.product.price))," / ",e.product.unit?.display_name||"ชิ้น"]})}),e.details&&e.details.length>0&&i.jsx("div",{style:{marginTop:4,padding:"4px 8px",background:"#f6ffed",borderRadius:4,border:"1px solid #b7eb8f"},children:e.details.map((t,a)=>(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)(U,{style:{fontSize:11,color:"#52c41a"},children:["+ ",t.detail_name]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[i.jsx(U,{style:{fontSize:11,color:"#52c41a"},children:(0,A.T4)(Number(t.extra_price))}),i.jsx(l.ZP,{type:"text",size:"small",danger:!0,icon:i.jsx(v.Z,{style:{fontSize:10}}),onClick:()=>ec(e.cart_item_id,a),style:{height:16,width:16,padding:0}})]})]},`${a}`))}),e.notes&&i.jsx("div",{style:O.cartItemNote,children:(0,i.jsxs)(U,{type:"warning",style:{fontSize:11},children:[i.jsx(S.Z,{style:{marginRight:4}}),e.notes]})})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:6},children:[i.jsx(l.ZP,{type:"text",size:"small",icon:i.jsx(S.Z,{style:{color:$.primary,fontSize:12}}),onClick:()=>eC(e.cart_item_id,e.product.display_name,e.notes||""),style:{background:"#f0f7ff",borderRadius:6,fontSize:11,fontWeight:500,padding:"0 8px",height:24},children:"โน้ต"}),i.jsx(l.ZP,{type:"text",size:"small",icon:i.jsx(w.Z,{style:{color:"#52c41a",fontSize:12}}),onClick:()=>ez(e.cart_item_id,e.product.display_name,e.details),style:{background:"#f6ffed",borderRadius:6,fontSize:11,fontWeight:500,padding:"0 8px",height:24},children:"ท็อปปิ้ง"}),i.jsx(l.ZP,{type:"text",danger:!0,size:"small",icon:i.jsx(v.Z,{style:{fontSize:12}}),onClick:()=>eo(e.cart_item_id),style:{background:"#fff1f0",borderRadius:6,fontSize:11,fontWeight:500,padding:"0 8px",height:24},children:"ลบ"})]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10},children:[(0,i.jsxs)("div",{style:O.quantityControl,children:[i.jsx(z.Z,{onClick:()=>es(e.cart_item_id,e.quantity-1),style:{fontSize:12,cursor:"pointer",padding:4}}),i.jsx(U,{style:{fontWeight:600,minWidth:20,textAlign:"center"},children:e.quantity}),i.jsx(w.Z,{onClick:()=>es(e.cart_item_id,e.quantity+1),style:{fontSize:12,cursor:"pointer",padding:4}})]}),i.jsx(U,{strong:!0,style:{fontSize:15},children:(0,A.T4)((Number(e.product.price)+(e.details||[]).reduce((e,t)=>e+Number(t.extra_price),0))*e.quantity)})]})]})})}):(0,i.jsxs)("div",{style:{textAlign:"center",padding:36,opacity:.5},children:[i.jsx(k.Z,{style:{fontSize:48,marginBottom:16}}),i.jsx(U,{children:"ยังไม่มีสินค้าในตะกร้า"})]}),Q&&i.jsx(y.Z,{title:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx(k.Z,{})," สรุปรายการออเดอร์"]}),width:400,open:ee,onClose:()=>et(!1),footer:i.jsx("div",{style:{padding:"12px 16px"},children:i.jsx(l.ZP,{type:"primary",block:!0,size:"large",loading:ea,onClick:eZ,style:{background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",border:"none",height:52,fontWeight:700,fontSize:18,borderRadius:12,boxShadow:"0 4px 12px rgba(24, 144, 255, 0.35)"},children:"ยืนยันการสั่งออเดอร์"})}),children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:24},children:[(0,i.jsxs)("section",{children:[i.jsx(q,{level:5,style:{marginBottom:12},children:"รายการที่สั่ง"}),i.jsx(g.Z,{itemLayout:"horizontal",dataSource:er,renderItem:e=>(0,i.jsxs)("div",{style:{display:"flex",gap:12,padding:"12px 0",borderBottom:"1px dashed #f0f0f0"},children:[i.jsx("div",{style:{width:40,height:40,borderRadius:8,overflow:"hidden",flexShrink:0,border:"1px solid #f0f0f0"},children:e.product.img_url?i.jsx("img",{src:e.product.img_url,alt:e.product.display_name,style:{width:"100%",height:"100%",objectFit:"cover"}}):i.jsx("div",{style:{width:"100%",height:"100%",background:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(j.Z,{style:{fontSize:16,color:"#ccc"}})})}),i.jsx("div",{style:{flex:1,minWidth:0},children:(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[i.jsx(U,{strong:!0,style:{fontSize:13,display:"block"},children:e.product.display_name}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,marginTop:4,marginBottom:8},children:[i.jsx(l.ZP,{type:"text",size:"small",icon:i.jsx(S.Z,{style:{color:$.primary,fontSize:12}}),onClick:()=>{et(!1),eC(e.cart_item_id,e.product.display_name,e.notes||"")},style:{height:22,padding:"0 4px",fontSize:10,background:"#f0f7ff",borderRadius:4},children:"โน้ต"}),i.jsx(l.ZP,{type:"text",size:"small",icon:i.jsx(w.Z,{style:{color:"#52c41a",fontSize:12}}),onClick:()=>{et(!1),ez(e.cart_item_id,e.product.display_name,e.details)},style:{height:22,padding:"0 4px",fontSize:10,background:"#f6ffed",borderRadius:4},children:"ท็อปปิ้ง"})]}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx(U,{type:"secondary",style:{fontSize:11},children:"ราคาอาหาร"}),i.jsx(U,{type:"secondary",style:{fontSize:11},children:(0,A.T4)(Number(e.product.price))})]}),e.details&&e.details.map((e,t)=>(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsxs)(U,{style:{fontSize:11,color:"#52c41a"},children:["+ ",e.detail_name]}),i.jsx(U,{style:{fontSize:11,color:"#52c41a"},children:(0,A.T4)(Number(e.extra_price))})]},t)),i.jsx("div",{style:{marginTop:2},children:(0,i.jsxs)(U,{type:"secondary",style:{fontSize:11,fontWeight:500},children:["จำนวน: x",e.quantity]})})]}),e.notes&&i.jsx("div",{style:{marginTop:6,padding:"4px 8px",background:"#fffbe6",borderRadius:4,borderLeft:"3px solid #faad14"},children:(0,i.jsxs)(U,{italic:!0,style:{fontSize:11,color:"#d46b08"},children:["โน๊ต: ",e.notes]})})]}),i.jsx(U,{strong:!0,style:{fontSize:14,marginLeft:12,color:$.primary},children:(0,A.T4)((Number(e.product.price)+(e.details||[]).reduce((e,t)=>e+Number(t.extra_price),0))*e.quantity)})]})})]},e.cart_item_id)})]}),(0,i.jsxs)("section",{style:{background:"#f8fafc",padding:12,borderRadius:12,border:"1px solid #e2e8f0"},children:[i.jsx(U,{strong:!0,style:{fontSize:13,marginBottom:8,display:"block",color:"#64748b"},children:"สรุป"}),(()=>{let e={};return er.forEach(t=>{let a=t.product.category?.display_name||"อื่นๆ";e[a]=(e[a]||0)+t.quantity}),Object.entries(e).map(([e,t])=>(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[i.jsx(U,{type:"secondary",style:{fontSize:12},children:e}),(0,i.jsxs)(U,{strong:!0,style:{fontSize:12},children:[t," รายการ"]})]},e))})()]}),(0,i.jsxs)("section",{style:{background:"#fff",padding:"16px 4px",borderTop:"2px solid #f0f0f0"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12},children:[i.jsx(U,{type:"secondary",style:{fontSize:14},children:"รวมจำนวนทั้งหมด"}),(0,i.jsxs)(U,{strong:!0,style:{fontSize:14},children:[ef()," รายการ"]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx(U,{style:{fontSize:18,fontWeight:700},children:"ยอดรวมสุทธิ"}),i.jsx(U,{style:{fontSize:28,fontWeight:800,color:"#1890ff"},children:(0,A.T4)(ey())})]})]})]})}),i.jsx(x.Z,{title:`ระบุรายละเอียดเพิ่มเติม: ${eh?.name}`,open:ex,onOk:()=>{eh&&(el(eh.id,eb),eg(!1),eu(null),s.ZP.success("บันทึกโน๊ตเรียบร้อยแล้ว"))},onCancel:()=>{eg(!1),eu(null)},okText:"บันทึก",cancelText:"ยกเลิก",centered:!0,children:(0,i.jsxs)("div",{style:{padding:"10px 0"},children:[i.jsx(U,{style:{display:"block",marginBottom:8},children:"รายละเอียด / หมายเหตุ"}),i.jsx(h.default.TextArea,{rows:4,value:eb,onChange:e=>ej(e.target.value),placeholder:"เช่น ไม่ใส่ผัก, หวานน้อย, แยกน้ำ...",maxLength:200,showCount:!0})]})}),i.jsx(H,{item:ev,isOpen:ew,onClose:()=>{ek(!1),eS(null)},onSave:e=>{ev&&ep(ev.id,e)}})]})]})]})}function H({item:e,isOpen:t,onClose:a,onSave:n}){let[o,s]=(0,r.useState)([]),d=e=>{s(o.filter((t,a)=>a!==e))},c=(e,t,a)=>{let i=[...o];i[e]={...i[e],[t]:a},s(i)};return i.jsx(x.Z,{title:`รายละเอียดเพิ่มเติม: ${e?.name}`,open:t,onCancel:a,footer:[i.jsx(l.ZP,{onClick:a,children:"ยกเลิก"},"cancel"),i.jsx(l.ZP,{type:"primary",onClick:()=>{n(o.filter(e=>""!==e.detail_name.trim())),a()},children:"บันทึก"},"save")],width:500,centered:!0,children:(0,i.jsxs)("div",{style:{padding:"10px 0"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[i.jsx(U,{strong:!0,children:"รายการเพิ่มเติม"}),i.jsx(l.ZP,{type:"dashed",size:"small",icon:i.jsx(w.Z,{}),onClick:()=>{s([...o,{detail_name:"",extra_price:0}])},children:"เพิ่มรายการ"})]}),0===o.length?i.jsx("div",{style:{textAlign:"center",padding:"20px",background:"#f5f5f5",borderRadius:8,color:"#999"},children:"ไม่มีรายการเพิ่มเติม"}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:o.map((e,t)=>(0,i.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[i.jsx(h.default,{placeholder:"ชื่อรายการ",value:e.detail_name,onChange:e=>c(t,"detail_name",e.target.value),style:{flex:2}}),i.jsx(u.Z,{placeholder:"ราคา",value:e.extra_price,onChange:e=>c(t,"extra_price",e||0),style:{flex:1,height:40,fontSize:14},inputMode:"decimal",controls:!1,min:0,precision:2,formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e.replace(/\$\s?|(,*)/g,""),onKeyDown:t=>{/^[0-9]$/.test(t.key)||["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","."].includes(t.key)||t.preventDefault(),"."===t.key&&e.extra_price.toString().includes(".")&&t.preventDefault()}}),i.jsx(l.ZP,{danger:!0,type:"text",icon:i.jsx(v.Z,{}),onClick:()=>d(t)})]},t))})]})})}},93312:(e,t,a)=>{a.d(t,{L:()=>n});var i=a(20108),r=a(51562);function n(){return(0,i.a)({queryKey:["categories"],queryFn:()=>r.G.findAll(),staleTime:3e5,refetchOnWindowFocus:!1,retry:1})}},51562:(e,t,a)=>{a.d(t,{G:()=>n});var i=a(12529);let r="/pos/category",n={findAll:async(e,t)=>{let a=(0,i.b)("GET",r);t&&(a+=`?${t.toString()}`);let n={};e&&(n.Cookie=e);let o=await fetch(a,{cache:"no-store",credentials:"include",headers:n});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch categories")}return o.json()},findOne:async(e,t)=>{let a=(0,i.b)("GET",`${r}/${e}`),n={};t&&(n.Cookie=t);let o=await fetch(a,{cache:"no-store",credentials:"include",headers:n});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch category")}return o.json()},findOneByName:async(e,t)=>{let a=(0,i.b)("GET",`${r}/name/${e}`),n={};t&&(n.Cookie=t);let o=await fetch(a,{cache:"no-store",credentials:"include",headers:n});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch category by name")}return o.json()},create:async(e,t,a)=>{let n=(0,i.b)("POST",r),o={"Content-Type":"application/json"};t&&(o.Cookie=t),a&&(o["X-CSRF-Token"]=a);let s=await fetch(n,{method:"POST",headers:o,body:JSON.stringify(e),credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to create category")}return s.json()},update:async(e,t,a,n)=>{let o=(0,i.b)("PUT",`${r}/${e}`),s={"Content-Type":"application/json"};a&&(s.Cookie=a),n&&(s["X-CSRF-Token"]=n);let l=await fetch(o,{method:"PUT",headers:s,body:JSON.stringify(t),credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to update category")}return l.json()},delete:async(e,t,a)=>{let n=(0,i.b)("DELETE",`${r}/${e}`),o={};t&&(o.Cookie=t),a&&(o["X-CSRF-Token"]=a);let s=await fetch(n,{method:"DELETE",headers:o,credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to delete category")}}}},47374:(e,t,a)=>{a.d(t,{R:()=>d});var i=a(12529),r=a(40820),n=a(48571);let o=n.Ryn({id:n.Z_8(),product_name:n.Z_8(),display_name:n.Z_8(),description:n.Z_8().optional().or(n.Z_8()),price:n.Rxh().or(n.Z_8().transform(e=>Number(e))),category_id:n.Z_8(),unit_id:n.Z_8(),img_url:n.Z_8().nullable().optional(),create_date:n.Z_8().or(n.hTZ()).transform(e=>new Date(e)),update_date:n.Z_8().or(n.hTZ()).transform(e=>new Date(e)),is_active:n.O72().optional().default(!0),category:n.YjB().optional(),unit:n.YjB().optional()}),s=n.Ryn({data:n.IXX(o),total:n.Rxh(),page:n.Rxh(),last_page:n.Rxh()}),l=r.q.POS.PRODUCTS,d={findAll:async(e=1,t=50,a,r)=>{let n=(0,i.b)("GET",l),o=new URLSearchParams(r||"");o.append("page",e.toString()),o.append("limit",t.toString()),n+=`?${o.toString()}`;let d={};a&&(d.Cookie=a);let c=await fetch(n,{cache:"no-store",credentials:"include",headers:d});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch products")}let p=await c.json();return s.parse(p)},findOne:async(e,t)=>{let a=(0,i.b)("GET",`${l}/${e}`),r={};t&&(r.Cookie=t);let n=await fetch(a,{cache:"no-store",credentials:"include",headers:r});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch product")}let s=await n.json();return o.parse(s)},findOneByName:async(e,t)=>{let a=(0,i.b)("GET",`${l}/name/${e}`),r={};t&&(r.Cookie=t);let n=await fetch(a,{cache:"no-store",credentials:"include",headers:r});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch product by name")}let s=await n.json();return o.parse(s)},create:async(e,t,a)=>{let r=(0,i.b)("POST",l),n={"Content-Type":"application/json"};t&&(n.Cookie=t),a&&(n["X-CSRF-Token"]=a);let o=await fetch(r,{method:"POST",headers:n,body:JSON.stringify(e),credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to create product")}return o.json()},update:async(e,t,a,r)=>{let n=(0,i.b)("PUT",`${l}/${e}`),o={"Content-Type":"application/json"};a&&(o.Cookie=a),r&&(o["X-CSRF-Token"]=r);let s=await fetch(n,{method:"PUT",headers:o,body:JSON.stringify(t),credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to update product")}return s.json()},delete:async(e,t,a)=>{let r=(0,i.b)("DELETE",`${l}/${e}`),n={};t&&(n.Cookie=t),a&&(n["X-CSRF-Token"]=a);let o=await fetch(r,{method:"DELETE",headers:n,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to delete product")}}}},10985:(e,t,a)=>{var i;a.d(t,{c:()=>i}),function(e){e.Available="Available",e.Unavailable="Unavailable"}(i||(i={}))},2504:(e,t,a)=>{a.d(t,{NE:()=>d,Th:()=>s,Do:()=>c,Yx:()=>p,Zu:()=>f,Oi:()=>l,W9:()=>n,Tf:()=>o});var i=a(10985),r=a(13976);function n(e){let t={total:e.length,available:0,occupied:0,inactive:0};return e.forEach(e=>{e.is_active?e.status===i.c.Available?t.available++:t.occupied++:t.inactive++}),t}function o(e){return[...e].sort((e,t)=>{let a=parseInt(e.table_name.replace(/\D/g,"")),i=parseInt(t.table_name.replace(/\D/g,""));return isNaN(a)||isNaN(i)?e.table_name.localeCompare(t.table_name):a-i})}function s(e){return e.filter(e=>e.is_active)}function l(e){return e.is_active?"WaitingForPayment"===e.active_order_status?"waitingForPayment":e.status===i.c.Available?"available":"occupied":"inactive"}function d(e){return e?({Pending:"กำลังดำเนินการ",Cooking:"กำลังปรุง",Served:"เสิร์ฟแล้ว",WaitingForOrder:"รอรับออเดอร์",WaitingForPayment:"รอชำระเงิน",Paid:"ชำระเงินแล้ว",Completed:"เสร็จสมบูรณ์",Cancelled:"ยกเลิก"})[e]||e:""}function c(e){return e.reduce((e,t)=>(e.total++,t.status===r.i.Pending&&e.pending++,t.status===r.i.Cooking&&e.cooking++,t.status===r.i.Served&&e.served++,e),{total:0,pending:0,cooking:0,served:0})}function p(e){switch(e.status){case r.i.Pending:case r.i.Cooking:return"occupied";case r.i.Served:return"waitingForPayment";case r.i.Paid:return"available";default:return"inactive"}}let f=e=>{switch(e){case r.m.DineIn:case"DineIn":return"/pos/channels/dine-in";case r.m.TakeAway:case"TakeAway":return"/pos/channels/takeaway";case r.m.Delivery:case"Delivery":return"/pos/channels/delivery";default:return"/pos/orders"}}},49227:(e,t,a)=>{function i(e){return`฿${e.toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2})}`}function r(e){return e.category?.display_name||"ไม่มีหมวดหมู่"}function n(e){return!!e.img_url&&e.img_url.length>0}a.d(t,{T4:()=>i,dU:()=>n,r6:()=>r})}};