"use strict";exports.id=7557,exports.ids=[7557],exports.modules={61758:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(17577);let a={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 00-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 100 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 00-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 00-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6z"}}]},name:"shopping-cart",theme:"outlined"};var o=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let s=i.forwardRef((e,t)=>i.createElement(o.Z,n({},e,{ref:t,icon:a})))},11834:(e,t,r)=>{r.d(t,{Z:()=>K});var i=r(10326),a=r(17577),o=r.n(a),n=r(46226),s=r(66874),l=r(46752),d=r(71935),c=r(49909),p=r(92121),m=r(61357),x=r(43778),g=r(75698),y=r(11401),b=r(90218),u=r(75958),f=r(97458),h=r(31916),j=r(2643),w=r(24395),k=r(62938),v=r(72380),z=r(61758),S=r(63191),C=r(49965),I=r(46024),_=r(38572),Z=r(35047),B=r(63196),R=r(37938),F=r(44976),N=r(20108),T=r(3341),P=r(19211),W=r(47374);r(83179);var E=r(93312),D=r(77626),L=r.n(D);let $={primary:"var(--color-primary)",primaryDark:"var(--color-primary-hover)",primaryLight:"var(--color-primary-light)",primaryBorder:"var(--color-primary-border)",success:"#10B981",successLight:"#ECFDF5",warning:"#F59E0B",warningLight:"#FFFBEB",warningBorder:"#FDE68A",text:"#1E293B",textSecondary:"#64748B",background:"#F8FAFC",white:"#FFFFFF",border:"#E2E8F0",borderLight:"#F1F5F9"},A={productName:{fontSize:15,fontWeight:600,lineHeight:1.4},productPrice:{fontSize:18,fontWeight:700},cartItemName:{fontSize:14,fontWeight:600}},q={container:{minHeight:"100vh",background:$.background,display:"flex",flexDirection:"column",paddingBottom:100},header:{background:"linear-gradient(145deg, var(--color-primary-hover) 0%, var(--color-primary) 55%, var(--color-primary-soft) 100%)",padding:"20px 24px",boxShadow:"0 4px 20px rgb(var(--color-primary-rgb) / 0.18)",position:"sticky",top:0,zIndex:100,borderRadius:"0 0 24px 24px"},headerContent:{maxWidth:1400,margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},headerLeft:{display:"flex",alignItems:"center",gap:14,flex:1,minWidth:0},headerBackButton:{display:"flex",alignItems:"center",justifyContent:"center",width:42,height:42,borderRadius:14,background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"#fff",cursor:"pointer",transition:"all 0.2s ease"},headerIconWrapper:{width:48,height:48,borderRadius:16,background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",display:"flex",alignItems:"center",justifyContent:"center"},headerInfo:{flex:1,minWidth:0},headerTitle:{color:"#fff",fontSize:22,fontWeight:700,margin:0,lineHeight:1.2,textShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},headerSubtitle:{color:"rgba(255, 255, 255, 0.9)",fontSize:14,marginTop:4,fontWeight:500},headerActions:{display:"flex",alignItems:"center",gap:10},categoryBar:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",padding:"14px 24px",borderBottom:"1px solid rgba(226, 232, 240, 0.8)",position:"sticky",top:84,zIndex:99,overflow:"hidden"},categoryScroll:{display:"flex",gap:10,overflowX:"auto",paddingBottom:2},content:{maxWidth:1400,margin:"0 auto",padding:"24px",flex:1,width:"100%"},productGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:20},productCard:{background:$.white,borderRadius:20,overflow:"hidden",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",border:"1px solid rgba(226, 232, 240, 0.8)",position:"relative"},productImage:{width:"100%",height:160,position:"relative",overflow:"hidden",background:`linear-gradient(135deg, ${$.primaryLight} 0%, #DBEAFE 100%)`},productInfo:{padding:16},productName:{...A.productName,color:$.text,marginBottom:6,display:"block"},productCategory:{fontSize:11,color:$.textSecondary,marginBottom:10},productFooter:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:14,paddingTop:12,borderTop:"1px solid #F1F5F9"},productPrice:{...A.productPrice,color:$.primary},addButton:{background:`linear-gradient(135deg, ${$.success} 0%, #059669 100%)`,color:"#fff",border:"none",borderRadius:12,padding:"10px 16px",fontSize:13,fontWeight:600,cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:6,boxShadow:`0 4px 12px ${$.success}40`},paginationContainer:{display:"flex",justifyContent:"center",marginTop:32,padding:"24px 0"},floatingCartButton:{width:64,height:64,borderRadius:20,background:`linear-gradient(145deg, ${$.primary} 0%, ${$.primaryDark} 100%)`,boxShadow:"0 8px 24px rgb(var(--color-primary-rgb) / 0.32)",display:"flex",alignItems:"center",justifyContent:"center",border:"3px solid #fff"},loadingContainer:{textAlign:"center",padding:80,background:"#fff",borderRadius:24,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.04)"},emptyContainer:{textAlign:"center",padding:80,background:"#fff",borderRadius:24,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.04)"}};A.cartItemName,$.text,$.textSecondary,$.warningLight,$.warningBorder;let O={modalTitleRow:{display:"flex",alignItems:"center",gap:10},modalIconBase:{width:36,height:36,borderRadius:10,display:"flex",alignItems:"center",justifyContent:"center"},modalButton:{borderRadius:10,height:42},modalButtonLarge:{borderRadius:10,height:44},cartItemContainer:{padding:"12px",marginBottom:"12px",background:"#fff",borderRadius:"16px",border:"none",transition:"all 0.2s",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},cartItemRow:{display:"flex",gap:12,width:"100%"},cartItemImage:{width:72,height:72,borderRadius:12,overflow:"hidden",border:"1px solid #f1f5f9"},cartItemImagePlaceholder:{width:72,height:72,borderRadius:12,background:"#f8fafc",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #f1f5f9"},cartItemTag:{border:"none",background:"#f1f5f9",color:"#64748b",fontSize:11,padding:"0 6px",margin:0,borderRadius:6},cartItemNote:{marginTop:4,background:"#fef2f2",padding:"2px 6px",borderRadius:4,display:"inline-block",border:"1px solid #fecaca"},cartItemQtyControl:{display:"flex",alignItems:"center",background:"#f8fafc",borderRadius:10,padding:"4px",border:"1px solid #e2e8f0"},drawerTitleRow:{display:"flex",alignItems:"center",gap:12},drawerTitleIcon:{width:40,height:40,background:"#ecfdf5",borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center"},checkoutItemRow:{display:"flex",gap:12,padding:"14px 0",borderBottom:"1px dashed #E2E8F0"},checkoutItemImage:{width:44,height:44,borderRadius:10,overflow:"hidden",flexShrink:0,border:"1px solid #E2E8F0"},checkoutItemImagePlaceholder:{width:"100%",height:"100%",background:$.primaryLight,display:"flex",alignItems:"center",justifyContent:"center"},flexRowBetween:{display:"flex",justifyContent:"space-between",alignItems:"center"}},H=()=>i.jsx(L(),{id:"7a2cfa1861a4fa31",dynamic:[$.primaryBorder,$.primary,$.primary],children:`.pos-product-card{-webkit-transform:translatey(0);-moz-transform:translatey(0);-ms-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}.pos-product-card:hover{-webkit-transform:translatey(-6px);-moz-transform:translatey(-6px);-ms-transform:translatey(-6px);-o-transform:translatey(-6px);transform:translatey(-6px);-webkit-box-shadow:0 12px 32px rgba(0,0,0,.1);-moz-box-shadow:0 12px 32px rgba(0,0,0,.1);box-shadow:0 12px 32px rgba(0,0,0,.1);border-color:${$.primaryBorder}}.pos-product-card:active{-webkit-transform:translatey(-2px)scale(.99);-moz-transform:translatey(-2px)scale(.99);-ms-transform:translatey(-2px)scale(.99);-o-transform:translatey(-2px)scale(.99);transform:translatey(-2px)scale(.99)}.pos-add-button:hover{background:-webkit-linear-gradient(315deg,#059669 0%,#047857 100%);background:-moz-linear-gradient(315deg,#059669 0%,#047857 100%);background:-o-linear-gradient(315deg,#059669 0%,#047857 100%);background:linear-gradient(135deg,#059669 0%,#047857 100%);-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-ms-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05);-webkit-box-shadow:0 6px 16px rgba(16,185,129,.5);-moz-box-shadow:0 6px 16px rgba(16,185,129,.5);box-shadow:0 6px 16px rgba(16,185,129,.5)}.pos-add-button:active{-webkit-transform:scale(.98);-moz-transform:scale(.98);-ms-transform:scale(.98);-o-transform:scale(.98);transform:scale(.98)}@-webkit-keyframes pos-fade-in{from{opacity:0;-webkit-transform:translatey(16px);transform:translatey(16px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes pos-fade-in{from{opacity:0;-moz-transform:translatey(16px);transform:translatey(16px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes pos-fade-in{from{opacity:0;-o-transform:translatey(16px);transform:translatey(16px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes pos-fade-in{from{opacity:0;-webkit-transform:translatey(16px);-moz-transform:translatey(16px);-o-transform:translatey(16px);transform:translatey(16px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.pos-fade-in{-webkit-animation:pos-fade-in.4s ease-out forwards;-moz-animation:pos-fade-in.4s ease-out forwards;-o-animation:pos-fade-in.4s ease-out forwards;animation:pos-fade-in.4s ease-out forwards}.pos-delay-1{-webkit-animation-delay:.05s;-moz-animation-delay:.05s;-o-animation-delay:.05s;animation-delay:.05s;opacity:0}.pos-delay-2{-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s;opacity:0}.pos-delay-3{-webkit-animation-delay:.15s;-moz-animation-delay:.15s;-o-animation-delay:.15s;animation-delay:.15s;opacity:0}.pos-delay-4{-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s;opacity:0}.pos-category-scroll-row::-webkit-scrollbar,.pos-category-bar::-webkit-scrollbar{height:4px}.pos-category-scroll-row::-webkit-scrollbar-track,.pos-category-bar::-webkit-scrollbar-track{background:transparent}.pos-category-scroll-row::-webkit-scrollbar-thumb,.pos-category-bar::-webkit-scrollbar-thumb{background:#CBD5E1;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}.pos-category-btn{-webkit-border-radius:12px!important;-moz-border-radius:12px!important;border-radius:12px!important;font-weight:600!important;height:42px!important;padding:0 20px!important;border:1.5px solid#E2E8F0!important;-webkit-transition:all.2s ease!important;-moz-transition:all.2s ease!important;-o-transition:all.2s ease!important;transition:all.2s ease!important}.pos-category-btn:hover{border-color:${$.primary}!important;color:${$.primary}!important}.pos-cart-icon-btn{padding:0!important;display:-webkit-inline-box!important;display:-webkit-inline-flex!important;display:-moz-inline-box!important;display:-ms-inline-flexbox!important;display:inline-flex!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-moz-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;-webkit-box-pack:center!important;-webkit-justify-content:center!important;-moz-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important;line-height:1!important;min-width:40px!important;width:40px!important;height:40px!important}.pos-cart-qty-btn{width:40px!important;height:40px!important}.pos-cart-action-btn{width:40px!important;height:40px!important}.pos-header-back:hover{background:rgba(255,255,255,.3)!important;-webkit-transform:translatex(-2px);-moz-transform:translatex(-2px);-ms-transform:translatex(-2px);-o-transform:translatex(-2px);transform:translatex(-2px)}.pos-header-back:focus-visible,.pos-category-btn:focus-visible,.pos-add-button:focus-visible,.pos-cart-icon-btn:focus-visible,.pos-product-card:focus-visible,.pos-product-search:focus-visible{outline:3px solid rgba(59,130,246,.5);outline-offset:2px}.pos-floating-btn-container{position:fixed!important;bottom:32px!important;right:32px!important;z-index:1000!important;-webkit-transition:all.3s cubic-bezier(.175,.885,.32,1.275);-moz-transition:all.3s cubic-bezier(.175,.885,.32,1.275);-o-transition:all.3s cubic-bezier(.175,.885,.32,1.275);transition:all.3s cubic-bezier(.175,.885,.32,1.275)}@-webkit-keyframes pos-pulse{0%,100%{-webkit-box-shadow:0 8px 24px rgb(var(--color-primary-rgb)/.32);box-shadow:0 8px 24px rgb(var(--color-primary-rgb)/.32)}50%{-webkit-box-shadow:0 12px 32px rgb(var(--color-primary-rgb)/.45);box-shadow:0 12px 32px rgb(var(--color-primary-rgb)/.45)}}@-moz-keyframes pos-pulse{0%,100%{-moz-box-shadow:0 8px 24px rgb(var(--color-primary-rgb)/.32);box-shadow:0 8px 24px rgb(var(--color-primary-rgb)/.32)}50%{-moz-box-shadow:0 12px 32px rgb(var(--color-primary-rgb)/.45);box-shadow:0 12px 32px rgb(var(--color-primary-rgb)/.45)}}@-o-keyframes pos-pulse{0%,100%{box-shadow:0 8px 24px rgb(var(--color-primary-rgb)/.32)}50%{box-shadow:0 12px 32px rgb(var(--color-primary-rgb)/.45)}}@keyframes pos-pulse{0%,100%{-webkit-box-shadow:0 8px 24px rgb(var(--color-primary-rgb)/.32);-moz-box-shadow:0 8px 24px rgb(var(--color-primary-rgb)/.32);box-shadow:0 8px 24px rgb(var(--color-primary-rgb)/.32)}50%{-webkit-box-shadow:0 12px 32px rgb(var(--color-primary-rgb)/.45);-moz-box-shadow:0 12px 32px rgb(var(--color-primary-rgb)/.45);box-shadow:0 12px 32px rgb(var(--color-primary-rgb)/.45)}}.pos-cart-pulse{-webkit-animation:pos-pulse 2s ease-in-out infinite;-moz-animation:pos-pulse 2s ease-in-out infinite;-o-animation:pos-pulse 2s ease-in-out infinite;animation:pos-pulse 2s ease-in-out infinite}@media(max-width:768px){.pos-cart-qty-btn,.pos-cart-action-btn{width:44px!important;height:44px!important}.pos-cart-item-controls{gap:8px!important;-webkit-flex-wrap:wrap!important;-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.pos-cart-action-row{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-pack:end!important;-webkit-justify-content:flex-end!important;-moz-box-pack:end!important;-ms-flex-pack:end!important;justify-content:flex-end!important}.pos-header-mobile{padding:16px 16px 20px!important;-webkit-border-radius:0 0 20px 20px!important;-moz-border-radius:0 0 20px 20px!important;border-radius:0 0 20px 20px!important}.pos-header-title-mobile{font-size:18px!important}.pos-header-subtitle-mobile{font-size:12px!important}.pos-category-bar-mobile{padding:12px 16px!important;top:76px!important}.pos-content-mobile{padding:16px!important}.pos-product-grid-mobile{grid-template-columns:repeat(2,1fr)!important;gap:14px!important}.pos-product-image-mobile{height:130px!important}.pos-product-info-mobile{padding:12px!important}.pos-product-name-mobile{font-size:13px!important;line-height:1.3!important}.pos-product-price-mobile{font-size:15px!important}.pos-add-button-mobile{padding:8px 12px!important;font-size:11px!important;-webkit-border-radius:10px!important;-moz-border-radius:10px!important;border-radius:10px!important}.pos-floating-btn-container{bottom:100px!important;right:20px!important}.pos-product-card{min-height:220px}.pos-category-btn{height:38px!important;padding:0 16px!important;font-size:13px!important}}@media(max-width:480px){.pos-cart-item-controls{-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-moz-box-orient:vertical!important;-moz-box-direction:normal!important;-ms-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:stretch!important;-webkit-align-items:stretch!important;-moz-box-align:stretch!important;-ms-flex-align:stretch!important;align-items:stretch!important}.pos-cart-qty-control{-webkit-box-pack:justify!important;-webkit-justify-content:space-between!important;-moz-box-pack:justify!important;-ms-flex-pack:justify!important;justify-content:space-between!important}.pos-cart-action-row{-webkit-box-pack:end!important;-webkit-justify-content:flex-end!important;-moz-box-pack:end!important;-ms-flex-pack:end!important;justify-content:flex-end!important}.pos-product-grid-mobile{gap:10px!important}.pos-product-image-mobile{height:110px!important}.pos-product-info-mobile{padding:10px!important}.pos-product-footer-mobile{-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-moz-box-orient:vertical!important;-moz-box-direction:normal!important;-ms-flex-direction:column!important;flex-direction:column!important;gap:10px!important;-webkit-box-align:stretch!important;-webkit-align-items:stretch!important;-moz-box-align:stretch!important;-ms-flex-align:stretch!important;align-items:stretch!important}.pos-add-button-mobile{width:100%!important;-webkit-box-pack:center!important;-webkit-justify-content:center!important;-moz-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important}}@media(min-width:1200px){.pos-product-grid{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))!important;gap:24px!important}}@media(min-width:1600px){.pos-product-grid{grid-template-columns:repeat(auto-fill,minmax(240px,1fr))!important}}@media(hover:none){.pos-cart-icon-btn{min-width:44px!important;width:44px!important;height:44px!important}.pos-product-card:active{-webkit-transform:scale(.98)!important;-moz-transform:scale(.98)!important;-ms-transform:scale(.98)!important;-o-transform:scale(.98)!important;transform:scale(.98)!important}.pos-product-card:hover{-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important;-webkit-box-shadow:0 4px 16px rgba(0,0,0,.04)!important;-moz-box-shadow:0 4px 16px rgba(0,0,0,.04)!important;box-shadow:0 4px 16px rgba(0,0,0,.04)!important}}@media(prefers-reduced-motion:reduce){*,*::before,*::after{-webkit-animation-duration:.01ms!important;-moz-animation-duration:.01ms!important;-o-animation-duration:.01ms!important;animation-duration:.01ms!important;-webkit-animation-iteration-count:1!important;-moz-animation-iteration-count:1!important;-o-animation-iteration-count:1!important;animation-iteration-count:1!important;-webkit-transition-duration:.01ms!important;-moz-transition-duration:.01ms!important;-o-transition-duration:.01ms!important;transition-duration:.01ms!important;scroll-behavior:auto!important}.pos-cart-pulse{-webkit-animation:none!important;-moz-animation:none!important;-o-animation:none!important;animation:none!important}}`});var M=r(41947),U=r(49227);let{Title:G,Text:J}=s.default;function K({title:e,subtitle:t,icon:r,onConfirmOrder:o}){let{isLoading:s}=(0,R.x)(),h=(0,Z.useRouter)(),[_,D]=(0,a.useState)(1),[L,A]=(0,a.useState)(void 0),{data:K=[]}=(0,E.L)(),[X,ee]=(0,a.useState)(""),[et,er]=(0,a.useState)(""),{products:ei,isLoading:ea,total:eo}=function(e=1,t=20,r,i){let{socket:o}=(0,a.useContext)(P.J);(0,F.NL)();let{data:n,error:s,isLoading:l,refetch:d}=(0,N.a)({queryKey:["products",e,t,r||"all",i||""],queryFn:async()=>{let a=new URLSearchParams;r&&a.append("category_id",r);let o=i?.trim();return o&&a.append("q",o),await W.R.findAll(e,t,void 0,a)},placeholderData:T.Wk,staleTime:3e4});return{products:n?.data||[],total:n?.total||0,currentPage:n?.page||1,lastPage:n?.last_page||1,isLoading:l,isError:s,mutate:d}}(_,20,L,et),[en,es]=(0,a.useState)(!1),[el,ed]=(0,a.useState)(!1),[ec,ep]=(0,a.useState)(!1),[em,ex]=(0,a.useState)(!1),[eg,ey]=(0,a.useState)(null),{cartItems:eb,addToCart:eu,removeFromCart:ef,updateQuantity:eh,updateItemNote:ej,clearCart:ew,updateItemDetails:ek,orderMode:ev,selectedDiscount:ez}=(0,B.j)(),{totalItems:eS,subtotal:eC,discountAmount:eI,finalPrice:e_}=(0,a.useMemo)(()=>{let e=0,t=0;for(let r of eb)e+=r.quantity,t+=(("DELIVERY"===ev?Number(r.product.price_delivery??r.product.price):Number(r.product.price))+(r.details||[]).reduce((e,t)=>e+Number(t.extra_price||0),0))*r.quantity;let r=0;ez&&(r="Percentage"===ez.discount_type?t*ez.discount_amount/100:Math.min(ez.discount_amount,t));let i=Math.max(0,t-r);return{totalItems:e,subtotal:t,discountAmount:r,finalPrice:i}},[eb,ev,ez]),eZ=(0,a.useCallback)(e=>"DELIVERY"===ev?Number(e.price_delivery??e.price):Number(e.price),[ev]),[eB,eR]=(0,a.useState)(!1),[eF,eN]=(0,a.useState)(null),[eT,eP]=(0,a.useState)(""),[eW,eE]=(0,a.useState)(!1),[eD,eL]=(0,a.useState)(null),e$=(0,a.useCallback)((e,t,r)=>{eL({id:e,name:t,details:r||[]}),eE(!0)},[]),eA=(0,a.useCallback)((e,t,r)=>{eN({id:e,name:t,note:r}),eP(r||""),eR(!0)},[]),eq=(0,a.useCallback)(()=>{eF&&(ej(eF.id,eT),eR(!1),eN(null),l.ZP.success("บันทึกโน้ตเรียบร้อยแล้ว"))},[eF,eT,ej]),eO=(0,a.useCallback)(e=>{let t=eu(e),r=e.display_name||e.product_name||"สินค้า";l.ZP.open({type:"success",content:(0,i.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[(0,i.jsxs)("span",{children:["เพิ่ม ",r," ลงตะกร้าแล้ว"]}),i.jsx(d.ZP,{type:"link",size:"small",onClick:e=>{e.preventDefault(),ef(t),l.ZP.destroy("cart-add")},style:{padding:0,height:"auto"},children:"Undo"})]}),key:"cart-add",duration:2.5})},[eu,ef]),eH=e=>{ey(e),ex(!0)},eM=()=>{ex(!1),ey(null)},eU=(0,a.useCallback)(()=>{if(0===eb.length){l.ZP.warning("กรุณาเพิ่มสินค้าลงตะกร้าก่อน");return}ed(!0)},[eb.length]),eG=(0,a.useCallback)(async()=>{try{ep(!0),await o(),ed(!1),es(!1)}catch(e){console.error(e)}finally{ep(!1)}},[o]),eJ=(0,a.useMemo)(()=>(0,M.S)(eb),[eb]),eK=(0,a.useMemo)(()=>{let e={};return eb.forEach(t=>{let r=t.product.category?.display_name||"อื่นๆ";e[r]=(e[r]||0)+t.quantity}),Object.entries(e).map(([e,t])=>({name:e,count:t}))},[eb]),eQ=(0,a.useCallback)(e=>i.jsx(Q,{item:e,getProductUnitPrice:eZ,onUpdateQuantity:eh,onRemove:ef,onOpenNote:eA,onOpenDetail:e$}),[eZ,eh,ef,eA,e$]);return(0,i.jsxs)(i.Fragment,{children:[i.jsx(H,{}),(0,i.jsxs)("div",{style:q.container,children:[i.jsx("header",{style:q.header,className:"pos-header-mobile",role:"banner",children:i.jsx("div",{style:q.headerContent,children:(0,i.jsxs)("div",{style:q.headerLeft,children:[i.jsx("button",{className:"pos-header-back",style:q.headerBackButton,onClick:()=>h.back(),"aria-label":"กลับ",children:i.jsx(j.Z,{style:{fontSize:18}})}),i.jsx("div",{style:q.headerIconWrapper,children:r}),(0,i.jsxs)("div",{style:q.headerInfo,children:[i.jsx(G,{level:4,style:q.headerTitle,className:"pos-header-title-mobile",children:e}),i.jsx(J,{style:q.headerSubtitle,className:"pos-header-subtitle-mobile",children:t})]})]})})}),i.jsx("nav",{style:q.categoryBar,className:"pos-category-bar pos-category-bar-mobile",role:"navigation","aria-label":"ตัวกรองหมวดหมู่",children:(0,i.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto",display:"flex",flexDirection:"column",gap:12},children:[i.jsx(c.default,{value:X,allowClear:!0,prefix:i.jsx(w.Z,{style:{color:"#94a3b8"}}),placeholder:"ค้นหาสินค้า...","aria-label":"ค้นหาสินค้า",onChange:e=>{ee(e.target.value),D(1)},className:"pos-product-search",style:{borderRadius:16,height:44}}),(0,i.jsxs)("div",{style:q.categoryScroll,className:"pos-category-scroll-row",children:[i.jsx(d.ZP,{type:L?"text":"primary",onClick:()=>{A(void 0),D(1)},className:"pos-category-btn",style:{background:L?"white":$.primary,borderColor:L?"#E2E8F0":$.primary,color:L?"#64748B":"#fff",border:L?"1px solid #E2E8F0":`1px solid ${$.primary}`,fontWeight:L?400:600,boxShadow:L?"none":"0 4px 12px rgba(79, 70, 229, 0.2)",height:36,padding:"0 20px",borderRadius:18,transition:"all 0.3s ease"},children:"ทั้งหมด"}),K.map(e=>i.jsx(d.ZP,{type:L===e.id?"primary":"text",onClick:()=>{A(e.id),D(1)},className:"pos-category-btn",style:{background:L===e.id?$.primary:"white",borderColor:L===e.id?$.primary:"#E2E8F0",color:L===e.id?"#fff":"#64748B",border:L===e.id?`1px solid ${$.primary}`:"1px solid #E2E8F0",fontWeight:L===e.id?600:400,boxShadow:L===e.id?"0 4px 12px rgba(79, 70, 229, 0.2)":"none",height:36,padding:"0 20px",borderRadius:18,transition:"all 0.3s ease"},children:e.display_name},e.id))]})]})}),i.jsx("main",{style:q.content,className:"pos-content-mobile",role:"main",children:ea&&!s?(0,i.jsxs)("div",{style:q.loadingContainer,children:[i.jsx(p.Z,{size:"large"}),i.jsx(J,{style:{display:"block",marginTop:16,color:$.textSecondary},children:"กำลังโหลดสินค้า..."})]}):ei.length>0?(0,i.jsxs)(i.Fragment,{children:[i.jsx("div",{style:q.productGrid,className:"pos-product-grid pos-product-grid-mobile",children:ei.map((e,t)=>(0,i.jsxs)("article",{className:`pos-product-card pos-fade-in pos-delay-${t%4+1}`,style:q.productCard,onClick:()=>eH(e),role:"button",tabIndex:0,"aria-label":`ดูรายละเอียด ${e.display_name}`,"aria-haspopup":"dialog",onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),eH(e))},children:[i.jsx("div",{style:q.productImage,className:"pos-product-image-mobile",children:(0,U.dU)(e)?i.jsx(n.default,{alt:e.product_name,src:e.img_url,fill:!0,style:{objectFit:"cover"},sizes:"(max-width: 768px) 50vw, 220px"}):i.jsx("div",{style:{width:"100%",height:"100%",background:`linear-gradient(135deg, ${$.primaryLight} 0%, #DBEAFE 100%)`,display:"flex",justifyContent:"center",alignItems:"center"},children:i.jsx(k.Z,{style:{fontSize:48,color:$.primary,opacity:.4}})})}),(0,i.jsxs)("div",{style:q.productInfo,className:"pos-product-info-mobile",children:[i.jsx(J,{ellipsis:!0,style:q.productName,className:"pos-product-name-mobile",children:e.display_name}),i.jsx(m.Z,{color:"blue",style:{fontSize:10,marginBottom:0,borderRadius:6,border:"none",background:$.primaryLight,color:$.primary},children:(0,U.r6)(e)}),(0,i.jsxs)("div",{style:q.productFooter,className:"pos-product-footer-mobile",children:[i.jsx(J,{style:q.productPrice,className:"pos-product-price-mobile",children:(0,U.T4)(eZ(e))}),i.jsx(d.ZP,{type:"primary",size:"small",icon:i.jsx(v.Z,{}),className:"pos-add-button pos-add-button-mobile",style:q.addButton,onClick:t=>{t.stopPropagation(),eO(e)},children:"เพิ่ม"})]})]})]},e.id))}),i.jsx("div",{style:q.paginationContainer,children:i.jsx(x.Z,{current:_,total:eo,pageSize:20,onChange:e=>D(e),showSizeChanger:!1,showTotal:e=>`ทั้งหมด ${e} รายการ`})})]}):i.jsx("div",{style:{background:"#fff",borderRadius:24,padding:"80px 24px",textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.04)"},children:i.jsx(g.Z,{image:g.Z.PRESENTED_IMAGE_SIMPLE,imageStyle:{height:120},description:(0,i.jsxs)("div",{style:{marginTop:20},children:[i.jsx(G,{level:4,style:{marginBottom:8,color:$.text},children:et?"ไม่พบสินค้า":"ยังไม่มีข้อมูลสินค้า"}),i.jsx(J,{type:"secondary",style:{fontSize:15},children:et?`ไม่พบสินค้า${et?` สำหรับ “${et}”`:""} ลองเปลี่ยนคำค้นหา หรือเลือกหมวดอื่น`:"กรุณาเพิ่มสินค้าก่อนใช้งาน"})]}),children:et?i.jsx(d.ZP,{size:"large",onClick:()=>{ee(""),D(1)},style:{height:52,padding:"0 40px",borderRadius:16,fontSize:16,fontWeight:700,marginTop:20,background:"#fff",border:`1px solid ${$.border}`,color:$.text},children:"ล้างคำค้นหา"}):i.jsx(d.ZP,{type:"primary",size:"large",icon:i.jsx(k.Z,{}),style:{height:52,padding:"0 40px",borderRadius:16,fontSize:16,fontWeight:600,marginTop:20,background:`linear-gradient(135deg, ${$.primary} 0%, ${$.primaryDark} 100%)`,border:"none",boxShadow:"0 8px 20px rgb(var(--color-primary-rgb) / 0.25)"},onClick:()=>h.push("/pos/products"),children:"ไปหน้าจัดการสินค้า"})})})}),i.jsx("div",{className:"pos-floating-btn-container",children:i.jsx(y.Z,{count:eS,size:"default",offset:[-5,5],children:i.jsx(d.ZP,{type:"primary",shape:"circle",size:"large",icon:i.jsx(z.Z,{style:{fontSize:26}}),onClick:()=>es(!0),style:q.floatingCartButton,className:eS>0?"pos-cart-pulse":"","aria-label":`ตะกร้าสินค้า ${eS} รายการ`})})}),i.jsx(b.Z,{title:(0,i.jsxs)("div",{style:O.drawerTitleRow,children:[i.jsx("div",{style:O.drawerTitleIcon,children:i.jsx(z.Z,{style:{fontSize:20,color:"#10b981"}})}),(0,i.jsxs)("div",{children:[i.jsx(J,{style:{fontSize:18,fontWeight:700,color:"#1e293b",display:"block",lineHeight:1.2},children:"ตะกร้าสินค้า"}),(0,i.jsxs)(J,{type:"secondary",style:{fontSize:12,fontWeight:500},children:[eS," รายการ"]})]})]}),placement:"right",onClose:()=>es(!1),open:en,width:420,styles:{wrapper:{maxWidth:"100vw"},body:{padding:"16px 20px",background:"#f8fafc"},header:{padding:"20px",borderBottom:"1px solid #f1f5f9"},footer:{padding:"20px",borderTop:"1px solid #e2e8f0",background:"white"}},footer:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)(J,{type:"secondary",style:{fontSize:15},children:["ยอดรวม (",eS," รายการ)"]}),i.jsx(J,{style:{fontWeight:600,fontSize:16},children:(0,U.T4)(eC)})]}),eI>0&&(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx(J,{type:"secondary",style:{fontSize:15},children:"ส่วนลด"}),(0,i.jsxs)(J,{style:{fontWeight:600,fontSize:16,color:"#ef4444"},children:["-",(0,U.T4)(eI)]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[i.jsx(J,{style:{fontSize:16,fontWeight:700,color:"#1e293b"},children:"ยอดสุทธิ"}),i.jsx("div",{style:{textAlign:"right"},children:i.jsx(G,{level:2,style:{margin:0,color:"#10b981",lineHeight:1},children:(0,U.T4)(e_)})})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginTop:8},children:[i.jsx(d.ZP,{size:"large",danger:!0,icon:i.jsx(S.Z,{}),onClick:()=>{u.Z.confirm({title:"ล้างตะกร้าสินค้า?",content:"รายการทั้งหมดจะถูกลบ และไม่สามารถย้อนกลับได้",okText:"ล้างตะกร้า",okType:"danger",cancelText:"ยกเลิก",centered:!0,onOk:ew})},disabled:0===eb.length,style:{borderRadius:12,height:48,fontWeight:600,border:"none",background:"#fef2f2",color:"#ef4444"},children:"ล้างตะกร้า"}),i.jsx(d.ZP,{type:"primary",size:"large",onClick:eU,disabled:0===eb.length,style:{borderRadius:12,height:48,fontWeight:700,background:"#10b981",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.4)"},children:"ชำระเงิน"})]})]}),children:eb.length>0?i.jsx(f.Z,{dataSource:eb,renderItem:eQ,split:!1}):(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",opacity:.5},children:[i.jsx(z.Z,{style:{fontSize:64,color:"#cbd5e1",marginBottom:16}}),i.jsx(J,{style:{color:"#64748b",fontSize:16},children:"ไม่มีสินค้าในตะกร้า"}),i.jsx(J,{style:{color:"#94a3b8",fontSize:14},children:"เลือกสินค้าจากเมนูเพื่อเพิ่มลงตะกร้า"})]})}),en&&i.jsx(b.Z,{title:(0,i.jsxs)("div",{style:{...O.modalTitleRow,color:"#fff"},children:[i.jsx(z.Z,{style:{fontSize:20}}),i.jsx("span",{style:{fontWeight:700,fontSize:18},children:"สรุปรายการออเดอร์"})]}),width:420,open:el,onClose:()=>ed(!1),closeIcon:i.jsx(C.Z,{style:{color:"#fff"}}),styles:{wrapper:{maxWidth:"100vw"},header:{background:`linear-gradient(145deg, ${$.primary} 0%, ${$.primaryDark} 100%)`,padding:"20px 24px"},body:{padding:"0 24px"},footer:{padding:"16px 24px"}},footer:i.jsx("div",{style:{padding:"8px 0"},children:i.jsx(d.ZP,{type:"primary",block:!0,size:"large",loading:ec,onClick:eG,style:{background:`linear-gradient(135deg, ${$.success} 0%, #059669 100%)`,border:"none",height:56,fontWeight:700,fontSize:18,borderRadius:14,boxShadow:`0 8px 20px ${$.success}40`},children:"ยืนยันการสั่งออเดอร์"})}),children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:24,padding:"24px 0"},children:[(0,i.jsxs)("section",{children:[i.jsx(G,{level:5,style:{marginBottom:16,color:$.text},children:"รายการที่สั่ง"}),i.jsx(f.Z,{itemLayout:"horizontal",dataSource:eJ,renderItem:e=>i.jsx(Y,{item:e,getProductUnitPrice:eZ})})]}),(0,i.jsxs)("section",{style:{background:"#F8FAFC",padding:16,borderRadius:14,border:"1px solid #E2E8F0"},children:[i.jsx(J,{strong:!0,style:{fontSize:14,marginBottom:12,display:"block",color:$.textSecondary},children:"สรุปตามหมวดหมู่"}),eK.map(({name:e,count:t})=>(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[i.jsx(J,{type:"secondary",style:{fontSize:13},children:e}),(0,i.jsxs)(J,{strong:!0,style:{fontSize:13},children:[t," รายการ"]})]},e))]}),(0,i.jsxs)("section",{style:{background:"#fff",padding:"20px",borderTop:"2px solid #E2E8F0"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[i.jsx(J,{type:"secondary",style:{fontSize:15},children:"รวมจำนวนทั้งหมด"}),(0,i.jsxs)(J,{strong:!0,style:{fontSize:15},children:[eS," รายการ"]})]}),eI>0&&(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[i.jsx(J,{type:"secondary",style:{fontSize:15},children:"ส่วนลด"}),(0,i.jsxs)(J,{strong:!0,style:{fontSize:15,color:"#ef4444"},children:["-",(0,U.T4)(eI)]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx(J,{style:{fontSize:20,fontWeight:700,color:$.text},children:"ยอดรวมสุทธิ"}),i.jsx(J,{style:{fontSize:32,fontWeight:800,color:$.primary},children:(0,U.T4)(e_)})]})]})]})}),i.jsx(u.Z,{title:(0,i.jsxs)("div",{style:O.modalTitleRow,children:[i.jsx("div",{style:{...O.modalIconBase,background:$.warningLight},children:i.jsx(I.Z,{style:{color:$.warning,fontSize:16}})}),(0,i.jsxs)("span",{children:["ระบุรายละเอียด: ",eF?.name]})]}),open:eB,onOk:eq,onCancel:()=>{eR(!1),eN(null)},okText:"บันทึก",cancelText:"ยกเลิก",centered:!0,okButtonProps:{style:{...O.modalButton,background:$.primary}},cancelButtonProps:{style:O.modalButton},children:(0,i.jsxs)("div",{style:{padding:"16px 0"},children:[i.jsx(J,{style:{display:"block",marginBottom:10,color:$.textSecondary},children:"รายละเอียด / หมายเหตุ"}),i.jsx(c.default.TextArea,{rows:4,value:eT,onChange:e=>eP(e.target.value),placeholder:"เช่น ไม่ใส่ผัก, หวานน้อย, แยกน้ำ...",maxLength:200,showCount:!0,style:{borderRadius:10}})]})}),i.jsx(u.Z,{title:(0,i.jsxs)("div",{style:O.modalTitleRow,children:[i.jsx("div",{style:{...O.modalIconBase,background:$.primaryLight},children:i.jsx(k.Z,{style:{color:$.primary,fontSize:16}})}),i.jsx("span",{style:{fontWeight:700},children:eg?.display_name})]}),open:em,onCancel:eM,centered:!0,width:560,footer:[i.jsx(d.ZP,{onClick:eM,style:O.modalButtonLarge,children:"ปิด"},"close"),i.jsx(d.ZP,{type:"primary",icon:i.jsx(v.Z,{}),onClick:()=>{eg&&(eO(eg),eM())},style:{...O.modalButtonLarge,background:`linear-gradient(135deg, ${$.success} 0%, #059669 100%)`,border:"none",fontWeight:700},children:"เพิ่มลงตะกร้า"},"add")],children:eg&&(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:14},children:[i.jsx("div",{style:{position:"relative",width:"100%",height:240,borderRadius:16,overflow:"hidden",border:`1px solid ${$.borderLight}`,background:`linear-gradient(135deg, ${$.primaryLight} 0%, #DBEAFE 100%)`},children:(0,U.dU)(eg)?i.jsx(n.default,{alt:eg.product_name,src:eg.img_url,fill:!0,style:{objectFit:"cover"},sizes:"(max-width: 768px) 90vw, 560px"}):i.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(k.Z,{style:{fontSize:56,color:$.primary,opacity:.4}})})}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12},children:[(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[i.jsx(m.Z,{style:{border:"none",background:$.primaryLight,color:$.primary,fontSize:12,padding:"2px 10px",borderRadius:999,margin:0},children:(0,U.r6)(eg)}),i.jsx(G,{level:4,style:{margin:"10px 0 0",color:$.text,lineHeight:1.2},children:eg.display_name})]}),(0,i.jsxs)("div",{style:{textAlign:"right"},children:[i.jsx(J,{type:"secondary",style:{fontSize:12},children:"ราคา"}),i.jsx("div",{style:{fontSize:24,fontWeight:800,color:$.primary,lineHeight:1.1},children:(0,U.T4)(eZ(eg))})]})]}),(0,i.jsxs)("div",{style:{background:"#fff",borderRadius:14,padding:14,border:`1px solid ${$.borderLight}`},children:[i.jsx(J,{style:{display:"block",marginBottom:6,fontWeight:700,color:$.textSecondary},children:"รายละเอียดสินค้า"}),i.jsx(J,{style:{color:$.textSecondary,fontSize:14,lineHeight:1.6},children:eg.description?.trim()?eg.description:"ไม่มีรายละเอียดสินค้า"})]})]})}),i.jsx(V,{item:eD,isOpen:eW,onClose:()=>{eE(!1),eL(null)},onSave:e=>{eD&&ek(eD.id,e)}})]})]})}let Q=o().memo(function({item:e,getProductUnitPrice:t,onUpdateQuantity:r,onRemove:a,onOpenNote:o,onOpenDetail:n}){let s=t(e.product),l=(e.details||[]).reduce((e,t)=>e+Number(t.extra_price||0),0),c=Number(e.discount||0),p=Math.max(0,(s+l)*e.quantity-c),x=e.product.display_name||e.product.product_name||"สินค้า",g=e.product.category?.display_name||"ทั่วไป";return i.jsx(f.Z.Item,{style:O.cartItemContainer,className:"cart-item-hover",children:(0,i.jsxs)("div",{style:O.cartItemRow,children:[i.jsx("div",{style:{flexShrink:0},children:e.product.img_url?i.jsx("div",{style:O.cartItemImage,children:i.jsx("img",{src:e.product.img_url,alt:x,style:{width:"100%",height:"100%",objectFit:"cover"}})}):i.jsx("div",{style:O.cartItemImagePlaceholder,children:i.jsx(k.Z,{style:{fontSize:24,color:"#94a3b8"}})})}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,i.jsxs)("div",{style:{flex:1},children:[i.jsx(J,{style:{fontWeight:600,fontSize:15,color:"#1e293b",display:"block",lineHeight:1.2,marginBottom:4},children:x}),i.jsx(m.Z,{style:O.cartItemTag,children:g})]}),i.jsx(J,{style:{fontWeight:700,fontSize:16,color:"#10b981",whiteSpace:"nowrap",marginLeft:8},children:(0,U.T4)(p)})]}),e.details&&e.details.length>0&&i.jsx("div",{style:{marginTop:6,marginBottom:4},children:e.details.map((e,t)=>(0,i.jsxs)(J,{style:{display:"block",fontSize:12,color:"#10b981",lineHeight:1.4},children:["+ ",e.detail_name," ",(0,i.jsxs)("span",{style:{opacity:.8},children:["(+",(0,U.T4)(Number(e.extra_price||0)),")"]})]},t))}),e.notes&&i.jsx("div",{style:O.cartItemNote,children:(0,i.jsxs)(J,{style:{fontSize:11,color:"#ef4444"},children:["โน้ต: ",e.notes]})}),(0,i.jsxs)("div",{className:"pos-cart-item-controls",style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:8},children:[(0,i.jsxs)("div",{className:"pos-cart-qty-control",style:O.cartItemQtyControl,children:[i.jsx(d.ZP,{type:"text",size:"small",icon:i.jsx(_.Z,{style:{fontSize:10}}),className:"pos-cart-icon-btn pos-cart-qty-btn","aria-label":"ลดจำนวน",onClick:()=>r(e.cart_item_id,e.quantity-1),style:{borderRadius:10,background:"white",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"}}),i.jsx(J,{style:{margin:"0 8px",fontWeight:600,minWidth:16,textAlign:"center",fontSize:13},children:e.quantity}),i.jsx(d.ZP,{type:"text",size:"small",icon:i.jsx(v.Z,{style:{fontSize:10}}),className:"pos-cart-icon-btn pos-cart-qty-btn","aria-label":"เพิ่มจำนวน",onClick:()=>r(e.cart_item_id,e.quantity+1),style:{borderRadius:10,background:"#10b981",color:"white"}})]}),(0,i.jsxs)("div",{className:"pos-cart-action-row",style:{display:"flex",gap:6},children:[i.jsx(d.ZP,{type:"text",icon:i.jsx(I.Z,{}),size:"small",className:"pos-cart-icon-btn pos-cart-action-btn","aria-label":"แก้ไขโน้ต",onClick:()=>o(e.cart_item_id,x,e.notes||""),style:{color:"#64748b",background:"#f1f5f9",borderRadius:10}}),i.jsx(d.ZP,{type:"text",icon:i.jsx(v.Z,{}),size:"small",className:"pos-cart-icon-btn pos-cart-action-btn","aria-label":"เพิ่มรายละเอียด",onClick:()=>n(e.cart_item_id,x,e.details),style:{color:"#10b981",background:"#ecfdf5",borderRadius:10}}),i.jsx(d.ZP,{type:"text",danger:!0,icon:i.jsx(S.Z,{}),size:"small",className:"pos-cart-icon-btn pos-cart-action-btn","aria-label":"ลบออกจากตะกร้า",onClick:()=>a(e.cart_item_id),style:{background:"#fef2f2",borderRadius:10}})]})]})]})]})},e.cart_item_id)}),Y=o().memo(function({item:e,getProductUnitPrice:t}){let r=t(e.product),a=(r+(e.details||[]).reduce((e,t)=>e+Number(t.extra_price||0),0))*e.quantity;return(0,i.jsxs)("div",{style:O.checkoutItemRow,children:[i.jsx("div",{style:O.checkoutItemImage,children:e.product.img_url?i.jsx("img",{src:e.product.img_url,alt:e.product.display_name,style:{width:"100%",height:"100%",objectFit:"cover"}}):i.jsx("div",{style:O.checkoutItemImagePlaceholder,children:i.jsx(k.Z,{style:{fontSize:16,color:$.primary,opacity:.5}})})}),i.jsx("div",{style:{flex:1,minWidth:0},children:(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[i.jsx(J,{strong:!0,style:{fontSize:14,display:"block",marginBottom:4},children:e.product.display_name}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[i.jsx(J,{type:"secondary",style:{fontSize:12},children:"ราคาอาหาร"}),i.jsx(J,{type:"secondary",style:{fontSize:12},children:(0,U.T4)(r)})]}),e.details&&e.details.map((e,t)=>(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsxs)(J,{style:{fontSize:12,color:$.success},children:["+ ",e.detail_name]}),i.jsx(J,{style:{fontSize:12,color:$.success},children:(0,U.T4)(Number(e.extra_price))})]},t)),i.jsx("div",{style:{marginTop:4},children:(0,i.jsxs)(J,{style:{fontSize:12,fontWeight:700,color:"#B45309"},children:["จำนวน : ",e.quantity]})})]}),e.notes&&i.jsx("div",{style:{marginTop:8,padding:"6px 10px",background:"#fef2f2",borderRadius:8,borderLeft:"3px solid #ef4444"},children:(0,i.jsxs)(J,{italic:!0,style:{fontSize:12,color:"#ef4444"},children:["โน้ต: ",e.notes]})})]}),i.jsx(J,{strong:!0,style:{fontSize:15,marginLeft:12,color:$.primary},children:(0,U.T4)(a)})]})})]},e.id)});function V({item:e,isOpen:t,onClose:r,onSave:o}){let[n,s]=(0,a.useState)([]),l=e=>{s(n.filter((t,r)=>r!==e))},p=(e,t,r)=>{let i=[...n];i[e]={...i[e],[t]:r},s(i)};return i.jsx(u.Z,{title:(0,i.jsxs)("div",{style:O.modalTitleRow,children:[i.jsx("div",{style:{...O.modalIconBase,background:$.successLight},children:i.jsx(v.Z,{style:{color:$.success,fontSize:16}})}),(0,i.jsxs)("span",{children:["รายละเอียดเพิ่มเติม: ",e?.name]})]}),open:t,onCancel:r,footer:[i.jsx(d.ZP,{onClick:r,style:{borderRadius:10,height:42},children:"ยกเลิก"},"cancel"),i.jsx(d.ZP,{type:"primary",onClick:()=>{o(n.filter(e=>""!==e.detail_name.trim())),r()},style:{background:$.success,borderRadius:10,height:42},children:"บันทึก"},"save")],width:520,centered:!0,children:(0,i.jsxs)("div",{style:{padding:"16px 0"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[i.jsx(J,{strong:!0,style:{color:$.textSecondary},children:"รายการเพิ่มเติม"}),i.jsx(d.ZP,{type:"dashed",size:"small",icon:i.jsx(v.Z,{}),onClick:()=>{s([...n,{detail_name:"",extra_price:0}])},style:{borderRadius:8},children:"เพิ่มรายการ"})]}),0===n.length?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"32px",background:"#F8FAFC",borderRadius:12,color:$.textSecondary},children:[i.jsx(v.Z,{style:{fontSize:24,marginBottom:8,opacity:.4}}),i.jsx("div",{children:"ไม่มีรายการเพิ่มเติม"})]}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:n.map((e,t)=>(0,i.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[i.jsx(c.default,{placeholder:"ชื่อรายการ",value:e.detail_name,onChange:e=>p(t,"detail_name",e.target.value),style:{flex:2,borderRadius:8,height:42}}),i.jsx(h.Z,{placeholder:"ราคา",value:e.extra_price,onChange:e=>p(t,"extra_price",e||0),style:{flex:1,height:42},inputMode:"decimal",controls:!1,min:0,precision:2,formatter:e=>null==e||""===e?"":`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>{let t=Number.parseFloat((e??"").replace(/[^\d.]/g,""));return Number.isFinite(t)?t:0},onKeyDown:t=>{/^[0-9]$/.test(t.key)||["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","."].includes(t.key)||t.preventDefault(),"."===t.key&&e.extra_price.toString().includes(".")&&t.preventDefault()}}),i.jsx(d.ZP,{danger:!0,type:"text",icon:i.jsx(S.Z,{}),onClick:()=>l(t),style:{borderRadius:8,height:42,width:42}})]},t))})]})})}},93312:(e,t,r)=>{r.d(t,{L:()=>s});var i=r(20108),a=r(51562),o=r(69711);let n="pos:categories";function s(){return(0,i.a)({queryKey:["categories"],queryFn:async()=>{let e=await a.G.findAll();return e?.length&&(0,o.v)(n,e),e},initialData:()=>(0,o.t)(n,3e5)||void 0,staleTime:3e5,refetchOnWindowFocus:!1,retry:1})}},10985:(e,t,r)=>{var i;r.d(t,{c:()=>i}),function(e){e.Available="Available",e.Unavailable="Unavailable"}(i||(i={}))},2504:(e,t,r)=>{r.d(t,{NE:()=>d,Th:()=>s,Do:()=>c,Yx:()=>p,Zu:()=>m,Oi:()=>l,W9:()=>o,Tf:()=>n});var i=r(10985),a=r(13976);function o(e){let t={total:e.length,available:0,occupied:0,inactive:0};return e.forEach(e=>{e.is_active?e.status===i.c.Available?t.available++:t.occupied++:t.inactive++}),t}function n(e){return[...e].sort((e,t)=>{let r=parseInt(e.table_name.replace(/\D/g,"")),i=parseInt(t.table_name.replace(/\D/g,""));return isNaN(r)||isNaN(i)?e.table_name.localeCompare(t.table_name):r-i})}function s(e){return e.filter(e=>e.is_active)}function l(e){return e.is_active?"WaitingForPayment"===e.active_order_status?"waitingForPayment":e.status===i.c.Available?"available":"occupied":"inactive"}function d(e){return e?({Pending:"กำลังดำเนินการ",Cooking:"กำลังปรุง",Served:"เสิร์ฟแล้ว",WaitingForOrder:"รอรับออเดอร์",WaitingForPayment:"รอชำระเงิน",Paid:"ชำระเงินแล้ว",Completed:"เสร็จสมบูรณ์",Cancelled:"ยกเลิก"})[e]||e:""}function c(e){return e.reduce((e,t)=>(e.total++,t.status===a.i.Pending&&e.pending++,t.status===a.i.Cooking&&e.cooking++,t.status===a.i.Served&&e.served++,e),{total:0,pending:0,cooking:0,served:0})}function p(e){switch(e.status){case a.i.Pending:case a.i.Cooking:return"occupied";case a.i.Served:return"waitingForPayment";case a.i.Paid:return"available";default:return"inactive"}}let m=e=>{switch(e){case a.m.DineIn:case"DineIn":return"/pos/channels/dine-in";case a.m.TakeAway:case"TakeAway":return"/pos/channels/takeaway";case a.m.Delivery:case"Delivery":return"/pos/channels/delivery";default:return"/pos/orders"}}},41947:(e,t,r)=>{r.d(t,{S:()=>i});let i=e=>{if(!e?.length)return[];let t=new Map;for(let r of e){let e=r.details?.length?JSON.stringify(r.details.map(e=>({n:e.detail_name,p:e.extra_price})).sort((e,t)=>e.n.localeCompare(t.n))):"[]",i=(r.notes??"").trim().toLowerCase(),a=String(r.status??""),o=r.product?.id??r.product_id??"unknown",n=`${o}|${e}|${i}|${a}`,s=t.get(n);if(s){s.quantity+=Number(r.quantity),s.total_price+=Number(r.total_price??0),s.originalItems.push(r);continue}let l={...r,id:String(r?.id??n),quantity:Number(r.quantity),total_price:Number(r.total_price??0),originalItems:[r]};t.set(n,l)}return Array.from(t.values())}},69711:(e,t,r)=>{r.d(t,{t:()=>a,v:()=>o});let i=()=>!1,a=(e,t)=>{if(!i())return null;try{let r=window.localStorage.getItem(e);if(!r)return null;let i=JSON.parse(r);if(!i?.ts||Date.now()-i.ts>t)return null;return i.data??null}catch{return null}},o=(e,t)=>{if(i())try{let r={ts:Date.now(),data:t};window.localStorage.setItem(e,JSON.stringify(r))}catch{}}},49227:(e,t,r)=>{function i(e){return`฿${e.toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2})}`}function a(e){return e.category?.display_name||"ไม่มีหมวดหมู่"}function o(e){return!!e.img_url&&e.img_url.length>0}r.d(t,{T4:()=>i,dU:()=>o,r6:()=>a})}};