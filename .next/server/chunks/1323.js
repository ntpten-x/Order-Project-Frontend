exports.id=1323,exports.ids=[1323],exports.modules={34957:(e,t,a)=>{Promise.resolve().then(a.bind(a,52411))},4779:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(17577);let o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"};var n=a(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}let s=r.forwardRef((e,t)=>r.createElement(n.Z,i({},e,{ref:t,icon:o})))},41684:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(17577);let o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};var n=a(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}let s=r.forwardRef((e,t)=>r.createElement(n.Z,i({},e,{ref:t,icon:o})))},75621:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(17577);let o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"};var n=a(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}let s=r.forwardRef((e,t)=>r.createElement(n.Z,i({},e,{ref:t,icon:o})))},52411:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var r=a(10326),o=a(17577),n=a(18418),i=a(35047),s=a(90218),l=a(97458),c=a(71935),d=a(67329),h=a(9297),u=a(73330),p=a(4779),f=a(75621),g=a(41684),y=a(48230),b=a(94001),x=a(80440),m=a(49713),j=a(88196);let w=()=>{let e=(0,i.useRouter)(),t=(0,i.usePathname)(),{user:a}=(0,b.a)(),[n,w]=(0,o.useState)(0),[v,k]=(0,o.useState)(!1),{socket:S}=(0,x.s)(),O=(0,o.useCallback)(async()=>{try{let e=new URLSearchParams;e.append("status","pending"),e.append("t",Date.now().toString());let t=await m.x.getAllOrders(void 0,e);w(t.total)}catch{}},[]);(0,o.useEffect)(()=>{a&&O()},[a,O]),(0,o.useEffect)(()=>{if(!S)return;let e=e=>{(e?.action==="create"||e?.action==="update_status")&&setTimeout(O,500)};S.on("orders_updated",e);let t=()=>O();return window.addEventListener("focus",t),()=>{S.off("orders_updated",e),window.removeEventListener("focus",t)}},[S,O]);let T=[{key:"home",label:"หน้าแรก",icon:r.jsx(d.Z,{}),path:"/"},{key:"shopping",label:"สั่งซื้อ",icon:r.jsx(h.Z,{}),path:"/stock"},{key:"orders",label:"รายการ",icon:r.jsx(u.Z,{}),path:"/stock/items"},{key:"history",label:"ประวัติ",icon:r.jsx(p.Z,{}),path:"/stock/history"},...a?.role==="Admin"?[{key:"ingredients",label:"วัตถุดิบ",icon:r.jsx(f.Z,{}),path:"/stock/ingredients"},{key:"ingredientsUnit",label:"หน่วย",icon:r.jsx(g.Z,{}),path:"/stock/ingredientsUnit"}]:[]],P=e=>"/"===e?"/"===t:t===e||t.startsWith(e+"/"),Z=T.slice(0,4),C=T.slice(4),E=C.some(e=>P(e.path));return(0,r.jsxs)(r.Fragment,{children:[r.jsx(j.Z,{maxWidth:560,items:[...Z.map(t=>({key:t.key,label:t.label,icon:t.icon,onClick:()=>e.push(t.path),active:P(t.path),badgeDot:"orders"===t.key&&n>0})),...C.length?[{key:"more",label:"เพิ่มเติม",icon:r.jsx(y.Z,{}),onClick:()=>k(!0),active:E}]:[]]}),r.jsx(s.Z,{open:v,onClose:()=>k(!1),placement:"bottom",height:"auto",title:"เมนูเพิ่มเติม",zIndex:2e3,children:r.jsx("div",{style:{paddingBottom:"calc(12px + env(safe-area-inset-bottom))"},children:r.jsx(l.Z,{dataSource:C,renderItem:t=>r.jsx(l.Z.Item,{style:{paddingInline:0},children:r.jsx(c.ZP,{type:"text",block:!0,icon:t.icon,style:{height:48,justifyContent:"flex-start"},onClick:()=>{e.push(t.path),k(!1)},children:t.label})})})})})]})};var v=a(33540);function k({children:e}){return r.jsx(v.Z,{children:(0,r.jsxs)(n.default,{style:{minHeight:"100%",background:"transparent"},children:[r.jsx(n.default.Content,{style:{background:"transparent"},children:e}),r.jsx(w,{})]})})}},88196:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var r=a(10326);a(17577);var o=a(58184),n=a(5591),i=a(3861),s=a(56249),l=a(11401),c=a(71935),d=a(83575);let{Text:h}=o.default;function u({items:e,maxWidth:t=440,bottomOffset:a=d.w}){let{token:o}=n.default.useToken(),u=!i.default.useBreakpoint().md,p={position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:`calc(${a}px + env(safe-area-inset-bottom))`,width:"calc(100% - 24px)",maxWidth:t,zIndex:900};return r.jsx("div",{style:p,"aria-label":"Bottom navigation",children:r.jsx(s.Z,{size:"small",variant:"outlined",bodyStyle:{padding:8,display:"grid",gridTemplateColumns:`repeat(${e.length}, minmax(0, 1fr))`,gap:4},style:{borderRadius:u?18:22,borderColor:o.colorBorderSecondary,background:"rgba(255, 255, 255, 0.92)",backdropFilter:"blur(12px)",boxShadow:o.boxShadowSecondary},children:e.map(e=>{let t=!!e.active,a=t?o.colorPrimary:o.colorTextSecondary,n=t?o.colorPrimary:o.colorTextSecondary,i=r.jsx("span",{style:{fontSize:22,lineHeight:1,color:a},children:e.icon}),s=e.badgeDot||(e.badgeCount??0)>0?r.jsx(l.Z,{dot:e.badgeDot,count:e.badgeCount,size:"small",children:i}):i;return(0,r.jsxs)(c.ZP,{type:"text",disabled:e.disabled,"aria-label":e.ariaLabel??e.label,"aria-current":t?"page":void 0,onClick:e.onClick,style:{height:u?64:68,paddingInline:0,borderRadius:16,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4,background:t?o.colorPrimaryBg:"transparent"},children:[s,r.jsx(h,{style:{fontSize:11,fontWeight:t?600:500,color:n,lineHeight:1},children:e.label})]},e.key)})})})}},52647:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var r=a(10326);a(17577);var o=a(2643),n=a(5591),i=a(3861),s=a(21020),l=a(71935),c=a(58184),d=a(52386);function h({title:e,subtitle:t,icon:a,onBack:h,actions:u,style:p}){let{token:f}=n.default.useToken(),g=i.default.useBreakpoint().md?d.H.pagePaddingXDesktop:d.H.pagePaddingXMobile;return r.jsx("div",{style:{padding:`${d.H.pagePaddingY}px ${g}px`,background:f.colorBgContainer,borderBottom:`1px solid ${f.colorBorderSecondary}`,...p},children:(0,r.jsxs)(s.Z,{align:"center",justify:"space-between",wrap:"wrap",gap:12,style:{maxWidth:d.H.pageMaxWidth,margin:"0 auto"},children:[(0,r.jsxs)(s.Z,{align:"center",gap:12,style:{minWidth:0},children:[h&&r.jsx(l.ZP,{type:"text","aria-label":"ย้อนกลับ",icon:r.jsx(o.Z,{}),onClick:h,style:{borderRadius:12,width:44,height:44}}),a&&r.jsx("div",{style:{width:44,height:44,borderRadius:14,display:"grid",placeItems:"center",background:f.colorFillTertiary,color:f.colorText},children:a}),(0,r.jsxs)("div",{style:{minWidth:0},children:[r.jsx(c.default.Title,{level:4,style:{margin:0},children:e}),t&&r.jsx(c.default.Text,{type:"secondary",children:t})]})]}),u&&r.jsx(s.Z,{gap:8,wrap:"wrap",children:u})]})})}},80440:(e,t,a)=>{"use strict";a.d(t,{s:()=>n});var r=a(17577),o=a(19211);let n=()=>(0,r.useContext)(o.J)},49713:(e,t,a)=>{"use strict";a.d(t,{x:()=>s});var r=a(12529),o=a(40577);let n="/stock/orders",i=(e,t="application/json")=>{let a={};return t&&(a["Content-Type"]=t),e&&(a.Cookie=e),a},s={createOrder:async(e,t,a)=>{let s=(0,r.b)("POST",n),l=i(t);a&&(l["X-CSRF-Token"]=a);let c=await fetch(s,{method:"POST",headers:l,body:JSON.stringify(e)});if(!c.ok){let e=await c.text();console.error("Backend Error [createOrder]:",{status:c.status,statusText:c.statusText,url:s,body:e});let t={};try{t=JSON.parse(e)}catch{}throw Error((0,o.i_)(t,`ไม่สามารถสร้างออเดอร์ได้ (${c.status})`))}return(0,o.hH)(await c.json())},getAllOrders:async(e,t)=>{let a=(0,r.b)("GET",n);t&&(a+=`?${t.toString()}`);let s=i(e,""),l=await fetch(a,{cache:"no-store",headers:s});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,o.i_)(e,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}return(0,o.XO)(await l.json())},getOrderById:async(e,t)=>{let a=(0,r.b)("GET",`${n}/${e}`),s=i(t,""),l=await fetch(a,{cache:"no-store",headers:s});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,o.i_)(e,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}return(0,o.hH)(await l.json())},updateStatus:async(e,t,a,s)=>{let l=(0,r.b)("PUT",`${n}/${e}/status`),c=i(a);s&&(c["X-CSRF-Token"]=s);let d=await fetch(l,{method:"PUT",headers:c,body:JSON.stringify({status:t})});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error((0,o.i_)(e,"ไม่สามารถอัปเดตสถานะออเดอร์ได้"))}return(0,o.hH)(await d.json())},updateOrder:async(e,t,a,s)=>{let l=(0,r.b)("PUT",`${n}/${e}`),c=i(a);s&&(c["X-CSRF-Token"]=s);let d=await fetch(l,{method:"PUT",headers:c,body:JSON.stringify({items:t})});if(!d.ok){let e=await d.text();throw Error(`Failed to update order: ${d.status} ${e}`)}return(0,o.hH)(await d.json())},confirmPurchase:async(e,t,a,s,l)=>{let c=(0,r.b)("POST",`${n}/${e}/purchase`),d=i(s);l&&(d["X-CSRF-Token"]=l);let h=await fetch(c,{method:"POST",headers:d,body:JSON.stringify({items:t,purchased_by_id:a})});if(!h.ok){let e=await h.text();throw Error(`Failed to confirm purchase: ${h.status} ${e}`)}return(0,o.hH)(await h.json())},updatePurchaseDetail:async(e,t)=>{let a=(0,r.b)("POST","/stock/ordersDetail/update"),n=i(t),s=await fetch(a,{method:"POST",headers:n,body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,o.i_)(e,"ไม่สามารถอัปเดตข้อมูลการซื้อได้"))}return(0,o.hH)(await s.json())},deleteOrder:async(e,t,a)=>{let o=(0,r.b)("DELETE",`${n}/${e}`),s=i(t,"");a&&(s["X-CSRF-Token"]=a);let l=await fetch(o,{method:"DELETE",headers:s});if(!l.ok){let e=await l.text();throw Error(`Failed to delete order: ${l.status} ${e}`)}}}},52987:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\stock\layout.tsx#default`)}};