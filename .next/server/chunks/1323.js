exports.id=1323,exports.ids=[1323],exports.modules={34957:(e,t,r)=>{Promise.resolve().then(r.bind(r,52411))},4779:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"};var d=r(74082);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let n=a.forwardRef((e,t)=>a.createElement(d.Z,o({},e,{ref:t,icon:s})))},41684:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};var d=r(74082);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let n=a.forwardRef((e,t)=>a.createElement(d.Z,o({},e,{ref:t,icon:s})))},75621:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"};var d=r(74082);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let n=a.forwardRef((e,t)=>a.createElement(d.Z,o({},e,{ref:t,icon:s})))},52411:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var a=r(10326),s=r(17577),d=r(18418),o=r(35047),n=r(90218),i=r(97458),c=r(71935),l=r(67329),u=r(9297),p=r(73330),h=r(4779),y=r(75621),g=r(41684),f=r(48230),m=r(94001),b=r(80440),x=r(49713),k=r(88196),v=r(83179);let j=()=>{let e=(0,o.useRouter)(),t=(0,o.usePathname)(),{user:r}=(0,m.a)(),[d,j]=(0,s.useState)(0),[w,O]=(0,s.useState)(!1),{socket:S}=(0,b.s)(),P=(0,s.useCallback)(async()=>{try{let e=new URLSearchParams;e.append("status","pending"),e.append("t",Date.now().toString());let t=await x.x.getAllOrders(void 0,e);j(t.total)}catch{}},[]);(0,s.useEffect)(()=>{r&&P()},[r,P]),(0,s.useEffect)(()=>{if(!S)return;let e=()=>setTimeout(P,500),t=t=>{(t?.action==="create"||t?.action==="update_status")&&e()};S.on(v.b.stockOrders.create,e),S.on(v.b.stockOrders.status,e),S.on(v.b.stockOrders.delete,e),S.on(v.g.stockOrdersUpdated,t);let r=()=>P();return window.addEventListener("focus",r),()=>{S.off(v.b.stockOrders.create,e),S.off(v.b.stockOrders.status,e),S.off(v.b.stockOrders.delete,e),S.off(v.g.stockOrdersUpdated,t),window.removeEventListener("focus",r)}},[S,P]);let T=[{key:"home",label:"หน้าแรก",icon:a.jsx(l.Z,{}),path:"/"},{key:"shopping",label:"สั่งซื้อ",icon:a.jsx(u.Z,{}),path:"/stock"},{key:"orders",label:"รายการ",icon:a.jsx(p.Z,{}),path:"/stock/items"},{key:"history",label:"ประวัติ",icon:a.jsx(h.Z,{}),path:"/stock/history"},...r?.role==="Admin"||r?.role==="Manager"?[{key:"ingredients",label:"วัตถุดิบ",icon:a.jsx(y.Z,{}),path:"/stock/ingredients"},{key:"ingredientsUnit",label:"หน่วย",icon:a.jsx(g.Z,{}),path:"/stock/ingredientsUnit"}]:[]],Z=e=>"/"===e?"/"===t:t===e||t.startsWith(e+"/"),C=T.slice(0,4),E=T.slice(4),$=E.some(e=>Z(e.path));return(0,a.jsxs)(a.Fragment,{children:[a.jsx(k.Z,{maxWidth:560,items:[...C.map(t=>({key:t.key,label:t.label,icon:t.icon,onClick:()=>e.push(t.path),active:Z(t.path),badgeDot:"orders"===t.key&&d>0})),...E.length?[{key:"more",label:"เพิ่มเติม",icon:a.jsx(f.Z,{}),onClick:()=>O(!0),active:$}]:[]]}),a.jsx(n.Z,{open:w,onClose:()=>O(!1),placement:"bottom",height:"auto",title:"เมนูเพิ่มเติม",zIndex:2e3,children:a.jsx("div",{style:{paddingBottom:"calc(12px + env(safe-area-inset-bottom))"},children:a.jsx(i.Z,{dataSource:E,renderItem:t=>a.jsx(i.Z.Item,{style:{paddingInline:0},children:a.jsx(c.ZP,{type:"text",block:!0,icon:t.icon,style:{height:48,justifyContent:"flex-start"},onClick:()=>{e.push(t.path),O(!1)},children:t.label})})})})})]})};var w=r(33540);function O({children:e}){return a.jsx(w.Z,{children:(0,a.jsxs)(d.default,{style:{minHeight:"100%",background:"transparent"},children:[a.jsx(d.default.Content,{style:{background:"transparent"},children:e}),a.jsx(j,{})]})})}},88196:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r(10326);r(17577);var s=r(66874),d=r(5591),o=r(3861),n=r(56249),i=r(11401),c=r(71935),l=r(83575);let{Text:u}=s.default;function p({items:e,maxWidth:t=440,bottomOffset:r=l.w}){let{token:s}=d.default.useToken(),p=!o.default.useBreakpoint().md,h={position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:`calc(${r}px + env(safe-area-inset-bottom))`,width:"calc(100% - 24px)",maxWidth:t,zIndex:900};return a.jsx("div",{style:h,"aria-label":"Bottom navigation",children:a.jsx(n.Z,{size:"small",variant:"outlined",bodyStyle:{padding:8,display:"grid",gridTemplateColumns:`repeat(${e.length}, minmax(0, 1fr))`,gap:4},style:{borderRadius:p?18:22,borderColor:s.colorBorderSecondary,background:"rgba(255, 255, 255, 0.92)",backdropFilter:"blur(12px)",boxShadow:s.boxShadowSecondary},children:e.map(e=>{let t=!!e.active,r=t?s.colorPrimary:s.colorTextSecondary,d=t?s.colorPrimary:s.colorTextSecondary,o=a.jsx("span",{style:{fontSize:22,lineHeight:1,color:r},children:e.icon}),n=e.badgeDot||(e.badgeCount??0)>0?a.jsx(i.Z,{dot:e.badgeDot,count:e.badgeCount,size:"small",children:o}):o;return(0,a.jsxs)(c.ZP,{type:"text",disabled:e.disabled,"aria-label":e.ariaLabel??e.label,"aria-current":t?"page":void 0,onClick:e.onClick,style:{height:p?64:68,paddingInline:0,borderRadius:16,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4,background:t?s.colorPrimaryBg:"transparent"},children:[n,a.jsx(u,{style:{fontSize:11,fontWeight:t?600:500,color:d,lineHeight:1},children:e.label})]},e.key)})})})}},52647:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var a=r(10326);r(17577);var s=r(2643),d=r(5591),o=r(3861),n=r(21020),i=r(71935),c=r(66874),l=r(52386);function u({title:e,subtitle:t,icon:r,onBack:u,actions:p,style:h}){let{token:y}=d.default.useToken(),g=o.default.useBreakpoint().md?l.H.pagePaddingXDesktop:l.H.pagePaddingXMobile;return a.jsx("div",{style:{padding:`${l.H.pagePaddingY}px ${g}px`,background:y.colorBgContainer,borderBottom:`1px solid ${y.colorBorderSecondary}`,...h},children:(0,a.jsxs)(n.Z,{align:"center",justify:"space-between",wrap:"wrap",gap:12,style:{maxWidth:l.H.pageMaxWidth,margin:"0 auto"},children:[(0,a.jsxs)(n.Z,{align:"center",gap:12,style:{minWidth:0},children:[u&&a.jsx(i.ZP,{type:"text","aria-label":"ย้อนกลับ",icon:a.jsx(s.Z,{}),onClick:u,style:{borderRadius:12,width:44,height:44}}),r&&a.jsx("div",{style:{width:44,height:44,borderRadius:14,display:"grid",placeItems:"center",background:y.colorFillTertiary,color:y.colorText},children:r}),(0,a.jsxs)("div",{style:{minWidth:0},children:[a.jsx(c.default.Title,{level:4,style:{margin:0},children:e}),t&&a.jsx(c.default.Text,{type:"secondary",children:t})]})]}),p&&a.jsx(n.Z,{gap:8,wrap:"wrap",children:p})]})})}},80440:(e,t,r)=>{"use strict";r.d(t,{s:()=>d});var a=r(17577),s=r(19211);let d=()=>(0,a.useContext)(s.J)},49713:(e,t,r)=>{"use strict";r.d(t,{x:()=>n});var a=r(12529),s=r(40577);let d="/stock/orders",o=(e,t="application/json")=>{let r={};return t&&(r["Content-Type"]=t),e&&(r.Cookie=e),r},n={createOrder:async(e,t,r)=>{let n=(0,a.b)("POST",d),i=o(t);r&&(i["X-CSRF-Token"]=r);let c=await fetch(n,{method:"POST",headers:i,body:JSON.stringify(e)});if(!c.ok){let e=await c.text();console.error("Backend Error [createOrder]:",{status:c.status,statusText:c.statusText,url:n,body:e});let t={};try{t=JSON.parse(e)}catch{}throw Error((0,s.i_)(t,`ไม่สามารถสร้างออเดอร์ได้ (${c.status})`))}return(0,s.hH)(await c.json())},getAllOrders:async(e,t)=>{let r=(0,a.b)("GET",d);t&&(r+=`?${t.toString()}`);let n=o(e,""),i=await fetch(r,{cache:"no-store",headers:n});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,s.i_)(e,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}return(0,s.XO)(await i.json())},getOrderById:async(e,t)=>{let r=(0,a.b)("GET",`${d}/${e}`),n=o(t,""),i=await fetch(r,{cache:"no-store",headers:n});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,s.i_)(e,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}return(0,s.hH)(await i.json())},updateStatus:async(e,t,r,n)=>{let i=(0,a.b)("PUT",`${d}/${e}/status`),c=o(r);n&&(c["X-CSRF-Token"]=n);let l=await fetch(i,{method:"PUT",headers:c,body:JSON.stringify({status:t})});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,s.i_)(e,"ไม่สามารถอัปเดตสถานะออเดอร์ได้"))}return(0,s.hH)(await l.json())},updateOrder:async(e,t,r,n)=>{let i=(0,a.b)("PUT",`${d}/${e}`),c=o(r);n&&(c["X-CSRF-Token"]=n);let l=await fetch(i,{method:"PUT",headers:c,body:JSON.stringify({items:t})});if(!l.ok){let e=await l.text();throw Error(`Failed to update order: ${l.status} ${e}`)}return(0,s.hH)(await l.json())},confirmPurchase:async(e,t,r,n,i)=>{let c=(0,a.b)("POST",`${d}/${e}/purchase`),l=o(n);i&&(l["X-CSRF-Token"]=i);let u=await fetch(c,{method:"POST",headers:l,body:JSON.stringify({items:t,purchased_by_id:r})});if(!u.ok){let e=await u.text();throw Error(`Failed to confirm purchase: ${u.status} ${e}`)}return(0,s.hH)(await u.json())},updatePurchaseDetail:async(e,t)=>{let r=(0,a.b)("POST","/stock/ordersDetail/update"),d=o(t),n=await fetch(r,{method:"POST",headers:d,body:JSON.stringify(e)});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error((0,s.i_)(e,"ไม่สามารถอัปเดตข้อมูลการซื้อได้"))}return(0,s.hH)(await n.json())},deleteOrder:async(e,t,r)=>{let s=(0,a.b)("DELETE",`${d}/${e}`),n=o(t,"");r&&(n["X-CSRF-Token"]=r);let i=await fetch(s,{method:"DELETE",headers:n});if(!i.ok){let e=await i.text();throw Error(`Failed to delete order: ${i.status} ${e}`)}}}},83179:(e,t,r)=>{"use strict";r.d(t,{b:()=>a,g:()=>s});let a={system:{announcement:"system:announcement"},users:{create:"users:create",update:"users:update",delete:"users:delete",status:"users:update-status"},roles:{create:"roles:create",update:"roles:update",delete:"roles:delete"},branches:{create:"branches:create",update:"branches:update",delete:"branches:delete"},products:{create:"products:create",update:"products:update",delete:"products:delete"},productsUnit:{create:"productsUnit:create",update:"productsUnit:update",delete:"productsUnit:delete"},categories:{create:"category:create",update:"category:update",delete:"category:delete"},tables:{create:"tables:create",update:"tables:update",delete:"tables:delete"},orders:{create:"orders:create",update:"orders:update",delete:"orders:delete"},payments:{create:"payments:create",update:"payments:update",delete:"payments:delete"},discounts:{create:"discounts:create",update:"discounts:update",delete:"discounts:delete"},delivery:{create:"delivery:create",update:"delivery:update",delete:"delivery:delete"},shifts:{update:"shifts:update"},orderQueue:{added:"order-queue:added",updated:"order-queue:updated",removed:"order-queue:removed",reordered:"order-queue:reordered"},ingredients:{create:"ingredients:create",update:"ingredients:update",delete:"ingredients:delete"},ingredientsUnit:{create:"ingredientsUnit:create",update:"ingredientsUnit:update",delete:"ingredientsUnit:delete"},stock:{update:"stock:update"},stockOrders:{create:"stock:orders:create",update:"stock:orders:update",status:"stock:orders:status",delete:"stock:orders:delete",detailUpdate:"stock:orders:detail:update"},paymentAccounts:{create:"payment-accounts:create",update:"payment-accounts:update",delete:"payment-accounts:delete"},paymentMethods:{create:"paymentMethod:create",update:"paymentMethod:update",delete:"paymentMethod:delete"},shopProfile:{update:"shopProfile:update"},salesOrderItem:{create:"salesOrderItem:create",update:"salesOrderItem:update",delete:"salesOrderItem:delete"},salesOrderDetail:{create:"salesOrderDetail:create",update:"salesOrderDetail:update",delete:"salesOrderDetail:delete"}},s={stockOrdersUpdated:"orders_updated"}},52987:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\stock\layout.tsx#default`)}};