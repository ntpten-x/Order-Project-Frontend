exports.id=4300,exports.ids=[4300],exports.modules={58679:(e,t,a)=>{Promise.resolve().then(a.bind(a,22344))},87308:(e,t,a)=>{Promise.resolve().then(a.bind(a,33540))},22344:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>U});var r=a(10326),o=a(17577),s=a(63196),l=a(94001),n=a(94658),i=a(46752);let c=(0,o.createContext)(void 0),d=({children:e})=>{let{user:t}=(0,l.a)(),[a,s]=(0,o.useState)(null),[d,u]=(0,o.useState)(!0),m=(0,o.useCallback)(async()=>{if(t)try{let e=await n.t.getCurrentShift();s(e)}catch(e){console.error("Error fetching shift:",e)}finally{u(!1)}},[t]);(0,o.useEffect)(()=>{m()},[m]);let p=async e=>{if(t)try{let t=await n.t.openShift(e);s(t),i.ZP.success("เปิดกะเรียบร้อยแล้ว")}catch(e){throw i.ZP.error(e instanceof Error?e.message:"เปิดกะไม่สำเร็จ"),e}},h=async e=>{if(t)try{await n.t.closeShift(e),s(null),i.ZP.success("ปิดกะเรียบร้อยแล้ว")}catch(e){throw i.ZP.error(e instanceof Error?e.message:"ปิดกะไม่สำเร็จ"),e}};return r.jsx(c.Provider,{value:{currentShift:a,loading:d,openShift:p,closeShift:h,refreshShift:m},children:e})},u=()=>{let e=(0,o.useContext)(c);if(!e)throw Error("useShift must be used within a ShiftProvider");return e};var m=a(35047),p=a(67329),h=a(62938),y=a(73330),f=a(10907),x=a(95762),g=a(75621),b=a(27266),_=a(71696),j=a(15717),S=a(99251),w=a(35189),k=a(58184),v=a(24352),C=a(75958),Z=a(40432),E=a(31916),P=a(71935),T=a(88295),N=a.n(T);let{Title:I,Text:$}=k.default;function F({open:e,onCancel:t}){let{currentShift:a,closeShift:s}=u(),[l,n]=(0,o.useState)(!1),[i]=v.Z.useForm(),c=async e=>{n(!0);try{await s(e.endAmount),t(),i.resetFields()}catch{}finally{n(!1)}};return a?(0,r.jsxs)(C.Z,{open:e,onCancel:t,title:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(I,{level:3,style:{marginBottom:0},children:"ปิดกะการขาย (Close Shift)"}),r.jsx($,{type:"secondary",children:"กรุณานับเงินในลิ้นชักและระบุยอดที่นับได้"})]}),centered:!0,footer:null,children:[(0,r.jsxs)(Z.Z,{column:1,bordered:!0,className:"mb-6",children:[r.jsx(Z.Z.Item,{label:"เวลาเปิดกะ",children:N()(a.open_time).format("DD/MM/YYYY HH:mm")}),(0,r.jsxs)(Z.Z.Item,{label:"เงินทอนเริ่มต้น",children:[Number(a.start_amount).toLocaleString()," บาท"]})]}),(0,r.jsxs)(v.Z,{form:i,layout:"vertical",onFinish:c,children:[r.jsx(v.Z.Item,{name:"endAmount",label:"ยอดเงินที่นับได้จริง (Cash Counted)",rules:[{required:!0,message:"กรุณาระบุจำนวนเงิน"}],children:r.jsx(E.Z,{style:{width:"100%",fontSize:"24px",height:"60px",display:"flex",alignItems:"center"},size:"large",prefix:r.jsx(S.Z,{style:{fontSize:"24px"}}),min:0,precision:2,placeholder:"0.00",autoFocus:!0,controls:!1,inputMode:"decimal",formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e?.replace(/\$\s?|(,*)/g,""),onKeyDown:e=>{if([8,46,9,27,13,190,110].includes(e.keyCode)||!0===e.ctrlKey||!0===e.metaKey||e.keyCode>=35&&e.keyCode<=39){(190===e.keyCode||110===e.keyCode)&&e.currentTarget.value.includes(".")&&e.preventDefault();return}(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}})}),(0,r.jsxs)("div",{className:"flex gap-4",children:[r.jsx(P.ZP,{block:!0,size:"large",onClick:t,disabled:l,children:"ยกเลิก"}),r.jsx(P.ZP,{type:"primary",danger:!0,htmlType:"submit",block:!0,size:"large",loading:l,children:"ยืนยันปิดกะ"})]})]})]}):null}let O=()=>{let e=(0,m.useRouter)(),t=(0,m.usePathname)(),{user:a}=(0,l.a)(),{currentShift:s}=u(),[n,i]=(0,o.useState)(!1),c=[{key:"home",label:"Home",icon:r.jsx(p.Z,{className:"text-2xl"}),path:"/"},{key:"pos",label:"ขายสินค้า",icon:r.jsx(h.Z,{className:"text-2xl"}),path:"/pos"},{key:"kitchen",label:"ครัว",icon:r.jsx(h.Z,{className:"text-2xl"}),path:"/pos/kitchen"},...a?.role==="Admin"?[{key:"orders",label:"ออเดอร์",icon:r.jsx(y.Z,{className:"text-2xl"}),path:"/pos/orders"},{key:"dashboard",label:"Dashboard",icon:r.jsx(f.Z,{className:"text-2xl"}),path:"/pos/dashboard"},{key:"settings",label:"ตั้งค่า",icon:r.jsx(f.Z,{className:"text-2xl"}),path:"/pos/settings"},{key:"shift",label:"กะ",icon:r.jsx(f.Z,{className:"text-2xl"}),path:"/pos/shift"},{key:"items",label:"รอชำระเงิน",icon:r.jsx(f.Z,{className:"text-2xl"}),path:"/pos/items"},{key:"products",label:"สินค้า",icon:r.jsx(f.Z,{className:"text-2xl"}),path:"/pos/products"},{key:"category",label:"หมวดหมู่",icon:r.jsx(x.Z,{className:"text-2xl"}),path:"/pos/category"},{key:"unit",label:"หน่วย",icon:r.jsx(g.Z,{className:"text-2xl"}),path:"/pos/productsUnit"},{key:"tables",label:"โต๊ะ",icon:r.jsx(b.Z,{className:"text-2xl"}),path:"/pos/tables"},{key:"delivery",label:"บริการส่ง",icon:r.jsx(_.Z,{className:"text-2xl"}),path:"/pos/delivery"},{key:"discounts",label:"ส่วนลด",icon:r.jsx(j.Z,{className:"text-2xl"}),path:"/pos/discounts"},{key:"paymentMethod",label:"วิธีการชำระเงิน",icon:r.jsx(S.Z,{className:"text-2xl"}),path:"/pos/paymentMethod"}]:[]],d="#60A5FA",k="#D1D5DB";return(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-md z-50",children:(0,r.jsxs)("div",{className:"flex justify-around items-center h-[72px] px-6 py-2 bg-[#171717]/95 backdrop-blur-xl shadow-2xl border border-white/10 rounded-full",style:{boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.3)"},children:[c.map(a=>{let o=t===a.path||"/"!==a.path&&t.startsWith(a.path+"/")||"/pos"===a.path&&"/pos"===t;return(0,r.jsxs)("button",{onClick:()=>e.push(a.path),className:"relative flex flex-col items-center justify-center w-full h-full group",children:[(0,r.jsxs)("div",{className:"relative flex items-center justify-center",children:[o&&r.jsx("div",{className:"absolute inset-0 bg-blue-400/20 blur-xl rounded-full"}),r.jsx("div",{className:`text-2xl transition-all duration-300 ease-out transform ${o?"-translate-y-1 scale-110":"group-hover:scale-105"}`,style:{color:o?d:k},children:a.icon})]}),r.jsx("span",{className:`text-[11px] font-medium tracking-wide mt-1 transition-all duration-300 ${o?"opacity-100 translate-y-0":"opacity-70 translate-y-1"}`,style:{color:o?d:k},children:a.label}),o&&r.jsx("div",{className:"absolute -bottom-2 w-1.5 h-1.5 rounded-full transition-all duration-300",style:{backgroundColor:d}})]},a.key)}),s&&(0,r.jsxs)("button",{onClick:()=>i(!0),className:"relative flex flex-col items-center justify-center w-full h-full group",children:[r.jsx("div",{className:"relative flex items-center justify-center",children:r.jsx("div",{className:"text-2xl transition-all duration-300 ease-out transform group-hover:scale-105 text-red-500",children:r.jsx(w.Z,{})})}),r.jsx("span",{className:"text-[11px] font-medium tracking-wide mt-1 transition-all duration-300 opacity-70 translate-y-1 text-red-500",children:"ปิดกะ"})]},"closeShift")]})}),r.jsx(F,{open:n,onCancel:()=>i(!1)})]})};var D=a(57473),R=a(67355),Q=a(3548),A=a(26859),X=a(81456),J=a(45839);let q=e=>new Promise(t=>setTimeout(t,e)),M=()=>{let e=(0,R.L)(),[t,a]=(0,o.useState)(!1),s=(0,o.useCallback)(async()=>{if(t||0===Q.x.getQueue().length)return;a(!0);let e=i.ZP.loading("กำลังซิงค์รายการที่ค้างอยู่...",0),r=0,o=0;Q.x.pruneExceeded();let s=Q.x.getQueue();try{let e=await X.O.getCsrfToken();for(let t of s)try{let a=Q.M.backoff(t.retryCount);if(a>0&&await q(a),"ADD_ITEM"===t.type){let{orderId:a,itemData:r}=t.payload;await A.x.addItem(a,r,void 0,e)}else"CREATE_ORDER"===t.type&&await A.x.create(t.payload,void 0,e);Q.x.removeFromQueue(t.id),r++}catch(e){if(t.retryCount+1>Q.M.maxRetry)Q.x.removeFromQueue(t.id),o++;else{let a=e instanceof Error?e.message:void 0;Q.x.incrementRetry(t.id,a)}}}finally{e(),a(!1),r>0&&i.ZP.success(`ซิงค์สำเร็จ ${r} รายการ`),o>0&&D.ZP.error({message:"ซิงค์บางรายการไม่สำเร็จ",description:`${o} รายการเกินจำนวน retry ที่กำหนด`,placement:"bottomRight",duration:3})}},[t]);return(0,o.useEffect)(()=>{e?s():D.ZP.warning({message:"ออฟไลน์",description:"รายการจะถูกเก็บเข้าคิวและซิงค์ให้อัตโนมัติเมื่อออนไลน์",icon:r.jsx(J.Z,{style:{color:"#faad14"}}),duration:2,placement:"bottomRight"})},[e,s]),null},{Title:B,Text:L}=k.default;function z(){let{currentShift:e,loading:t,openShift:a}=u(),[s,l]=(0,o.useState)(!1),[n]=v.Z.useForm(),i=(0,m.usePathname)(),c=async e=>{l(!0);try{await a(e.startAmount)}catch{}finally{l(!1)}};return t?null:r.jsx(C.Z,{open:!t&&!e&&"/pos/shift"!==i,title:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(B,{level:3,style:{marginBottom:0},children:"เปิดกะการขาย (Open Shift)"}),r.jsx(L,{type:"secondary",children:"กรุณาระบุเงินทอนเริ่มต้น"})]}),centered:!0,closable:!1,maskClosable:!1,footer:null,styles:{body:{padding:"20px 0"}},children:(0,r.jsxs)(v.Z,{form:n,layout:"vertical",onFinish:c,initialValues:{startAmount:0},children:[r.jsx(v.Z.Item,{name:"startAmount",label:"เงินทอนเริ่มต้น (บาท)",rules:[{required:!0,message:"กรุณาระบุจำนวนเงิน"}],children:r.jsx(E.Z,{style:{width:"100%",fontSize:"24px",height:"60px",display:"flex",alignItems:"center"},size:"large",prefix:r.jsx(S.Z,{style:{fontSize:"24px"}}),min:0,precision:2,placeholder:"0.00",autoFocus:!0,controls:!1,inputMode:"decimal",formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>e?.replace(/\$\s?|(,*)/g,""),onKeyDown:e=>{if([8,46,9,27,13,190,110].includes(e.keyCode)||!0===e.ctrlKey||!0===e.metaKey||e.keyCode>=35&&e.keyCode<=39){(190===e.keyCode||110===e.keyCode)&&e.currentTarget.value.includes(".")&&e.preventDefault();return}(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}})}),r.jsx(v.Z.Item,{style:{marginBottom:0},children:r.jsx(P.ZP,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:s,className:"bg-emerald-500 hover:bg-emerald-600 border-none h-12 text-lg",children:"ยืนยันเปิดกะ"})})]})})}function U({children:e}){return(0,r.jsxs)(d,{children:[r.jsx(M,{}),r.jsx(z,{}),(0,r.jsxs)(s.Z,{children:[e,r.jsx(O,{})]})]})}},63196:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n,j:()=>i});var r=a(10326),o=a(17577),s=a.n(o);let l=(0,o.createContext)(void 0),n=({children:e})=>{let[t,a]=(0,o.useState)([]),[n,i]=(0,o.useState)("DINE_IN"),[c,d]=(0,o.useState)(null),[u,m]=(0,o.useState)(null),[p,h]=(0,o.useState)(null),[y,f]=(0,o.useState)(null),[x,g]=(0,o.useState)(!1);s().useEffect(()=>{let e=localStorage.getItem("pos_cart_items"),t=localStorage.getItem("pos_order_mode"),r=localStorage.getItem("pos_ref_id"),o=localStorage.getItem("pos_ref_code"),s=localStorage.getItem("pos_discount"),l=localStorage.getItem("pos_payment");if(e)try{let t=JSON.parse(e).map((e,t)=>({...e,cart_item_id:e.cart_item_id||`item-${Date.now()}-${t}-${Math.random().toString(36).substr(2,9)}`}));a(t)}catch(e){console.error("Failed to parse cart:",e),a([])}t&&i(t),r&&d(r),o&&m(o),s&&h(JSON.parse(s)),l&&f(JSON.parse(l)),g(!0)},[]),s().useEffect(()=>{x&&(localStorage.setItem("pos_cart_items",JSON.stringify(t)),localStorage.setItem("pos_order_mode",n),c?localStorage.setItem("pos_ref_id",c):localStorage.removeItem("pos_ref_id"),u?localStorage.setItem("pos_ref_code",u):localStorage.removeItem("pos_ref_code"),p?localStorage.setItem("pos_discount",JSON.stringify(p)):localStorage.removeItem("pos_discount"),y?localStorage.setItem("pos_payment",JSON.stringify(y)):localStorage.removeItem("pos_payment"))},[t,n,c,u,p,y,x]);let b=e=>{a(t=>t.filter(t=>t.cart_item_id!==e))},_=()=>t.reduce((e,t)=>e+(Number(t.product.price)+(t.details||[]).reduce((e,t)=>e+Number(t.extra_price),0))*t.quantity,0),j=()=>{let e=_();return p?"Percentage"===p.discount_type?e*p.discount_amount/100:Math.min(p.discount_amount,e):0};return r.jsx(l.Provider,{value:{cartItems:t,addToCart:(e,t=1,r)=>{a(a=>{let o={cart_item_id:`item-${Date.now()}-${a.length}-${Math.random().toString(36).substr(2,9)}`,product:e,quantity:t,notes:r,details:[]};return[...a,o]})},removeFromCart:b,updateQuantity:(e,t)=>{if(t<=0){b(e);return}a(a=>a.map(a=>a.cart_item_id===e?{...a,quantity:t}:a))},updateItemNote:(e,t)=>{a(a=>a.map(a=>a.cart_item_id===e?{...a,notes:t}:a))},clearCart:()=>{a([]),h(null),f(null),d(null),m(null)},addDetailToItem:(e,t)=>{a(a=>a.map(a=>a.cart_item_id===e?{...a,details:[...a.details||[],t]}:a))},removeDetailFromItem:(e,t)=>{a(a=>a.map(a=>a.cart_item_id===e?{...a,details:(a.details||[]).filter((e,a)=>a!==t)}:a))},updateItemDetails:(e,t)=>{a(a=>a.map(a=>a.cart_item_id===e?{...a,details:t}:a))},orderMode:n,setOrderMode:i,referenceId:c,setReferenceId:d,referenceCode:u,setReferenceCode:m,selectedDiscount:p,setSelectedDiscount:h,selectedPaymentMethod:y,setSelectedPaymentMethod:f,getTotalItems:()=>t.reduce((e,t)=>e+t.quantity,0),getSubtotal:_,getDiscountAmount:j,getFinalPrice:()=>Math.max(0,_()-j())},children:e})},i=()=>{let e=(0,o.useContext)(l);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},33540:(e,t,a)=>{"use strict";a.d(t,{CartProvider:()=>n,j:()=>i});var r=a(10326),o=a(17577),s=a.n(o);let l=(0,o.createContext)(void 0),n=({children:e})=>{let[t,a]=(0,o.useState)([]);(0,o.useEffect)(()=>{let e=localStorage.getItem("shopping_cart");if(e)try{a(JSON.parse(e))}catch(e){console.error("Failed to parse cart from local storage",e)}},[]),(0,o.useEffect)(()=>{localStorage.setItem("shopping_cart",JSON.stringify(t))},[t]);let n=(0,o.useCallback)(e=>{a(t=>t.find(t=>t.ingredient.id===e.id)?t.map(t=>t.ingredient.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{ingredient:e,quantity:1}])},[]),i=(0,o.useCallback)(e=>{a(t=>t.filter(t=>t.ingredient.id!==e))},[]),c=(0,o.useCallback)((e,t)=>{if(t<=0){i(e);return}a(a=>a.map(a=>a.ingredient.id===e?{...a,quantity:t}:a))},[i]),d=(0,o.useCallback)(()=>{a([])},[]),u=t.reduce((e,t)=>e+t.quantity,0),m=s().useMemo(()=>({items:t,addToCart:n,removeFromCart:i,updateQuantity:c,clearCart:d,itemCount:u}),[t,n,i,c,d,u]);return r.jsx(l.Provider,{value:m,children:e})},i=()=>{let e=(0,o.useContext)(l);if(!e)throw Error("useCart must be used within a CartProvider");return e}},67355:(e,t,a)=>{"use strict";a.d(t,{L:()=>o});var r=a(17577);function o(){let[e,t]=(0,r.useState)("undefined"==typeof navigator||navigator.onLine);return e}},26859:(e,t,a)=>{"use strict";a.d(t,{x:()=>b});var r=a(48571),o=a(12529),s=a(40820),l=a(13976);let n=r.Ryn({id:r.Z_8(),username:r.Z_8()}).partial().nullable(),i=r.Ryn({id:r.Z_8(),display_name:r.Z_8()}).partial().nullable(),c=r.Ryn({id:r.Z_8(),display_name:r.Z_8(),img_url:r.Z_8().nullable(),price:r.oQ2.number(),category:i.optional()}).partial().nullable(),d=r.Ryn({id:r.Z_8().optional(),detail_name:r.Z_8(),extra_price:r.oQ2.number()}).partial(),u=r.Ryn({id:r.Z_8(),order_id:r.Z_8(),product_id:r.Z_8(),product_name:r.Z_8().optional(),quantity:r.oQ2.number(),price:r.oQ2.number(),total_price:r.oQ2.number(),discount_amount:r.oQ2.number().optional().default(0),notes:r.Z_8().nullable().optional(),status:r.jbo(l.i).optional(),product:c.optional(),details:r.IXX(d).optional()}),m=r.Ryn({id:r.Z_8(),order_no:r.Z_8(),order_type:r.jbo(l.m),table_id:r.Z_8().nullable().optional(),delivery_id:r.Z_8().nullable().optional(),delivery_code:r.Z_8().nullable().optional(),sub_total:r.oQ2.number(),discount_id:r.Z_8().nullable().optional(),discount_amount:r.oQ2.number(),vat:r.oQ2.number(),total_amount:r.oQ2.number(),received_amount:r.oQ2.number(),change_amount:r.oQ2.number(),status:r.jbo(l.i),created_by_id:r.Z_8().nullable().optional(),create_date:r.Z_8(),update_date:r.Z_8(),items:r.IXX(u).optional(),created_by:n.optional(),table:r.YjB().optional(),delivery:r.YjB().optional(),discount:r.YjB().optional(),payments:r.IXX(r.YjB()).optional()}),p=r.Ryn({data:r.IXX(m),total:r.oQ2.number(),page:r.oQ2.number(),last_page:r.oQ2.number().optional()}),h=r.Ryn({table_name:r.Z_8().nullable().optional(),delivery_name:r.Z_8().nullable().optional()}).partial().nullable(),y=r.Ryn({id:r.Z_8(),order_no:r.Z_8(),order_type:r.jbo(l.m),status:r.jbo(l.i),create_date:r.Z_8(),total_amount:r.oQ2.number(),delivery_code:r.Z_8().nullable().optional(),table_id:r.Z_8().nullable().optional(),delivery_id:r.Z_8().nullable().optional(),table:h.optional(),delivery:h.optional(),items_summary:r.IMB(r.Z_8(),r.oQ2.number()).optional(),items_count:r.oQ2.number().optional()}),f=r.Ryn({data:r.IXX(y),total:r.oQ2.number(),page:r.oQ2.number(),last_page:r.oQ2.number().optional()}),x=s.q.POS.ORDERS,g=(e,t="application/json")=>{let a={};return t&&(a["Content-Type"]=t),e&&(a.Cookie=e),a},b={getAll:async(e,t=1,a=50,s,l,n)=>{let i=new URLSearchParams({page:t.toString(),limit:a.toString(),...s&&{status:s},...l&&{type:l},...n&&{q:n}}),c=`${x}?${i.toString()}`,d=(0,o.b)("GET",c),u=g(e,""),m=await fetch(d,{cache:"no-store",headers:u,credentials:"include"});if(!m.ok){let e=await m.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let h=await m.json();try{return p.parse(h)}catch(e){throw console.error("Zod Validation Error in ordersService.getAll:",e),e instanceof r.jmq&&console.error("Zod Issues:",e.issues),e}},getAllSummary:async(e,t=1,a=50,s,l,n)=>{let i=new URLSearchParams({page:t.toString(),limit:a.toString(),...s&&{status:s},...l&&{type:l},...n&&{q:n}}),c=`${x}/summary?${i.toString()}`,d=(0,o.b)("GET",c),u=g(e,""),m=await fetch(d,{cache:"no-store",headers:u,credentials:"include"});if(!m.ok){let e=await m.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let p=await m.json();try{return f.parse(p)}catch(e){throw console.error("Zod Validation Error in ordersService.getAllSummary:",e),e instanceof r.jmq&&console.error("Zod Issues:",e.issues),e}},getStats:async e=>{let t=(0,o.b)("GET",s.q.POS.CHANNELS.STATS),a=g(e,""),r=await fetch(t,{cache:"no-store",headers:a,credentials:"include"});if(!r.ok){let e=await r.text();console.error("Order Stats Backend Error:",e);let t=await JSON.parse(e).catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถดึงข้อมูลสถิติได้")}return await r.json()},getById:async(e,t)=>{let a=(0,o.b)("GET",`${x}/${e}`),s=g(t,""),l=await fetch(a,{cache:"no-store",headers:s,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let n=await l.json();try{return m.parse(n)}catch(e){throw console.error("Zod Validation Error in ordersService.getById:",e),e instanceof r.jmq&&console.error("Zod Issues:",e.issues),e}},create:async(e,t,a)=>{let r=(0,o.b)("POST",`${x}`),s=g(t);a&&(s["X-CSRF-Token"]=a);let l=await fetch(r,{method:"POST",headers:s,credentials:"include",body:JSON.stringify(e)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถสร้างออเดอร์ได้")}return l.json()},update:async(e,t,a,r)=>{let s=(0,o.b)("PUT",`${x}/${e}`),l=g(a);r&&(l["X-CSRF-Token"]=r);let n=await fetch(s,{method:"PUT",headers:l,credentials:"include",body:JSON.stringify(t)});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถแก้ไขออเดอร์ได้")}return n.json()},delete:async(e,t,a)=>{let r=(0,o.b)("DELETE",`${x}/${e}`),s=g(t,"");a&&(s["X-CSRF-Token"]=a);let l=await fetch(r,{method:"DELETE",headers:s,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถลบออเดอร์ได้")}},updateItemStatus:async(e,t,a,r)=>{let s=(0,o.b)("PATCH",`${x}/items/${e}/status`),l=g(a);r&&(l["X-CSRF-Token"]=r);let n=await fetch(s,{method:"PATCH",headers:l,credentials:"include",body:JSON.stringify({status:t})});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถอัปเดตสถานะรายการได้")}},getItems:async(e,t)=>{let a=e?`?status=${e}`:"",r=(0,o.b)("GET",`${x}/items${a}`),s=g(t,""),l=await fetch(r,{cache:"no-store",headers:s,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลรายการได้")}return l.json()},addItem:async(e,t,a,r)=>{let s=(0,o.b)("POST",`${x}/${e}/items`),l=g(a);r&&(l["X-CSRF-Token"]=r);let n=await fetch(s,{method:"POST",headers:l,credentials:"include",body:JSON.stringify(t)});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถเพิ่มรายการได้")}return n.json()},updateItem:async(e,t,a,r)=>{let s=(0,o.b)("PUT",`${x}/items/${e}`),l=g(a);r&&(l["X-CSRF-Token"]=r);let n=await fetch(s,{method:"PUT",headers:l,credentials:"include",body:JSON.stringify(t)});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถแก้ไขรายการได้")}return n.json()},deleteItem:async(e,t,a)=>{let r=(0,o.b)("DELETE",`${x}/items/${e}`),s=g(t,"");a&&(s["X-CSRF-Token"]=a);let l=await fetch(r,{method:"DELETE",headers:s,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถลบรายการได้")}return l.json()},updateStatus:async(e,t,a)=>{let r={"Content-Type":"application/json"};a&&(r["X-CSRF-Token"]=a);let s=(0,o.b)("PUT",`${x}/${e}`);if(!(await fetch(s,{method:"PUT",headers:r,body:JSON.stringify({status:t}),credentials:"include"})).ok)throw Error("Failed to update status")}}},94658:(e,t,a)=>{"use strict";a.d(t,{t:()=>o});var r=a(33357);let o={getCurrentShift:async()=>{let e=await fetch("/api/pos/shifts/current",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(404===e.status)return null;if(!e.ok)throw Error("Failed to fetch current shift");return e.json()},openShift:async e=>{let t=await (0,r.P)(),a=await fetch("/api/pos/shifts/open",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":t},credentials:"include",body:JSON.stringify({start_amount:e})});if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"Failed to open shift");return a.json()},closeShift:async e=>{let t=await (0,r.P)(),a=await fetch("/api/pos/shifts/close",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":t},credentials:"include",body:JSON.stringify({end_amount:e})});if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"Failed to close shift");return a.json()},getCurrentSummary:async()=>{let e=await fetch("/api/pos/shifts/current/summary",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw Error("Failed to fetch shift summary");return e.json()},getSummary:async e=>{let t=await fetch(`/api/pos/shifts/summary/${e}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw Error("Failed to fetch shift summary");return t.json()}}},13976:(e,t,a)=>{"use strict";var r,o;a.d(t,{i:()=>o,m:()=>r}),function(e){e.DineIn="DineIn",e.TakeAway="TakeAway",e.Delivery="Delivery"}(r||(r={})),function(e){e.Pending="Pending",e.Cooking="Cooking",e.Served="Served",e.WaitingForPayment="WaitingForPayment",e.Paid="Paid",e.Completed="Completed",e.Cancelled="Cancelled"}(o||(o={}))},33357:(e,t,a)=>{"use strict";a.d(t,{P:()=>n});var r=a(81456);let o=null,s=0,l=null;async function n(e=!1){let t=Date.now();return!e&&o&&t-s<6e5?o:(l||(l=r.O.getCsrfToken().then(e=>(o=e||"",s=Date.now(),o)).finally(()=>{l=null})),l)}},58522:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(19510);a(71159);var o=a(94467);function s({children:e}){return r.jsx(o.Z,{children:r.jsx("div",{className:"min-h-screen pb-24 relative",children:e})})}},85429:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\layout.tsx#default`)},94467:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(68570);let o=(0,r.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\contexts\stock\CartContext.tsx#CartProvider`);(0,r.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\contexts\stock\CartContext.tsx#useCart`)}};