exports.id=3443,exports.ids=[3443],exports.modules={10583:(t,e,r)=>{Promise.resolve().then(r.bind(r,21299)),Promise.resolve().then(r.bind(r,33540))},87308:(t,e,r)=>{Promise.resolve().then(r.bind(r,33540))},4779:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var a=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"};var o=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}let i=a.forwardRef((t,e)=>a.createElement(o.Z,n({},t,{ref:e,icon:s})))},67329:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var a=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"};var o=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}let i=a.forwardRef((t,e)=>a.createElement(o.Z,n({},t,{ref:e,icon:s})))},41684:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var a=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};var o=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}let i=a.forwardRef((t,e)=>a.createElement(o.Z,n({},t,{ref:e,icon:s})))},75621:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});var a=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"};var o=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}let i=a.forwardRef((t,e)=>a.createElement(o.Z,n({},t,{ref:e,icon:s})))},21299:(t,e,r)=>{"use strict";r.d(e,{default:()=>x});var a=r(10326),s=r(17577),o=r.n(s),n=r(35047),i=r(67329),c=r(9297),l=r(73330),d=r(4779),u=r(75621),h=r(41684),f=r(94001),m=r(80440),p=r(49713);let x=()=>{let t=(0,n.useRouter)(),e=(0,n.usePathname)(),{user:r}=(0,f.a)(),[x,v]=(0,s.useState)(0),{socket:b}=(0,m.s)(),g=o().useCallback(async()=>{try{let t=new URLSearchParams;t.append("status","pending"),t.append("t",Date.now().toString());let e=await p.x.getAllOrders(void 0,t);v(e.total)}catch{}},[]);(0,s.useEffect)(()=>{r&&g()},[r,g]),(0,s.useEffect)(()=>{if(!b)return;let t=t=>{(t?.action==="create"||t?.action==="update_status")&&setTimeout(g,500)};b.on("orders_updated",t);let e=()=>g();return window.addEventListener("focus",e),()=>{b.off("orders_updated",t),window.removeEventListener("focus",e)}},[b,g]);let y=[{key:"home",label:"Home",icon:a.jsx(i.Z,{className:"text-2xl"}),path:"/"},{key:"shopping",label:"สั่งซื้อ",icon:a.jsx(c.Z,{className:"text-2xl"}),path:"/stock"},{key:"orders",label:"รายการ",icon:a.jsx(l.Z,{className:"text-2xl"}),path:"/stock/items"},{key:"history",label:"ประวัติ",icon:a.jsx(d.Z,{className:"text-2xl"}),path:"/stock/history"},...r?.role==="Admin"?[{key:"ingredients",label:"วัตถุดิบ",icon:a.jsx(u.Z,{className:"text-2xl"}),path:"/stock/ingredients"},{key:"ingredientsUnit",label:"หน่วย",icon:a.jsx(h.Z,{className:"text-2xl"}),path:"/stock/ingredientsUnit"}]:[]],w="#FCD34D",j="#D1D5DB";return a.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-md z-50",children:a.jsx("div",{className:"flex justify-around items-center h-[72px] px-6 py-2 bg-[#171717]/95 backdrop-blur-xl shadow-2xl border border-white/10 rounded-full",style:{boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.3)"},children:y.map(r=>{let s=e===r.path||e.startsWith(r.path+"/");return(0,a.jsxs)("button",{onClick:()=>t.push(r.path),className:"relative flex flex-col items-center justify-center w-full h-full group",children:[(0,a.jsxs)("div",{className:"relative flex items-center justify-center",children:[s&&a.jsx("div",{className:"absolute inset-0 bg-yellow-400/20 blur-xl rounded-full"}),(0,a.jsxs)("div",{className:`text-2xl transition-all duration-300 ease-out transform ${s?"-translate-y-1 scale-110":"group-hover:scale-105"}`,style:{color:s?w:j},children:[r.icon,"orders"===r.key&&x>0&&a.jsx("div",{className:"absolute -top-1 -right-1 w-3.5 h-3.5 bg-red-500 rounded-full border-2 border-[#171717] z-10 animate-pulse"})]})]}),a.jsx("span",{className:`text-[11px] font-medium tracking-wide mt-1 transition-all duration-300 ${s?"opacity-100 translate-y-0":"opacity-70 translate-y-1"}`,style:{color:s?w:j},children:r.label}),s&&a.jsx("div",{className:"absolute -bottom-2 w-1.5 h-1.5 rounded-full transition-all duration-300",style:{backgroundColor:w}})]},r.key)})})})}},33540:(t,e,r)=>{"use strict";r.d(e,{CartProvider:()=>i,j:()=>c});var a=r(10326),s=r(17577),o=r.n(s);let n=(0,s.createContext)(void 0),i=({children:t})=>{let[e,r]=(0,s.useState)([]);(0,s.useEffect)(()=>{let t=localStorage.getItem("shopping_cart");if(t)try{r(JSON.parse(t))}catch(t){console.error("Failed to parse cart from local storage",t)}},[]),(0,s.useEffect)(()=>{localStorage.setItem("shopping_cart",JSON.stringify(e))},[e]);let i=(0,s.useCallback)(t=>{r(e=>e.find(e=>e.ingredient.id===t.id)?e.map(e=>e.ingredient.id===t.id?{...e,quantity:e.quantity+1}:e):[...e,{ingredient:t,quantity:1}])},[]),c=(0,s.useCallback)(t=>{r(e=>e.filter(e=>e.ingredient.id!==t))},[]),l=(0,s.useCallback)((t,e)=>{if(e<=0){c(t);return}r(r=>r.map(r=>r.ingredient.id===t?{...r,quantity:e}:r))},[c]),d=(0,s.useCallback)(()=>{r([])},[]),u=e.reduce((t,e)=>t+e.quantity,0),h=o().useMemo(()=>({items:e,addToCart:i,removeFromCart:c,updateQuantity:l,clearCart:d,itemCount:u}),[e,i,c,l,d,u]);return a.jsx(n.Provider,{value:h,children:t})},c=()=>{let t=(0,s.useContext)(n);if(!t)throw Error("useCart must be used within a CartProvider");return t}},80440:(t,e,r)=>{"use strict";r.d(e,{s:()=>o});var a=r(17577),s=r(19211);let o=()=>(0,a.useContext)(s.J)},49713:(t,e,r)=>{"use strict";r.d(e,{x:()=>n});var a=r(12529);let s="/stock/orders",o=(t,e="application/json")=>{let r={};return e&&(r["Content-Type"]=e),t&&(r.Cookie=t),r},n={createOrder:async(t,e,r)=>{let n=(0,a.b)("POST",s),i=o(e);r&&(i["X-CSRF-Token"]=r);let c=await fetch(n,{method:"POST",headers:i,body:JSON.stringify(t)});if(!c.ok){let t=await c.text();console.error("Backend Error [createOrder]:",{status:c.status,statusText:c.statusText,url:n,body:t});let e={};try{e=JSON.parse(t)}catch{}throw Error(e.error||e.message||`ไม่สามารถสร้างออเดอร์ได้ (${c.status})`)}return c.json()},getAllOrders:async(t,e)=>{let r=(0,a.b)("GET",s);e&&(r+=`?${e.toString()}`);let n=o(t,""),i=await fetch(r,{cache:"no-store",headers:n});if(!i.ok){let t=await i.json().catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}return i.json()},getOrderById:async(t,e)=>{let r=(0,a.b)("GET",`${s}/${t}`),n=o(e,""),i=await fetch(r,{cache:"no-store",headers:n});if(!i.ok){let t=await i.json().catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}return i.json()},updateStatus:async(t,e,r,n)=>{let i=(0,a.b)("PUT",`${s}/${t}/status`),c=o(r);n&&(c["X-CSRF-Token"]=n);let l=await fetch(i,{method:"PUT",headers:c,body:JSON.stringify({status:e})});if(!l.ok){let t=await l.json().catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถอัปเดตสถานะออเดอร์ได้")}return l.json()},updateOrder:async(t,e,r,n)=>{let i=(0,a.b)("PUT",`${s}/${t}`),c=o(r);n&&(c["X-CSRF-Token"]=n);let l=await fetch(i,{method:"PUT",headers:c,body:JSON.stringify({items:e})});if(!l.ok){let t=await l.text();throw Error(`Failed to update order: ${l.status} ${t}`)}return l.json()},confirmPurchase:async(t,e,r,n,i)=>{let c=(0,a.b)("POST",`${s}/${t}/purchase`),l=o(n);i&&(l["X-CSRF-Token"]=i);let d=await fetch(c,{method:"POST",headers:l,body:JSON.stringify({items:e,purchased_by_id:r})});if(!d.ok){let t=await d.text();throw Error(`Failed to confirm purchase: ${d.status} ${t}`)}return d.json()},updatePurchaseDetail:async(t,e)=>{let r=(0,a.b)("POST","/stock/ordersDetail/update"),s=o(e),n=await fetch(r,{method:"POST",headers:s,body:JSON.stringify(t)});if(!n.ok){let t=await n.json().catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถอัปเดตข้อมูลการซื้อได้")}return n.json()},deleteOrder:async(t,e,r)=>{let n=(0,a.b)("DELETE",`${s}/${t}`),i=o(e,"");r&&(i["X-CSRF-Token"]=r);let c=await fetch(n,{method:"DELETE",headers:i});if(!c.ok){let t=await c.text();throw Error(`Failed to delete order: ${c.status} ${t}`)}}}},58522:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});var a=r(19510);r(71159);var s=r(94467);function o({children:t}){return a.jsx(s.Z,{children:a.jsx("div",{className:"min-h-screen pb-24 relative",children:t})})}},79730:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>n});var a=r(19510);r(71159);let s=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\components\stock\StockBottomNavigation.tsx#default`);var o=r(94467);function n({children:t}){return a.jsx(o.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen pb-24 relative",children:[t,a.jsx(s,{})]})})}},94467:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var a=r(68570);let s=(0,a.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\contexts\stock\CartContext.tsx#CartProvider`);(0,a.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\contexts\stock\CartContext.tsx#useCart`)}};