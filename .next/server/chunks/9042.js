exports.id=9042,exports.ids=[9042],exports.modules={58359:()=>{},93739:()=>{},32178:(e,t,r)=>{Promise.resolve().then(r.bind(r,65963))},37739:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},34767:(e,t,r)=>{Promise.resolve().then(r.bind(r,24462)),Promise.resolve().then(r.bind(r,88868)),Promise.resolve().then(r.bind(r,45462)),Promise.resolve().then(r.bind(r,94001)),Promise.resolve().then(r.bind(r,37938)),Promise.resolve().then(r.bind(r,19211)),Promise.resolve().then(r.bind(r,15639)),Promise.resolve().then(r.bind(r,59829))},58419:(e,t,r)=>{Promise.resolve().then(r.bind(r,16507))},6302:(e,t,r)=>{Promise.resolve().then(r.bind(r,1125))},96870:(e,t,r)=>{Promise.resolve().then(r.bind(r,83846))},16507:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var o=r(10326);r(17577);var n=r(71935),s=r(35047);function i({error:e,reset:t}){let r=(0,s.useRouter)();return o.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:24,background:"#f8fafc",fontFamily:"var(--font-family, sans-serif)"},children:(0,o.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",borderRadius:32,padding:"48px 32px",boxShadow:"0 20px 40px -10px rgba(0, 0, 0, 0.05)",maxWidth:560,width:"100%",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.6)"},children:[o.jsx("h1",{style:{margin:"0 0 12px",fontSize:24,fontWeight:700,color:"#1e293b"},children:"เกิดข้อผิดพลาดบางอย่าง"}),o.jsx("p",{style:{fontSize:16,color:"#64748b",marginBottom:24,lineHeight:1.6},children:"ขออภัย เราไม่สามารถดำเนินการตามคำขอของคุณได้ในขณะนี้"}),o.jsx("div",{style:{background:"#f1f5f9",padding:16,borderRadius:12,marginBottom:32,fontFamily:"monospace",fontSize:13,color:"#64748b",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.message||"Unknown error"}),(0,o.jsxs)("div",{style:{display:"flex",gap:16,justifyContent:"center"},children:[o.jsx(n.ZP,{type:"primary",onClick:t,size:"large",style:{borderRadius:16,fontWeight:600,height:48,padding:"0 24px",background:"#10b981",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",border:"none"},children:"ลองใหม่อีกครั้ง"}),o.jsx(n.ZP,{onClick:()=>r.push("/"),size:"large",style:{borderRadius:16,height:48,padding:"0 24px",color:"#64748b",borderColor:"#cbd5e1"},children:"กลับหน้าหลัก"})]})]})})}},1125:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var o=r(10326),n=r(52298),s=r.n(n),i=r(54547),a=r(22327),l=r(71935),d=r(61037);function c({error:e,reset:t}){return o.jsx("html",{lang:"th",children:o.jsx("body",{className:s().className,children:o.jsx(i.ZP,{locale:d.Z,children:o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 p-4",children:o.jsx(a.ZP,{status:"500",title:"เกิดข้อผิดพลาดร้ายแรง",subTitle:(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[o.jsx("p",{children:"ระบบไม่สามารถโหลดหน้าเว็บได้ กรุณาลองใหม่อีกครั้ง"}),e.digest&&(0,o.jsxs)("p",{className:"text-xs text-gray-400",children:["Digest: ",e.digest]})]}),extra:o.jsx(l.ZP,{type:"primary",onClick:()=>t(),size:"large",className:"bg-emerald-500",style:{backgroundColor:"#10b981",borderColor:"#10b981"},children:"รีโหลดหน้าเว็บ"})})})})})})}r(23824)},83846:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var o=r(10326);r(17577);var n=r(58184),s=r(22327),i=r(71935),a=r(35047),l=r(67329);let{Text:d}=n.default;function c(){let e=(0,a.useRouter)();return o.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"#f8fafc",padding:24},children:o.jsx("div",{style:{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(20px)",padding:"48px 32px",borderRadius:32,boxShadow:"0 20px 40px -10px rgba(0, 0, 0, 0.05)",maxWidth:480,width:"100%",border:"1px solid rgba(255, 255, 255, 0.6)",textAlign:"center"},children:o.jsx(s.ZP,{status:"404",title:o.jsx("span",{style:{fontSize:72,fontWeight:800,color:"#e2e8f0",lineHeight:1,display:"block",marginBottom:16},children:"404"}),subTitle:(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[o.jsx(d,{style:{fontSize:20,fontWeight:700,color:"#1e293b"},children:"ไม่พบหน้าที่คุณต้องการ"}),(0,o.jsxs)(d,{style:{fontSize:15,color:"#64748b"},children:["หน้าเว็บที่คุณพยายามเข้าถึงอาจถูกย้าย",o.jsx("br",{}),"หรือไม่มีอยู่ในระบบ"]})]}),extra:o.jsx(i.ZP,{type:"primary",icon:o.jsx(l.Z,{}),onClick:()=>e.push("/"),size:"large",style:{borderRadius:14,height:48,padding:"0 24px",fontSize:16,background:"#10b981",border:"none",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",marginTop:16},children:"กลับสู่หน้าหลัก"})})})})}},24462:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var o=r(10326),n=r(18418),s=r(58184),i=r(64635),a=r(4749),l=r(71209),d=r(71935),c=r(9297),u=r(20331),x=r(91377),h=r(91759),p=r(9078),g=r(94001),f=r(35047);let{Header:b}=n.default,{Text:y}=s.default,m=()=>{let{user:e,logout:t}=(0,g.a)(),r=(0,f.usePathname)();return e&&"/login"!==r?(0,o.jsxs)(b,{style:{position:"fixed",top:0,width:"100%",zIndex:1e3,height:"64px",padding:"0 24px",display:"flex",alignItems:"center",justifyContent:"space-between",background:"#0f172a",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)"},children:[(0,o.jsxs)(i.Z,{size:16,align:"center",children:[o.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 0 15px rgba(16, 185, 129, 0.3)",cursor:"pointer",transition:"transform 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"},children:o.jsx(c.Z,{style:{fontSize:"20px",color:"#fff"}})}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",lineHeight:1},children:[o.jsx(y,{strong:!0,style:{fontSize:"18px",color:"#f8fafc",fontWeight:700,letterSpacing:"-0.02em"},children:"POS System"}),o.jsx(y,{style:{fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:"Management"})]})]}),e&&o.jsx(a.Z,{content:(0,o.jsxs)("div",{style:{width:240},children:[o.jsx("div",{style:{padding:"16px",background:"#f8fafc",borderRadius:"12px 12px 0 0",borderBottom:"1px solid #f1f5f9"},children:(0,o.jsxs)(i.Z,{align:"center",size:12,children:[o.jsx(l.Z,{size:48,icon:o.jsx(u.Z,{}),style:{background:"#fff",color:"#10b981",border:"2px solid #e2e8f0"}}),(0,o.jsxs)("div",{children:[o.jsx(y,{strong:!0,style:{fontSize:"15px",display:"block",color:"#1e293b"},children:e?.name||e?.username||"Guest"}),o.jsx(y,{type:"secondary",style:{fontSize:"12px"},children:e?.role||"Staff"})]})]})}),(0,o.jsxs)("div",{style:{padding:"8px",display:"flex",flexDirection:"column",gap:4},children:[o.jsx(d.ZP,{type:"text",icon:o.jsx(x.Z,{}),style:{textAlign:"left",height:40,borderRadius:8,color:"#64748b"},block:!0,children:"การตั้งค่า"}),o.jsx(d.ZP,{type:"text",danger:!0,icon:o.jsx(h.Z,{}),style:{textAlign:"left",height:40,borderRadius:8},onClick:t,block:!0,children:"ออกจากระบบ"})]})]}),trigger:"click",placement:"bottomRight",overlayInnerStyle:{padding:0,borderRadius:12,boxShadow:"0 10px 40px rgba(0,0,0,0.08)"},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",padding:"6px 8px 6px 6px",borderRadius:"30px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.15)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:[o.jsx(l.Z,{size:32,icon:o.jsx(u.Z,{}),style:{background:"#334155",color:"#fff",border:"none"}}),o.jsx(y,{strong:!0,style:{fontSize:"14px",color:"#e2e8f0",paddingRight:4},children:e?.name||e?.username}),o.jsx(p.Z,{style:{fontSize:"10px",color:"#94a3b8"}})]})})]}):null}},88868:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var o=r(10326),n=r(35047),s=r(17577),i=r(37938);r(72018),r(33357);let a=()=>{let{showLoading:e,hideLoading:t,loadingMessage:r}=(0,i.x)();(0,s.useRef)(0),(0,s.useRef)(null);let o=(0,s.useRef)(r);(0,s.useEffect)(()=>{o.current=r},[r]),(0,s.useEffect)(()=>{},[e,t])},l=({children:e})=>{let t=(0,n.usePathname)(),{resetLoading:r}=(0,i.x)();a(),(0,s.useEffect)(()=>{r()},[t,r]);let l="/login"===t;return o.jsx("main",{style:{paddingTop:l?"0":"64px",paddingBottom:l?"0":"80px",minHeight:"100vh",background:l?"#fff":"#f8fafc",transition:"all 0.3s ease"},children:e})}},45462:(e,t,r)=>{"use strict";function o(){return null}r.d(t,{default:()=>o}),r(17577),"localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)},40820:(e,t,r)=>{"use strict";r.d(t,{q:()=>n,v:()=>o});let o="/api",n={AUTH:{LOGIN:"/auth/login",ME:"/auth/me",CSRF:"/csrf"},POS:{PRODUCTS:"/pos/products",ORDERS:"/pos/orders",TABLES:"/pos/tables",DISCOUNTS:"/pos/discounts",DELIVERY:"/pos/delivery",PAYMENT_METHODS:"/pos/paymentMethod",PAYMENTS:"/pos/payments",CATEGORY:"/pos/category",SHIFTS:{BASE:"/pos/shifts",CURRENT:"/pos/shifts/current",OPEN:"/pos/shifts/open",CLOSE:"/pos/shifts/close"},DASHBOARD:{SALES:"/pos/dashboard/sales",TOP_ITEMS:"/pos/dashboard/top-items"},CHANNELS:{STATS:"/pos/orders/stats"},SHOP_PROFILE:"/pos/shopProfile",SALES_ORDER_ITEMS:"/pos/salesOrderItem",SALES_ORDER_DETAILS:"/pos/salesOrderDetail",PRODUCTS_UNIT:"/pos/productsUnit",PAYMENT_DETAILS:"/pos/paymentDetails",BRANCH:"/branches",ORDER_QUEUE:"/pos/queue",PROMOTIONS:"/pos/promotions"}}},94001:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>u,a:()=>x});var o=r(10326),n=r(17577),s=r(35047),i=r(81456),a=r(3548),l=r(92121),d=r(37938);let c=(0,n.createContext)(void 0),u=({children:e})=>{let[t,r]=(0,n.useState)(null),[u,x]=(0,n.useState)(!0),h=(0,s.useRouter)(),p=(0,s.usePathname)(),g=async()=>{try{let e=await i.O.getMe();r(e)}catch{r(null)}finally{x(!1)}};(0,n.useEffect)(()=>{g()},[]);let{showLoading:f,hideLoading:b}=(0,d.x)();(0,n.useEffect)(()=>{u||t||"/login"===p||h.push("/login")},[t,u,p,h]);let y=async e=>{try{f("กำลังเข้าสู่ระบบ...");let t=await i.O.getCsrfToken(),{token:o,...n}=await i.O.login(e,t);r(n),h.push("/")}catch(e){throw e}finally{b()}},m=async()=>{try{f("กำลังออกจากระบบ..."),await i.O.logout(),a.x.clearQueue(),r(null),h.push("/login")}catch(e){console.error("Logout error:",e)}finally{b()}};return u?o.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-white",children:o.jsx(l.Z,{size:"large"})}):t||"/login"===p?o.jsx(c.Provider,{value:{user:t,loading:u,login:y,logout:m,checkAuth:g},children:e}):null},x=()=>{let e=(0,n.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},19211:(e,t,r)=>{"use strict";r.d(t,{J:()=>a,SocketProvider:()=>l});var o=r(10326),n=r(17577),s=r(80057),i=r(94001);let a=(0,n.createContext)({socket:null,isConnected:!1}),l=({children:e})=>{let[t,r]=(0,n.useState)(null),[l,d]=(0,n.useState)(!1),{user:c}=(0,i.a)();return(0,n.useEffect)(()=>{if(!c){t&&(t.disconnect(),r(null),d(!1));return}let e=(0,s.io)("http://13.239.29.168:3000",{transports:["websocket"],withCredentials:!0});return e.on("connect",()=>{console.log("Socket Connected:",e.id),d(!0)}),e.on("disconnect",()=>{console.log("Socket Disconnected"),d(!1)}),r(e),()=>{e.disconnect()}},[c]),o.jsx(a.Provider,{value:{socket:t,isConnected:l},children:e})}},37938:(e,t,r)=>{"use strict";r.d(t,{GlobalLoadingProvider:()=>l,O:()=>c,x:()=>d});var o=r(10326),n=r(17577),s=r(92121);let i=(0,n.createContext)(void 0),a=(0,n.createContext)(void 0),l=({children:e})=>{let[t,r]=(0,n.useState)({}),[l,d]=(0,n.useState)(void 0),c=(0,n.useCallback)((e,t="default")=>{r(e=>({...e,[t]:(e[t]||0)+1})),e&&d(e)},[]),u=(0,n.useCallback)((e="default")=>{r(t=>{if(!t[e])return t;let r={...t};return r[e]-=1,r[e]<=0&&delete r[e],r})},[]),x=(0,n.useCallback)(()=>{r({}),d(void 0)},[]),h=Object.keys(t).length>0,p=(0,n.useMemo)(()=>({isLoading:h,loadingMessage:l}),[h,l]),g=(0,n.useMemo)(()=>({showLoading:c,hideLoading:u,resetLoading:x}),[c,u,x]);return o.jsx(a.Provider,{value:g,children:(0,o.jsxs)(i.Provider,{value:p,children:[e,h&&o.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-white/10 backdrop-blur-md transition-all duration-300",children:(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16,background:"rgba(255, 255, 255, 0.8)",padding:"32px 48px",borderRadius:24,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.4)"},children:[o.jsx(s.Z,{size:"large"}),l&&o.jsx("div",{style:{fontSize:16,color:"#475569",fontWeight:500,letterSpacing:"0.02em"},children:l})]})})]})})};function d(){let e=(0,n.useContext)(i),t=(0,n.useContext)(a);if(!e||!t)throw Error("useGlobalLoading must be used within a GlobalLoadingProvider");return(0,n.useMemo)(()=>({...e,...t}),[e,t])}function c(){let e=(0,n.useContext)(a);if(!e)throw Error("useGlobalLoadingDispatch must be used within a GlobalLoadingProvider");return e}},15639:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var o=r(10326),n=r(17577),s=r.n(n),i=r(82113),a=r(35047),l=r(54547),d=r(35509);let c={token:{fontSize:15,fontFamily:"'Inter', 'Sarabun', -apple-system, BlinkMacSystemFont, sans-serif",colorPrimary:"#6366F1",colorSuccess:"#10B981",colorWarning:"#F59E0B",colorError:"#EF4444",colorInfo:"#3B82F6",colorTextHeading:"#1E293B",colorText:"#1E293B",colorTextSecondary:"#64748B",colorTextDescription:"#94A3B8",colorBgContainer:"#FFFFFF",colorBgLayout:"#F8FAFC",colorBorder:"#E2E8F0",colorBorderSecondary:"#F1F5F9",borderRadius:12,borderRadiusLG:16,borderRadiusSM:8,controlHeight:44,controlHeightLG:52,controlHeightSM:36,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04)",boxShadowSecondary:"0 4px 12px rgba(0, 0, 0, 0.08)"},components:{Button:{controlHeight:48,controlHeightLG:56,controlHeightSM:40,borderRadius:12,algorithm:!0,fontSize:15,fontWeight:600,paddingInline:20},Input:{controlHeight:48,borderRadius:12,paddingInline:16},Select:{controlHeight:48,borderRadius:12},Card:{borderRadiusLG:16,paddingLG:20,boxShadowTertiary:"0 2px 8px rgba(0, 0, 0, 0.06)"},Modal:{borderRadiusLG:20,paddingContentHorizontalLG:24},Table:{borderRadius:12,headerBg:"#F8FAFC",rowHoverBg:"#F1F5F9"},Tag:{borderRadiusSM:6},Typography:{lineHeightHeading1:1.2,lineHeightHeading2:1.3,lineHeightHeading3:1.4},Layout:{headerBg:"#FFFFFF",bodyBg:"#F8FAFC",siderBg:"#FFFFFF"},Menu:{itemBorderRadius:10,itemMarginInline:8},Tabs:{itemActiveColor:"#6366F1",inkBarColor:"#6366F1"},Divider:{colorSplit:"#E2E8F0"}}},u=({children:e})=>{let t=s().useMemo(()=>(0,i.Df)(),[]),[r,u]=(0,n.useState)(!1);return(0,a.useServerInsertedHTML)(()=>{if(!r)return u(!0),o.jsx("style",{id:"antd",dangerouslySetInnerHTML:{__html:(0,i.EN)(t,!0)}})}),o.jsx(i.V9,{cache:t,children:o.jsx(l.ZP,{theme:c,children:o.jsx(d.Z,{children:e})})})}},72018:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});let o=r(94464).Z.create({baseURL:"http://13.239.29.168:3000",withCredentials:!0,headers:{"Content-Type":"application/json"}}),n=null,s=async()=>{try{let e=await fetch("/api/csrf",{credentials:"include"});if(!e.ok)throw Error("CSRF fetch failed");return n=(await e.json()).csrfToken}catch(e){return console.error("Failed to fetch CSRF token",e),null}};o.interceptors.request.use(async e=>{if(!e.headers?.Authorization||!1!==e.withCredentials){if(!n){let e=await s();e&&(n=e)}n&&(e.headers=e.headers||{},e.headers["X-CSRF-Token"]=n)}return e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e.response?.status===403){let r=e.response?.data?.message||e.response?.data?.error||"";if((r.toLowerCase().includes("csrf")||r.toLowerCase().includes("token required"))&&!t._retry){t._retry=!0,n=null;let e=await s();if(e)return n=e,t.headers=t.headers||{},t.headers["X-CSRF-Token"]=n,o(t)}}return Promise.reject(e)});let i=o},12529:(e,t,r)=>{"use strict";function o(e,t){return({GET:`${n.API_BASE_URL}${t}`,POST:`${n.API_BASE_URL}${t}`,PUT:`${n.API_BASE_URL}${t}`,DELETE:`${n.API_BASE_URL}${t}`,PATCH:`${n.API_BASE_URL}${t}`})[e]}r.d(t,{b:()=>o});let n={get API_BASE_URL(){return"http://13.239.29.168:3000"}}},59829:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var o=r(10326),n=r(23193),s=r(77710),i=r(85872),a=r(94112),l=r(31751),d=r(44976),c=r(17577),u=r(37938),x=r(46752);let h=()=>{let e=(0,n.y)(),t=(0,s.B)(),{showLoading:r,hideLoading:o}=(0,u.x)(),i=(0,c.useRef)(!1),a=e+t>0;return(0,c.useEffect)(()=>{if(a&&!i.current){i.current=!0,r("กำลังโหลดข้อมูล...","query");return}!a&&i.current&&(i.current=!1,o("query"))},[a,r,o]),null};function p(e){return e instanceof Error?e.response?.data?.message?e.response.data.message:e.message:"string"==typeof e?e:"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ"}function g(){return new i.S({queryCache:new a.t({onError:(e,t)=>{void 0!==t.state.data&&x.ZP.error(p(e))}}),mutationCache:new l.L({onError:(e,t,r,o)=>{o.meta?.skipErrorToast!==!0&&x.ZP.error(p(e))}}),defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,retry:(e,t)=>{let r=t?.response?.status;return(!r||!(r>=400)||!(r<500))&&e<2},retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always",networkMode:"offlineFirst"},mutations:{retry:1,retryDelay:1e3,networkMode:"offlineFirst"}}})}function f({children:e}){let[t]=(0,c.useState)(g);return(0,o.jsxs)(d.aH,{client:t,children:[o.jsx(h,{}),e]})}},81456:(e,t,r)=>{"use strict";r.d(t,{O:()=>s});var o=r(40820),n=r(12529);let s={login:async(e,t,r)=>{try{let s=(0,n.b)("POST",o.q.AUTH.LOGIN),i={"Content-Type":"application/json"};t&&(i["X-CSRF-Token"]=t),r&&(i.Cookie=r);let a=await fetch(s,{method:"POST",headers:i,credentials:"include",body:JSON.stringify(e)});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||e.detail||"เข้าสู่ระบบไม่สำเร็จ")}let l=await a.json();return{...l.user,token:l.token}}catch(e){throw Error(e.message||"เข้าสู่ระบบไม่สำเร็จ")}},logout:async(e,t,r)=>{try{let o=(0,n.b)("POST","/auth/logout"),s={"Content-Type":"application/json"};e&&(s.Authorization=`Bearer ${e}`),t&&(s["X-CSRF-Token"]=t),r&&(s.Cookie=r),await fetch(o,{method:"POST",headers:s,credentials:"include"})}catch(e){console.error("Logout failed",e)}},getMe:async e=>{try{let t=(0,n.b)("GET",o.q.AUTH.ME),r={"Content-Type":"application/json"};e&&(r.Authorization=`Bearer ${e}`);let s=await fetch(t,{method:"GET",headers:r,credentials:"include",cache:"no-store"});if(!s.ok)throw Error("Unauthorized");return await s.json()}catch(e){throw e}},async getCsrfToken(){try{let e=await fetch(`${o.v}${o.q.AUTH.CSRF}`,{credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({}));return console.error("CSRF token fetch failed:",e.status,t),""}let t=await e.json();if(t.success&&t.csrfToken||t.csrfToken)return t.csrfToken;return""}catch(e){return console.error("Failed to fetch CSRF token",e),""}}}},3548:(e,t,r)=>{"use strict";r.d(t,{M:()=>i,x:()=>s});let o=()=>[],n=e=>{},s={addToQueue:(e,t)=>{let r=o(),s={id:`offline-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:e,payload:t,timestamp:Date.now(),retryCount:0};return n([...r,s]),s},getQueue:()=>o(),removeFromQueue:e=>{n(o().filter(t=>t.id!==e))},incrementRetry:(e,t)=>{n(o().map(r=>r.id===e?{...r,retryCount:r.retryCount+1,lastError:t}:r))},clearQueue:()=>{},pruneExceeded:()=>{n(o().filter(e=>e.retryCount<=5))}},i={maxRetry:5,backoff:e=>Math.min(3e4,2e3*e)}},33357:(e,t,r)=>{"use strict";r.d(t,{P:()=>a});var o=r(81456);let n=null,s=0,i=null;async function a(e=!1){let t=Date.now();return!e&&n&&t-s<6e5?n:(i||(i=o.O.getCsrfToken().then(e=>(n=e||"",s=Date.now(),n)).finally(()=>{i=null})),i)}},7629:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\error.tsx#default`)},43315:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});let o=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\global-error.tsx#default`)},61804:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y,metadata:()=>b});var o=r(19510),n=r(60880),s=r.n(n),i=r(17214),a=r.n(i);r(5023);var l=r(68570);let d=(0,l.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\lib\AntdRegistry.tsx#default`);(0,l.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\contexts\SocketContext.tsx#SocketContext`);let c=(0,l.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\contexts\SocketContext.tsx#SocketProvider`),u=(0,l.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\contexts\AuthContext.tsx#AuthProvider`);(0,l.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\contexts\AuthContext.tsx#useAuth`);let x=(0,l.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\contexts\pos\GlobalLoadingContext.tsx#GlobalLoadingProvider`);(0,l.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\contexts\pos\GlobalLoadingContext.tsx#useGlobalLoading`),(0,l.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\contexts\pos\GlobalLoadingContext.tsx#useGlobalLoadingDispatch`);let h=(0,l.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\providers\QueryProvider.tsx#default`),p=(0,l.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\components\AppHeader.tsx#default`),g=(0,l.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\components\ClientLayout.tsx#default`),f=(0,l.createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\components\ServiceWorkerRegistration.tsx#default`),b={title:"POS",description:"POS"};function y({children:e}){return o.jsx("html",{lang:"en",children:o.jsx("body",{className:`${s().variable} ${a().variable} antialiased font-sans`,children:o.jsx(d,{children:o.jsx(x,{children:o.jsx(h,{children:o.jsx(u,{children:(0,o.jsxs)(c,{children:[o.jsx(f,{}),o.jsx(p,{}),o.jsx(g,{children:e})]})})})})})})})}},11930:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var o=r(19510),n=r(43206);function s(){return o.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-auto",style:{background:"rgba(255, 255, 255, 0.6)",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"},children:(0,o.jsxs)("div",{style:{padding:32,background:"rgba(255, 255, 255, 0.8)",borderRadius:24,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.08)",display:"flex",flexDirection:"column",alignItems:"center",gap:16,border:"1px solid rgba(255, 255, 255, 0.6)"},children:[o.jsx(n.yC,{size:"large"}),o.jsx("span",{style:{color:"#64748b",fontWeight:500,fontSize:14,letterSpacing:"0.02em"},children:"กำลังโหลด..."})]})})}},12523:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\not-found.tsx#default`)},5023:()=>{},23824:()=>{}};