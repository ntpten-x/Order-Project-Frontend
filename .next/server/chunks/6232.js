"use strict";exports.id=6232,exports.ids=[6232],exports.modules={95740:(t,e,a)=>{a.d(e,{q:()=>r,v:()=>o});let o="/api",r={AUTH:{LOGIN:"/auth/login",LOGOUT:"/auth/logout",ME:"/auth/me",CSRF:"/csrf",SWITCH_BRANCH:"/auth/switch-branch"},AUDIT:{LOGS:"/audit/logs"},POS:{PRODUCTS:"/pos/products",ORDERS:"/pos/orders",TABLES:"/pos/tables",DISCOUNTS:"/pos/discounts",DELIVERY:"/pos/delivery",PAYMENT_METHODS:"/pos/paymentMethod",PAYMENTS:"/pos/payments",CATEGORY:"/pos/category",SHIFTS:{BASE:"/pos/shifts",CURRENT:"/pos/shifts/current",OPEN:"/pos/shifts/open",CLOSE:"/pos/shifts/close"},DASHBOARD:{SALES:"/pos/dashboard/sales",TOP_ITEMS:"/pos/dashboard/top-items"},CHANNELS:{STATS:"/pos/orders/stats"},SHOP_PROFILE:"/pos/shopProfile",SALES_ORDER_ITEMS:"/pos/salesOrderItem",SALES_ORDER_DETAILS:"/pos/salesOrderDetail",PRODUCTS_UNIT:"/pos/productsUnit",PAYMENT_DETAILS:"/pos/paymentDetails",BRANCH:"/branches",ORDER_QUEUE:"/pos/queue"}}},87456:(t,e,a)=>{function o(t,e){return({GET:`${r.API_BASE_URL}${e}`,POST:`${r.API_BASE_URL}${e}`,PUT:`${r.API_BASE_URL}${e}`,DELETE:`${r.API_BASE_URL}${e}`,PATCH:`${r.API_BASE_URL}${e}`})[t]}a.d(e,{W:()=>r,b:()=>o});let r={get API_BASE_URL(){return"http://localhost:3000"}}},16232:(t,e,a)=>{a.d(e,{x:()=>T});var o,r,n=a(96543),i=a(87456),s=a(95740);(function(t){t.DineIn="DineIn",t.TakeAway="TakeAway",t.Delivery="Delivery"})(o||(o={})),function(t){t.Pending="Pending",t.Cooking="Cooking",t.Served="Served",t.WaitingForPayment="WaitingForPayment",t.Paid="Paid",t.Completed="Completed",t.Cancelled="Cancelled"}(r||(r={}));let l=n.Ryn({id:n.Z_8(),username:n.Z_8()}).partial().nullable(),c=n.Ryn({id:n.Z_8(),display_name:n.Z_8()}).partial().nullable(),d=n.Ryn({id:n.Z_8(),display_name:n.Z_8(),img_url:n.Z_8().nullable(),price:n.oQ2.number(),category:c.optional()}).partial().nullable(),u=n.Ryn({id:n.Z_8().optional(),detail_name:n.Z_8(),extra_price:n.oQ2.number()}).partial(),p=n.Ryn({id:n.Z_8(),order_id:n.Z_8(),product_id:n.Z_8(),product_name:n.Z_8().optional(),quantity:n.oQ2.number(),price:n.oQ2.number(),total_price:n.oQ2.number(),discount_amount:n.oQ2.number().optional().default(0),notes:n.Z_8().nullable().optional(),status:n.jbo(r).optional(),product:d.optional(),details:n.IXX(u).optional()}),m=n.Ryn({id:n.Z_8(),order_no:n.Z_8(),order_type:n.jbo(o),table_id:n.Z_8().nullable().optional(),delivery_id:n.Z_8().nullable().optional(),delivery_code:n.Z_8().nullable().optional(),sub_total:n.oQ2.number(),discount_id:n.Z_8().nullable().optional(),discount_amount:n.oQ2.number(),vat:n.oQ2.number(),total_amount:n.oQ2.number(),received_amount:n.oQ2.number(),change_amount:n.oQ2.number(),status:n.jbo(r),created_by_id:n.Z_8().nullable().optional(),create_date:n.Z_8(),update_date:n.Z_8(),items:n.IXX(p).optional(),created_by:l.optional(),table:n.YjB().optional(),delivery:n.YjB().optional(),discount:n.YjB().optional(),payments:n.IXX(n.YjB()).optional()}),_=n.Ryn({data:n.IXX(m),total:n.oQ2.number(),page:n.oQ2.number(),last_page:n.oQ2.number().optional()}),y=n.Ryn({table_name:n.Z_8().nullable().optional(),delivery_name:n.Z_8().nullable().optional()}).partial().nullable(),h=n.Ryn({id:n.Z_8(),order_no:n.Z_8(),order_type:n.jbo(o),status:n.jbo(r),create_date:n.Z_8(),total_amount:n.oQ2.number(),delivery_code:n.Z_8().nullable().optional(),table_id:n.Z_8().nullable().optional(),delivery_id:n.Z_8().nullable().optional(),table:y.optional(),delivery:y.optional(),items_summary:n.IMB(n.Z_8(),n.oQ2.number()).optional(),items_count:n.oQ2.number().optional()}),b=n.Ryn({data:n.IXX(h),total:n.oQ2.number(),page:n.oQ2.number(),last_page:n.oQ2.number().optional()});var S=a(91525);let f=s.q.POS.ORDERS,E=(t,e="application/json")=>{let a={};return e&&(a["Content-Type"]=e),t&&(a.Cookie=t),a},T={getAll:async(t,e=1,a=50,o,r,s)=>{let l=new URLSearchParams({page:e.toString(),limit:a.toString(),...o&&{status:o},...r&&{type:r},...s&&{q:s}}),c=`${f}?${l.toString()}`,d=(0,i.b)("GET",c),u=E(t,""),p=await fetch(d,{cache:"no-store",headers:u,credentials:"include"});if(!p.ok){let t=await p.json().catch(()=>({}));throw Error((0,S.i_)(t,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}let m=await p.json();try{return _.parse((0,S.XO)(m))}catch(t){throw console.error("Zod Validation Error in ordersService.getAll:",t),t instanceof n.jmq&&console.error("Zod Issues:",t.issues),t}},getAllSummary:async(t,e=1,a=50,o,r,s)=>{let l=new URLSearchParams({page:e.toString(),limit:a.toString(),...o&&{status:o},...r&&{type:r},...s&&{q:s}}),c=`${f}/summary?${l.toString()}`,d=(0,i.b)("GET",c),u=E(t,""),p=await fetch(d,{cache:"no-store",headers:u,credentials:"include"});if(!p.ok){let t=await p.json().catch(()=>({}));throw Error((0,S.i_)(t,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}let m=await p.json();try{return b.parse((0,S.XO)(m))}catch(t){throw console.error("Zod Validation Error in ordersService.getAllSummary:",t),t instanceof n.jmq&&console.error("Zod Issues:",t.issues),t}},getStats:async t=>{let e=(0,i.b)("GET",s.q.POS.CHANNELS.STATS),a=E(t,""),o=await fetch(e,{cache:"no-store",headers:a,credentials:"include"});if(!o.ok){let t=await o.text();console.error("Order Stats Backend Error:",t);let e=await JSON.parse(t).catch(()=>({}));throw Error((0,S.i_)(e,"ไม่สามารถดึงข้อมูลสถิติได้"))}let r=await o.json();return(0,S.hH)(r)},getById:async(t,e)=>{let a=(0,i.b)("GET",`${f}/${t}`),o=E(e,""),r=await fetch(a,{cache:"no-store",headers:o,credentials:"include"});if(!r.ok){let t=await r.json().catch(()=>({}));throw Error((0,S.i_)(t,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}let s=await r.json();try{let t=(0,S.hH)(s);if(Array.isArray(t)){if(0===t.length)throw Error("Order not found");return m.parse(t[0])}return m.parse(t)}catch(t){throw console.error("Zod Validation Error in ordersService.getById:",t),t instanceof n.jmq&&console.error("Zod Issues:",t.issues),t}},create:async(t,e,a)=>{let o=(0,i.b)("POST",`${f}`),r=E(e);a&&(r["X-CSRF-Token"]=a);let n=await fetch(o,{method:"POST",headers:r,credentials:"include",body:JSON.stringify(t)});if(!n.ok){let t=await n.json().catch(()=>({}));throw Error((0,S.i_)(t,"ไม่สามารถสร้างออเดอร์ได้"))}return(0,S.hH)(await n.json())},update:async(t,e,a,o)=>{let r=(0,i.b)("PUT",`${f}/${t}`),n=E(a);o&&(n["X-CSRF-Token"]=o);let s=await fetch(r,{method:"PUT",headers:n,credentials:"include",body:JSON.stringify(e)});if(!s.ok){let t=await s.json().catch(()=>({}));throw Error((0,S.i_)(t,"ไม่สามารถแก้ไขออเดอร์ได้"))}return(0,S.hH)(await s.json())},delete:async(t,e,a)=>{let o=(0,i.b)("DELETE",`${f}/${t}`),r=E(e,"");a&&(r["X-CSRF-Token"]=a);let n=await fetch(o,{method:"DELETE",headers:r,credentials:"include"});if(!n.ok){let t=await n.json().catch(()=>({}));throw Error((0,S.i_)(t,"ไม่สามารถลบออเดอร์ได้"))}},updateItemStatus:async(t,e,a,o)=>{let r=(0,i.b)("PATCH",`${f}/items/${t}/status`),n=E(a);o&&(n["X-CSRF-Token"]=o);let s=await fetch(r,{method:"PATCH",headers:n,credentials:"include",body:JSON.stringify({status:e})});if(!s.ok){let t=await s.json().catch(()=>({}));throw Error((0,S.i_)(t,"ไม่สามารถอัปเดตสถานะรายการได้"))}},getItems:async(t,e)=>{let a=t?`?status=${t}`:"",o=(0,i.b)("GET",`${f}/items${a}`),r=E(e,""),n=await fetch(o,{cache:"no-store",headers:r,credentials:"include"});if(!n.ok){let t=await n.json().catch(()=>({}));throw Error((0,S.i_)(t,"ไม่สามารถดึงข้อมูลรายการได้"))}let s=(0,S.hH)(await n.json());if(Array.isArray(s))return s;if(s&&"object"==typeof s&&"data"in s){let t=s.data;if(Array.isArray(t))return t}return s},addItem:async(t,e,a,o)=>{let r=(0,i.b)("POST",`${f}/${t}/items`),n=E(a);o&&(n["X-CSRF-Token"]=o);let s=await fetch(r,{method:"POST",headers:n,credentials:"include",body:JSON.stringify(e)});if(!s.ok){let t=await s.json().catch(()=>({}));throw Error((0,S.i_)(t,"ไม่สามารถเพิ่มรายการได้"))}return(0,S.hH)(await s.json())},updateItem:async(t,e,a,o)=>{let r=(0,i.b)("PUT",`${f}/items/${t}`),n=E(a,"application/json");o&&(n["X-CSRF-Token"]=o);let s=await fetch(r,{method:"PUT",headers:n,credentials:"include",body:JSON.stringify(e)});if(!s.ok){let t=await s.json().catch(()=>({}));throw Error((0,S.i_)(t,"ไม่สามารถแก้ไขรายการได้"))}return(0,S.hH)(await s.json())},deleteItem:async(t,e,a)=>{let o=(0,i.b)("DELETE",`${f}/items/${t}`),r=E(e,"");a&&(r["X-CSRF-Token"]=a);let n=await fetch(o,{method:"DELETE",headers:r,credentials:"include"});if(!n.ok){let t=await n.json().catch(()=>({}));throw Error((0,S.i_)(t,"ไม่สามารถลบรายการได้"))}return(0,S.hH)(await n.json())},updateStatus:async(t,e,a)=>{let o={"Content-Type":"application/json"};a&&(o["X-CSRF-Token"]=a);let r=(0,i.b)("PUT",`${f}/${t}`);if(!(await fetch(r,{method:"PUT",headers:o,body:JSON.stringify({status:e}),credentials:"include"})).ok)throw Error("Failed to update status")}}},91525:(t,e,a)=>{function o(t){return!!t&&"object"==typeof t}function r(t){return t&&"object"==typeof t&&"success"in t&&!0===t.success&&"data"in t?t.data:t}function n(t,e="Request failed"){if("string"==typeof t)return t;if(!o(t))return e;if(!1===t.success){let e=t.error;if(o(e)&&"string"==typeof e.message&&e.message.trim())return e.message}if("error"in t){let e=t.error;if("string"==typeof e&&e.trim())return e;if(o(e)&&"string"==typeof e.message&&e.message.trim())return e.message}return"string"==typeof t.message&&t.message.trim()?t.message:e}function i(t){if(t&&"object"==typeof t&&"success"in t&&!0===t.success&&Array.isArray(t.data)){let e="number"==typeof t.meta?.total?t.meta.total:t.data.length,a="number"==typeof t.meta?.page?t.meta.page:1,o="number"==typeof t.meta?.limit?t.meta.limit:50,r="number"==typeof t.meta?.totalPages?t.meta.totalPages:Math.max(Math.ceil(e/Math.max(o,1)),1);return{data:t.data,total:e,page:a,last_page:r}}return t}a.d(e,{XO:()=>i,hH:()=>r,i_:()=>n})}};