(()=>{var e={};e.id=3843,e.ids=[3843],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},5095:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.Z,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>u,tree:()=>l}),r(59945),r(85429),r(58522),r(61804),r(7629),r(11930),r(12523);var i=r(23191),s=r(88716),a=r(43315),o=r(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(t,n);let l=["",{children:["(main)",{children:["pos",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,59945)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\products\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\products\\page.tsx"],c="/(main)/pos/products/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/pos/products/page",pathname:"/pos/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},99198:(e,t,r)=>{Promise.resolve().then(r.bind(r,59060))},59060:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ee});var i=r(10326),s=r(77626),a=r.n(s),o=r(17577),n=r(58184),l=r(61357),d=r(71935),c=r(46752),p=r(75958),u=r(64635),x=r(6400),h=r(49909),m=r(74944),g=r(46226),f=r(62938),y=r(56811),b=r(54695),j=r(46024),w=r(63191),k=r(80490),v=r(72380),F=r(24395),P=r(35047),Z=r(37938),z=r(59746),S=r(80440),E=r(33357),C=r(45207),_=r(54354),R=r(69711),q=r(44528);let B={...(0,q.yf)("linear-gradient(135deg, #4F46E5 0%, #4338CA 100%)"),productCard:q.YO,productCardInner:q.lv},I=`
  ${(0,q.IU)(".products-page",".product-card")}

  @media (max-width: 576px) {
    .products-header-content {
      flex-direction: column !important;
      align-items: stretch !important;
      gap: 16px !important;
    }
    
    .products-header-left {
      width: 100%;
    }

    .products-header-actions {
      width: 100%;
      display: flex;
      gap: 8px;
    }

    .products-search-input {
      width: 100% !important;
      flex: 1;
    }

    .products-add-btn-text {
      display: none;
    }
    
    .ant-empty-description {
        padding: 0 20px;
    }

    .product-card-inner {
        padding: 12px !important;
        gap: 10px !important;
    }
  }
`;var $=r(93312),L=r(20108),N=r(12529),T=r(40577);let O={findAll:async(e,t)=>{let r=(0,N.b)("GET","/pos/productsUnit");t&&(r+=`?${t.toString()}`);let i={};e&&(i.Cookie=e);let s=await fetch(r,{cache:"no-store",credentials:"include",headers:i});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e?.error?.message||e.error||e.message||"Failed to fetch products units")}return(0,T.hH)(await s.json())}},A="pos:products-units";var D=r(49227);function U(e,t){let r=e.length>0,i=t.length>0;return{hasCategories:r,hasUnits:i,isReady:r&&i,missingFields:[!r&&"หมวดหมู่สินค้า",!i&&"หน่วยสินค้า"].filter(Boolean)}}function W(e,t){let r=U(e,t);return r.isReady?"":`กรุณาเพิ่ม${r.missingFields.join("และ")}ให้เรียบร้อยก่อนใช้งาน`}var H=r(26902),M=r(26963),G=r(76892),J=r(18978),X=r(52647),Y=r(36231);let{Text:V}=n.default,K=({totalProducts:e,activeProducts:t,inactiveProducts:r})=>(0,i.jsxs)("div",{style:B.statsCard,children:[(0,i.jsxs)("div",{style:B.statItem,children:[i.jsx("span",{style:{...B.statNumber,color:"#4F46E5"},children:e}),i.jsx(V,{style:B.statLabel,children:"ทั้งหมด"})]}),i.jsx("div",{style:{width:1,height:24,background:"#f0f0f0",alignSelf:"center"}}),(0,i.jsxs)("div",{style:B.statItem,children:[i.jsx("span",{style:{...B.statNumber,color:"#10B981"},children:t}),i.jsx(V,{style:B.statLabel,children:"ใช้งาน"})]}),i.jsx("div",{style:{width:1,height:24,background:"#f0f0f0",alignSelf:"center"}}),(0,i.jsxs)("div",{style:B.statItem,children:[i.jsx("span",{style:{...B.statNumber,color:"#F59E0B"},children:r}),i.jsx(V,{style:B.statLabel,children:"ไม่ใช้งาน"})]})]}),Q=({product:e,index:t,onEdit:r,onDelete:s})=>i.jsx("div",{className:"product-card",style:{...B.productCard(e.is_active),animationDelay:`${.03*t}s`},onClick:()=>r(e),children:(0,i.jsxs)("div",{className:"product-card-inner",style:B.productCardInner,children:[i.jsx("div",{style:{width:72,height:72,borderRadius:16,border:"1px solid #F1F5F9",boxShadow:"0 4px 12px rgba(0,0,0,0.04)",flexShrink:0,overflow:"hidden",position:"relative",background:"#F8FAFC"},children:e.img_url?i.jsx(g.default,{src:e.img_url,alt:e.display_name||e.product_name,fill:!0,style:{objectFit:"cover"},sizes:"72px"}):i.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%)"},children:i.jsx(f.Z,{style:{fontSize:24,color:"#6366F1",opacity:.8}})})}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0,padding:"0 4px"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:4},children:[i.jsx(V,{strong:!0,style:{fontSize:16,color:"#1E293B",flex:1},ellipsis:!0,children:e.display_name}),e.is_active?i.jsx(y.Z,{style:{color:"#10B981",fontSize:14}}):i.jsx(b.Z,{style:{color:"#94A3B8",fontSize:14}})]}),i.jsx(V,{type:"secondary",style:{fontSize:13,display:"block",marginBottom:8,color:"#64748B"},ellipsis:!0,children:e.product_name}),(0,i.jsxs)("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[i.jsx(l.Z,{style:{borderRadius:6,margin:0,fontSize:11,fontWeight:700,color:"#059669",background:"#ECFDF5",border:"none",padding:"0 8px"},children:(0,D.T4)(Number(e.price))}),Number(e.price_delivery??e.price)!==Number(e.price)&&(0,i.jsxs)(l.Z,{style:{borderRadius:6,margin:0,fontSize:11,fontWeight:700,color:"#db2777",background:"#fdf2f8",border:"none",padding:"0 8px"},children:["Delivery ",(0,D.T4)(Number(e.price_delivery??e.price))]}),e.category?.display_name&&i.jsx(l.Z,{style:{borderRadius:6,margin:0,fontSize:10,color:"#4F46E5",background:"#EEF2FF",border:"none"},children:e.category.display_name})]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[i.jsx(d.ZP,{type:"text",icon:i.jsx(j.Z,{}),onClick:t=>{t.stopPropagation(),r(e)},style:{borderRadius:12,color:"#4F46E5",background:"#F5F3FF",width:36,height:36}}),i.jsx(d.ZP,{type:"text",danger:!0,icon:i.jsx(w.Z,{}),onClick:t=>{t.stopPropagation(),s(e)},style:{borderRadius:12,background:"#FEF2F2",width:36,height:36}})]})]})});function ee(){let e=(0,P.useRouter)(),[t,r]=(0,o.useState)([]),[s,n]=(0,o.useState)(0),[l,g]=(0,o.useState)(null),[y,b]=(0,o.useState)(1),[j,q]=(0,o.useState)(1),[N,T]=(0,o.useState)(!1),[D,ee]=(0,o.useState)(""),{execute:et}=(0,z.J)(),{showLoading:er}=(0,Z.x)(),{socket:ei}=(0,S.s)(),{isAuthorized:es,isChecking:ea}=(0,C.e)({requiredRole:"Admin"}),eo=(0,o.useRef)(null);(0,o.useRef)(!1);let[en,el]=(0,o.useState)([]),[ed,ec]=(0,o.useState)([]),{data:ep=[],isLoading:eu}=(0,$.L)(),{data:ex=[],isLoading:eh}=(0,L.a)({queryKey:["products-units"],queryFn:async()=>{let e=await O.findAll();return e?.length&&(0,R.v)(A,e),e},initialData:()=>(0,R.t)(A,3e5)||void 0,staleTime:3e5,refetchOnWindowFocus:!1,retry:1}),em=(0,o.useCallback)(async()=>{et(async()=>{let e=new URLSearchParams;e.set("page","1"),e.set("limit","50"),D.trim()&&e.set("q",D.trim());let t=new URLSearchParams(e);t.set("limit","1"),t.set("is_active","true");let[i,s]=await Promise.all([fetch(`/api/pos/products?${e.toString()}`),fetch(`/api/pos/products?${t.toString()}`)]);if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลสินค้าได้")}if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงจำนวนสินค้าได้")}let a=await i.json(),o=await s.json(),l=a.data||[],d="number"==typeof a.total?a.total:l.length,c="number"==typeof a.page?a.page:1,p="number"==typeof a.last_page?a.last_page:1;r(l),n(d),b(c),q(p),g("number"==typeof o.total?o.total:null),D.trim()||(0,R.v)("pos:products:v2",{items:l,total:d,last_page:p,active_total:"number"==typeof o.total?o.total:void 0})},"กำลังโหลดข้อมูลสินค้า...")},[et,D]);(0,_.D)({socket:ei,events:["products:create","products:update","products:delete"],onRefresh:em,enabled:es,debounceMs:400});let eg=(0,o.useCallback)(async()=>{if(!N&&!(y>=j)){T(!0);try{let e=D.trim(),t=y+1,i=new URLSearchParams;i.set("page",t.toString()),i.set("limit","50"),e&&i.set("q",e);let a=await fetch(`/api/pos/products?${i.toString()}`);if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||e.message||"โหลดข้อมูลเพิ่มเติมไม่สำเร็จ")}let o=await a.json(),l=o.data||[],d="number"==typeof o.total?o.total:s,c="number"==typeof o.page?o.page:t,p="number"==typeof o.last_page?o.last_page:j;r(e=>{if(0===l.length)return e;let t=new Map(e.map((e,t)=>[e.id,t])),r=[...e];for(let e of l){let i=t.get(e.id);void 0===i?r.push(e):r[i]=e}return r}),n(d),b(c),q(p)}catch(e){c.ZP.error(e instanceof Error?e.message:"โหลดข้อมูลเพิ่มเติมไม่สำเร็จ")}finally{T(!1)}}},[N,y,j,D,s]);(0,_.v)(ei,{create:"category:create",update:"category:update",delete:"category:delete"},el),(0,_.v)(ei,{create:"productsUnit:create",update:"productsUnit:update",delete:"productsUnit:delete"},ec);let ef=e=>{ee(e)},ey=()=>{er("กำลังเปิดหน้าจัดการสินค้า..."),e.push("/pos/products/manage/add")},eb=t=>{er("กำลังเปิดหน้าแก้ไขสินค้า..."),e.push(`/pos/products/manage/edit/${t.id}`)},ej=e=>{p.Z.confirm({title:"ยืนยันการลบสินค้า",content:`คุณต้องการลบสินค้า "${e.display_name}" หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:i.jsx(w.Z,{style:{color:"#EF4444"}}),maskClosable:!0,onOk:async()=>{await et(async()=>{let t=await (0,E.P)();if(!(await fetch(`/api/pos/products/delete/${e.id}`,{method:"DELETE",headers:{"X-CSRF-Token":t}})).ok)throw Error("ไม่สามารถลบสินค้าได้");c.ZP.success(`ลบสินค้า "${e.display_name}" สำเร็จ`)},"กำลังลบสินค้า...")}})};if(ea)return i.jsx(H.H,{message:"กำลังตรวจสอบสิทธิ์การใช้งาน..."});if(!es)return i.jsx(H.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับ...",tone:"danger"});let ew=l??t.filter(e=>e.is_active).length,ek=Math.max((s||t.length)-ew,0),ev=U(en,ed),eF=ev.isReady,eP=eu||eh;return eP||eF||0!==t.length?(0,i.jsxs)("div",{style:B.container,className:"jsx-8322c199646c885 products-page",children:[i.jsx("style",{children:I}),i.jsx(a(),{id:"8322c199646c885",children:".search-input-placeholder-white input::-webkit-input-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input:-moz-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input::-moz-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input:-ms-input-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input::-ms-input-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input::placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input{color:white!important}.product-card{cursor:pointer;-webkit-tap-highlight-color:transparent;content-visibility:auto;contain-intrinsic-size:160px 120px}"}),i.jsx(X.Z,{title:"สินค้า",subtitle:`${s||t.length} รายการ`,icon:i.jsx(f.Z,{}),actions:(0,i.jsxs)(u.Z,{size:8,wrap:!0,children:[i.jsx(h.default,{prefix:i.jsx(F.Z,{style:{color:"#94A3B8"}}),allowClear:!0,placeholder:"ค้นหาสินค้า (ชื่อ, หมวดหมู่)...",onChange:e=>ef(e.target.value),style:{minWidth:240}}),i.jsx(d.ZP,{icon:i.jsx(k.Z,{}),onClick:em}),i.jsx(d.ZP,{type:"primary",icon:i.jsx(v.Z,{}),onClick:ey,disabled:!eF,children:"เพิ่มสินค้า"})]})}),i.jsx(M.Z,{children:(0,i.jsxs)(J.Z,{children:[!eP&&!eF&&t.length>0&&i.jsx(G.Z,{title:"ต้องตั้งค่าก่อนเพิ่มสินค้า",children:i.jsx(m.Z,{message:"ยังตั้งค่าระบบไม่ครบ",description:W(en,ed),type:"warning",showIcon:!0,action:(0,i.jsxs)("div",{style:{display:"flex",gap:8},className:"jsx-8322c199646c885",children:[!ev.hasCategories&&i.jsx(d.ZP,{size:"small",type:"primary",ghost:!0,onClick:()=>e.push("/pos/category"),children:"เพิ่มหมวดหมู่"}),!ev.hasUnits&&i.jsx(d.ZP,{size:"small",type:"primary",ghost:!0,onClick:()=>e.push("/pos/productsUnit"),children:"เพิ่มหน่วยสินค้า"})]})})}),i.jsx(K,{totalProducts:s||t.length,activeProducts:ew,inactiveProducts:ek}),i.jsx(G.Z,{title:"รายการสินค้า",extra:i.jsx("span",{style:{fontWeight:600},className:"jsx-8322c199646c885",children:s?`${t.length}/${s}`:t.length}),children:t.length>0?(0,i.jsxs)(i.Fragment,{children:[t.map((e,t)=>i.jsx(Q,{product:e,index:t,onEdit:eb,onDelete:ej},e.id)),i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"16px 0 4px"},className:"jsx-8322c199646c885",children:y<j?i.jsx(d.ZP,{onClick:eg,loading:N,style:{borderRadius:12},children:"โหลดเพิ่ม"}):i.jsx(V,{type:"secondary",style:{fontSize:12},children:"ไม่มีสินค้าเพิ่มเติม"})}),i.jsx("div",{ref:eo,style:{height:1},className:"jsx-8322c199646c885"})]}):i.jsx(Y.Z,{title:D.trim()?"ไม่พบสินค้าที่ค้นหา":"ยังไม่มีสินค้า",description:D.trim()?"ลองค้นหาด้วยคำอื่นหรือล้างการค้นหา":"เพิ่มสินค้ารายการแรกเพื่อเริ่มต้นขาย",action:D.trim()?null:i.jsx(d.ZP,{type:"primary",icon:i.jsx(v.Z,{}),onClick:ey,disabled:!eF,children:"เพิ่มสินค้า"})})})]})})]}):(0,i.jsxs)("div",{className:"products-page",style:B.container,children:[i.jsx("style",{children:I}),i.jsx(X.Z,{title:"สินค้า",subtitle:"ตั้งค่าระบบก่อนเพิ่มสินค้า",icon:i.jsx(f.Z,{}),actions:(0,i.jsxs)(u.Z,{size:8,wrap:!0,children:[i.jsx(d.ZP,{icon:i.jsx(k.Z,{}),onClick:em}),i.jsx(x.Z,{title:"ต้องเพิ่มหมวดหมู่สินค้าและหน่วยสินค้าก่อน",children:i.jsx(d.ZP,{type:"primary",icon:i.jsx(v.Z,{}),disabled:!0,children:"เพิ่มสินค้า"})})]})}),i.jsx(M.Z,{children:i.jsx(J.Z,{children:i.jsx(Y.Z,{title:"ยังไม่พร้อมเพิ่มสินค้า",description:W(en,ed),action:(0,i.jsxs)(u.Z,{size:12,wrap:!0,children:[!ev.hasCategories&&i.jsx(d.ZP,{type:"primary",onClick:()=>e.push("/pos/category"),children:"เพิ่มหมวดหมู่สินค้า"}),!ev.hasUnits&&i.jsx(d.ZP,{type:"primary",onClick:()=>e.push("/pos/productsUnit"),children:"เพิ่มหน่วยสินค้า"}),i.jsx(x.Z,{title:"ต้องเพิ่มหมวดหมู่สินค้าและหน่วยสินค้าก่อน",children:i.jsx(d.ZP,{type:"primary",icon:i.jsx(v.Z,{}),disabled:!0,children:"เพิ่มสินค้า"})})]})})})})]})}},26902:(e,t,r)=>{"use strict";r.d(t,{H:()=>f});var i=r(10326),s=r(77626),a=r.n(s),o=r(17577),n=r(58184),l=r(54547),d=r(92121);let c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM540 701v53c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-53a48.01 48.01 0 1156 0zm152-237H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224z"}}]},name:"lock",theme:"filled"};var p=r(74082);function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let x=o.forwardRef((e,t)=>o.createElement(p.Z,u({},e,{ref:t,icon:c})));var h=r(39275);let{Text:m,Title:g}=n.default,f=({message:e,tone:t="secondary"})=>(0,i.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 access-guard-container",children:[i.jsx(l.ZP,{theme:{token:{colorPrimary:"#3b82f6"}},children:(0,i.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 content-wrapper",children:["danger"===t?i.jsx("div",{className:"jsx-e041fd1637d3b0f2 icon-circle danger",children:i.jsx(x,{style:{fontSize:32,color:"#ef4444"}})}):i.jsx("div",{className:"jsx-e041fd1637d3b0f2 spinner-wrapper",children:i.jsx(d.Z,{indicator:i.jsx(h.Z,{style:{fontSize:40},spin:!0})})}),(0,i.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 text-content",children:[i.jsx(g,{level:4,style:{margin:0,color:"#1e293b"},children:"danger"===t?"Access Denied":"Loading"}),i.jsx(m,{type:t,style:{fontSize:16},children:e})]})]})}),i.jsx(a(),{id:"e041fd1637d3b0f2",children:".access-guard-container.jsx-e041fd1637d3b0f2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:100vh;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:#f8fafc}.content-wrapper.jsx-e041fd1637d3b0f2{background:white;padding:40px;-webkit-border-radius:24px;-moz-border-radius:24px;border-radius:24px;-webkit-box-shadow:0 20px 40px rgba(0,0,0,.05);-moz-box-shadow:0 20px 40px rgba(0,0,0,.05);box-shadow:0 20px 40px rgba(0,0,0,.05);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:24px;text-align:center;min-width:320px;-webkit-animation:fadeIn.5s ease-out;-moz-animation:fadeIn.5s ease-out;-o-animation:fadeIn.5s ease-out;animation:fadeIn.5s ease-out}.icon-circle.jsx-e041fd1637d3b0f2{width:80px;height:80px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff1f2}.spinner-wrapper.jsx-e041fd1637d3b0f2{padding:20px}.text-content.jsx-e041fd1637d3b0f2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:8px}@-webkit-keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeIn{from{opacity:0;-moz-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeIn{from{opacity:0;-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);-moz-transform:translatey(10px);-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}"})]})},52647:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var i=r(10326);r(17577);var s=r(2643),a=r(5591),o=r(3861),n=r(21020),l=r(71935),d=r(58184),c=r(52386);function p({title:e,subtitle:t,icon:r,onBack:p,actions:u,style:x}){let{token:h}=a.default.useToken(),m=o.default.useBreakpoint().md?c.H.pagePaddingXDesktop:c.H.pagePaddingXMobile;return i.jsx("div",{style:{padding:`${c.H.pagePaddingY}px ${m}px`,background:h.colorBgContainer,borderBottom:`1px solid ${h.colorBorderSecondary}`,...x},children:(0,i.jsxs)(n.Z,{align:"center",justify:"space-between",wrap:"wrap",gap:12,style:{maxWidth:c.H.pageMaxWidth,margin:"0 auto"},children:[(0,i.jsxs)(n.Z,{align:"center",gap:12,style:{minWidth:0},children:[p&&i.jsx(l.ZP,{type:"text","aria-label":"ย้อนกลับ",icon:i.jsx(s.Z,{}),onClick:p,style:{borderRadius:12,width:44,height:44}}),r&&i.jsx("div",{style:{width:44,height:44,borderRadius:14,display:"grid",placeItems:"center",background:h.colorFillTertiary,color:h.colorText},children:r}),(0,i.jsxs)("div",{style:{minWidth:0},children:[i.jsx(d.default.Title,{level:4,style:{margin:0},children:e}),t&&i.jsx(d.default.Text,{type:"secondary",children:t})]})]}),u&&i.jsx(n.Z,{gap:8,wrap:"wrap",children:u})]})})}},18978:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(10326);r(17577);var s=r(21020),a=r(52386);function o({children:e,gap:t=a.H.sectionGap,style:r}){return i.jsx(s.Z,{vertical:!0,gap:t,style:r,children:e})}},36231:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(10326);r(17577);var s=r(56249),a=r(75698),o=r(58184),n=r(52386);function l({title:e="ไม่มีข้อมูล",description:t,action:r,image:l}){return i.jsx(s.Z,{size:"small",variant:"outlined",style:{borderRadius:n.H.cardRadiusLG},bodyStyle:{padding:20},children:i.jsx(a.Z,{image:l,description:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[i.jsx(o.default.Text,{strong:!0,children:e}),t?i.jsx(o.default.Text,{type:"secondary",children:t}):null]}),children:r})})}},93312:(e,t,r)=>{"use strict";r.d(t,{L:()=>n});var i=r(20108),s=r(51562),a=r(69711);let o="pos:categories";function n(){return(0,i.a)({queryKey:["categories"],queryFn:async()=>{let e=await s.G.findAll();return e?.length&&(0,a.v)(o,e),e},initialData:()=>(0,a.t)(o,3e5)||void 0,staleTime:3e5,refetchOnWindowFocus:!1,retry:1})}},59746:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var i=r(17577),s=r(75958),a=r(37938);let o=()=>{let{showLoading:e,hideLoading:t}=(0,a.x)();return{execute:(0,i.useCallback)(async(r,i="กำลังดำเนินการ...",a,o="เกิดข้อผิดพลาด")=>{try{return e(i,"async"),await r()}catch(t){console.error("Async action error:",t);let e=o;"string"==typeof t?e=t:t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&(e=t.response?.data?.message??t.message??(()=>{try{return JSON.stringify(t)}catch{return"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ (Unknown Error)"}})()),s.Z.error({title:"ข้อผิดพลาด",content:e});return}finally{t("async")}},[e,t])}}},80440:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});var i=r(17577),s=r(19211);let a=()=>(0,i.useContext)(s.J)},44528:(e,t,r)=>{"use strict";r.d(t,{IU:()=>l,YO:()=>o,lv:()=>n,yf:()=>a});let i={colors:{primary:"#6366F1",primaryLight:"#EEF2FF",success:"#10B981",successLight:"#ECFDF5",warning:"#F59E0B",warningLight:"#FFFBEB",error:"#EF4444",errorLight:"#FEF2F2",info:"#3B82F6",infoLight:"#EFF6FF",bg:"#F8FAFC",card:"#FFFFFF",border:"#E2E8F0",borderLight:"#F1F5F9",text:"#1E293B",textSecondary:"#64748B",textMuted:"#94A3B8"},radius:{sm:8,md:12,lg:16,xl:20},shadow:{sm:"0 1px 2px rgba(0, 0, 0, 0.04)",md:"0 4px 12px rgba(0, 0, 0, 0.06)",lg:"0 8px 24px rgba(0, 0, 0, 0.08)"}},s={container:{paddingBottom:100,backgroundColor:i.colors.bg,minHeight:"100dvh",width:"100%",overflowX:"hidden"},header:{background:`linear-gradient(135deg, ${i.colors.primary} 0%, #4F46E5 100%)`,padding:"16px 16px 48px 16px",position:"relative",overflow:"hidden",borderBottomLeftRadius:i.radius.xl,borderBottomRightRadius:i.radius.xl},headerDecoCircle1:{position:"absolute",top:-40,right:-40,width:120,height:120,borderRadius:"50%",background:"rgba(255,255,255,0.08)"},headerDecoCircle2:{position:"absolute",bottom:-20,left:-20,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.06)"},headerContent:{position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},headerLeft:{display:"flex",alignItems:"center",gap:12,flex:1},headerIconBox:{width:44,height:44,borderRadius:i.radius.md,background:"rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)",flexShrink:0},headerTitle:{color:"#fff",margin:0,fontSize:18,fontWeight:600},headerSubtitle:{color:"rgba(255,255,255,0.8)",fontSize:13,margin:0},headerActions:{display:"flex",gap:8,flexShrink:0},statsCard:{margin:"-32px 16px 0 16px",padding:16,background:i.colors.card,borderRadius:i.radius.lg,boxShadow:i.shadow.md,display:"flex",justifyContent:"space-around",position:"relative",zIndex:10},statItem:{textAlign:"center",flex:1},statNumber:{fontSize:22,fontWeight:700,display:"block",color:i.colors.text},statLabel:{fontSize:12,color:i.colors.textMuted,marginTop:2},listContainer:{padding:"16px 16px 0 16px"},sectionTitle:{display:"flex",alignItems:"center",gap:8,marginBottom:12,fontSize:15,fontWeight:600,color:i.colors.text}},a=e=>({...s,header:{...s.header,background:e}}),o=e=>({marginBottom:12,borderRadius:i.radius.lg,border:`1px solid ${e?i.colors.border:i.colors.borderLight}`,boxShadow:e?i.shadow.sm:"none",overflow:"hidden",transition:"all 0.2s ease",background:i.colors.card,opacity:e?1:.6}),n={padding:16,display:"flex",alignItems:"center",gap:12};i.radius.md;let l=(e,t)=>`
  /* Card animations */
  ${t} {
    animation: fadeSlideIn 0.3s ease both;
  }
  
  ${t}:hover {
    transform: translateY(-2px);
    box-shadow: ${i.shadow.md} !important;
  }
  
  ${t}:active {
    transform: scale(0.99);
  }
  
  /* Scrollbar */
  ${e} *::-webkit-scrollbar {
    width: 5px;
    height: 5px;
  }
  ${e} *::-webkit-scrollbar-track {
    background: transparent;
  }
  ${e} *::-webkit-scrollbar-thumb {
    background: #CBD5E1;
    border-radius: 3px;
  }
  ${e} *::-webkit-scrollbar-thumb:hover {
    background: #94A3B8;
  }
`},45207:(e,t,r)=>{"use strict";r.d(t,{e:()=>o});var i=r(17577),s=r(35047),a=r(94001);function o({requiredRole:e="Admin",redirectUnauthenticated:t="/login",redirectUnauthorized:r="/pos",unauthorizedMessage:o="คุณไม่มีสิทธิ์เข้าถึงหน้านี้"}={}){(0,s.useRouter)();let{user:n,loading:l}=(0,a.a)(),d=(0,i.useMemo)(()=>l?"checking":n?e&&n.role!==e?"unauthorized":"authorized":"unauthenticated",[n,l,e]);return(0,i.useRef)(!1),{status:d,isAuthorized:"authorized"===d,isChecking:"checking"===d,user:n}}},69711:(e,t,r)=>{"use strict";r.d(t,{t:()=>s,v:()=>a});let i=()=>!1,s=(e,t)=>{if(!i())return null;try{let r=window.localStorage.getItem(e);if(!r)return null;let i=JSON.parse(r);if(!i?.ts||Date.now()-i.ts>t)return null;return i.data??null}catch{return null}},a=(e,t)=>{if(i())try{let r={ts:Date.now(),data:t};window.localStorage.setItem(e,JSON.stringify(r))}catch{}}},54354:(e,t,r)=>{"use strict";function i(e,t,r,i=e=>e.id,s=()=>!0){}function s({socket:e,events:t=[],onRefresh:r,intervalMs:i,enabled:s=!0,debounceMs:a}){}r.d(t,{D:()=>s,v:()=>i}),r(17577)},49227:(e,t,r)=>{"use strict";function i(e){return`฿${e.toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2})}`}function s(e){return e.category?.display_name||"ไม่มีหมวดหมู่"}function a(e){return!!e.img_url&&e.img_url.length>0}r.d(t,{T4:()=>i,dU:()=>a,r6:()=>s})},59945:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\products\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[9276,8491,8571,8842,108,9244,8963,1399,4658],()=>r(5095));module.exports=i})();