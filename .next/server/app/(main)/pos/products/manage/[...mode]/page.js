(()=>{var e={};e.id=6775,e.ids=[6775],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},62006:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.Z,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>m,tree:()=>l}),r(10442),r(85429),r(58522),r(61804),r(7629),r(11930),r(12523);var i=r(23191),a=r(88716),n=r(43315),s=r(95231),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);r.d(t,o);let l=["",{children:["(main)",{children:["pos",{children:["products",{children:["manage",{children:["[...mode]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,10442)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\products\\manage\\[...mode]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\products\\manage\\[...mode]\\page.tsx"],c="/(main)/pos/products/manage/[...mode]/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/pos/products/manage/[...mode]/page",pathname:"/pos/products/manage/[...mode]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},30160:(e,t,r)=>{Promise.resolve().then(r.bind(r,98297))},12226:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};var n=r(74082);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let o=i.forwardRef((e,t)=>i.createElement(n.Z,s({},e,{ref:t,icon:a})))},16771:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};var n=r(74082);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let o=i.forwardRef((e,t)=>i.createElement(n.Z,s({},e,{ref:t,icon:a})))},41684:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};var n=r(74082);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let o=i.forwardRef((e,t)=>i.createElement(n.Z,s({},e,{ref:t,icon:a})))},30278:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var n=r(74082);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let o=i.forwardRef((e,t)=>i.createElement(n.Z,s({},e,{ref:t,icon:a})))},98297:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var i=r(10326),a=r(17577),n=r(49909),s=r(66874),o=r(43359),l=r(46752),d=r(75958),c=r(71935),p=r(92121),m=r(4139),u=r(38106),x=r(56249),g=r(74944),f=r(31916),h=r(63459),y=r(35047),b=r(26963),j=r(76892),v=r(52647),w=r(63191),k=r(10907),Z=r(41684),z=r(9078),_=r(30278),F=r(16771),P=r(62938),S=r(12226);r(33357);var E=r(7670),C=r(26902),I=r(46226);let{Text:R,Title:W}=s.default;var O=r(61357),q=r(56811);let{Text:B}=s.default,{pageStyles:T,ManagePageStyles:M}=(({focusColor:e,focusShadow:t,switchGradient:r,extraCss:a=""})=>({pageStyles:{container:{paddingBottom:100,backgroundColor:"#f8f9fc",minHeight:"100vh",height:"100dvh",overflowX:"hidden",overflowY:"auto",WebkitOverflowScrolling:"touch"},header:e=>({background:e?"linear-gradient(135deg, #faad14 0%, #fa8c16 100%)":"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)",padding:"20px 20px 60px 20px",position:"relative",overflow:"hidden"}),headerDecoCircle1:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"rgba(255,255,255,0.1)"},headerDecoCircle2:{position:"absolute",bottom:-30,left:-30,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.08)"},headerContent:{position:"relative",zIndex:1,display:"flex",alignItems:"center",gap:12},headerIconBox:{width:48,height:48,borderRadius:14,background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)"},formCard:{margin:"-40px 16px 0 16px",padding:"24px",background:"white",borderRadius:20,boxShadow:"0 8px 24px rgba(0,0,0,0.08)",position:"relative",zIndex:10},formSection:{marginBottom:20},formLabel:{fontSize:14,fontWeight:600,color:"#1a1a2e",marginBottom:8,display:"block"},actionButtons:{display:"flex",gap:12,marginTop:24,paddingTop:20,borderTop:"1px solid #f0f0f0"}},ManagePageStyles:()=>i.jsx("style",{children:`
        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(12px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .manage-form-card {
            animation: fadeSlideIn 0.4s ease both;
        }

        .manage-page .ant-input,
        .manage-page .ant-input-number,
        .manage-page .ant-select-selector,
        .manage-page .ant-input-affix-wrapper {
            border-radius: 12px !important;
            border: 2px solid #f0f0f0 !important;
            transition: all 0.3s ease !important;
        }

        .manage-page .ant-input:focus,
        .manage-page .ant-input-focused,
        .manage-page .ant-input-number:focus,
        .manage-page .ant-input-number-focused,
        .manage-page .ant-select-focused .ant-select-selector,
        .manage-page .ant-input-affix-wrapper:focus,
        .manage-page .ant-input-affix-wrapper-focused {
            border-color: ${e} !important;
            box-shadow: 0 0 0 3px ${t} !important;
        }

        .manage-page .ant-input-lg,
        .manage-page .ant-select-lg .ant-select-selector {
            padding: 12px 16px !important;
            height: auto !important;
        }

        .manage-page .ant-form-item-label > label {
            font-weight: 600;
            color: #1a1a2e;
            font-size: 14px;
        }

        .manage-page .ant-form-item-required::before {
            display: none !important;
        }

        .manage-page .ant-form-item-required::after {
            content: "*" !important;
            display: inline-block !important;
            color: #ff4d4f !important;
            margin-left: 4px !important;
        }

        .manage-page .ant-switch {
            min-width: 50px;
        }

        .manage-page .ant-switch-checked {
            background: ${r};
        }

        .manage-page textarea.ant-input {
            border-radius: 12px !important;
        }

        .manage-page .ant-input-number-lg {
            width: 100%;
        }

        /* Fix dropdown z-index and overflow issues */
        .manage-page .ant-select-dropdown {
            z-index: 9999 !important;
        }

        .manage-page .ant-form-item {
            overflow: visible !important;
        }

        .manage-form-card {
            overflow: visible !important;
        }

        ${a}
    `})}))({focusColor:"#4F46E5",focusShadow:"rgba(79, 70, 229, 0.1)",switchGradient:"linear-gradient(135deg, #4F46E5 0%, #4338CA 100%)"}),N=({name:e,productName:t,imageUrl:r,price:a,priceDelivery:n,category:s,unit:o})=>(0,i.jsxs)("div",{style:{marginTop:24,marginBottom:24,padding:20,background:"#F8FAFC",borderRadius:20,border:"1px dashed #E2E8F0"},children:[i.jsx(B,{type:"secondary",style:{display:"block",marginBottom:12,fontSize:13,textAlign:"center"},children:"ตัวอย่างการแสดงผล (Live Preview)"}),i.jsx("div",{style:{width:"100%",maxWidth:280,margin:"0 auto",background:"white",borderRadius:20,overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.06)",border:"1px solid #F1F5F9",transition:"all 0.3s ease"},children:(0,i.jsxs)("div",{style:{padding:12,display:"flex",gap:12,alignItems:"center"},children:[i.jsx("div",{style:{width:72,height:72,borderRadius:16,border:"1px solid #F1F5F9",overflow:"hidden",position:"relative",background:"#F8FAFC",flexShrink:0},children:r&&r.match(/^https?:\/\/.+/)?i.jsx(I.default,{src:r,alt:"Preview",fill:!0,style:{objectFit:"cover"},sizes:"72px",onError:e=>{e.target.style.display="none"}}):i.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%)"},children:i.jsx(P.Z,{style:{fontSize:24,color:"#6366F1",opacity:.8}})})}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[i.jsx(B,{strong:!0,style:{fontSize:16,color:"#1E293B",flex:1},ellipsis:!0,children:e||"ชื่อสินค้า (ไทย)"}),i.jsx(q.Z,{style:{color:"#10B981",fontSize:14}})]}),i.jsx(B,{type:"secondary",style:{fontSize:13,display:"block",marginBottom:6,color:"#64748B"},ellipsis:!0,children:t||"Product Name (EN)"}),(0,i.jsxs)("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[(0,i.jsxs)(O.Z,{style:{borderRadius:6,margin:0,fontSize:11,fontWeight:700,color:"#059669",background:"#ECFDF5",border:"none",padding:"0 8px"},children:["฿",(a||0).toLocaleString()]}),(0,i.jsxs)(O.Z,{style:{borderRadius:6,margin:0,fontSize:11,fontWeight:700,color:"#db2777",background:"#fdf2f8",border:"none",padding:"0 8px"},children:["Delivery ฿",Number(n??a??0).toLocaleString()]}),s&&i.jsx(O.Z,{style:{borderRadius:6,margin:0,fontSize:10,color:"#4F46E5",background:"#EEF2FF",border:"none"},children:s}),o&&i.jsx(O.Z,{style:{borderRadius:6,margin:0,fontSize:10,color:"#0891B2",background:"#CFFAFE",border:"none"},children:o})]})]})]})})]}),{TextArea:A}=n.default,{Title:H,Text:V}=s.default,L=e=>Array.isArray(e)?e:e&&"object"==typeof e&&Array.isArray(e.data)?e.data:[],D=e=>{if(!e)return"-";let t=new Date(e);return Number.isNaN(t.getTime())?"-":new Intl.DateTimeFormat("th-TH",{dateStyle:"medium",timeStyle:"short"}).format(t)};function $({params:e}){let t=(0,y.useRouter)(),[r]=o.Z.useForm(),[s,I]=(0,a.useState)(!1),[R,W]=(0,a.useState)(!1),[O,q]=(0,a.useState)([]),[B,M]=(0,a.useState)([]),[$,U]=(0,a.useState)(""),[X,Y]=(0,a.useState)(""),[G,J]=(0,a.useState)(null),[K,Q]=(0,a.useState)(!1),[ee,et]=(0,a.useState)(!1),er=e.mode?.[0],ei=e.mode?.[1]||null,ea="edit"===er&&!!ei,{isAuthorized:en,isChecking:es}=(0,E.e)({allowedRoles:["Admin","Manager"]}),eo=o.Z.useWatch("category_id",r),el=o.Z.useWatch("unit_id",r),ed=o.Z.useWatch("display_name",r),ec=o.Z.useWatch("product_name",r),ep=o.Z.useWatch("img_url",r),em=o.Z.useWatch("price",r),eu=o.Z.useWatch("price_delivery",r),ex=o.Z.useWatch("is_active",r)??!0,eg=(0,a.useMemo)(()=>O.filter(e=>e.is_active),[O]),ef=(0,a.useMemo)(()=>B.filter(e=>e.is_active),[B]);(0,a.useCallback)(async()=>{try{let e=await fetch("/api/pos/category");if(!e.ok)return;let t=await e.json();q(L(t))}catch(e){console.error("Failed to fetch categories",e)}},[]),(0,a.useCallback)(async()=>{try{let e=await fetch("/api/pos/productsUnit");if(!e.ok)return;let t=await e.json();M(L(t))}catch(e){console.error("Failed to fetch units",e)}},[]),(0,a.useCallback)(async()=>{if(ei){I(!0);try{let e=await fetch(`/api/pos/products/getById/${ei}`);if(!e.ok)throw Error("ไม่สามารถดึงข้อมูลสินค้าได้");let t=await e.json();r.setFieldsValue({product_name:t.product_name,display_name:t.display_name,description:t.description,img_url:t.img_url||void 0,price:Number(t.price??0),price_delivery:Number(t.price_delivery??t.price??0),cost:void 0!==t.cost&&null!==t.cost?Number(t.cost):void 0,category_id:t.category_id,unit_id:t.unit_id,is_active:t.is_active}),Y((t.product_name||"").toLowerCase()),J(t)}catch(e){console.error(e),l.ZP.error("ไม่สามารถดึงข้อมูลสินค้าได้"),t.replace("/pos/products")}finally{I(!1)}}},[r,ei,t]);let eh=(0,a.useCallback)(async e=>{let t=e.trim();if(!t||ea&&t.toLowerCase()===X)return!1;try{let e=await fetch(`/api/pos/products/getByName/${encodeURIComponent(t)}`);if(!e.ok)return!1;let r=await e.json();if(!r?.id||ea&&r.id===ei)return!1;return!0}catch{return!1}},[X,ei,ea]),ey=async e=>{W(!0);try{let r={product_name:e.product_name.trim(),display_name:e.display_name.trim(),description:e.description?.trim()||void 0,img_url:e.img_url?.trim()?e.img_url.trim():null,price:Number(e.price||0),price_delivery:void 0===e.price_delivery||null===e.price_delivery?Number(e.price||0):Number(e.price_delivery),cost:void 0===e.cost||null===e.cost?void 0:Number(e.cost),category_id:e.category_id,unit_id:e.unit_id,is_active:e.is_active},i=ea?`/api/pos/products/update/${ei}`:"/api/pos/products/create",a=await fetch(i,{method:ea?"PUT":"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":$},body:JSON.stringify(r)});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||e.message||(ea?"ไม่สามารถอัปเดตสินค้าได้":"ไม่สามารถสร้างสินค้าได้"))}l.ZP.success(ea?"อัปเดตสินค้าสำเร็จ":"สร้างสินค้าสำเร็จ"),t.push("/pos/products")}catch(e){console.error(e),l.ZP.error(e instanceof Error?e.message:ea?"ไม่สามารถอัปเดตสินค้าได้":"ไม่สามารถสร้างสินค้าได้")}finally{W(!1)}},eb=()=>t.push("/pos/products");return es?i.jsx(C.H,{message:"กำลังตรวจสอบสิทธิ์..."}):en?(0,i.jsxs)("div",{className:"manage-page",style:T.container,children:[i.jsx(v.Z,{title:ea?"แก้ไขสินค้า":"เพิ่มสินค้า",subtitle:ea?"แก้ไขข้อมูลสินค้าและราคา":"สร้างสินค้าใหม่ให้พร้อมขายในระบบ POS",onBack:eb,actions:ea?i.jsx(c.ZP,{danger:!0,onClick:()=>{ei&&d.Z.confirm({title:"ยืนยันการลบสินค้า",content:`คุณต้องการลบสินค้า "${ed||"-"}" หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:i.jsx(w.Z,{style:{color:"#EF4444"}}),onOk:async()=>{try{if(!(await fetch(`/api/pos/products/delete/${ei}`,{method:"DELETE",headers:{"X-CSRF-Token":$}})).ok)throw Error("ไม่สามารถลบสินค้าได้");l.ZP.success("ลบสินค้าสำเร็จ"),t.push("/pos/products")}catch(e){console.error(e),l.ZP.error("ไม่สามารถลบสินค้าได้")}}})},icon:i.jsx(w.Z,{}),children:"ลบ"}):null}),i.jsx(b.Z,{maxWidth:1040,children:i.jsx(j.Z,{style:{background:"transparent",border:"none"},children:s?i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"90px 0"},children:i.jsx(p.Z,{size:"large",tip:"กำลังโหลดข้อมูล..."})}):(0,i.jsxs)(m.Z,{gutter:[20,20],children:[i.jsx(u.Z,{xs:24,lg:15,children:(0,i.jsxs)(x.Z,{bordered:!1,style:{borderRadius:20,boxShadow:"0 4px 20px rgba(0,0,0,0.04)",overflow:"hidden"},styles:{body:{padding:24}},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:20},children:[i.jsx(k.Z,{style:{fontSize:20,color:"#4F46E5"}}),i.jsx(H,{level:5,style:{margin:0},children:"ข้อมูลสินค้า"})]}),(0,i.jsxs)(o.Z,{form:r,layout:"vertical",onFinish:ey,requiredMark:!1,autoComplete:"off",initialValues:{is_active:!0,price:0,price_delivery:0},onValuesChange:e=>{ea||void 0===e.price||r.isFieldTouched("price_delivery")||r.setFieldsValue({price_delivery:e.price})},children:[i.jsx(g.Z,{showIcon:!0,type:"info",icon:i.jsx(Z.Z,{}),message:"ข้อมูลที่จำเป็น",description:"ต้องระบุชื่อสินค้า ราคา หมวดหมู่ และหน่วยสินค้า โดยชื่อสินค้าในระบบจะถูกตรวจสอบไม่ให้ซ้ำในสาขา",style:{marginBottom:18}}),(0,i.jsxs)(m.Z,{gutter:12,children:[i.jsx(u.Z,{xs:24,md:12,children:i.jsx(o.Z.Item,{name:"display_name",label:i.jsx("span",{style:{fontWeight:600,color:"#334155"},children:"ชื่อที่แสดง"}),rules:[{required:!0,message:"กรุณากรอกชื่อที่แสดง"},{max:100,message:"ความยาวต้องไม่เกิน 100 ตัวอักษร"}],children:i.jsx(n.default,{size:"large",placeholder:"เช่น ชาเขียว, ข้าวผัด",maxLength:100})})}),i.jsx(u.Z,{xs:24,md:12,children:i.jsx(o.Z.Item,{name:"product_name",label:i.jsx("span",{style:{fontWeight:600,color:"#334155"},children:"ชื่อสินค้าในระบบ (English)"}),validateTrigger:["onBlur","onSubmit"],rules:[{required:!0,message:"กรุณากรอกชื่อสินค้า"},{pattern:/^[a-zA-Z0-9\s\-_().]*$/,message:"กรอกได้เฉพาะภาษาอังกฤษ ตัวเลข และ - _ ( ) ."},{max:100,message:"ความยาวต้องไม่เกิน 100 ตัวอักษร"},{validator:async(e,t)=>{if(t?.trim()&&await eh(t))throw Error("ชื่อสินค้าในระบบนี้ถูกใช้งานแล้ว")}}],children:i.jsx(n.default,{size:"large",placeholder:"e.g. green-tea, fried-rice",maxLength:100})})})]}),(0,i.jsxs)(m.Z,{gutter:12,children:[i.jsx(u.Z,{xs:24,md:8,children:i.jsx(o.Z.Item,{name:"price",label:i.jsx("span",{style:{fontWeight:600,color:"#334155"},children:"ราคา (หน้าร้าน)"}),rules:[{required:!0,message:"กรุณากรอกราคา"},{type:"number",min:0,message:"ราคาต้องไม่ติดลบ"}],children:i.jsx(f.Z,{size:"large",min:0,precision:2,style:{width:"100%"},controls:!1})})}),i.jsx(u.Z,{xs:24,md:8,children:i.jsx(o.Z.Item,{name:"price_delivery",label:i.jsx("span",{style:{fontWeight:600,color:"#334155"},children:"ราคา Delivery"}),rules:[{type:"number",min:0,message:"ราคาต้องไม่ติดลบ"}],children:i.jsx(f.Z,{size:"large",min:0,precision:2,style:{width:"100%"},controls:!1})})}),i.jsx(u.Z,{xs:24,md:8,children:i.jsx(o.Z.Item,{name:"cost",label:i.jsx("span",{style:{fontWeight:600,color:"#334155"},children:"ต้นทุน (ไม่บังคับ)"}),rules:[{type:"number",min:0,message:"ต้นทุนต้องไม่ติดลบ"}],children:i.jsx(f.Z,{size:"large",min:0,precision:2,style:{width:"100%"},controls:!1})})})]}),(0,i.jsxs)(m.Z,{gutter:12,children:[i.jsx(u.Z,{xs:24,md:12,children:i.jsx(o.Z.Item,{name:"category_id",label:i.jsx("span",{style:{fontWeight:600,color:"#334155"},children:"หมวดหมู่"}),rules:[{required:!0,message:"กรุณาเลือกหมวดหมู่"}],children:(0,i.jsxs)("div",{onClick:()=>Q(!0),style:{padding:"10px 16px",borderRadius:12,border:"2px solid",cursor:"pointer",background:eo?"linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%)":"#fff",borderColor:eo?"#4F46E5":"#e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:46},children:[i.jsx("span",{style:{color:eo?"#1e293b":"#94a3b8",fontWeight:eo?600:400},children:eo?O.find(e=>e.id===eo)?.display_name:"เลือกหมวดหมู่"}),i.jsx(z.Z,{style:{fontSize:12,color:"#94a3b8"}})]})})}),i.jsx(u.Z,{xs:24,md:12,children:i.jsx(o.Z.Item,{name:"unit_id",label:i.jsx("span",{style:{fontWeight:600,color:"#334155"},children:"หน่วยสินค้า"}),rules:[{required:!0,message:"กรุณาเลือกหน่วยสินค้า"}],children:(0,i.jsxs)("div",{onClick:()=>et(!0),style:{padding:"10px 16px",borderRadius:12,border:"2px solid",cursor:"pointer",background:el?"linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%)":"#fff",borderColor:el?"#4F46E5":"#e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:46},children:[i.jsx("span",{style:{color:el?"#1e293b":"#94a3b8",fontWeight:el?600:400},children:el?B.find(e=>e.id===el)?.display_name:"เลือกหน่วยสินค้า"}),i.jsx(z.Z,{style:{fontSize:12,color:"#94a3b8"}})]})})})]}),i.jsx(o.Z.Item,{name:"img_url",label:i.jsx("span",{style:{fontWeight:600,color:"#334155"},children:"รูปภาพ URL"}),rules:[{type:"url",message:"รูปแบบ URL ไม่ถูกต้อง"}],children:i.jsx(n.default,{size:"large",placeholder:"https://example.com/image.jpg"})}),i.jsx(o.Z.Item,{name:"description",label:i.jsx("span",{style:{fontWeight:600,color:"#334155"},children:"รายละเอียดเพิ่มเติม"}),children:i.jsx(A,{rows:4,placeholder:"รายละเอียดสินค้า, หมายเหตุ, จุดเด่น",style:{borderRadius:12},maxLength:500})}),i.jsx("div",{style:{padding:"16px",background:"#F8FAFC",borderRadius:14,marginTop:8,marginBottom:18},children:(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[(0,i.jsxs)("div",{children:[i.jsx(V,{strong:!0,style:{fontSize:15,display:"block"},children:"สถานะการใช้งาน"}),i.jsx(V,{type:"secondary",style:{fontSize:13},children:"เปิดเพื่อให้แสดงในหน้า POS"})]}),i.jsx(o.Z.Item,{name:"is_active",valuePropName:"checked",noStyle:!0,children:i.jsx(h.Z,{style:{background:ex?"#10B981":void 0}})})]})}),(0,i.jsxs)("div",{style:{marginTop:12,display:"flex",gap:12},children:[i.jsx(c.ZP,{size:"large",onClick:eb,style:{flex:1,borderRadius:12,height:46,fontWeight:600},children:"ยกเลิก"}),i.jsx(c.ZP,{type:"primary",htmlType:"submit",loading:R,icon:i.jsx(_.Z,{}),style:{flex:2,borderRadius:12,height:46,fontWeight:600,background:"#4F46E5",boxShadow:"0 4px 12px rgba(79, 70, 229, 0.25)"},children:"บันทึกข้อมูล"})]})]})]})}),i.jsx(u.Z,{xs:24,lg:9,children:(0,i.jsxs)("div",{style:{display:"grid",gap:14},children:[(0,i.jsxs)("div",{style:{background:"white",borderRadius:20,padding:20,boxShadow:"0 10px 30px rgba(0,0,0,0.05)",border:"1px solid #F1F5F9"},children:[i.jsx(H,{level:5,style:{color:"#4F46E5",marginBottom:16,fontWeight:700},children:"ตัวอย่างการแสดงผล"}),i.jsx(N,{name:ed,productName:ec,imageUrl:ep,price:em,priceDelivery:eu,category:O.find(e=>e.id===eo)?.display_name,unit:B.find(e=>e.id===el)?.display_name})]}),ea?(0,i.jsxs)(x.Z,{style:{borderRadius:16},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[i.jsx(F.Z,{style:{color:"#0369a1"}}),i.jsx(V,{strong:!0,children:"รายละเอียดรายการ"})]}),(0,i.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,i.jsxs)(V,{type:"secondary",children:["ID: ",G?.id||"-"]}),(0,i.jsxs)(V,{type:"secondary",children:["สร้างเมื่อ: ",D(G?.create_date)]}),(0,i.jsxs)(V,{type:"secondary",children:["อัปเดตเมื่อ: ",D(G?.update_date)]})]})]}):null,0===eg.length||0===ef.length?i.jsx(g.Z,{type:"warning",showIcon:!0,icon:i.jsx(P.Z,{}),message:"ข้อมูลอ้างอิงยังไม่ครบ",description:(0,i.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:8},children:[0===eg.length?i.jsx(c.ZP,{size:"small",onClick:()=>t.push("/pos/category"),children:"จัดการหมวดหมู่"}):null,0===ef.length?i.jsx(c.ZP,{size:"small",onClick:()=>t.push("/pos/productsUnit"),children:"จัดการหน่วยสินค้า"}):null]})}):null]})})]})})}),i.jsx(d.Z,{title:"เลือกหมวดหมู่",open:K,onCancel:()=>Q(!1),footer:null,centered:!0,width:400,styles:{body:{padding:"12px 16px 24px"}},children:i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10,maxHeight:"60vh",overflowY:"auto"},children:eg.map(e=>(0,i.jsxs)("div",{onClick:()=>{r.setFieldsValue({category_id:e.id}),Q(!1)},style:{padding:"14px 18px",border:"2px solid",borderRadius:12,cursor:"pointer",background:eo===e.id?"#eff6ff":"#fff",borderColor:eo===e.id?"#3b82f6":"#e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:54},children:[i.jsx("span",{style:{fontWeight:eo===e.id?600:400},children:e.display_name}),eo===e.id&&i.jsx(S.Z,{style:{color:"#3b82f6",fontSize:18}})]},e.id))})}),i.jsx(d.Z,{title:"เลือกหน่วยสินค้า",open:ee,onCancel:()=>et(!1),footer:null,centered:!0,width:400,styles:{body:{padding:"12px 16px 24px"}},children:i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10,maxHeight:"60vh",overflowY:"auto"},children:ef.map(e=>(0,i.jsxs)("div",{onClick:()=>{r.setFieldsValue({unit_id:e.id}),et(!1)},style:{padding:"14px 18px",border:"2px solid",borderRadius:12,cursor:"pointer",background:el===e.id?"#eff6ff":"#fff",borderColor:el===e.id?"#3b82f6":"#e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:54},children:[i.jsx("span",{style:{fontWeight:el===e.id?600:400},children:e.display_name}),el===e.id&&i.jsx(S.Z,{style:{color:"#3b82f6",fontSize:18}})]},e.id))})})]}):i.jsx(C.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้",tone:"danger"})}},26902:(e,t,r)=>{"use strict";r.d(t,{H:()=>h});var i=r(10326),a=r(77626),n=r.n(a),s=r(17577),o=r(66874),l=r(54547),d=r(92121);let c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM540 701v53c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-53a48.01 48.01 0 1156 0zm152-237H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224z"}}]},name:"lock",theme:"filled"};var p=r(74082);function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let u=s.forwardRef((e,t)=>s.createElement(p.Z,m({},e,{ref:t,icon:c})));var x=r(39275);let{Text:g,Title:f}=o.default,h=({message:e,tone:t="secondary"})=>(0,i.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 access-guard-container",children:[i.jsx(l.ZP,{theme:{token:{colorPrimary:"#3b82f6"}},children:(0,i.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 content-wrapper",children:["danger"===t?i.jsx("div",{className:"jsx-e041fd1637d3b0f2 icon-circle danger",children:i.jsx(u,{style:{fontSize:32,color:"#ef4444"}})}):i.jsx("div",{className:"jsx-e041fd1637d3b0f2 spinner-wrapper",children:i.jsx(d.Z,{indicator:i.jsx(x.Z,{style:{fontSize:40},spin:!0})})}),(0,i.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 text-content",children:[i.jsx(f,{level:4,style:{margin:0,color:"#1e293b"},children:"danger"===t?"Access Denied":"Loading"}),i.jsx(g,{type:t,style:{fontSize:16},children:e})]})]})}),i.jsx(n(),{id:"e041fd1637d3b0f2",children:".access-guard-container.jsx-e041fd1637d3b0f2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:100vh;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:#f8fafc}.content-wrapper.jsx-e041fd1637d3b0f2{background:white;padding:40px;-webkit-border-radius:24px;-moz-border-radius:24px;border-radius:24px;-webkit-box-shadow:0 20px 40px rgba(0,0,0,.05);-moz-box-shadow:0 20px 40px rgba(0,0,0,.05);box-shadow:0 20px 40px rgba(0,0,0,.05);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:24px;text-align:center;min-width:320px;-webkit-animation:fadeIn.5s ease-out;-moz-animation:fadeIn.5s ease-out;-o-animation:fadeIn.5s ease-out;animation:fadeIn.5s ease-out}.icon-circle.jsx-e041fd1637d3b0f2{width:80px;height:80px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff1f2}.spinner-wrapper.jsx-e041fd1637d3b0f2{padding:20px}.text-content.jsx-e041fd1637d3b0f2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:8px}@-webkit-keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeIn{from{opacity:0;-moz-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeIn{from{opacity:0;-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);-moz-transform:translatey(10px);-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}"})]})},52647:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var i=r(10326);r(17577);var a=r(2643),n=r(5591),s=r(3861),o=r(21020),l=r(71935),d=r(66874),c=r(52386);function p({title:e,subtitle:t,icon:r,onBack:p,actions:m,style:u}){let{token:x}=n.default.useToken(),g=s.default.useBreakpoint().md?c.H.pagePaddingXDesktop:c.H.pagePaddingXMobile;return i.jsx("div",{style:{padding:`${c.H.pagePaddingY}px ${g}px`,background:x.colorBgContainer,borderBottom:`1px solid ${x.colorBorderSecondary}`,...u},children:(0,i.jsxs)(o.Z,{align:"center",justify:"space-between",wrap:"wrap",gap:12,style:{maxWidth:c.H.pageMaxWidth,margin:"0 auto"},children:[(0,i.jsxs)(o.Z,{align:"center",gap:12,style:{minWidth:0},children:[p&&i.jsx(l.ZP,{type:"text","aria-label":"ย้อนกลับ",icon:i.jsx(a.Z,{}),onClick:p,style:{borderRadius:12,width:44,height:44}}),r&&i.jsx("div",{style:{width:44,height:44,borderRadius:14,display:"grid",placeItems:"center",background:x.colorFillTertiary,color:x.colorText},children:r}),(0,i.jsxs)("div",{style:{minWidth:0},children:[i.jsx(d.default.Title,{level:4,style:{margin:0},children:e}),t&&i.jsx(d.default.Text,{type:"secondary",children:t})]})]}),m&&i.jsx(o.Z,{gap:8,wrap:"wrap",children:m})]})})}},7670:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var i=r(17577),a=r(35047),n=r(94001);function s({allowedRoles:e,requiredRole:t="Admin",redirectUnauthenticated:r="/login",redirectUnauthorized:s="/pos",unauthorizedMessage:o="คุณไม่มีสิทธิ์เข้าถึงหน้านี้"}={}){(0,a.useRouter)();let{user:l,loading:d}=(0,n.a)(),c=(0,i.useMemo)(()=>e&&e.length>0?e:t?[t]:void 0,[e,t]),p=(0,i.useMemo)(()=>(function(e,t,r){if(t)return"checking";if(!e)return"unauthenticated";if(r&&r.length>0){var i;let t="Admin"===(i=e.role)||"Manager"===i||"Employee"===i?i:null;if(!t||!(r.includes(t)||"Admin"===t))return"unauthorized"}return"authorized"})(l,d,c),[l,d,c]);return(0,i.useRef)(!1),{status:p,isAuthorized:"authorized"===p,isChecking:"checking"===p,user:l}}},10442:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\products\manage\[...mode]\page.tsx#default`)}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[9276,4421,8571,1742,9244,8963,1399,4658],()=>r(62006));module.exports=i})();