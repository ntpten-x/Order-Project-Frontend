(()=>{var e={};e.id=9655,e.ids=[9655],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},9425:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.Z,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>u,tree:()=>l}),r(92939),r(85429),r(58522),r(61804),r(7629),r(11930),r(12523);var s=r(23191),i=r(88716),a=r(43315),n=r(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let l=["",{children:["(main)",{children:["pos",{children:["settings",{children:["payment-accounts",{children:["[...mode]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,92939)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\settings\\payment-accounts\\[...mode]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],c=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\settings\\payment-accounts\\[...mode]\\page.tsx"],d="/(main)/pos/settings/payment-accounts/[...mode]/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/pos/settings/payment-accounts/[...mode]/page",pathname:"/pos/settings/payment-accounts/[...mode]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},96065:(e,t,r)=>{Promise.resolve().then(r.bind(r,56148))},16771:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};var a=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}let o=s.forwardRef((e,t)=>s.createElement(a.Z,n({},e,{ref:t,icon:i})))},41684:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"};var a=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}let o=s.forwardRef((e,t)=>s.createElement(a.Z,n({},e,{ref:t,icon:i})))},30278:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var a=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}let o=s.forwardRef((e,t)=>s.createElement(a.Z,n({},e,{ref:t,icon:i})))},56148:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>es});var s=r(10326),i=r(17577),a=r(66874),n=r(49909),o=r(97930),l=r(74944),c=r(3861),d=r(43359),p=r(46752),u=r(75958),x=r(64635),h=r(71935),g=r(92442),m=r(56249),y=r(61357),f=r(4139),b=r(38106),j=r(63459),v=r(74215),Z=r(56811),P=r(63191),w=r(91377),_=r(80490),k=r(72380),C=r(24395),S=r(58029),z=r(46024),F=r(41684),R=r(30278),E=r(16771),I=r(35047),A=r(93922);let q={container:{minHeight:"100vh",background:A.X1.background,fontFamily:"var(--font-sans), 'Sarabun', sans-serif",paddingBottom:60},heroHeader:{background:"linear-gradient(145deg, #eb2f96 0%, #c41d7f 100%)",padding:"20px 20px 60px",position:"relative",borderBottomLeftRadius:24,borderBottomRightRadius:24,boxShadow:"0 8px 24px rgba(235, 47, 150, 0.2)",overflow:"hidden"},heroDecoCircle1:{position:"absolute",top:-60,right:-60,width:160,height:160,borderRadius:"50%",background:"rgba(255,255,255,0.08)"},heroDecoCircle2:{position:"absolute",bottom:-40,left:-40,width:120,height:120,borderRadius:"50%",background:"rgba(255,255,255,0.06)"},headerContent:{maxWidth:1200,margin:"0 auto",position:"relative",zIndex:10},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:16},headerLeft:{display:"flex",alignItems:"center",gap:16},backButton:{width:44,height:44,borderRadius:14,background:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.3)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},headerIconBox:{width:56,height:56,borderRadius:16,background:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"},contentWrapper:{maxWidth:1200,margin:"-40px auto 30px",padding:"0 20px",position:"relative",zIndex:20},card:{borderRadius:20,border:"none",boxShadow:"0 4px 20px rgba(0,0,0,0.06)",transition:"all 0.3s ease"},cardActive:{border:`2px solid ${A.X1.primary}`,boxShadow:`0 8px 24px ${A.X1.primary}15`},accountIconBox:{width:56,height:56,borderRadius:16,background:"#eb2f9610",display:"flex",alignItems:"center",justifyContent:"center"},accountNumber:{background:"#f8fafc",borderRadius:12,padding:"12px 16px",border:"1px solid #e2e8f0"},addButton:{borderRadius:14,height:52,padding:"0 28px",fontWeight:600,background:"rgba(255,255,255,0.95)",border:"none",color:"#eb2f96",boxShadow:"0 4px 12px rgba(235, 47, 150, 0.15)"}};var O=r(2175),W=r(33357),B=r(7670),M=r(26902),T=r(80440),$=r(54354),L=r(83179),V=r(26963),D=r(76892),H=r(18978),N=r(52647),G=r(36231);let{Title:X,Text:U}=a.default,{TextArea:Y}=n.default,J=e=>e.replace(/\D/g,""),K=e=>{if(!e)return"-";let t=new Date(e);return Number.isNaN(t.getTime())?"-":new Intl.DateTimeFormat("th-TH",{dateStyle:"medium",timeStyle:"short"}).format(t)},Q=(e,t)=>{let r=e?.status,s=e?.code,i=e?.message||"",a=i.toLowerCase();return"DUPLICATE_ENTRY"===s||a.includes("duplicate")||a.includes("already exists")?a.includes("active account")||a.includes("cannot delete")?"ลบบัญชีหลักไม่ได้ กรุณาเปลี่ยนบัญชีหลักก่อน":"เลขพร้อมเพย์นี้ถูกใช้งานแล้ว กรุณาตรวจสอบและลองใหม่":409===r&&"DATABASE_ERROR"===s?"เซิร์ฟเวอร์แจ้งข้อผิดพลาดฐานข้อมูล (ไม่ใช่เลขซ้ำ) กรุณาลองใหม่หรือตรวจสอบ backend":409===r?i||"เกิดข้อขัดแย้งของข้อมูล กรุณารีเฟรชแล้วลองใหม่":400===r?i||"ข้อมูลไม่ถูกต้อง กรุณาตรวจสอบอีกครั้ง":403===r?"สิทธิ์ไม่เพียงพอ หรือ CSRF token หมดอายุ กรุณารีเฟรชแล้วลองใหม่":404===r?"ไม่พบข้อมูลบัญชีที่ต้องการ":i||t},ee=({total:e,active:t,inactive:r})=>(0,s.jsxs)("div",{style:{background:"#fff",borderRadius:16,border:"1px solid #e2e8f0",display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:8,padding:14},children:[(0,s.jsxs)("div",{style:{textAlign:"center"},children:[s.jsx("span",{style:{fontSize:24,fontWeight:700,color:"#0f172a",display:"block"},children:e}),s.jsx(U,{style:{fontSize:12,color:"#64748b"},children:"ทั้งหมด"})]}),(0,s.jsxs)("div",{style:{textAlign:"center"},children:[s.jsx("span",{style:{fontSize:24,fontWeight:700,color:"#16a34a",display:"block"},children:t}),s.jsx(U,{style:{fontSize:12,color:"#64748b"},children:"บัญชีหลัก"})]}),(0,s.jsxs)("div",{style:{textAlign:"center"},children:[s.jsx("span",{style:{fontSize:24,fontWeight:700,color:"#b91c1c",display:"block"},children:r}),s.jsx(U,{style:{fontSize:12,color:"#64748b"},children:"ไม่ใช้งาน"})]})]}),et=({compact:e=!1,rows:t=3})=>s.jsx("div",{style:{display:"grid",gap:e?8:12},children:Array.from({length:t}).map((t,r)=>s.jsx(o.Z.Input,{active:!0,block:!0,style:{height:e?32:38}},r))}),er=({accountName:e,accountNumber:t,isActive:r})=>(0,s.jsxs)("div",{style:{background:"white",borderRadius:20,padding:20,boxShadow:"0 10px 30px rgba(0,0,0,0.05)",border:"1px solid #F1F5F9"},children:[s.jsx(X,{level:5,style:{color:"#db2777",marginBottom:16,fontWeight:700},children:"ตัวอย่างการแสดงผล"}),(0,s.jsxs)("div",{style:{borderRadius:16,border:`1px solid ${r?"#bbf7d0":"#e2e8f0"}`,padding:14,background:r?"#f0fdf4":"#f8fafc",display:"flex",alignItems:"center",gap:12,marginBottom:16},children:[s.jsx("div",{style:{width:48,height:48,borderRadius:12,background:"#fdf2f8",color:"#db2777",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,fontSize:20},children:s.jsx(v.Z,{})}),(0,s.jsxs)("div",{style:{textAlign:"left",flex:1,minWidth:0},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx(U,{strong:!0,style:{fontSize:16,color:"#0f172a"},ellipsis:!0,children:e||"ชื่อบัญชีพร้อมเพย์"}),r&&s.jsx(Z.Z,{style:{color:"#16a34a",fontSize:14}})]}),s.jsx(U,{type:"secondary",style:{fontSize:13,display:"block"},children:t||"เลขพร้อมเพย์"}),s.jsx(U,{type:"secondary",style:{fontSize:12,display:"block"},children:"พร้อมเพย์ (PromptPay)"})]})]}),s.jsx(l.Z,{type:r?"success":"info",showIcon:!0,message:r?"บัญชีนี้จะเป็นบัญชีหลักสำหรับรับเงิน":"บัญชีนี้ยังไม่ถูกตั้งเป็นบัญชีหลัก"})]});function es({params:e}){let t=(0,I.useRouter)(),{socket:r}=(0,T.s)(),a=!c.default.useBreakpoint().md,{isAuthorized:Z,isChecking:A}=(0,B.e)({allowedRoles:["Admin","Manager"]}),[es]=d.Z.useForm(),[ei,ea]=(0,i.useState)([]),[en,eo]=(0,i.useState)(!0),[el,ec]=(0,i.useState)(!1),[ed,ep]=(0,i.useState)(!1),[eu,ex]=(0,i.useState)(!1),[eh,eg]=(0,i.useState)(null),[em,ey]=(0,i.useState)(""),[ef,eb]=(0,i.useState)("all"),[ej,ev]=(0,i.useState)(null),eZ=e.mode?.[0],eP="manage"===eZ||"add"===eZ||"edit"===eZ?eZ:null,ew=e.mode?.[1]??null,e_=null!==eP&&("edit"!==eP||!!ew),ek="manage"===eP,eC="edit"===eP&&!!ew,eS=d.Z.useWatch("account_name",es)??"",ez=d.Z.useWatch("account_number",es)??"",eF=d.Z.useWatch("is_active",es)??!1,eR=(0,i.useCallback)(async(e=!1)=>{try{e?ec(!0):eo(!0);let t=await O.p.getByShopId();ea(t.filter(e=>"PromptPay"===e.account_type))}catch(e){console.error(e),p.ZP.error(Q(e,"ไม่สามารถโหลดข้อมูลบัญชีพร้อมเพย์ได้"))}finally{e?ec(!1):eo(!1),ep(!0)}},[]);(0,$.v)(r,{create:L.b.paymentAccounts.create,update:L.b.paymentAccounts.update,delete:L.b.paymentAccounts.delete},ea,e=>e.id,e=>"PromptPay"===e.account_type),(0,$.D)({socket:r,events:[L.b.paymentAccounts.create,L.b.paymentAccounts.update,L.b.paymentAccounts.delete],onRefresh:()=>eR(!0),intervalMs:45e3,enabled:Z});let eE=(0,i.useMemo)(()=>eC&&ew?ei.find(e=>e.id===ew)??null:null,[ei,ew,eC]),eI=!!(eC&&eE?.is_active),eA=(0,i.useMemo)(()=>{let e=ei.length,t=ei.filter(e=>e.is_active).length;return{total:e,active:t,inactive:e-t}},[ei]),eq=(0,i.useMemo)(()=>{let e=ei;"active"===ef?e=e.filter(e=>e.is_active):"inactive"===ef&&(e=e.filter(e=>!e.is_active));let t=em.trim().toLowerCase();return t&&(e=e.filter(e=>e.account_name.toLowerCase().includes(t)||e.account_number.toLowerCase().includes(t))),e},[ei,em,ef]),eO=async e=>{if(!e.is_active){eg(e.id);try{let t=await (0,W.P)();await O.p.activate(e.id,void 0,void 0,t),p.ZP.success(`ตั้ง "${e.account_name}" เป็นบัญชีหลักแล้ว`),await eR(!0)}catch(e){console.error(e),p.ZP.error(Q(e,"ไม่สามารถตั้งบัญชีหลักได้"))}finally{eg(null)}}},eW=e=>{u.Z.confirm({title:"ยืนยันการลบบัญชีพร้อมเพย์",content:e.is_active?"บัญชีหลักไม่สามารถลบได้ กรุณาเปลี่ยนบัญชีหลักก่อน":`คุณต้องการลบบัญชี "${e.account_name}" หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:s.jsx(P.Z,{style:{color:"#EF4444"}}),okButtonProps:{disabled:e.is_active},onOk:async()=>{if(e.is_active){p.ZP.warning("ลบบัญชีหลักไม่ได้ กรุณาเปลี่ยนบัญชีหลักก่อน");return}try{let r=await (0,W.P)();await O.p.delete(e.id,void 0,void 0,r),p.ZP.success(`ลบบัญชี "${e.account_name}" สำเร็จ`),await eR(!0),eC&&t.push("/pos/settings/payment-accounts/manage")}catch(e){console.error(e),p.ZP.error(Q(e,"ไม่สามารถลบบัญชีพร้อมเพย์ได้"))}}})},eB=async e=>{ex(!0);try{let r=J(e.account_number||""),s=J(e.phone||"");if(10!==r.length&&13!==r.length)throw Error("เลขพร้อมเพย์ต้องมีความยาว 10 หรือ 13 หลัก");if(s&&10!==s.length)throw Error("เบอร์โทรศัพท์ต้องเป็นตัวเลข 10 หลัก");let i=ei.find(e=>J(e.account_number)===r&&(!eC||e.id!==ew));if(i)throw Error(`เลขพร้อมเพย์นี้ถูกใช้งานแล้ว โดยบัญชี "${i.account_name}"`);let a={account_name:e.account_name.trim(),account_number:r,account_type:"PromptPay",bank_name:void 0,phone:s||void 0,address:e.address?.trim()||void 0,is_active:!!eI||!!e.is_active},n=await (0,W.P)();eC&&ew?(await O.p.update(ew,a,void 0,void 0,n),p.ZP.success(`อัปเดตบัญชี "${a.account_name}" สำเร็จ`)):(await O.p.create(a,void 0,void 0,n),p.ZP.success(`เพิ่มบัญชี "${a.account_name}" สำเร็จ`)),t.push("/pos/settings/payment-accounts/manage"),await eR(!0)}catch(e){console.error(e),p.ZP.error(Q(e,"ไม่สามารถบันทึกข้อมูลได้"))}finally{ex(!1)}};if(A)return s.jsx(M.H,{message:"กำลังตรวจสอบสิทธิ์..."});if(!Z)return s.jsx(M.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้",tone:"danger"});if(!e_)return null;let eM=ek?"จัดการบัญชีพร้อมเพย์":eC?"แก้ไขบัญชีพร้อมเพย์":"เพิ่มบัญชีพร้อมเพย์",eT=ek?"จัดการรายการพร้อมเพย์ ตั้งบัญชีหลัก และแก้ไขข้อมูล":eC?"ปรับแก้ข้อมูลบัญชีพร้อมเพย์ที่มีอยู่":"เพิ่มบัญชีพร้อมเพย์ใหม่สำหรับรับชำระใน POS";return(0,s.jsxs)("div",{style:q.container,children:[s.jsx(N.Z,{title:eM,subtitle:eT,icon:s.jsx(w.Z,{}),onBack:()=>t.push("/pos/settings"),actions:ek?(0,s.jsxs)(x.Z,{size:8,wrap:!0,children:[s.jsx(h.ZP,{icon:s.jsx(_.Z,{}),onClick:()=>eR(!1),loading:en||el}),s.jsx(h.ZP,{type:"primary",icon:s.jsx(k.Z,{}),onClick:()=>t.push("/pos/settings/payment-accounts/add"),children:"เพิ่มพร้อมเพย์"})]}):(0,s.jsxs)(x.Z,{size:8,wrap:!0,children:[eC&&eE?s.jsx(h.ZP,{danger:!0,icon:s.jsx(P.Z,{}),onClick:()=>eW(eE),disabled:eE.is_active,children:"ลบ"}):null,s.jsx(h.ZP,{onClick:()=>t.push("/pos/settings/payment-accounts/manage"),children:"กลับหน้ารายการ"})]})}),s.jsx(V.Z,{maxWidth:1100,children:ek?(0,s.jsxs)(H.Z,{children:[s.jsx(D.Z,{title:"ภาพรวมบัญชีพร้อมเพย์",children:en?s.jsx(et,{compact:a,rows:2}):s.jsx(ee,{total:eA.total,active:eA.active,inactive:eA.inactive})}),s.jsx(D.Z,{title:"ค้นหาและตัวกรอง",children:en?s.jsx(et,{compact:a,rows:3}):(0,s.jsxs)("div",{style:{display:"grid",gap:a?8:10},children:[s.jsx(n.default,{size:a?"middle":"large",prefix:s.jsx(C.Z,{style:{color:"#94A3B8"}}),allowClear:!0,placeholder:"ค้นหาจากชื่อบัญชี หรือเลขพร้อมเพย์...",value:em,onChange:e=>ey(e.target.value)}),s.jsx(g.Z,{options:[{label:`ทั้งหมด (${ei.length})`,value:"all"},{label:`บัญชีหลัก (${eA.active})`,value:"active"},{label:`ไม่ใช้งาน (${eA.inactive})`,value:"inactive"}],block:a,size:a?"small":"middle",value:ef,onChange:e=>eb(e)})]})}),s.jsx(D.Z,{title:"รายการบัญชีพร้อมเพย์",extra:s.jsx("span",{style:{fontWeight:600},children:eq.length}),children:en?s.jsx("div",{style:{display:"grid",gap:a?8:10},children:Array.from({length:3}).map((e,t)=>s.jsx(m.Z,{size:"small",style:{borderRadius:12},children:s.jsx(o.Z,{active:!0,paragraph:{rows:1},title:{width:"60%"}})},t))}):eq.length>0?s.jsx("div",{style:{display:"grid",gap:a?8:10},children:eq.map(e=>(0,s.jsxs)("div",{style:{borderRadius:16,border:`1px solid ${e.is_active?"#86efac":"#e2e8f0"}`,background:e.is_active?"#f0fdf4":"#fff",padding:a?10:14,display:"flex",alignItems:"center",justifyContent:"space-between",gap:10,flexWrap:"wrap"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,minWidth:0},children:[s.jsx("div",{style:{width:a?38:44,height:a?38:44,borderRadius:12,background:"#fdf2f8",color:"#db2777",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18},children:s.jsx(v.Z,{})}),(0,s.jsxs)("div",{style:{minWidth:0},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[s.jsx(U,{strong:!0,style:{fontSize:15},children:e.account_name}),s.jsx(y.Z,{color:e.is_active?"green":"default",style:{margin:0,borderRadius:6},children:e.is_active?"บัญชีหลัก":"พร้อมเพย์"})]}),s.jsx(U,{type:"secondary",style:{fontSize:12,display:"block"},children:e.account_number})]})]}),(0,s.jsxs)(x.Z,{size:8,wrap:!0,children:[e.is_active?null:s.jsx(h.ZP,{type:"primary",icon:s.jsx(S.Z,{}),loading:eh===e.id,onClick:()=>eO(e),children:"ตั้งเป็นบัญชีหลัก"}),s.jsx(h.ZP,{icon:s.jsx(z.Z,{}),onClick:()=>t.push(`/pos/settings/payment-accounts/edit/${e.id}`),children:"แก้ไข"}),s.jsx(h.ZP,{danger:!0,icon:s.jsx(P.Z,{}),onClick:()=>eW(e),disabled:e.is_active,children:"ลบ"})]})]},e.id))}):s.jsx(G.Z,{title:em.trim()?"ไม่พบบัญชีตามคำค้น":"ยังไม่มีบัญชีพร้อมเพย์",description:em.trim()?"ลองเปลี่ยนคำค้นหาหรือฟิลเตอร์":"เพิ่มบัญชีแรกเพื่อเริ่มรับชำระเงินผ่านระบบ POS",action:em.trim()?null:s.jsx(h.ZP,{type:"primary",icon:s.jsx(k.Z,{}),onClick:()=>t.push("/pos/settings/payment-accounts/add"),children:"เพิ่มบัญชีแรก"})})})]}):s.jsx(D.Z,{style:{background:"transparent",border:"none"},children:en&&eC?(0,s.jsxs)(f.Z,{gutter:[20,20],children:[s.jsx(b.Z,{xs:24,lg:15,children:s.jsx(et,{compact:a,rows:7})}),s.jsx(b.Z,{xs:24,lg:9,children:s.jsx(et,{compact:a,rows:4})})]}):(0,s.jsxs)(f.Z,{gutter:[20,20],children:[s.jsx(b.Z,{xs:24,lg:15,children:(0,s.jsxs)(m.Z,{bordered:!1,style:{borderRadius:20,boxShadow:"0 4px 20px rgba(0,0,0,0.04)",overflow:"hidden"},styles:{body:{padding:a?14:24}},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:20},children:[s.jsx(w.Z,{style:{fontSize:20,color:"#db2777"}}),s.jsx(X,{level:5,style:{margin:0},children:"ข้อมูลบัญชีพร้อมเพย์"})]}),(0,s.jsxs)(d.Z,{form:es,layout:"vertical",onFinish:eB,requiredMark:!1,autoComplete:"off",initialValues:{is_active:!1},children:[s.jsx(l.Z,{showIcon:!0,type:"info",icon:s.jsx(F.Z,{}),message:"รองรับเฉพาะพร้อมเพย์",description:"หน้าจอนี้รองรับการเพิ่ม/แก้ไขบัญชีพร้อมเพย์เท่านั้น",style:{marginBottom:16}}),s.jsx(d.Z.Item,{name:"account_name",label:s.jsx("span",{style:{fontWeight:600,color:"#334155"},children:"ชื่อบัญชี"}),rules:[{required:!0,message:"กรุณากรอกชื่อบัญชี"},{max:100,message:"ความยาวต้องไม่เกิน 100 ตัวอักษร"}],children:s.jsx(n.default,{size:a?"middle":"large",placeholder:"เช่น ร้านกาแฟสาขาหลัก",style:{borderRadius:12,height:46,backgroundColor:"#F8FAFC",border:"1px solid #E2E8F0"},maxLength:100})}),s.jsx(d.Z.Item,{name:"account_number",label:s.jsx("span",{style:{fontWeight:600,color:"#334155"},children:"เลขพร้อมเพย์"}),validateTrigger:["onBlur","onSubmit"],rules:[{required:!0,message:"กรุณากรอกเลขพร้อมเพย์"},{validator:async(e,t)=>{let r=J(t||"");if(r){if(10!==r.length&&13!==r.length)throw Error("เลขพร้อมเพย์ต้องมีความยาว 10 หรือ 13 หลัก");if(ei.some(e=>J(e.account_number)===r&&(!eC||e.id!==ew)))throw Error("เลขพร้อมเพย์นี้ถูกใช้งานแล้ว")}}}],children:s.jsx(n.default,{size:a?"middle":"large",placeholder:"08xxxxxxxx หรือเลข 13 หลัก",style:{borderRadius:12,height:46,backgroundColor:"#F8FAFC",border:"1px solid #E2E8F0"},maxLength:13,onChange:e=>{es.setFieldValue("account_number",J(e.target.value).slice(0,13))}})}),s.jsx(d.Z.Item,{name:"phone",label:s.jsx("span",{style:{fontWeight:600,color:"#334155"},children:"เบอร์โทรติดต่อ (ไม่บังคับ)"}),rules:[{validator:async(e,t)=>{if(t&&10!==J(t).length)throw Error("เบอร์โทรศัพท์ต้องเป็นตัวเลข 10 หลัก")}}],children:s.jsx(n.default,{size:a?"middle":"large",placeholder:"08xxxxxxxx",style:{borderRadius:12,height:46,backgroundColor:"#F8FAFC",border:"1px solid #E2E8F0"},maxLength:10,onChange:e=>{es.setFieldValue("phone",J(e.target.value).slice(0,10))}})}),s.jsx(d.Z.Item,{name:"address",label:s.jsx("span",{style:{fontWeight:600,color:"#334155"},children:"ที่อยู่/หมายเหตุ (ไม่บังคับ)"}),rules:[{max:255,message:"ความยาวต้องไม่เกิน 255 ตัวอักษร"}],children:s.jsx(Y,{rows:3,placeholder:"เช่น ใช้สำหรับหน้าร้านชั้น 1",maxLength:255,style:{borderRadius:12,backgroundColor:"#F8FAFC",border:"1px solid #E2E8F0"}})}),s.jsx("div",{style:{padding:16,background:"#F8FAFC",borderRadius:14,marginTop:16,marginBottom:18},children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[(0,s.jsxs)("div",{children:[s.jsx(U,{strong:!0,style:{fontSize:15,display:"block"},children:"ตั้งเป็นบัญชีหลัก"}),s.jsx(U,{type:"secondary",style:{fontSize:13},children:"เปิดเพื่อใช้บัญชีนี้เป็นบัญชีหลักรับชำระเงิน"})]}),s.jsx(d.Z.Item,{name:"is_active",valuePropName:"checked",noStyle:!0,children:s.jsx(j.Z,{disabled:eI,style:{background:eF?"#10B981":void 0}})})]})}),(0,s.jsxs)("div",{style:{marginTop:12,display:"flex",gap:12},children:[s.jsx(h.ZP,{size:a?"middle":"large",onClick:()=>t.push("/pos/settings/payment-accounts/manage"),style:{flex:1,borderRadius:12,height:46,fontWeight:600},children:"ยกเลิก"}),s.jsx(h.ZP,{type:"primary",htmlType:"submit",loading:eu,icon:s.jsx(R.Z,{}),size:a?"middle":"large",style:{flex:2,borderRadius:12,height:46,fontWeight:600,background:"#db2777",boxShadow:"0 4px 12px rgba(219, 39, 119, 0.25)"},children:"บันทึกข้อมูล"})]})]})]})}),s.jsx(b.Z,{xs:24,lg:9,children:(0,s.jsxs)("div",{style:{display:"grid",gap:14},children:[s.jsx(er,{accountName:eS,accountNumber:ez,isActive:eF}),eC&&eE?(0,s.jsxs)(m.Z,{style:{borderRadius:16},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[s.jsx(E.Z,{style:{color:"#0369a1"}}),s.jsx(U,{strong:!0,children:"รายละเอียดรายการ"})]}),(0,s.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,s.jsxs)(U,{type:"secondary",children:["ID: ",eE.id]}),(0,s.jsxs)(U,{type:"secondary",children:["สร้างเมื่อ: ",K(eE.created_at)]}),(0,s.jsxs)(U,{type:"secondary",children:["อัปเดตเมื่อ: ",K(eE.updated_at)]}),(0,s.jsxs)(U,{type:"secondary",children:["สถานะ: ",eE.is_active?"บัญชีหลัก":"ยังไม่ใช้งาน"]})]})]}):null]})})]})})})]})}},92939:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\settings\payment-accounts\[...mode]\page.tsx#default`)}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,4421,8571,8842,8963,1399,4658,4287],()=>r(9425));module.exports=s})();