(()=>{var e={};e.id=9655,e.ids=[9655],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},9425:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.Z,__next_app__:()=>p,originalPathname:()=>c,pages:()=>l,routeModule:()=>x,tree:()=>d}),r(92939),r(85429),r(58522),r(61804),r(7629),r(11930),r(12523);var a=r(23191),n=r(88716),s=r(43315),i=r(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["(main)",{children:["pos",{children:["settings",{children:["payment-accounts",{children:["[...mode]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,92939)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\settings\\payment-accounts\\[...mode]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],l=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\settings\\payment-accounts\\[...mode]\\page.tsx"],c="/(main)/pos/settings/payment-accounts/[...mode]/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(main)/pos/settings/payment-accounts/[...mode]/page",pathname:"/pos/settings/payment-accounts/[...mode]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},96065:(e,t,r)=>{Promise.resolve().then(r.bind(r,56148))},56148:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var a=r(10326),n=r(17577),s=r.n(n),i=r(58184),o=r(35509),d=r(43359),l=r(71935),c=r(92121),p=r(4139),x=r(38106),u=r(56249),m=r(61357),h=r(75698),g=r(75958),y=r(49909),b=r(276),f=r(2643),j=r(74215),v=r(72380),P=r(12226),w=r(46024),k=r(63191),R=r(35047),Z=r(93922);let S={container:{minHeight:"100vh",background:Z.X1.background,fontFamily:"'Inter', 'Sarabun', sans-serif",paddingBottom:60},heroHeader:{background:"linear-gradient(145deg, #eb2f96 0%, #c41d7f 100%)",padding:"20px 20px 60px",position:"relative",borderBottomLeftRadius:24,borderBottomRightRadius:24,boxShadow:"0 8px 24px rgba(235, 47, 150, 0.2)",overflow:"hidden"},heroDecoCircle1:{position:"absolute",top:-60,right:-60,width:160,height:160,borderRadius:"50%",background:"rgba(255,255,255,0.08)"},heroDecoCircle2:{position:"absolute",bottom:-40,left:-40,width:120,height:120,borderRadius:"50%",background:"rgba(255,255,255,0.06)"},headerContent:{maxWidth:1200,margin:"0 auto",position:"relative",zIndex:10},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:16},headerLeft:{display:"flex",alignItems:"center",gap:16},backButton:{width:44,height:44,borderRadius:14,background:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.3)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},headerIconBox:{width:56,height:56,borderRadius:16,background:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"},contentWrapper:{maxWidth:1200,margin:"-40px auto 30px",padding:"0 20px",position:"relative",zIndex:20},card:{borderRadius:20,border:"none",boxShadow:"0 4px 20px rgba(0,0,0,0.06)",transition:"all 0.3s ease"},cardActive:{border:`2px solid ${Z.X1.primary}`,boxShadow:`0 8px 24px ${Z.X1.primary}15`},accountIconBox:{width:56,height:56,borderRadius:16,background:"#eb2f9610",display:"flex",alignItems:"center",justifyContent:"center"},accountNumber:{background:"#f8fafc",borderRadius:12,padding:"12px 16px",border:"1px solid #e2e8f0"},addButton:{borderRadius:14,height:52,padding:"0 28px",fontWeight:600,background:"rgba(255,255,255,0.95)",border:"none",color:"#eb2f96",boxShadow:"0 4px 12px rgba(235, 47, 150, 0.15)"}},_=`
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(16px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .payment-card-animate {
        animation: fadeInUp 0.4s ease forwards;
        opacity: 0;
    }

    .payment-card-delay-1 { animation-delay: 0.1s; }
    .payment-card-delay-2 { animation-delay: 0.2s; }
    .payment-card-delay-3 { animation-delay: 0.3s; }

    /* Mobile-first */
    .payment-header-mobile {
        padding: 16px 16px 50px !important;
    }

    .payment-header-row-mobile {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 20px !important;
    }

    .payment-content-mobile {
        padding: 0 16px !important;
        margin-top: -35px !important;
    }

    @media (max-width: 576px) {
        .payment-add-btn {
            width: 100% !important;
        }

        .payment-modal .ant-modal {
            max-width: calc(100vw - 32px) !important;
            margin: 16px auto !important;
        }

        .payment-modal .ant-modal-content {
            border-radius: 20px;
        }
    }

    @media (min-width: 768px) {
        .payment-header-mobile {
            padding: 24px 24px 60px !important;
        }

        .payment-header-row-mobile {
            flex-direction: row !important;
            align-items: center !important;
            justify-content: space-between !important;
        }

        .payment-content-mobile {
            padding: 0 24px !important;
        }
    }

    /* Touch-friendly */
    .payment-touch-btn {
        -webkit-tap-highlight-color: rgba(235, 47, 150, 0.1);
        touch-action: manipulation;
        min-height: 44px;
    }

    /* Card hover */
    .payment-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.08) !important;
    }
`;var q=r(2175),z=r(33357),C=r(45207),I=r(26902);let{Title:E,Text:F}=i.default;function B(){let{message:e}=o.Z.useApp(),t=(0,R.useRouter)(),[r,i]=(0,n.useState)([]),[B,A]=(0,n.useState)(!1),{isAuthorized:O,isChecking:T}=(0,C.e)({requiredRole:"Admin"}),[$,D]=(0,n.useState)(!1),[M]=d.Z.useForm(),[N,W]=(0,n.useState)(null),[X,L]=(0,n.useState)(null),G=s().useCallback(async()=>{A(!0);try{let e=await q.p.getByShopId();i(e)}catch{e.error("ไม่สามารถโหลดข้อมูลบัญชีได้")}finally{A(!1)}},[e]),H=()=>{W(null),M.resetFields(),D(!0)},V=e=>{W(e.id),M.setFieldsValue(e),D(!0)},Y=async t=>{try{let r=await (0,z.P)();await q.p.delete(t,void 0,void 0,r),e.success("ลบบัญชีสำเร็จ"),L(null),G()}catch(r){let t=r instanceof Error?r.message:"ลบไม่สำเร็จ (บัญชีที่ใช้งานอยู่อาจลบไม่ได้)";e.error(t),L(null)}},U=async()=>{try{let t=await M.validateFields();if(!/^\d{10}$/.test(t.account_number))return e.error("เบอร์พร้อมเพย์ต้องเป็นตัวเลข 10 หลักเท่านั้น");if(t.phone&&!/^\d{10}$/.test(t.phone))return e.error("เบอร์โทรศัพท์ร้านต้องเป็นตัวเลข 10 หลักเท่านั้น");let r=await (0,z.P)();N?(await q.p.update(N,t,void 0,void 0,r),e.success("แก้ไขบัญชีสำเร็จ")):(await q.p.create(t,void 0,void 0,r),e.success("เพิ่มบัญชีสำเร็จ")),D(!1),G()}catch(r){if("object"==typeof r&&null!==r&&"errorFields"in r)return;let t=r instanceof Error?r.message:"บันทึกไม่สำเร็จ";e.error(t)}};return T?a.jsx(I.H,{message:"กำลังตรวจสอบสิทธิ์..."}):O?(0,a.jsxs)("div",{style:S.container,children:[a.jsx("style",{children:_}),(0,a.jsxs)("div",{style:S.heroHeader,className:"payment-header-mobile",children:[a.jsx("div",{style:S.heroDecoCircle1}),a.jsx("div",{style:S.heroDecoCircle2}),a.jsx("div",{style:S.headerContent,children:(0,a.jsxs)("div",{style:S.headerRow,className:"payment-header-row-mobile",children:[(0,a.jsxs)("div",{style:S.headerLeft,children:[a.jsx(l.ZP,{type:"text",icon:a.jsx(f.Z,{style:{fontSize:18,color:"#fff"}}),onClick:()=>t.back(),style:S.backButton,className:"payment-touch-btn"}),a.jsx("div",{style:S.headerIconBox,children:a.jsx(j.Z,{style:{fontSize:26,color:"#fff"}})}),(0,a.jsxs)("div",{children:[a.jsx(E,{level:3,style:{margin:0,color:"#fff"},children:"จัดการพร้อมเพย์"}),a.jsx(F,{style:{color:"rgba(255,255,255,0.9)",fontSize:14},children:"PromptPay Management"})]})]}),a.jsx(l.ZP,{type:"default",icon:a.jsx(v.Z,{}),onClick:H,size:"large",style:S.addButton,className:"payment-add-btn payment-touch-btn",children:"เพิ่มพร้อมเพย์ใหม่"})]})})]}),a.jsx("div",{style:S.contentWrapper,className:"payment-content-mobile",children:B?a.jsx("div",{style:{textAlign:"center",padding:"100px 0"},children:a.jsx(c.Z,{size:"large"})}):r.length>0?a.jsx(p.Z,{gutter:[24,24],children:r.map(e=>a.jsx(x.Z,{xs:24,md:12,lg:8,children:(0,a.jsxs)(u.Z,{hoverable:!0,variant:"borderless",style:{borderRadius:20,overflow:"hidden",boxShadow:e.is_active?`0 8px 24px ${Z.X1.primary}15`:"0 4px 12px rgba(0,0,0,0.03)",border:e.is_active?`2px solid ${Z.X1.primary}`:"2px solid transparent",transition:"all 0.3s ease"},bodyStyle:{padding:24},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:20},children:[a.jsx("div",{style:{width:56,height:56,borderRadius:16,background:"#eb2f9610",display:"flex",justifyContent:"center",alignItems:"center",fontSize:28,color:"#eb2f96"},children:a.jsx(j.Z,{})}),e.is_active&&(0,a.jsxs)(m.Z,{color:"green",style:{borderRadius:8,margin:0,padding:"4px 12px",fontWeight:600,fontSize:13,border:"none"},children:[a.jsx(P.Z,{style:{marginRight:4}})," กำลังใช้งาน"]})]}),(0,a.jsxs)("div",{style:{marginBottom:20},children:[a.jsx(E,{level:4,style:{margin:"0 0 4px 0",fontSize:18,color:"#1e293b"},children:e.account_name}),a.jsx(F,{type:"secondary",style:{fontSize:14},children:"พร้อมเพย์ (PromptPay)"})]}),a.jsx("div",{style:{background:"#f8fafc",borderRadius:12,padding:"12px 16px",marginBottom:24,border:"1px solid #e2e8f0"},children:a.jsx(F,{strong:!0,style:{fontSize:20,letterSpacing:1.5,fontFamily:"monospace"},children:e.account_number})}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:12},children:[a.jsx(l.ZP,{icon:a.jsx(w.Z,{}),onClick:()=>V(e),style:{borderRadius:10,border:"1px solid #e2e8f0"},children:"จัดการ"}),!e.is_active&&a.jsx(l.ZP,{danger:!0,icon:a.jsx(k.Z,{}),style:{borderRadius:10},onClick:()=>L(e.id)})]})]})},e.id))}):a.jsx(u.Z,{style:{borderRadius:24,padding:"80px 0",textAlign:"center"},children:a.jsx(h.Z,{description:a.jsx(F,{type:"secondary",style:{fontSize:16},children:"ยังไม่มีข้อมูลบัญชีรับเงินในระบบ"}),image:h.Z.PRESENTED_IMAGE_SIMPLE,children:a.jsx(l.ZP,{type:"primary",size:"large",onClick:H,icon:a.jsx(v.Z,{}),style:{borderRadius:10,height:48,marginTop:16},children:"เริ่มต้นเพิ่มบัญชีแรก"})})})}),a.jsx(g.Z,{title:N?"แก้ไขข้อมูลพร้อมเพย์":"เพิ่มพร้อมเพย์ใหม่",open:$,onOk:U,onCancel:()=>D(!1),okText:"บันทึกข้อมูล",cancelText:"ยกเลิก",okButtonProps:{size:"large",style:{borderRadius:8,background:Z.X1.primary}},cancelButtonProps:{size:"large",style:{borderRadius:8}},width:500,children:a.jsx("div",{style:{paddingTop:12},children:(0,a.jsxs)(d.Z,{form:M,layout:"vertical",initialValues:{account_type:"PromptPay"},children:[a.jsx(d.Z.Item,{name:"account_type",hidden:!0,initialValue:"PromptPay",children:a.jsx(y.default,{})}),a.jsx(d.Z.Item,{name:"account_name",label:a.jsx(F,{strong:!0,children:"ชื่อบัญชี / เจ้าของพร้อมเพย์"}),rules:[{required:!0,message:"กรุณาระบุชื่อ"}],children:a.jsx(y.default,{size:"large",placeholder:"เช่น นายสมใจ ดีมาก",style:{borderRadius:8}})}),a.jsx(d.Z.Item,{name:"account_number",label:a.jsx(F,{strong:!0,children:"เบอร์พร้อมเพย์"}),rules:[{required:!0,message:"กรุณาระบุเลขพร้อมเพย์"},{pattern:/^\d{10}$/,message:"ต้องเป็นตัวเลข 10 หลักเท่านั้น"}],extra:"กรอกเบอร์โทรศัพท์พร้อมเพย์ (10 หลัก)",children:a.jsx(y.default,{size:"large",placeholder:"08xxxxxxxx",style:{borderRadius:8},maxLength:10,onChange:e=>{let t=e.target.value.replace(/\D/g,"").slice(0,10);M.setFieldValue("account_number",t)}})}),a.jsx(b.Z,{plain:!0,style:{fontSize:13,color:"#999"},children:"ข้อมูลติดต่อเพิ่มเติม (ถ้ามี)"}),a.jsx(d.Z.Item,{name:"phone",label:a.jsx(F,{strong:!0,children:"เบอร์โทรศัพท์ร้าน"}),rules:[{pattern:/^\d{10}$/,message:"ต้องเป็นตัวเลข 10 หลักเท่านั้น"}],children:a.jsx(y.default,{size:"large",placeholder:"08xxxxxxxx",style:{borderRadius:8},maxLength:10,onChange:e=>{let t=e.target.value.replace(/\D/g,"").slice(0,10);M.setFieldValue("phone",t)}})}),a.jsx(d.Z.Item,{name:"address",label:a.jsx(F,{strong:!0,children:"ที่อยู่ร้าน"}),children:a.jsx(y.default.TextArea,{rows:2,placeholder:"ระบุที่อยู่สำหรับบัญชีนี้",style:{borderRadius:8}})})]})})}),a.jsx(g.Z,{title:"ยืนยันการลบ",open:null!==X,onOk:()=>X&&Y(X),onCancel:()=>L(null),okText:"ลบทิ้ง",cancelText:"ยกเลิก",okButtonProps:{danger:!0,size:"large",style:{borderRadius:8}},cancelButtonProps:{size:"large",style:{borderRadius:8}},centered:!0,children:(0,a.jsxs)("div",{style:{padding:"16px 0",textAlign:"center"},children:[a.jsx(k.Z,{style:{fontSize:48,color:"#ff4d4f",marginBottom:16}}),a.jsx("p",{style:{fontSize:16,margin:0},children:"คุณแน่ใจหรือไม่ว่าต้องการลบบัญชีนี้?"}),a.jsx("p",{style:{fontSize:13,color:"#888",marginTop:8},children:"การดำเนินการนี้ไม่สามารถย้อนกลับได้"})]})})]}):a.jsx(I.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้",tone:"danger"})}},92939:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\settings\payment-accounts\[...mode]\page.tsx#default`)}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,8674,8571,8270,9345,9042,1399,4658,1690],()=>r(9425));module.exports=a})();