(()=>{var e={};e.id=9655,e.ids=[9655],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},9425:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.Z,__next_app__:()=>p,originalPathname:()=>c,pages:()=>l,routeModule:()=>u,tree:()=>d}),r(92939),r(85429),r(58522),r(61804),r(7629),r(11930),r(12523);var a=r(23191),n=r(88716),i=r(43315),s=r(95231),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);r.d(t,o);let d=["",{children:["(main)",{children:["pos",{children:["settings",{children:["payment-accounts",{children:["[...mode]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,92939)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\settings\\payment-accounts\\[...mode]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],l=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\settings\\payment-accounts\\[...mode]\\page.tsx"],c="/(main)/pos/settings/payment-accounts/[...mode]/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(main)/pos/settings/payment-accounts/[...mode]/page",pathname:"/pos/settings/payment-accounts/[...mode]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},96065:(e,t,r)=>{Promise.resolve().then(r.bind(r,56148))},56148:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var a=r(10326),n=r(17577),i=r.n(n),s=r(58184),o=r(35509),d=r(43359),l=r(71935),c=r(92121),p=r(4139),u=r(38106),x=r(56249),m=r(61357),g=r(75958),h=r(49909),y=r(276),b=r(74215),f=r(72380),j=r(12226),v=r(46024),P=r(63191),w=r(35047),Z=r(93922);let k={container:{minHeight:"100vh",background:Z.X1.background,fontFamily:"var(--font-sans), 'Sarabun', sans-serif",paddingBottom:60},heroHeader:{background:"linear-gradient(145deg, #eb2f96 0%, #c41d7f 100%)",padding:"20px 20px 60px",position:"relative",borderBottomLeftRadius:24,borderBottomRightRadius:24,boxShadow:"0 8px 24px rgba(235, 47, 150, 0.2)",overflow:"hidden"},heroDecoCircle1:{position:"absolute",top:-60,right:-60,width:160,height:160,borderRadius:"50%",background:"rgba(255,255,255,0.08)"},heroDecoCircle2:{position:"absolute",bottom:-40,left:-40,width:120,height:120,borderRadius:"50%",background:"rgba(255,255,255,0.06)"},headerContent:{maxWidth:1200,margin:"0 auto",position:"relative",zIndex:10},headerRow:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:16},headerLeft:{display:"flex",alignItems:"center",gap:16},backButton:{width:44,height:44,borderRadius:14,background:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.3)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},headerIconBox:{width:56,height:56,borderRadius:16,background:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"},contentWrapper:{maxWidth:1200,margin:"-40px auto 30px",padding:"0 20px",position:"relative",zIndex:20},card:{borderRadius:20,border:"none",boxShadow:"0 4px 20px rgba(0,0,0,0.06)",transition:"all 0.3s ease"},cardActive:{border:`2px solid ${Z.X1.primary}`,boxShadow:`0 8px 24px ${Z.X1.primary}15`},accountIconBox:{width:56,height:56,borderRadius:16,background:"#eb2f9610",display:"flex",alignItems:"center",justifyContent:"center"},accountNumber:{background:"#f8fafc",borderRadius:12,padding:"12px 16px",border:"1px solid #e2e8f0"},addButton:{borderRadius:14,height:52,padding:"0 28px",fontWeight:600,background:"rgba(255,255,255,0.95)",border:"none",color:"#eb2f96",boxShadow:"0 4px 12px rgba(235, 47, 150, 0.15)"}},R=`
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(16px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .payment-card-animate {
        animation: fadeInUp 0.4s ease forwards;
        opacity: 0;
    }

    .payment-card-delay-1 { animation-delay: 0.1s; }
    .payment-card-delay-2 { animation-delay: 0.2s; }
    .payment-card-delay-3 { animation-delay: 0.3s; }

    /* Mobile-first */
    .payment-header-mobile {
        padding: 16px 16px 50px !important;
    }

    .payment-header-row-mobile {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 20px !important;
    }

    .payment-content-mobile {
        padding: 0 16px !important;
        margin-top: -35px !important;
    }

    @media (max-width: 576px) {
        .payment-add-btn {
            width: 100% !important;
        }

        .payment-modal .ant-modal {
            max-width: calc(100vw - 32px) !important;
            margin: 16px auto !important;
        }

        .payment-modal .ant-modal-content {
            border-radius: 20px;
        }
    }

    @media (min-width: 768px) {
        .payment-header-mobile {
            padding: 24px 24px 60px !important;
        }

        .payment-header-row-mobile {
            flex-direction: row !important;
            align-items: center !important;
            justify-content: space-between !important;
        }

        .payment-content-mobile {
            padding: 0 24px !important;
        }
    }

    /* Touch-friendly */
    .payment-touch-btn {
        -webkit-tap-highlight-color: rgba(235, 47, 150, 0.1);
        touch-action: manipulation;
        min-height: 44px;
    }

    /* Card hover */
    .payment-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.08) !important;
    }
`;var q=r(2175),_=r(33357),S=r(45207),z=r(26902),C=r(26963),F=r(76892),I=r(52647),B=r(36231);let{Title:E,Text:O}=s.default;function A(){let{message:e}=o.Z.useApp(),t=(0,w.useRouter)(),[r,s]=(0,n.useState)([]),[A,T]=(0,n.useState)(!1),{isAuthorized:W,isChecking:$}=(0,S.e)({requiredRole:"Admin"}),[X,D]=(0,n.useState)(!1),[G]=d.Z.useForm(),[H,L]=(0,n.useState)(null),[M,V]=(0,n.useState)(null),Y=i().useCallback(async()=>{T(!0);try{let e=await q.p.getByShopId();s(e)}catch{e.error("ไม่สามารถโหลดข้อมูลบัญชีได้")}finally{T(!1)}},[e]),N=()=>{L(null),G.resetFields(),D(!0)},U=e=>{L(e.id),G.setFieldsValue(e),D(!0)},J=async t=>{try{let r=await (0,_.P)();await q.p.delete(t,void 0,void 0,r),e.success("ลบบัญชีสำเร็จ"),V(null),Y()}catch(r){let t=r instanceof Error?r.message:"ลบไม่สำเร็จ (บัญชีที่ใช้งานอยู่อาจลบไม่ได้)";e.error(t),V(null)}},K=async()=>{try{let t=await G.validateFields();if(!/^\d{10}$/.test(t.account_number))return e.error("เบอร์พร้อมเพย์ต้องเป็นตัวเลข 10 หลักเท่านั้น");if(t.phone&&!/^\d{10}$/.test(t.phone))return e.error("เบอร์โทรศัพท์ร้านต้องเป็นตัวเลข 10 หลักเท่านั้น");let r=await (0,_.P)();H?(await q.p.update(H,t,void 0,void 0,r),e.success("แก้ไขบัญชีสำเร็จ")):(await q.p.create(t,void 0,void 0,r),e.success("เพิ่มบัญชีสำเร็จ")),D(!1),Y()}catch(r){if("object"==typeof r&&null!==r&&"errorFields"in r)return;let t=r instanceof Error?r.message:"บันทึกไม่สำเร็จ";e.error(t)}};return $?a.jsx(z.H,{message:"กำลังตรวจสอบสิทธิ์..."}):W?(0,a.jsxs)("div",{style:k.container,children:[a.jsx("style",{children:R}),a.jsx(I.Z,{title:"จัดการพร้อมเพย์",subtitle:"PromptPay Management",icon:a.jsx(b.Z,{}),onBack:()=>t.back(),actions:a.jsx(l.ZP,{type:"primary",icon:a.jsx(f.Z,{}),onClick:N,children:"เพิ่มพร้อมเพย์ใหม่"})}),a.jsx(C.Z,{maxWidth:1100,children:a.jsx(F.Z,{style:{background:"transparent",border:"none"},children:a.jsx("div",{style:k.contentWrapper,className:"payment-content-mobile",children:A?a.jsx("div",{style:{textAlign:"center",padding:"100px 0"},children:a.jsx(c.Z,{size:"large"})}):r.length>0?a.jsx(p.Z,{gutter:[24,24],children:r.map(e=>a.jsx(u.Z,{xs:24,md:12,lg:8,children:(0,a.jsxs)(x.Z,{hoverable:!0,variant:"borderless",style:{borderRadius:20,overflow:"hidden",boxShadow:e.is_active?`0 8px 24px ${Z.X1.primary}15`:"0 4px 12px rgba(0,0,0,0.03)",border:e.is_active?`2px solid ${Z.X1.primary}`:"2px solid transparent",transition:"all 0.3s ease"},bodyStyle:{padding:24},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:20},children:[a.jsx("div",{style:{width:56,height:56,borderRadius:16,background:"#eb2f9610",display:"flex",justifyContent:"center",alignItems:"center",fontSize:28,color:"#eb2f96"},children:a.jsx(b.Z,{})}),e.is_active&&(0,a.jsxs)(m.Z,{color:"green",style:{borderRadius:8,margin:0,padding:"4px 12px",fontWeight:600,fontSize:13,border:"none"},children:[a.jsx(j.Z,{style:{marginRight:4}})," กำลังใช้งาน"]})]}),(0,a.jsxs)("div",{style:{marginBottom:20},children:[a.jsx(E,{level:4,style:{margin:"0 0 4px 0",fontSize:18,color:"#1e293b"},children:e.account_name}),a.jsx(O,{type:"secondary",style:{fontSize:14},children:"พร้อมเพย์ (PromptPay)"})]}),a.jsx("div",{style:{background:"#f8fafc",borderRadius:12,padding:"12px 16px",marginBottom:24,border:"1px solid #e2e8f0"},children:a.jsx(O,{strong:!0,style:{fontSize:20,letterSpacing:1.5,fontFamily:"monospace"},children:e.account_number})}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:12},children:[a.jsx(l.ZP,{icon:a.jsx(v.Z,{}),onClick:()=>U(e),style:{borderRadius:10,border:"1px solid #e2e8f0"},children:"จัดการ"}),!e.is_active&&a.jsx(l.ZP,{danger:!0,icon:a.jsx(P.Z,{}),style:{borderRadius:10},onClick:()=>V(e.id)})]})]})},e.id))}):a.jsx(x.Z,{style:{borderRadius:24,padding:"80px 0",textAlign:"center"},children:a.jsx(B.Z,{title:"ยังไม่มีข้อมูลบัญชีรับเงินในระบบ",description:"กดปุ่มเพื่อเริ่มต้นเพิ่มบัญชีแรก",action:a.jsx(l.ZP,{type:"primary",size:"large",onClick:N,icon:a.jsx(f.Z,{}),style:{borderRadius:10,height:48},children:"เริ่มต้นเพิ่มบัญชีแรก"})})})})})}),a.jsx(g.Z,{title:H?"แก้ไขข้อมูลพร้อมเพย์":"เพิ่มพร้อมเพย์ใหม่",open:X,onOk:K,onCancel:()=>D(!1),okText:"บันทึกข้อมูล",cancelText:"ยกเลิก",okButtonProps:{size:"large",style:{borderRadius:8,background:Z.X1.primary}},cancelButtonProps:{size:"large",style:{borderRadius:8}},width:500,children:a.jsx("div",{style:{paddingTop:12},children:(0,a.jsxs)(d.Z,{form:G,layout:"vertical",initialValues:{account_type:"PromptPay"},children:[a.jsx(d.Z.Item,{name:"account_type",hidden:!0,initialValue:"PromptPay",children:a.jsx(h.default,{})}),a.jsx(d.Z.Item,{name:"account_name",label:a.jsx(O,{strong:!0,children:"ชื่อบัญชี / เจ้าของพร้อมเพย์"}),rules:[{required:!0,message:"กรุณาระบุชื่อ"}],children:a.jsx(h.default,{size:"large",placeholder:"เช่น นายสมใจ ดีมาก",style:{borderRadius:8}})}),a.jsx(d.Z.Item,{name:"account_number",label:a.jsx(O,{strong:!0,children:"เบอร์พร้อมเพย์"}),rules:[{required:!0,message:"กรุณาระบุเลขพร้อมเพย์"},{pattern:/^\d{10}$/,message:"ต้องเป็นตัวเลข 10 หลักเท่านั้น"}],extra:"กรอกเบอร์โทรศัพท์พร้อมเพย์ (10 หลัก)",children:a.jsx(h.default,{size:"large",placeholder:"08xxxxxxxx",style:{borderRadius:8},maxLength:10,onChange:e=>{let t=e.target.value.replace(/\D/g,"").slice(0,10);G.setFieldValue("account_number",t)}})}),a.jsx(y.Z,{plain:!0,style:{fontSize:13,color:"#999"},children:"ข้อมูลติดต่อเพิ่มเติม (ถ้ามี)"}),a.jsx(d.Z.Item,{name:"phone",label:a.jsx(O,{strong:!0,children:"เบอร์โทรศัพท์ร้าน"}),rules:[{pattern:/^\d{10}$/,message:"ต้องเป็นตัวเลข 10 หลักเท่านั้น"}],children:a.jsx(h.default,{size:"large",placeholder:"08xxxxxxxx",style:{borderRadius:8},maxLength:10,onChange:e=>{let t=e.target.value.replace(/\D/g,"").slice(0,10);G.setFieldValue("phone",t)}})}),a.jsx(d.Z.Item,{name:"address",label:a.jsx(O,{strong:!0,children:"ที่อยู่ร้าน"}),children:a.jsx(h.default.TextArea,{rows:2,placeholder:"ระบุที่อยู่สำหรับบัญชีนี้",style:{borderRadius:8}})})]})})}),a.jsx(g.Z,{title:"ยืนยันการลบ",open:null!==M,onOk:()=>M&&J(M),onCancel:()=>V(null),okText:"ลบทิ้ง",cancelText:"ยกเลิก",okButtonProps:{danger:!0,size:"large",style:{borderRadius:8}},cancelButtonProps:{size:"large",style:{borderRadius:8}},centered:!0,children:(0,a.jsxs)("div",{style:{padding:"16px 0",textAlign:"center"},children:[a.jsx(P.Z,{style:{fontSize:48,color:"#ff4d4f",marginBottom:16}}),a.jsx("p",{style:{fontSize:16,margin:0},children:"คุณแน่ใจหรือไม่ว่าต้องการลบบัญชีนี้?"}),a.jsx("p",{style:{fontSize:13,color:"#888",marginTop:8},children:"การดำเนินการนี้ไม่สามารถย้อนกลับได้"})]})})]}):a.jsx(z.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้",tone:"danger"})}},36231:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r(10326);r(17577);var n=r(56249),i=r(75698),s=r(58184),o=r(52386);function d({title:e="ไม่มีข้อมูล",description:t,action:r,image:d}){return a.jsx(n.Z,{size:"small",variant:"outlined",style:{borderRadius:o.H.cardRadiusLG},bodyStyle:{padding:20},children:a.jsx(i.Z,{image:d,description:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[a.jsx(s.default.Text,{strong:!0,children:e}),t?a.jsx(s.default.Text,{type:"secondary",children:t}):null]}),children:r})})}},92939:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\settings\payment-accounts\[...mode]\page.tsx#default`)}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,8491,8571,8842,8963,1399,4658,9860],()=>r(9425));module.exports=a})();