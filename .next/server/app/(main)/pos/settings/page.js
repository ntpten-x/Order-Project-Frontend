(()=>{var e={};e.id=1694,e.ids=[1694],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},61742:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.Z,__next_app__:()=>p,originalPathname:()=>l,pages:()=>c,routeModule:()=>u,tree:()=>d}),r(15403),r(85429),r(58522),r(61804),r(7629),r(11930),r(12523);var i=r(23191),o=r(88716),s=r(43315),n=r(95231),a={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>n[e]);r.d(t,a);let d=["",{children:["(main)",{children:["pos",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,15403)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\settings\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],c=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\settings\\page.tsx"],l="/(main)/pos/settings/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/(main)/pos/settings/page",pathname:"/pos/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},50405:(e,t,r)=>{Promise.resolve().then(r.bind(r,76993))},61007:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(17577);let o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM512 196.7l271.1 197.2H240.9L512 196.7zM264 462h117v374H264V462zm189 0h117v374H453V462zm307 374H642V462h118v374z"}}]},name:"bank",theme:"outlined"};var s=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let a=i.forwardRef((e,t)=>i.createElement(s.Z,n({},e,{ref:t,icon:o})))},76993:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>R});var i=r(10326),o=r(17577),s=r(58184),n=r(35509),a=r(92121),d=r(71935),c=r(75958),l=r(91377),p=r(74215),u=r(61007),x=r(12226),g=r(72380),h=r(35047),b=r(2175),f=r(37938),m=r(93922);let y={container:{minHeight:"100vh",background:m.X1.background,fontFamily:"var(--font-sans), 'Sarabun', sans-serif",paddingBottom:60},heroParams:{background:`linear-gradient(145deg, ${m.X1.primary} 0%, ${m.X1.primaryDark} 100%)`,padding:"20px 20px 60px",position:"relative",borderBottomLeftRadius:24,borderBottomRightRadius:24,boxShadow:"0 8px 24px rgba(99, 102, 241, 0.2)",zIndex:1,overflow:"hidden"},heroDecoCircle1:{position:"absolute",top:-60,right:-60,width:160,height:160,borderRadius:"50%",background:"rgba(255,255,255,0.08)"},heroDecoCircle2:{position:"absolute",bottom:-40,left:-40,width:120,height:120,borderRadius:"50%",background:"rgba(255,255,255,0.06)"},headerContent:{maxWidth:1e3,margin:"0 auto",position:"relative",zIndex:10},headerRow:{display:"flex",alignItems:"center",gap:16},backButton:{width:44,height:44,borderRadius:14,background:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(255,255,255,0.3)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},headerIconBox:{width:56,height:56,borderRadius:16,background:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center"},sectionTitle:{display:"flex",alignItems:"center",gap:12,marginBottom:20,color:"#fff"},contentWrapper:{maxWidth:700,margin:"-40px auto 30px",padding:"0 20px",position:"relative",zIndex:20},card:{borderRadius:20,boxShadow:"0 4px 20px rgba(0,0,0,0.06)",border:"none"},activeAccountCard:{background:"linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)",border:"1px solid #a7f3d0",borderRadius:16,padding:"20px",marginBottom:24},addButton:{borderRadius:14,height:52,fontSize:16,fontWeight:600,background:"#fff",border:`2px dashed ${m.X1.primary}`,color:m.X1.primary,transition:"all 0.2s ease"},dividerTitle:{fontSize:16,fontWeight:600},accountSelector:{border:"1px solid #e2e8f0",borderRadius:14,padding:"14px 18px",cursor:"pointer",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:56,transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.02)"},accountSelectorHover:{borderColor:m.X1.primary,boxShadow:`0 0 0 3px ${m.X1.primaryLight}`},modalAccountItem:{padding:"16px",border:"1px solid #e5e7eb",borderRadius:14,cursor:"pointer",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s ease"},modalAccountItemActive:{border:"2px solid #10b981",background:"#ecfdf5"},accountIconBox:{width:44,height:44,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center"}};var j=r(33357),v=r(80440),P=r(54354),k=r(45207),F=r(26902),S=r(26963),w=r(76892),z=r(52647);let{Text:_}=s.default;function R(){let{message:e}=n.Z.useApp(),t=(0,h.useRouter)(),[r,s]=(0,o.useState)(!0),[m,R]=(0,o.useState)([]),[C,q]=(0,o.useState)(null),[E,Z]=(0,o.useState)(!1),{showLoading:B,hideLoading:I}=(0,f.x)(),{socket:O}=(0,v.s)(),{isAuthorized:A,isChecking:D}=(0,k.e)({requiredRole:"Admin"}),H=(0,o.useCallback)(async(t=!1)=>{try{t||s(!0);let e=await b.p.getByShopId();R(e);let r=e.find(e=>e.is_active);q(r||null)}catch{e.error("ไม่สามารถดึงข้อมูลบัญชีได้")}finally{t||s(!1)}},[e]);(0,P.D)({socket:O,events:["payment-accounts:update","payment-accounts:create","payment-accounts:delete"],onRefresh:()=>H(!0),intervalMs:2e4});let W=async t=>{try{B("กำลังเปลี่ยนบัญชีรับเงิน...");let r=m.find(e=>e.id===t);r&&q(r);let i=await (0,j.P)();await b.p.activate(t,void 0,void 0,i),e.success("เปลี่ยนบัญชีรับเงินหลักสำเร็จ"),await H(!0)}catch{e.error("ไม่สามารถเปลี่ยนบัญชีได้"),await H(!0)}finally{I()}};return D?i.jsx(F.H,{message:"กำลังตรวจสอบสิทธิ์..."}):A?r?(0,i.jsxs)("div",{style:{minHeight:"100vh",background:y.container.background},children:[i.jsx(z.Z,{title:"ตั้งค่าบัญชีรับเงิน",subtitle:"Payment Settings",icon:i.jsx(l.Z,{}),onBack:()=>t.back()}),i.jsx(S.Z,{maxWidth:900,children:i.jsx(w.Z,{children:i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"60px 0"},children:i.jsx(a.Z,{size:"large",tip:"กำลังโหลด..."})})})})]}):(0,i.jsxs)("div",{style:{minHeight:"100vh",background:"#F8FAFC",paddingBottom:80},children:[i.jsx(z.Z,{title:"ตั้งค่าบัญชีรับเงิน",subtitle:"Payment Settings",icon:i.jsx(l.Z,{}),onBack:()=>t.back(),actions:i.jsx(d.ZP,{onClick:()=>H(!1),loading:r,children:"รีเฟรช"})}),i.jsx(S.Z,{maxWidth:900,children:(0,i.jsxs)(w.Z,{style:{background:"transparent",border:"none"},children:[(0,i.jsxs)("div",{style:{background:"white",borderRadius:16,padding:16,marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[i.jsx(_,{type:"secondary",style:{fontSize:13,display:"block",marginBottom:12},children:"เลือกบัญชีรับเงินหลัก"}),(0,i.jsxs)("div",{style:{border:`2px solid ${C?"#10b981":"#E2E8F0"}`,borderRadius:12,padding:14,cursor:"pointer",background:C?"#F0FDF4":"#fff",display:"flex",alignItems:"center",gap:12},onClick:()=>Z(!0),children:[i.jsx("div",{style:{width:40,height:40,borderRadius:10,background:C?.account_type==="PromptPay"?"#FDF2F8":"#EFF6FF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:C?.account_type==="PromptPay"?i.jsx(p.Z,{style:{color:"#EC4899",fontSize:18}}):i.jsx(u.Z,{style:{color:"#3B82F6",fontSize:18}})}),i.jsx("div",{style:{flex:1,minWidth:0},children:C?(0,i.jsxs)(i.Fragment,{children:[i.jsx(_,{strong:!0,style:{fontSize:15,display:"block",color:"#1E293B"},children:C.account_name}),i.jsx(_,{type:"secondary",style:{fontSize:12},children:C.account_number})]}):i.jsx(_,{type:"secondary",children:"กดเพื่อเลือกบัญชี"})}),i.jsx("div",{style:{background:"#10b981",color:"white",padding:"4px 10px",borderRadius:6,fontSize:11,fontWeight:600,flexShrink:0},children:"เปลี่ยน"})]})]}),C&&(0,i.jsxs)("div",{style:{background:"linear-gradient(135deg, #ECFDF5 0%, #D1FAE5 100%)",border:"1px solid #A7F3D0",borderRadius:14,padding:14,marginBottom:16,display:"flex",alignItems:"center",gap:12},children:[i.jsx(x.Z,{style:{fontSize:24,color:"#10B981",flexShrink:0}}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[i.jsx(_,{style:{fontSize:11,color:"#059669",display:"block"},children:"กำลังใช้งาน"}),i.jsx(_,{strong:!0,style:{fontSize:14,display:"block",color:"#065F46"},children:C.account_name}),(0,i.jsxs)(_,{style:{fontSize:12,color:"#047857"},children:["PromptPay"===C.account_type?"พร้อมเพย์":C.bank_name,": ",C.account_number]})]})]}),i.jsx(d.ZP,{block:!0,size:"large",icon:i.jsx(g.Z,{}),onClick:()=>t.push("/pos/settings/payment-accounts/manage"),style:{borderRadius:12,height:48,fontSize:14,fontWeight:600,background:"#fff",border:"2px dashed #6366f1",color:"#6366f1",boxShadow:"0 2px 4px rgba(0,0,0,0.02)"},children:"จัดการบัญชีทั้งหมด"})]})}),i.jsx(c.Z,{title:"เลือกบัญชีรับเงิน",open:E,onCancel:()=>Z(!1),footer:null,centered:!0,styles:{body:{padding:16}},children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[m.map(e=>{let t=C?.id===e.id;return(0,i.jsxs)("div",{onClick:()=>{t||(W(e.id),Z(!1))},style:{padding:14,border:`2px solid ${t?"#10b981":"#E5E7EB"}`,borderRadius:12,cursor:t?"default":"pointer",background:t?"#F0FDF4":"#fff",display:"flex",alignItems:"center",gap:12},children:[i.jsx("div",{style:{width:36,height:36,borderRadius:8,background:"PromptPay"===e.account_type?"#FDF2F8":"#EFF6FF",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"PromptPay"===e.account_type?i.jsx(p.Z,{style:{color:"#EC4899",fontSize:16}}):i.jsx(u.Z,{style:{color:"#3B82F6",fontSize:16}})}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[i.jsx(_,{strong:!0,style:{fontSize:14,display:"block"},children:e.account_name}),i.jsx(_,{type:"secondary",style:{fontSize:12},children:e.account_number})]}),t&&i.jsx(x.Z,{style:{color:"#10b981",fontSize:18}})]},e.id)}),i.jsx(d.ZP,{type:"dashed",block:!0,icon:i.jsx(g.Z,{}),onClick:()=>t.push("/pos/settings/payment-accounts/manage"),style:{height:44,borderRadius:10,marginTop:8},children:"เพิ่ม/แก้ไขบัญชี"})]})})]}):i.jsx(F.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้",tone:"danger"})}},80440:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});var i=r(17577),o=r(19211);let s=()=>(0,i.useContext)(o.J)},54354:(e,t,r)=>{"use strict";function i(e,t,r,i=e=>e.id,o=()=>!0){}function o({socket:e,events:t=[],onRefresh:r,intervalMs:i,enabled:o=!0,debounceMs:s}){}r.d(t,{D:()=>o,v:()=>i}),r(17577)},15403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\settings\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[9276,8491,8571,8842,8963,1399,4658,9860],()=>r(61742));module.exports=i})();