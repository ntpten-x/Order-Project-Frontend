(()=>{var e={};e.id=1694,e.ids=[1694],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},61742:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.Z,__next_app__:()=>p,originalPathname:()=>l,pages:()=>d,routeModule:()=>u,tree:()=>c}),r(15403),r(85429),r(58522),r(86296),r(7629),r(11930),r(12523);var a=r(23191),n=r(88716),i=r(43315),s=r(95231),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);r.d(t,o);let c=["",{children:["(main)",{children:["pos",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,15403)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\settings\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,86296)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\settings\\page.tsx"],l="/(main)/pos/settings/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(main)/pos/settings/page",pathname:"/pos/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},50405:(e,t,r)=>{Promise.resolve().then(r.bind(r,82124))},12226:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(17577);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};var i=r(74082);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let o=a.forwardRef((e,t)=>a.createElement(i.Z,s({},e,{ref:t,icon:n})))},74215:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(17577);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M468 128H160c-17.7 0-32 14.3-32 32v308c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V136c0-4.4-3.6-8-8-8zm-56 284H192V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210H136c-4.4 0-8 3.6-8 8v308c0 17.7 14.3 32 32 32h308c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zm-56 284H192V612h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm590-630H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V160c0-17.7-14.3-32-32-32zm-32 284H612V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210h-48c-4.4 0-8 3.6-8 8v134h-78V556c0-4.4-3.6-8-8-8H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h78v102c0 4.4 3.6 8 8 8h190c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zM746 832h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm142 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"qrcode",theme:"outlined"};var i=r(74082);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let o=a.forwardRef((e,t)=>a.createElement(i.Z,s({},e,{ref:t,icon:n})))},82124:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>I});var a=r(10326),n=r(17577),i=r(58184),s=r(91259),o=r(35509),c=r(92121),d=r(56249),l=r(276),p=r(71935),u=r(64635),f=r(61357),h=r(4139),g=r(38106),m=r(91377),x=r(72380),y=r(74215);let v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM512 196.7l271.1 197.2H240.9L512 196.7zM264 462h117v374H264V462zm189 0h117v374H453V462zm307 374H642V462h118v374z"}}]},name:"bank",theme:"outlined"};var b=r(74082);function j(){return(j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let P=n.forwardRef((e,t)=>n.createElement(b.Z,j({},e,{ref:t,icon:v})));var k=r(12226),w=r(2175),z=r(37938),S=r(93922);let C={container:{minHeight:"100vh",background:S.X1.background,fontFamily:"'Inter', 'Sarabun', sans-serif"},heroParams:{background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",padding:"32px 24px 70px",position:"relative",borderBottomLeftRadius:24,borderBottomRightRadius:24,boxShadow:"0 8px 24px rgba(24, 144, 255, 0.25)",marginBottom:-40,zIndex:1,overflow:"hidden"},sectionTitle:{display:"flex",alignItems:"center",gap:12,marginBottom:20,color:"#fff"},contentWrapper:{maxWidth:700,margin:"-40px auto 30px",padding:"0 24px",position:"relative",zIndex:20},card:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},activeAccountCard:{background:"#f0f5ff",border:"1px solid #adc6ff",borderRadius:12,padding:"20px",marginBottom:32},addButton:{borderRadius:12,height:52,fontSize:16,fontWeight:600,background:"#fff",border:`1px dashed ${S.X1.primary}`,color:S.X1.primary},dividerTitle:{fontSize:16,fontWeight:600}};var B=r(33357),E=r(80440),_=r(54354),O=r(45207),R=r(45999);let{Title:Z,Text:q}=i.default,{Option:F}=s.default;function I(){let{message:e}=o.Z.useApp(),[t,r]=(0,n.useState)(!0),[i,v]=(0,n.useState)([]),[b,j]=(0,n.useState)(null),{showLoading:S,hideLoading:I}=(0,z.x)(),{socket:H}=(0,E.s)(),{isAuthorized:T,isChecking:$}=(0,O.e)({requiredRole:"Admin"}),A=(0,n.useCallback)(async(t=!1)=>{try{t||r(!0);let e=await w.p.getByShopId();v(e);let a=e.find(e=>e.is_active);j(a||null)}catch{e.error("ไม่สามารถดึงข้อมูลบัญชีได้")}finally{t||r(!1)}},[e]);(0,_.D)({socket:H,events:["payment-accounts:update","payment-accounts:create","payment-accounts:delete"],onRefresh:()=>A(!0),intervalMs:2e4});let M=async t=>{try{S("กำลังเปลี่ยนบัญชีรับเงิน...");let r=i.find(e=>e.id===t);r&&j(r);let a=await (0,B.P)();await w.p.activate(t,void 0,void 0,a),e.success("เปลี่ยนบัญชีรับเงินหลักสำเร็จ"),await A(!0)}catch{e.error("ไม่สามารถเปลี่ยนบัญชีได้"),await A(!0)}finally{I()}};return $?a.jsx(R.H,{message:"กำลังตรวจสอบสิทธิ์..."}):T?t?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:C.container.background},children:a.jsx(c.Z,{size:"large",tip:"กำลังโหลด..."})}):(0,a.jsxs)("div",{style:C.container,children:[a.jsx("div",{style:{...C.heroParams,paddingBottom:60},children:a.jsx("div",{style:{maxWidth:1e3,margin:"0 auto",position:"relative",zIndex:10},children:(0,a.jsxs)("div",{style:C.sectionTitle,children:[a.jsx(m.Z,{style:{fontSize:28}}),(0,a.jsxs)("div",{children:[a.jsx(Z,{level:3,style:{margin:0,color:"#fff"},children:"ตั้งค่าบัญชีรับเงิน (Payment Settings)"}),a.jsx(q,{style:{color:"rgba(255,255,255,0.85)",fontSize:14},children:"Manage your active payment account"})]})]})})}),a.jsx("div",{style:C.contentWrapper,children:a.jsx(d.Z,{variant:"borderless",style:C.card,children:(0,a.jsxs)("div",{style:{marginBottom:32},children:[a.jsx(l.Z,{titlePlacement:"left",plain:!0,style:C.dividerTitle,children:"บัญชีรับเงินที่ใช้งาน (Primary Payment Account)"}),(0,a.jsxs)("div",{style:{marginBottom:24},children:[a.jsx(q,{type:"secondary",style:{display:"block",marginBottom:16},children:"เลือกบัญชีที่จะให้ลูกค้าโอนเงินเข้า (ใช้สร้าง QR Code อัตโนมัติ)"}),a.jsx(s.default,{size:"large",style:{width:"100%"},placeholder:"-- เลือกบัญชีรับเงิน --",value:b?.id,onChange:M,dropdownRender:e=>(0,a.jsxs)(a.Fragment,{children:[e,a.jsx(l.Z,{style:{margin:"8px 0"}}),a.jsx("div",{style:{padding:"0 8px 4px"},children:a.jsx(p.ZP,{type:"link",block:!0,icon:a.jsx(x.Z,{}),onClick:()=>window.location.href="/pos/settings/payment-accounts/manage",children:"จัดการบัญชีเพิ่มเติม"})})]}),children:i.map(e=>a.jsx(F,{value:e.id,children:(0,a.jsxs)(u.Z,{children:["PromptPay"===e.account_type?a.jsx(y.Z,{style:{color:"#eb2f96"}}):a.jsx(P,{style:{color:"#1890ff"}}),a.jsx(q,{strong:!0,children:e.account_name}),(0,a.jsxs)(q,{type:"secondary",style:{fontSize:12},children:["(",e.account_number,")"]}),e.is_active&&a.jsx(f.Z,{color:"success",style:{marginLeft:8},children:"ใช้งานอยู่"})]})},e.id))})]}),b&&a.jsx("div",{style:C.activeAccountCard,children:(0,a.jsxs)(h.Z,{align:"middle",gutter:16,children:[a.jsx(g.Z,{children:a.jsx(k.Z,{style:{fontSize:24,color:"#52c41a"}})}),(0,a.jsxs)(g.Z,{flex:"1",children:[a.jsx("div",{style:{marginBottom:4},children:a.jsx(q,{type:"secondary",style:{fontSize:12},children:"กำลังใช้งานอยู่ในปัจจุบัน:"})}),(0,a.jsxs)(u.Z,{direction:"vertical",size:0,children:[a.jsx(q,{strong:!0,style:{fontSize:18},children:b.account_name}),(0,a.jsxs)(u.Z,{children:[(0,a.jsxs)(q,{type:"secondary",children:["PromptPay"===b.account_type?"พร้อมเพย์":b.bank_name||"ธนาคาร",": "]}),a.jsx(q,{strong:!0,children:b.account_number})]})]})]})]})}),a.jsx(p.ZP,{block:!0,size:"large",icon:a.jsx(x.Z,{}),onClick:()=>window.location.href="/pos/settings/payment-accounts/manage",style:C.addButton,children:"เพิ่มหรือแก้ไขบัญชี (Manage Accounts)"})]})})})]}):a.jsx(R.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้",tone:"danger"})}},45999:(e,t,r)=>{"use strict";r.d(t,{H:()=>o});var a=r(10326);r(17577);var n=r(58184),i=r(92121);let{Text:s}=n.default,o=({message:e,tone:t="secondary"})=>(0,a.jsxs)("div",{style:{display:"flex",height:"100vh",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:16},children:[a.jsx(i.Z,{size:"large"}),a.jsx(s,{type:t,children:e})]})},80440:(e,t,r)=>{"use strict";r.d(t,{s:()=>i});var a=r(17577),n=r(19211);let i=()=>(0,a.useContext)(n.J)},2175:(e,t,r)=>{"use strict";r.d(t,{p:()=>i});var a=r(12529);let n="/pos/payment-accounts",i={getBasePath:e=>{let t=(0,a.b)("GET",`${n}/accounts`);return e?`${t}?shopId=${e}`:t},getByShopId:async(e,t)=>{let r=(0,a.b)("GET",`${n}/accounts`);e&&(r+=`?shopId=${e}`);let i={};t&&(i.Cookie=t);let s=await fetch(r,{cache:"no-store",credentials:"include",headers:i});if(!s.ok){let e=await s.json().catch(()=>({})),t=Error(e.error||e.message||"Failed to fetch accounts");throw t.status=s.status,t}return s.json()},create:async(e,t,r,i)=>{let s=(0,a.b)("POST",`${n}/accounts`);t&&(s+=`?shopId=${t}`);let o={"Content-Type":"application/json"};r&&(o.Cookie=r),i&&(o["X-CSRF-Token"]=i);let c=await fetch(s,{method:"POST",headers:o,body:JSON.stringify(e),credentials:"include"});if(!c.ok){let e=await c.json().catch(()=>({})),t=Error(e.error||e.message||"Failed to create account");throw t.status=c.status,t}return c.json()},update:async(e,t,r,i,s)=>{let o=(0,a.b)("PUT",`${n}/accounts/${e}`);r&&(o+=`?shopId=${r}`);let c={"Content-Type":"application/json"};i&&(c.Cookie=i),s&&(c["X-CSRF-Token"]=s);let d=await fetch(o,{method:"PUT",headers:c,body:JSON.stringify(t),credentials:"include"});if(!d.ok){let e=await d.json().catch(()=>({})),t=Error(e.error||e.message||"Failed to update account");throw t.status=d.status,t}return d.json()},activate:async(e,t,r,i)=>{let s=(0,a.b)("PATCH",`${n}/accounts/${e}/activate`);t&&(s+=`?shopId=${t}`);let o={"Content-Type":"application/json"};r&&(o.Cookie=r),i&&(o["X-CSRF-Token"]=i);let c=await fetch(s,{method:"PATCH",headers:o,body:JSON.stringify({}),credentials:"include"});if(!c.ok){let e=await c.json().catch(()=>({})),t=Error(e.error||e.message||"Failed to activate account");throw t.status=c.status,t}return c.json()},delete:async(e,t,r,i)=>{let s=(0,a.b)("DELETE",`${n}/accounts/${e}`);t&&(s+=`?shopId=${t}`);let o={};r&&(o.Cookie=r),i&&(o["X-CSRF-Token"]=i);let c=await fetch(s,{method:"DELETE",headers:o,credentials:"include"});if(!c.ok){let e=await c.json().catch(()=>({})),t=Error(e.error||e.message||"Failed to delete account");throw t.status=c.status,t}}}},93922:(e,t,r)=>{"use strict";r.d(t,{Np:()=>i,X1:()=>a,ax:()=>s,hS:()=>n});let a={primary:"#1890ff",secondary:"#13c2c2",success:"#52c41a",warning:"#faad14",error:"#ff4d4f",background:"#f5f5f5",cardBg:"#ffffff",text:"#262626",textSecondary:"#8c8c8c",border:"#f0f0f0",id_dineIn:"#1890ff",id_takeaway:"#52c41a",id_delivery:"#722ed1",kitchen:"#ff6b35",shift:"#10b981",kitchenBg:"#0f172a",kitchenCard:"rgba(30, 41, 59, 0.7)",kitchenBorder:"rgba(255, 255, 255, 0.1)"},n={dineIn:{primary:"#1890ff",light:"#e6f7ff",border:"#91d5ff",gradient:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)"},takeaway:{primary:"#52c41a",light:"#f6ffed",border:"#b7eb8f",gradient:"linear-gradient(135deg, #52c41a 0%, #73d13d 100%)"},delivery:{primary:"#722ed1",light:"#f9f0ff",border:"#d3adf7",gradient:"linear-gradient(135deg, #722ed1 0%, #9254de 100%)"}},i={container:{minHeight:"100vh",background:a.background,fontFamily:"'Inter', 'Sarabun', sans-serif"},heroParams:{background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",padding:"32px 24px 70px",position:"relative",borderBottomLeftRadius:24,borderBottomRightRadius:24,boxShadow:"0 8px 24px rgba(24, 144, 255, 0.25)",marginBottom:-40,zIndex:1,overflow:"hidden"},kitchenContainer:{minHeight:"100vh",background:"#0f172a",padding:"24px 24px 100px",color:"#f8fafc",fontFamily:"'Inter', 'Sarabun', sans-serif"},kitchenGlassCard:{background:"rgba(30, 41, 59, 0.7)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:20,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",overflow:"hidden"},kitchenHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:16},shiftHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},sectionTitle:{display:"flex",alignItems:"center",gap:12,marginBottom:20,color:"#fff"},contentWrapper:{maxWidth:1400,margin:"-40px auto 30px",padding:"0 24px",position:"relative",zIndex:20},card:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:"none",overflow:"hidden",background:a.cardBg},itemCard:{marginBottom:8,borderRadius:8,transition:"all 0.3s ease"}},s={available:{primary:"#52c41a",light:"#f6ffed",border:"#b7eb8f",gradient:"linear-gradient(135deg, #52c41a 0%, #73d13d 100%)"},occupied:{primary:"#fa8c16",light:"#fff7e6",border:"#ffd591",gradient:"linear-gradient(135deg, #fa8c16 0%, #ffa940 100%)"},inactive:{primary:"#8c8c8c",light:"#fafafa",border:"#d9d9d9",gradient:"linear-gradient(135deg, #8c8c8c 0%, #bfbfbf 100%)"},waitingForPayment:{primary:"#1890ff",light:"#e6f7ff",border:"#91d5ff",gradient:"linear-gradient(135deg, #1890ff 0%, #40a9ff 100%)"}}},45207:(e,t,r)=>{"use strict";r.d(t,{e:()=>s});var a=r(17577),n=r(35047),i=r(94001);function s({requiredRole:e="Admin",redirectUnauthenticated:t="/login",redirectUnauthorized:r="/pos",unauthorizedMessage:s="คุณไม่มีสิทธิ์เข้าถึงหน้านี้"}={}){(0,n.useRouter)();let{user:o,loading:c}=(0,i.a)(),d=(0,a.useMemo)(()=>c?"checking":o?e&&o.role!==e?"unauthorized":"authorized":"unauthenticated",[o,c,e]);return(0,a.useRef)(!1),{status:d,isAuthorized:"authorized"===d,isChecking:"checking"===d,user:o}}},54354:(e,t,r)=>{"use strict";function a(e,t,r,a=e=>e.id,n=()=>!0){}function n({socket:e,events:t=[],onRefresh:r,intervalMs:a,enabled:n=!0,debounceMs:i}){}r.d(t,{D:()=>n,v:()=>a}),r(17577)},15403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\settings\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,5898,8571,6927,6857,4300],()=>r(61742));module.exports=a})();