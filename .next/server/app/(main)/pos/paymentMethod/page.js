(()=>{var e={};e.id=3468,e.ids=[3468],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},70568:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.Z,__next_app__:()=>h,originalPathname:()=>c,pages:()=>l,routeModule:()=>p,tree:()=>d}),r(85607),r(85429),r(58522),r(86296),r(7629),r(11930),r(12523);var a=r(23191),s=r(88716),n=r(43315),i=r(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["(main)",{children:["pos",{children:["paymentMethod",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,85607)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\paymentMethod\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,86296)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],l=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\paymentMethod\\page.tsx"],c="/(main)/pos/paymentMethod/page",h={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/pos/paymentMethod/page",pathname:"/pos/paymentMethod",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},37005:(e,t,r)=>{Promise.resolve().then(r.bind(r,24420))},11397:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"};var n=r(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let o=a.forwardRef((e,t)=>a.createElement(n.Z,i({},e,{ref:t,icon:s})))},24420:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var a=r(10326),s=r(17577),n=r(58184),i=r(49909),o=r(71935),d=r(43778),l=r(61357),c=r(75698),h=r(75958),p=r(46752),u=r(92121),x=r(11397),g=r(80490),y=r(72380),m=r(56811),f=r(54695),b=r(46024),j=r(63191),v=r(35047),w=r(37938),P=r(59746),k=r(80440),S=r(33357),C=r(45207),E=r(54354),_=r(69711),M=r(24297),z=r(44528);let R={...(0,z.y)("linear-gradient(135deg, #10b981 0%, #059669 100%)"),paymentMethodCard:e=>({marginBottom:12,borderRadius:20,border:"none",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",overflow:"hidden",transition:"all 0.3s ease",background:e?"white":"linear-gradient(to right, #fafafa, white)",opacity:e?1:.7}),paymentMethodCardInner:{padding:16,display:"flex",alignItems:"center",gap:14}},I=(0,z.I)(".payment-method-page",".payment-method-card"),{Text:Z,Title:T}=n.default,q=({onRefresh:e,onAdd:t,searchValue:r,onSearchChange:s,page:n,total:l,lastPage:c,setPage:h})=>(0,a.jsxs)("div",{style:R.header,children:[a.jsx("div",{style:R.headerDecoCircle1}),a.jsx("div",{style:R.headerDecoCircle2}),(0,a.jsxs)("div",{style:R.headerContent,children:[(0,a.jsxs)("div",{style:R.headerLeft,children:[a.jsx("div",{style:R.headerIconBox,children:a.jsx(x.Z,{style:{fontSize:24,color:"white"}})}),(0,a.jsxs)("div",{children:[a.jsx(Z,{style:{color:"rgba(255,255,255,0.85)",fontSize:13,display:"block"},children:"การจัดการข้อมูล"}),a.jsx(T,{level:4,style:{color:"white",margin:0,fontWeight:700,letterSpacing:"0.5px"},children:"วิธีการชำระเงิน"})]})]}),(0,a.jsxs)("div",{style:R.headerActions,children:[a.jsx(i.default,{allowClear:!0,placeholder:"ค้นหาวิธีการชำระเงิน...",value:r,onChange:e=>s(e.target.value),style:{width:220,borderRadius:10}}),a.jsx(o.ZP,{type:"text",icon:a.jsx(g.Z,{style:{color:"white"}}),onClick:e,style:{background:"rgba(255,255,255,0.2)",borderRadius:12,height:40,width:40}}),a.jsx(o.ZP,{type:"primary",icon:a.jsx(y.Z,{}),onClick:t,style:{background:"white",color:"#10b981",borderRadius:12,height:40,fontWeight:600,border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:"เพิ่มวิธีการชำระเงิน"})]}),c>1&&a.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:a.jsx(d.Z,{current:n,pageSize:O,total:l,onChange:e=>h(e),size:"small"})})]})]}),O=50,$=({totalPaymentMethods:e,activePaymentMethods:t,inactivePaymentMethods:r})=>(0,a.jsxs)("div",{style:R.statsCard,children:[(0,a.jsxs)("div",{style:R.statItem,children:[a.jsx("span",{style:{...R.statNumber,color:"#10b981"},children:e}),a.jsx(Z,{style:R.statLabel,children:"ทั้งหมด"})]}),a.jsx("div",{style:{width:1,background:"#f0f0f0"}}),(0,a.jsxs)("div",{style:R.statItem,children:[a.jsx("span",{style:{...R.statNumber,color:"#52c41a"},children:t}),a.jsx(Z,{style:R.statLabel,children:"เปิดใช้งาน"})]}),a.jsx("div",{style:{width:1,background:"#f0f0f0"}}),(0,a.jsxs)("div",{style:R.statItem,children:[a.jsx("span",{style:{...R.statNumber,color:"#ff4d4f"},children:r}),a.jsx(Z,{style:R.statLabel,children:"ปิดใช้งาน"})]})]}),F=({paymentMethod:e,index:t,onEdit:r,onDelete:s})=>a.jsx("div",{className:"payment-method-card",style:{...R.paymentMethodCard(e.is_active),animationDelay:`${.03*t}s`},children:(0,a.jsxs)("div",{style:R.paymentMethodCardInner,children:[a.jsx("div",{style:{width:64,height:64,borderRadius:14,border:"2px solid #f0f0f0",boxShadow:"0 4px 12px rgba(0,0,0,0.06)",flexShrink:0,overflow:"hidden",position:"relative",background:e.is_active?"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)":"linear-gradient(135deg, #fff1f0 0%, #ffccc7 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(x.Z,{style:{fontSize:28,color:e.is_active?"#10b981":"#ff4d4f"}})}),(0,a.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[a.jsx(Z,{strong:!0,style:{fontSize:16,color:"#1a1a2e"},children:e.display_name||e.payment_method_name}),e.is_active?a.jsx(m.Z,{style:{color:"#52c41a",fontSize:14}}):a.jsx(f.Z,{style:{color:"#ff4d4f",fontSize:14}})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:6,flexWrap:"wrap",alignItems:"center"},children:[a.jsx(l.Z,{color:"green",style:{borderRadius:8,margin:0,fontSize:11},children:e.payment_method_name}),a.jsx(l.Z,{color:e.is_active?"success":"default",style:{borderRadius:8,margin:0,fontSize:11},children:e.is_active?"เปิดใช้งาน":"ปิดใช้งาน"})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:8},children:[a.jsx(o.ZP,{type:"text",icon:a.jsx(b.Z,{}),onClick:t=>{t.stopPropagation(),r(e)},style:{borderRadius:10,color:"#10b981",background:"#d1fae5"}}),a.jsx(o.ZP,{type:"text",danger:!0,icon:a.jsx(j.Z,{}),onClick:t=>{t.stopPropagation(),s(e)},style:{borderRadius:10,background:"#fff2f0"}})]})]})}),A=({onAdd:e})=>a.jsx(c.Z,{image:c.Z.PRESENTED_IMAGE_SIMPLE,description:(0,a.jsxs)("div",{style:{textAlign:"center"},children:[a.jsx(Z,{type:"secondary",style:{fontSize:15},children:"ยังไม่มีวิธีชำระเงิน"}),a.jsx("br",{}),a.jsx(Z,{type:"secondary",style:{fontSize:13},children:"เริ่มต้นเพิ่มวิธีชำระเงินแรกของคุณ"})]}),style:{padding:"60px 20px",background:"white",borderRadius:20,margin:"0 16px"},children:a.jsx(o.ZP,{type:"primary",icon:a.jsx(y.Z,{}),onClick:e,style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",border:"none"},children:"เพิ่มวิธีชำระเงิน"})});function D(){let e=(0,v.useRouter)(),[t,r]=(0,s.useState)([]),[n,i]=(0,s.useState)(1),[o,d]=(0,s.useState)(0),[l,c]=(0,s.useState)(1),[g,y]=(0,s.useState)(""),[m,f]=(0,s.useState)(""),{execute:b}=(0,P.J)(),{showLoading:j}=(0,w.x)(),{socket:z}=(0,k.s)(),{isAuthorized:T,isChecking:D}=(0,C.e)({requiredRole:"Admin"}),N=(0,s.useCallback)(async()=>{b(async()=>{let e=new URLSearchParams;e.set("page",n.toString()),e.set("limit",O.toString()),m&&e.set("q",m);let t=await M.E.getAll(void 0,e);r(t.data),d(t.total),c(t.last_page),m||1!==n||(0,_.v)("pos:payment-methods",t)},"กำลังโหลดข้อมูลวิธีการชำระเงิน...")},[m,b,n]);(0,E.D)({socket:z,events:["paymentMethod:create","paymentMethod:update","paymentMethod:delete"],onRefresh:()=>N(),intervalMs:2e4,debounceMs:1e3});let L=()=>{j("กำลังเปิดหน้าจัดการวิธีชำระเงิน..."),e.push("/pos/paymentMethod/manager/add")},B=t=>{j("กำลังเปิดหน้าแก้ไขวิธีชำระเงิน..."),e.push(`/pos/paymentMethod/manager/edit/${t.id}`)},G=e=>{h.Z.confirm({title:"ยืนยันการลบวิธีชำระเงิน",content:`คุณต้องการลบวิธีชำระเงิน "${e.display_name||e.payment_method_name}" หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,onOk:async()=>{await b(async()=>{let t=await (0,S.P)();if(!(await fetch(`/api/pos/paymentMethod/delete/${e.id}`,{method:"DELETE",headers:{"X-CSRF-Token":t}})).ok)throw Error("ไม่สามารถลบวิธีชำระเงินได้");p.ZP.success(`ลบวิธีชำระเงิน "${e.display_name||e.payment_method_name}" สำเร็จ`)},"กำลังลบวิธีชำระเงิน...")}})};if(D)return(0,a.jsxs)("div",{style:{display:"flex",height:"100vh",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:16},children:[a.jsx(u.Z,{size:"large"}),a.jsx(Z,{type:"secondary",children:"กำลังตรวจสอบสิทธิ์การใช้งาน..."})]});if(!T)return(0,a.jsxs)("div",{style:{display:"flex",height:"100vh",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:16},children:[a.jsx(u.Z,{size:"large"}),a.jsx(Z,{type:"danger",children:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับ..."})]});let W=t.filter(e=>e.is_active),H=t.filter(e=>!e.is_active);return(0,a.jsxs)("div",{className:"payment-method-page",style:R.container,children:[a.jsx("style",{children:I}),a.jsx(q,{onRefresh:N,onAdd:L,searchValue:g,onSearchChange:y,page:n,total:o,lastPage:l,setPage:i}),a.jsx($,{totalPaymentMethods:t.length,activePaymentMethods:W.length,inactivePaymentMethods:H.length}),a.jsx("div",{style:R.listContainer,children:t.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:R.sectionTitle,children:[a.jsx(x.Z,{style:{fontSize:18,color:"#10b981"}}),a.jsx("span",{style:{fontSize:16,fontWeight:600,color:"#1a1a2e"},children:"รายการวิธีชำระเงิน"}),(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",padding:"4px 12px",borderRadius:20,fontSize:12,fontWeight:600},children:[t.length," รายการ"]})]}),t.map((e,t)=>a.jsx(F,{paymentMethod:e,index:t,onEdit:B,onDelete:G},e.id))]}):a.jsx(A,{onAdd:L})})]})}},59746:(e,t,r)=>{"use strict";r.d(t,{J:()=>i});var a=r(17577),s=r(37938),n=r(75958);let i=()=>{let{showLoading:e,hideLoading:t}=(0,s.x)();return{execute:(0,a.useCallback)(async(r,a="กำลังดำเนินการ...",s,i="เกิดข้อผิดพลาด")=>{try{return e(a,"async"),await r()}catch(e){console.error("Async action error:",e),n.Z.error({title:"ข้อผิดพลาด",content:e.message||i});return}finally{t("async")}},[e,t])}}},80440:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});var a=r(17577),s=r(19211);let n=()=>(0,a.useContext)(s.J)},24297:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var a=r(12529);let s=r(40820).q.POS.PAYMENT_METHODS,n=(e,t="application/json")=>{let r={};return t&&(r["Content-Type"]=t),e&&(r.Cookie=e),r},i={getAll:async(e,t)=>{let r=(0,a.b)("GET",s),i=new URLSearchParams(t||"");i.has("page")||i.set("page","1"),i.has("limit")||i.set("limit","200");let o=i.toString();o&&(r+=`?${o}`);let d=n(e,""),l=await fetch(r,{cache:"no-store",headers:d,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch payment methods")}return l.json()},getById:async(e,t)=>{let r=(0,a.b)("GET",`${s}/${e}`),i=n(t,""),o=await fetch(r,{cache:"no-store",headers:i,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch payment method")}return o.json()},getByName:async(e,t)=>{let r=(0,a.b)("GET",`${s}/getByName/${e}`),i=n(t,""),o=await fetch(r,{cache:"no-store",headers:i,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch payment method")}return o.json()},create:async(e,t,r)=>{let i=(0,a.b)("POST",`${s}`),o=n(t);r&&(o["X-CSRF-Token"]=r);let d=await fetch(i,{method:"POST",headers:o,credentials:"include",body:JSON.stringify(e)});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to create payment method")}return d.json()},update:async(e,t,r,i)=>{let o=(0,a.b)("PUT",`${s}/${e}`),d=n(r);i&&(d["X-CSRF-Token"]=i);let l=await fetch(o,{method:"PUT",headers:d,credentials:"include",body:JSON.stringify(t)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to update payment method")}return l.json()},delete:async(e,t,r)=>{let i=(0,a.b)("DELETE",`${s}/${e}`),o=n(t,"");r&&(o["X-CSRF-Token"]=r);let d=await fetch(i,{method:"DELETE",headers:o,credentials:"include"});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to delete payment method")}}}},44528:(e,t,r)=>{"use strict";r.d(t,{I:()=>n,y:()=>s});let a={container:{paddingBottom:100,backgroundColor:"#f8f9fc",minHeight:"100vh"},header:{background:"linear-gradient(135deg, #722ed1 0%, #531dab 100%)",padding:"20px 20px 60px 20px",position:"relative",overflow:"hidden"},headerDecoCircle1:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"rgba(255,255,255,0.1)"},headerDecoCircle2:{position:"absolute",bottom:-30,left:-30,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.08)"},headerContent:{position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"space-between"},headerLeft:{display:"flex",alignItems:"center",gap:12},headerIconBox:{width:48,height:48,borderRadius:14,background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)"},headerActions:{display:"flex",gap:8},statsCard:{margin:"-40px 16px 0 16px",padding:"16px",background:"white",borderRadius:20,boxShadow:"0 8px 24px rgba(0,0,0,0.08)",display:"flex",justifyContent:"space-around",position:"relative",zIndex:10},statItem:{textAlign:"center",flex:1},statNumber:{fontSize:24,fontWeight:700,display:"block"},statLabel:{fontSize:12,color:"#8c8c8c",marginTop:2},listContainer:{padding:"20px 16px 0 16px"},sectionTitle:{display:"flex",alignItems:"center",gap:8,marginBottom:16}},s=e=>({...a,header:{...a.header,background:e}}),n=(e,t)=>`
    @keyframes fadeSlideIn {
        from {
            opacity: 0;
            transform: translateY(12px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    ${t} {
        animation: fadeSlideIn 0.4s ease both;
    }
    
    ${t}:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(0,0,0,0.1) !important;
    }
    
    ${t}:active {
        transform: scale(0.98);
    }
    
    ${e} *::-webkit-scrollbar {
        width: 6px;
    }
    ${e} *::-webkit-scrollbar-track {
        background: transparent;
    }
    ${e} *::-webkit-scrollbar-thumb {
        background: #d9d9d9;
        border-radius: 3px;
    }
    ${e} *::-webkit-scrollbar-thumb:hover {
        background: #bfbfbf;
    }
`},45207:(e,t,r)=>{"use strict";r.d(t,{e:()=>i});var a=r(17577),s=r(35047),n=r(94001);function i({requiredRole:e="Admin",redirectUnauthenticated:t="/login",redirectUnauthorized:r="/pos",unauthorizedMessage:i="คุณไม่มีสิทธิ์เข้าถึงหน้านี้"}={}){(0,s.useRouter)();let{user:o,loading:d}=(0,n.a)(),l=(0,a.useMemo)(()=>d?"checking":o?e&&o.role!==e?"unauthorized":"authorized":"unauthenticated",[o,d,e]);return(0,a.useRef)(!1),{status:l,isAuthorized:"authorized"===l,isChecking:"checking"===l,user:o}}},69711:(e,t,r)=>{"use strict";r.d(t,{v:()=>s});let a=()=>!1,s=(e,t)=>{if(a())try{let r={ts:Date.now(),data:t};window.localStorage.setItem(e,JSON.stringify(r))}catch{}}},54354:(e,t,r)=>{"use strict";function a(e,t,r,a=e=>e.id,s=()=>!0){}function s({socket:e,events:t=[],onRefresh:r,intervalMs:a,enabled:s=!0,debounceMs:n}){}r.d(t,{D:()=>s,v:()=>a}),r(17577)},85607:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\paymentMethod\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,5898,8571,6927,6857,4300],()=>r(70568));module.exports=a})();