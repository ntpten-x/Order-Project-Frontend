(()=>{var e={};e.id=9799,e.ids=[9799],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},45698:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.Z,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>u,tree:()=>o}),r(68670),r(85429),r(58522),r(61804),r(7629),r(11930),r(12523);var s=r(23191),a=r(88716),i=r(43315),n=r(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let o=["",{children:["(main)",{children:["pos",{children:["tables",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,68670)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\tables\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],c=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\tables\\page.tsx"],d="/(main)/pos/tables/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/pos/tables/page",pathname:"/pos/tables",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},84371:(e,t,r)=>{Promise.resolve().then(r.bind(r,84467))},2643:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var i=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}let l=s.forwardRef((e,t)=>s.createElement(i.Z,n({},e,{ref:t,icon:a})))},84467:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>H});var s=r(10326),a=r(77626),i=r.n(a),n=r(17577),l=r(66874),o=r(61357),c=r(71935),d=r(75958),p=r(46752),u=r(64635),h=r(49909),x=r(27266),b=r(56811),g=r(54695),j=r(46024),y=r(63191),m=r(24395),f=r(80490),v=r(72380),P=r(10985),w=r(35047),E=r(37938),F=r(59746),Z=r(80440),k=r(33357),C=r(7670),R=r(54354),q=r(69711),_=r(47594),S=r(26902),A=r(26963),D=r(76892),O=r(18978),B=r(52647),z=r(36231),I=r(83179);let{Text:L}=l.default,N=({tables:e})=>{let t=e.length,r=e.filter(e=>e.status===P.c.Available).length,a=e.filter(e=>e.status===P.c.Unavailable).length;return(0,s.jsxs)("div",{style:_.R.statsCard,children:[(0,s.jsxs)("div",{style:_.R.statItem,children:[s.jsx("span",{style:{..._.R.statNumber,color:"#7C3AED"},children:t}),s.jsx(L,{style:_.R.statLabel,children:"ทั้งหมด"})]}),s.jsx("div",{style:{width:1,height:24,background:"#f0f0f0",alignSelf:"center"}}),(0,s.jsxs)("div",{style:_.R.statItem,children:[s.jsx("span",{style:{..._.R.statNumber,color:"#10B981"},children:r}),s.jsx(L,{style:_.R.statLabel,children:"ว่าง"})]}),s.jsx("div",{style:{width:1,height:24,background:"#f0f0f0",alignSelf:"center"}}),(0,s.jsxs)("div",{style:_.R.statItem,children:[s.jsx("span",{style:{..._.R.statNumber,color:"#F59E0B"},children:a}),s.jsx(L,{style:_.R.statLabel,children:"ไม่ว่าง"})]})]})},T=({table:e,index:t,onEdit:r,onDelete:a})=>{let i=e.status===P.c.Available;return s.jsx("div",{className:"table-card",style:{..._.R.tableCard(e.is_active),animationDelay:`${.03*t}s`},onClick:()=>r(e),children:(0,s.jsxs)("div",{style:_.R.tableCardInner,children:[(0,s.jsxs)("div",{style:{width:56,height:56,borderRadius:"50%",background:i?"linear-gradient(135deg, #A7F3D0 0%, #6EE7B7 100%)":"linear-gradient(135deg, #FDE68A 0%, #FCD34D 100%)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,position:"relative",boxShadow:i?"0 4px 10px rgba(16, 185, 129, 0.2)":"0 4px 10px rgba(245, 158, 11, 0.2)"},children:[s.jsx("div",{style:{width:48,height:48,borderRadius:"50%",background:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(x.Z,{style:{fontSize:22,color:i?"#10B981":"#F59E0B"}})}),s.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:16,height:16,borderRadius:"50%",background:i?"#10B981":"#F59E0B",border:"2px solid white",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}})]}),(0,s.jsxs)("div",{style:{flex:1,minWidth:0,paddingRight:8,paddingLeft:8},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[s.jsx(L,{strong:!0,style:{fontSize:16,color:e.is_active?"#1E293B":"#64748B"},children:e.table_name}),e.is_active?s.jsx("div",{style:{padding:"2px 6px",background:"#F0FDF4",borderRadius:6,border:"1px solid #DCFCE7"},children:s.jsx(b.Z,{style:{color:"#10B981",fontSize:10}})}):s.jsx("div",{style:{padding:"2px 6px",background:"#F8FAFC",borderRadius:6,border:"1px solid #E2E8F0"},children:s.jsx(g.Z,{style:{color:"#94A3B8",fontSize:10}})})]}),s.jsx("div",{style:{display:"flex"},children:s.jsx(o.Z,{style:{borderRadius:6,margin:0,fontSize:10,color:i?"#10B981":"#B45309",background:i?"#ECFDF5":"#FEF3C7",border:"none",fontWeight:600,padding:"0 8px",lineHeight:"18px",height:18},children:i?"ว่าง":"ไม่ว่าง"})})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:8},children:[s.jsx(c.ZP,{type:"text",icon:s.jsx(j.Z,{}),onClick:t=>{t.stopPropagation(),r(e)},style:{borderRadius:12,color:"#7C3AED",background:"#F5F3FF",width:36,height:36}}),s.jsx(c.ZP,{type:"text",danger:!0,icon:s.jsx(y.Z,{}),onClick:t=>{t.stopPropagation(),a(e)},style:{borderRadius:12,background:"#FEF2F2",width:36,height:36}})]})]})})};function H(){let e=(0,w.useRouter)(),[t,r]=(0,n.useState)([]),[a,l]=(0,n.useState)([]),[o,b]=(0,n.useState)(""),{execute:g}=(0,F.J)(),{showLoading:j}=(0,E.x)(),{socket:P}=(0,Z.s)(),{isAuthorized:L,isChecking:H}=(0,C.e)({allowedRoles:["Admin","Manager"]}),G=(0,n.useCallback)(async()=>{g(async()=>{let e=await fetch("/api/pos/tables?limit=100");if(!e.ok)throw Error("Failed to fetch tables");let t=await e.json(),s=t.data||t;Array.isArray(s)&&(r(s),(0,q.v)("pos:tables",s))},"กำลังโหลดข้อมูลโต๊ะ...")},[g]);(0,R.v)(P,{create:I.b.tables.create,update:I.b.tables.update,delete:I.b.tables.delete},r);let J=e=>{b(e)},W=()=>{j("กำลังเปิดหน้าจัดการโต๊ะ..."),e.push("/pos/tables/manager/add")},$=t=>{j("กำลังเปิดหน้าแก้ไขโต๊ะ..."),e.push(`/pos/tables/manager/edit/${t.id}`)},M=e=>{d.Z.confirm({title:"ยืนยันการลบโต๊ะ",content:`คุณต้องการลบโต๊ะ "${e.table_name}" หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:s.jsx(y.Z,{style:{color:"#EF4444"}}),maskClosable:!0,onOk:async()=>{await g(async()=>{let t=await (0,k.P)();if(!(await fetch(`/api/pos/tables/delete/${e.id}`,{method:"DELETE",headers:{"X-CSRF-Token":t}})).ok)throw Error("ไม่สามารถลบโต๊ะได้");p.ZP.success(`ลบโต๊ะ "${e.table_name}" สำเร็จ`)},"กำลังลบโต๊ะ...")}})};return H?s.jsx(S.H,{message:"กำลังตรวจสอบสิทธิ์การใช้งาน..."}):L?(0,s.jsxs)("div",{style:_.R.container,className:"jsx-70760a0aebce288b tables-page",children:[s.jsx("style",{children:_.W}),s.jsx(i(),{id:"70760a0aebce288b",children:".search-input-placeholder-white input::-webkit-input-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input:-moz-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input::-moz-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input:-ms-input-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input::-ms-input-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input::placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input{color:white!important}.table-card{cursor:pointer;-webkit-tap-highlight-color:transparent}"}),s.jsx(B.Z,{title:"โต๊ะ",subtitle:`${t.length} รายการ`,icon:s.jsx(x.Z,{}),actions:(0,s.jsxs)(u.Z,{size:8,wrap:!0,children:[s.jsx(h.default,{prefix:s.jsx(m.Z,{style:{color:"#94A3B8"}}),allowClear:!0,placeholder:"ค้นหาโต๊ะ...",onChange:e=>J(e.target.value),style:{minWidth:220}}),s.jsx(c.ZP,{icon:s.jsx(f.Z,{}),onClick:G}),s.jsx(c.ZP,{type:"primary",icon:s.jsx(v.Z,{}),onClick:W,children:"เพิ่มโต๊ะ"})]})}),s.jsx(A.Z,{children:(0,s.jsxs)(O.Z,{children:[s.jsx(N,{tables:t}),s.jsx(D.Z,{title:"รายการโต๊ะ",extra:s.jsx("span",{style:{fontWeight:600},className:"jsx-70760a0aebce288b",children:a.length}),children:a.length>0?a.map((e,t)=>s.jsx(T,{table:e,index:t,onEdit:$,onDelete:M},e.id)):s.jsx(z.Z,{title:o.trim()?"ไม่พบโต๊ะที่ค้นหา":"ยังไม่มีโต๊ะในระบบ",description:o.trim()?"ลองค้นหาด้วยคำอื่นหรือล้างการค้นหา":"เริ่มต้นด้วยการเพิ่มโต๊ะแรกเพื่อใช้งาน",action:o.trim()?null:s.jsx(c.ZP,{type:"primary",icon:s.jsx(v.Z,{}),onClick:W,children:"เพิ่มโต๊ะ"})})})]})})]}):s.jsx(S.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับ...",tone:"danger"})}},18978:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(10326);r(17577);var a=r(21020),i=r(52386);function n({children:e,gap:t=i.H.sectionGap,style:r}){return s.jsx(a.Z,{vertical:!0,gap:t,style:r,children:e})}},36231:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(10326);r(17577);var a=r(56249),i=r(75698),n=r(66874),l=r(52386);function o({title:e="ไม่มีข้อมูล",description:t,action:r,image:o}){return s.jsx(a.Z,{size:"small",variant:"outlined",style:{borderRadius:l.H.cardRadiusLG},bodyStyle:{padding:20},children:s.jsx(i.Z,{image:o,description:(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[s.jsx(n.default.Text,{strong:!0,children:e}),t?s.jsx(n.default.Text,{type:"secondary",children:t}):null]}),children:r})})}},59746:(e,t,r)=>{"use strict";r.d(t,{J:()=>n});var s=r(17577),a=r(75958),i=r(37938);let n=()=>{let{showLoading:e,hideLoading:t}=(0,i.x)();return{execute:(0,s.useCallback)(async(r,s="กำลังดำเนินการ...",i,n="เกิดข้อผิดพลาด")=>{try{return e(s,"async"),await r()}catch(t){console.error("Async action error:",t);let e=n;"string"==typeof t?e=t:t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&(e=t.response?.data?.message??t.message??(()=>{try{return JSON.stringify(t)}catch{return"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ (Unknown Error)"}})()),a.Z.error({title:"ข้อผิดพลาด",content:e});return}finally{t("async")}},[e,t])}}},80440:(e,t,r)=>{"use strict";r.d(t,{s:()=>i});var s=r(17577),a=r(19211);let i=()=>(0,s.useContext)(a.J)},47594:(e,t,r)=>{"use strict";r.d(t,{R:()=>a,W:()=>i});var s=r(44528);let a={...(0,s.yf)("linear-gradient(135deg, #7C3AED 0%, #6D28D9 100%)"),tableCard:s.YO,tableCardInner:s.lv},i=(0,s.IU)(".tables-page",".table-card")},10985:(e,t,r)=>{"use strict";var s;r.d(t,{c:()=>s}),function(e){e.Available="Available",e.Unavailable="Unavailable"}(s||(s={}))},69711:(e,t,r)=>{"use strict";r.d(t,{t:()=>a,v:()=>i});let s=()=>!1,a=(e,t)=>{if(!s())return null;try{let r=window.localStorage.getItem(e);if(!r)return null;let s=JSON.parse(r);if(!s?.ts||Date.now()-s.ts>t)return null;return s.data??null}catch{return null}},i=(e,t)=>{if(s())try{let r={ts:Date.now(),data:t};window.localStorage.setItem(e,JSON.stringify(r))}catch{}}},54354:(e,t,r)=>{"use strict";function s(e,t,r,s=e=>e.id,a=()=>!0){}function a({socket:e,events:t=[],onRefresh:r,intervalMs:s,enabled:a=!0,debounceMs:i}){}r.d(t,{D:()=>a,v:()=>s}),r(17577)},68670:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\tables\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,4421,8571,8842,8963,1399,4658,3849],()=>r(45698));module.exports=s})();