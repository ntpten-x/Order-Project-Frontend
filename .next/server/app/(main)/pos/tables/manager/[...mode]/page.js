(()=>{var e={};e.id=4165,e.ids=[4165],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},6617:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.Z,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>u,tree:()=>l}),r(45568),r(85429),r(58522),r(61804),r(7629),r(11930),r(12523);var s=r(23191),i=r(88716),a=r(43315),o=r(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(t,n);let l=["",{children:["(main)",{children:["pos",{children:["tables",{children:["manager",{children:["[...mode]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,45568)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\tables\\manager\\[...mode]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\tables\\manager\\[...mode]\\page.tsx"],c="/(main)/pos/tables/manager/[...mode]/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/pos/tables/manager/[...mode]/page",pathname:"/pos/tables/manager/[...mode]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},98502:(e,t,r)=>{Promise.resolve().then(r.bind(r,4763))},30278:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var a=r(74082);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}let n=s.forwardRef((e,t)=>s.createElement(a.Z,o({},e,{ref:t,icon:i})))},4763:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var s=r(10326),i=r(77626),a=r.n(i),o=r(17577),n=r(58184),l=r(71935),d=r(43359),c=r(46752),p=r(75958),u=r(92121),x=r(49909),m=r(91259),h=r(63459),g=r(35047),b=r(26963),j=r(76892),f=r(52647),y=r(27266),v=r(56811),P=r(30278),k=r(63191),w=r(47594);r(33357);var E=r(45207),F=r(26902),q=r(37938),Z=r(10985);let{Title:_,Text:C}=n.default,S=()=>(0,s.jsxs)(s.Fragment,{children:[s.jsx("style",{children:w.W}),s.jsx(a(),{id:"bdcc97fb7d436e32",children:".ant-form-item-label>label{font-size:15px;font-weight:500;color:#334155}.ant-input-lg,.ant-input-number-lg,.ant-select-selector{-webkit-border-radius:12px!important;-moz-border-radius:12px!important;border-radius:12px!important;padding:8px 11px!important;font-size:16px!important;border-color:#E2E8F0!important}.ant-select-lg .ant-select-selector{padding:0 11px!important;height:48px!important;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.ant-input-lg:hover,.ant-input-number-lg:hover,.ant-select-selector:hover{border-color:#7C3AED!important}.ant-input-lg:focus,.ant-input-number-lg:focus,.ant-select-focused .ant-select-selector{border-color:#7C3AED!important;-webkit-box-shadow:0 0 0 2px rgba(124,58,237,.1)!important;-moz-box-shadow:0 0 0 2px rgba(124,58,237,.1)!important;box-shadow:0 0 0 2px rgba(124,58,237,.1)!important}"})]}),z=({name:e})=>(0,s.jsxs)("div",{style:{background:"white",borderRadius:24,padding:24,boxShadow:"0 10px 30px rgba(0,0,0,0.05)",border:"1px solid #F1F5F9",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[s.jsx(_,{level:5,style:{color:"#94A3B8",marginBottom:20,fontWeight:600,width:"100%",textAlign:"left"},children:"ตัวอย่างการแสดงผล"}),(0,s.jsxs)("div",{style:{width:"100%",background:"white",borderRadius:16,border:"1px solid #E2E8F0",padding:"16px",display:"flex",alignItems:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.03)",maxWidth:400},children:[s.jsx("div",{style:{width:56,height:56,borderRadius:"50%",background:"linear-gradient(135deg, #A7F3D0 0%, #6EE7B7 100%)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginRight:16,position:"relative",boxShadow:"0 4px 10px rgba(16, 185, 129, 0.2)"},children:s.jsx("div",{style:{width:48,height:48,borderRadius:"50%",background:"white",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(y.Z,{style:{fontSize:22,color:"#10B981"}})})}),s.jsx("div",{style:{flex:1,minWidth:0},children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[s.jsx(C,{strong:!0,style:{fontSize:16,color:"#1E293B"},children:e||"ชื่อโต๊ะ"}),s.jsx(v.Z,{style:{color:"#10B981",fontSize:14}})]})})]}),s.jsx("div",{style:{marginTop:24,textAlign:"center"},children:s.jsx(C,{type:"secondary",style:{fontSize:13},children:"นี่คือลักษณะที่จะแสดงในรายการ (สถานะว่าง)"})})]}),O=({isEdit:e,loading:t,onCancel:r})=>(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:12,marginTop:40,borderTop:"1px solid #F1F5F9",paddingTop:24},children:[s.jsx(l.ZP,{size:"large",onClick:r,style:{borderRadius:12,height:48,padding:"0 32px",border:"1px solid #E2E8F0",color:"#64748B",fontWeight:600},children:"ยกเลิก"}),s.jsx(l.ZP,{type:"primary",htmlType:"submit",loading:t,icon:s.jsx(P.Z,{}),size:"large",style:{borderRadius:12,height:48,padding:"0 32px",background:"#7C3AED",boxShadow:"0 4px 12px rgba(124, 58, 237, 0.3)",fontWeight:600,border:"none"},children:e?"บันทึกการแก้ไข":"สร้างโต๊ะ"})]});function T({params:e}){let t=(0,g.useRouter)(),[r]=d.Z.useForm(),[i,a]=(0,o.useState)(!1),[n,y]=(0,o.useState)(!1),[v,P]=(0,o.useState)(""),[_,T]=(0,o.useState)(""),{showLoading:B,hideLoading:R}=(0,q.x)(),A=e.mode[0],V=e.mode[1]||null,I="edit"===A&&!!V,{isAuthorized:N,isChecking:M}=(0,E.e)({requiredRole:"Admin"});(0,o.useCallback)(async()=>{a(!0),B();try{let e=await fetch(`/api/pos/tables/getById/${V}`);if(!e.ok)throw Error("ไม่สามารถดึงข้อมูลโต๊ะได้");let t=await e.json();r.setFieldsValue({table_name:t.table_name,status:t.status,is_active:t.is_active}),P(t.table_name||"")}catch(e){console.error(e),c.ZP.error("ไม่สามารถดึงข้อมูลโต๊ะได้"),t.push("/pos/tables")}finally{a(!1),R()}},[V,r,t,B,R]);let W=async e=>{y(!0);try{if(I){let t=await fetch(`/api/pos/tables/update/${V}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":_},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถอัปเดตโต๊ะได้")}c.ZP.success("อัปเดตโต๊ะสำเร็จ")}else{let t=await fetch("/api/pos/tables/create",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":_},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถสร้างโต๊ะได้")}c.ZP.success("สร้างโต๊ะสำเร็จ")}t.push("/pos/tables")}catch(e){console.error(e),c.ZP.error(e.message||(I?"ไม่สามารถอัปเดตโต๊ะได้":"ไม่สามารถสร้างโต๊ะได้"))}finally{y(!1)}},D=()=>t.push("/pos/tables");return M?s.jsx(F.H,{message:"กำลังตรวจสอบสิทธิ์..."}):N?(0,s.jsxs)("div",{className:"manage-page",style:w.R.container,children:[s.jsx(S,{}),s.jsx(f.Z,{title:I?"แก้ไขข้อมูลโต๊ะ":"เพิ่มโต๊ะ",subtitle:I?"แก้ไขชื่อหรือสถานะของโต๊ะอาหาร":"สร้างโต๊ะใหม่ในร้านของคุณ",onBack:D,actions:I?s.jsx(l.ZP,{danger:!0,onClick:()=>{V&&p.Z.confirm({title:"ยืนยันการลบโต๊ะ",content:`คุณต้องการลบโต๊ะ "${v}" หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:s.jsx(k.Z,{style:{color:"#EF4444"}}),maskClosable:!0,onOk:async()=>{try{let e=await fetch(`/api/pos/tables/delete/${V}`,{method:"DELETE",headers:{"X-CSRF-Token":_}});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถลบโต๊ะได้")}c.ZP.success("ลบโต๊ะสำเร็จ"),t.push("/pos/tables")}catch(e){console.error(e),c.ZP.error("ไม่สามารถลบโต๊ะได้")}}})},icon:s.jsx(k.Z,{}),children:"ลบ"}):null}),s.jsx(b.Z,{maxWidth:1e3,children:s.jsx(j.Z,{style:{background:"transparent",border:"none"},children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsx("div",{style:{background:"white",borderRadius:24,padding:32,boxShadow:"0 4px 24px rgba(0,0,0,0.04)"},children:i?s.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"60px 0"},children:s.jsx(u.Z,{size:"large"})}):(0,s.jsxs)(d.Z,{form:r,layout:"vertical",onFinish:W,requiredMark:!1,autoComplete:"off",initialValues:{is_active:!0,status:Z.c.Available},onValuesChange:e=>{void 0!==e.table_name&&P(e.table_name)},children:[(0,s.jsxs)("div",{style:{marginBottom:24},children:[s.jsx(C,{strong:!0,style:{fontSize:18,color:"#1E293B",display:"block",marginBottom:16},children:"ข้อมูลทั่วไป"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[s.jsx(d.Z.Item,{name:"table_name",label:"ชื่อโต๊ะ *",rules:[{required:!0,message:"กรุณากรอกชื่อโต๊ะ"},{max:50,message:"ความยาวต้องไม่เกิน 50 ตัวอักษร"}],children:s.jsx(x.default,{size:"large",placeholder:"เช่น T-01, VIP-1",maxLength:50})}),s.jsx(d.Z.Item,{name:"status",label:"สถานะเริ่มต้น",rules:[{required:!0,message:"กรุณาเลือกสถานะ"}],children:(0,s.jsxs)(m.default,{size:"large",children:[s.jsx(m.default.Option,{value:Z.c.Available,children:"ว่าง (Available)"}),s.jsx(m.default.Option,{value:Z.c.Unavailable,children:"ไม่ว่าง (Unavailable)"})]})})]})]}),(0,s.jsxs)("div",{style:{marginBottom:24,borderTop:"1px solid #F1F5F9",paddingTop:24},children:[s.jsx(C,{strong:!0,style:{fontSize:18,color:"#1E293B",display:"block",marginBottom:16},children:"การตั้งค่าอื่นๆ"}),s.jsx(d.Z.Item,{name:"is_active",label:"สถานะการใช้งาน",valuePropName:"checked",style:{marginBottom:0},children:s.jsx(h.Z,{checkedChildren:"เปิดใช้งาน",unCheckedChildren:"ปิดใช้งาน",style:{background:r.getFieldValue("is_active")?"#10B981":void 0}})})]}),s.jsx(O,{isEdit:I,loading:n,onCancel:D})]})})}),s.jsx("div",{className:"md:col-span-1 hidden md:block",children:s.jsx("div",{style:{position:"sticky",top:24},children:s.jsx(z,{name:v})})})]})})})]}):s.jsx(F.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้",tone:"danger"})}},45568:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\tables\manager\[...mode]\page.tsx#default`)}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,8491,8571,8842,8963,1399,4658,1395],()=>r(6617));module.exports=s})();