(()=>{var e={};e.id=4165,e.ids=[4165],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},6617:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>s.Z,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>u,tree:()=>l}),a(45568),a(85429),a(58522),a(86296),a(7629),a(11930),a(12523);var r=a(23191),n=a(88716),s=a(43315),i=a(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let l=["",{children:["(main)",{children:["pos",{children:["tables",{children:["manager",{children:["[...mode]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,45568)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\tables\\manager\\[...mode]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,86296)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],c=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\tables\\manager\\[...mode]\\page.tsx"],d="/(main)/pos/tables/manager/[...mode]/page",p={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(main)/pos/tables/manager/[...mode]/page",pathname:"/pos/tables/manager/[...mode]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},98502:(e,t,a)=>{Promise.resolve().then(a.bind(a,86811))},2643:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(17577);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var s=a(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}let o=r.forwardRef((e,t)=>r.createElement(s.Z,i({},e,{ref:t,icon:n})))},90496:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(17577);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var s=a(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}let o=r.forwardRef((e,t)=>r.createElement(s.Z,i({},e,{ref:t,icon:n})))},30278:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a(17577);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var s=a(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}let o=r.forwardRef((e,t)=>r.createElement(s.Z,i({},e,{ref:t,icon:n})))},86811:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var r=a(10326),n=a(17577),s=a(24352),i=a(46752),o=a(75958),l=a(92121),c=a(49909),d=a(91259),p=a(63459),u=a(35047),g=a(10985),h=a(58184),m=a(61357),f=a(27266),x=a(31839);let{Text:b}=h.default,{pageStyles:y,ManagePageStyles:v}=(0,x.dg)({focusColor:"#722ed1",focusShadow:"rgba(114, 46, 209, 0.1)",switchGradient:"linear-gradient(135deg, #722ed1 0%, #531dab 100%)"}),j=({isEdit:e,onBack:t,onDelete:a})=>r.jsx(x.oI,{pageStyles:y,isEdit:e,onBack:t,onDelete:a,titleCreate:"เพิ่มโต๊ะ",titleEdit:"แก้ไขโต๊ะ"}),w=({name:e,status:t})=>{let a="Available"===String(t);return(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:14,padding:16,background:"#fafafa",borderRadius:16,marginTop:12},children:[r.jsx("div",{style:{width:60,height:60,borderRadius:14,background:a?"linear-gradient(135deg, #f6ffed 0%, #d9f7be 100%)":"linear-gradient(135deg, #fff7e6 0%, #ffe7ba 100%)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,border:"1px solid #f0f0f0"},children:r.jsx(f.Z,{style:{fontSize:24,color:a?"#52c41a":"#fa8c16"}})}),(0,r.jsxs)("div",{children:[r.jsx(b,{strong:!0,style:{display:"block",marginBottom:2},children:e||"ตัวอย่างโต๊ะ"}),r.jsx("div",{style:{display:"flex",gap:6},children:r.jsx(m.Z,{color:a?"success":"warning",style:{borderRadius:6,margin:0,fontSize:10},children:a?"ว่าง":"ไม่ว่าง"})})]})]})},P=({isEdit:e,loading:t,onCancel:a})=>r.jsx(x.uM,{pageStyles:y,isEdit:e,loading:t,onCancel:a});a(33357);var k=a(45207),E=a(45999),S=a(31499);function C({params:e}){let t=(0,u.useRouter)(),[a]=s.Z.useForm(),[h,m]=(0,n.useState)(!1),[f,x]=(0,n.useState)(!1),[b,C]=(0,n.useState)(""),[Z,z]=(0,n.useState)(""),[O,q]=(0,n.useState)(""),_=e.mode[0],T=e.mode[1]||null,R="edit"===_&&!!T,{isAuthorized:F,isChecking:I}=(0,k.e)({requiredRole:"Admin"});(0,n.useCallback)(async()=>{m(!0);try{if(!T)return;let e=await S.$.getById(T);a.setFieldsValue({table_name:e.table_name,status:e.status,is_active:e.is_active}),C(e.table_name||""),z(e.status||"")}catch(e){console.error(e),i.ZP.error("ไม่สามารถดึงข้อมูลโต๊ะได้"),t.push("/pos/tables")}finally{m(!1)}},[T,a,t]);let $=async e=>{x(!0);try{if(R){if(!T)throw Error("ID not found");await S.$.update(T,e,void 0,O),i.ZP.success("อัปเดตโต๊ะสำเร็จ")}else await S.$.create(e,void 0,O),i.ZP.success("สร้างโต๊ะสำเร็จ");t.push("/pos/tables")}catch(e){console.error(e),i.ZP.error(e.message||(R?"ไม่สามารถอัปเดตโต๊ะได้":"ไม่สามารถสร้างโต๊ะได้"))}finally{x(!1)}},B=()=>t.push("/pos/tables");return I?r.jsx(E.H,{message:"กำลังตรวจสอบสิทธิ์..."}):F?(0,r.jsxs)("div",{className:"manage-page",style:y.container,children:[r.jsx(v,{}),r.jsx(j,{isEdit:R,onBack:B,onDelete:R?()=>{T&&o.Z.confirm({title:"ยืนยันการลบโต๊ะ",content:`คุณต้องการลบโต๊ะ "${b}" หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,onOk:async()=>{try{await S.$.delete(T,void 0,O),i.ZP.success("ลบโต๊ะสำเร็จ"),t.push("/pos/tables")}catch(e){console.error(e),i.ZP.error("ไม่สามารถลบโต๊ะได้")}}})}:void 0}),r.jsx("div",{className:"manage-form-card",style:y.formCard,children:h?r.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"60px 0"},children:r.jsx(l.Z,{size:"large"})}):(0,r.jsxs)(s.Z,{form:a,layout:"vertical",onFinish:$,requiredMark:!1,autoComplete:"off",initialValues:{is_active:!0,status:g.c.Available},onValuesChange:e=>{void 0!==e.table_name&&C(e.table_name),void 0!==e.status&&z(e.status)},children:[r.jsx(s.Z.Item,{name:"table_name",label:"ชื่อโต๊ะ *",rules:[{required:!0,message:"กรุณากรอกชื่อโต๊ะ"},{max:50,message:"ความยาวต้องไม่เกิน 50 ตัวอักษร"}],children:r.jsx(c.default,{size:"large",placeholder:"เช่น T1, A10, VIP1",maxLength:50})}),r.jsx(s.Z.Item,{name:"status",label:"สถานะโต๊ะ *",rules:[{required:!0,message:"กรุณาเลือกสถานะโต๊ะ"}],children:(0,r.jsxs)(d.default,{size:"large",placeholder:"เลือกสถานะ",children:[r.jsx(d.default.Option,{value:g.c.Available,children:"ว่าง (Available)"}),r.jsx(d.default.Option,{value:g.c.Unavailable,children:"ไม่ว่าง (Unavailable)"})]})}),r.jsx(w,{name:b,status:Z}),r.jsx(s.Z.Item,{name:"is_active",label:"สถานะการใช้งาน",valuePropName:"checked",style:{marginTop:20},children:r.jsx(p.Z,{checkedChildren:"เปิดใช้งาน",unCheckedChildren:"ปิดใช้งาน"})}),r.jsx(P,{isEdit:R,loading:f,onCancel:B})]})})]}):r.jsx(E.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้",tone:"danger"})}},45999:(e,t,a)=>{"use strict";a.d(t,{H:()=>o});var r=a(10326);a(17577);var n=a(58184),s=a(92121);let{Text:i}=n.default,o=({message:e,tone:t="secondary"})=>(0,r.jsxs)("div",{style:{display:"flex",height:"100vh",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:16},children:[r.jsx(s.Z,{size:"large"}),r.jsx(i,{type:t,children:e})]})},31499:(e,t,a)=>{"use strict";a.d(t,{$:()=>i});var r=a(12529);let n=a(40820).q.POS.TABLES,s=(e,t="application/json")=>{let a={};return t&&(a["Content-Type"]=t),e&&(a.Cookie=e),a},i={getAll:async(e,t)=>{let a=(0,r.b)("GET",n),i=new URLSearchParams(t||"");i.has("page")||i.set("page","1"),i.has("limit")||i.set("limit","200");let o=i.toString();o&&(a+=`?${o}`);let l=s(e,""),c=await fetch(a,{cache:"no-store",headers:l,credentials:"include"});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch tables")}return c.json()},getById:async(e,t)=>{let a=(0,r.b)("GET",`${n}/${e}`),i=s(t,""),o=await fetch(a,{cache:"no-store",headers:i,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch tables")}return o.json()},getByName:async(e,t)=>{let a=(0,r.b)("GET",`${n}/getByName/${e}`),i=s(t,""),o=await fetch(a,{cache:"no-store",headers:i,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch tables")}return o.json()},create:async(e,t,a)=>{let i=(0,r.b)("POST",`${n}`),o=s(t);a&&(o["X-CSRF-Token"]=a);let l=await fetch(i,{method:"POST",headers:o,credentials:"include",body:JSON.stringify(e)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to create table")}return l.json()},update:async(e,t,a,i)=>{let o=(0,r.b)("PUT",`${n}/${e}`),l=s(a);i&&(l["X-CSRF-Token"]=i);let c=await fetch(o,{method:"PUT",headers:l,credentials:"include",body:JSON.stringify(t)});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to update table")}return c.json()},delete:async(e,t,a)=>{let i=(0,r.b)("DELETE",`${n}/${e}`),o=s(t,"");a&&(o["X-CSRF-Token"]=a);let l=await fetch(i,{method:"DELETE",headers:o,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to delete table")}}}},31839:(e,t,a)=>{"use strict";a.d(t,{dg:()=>g,oI:()=>m,uM:()=>h});var r=a(10326);a(17577);var n=a(58184),s=a(71935),i=a(30278),o=a(2643),l=a(46024),c=a(90496),d=a(63191);let{Text:p,Title:u}=n.default,g=({focusColor:e,focusShadow:t,switchGradient:a,extraCss:n=""})=>({pageStyles:{container:{paddingBottom:100,backgroundColor:"#f8f9fc",minHeight:"100vh"},header:e=>({background:e?"linear-gradient(135deg, #faad14 0%, #fa8c16 100%)":"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)",padding:"20px 20px 60px 20px",position:"relative",overflow:"hidden"}),headerDecoCircle1:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"rgba(255,255,255,0.1)"},headerDecoCircle2:{position:"absolute",bottom:-30,left:-30,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.08)"},headerContent:{position:"relative",zIndex:1,display:"flex",alignItems:"center",gap:12},headerIconBox:{width:48,height:48,borderRadius:14,background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)"},formCard:{margin:"-40px 16px 0 16px",padding:"24px",background:"white",borderRadius:20,boxShadow:"0 8px 24px rgba(0,0,0,0.08)",position:"relative",zIndex:10},formSection:{marginBottom:20},formLabel:{fontSize:14,fontWeight:600,color:"#1a1a2e",marginBottom:8,display:"block"},actionButtons:{display:"flex",gap:12,marginTop:24,paddingTop:20,borderTop:"1px solid #f0f0f0"}},ManagePageStyles:()=>r.jsx("style",{children:`
        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(12px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .manage-form-card {
            animation: fadeSlideIn 0.4s ease both;
        }

        .manage-page .ant-input,
        .manage-page .ant-input-number,
        .manage-page .ant-select-selector,
        .manage-page .ant-input-affix-wrapper {
            border-radius: 12px !important;
            border: 2px solid #f0f0f0 !important;
            transition: all 0.3s ease !important;
        }

        .manage-page .ant-input:focus,
        .manage-page .ant-input-focused,
        .manage-page .ant-input-number:focus,
        .manage-page .ant-input-number-focused,
        .manage-page .ant-select-focused .ant-select-selector,
        .manage-page .ant-input-affix-wrapper:focus,
        .manage-page .ant-input-affix-wrapper-focused {
            border-color: ${e} !important;
            box-shadow: 0 0 0 3px ${t} !important;
        }

        .manage-page .ant-input-lg,
        .manage-page .ant-select-lg .ant-select-selector {
            padding: 12px 16px !important;
            height: auto !important;
        }

        .manage-page .ant-form-item-label > label {
            font-weight: 600;
            color: #1a1a2e;
            font-size: 14px;
        }

        .manage-page .ant-form-item-required::before {
            display: none !important;
        }

        .manage-page .ant-form-item-required::after {
            content: "*" !important;
            display: inline-block !important;
            color: #ff4d4f !important;
            margin-left: 4px !important;
        }

        .manage-page .ant-switch {
            min-width: 50px;
        }

        .manage-page .ant-switch-checked {
            background: ${a};
        }

        .manage-page textarea.ant-input {
            border-radius: 12px !important;
        }

        .manage-page .ant-input-number-lg {
            width: 100%;
        }

        ${n}
    `})}),h=({pageStyles:e,isEdit:t,loading:a,onCancel:n})=>(0,r.jsxs)("div",{style:e.actionButtons,children:[r.jsx(s.ZP,{size:"large",onClick:n,style:{flex:1,borderRadius:14,height:48},children:"ยกเลิก"}),r.jsx(s.ZP,{type:"primary",htmlType:"submit",size:"large",loading:a,icon:r.jsx(i.Z,{}),style:{flex:2,borderRadius:14,height:48,background:t?"linear-gradient(135deg, #faad14 0%, #fa8c16 100%)":"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)",border:"none",fontWeight:600,boxShadow:t?"0 4px 12px rgba(250, 173, 20, 0.4)":"0 4px 12px rgba(82, 196, 26, 0.4)"},children:t?"อัปเดต":"บันทึก"})]}),m=({pageStyles:e,isEdit:t,onBack:a,onDelete:n,titleCreate:i,titleEdit:g})=>(0,r.jsxs)("div",{style:e.header(t),children:[r.jsx("div",{style:e.headerDecoCircle1}),r.jsx("div",{style:e.headerDecoCircle2}),(0,r.jsxs)("div",{style:e.headerContent,children:[r.jsx(s.ZP,{type:"text",icon:r.jsx(o.Z,{style:{fontSize:20,color:"white"}}),onClick:a,style:{width:40,height:40,borderRadius:12,background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center"}}),r.jsx("div",{style:e.headerIconBox,children:t?r.jsx(l.Z,{style:{fontSize:24,color:"white"}}):r.jsx(c.Z,{style:{fontSize:24,color:"white"}})}),(0,r.jsxs)("div",{style:{flex:1},children:[r.jsx(p,{style:{color:"rgba(255,255,255,0.85)",fontSize:13,display:"block"},children:t?"แก้ไขข้อมูล":"เพิ่มข้อมูลใหม่"}),r.jsx(u,{level:4,style:{color:"white",margin:0,fontWeight:700,letterSpacing:"0.5px"},children:t?g:i})]}),t&&n&&r.jsx(s.ZP,{danger:!0,icon:r.jsx(d.Z,{}),onClick:n,style:{background:"rgba(255,77,79,0.9)",borderColor:"transparent",color:"white",borderRadius:12,height:40,fontWeight:600},children:"ลบ"})]})]})},10985:(e,t,a)=>{"use strict";var r;a.d(t,{c:()=>r}),function(e){e.Available="Available",e.Unavailable="Unavailable"}(r||(r={}))},45207:(e,t,a)=>{"use strict";a.d(t,{e:()=>i});var r=a(17577),n=a(35047),s=a(94001);function i({requiredRole:e="Admin",redirectUnauthenticated:t="/login",redirectUnauthorized:a="/pos",unauthorizedMessage:i="คุณไม่มีสิทธิ์เข้าถึงหน้านี้"}={}){(0,n.useRouter)();let{user:o,loading:l}=(0,s.a)(),c=(0,r.useMemo)(()=>l?"checking":o?e&&o.role!==e?"unauthorized":"authorized":"unauthenticated",[o,l,e]);return(0,r.useRef)(!1),{status:c,isAuthorized:"authorized"===c,isChecking:"checking"===c,user:o}}},45568:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\tables\manager\[...mode]\page.tsx#default`)}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[9276,5898,8571,6927,6857,4300],()=>a(6617));module.exports=r})();