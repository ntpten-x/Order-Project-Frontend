(()=>{var e={};e.id=7322,e.ids=[7322],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},75462:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.Z,__next_app__:()=>u,originalPathname:()=>c,pages:()=>l,routeModule:()=>h,tree:()=>d}),r(75403),r(85429),r(58522),r(61804),r(7629),r(11930),r(12523);var i=r(23191),s=r(88716),n=r(43315),a=r(95231),o={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);r.d(t,o);let d=["",{children:["(main)",{children:["pos",{children:["shift",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,75403)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\shift\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],l=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\shift\\page.tsx"],c="/(main)/pos/shift/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/pos/shift/page",pathname:"/pos/shift",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},11439:(e,t,r)=>{Promise.resolve().then(r.bind(r,14557))},4779:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"};var n=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let o=i.forwardRef((e,t)=>i.createElement(n.Z,a({},e,{ref:t,icon:s})))},8039:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917 211.1l-199.2 24c-6.6.8-9.4 8.9-4.7 13.6l59.3 59.3-226 226-101.8-101.7c-6.3-6.3-16.4-6.2-22.6 0L100.3 754.1a8.03 8.03 0 000 11.3l45 45.2c3.1 3.1 8.2 3.1 11.3 0L433.3 534 535 635.7c6.3 6.2 16.4 6.2 22.6 0L829 364.5l59.3 59.3a8.01 8.01 0 0013.6-4.7l24-199.2c.7-5.1-3.7-9.5-8.9-8.8z"}}]},name:"rise",theme:"outlined"};var n=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let o=i.forwardRef((e,t)=>i.createElement(n.Z,a({},e,{ref:t,icon:s})))},22896:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zm-405.8-201c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.3 0-12.7-6.5-12.7h-55.2c-5.1 0-10 2.5-13 6.6L468.9 542.4l-64.7-89.1z"}}]},name:"safety-certificate",theme:"outlined"};var n=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let o=i.forwardRef((e,t)=>i.createElement(n.Z,a({},e,{ref:t,icon:s})))},40553:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"};var n=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let o=i.forwardRef((e,t)=>i.createElement(n.Z,a({},e,{ref:t,icon:s})))},57289:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 464H528V448h312v128zm0 264H184V184h656v200H496c-17.7 0-32 14.3-32 32v192c0 17.7 14.3 32 32 32h344v200zM580 512a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"wallet",theme:"outlined"};var n=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let o=i.forwardRef((e,t)=>i.createElement(n.Z,a({},e,{ref:t,icon:s})))},38476:function(e){var t;t=function(){"use strict";var e,t,r=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,i=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,s={years:31536e6,months:2628e6,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},n=function(e){return e instanceof u},a=function(e,t,r){return new u(e,r,t.$l)},o=function(e){return t.p(e)+"s"},d=function(e){return e<0},l=function(e){return d(e)?Math.ceil(e):Math.floor(e)},c=function(e,t){return e?d(e)?{negative:!0,format:""+Math.abs(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},u=function(){function d(e,t,r){var n=this;if(this.$d={},this.$l=r,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return a(e*s[o(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach(function(t){n.$d[o(t)]=e[t]}),this.calMilliseconds(),this;if("string"==typeof e){var d=e.match(i);if(d){var l=d.slice(2).map(function(e){return null!=e?Number(e):0});return this.$d.years=l[0],this.$d.months=l[1],this.$d.weeks=l[2],this.$d.days=l[3],this.$d.hours=l[4],this.$d.minutes=l[5],this.$d.seconds=l[6],this.calMilliseconds(),this}}return this}var u=d.prototype;return u.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce(function(t,r){return t+(e.$d[r]||0)*s[r]},0)},u.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=l(e/31536e6),e%=31536e6,this.$d.months=l(e/2628e6),e%=2628e6,this.$d.days=l(e/864e5),e%=864e5,this.$d.hours=l(e/36e5),e%=36e5,this.$d.minutes=l(e/6e4),e%=6e4,this.$d.seconds=l(e/1e3),e%=1e3,this.$d.milliseconds=e},u.toISOString=function(){var e=c(this.$d.years,"Y"),t=c(this.$d.months,"M"),r=+this.$d.days||0;this.$d.weeks&&(r+=7*this.$d.weeks);var i=c(r,"D"),s=c(this.$d.hours,"H"),n=c(this.$d.minutes,"M"),a=this.$d.seconds||0;this.$d.milliseconds&&(a+=this.$d.milliseconds/1e3,a=Math.round(1e3*a)/1e3);var o=c(a,"S"),d=e.negative||t.negative||i.negative||s.negative||n.negative||o.negative,l=s.format||n.format||o.format?"T":"",u=(d?"-":"")+"P"+e.format+t.format+i.format+l+s.format+n.format+o.format;return"P"===u||"-P"===u?"P0D":u},u.toJSON=function(){return this.toISOString()},u.format=function(e){var i={Y:this.$d.years,YY:t.s(this.$d.years,2,"0"),YYYY:t.s(this.$d.years,4,"0"),M:this.$d.months,MM:t.s(this.$d.months,2,"0"),D:this.$d.days,DD:t.s(this.$d.days,2,"0"),H:this.$d.hours,HH:t.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:t.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:t.s(this.$d.seconds,2,"0"),SSS:t.s(this.$d.milliseconds,3,"0")};return(e||"YYYY-MM-DDTHH:mm:ss").replace(r,function(e,t){return t||String(i[e])})},u.as=function(e){return this.$ms/s[o(e)]},u.get=function(e){var t=this.$ms,r=o(e);return"milliseconds"===r?t%=1e3:t="weeks"===r?l(t/s[r]):this.$d[r],t||0},u.add=function(e,t,r){var i;return i=t?e*s[o(t)]:n(e)?e.$ms:a(e,this).$ms,a(this.$ms+i*(r?-1:1),this)},u.subtract=function(e,t){return this.add(e,t,!0)},u.locale=function(e){var t=this.clone();return t.$l=e,t},u.clone=function(){return a(this.$ms,this)},u.humanize=function(t){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},u.valueOf=function(){return this.asMilliseconds()},u.milliseconds=function(){return this.get("milliseconds")},u.asMilliseconds=function(){return this.as("milliseconds")},u.seconds=function(){return this.get("seconds")},u.asSeconds=function(){return this.as("seconds")},u.minutes=function(){return this.get("minutes")},u.asMinutes=function(){return this.as("minutes")},u.hours=function(){return this.get("hours")},u.asHours=function(){return this.as("hours")},u.days=function(){return this.get("days")},u.asDays=function(){return this.as("days")},u.weeks=function(){return this.get("weeks")},u.asWeeks=function(){return this.as("weeks")},u.months=function(){return this.get("months")},u.asMonths=function(){return this.as("months")},u.years=function(){return this.get("years")},u.asYears=function(){return this.as("years")},d}(),h=function(e,t,r){return e.add(t.years()*r,"y").add(t.months()*r,"M").add(t.days()*r,"d").add(t.hours()*r,"h").add(t.minutes()*r,"m").add(t.seconds()*r,"s").add(t.milliseconds()*r,"ms")};return function(r,i,s){e=s,t=s().$utils(),s.duration=function(e,t){return a(e,{$l:s.locale()},t)},s.isDuration=n;var o=i.prototype.add,d=i.prototype.subtract;i.prototype.add=function(e,t){return n(e)?h(this,e,1):o.bind(this)(e,t)},i.prototype.subtract=function(e,t){return n(e)?h(this,e,-1):d.bind(this)(e,t)}}},e.exports=t()},14557:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var i=r(10326),s=r(17577),n=r(44976),a=r(20108),o=r(66874),d=r(92121),l=r(64635),c=r(71935),u=r(56249),h=r(61357),p=r(22817),m=r(80490),g=r(4779),f=r(64732),x=r(40553),y=r(8039),b=r(9297),v=r(57289),j=r(22896),F=r(35047),$=r(88295),k=r.n($),w=r(38476),B=r.n(w);r(63699);var Z=r(80440),S=r(94001),C=r(7670),P=r(94658);r(83179);var M=r(26902),E=r(60372),_=r(60920),D=r(26963),O=r(76892),R=r(18978),L=r(52647),z=r(36231);let H={container:{paddingBottom:100,backgroundColor:r(93922).X1.background,minHeight:"100vh",fontFamily:"var(--font-sans), 'Sarabun', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"},header:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",padding:"16px 16px 48px 16px",position:"relative",overflow:"hidden",borderBottomLeftRadius:20,borderBottomRightRadius:20,boxShadow:"0 4px 16px rgba(16, 185, 129, 0.2)"},headerDecoCircle1:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"rgba(255,255,255,0.1)"},headerDecoCircle2:{position:"absolute",bottom:-30,left:-30,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.08)"},headerContent:{position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:1200,margin:"0 auto"},headerLeft:{display:"flex",alignItems:"center",gap:16},headerIconBox:{width:56,height:56,borderRadius:16,background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},headerTitleBox:{display:"flex",flexDirection:"column"},headerTitle:{color:"white",fontSize:24,margin:0,fontWeight:700,letterSpacing:"0.5px",lineHeight:1.2},headerSubtitle:{color:"rgba(255,255,255,0.9)",fontSize:14,display:"block"},contentContainer:{maxWidth:1200,margin:"0 auto",padding:"0 24px",position:"relative",zIndex:10},card:{borderRadius:24,border:"none",boxShadow:"0 10px 25px rgba(0,0,0,0.05)",background:"white",overflow:"hidden",height:"100%"},activeShiftCard:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",textAlign:"center",padding:"40px 24px",position:"relative",overflow:"hidden"},summaryCard:{background:"white",padding:"24px"},statisticValue:e=>({color:e,fontWeight:600}),noShiftCard:{textAlign:"center",padding:"60px 20px",background:"rgba(255,255,255,0.8)",backdropFilter:"blur(10px)",borderRadius:24,border:"1px dashed #d9d9d9"},sectionDivider:{margin:"24px 0"},trendUp:{color:"#52c41a"},trendDown:{color:"#ff4d4f"}},q=`
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .pulse-animation {
        animation: pulse 2s infinite ease-in-out;
    }

    .shift-card-animate {
        animation: fadeInUp 0.5s ease forwards;
        opacity: 0;
    }

    .shift-card-delay-1 { animation-delay: 0.1s; }
    .shift-card-delay-2 { animation-delay: 0.2s; }
    
    .shift-modal .ant-modal-content {
        border-radius: 20px;
        overflow: hidden;
    }
    
    .shift-modal .ant-modal-header {
        background: transparent;
    }

    .stat-card-inner {
        transition: all 0.3s ease;
        padding: 16px;
        border-radius: 16px;
        background: #f8fafc;
    }
    
    .stat-card-inner:hover {
        background: #f1f5f9;
        transform: translateY(-2px);
    }

    /* Mobile-first responsive */
    .shift-header-mobile {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 16px !important;
    }

    .shift-content-mobile {
        padding: 0 16px !important;
    }

    .shift-stat-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
    }

    @media (max-width: 576px) {
        .shift-header-mobile {
            padding: 16px 16px 40px !important;
        }

        .shift-stat-grid {
            grid-template-columns: 1fr;
        }

        .shift-action-btn {
            width: 100% !important;
            height: 52px !important;
            font-size: 16px !important;
        }

        .shift-modal .ant-modal {
            max-width: calc(100vw - 32px) !important;
            margin: 16px !important;
        }
    }

    @media (min-width: 768px) {
        .shift-stat-grid {
            grid-template-columns: repeat(3, 1fr);
        }
    }

    @media (min-width: 1024px) {
        .shift-stat-grid {
            grid-template-columns: repeat(4, 1fr);
        }
    }

    /* Touch-friendly */
    .shift-action-btn {
        -webkit-tap-highlight-color: rgba(16, 185, 129, 0.1);
        touch-action: manipulation;
    }
`;k().extend(B()),k().locale("th");let{Title:Y,Text:A}=o.default,I=e=>Number(e||0);function T(){let e=(0,F.useRouter)();(0,n.NL)();let{user:t}=(0,S.a)(),{socket:r}=(0,Z.s)(),{isAuthorized:o,isChecking:$}=(0,C.e)({allowedRoles:["Admin","Manager","Employee"]}),[w,B]=(0,s.useState)(!1),[T,V]=(0,s.useState)(!1),{data:N=null,isLoading:U,refetch:X}=(0,a.a)({queryKey:["shiftCurrent"],queryFn:async()=>P.t.getCurrentShift(),staleTime:2e3}),{data:J,isLoading:K,refetch:Q}=(0,a.a)({queryKey:["shiftSummary",N?.id||"none"],queryFn:async()=>await P.t.getCurrentSummary(),enabled:!!N,staleTime:2e3}),ee=U||!!N&&K,et=!!N&&!!t&&("Admin"===t.role||"Manager"===t.role||N.opened_by_user_id===t.id||!N.opened_by_user_id&&N.user_id===t.id),er=async()=>{await X(),N&&await Q()},ei=(0,s.useMemo)(()=>{if(!N)return"-";let e=k().duration(k()().diff(k()(N.open_time))),t=Math.floor(e.asHours()),r=e.minutes();return`${t} ชม. ${r} นาที`},[N]),es=N?J:null,en=I(es?.summary?.total_sales),ea=I(es?.summary?.net_profit),eo=I(es?.shift_info?.start_amount??N?.start_amount),ed=I(es?.shift_info?.end_amount??N?.end_amount),el=I(es?.shift_info?.expected_amount??N?.expected_amount),ec=I(es?.shift_info?.diff_amount??N?.diff_amount),eu=es?.summary?.payment_methods||{},eh=Object.entries(eu).reduce((e,[t,r])=>t.toLowerCase().includes("cash")||t.includes("เงินสด")?e+I(r):e,0);return $?i.jsx(M.H,{message:"กำลังตรวจสอบสิทธิ์การใช้งาน..."}):o?ee?(0,i.jsxs)("div",{style:H.container,children:[i.jsx("style",{children:q}),i.jsx(L.Z,{title:"กะการทำงาน",subtitle:"กำลังโหลดข้อมูล...",icon:i.jsx(p.Z,{}),onBack:()=>e.back()}),i.jsx(D.Z,{children:i.jsx(O.Z,{children:i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"64px 0"},children:i.jsx(d.Z,{size:"large"})})})})]}):(0,i.jsxs)("div",{style:H.container,children:[i.jsx("style",{children:q}),i.jsx(L.Z,{title:"กะการทำงาน",subtitle:N?`เปิดกะเมื่อ ${k()(N.open_time).format("DD/MM/YYYY HH:mm")} น.`:"ยังไม่เปิดกะ",icon:i.jsx(p.Z,{}),onBack:()=>e.back(),actions:(0,i.jsxs)(l.Z,{size:8,children:[i.jsx(c.ZP,{icon:i.jsx(m.Z,{}),onClick:er}),i.jsx(c.ZP,{icon:i.jsx(g.Z,{}),onClick:()=>e.push("/pos/shiftHistory"),children:"ประวัติกะ"}),N?et?i.jsx(c.ZP,{danger:!0,icon:i.jsx(x.Z,{}),onClick:()=>V(!0),children:"ปิดกะ"}):null:i.jsx(c.ZP,{type:"primary",icon:i.jsx(f.Z,{}),onClick:()=>B(!0),children:"เปิดกะ"})]})}),i.jsx(D.Z,{children:i.jsx(R.Z,{children:N?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(O.Z,{title:"สถานะกะปัจจุบัน",children:[(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12},children:[(0,i.jsxs)(u.Z,{size:"small",style:{borderRadius:14},children:[i.jsx(A,{type:"secondary",children:"สถานะ"}),i.jsx("div",{style:{marginTop:6},children:i.jsx(h.Z,{color:"success",style:{borderRadius:6},children:"เปิดกะอยู่"})})]}),(0,i.jsxs)(u.Z,{size:"small",style:{borderRadius:14},children:[i.jsx(A,{type:"secondary",children:"ระยะเวลากะ"}),i.jsx(Y,{level:5,style:{margin:"6px 0 0"},children:ei})]}),(0,i.jsxs)(u.Z,{size:"small",style:{borderRadius:14},children:[i.jsx(A,{type:"secondary",children:"ผู้เปิดกะ"}),i.jsx(Y,{level:5,style:{margin:"6px 0 0"},children:N.user?.display_name||N.user?.username||"-"})]}),(0,i.jsxs)(u.Z,{size:"small",style:{borderRadius:14},children:[i.jsx(A,{type:"secondary",children:"เวลาเปิดกะ"}),(0,i.jsxs)(Y,{level:5,style:{margin:"6px 0 0"},children:[k()(N.open_time).format("DD/MM/YYYY HH:mm")," น."]})]})]}),et?null:i.jsx(G,{text:"คุณไม่มีสิทธิ์ปิดกะนี้ (เฉพาะ Admin/Manager หรือผู้เปิดกะ)"})]}),i.jsx(O.Z,{title:"สรุปยอดกะปัจจุบัน",children:es?(0,i.jsxs)("div",{style:{display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[i.jsx(W,{icon:i.jsx(y.Z,{}),label:"ยอดขายรวม",value:`฿${en.toLocaleString()}`,color:"#10b981"}),i.jsx(W,{icon:i.jsx(b.Z,{}),label:"กำไรสุทธิ",value:`฿${ea.toLocaleString()}`,color:"#0ea5e9"}),i.jsx(W,{icon:i.jsx(v.Z,{}),label:"เงินทอนเริ่มต้น",value:`฿${eo.toLocaleString()}`,color:"#f59e0b"}),i.jsx(W,{icon:i.jsx(j.Z,{}),label:"เงินสดในลิ้นชัก",value:`฿${(eo+eh).toLocaleString()}`,color:"#7c3aed"}),i.jsx(W,{icon:i.jsx(j.Z,{}),label:"ยอดคาดหวังปิดกะ",value:`฿${el.toLocaleString()}`,color:"#334155"}),i.jsx(W,{icon:i.jsx(j.Z,{}),label:"ผลต่างปิดกะ",value:`฿${ec.toLocaleString()}`,color:ec>=0?"#059669":"#dc2626"}),i.jsx(W,{icon:i.jsx(v.Z,{}),label:"ยอดนับจริงล่าสุด",value:ed>0?`฿${ed.toLocaleString()}`:"-",color:"#64748b"})]}):i.jsx("div",{style:{padding:"24px 0",textAlign:"center"},children:i.jsx(d.Z,{})})}),i.jsx(O.Z,{title:"รายละเอียดวิธีชำระเงิน",children:Object.keys(eu).length>0?i.jsx("div",{style:{display:"grid",gap:10,gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"},children:Object.entries(eu).map(([e,t])=>(0,i.jsxs)(u.Z,{size:"small",style:{borderRadius:12},children:[i.jsx(A,{type:"secondary",children:e}),(0,i.jsxs)(Y,{level:5,style:{margin:"6px 0 0"},children:["฿",I(t).toLocaleString()]})]},e))}):i.jsx(A,{type:"secondary",children:"ยังไม่มีข้อมูลวิธีชำระเงินในกะนี้"})}),i.jsx(O.Z,{title:"สินค้าขายดี",children:es?.top_products?.length?i.jsx("div",{style:{display:"grid",gap:10},children:es.top_products.slice(0,5).map((e,t)=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e2e8f0",borderRadius:12,padding:"10px 12px"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[i.jsx("div",{style:{width:26,height:26,borderRadius:"50%",background:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:700,color:"#475569"},children:t+1}),(0,i.jsxs)("div",{children:[i.jsx(A,{strong:!0,children:e.name}),(0,i.jsxs)(A,{type:"secondary",style:{display:"block",fontSize:12},children:["จำนวน ",e.quantity," ",e.unit||"หน่วย"]})]})]}),(0,i.jsxs)(A,{strong:!0,children:["฿",I(e.revenue).toLocaleString()]})]},`${e.id}-${t}`))}):i.jsx(A,{type:"secondary",children:"ยังไม่มีข้อมูลสินค้าขายดีในกะนี้"})})]}):i.jsx(O.Z,{children:i.jsx(z.Z,{title:"ยังไม่มีกะที่เปิดใช้งาน",description:"กรุณาเปิดกะเพื่อเริ่มต้นการขายและบันทึกสรุปรายวัน",action:i.jsx(c.ZP,{type:"primary",icon:i.jsx(f.Z,{}),onClick:()=>B(!0),children:"เปิดกะการทำงาน"})})})})}),i.jsx(E.Z,{open:w,onCancel:()=>B(!1)}),i.jsx(_.Z,{open:T,onCancel:()=>V(!1),onSuccess:()=>V(!1)})]}):i.jsx(M.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้",tone:"danger"})}function W({icon:e,label:t,value:r,color:s}){return(0,i.jsxs)(u.Z,{size:"small",style:{borderRadius:14},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6,color:s},children:[e,i.jsx(A,{type:"secondary",children:t})]}),i.jsx(Y,{level:4,style:{margin:0,color:s},children:r})]})}function G({text:e}){return i.jsx("div",{style:{marginTop:12,borderRadius:10,border:"1px solid #fecaca",background:"#fef2f2",padding:"10px 12px"},children:i.jsx(A,{style:{color:"#b91c1c"},children:e})})}},18978:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(10326);r(17577);var s=r(21020),n=r(52386);function a({children:e,gap:t=n.H.sectionGap,style:r}){return i.jsx(s.Z,{vertical:!0,gap:t,style:r,children:e})}},36231:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(10326);r(17577);var s=r(56249),n=r(75698),a=r(66874),o=r(52386);function d({title:e="ไม่มีข้อมูล",description:t,action:r,image:d}){return i.jsx(s.Z,{size:"small",variant:"outlined",style:{borderRadius:o.H.cardRadiusLG},bodyStyle:{padding:20},children:i.jsx(n.Z,{image:d,description:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[i.jsx(a.default.Text,{strong:!0,children:e}),t?i.jsx(a.default.Text,{type:"secondary",children:t}):null]}),children:r})})}},80440:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});var i=r(17577),s=r(19211);let n=()=>(0,i.useContext)(s.J)},93922:(e,t,r)=>{"use strict";r.d(t,{Np:()=>a,X1:()=>i,ax:()=>n,hS:()=>s});let i={primary:"#6366F1",primaryLight:"#EEF2FF",primaryDark:"#4F46E5",success:"#10B981",successLight:"#ECFDF5",warning:"#F59E0B",warningLight:"#FFFBEB",error:"#EF4444",errorLight:"#FEF2F2",info:"#3B82F6",infoLight:"#EFF6FF",background:"#F8FAFC",cardBg:"#FFFFFF",border:"#E2E8F0",borderLight:"#F1F5F9",text:"#1E293B",textSecondary:"#64748B",textMuted:"#94A3B8",textInverse:"#FFFFFF",dineIn:"#3B82F6",takeaway:"#10B981",delivery:"#8B5CF6",kitchen:"#F97316",shift:"#10B981",kitchenBg:"#0F172A",kitchenCard:"rgba(30, 41, 59, 0.8)",kitchenBorder:"rgba(255, 255, 255, 0.1)"},s={dineIn:{primary:"#3B82F6",light:"#EFF6FF",border:"#BFDBFE",gradient:"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)",iconBg:"rgba(59, 130, 246, 0.1)"},takeaway:{primary:"#10B981",light:"#ECFDF5",border:"#A7F3D0",gradient:"linear-gradient(135deg, #10B981 0%, #059669 100%)",iconBg:"rgba(16, 185, 129, 0.1)"},delivery:{primary:"#8B5CF6",light:"#F5F3FF",border:"#DDD6FE",gradient:"linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%)",iconBg:"rgba(139, 92, 246, 0.1)"}},n={available:{primary:"#10B981",light:"#ECFDF5",border:"#A7F3D0",gradient:"linear-gradient(135deg, #10B981 0%, #059669 100%)",text:"#065F46"},occupied:{primary:"#F59E0B",light:"#FFFBEB",border:"#FCD34D",gradient:"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)",text:"#92400E"},inactive:{primary:"#94A3B8",light:"#F8FAFC",border:"#CBD5E1",gradient:"linear-gradient(135deg, #94A3B8 0%, #64748B 100%)",text:"#475569"},waitingForPayment:{primary:"#3B82F6",light:"#EFF6FF",border:"#BFDBFE",gradient:"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)",text:"#1E40AF"}},a={container:{minHeight:"100vh",background:i.background,fontFamily:"var(--font-sans), 'Sarabun', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",paddingBottom:100},header:{background:`linear-gradient(135deg, ${i.primary} 0%, ${i.primaryDark} 100%)`,padding:"16px 16px 48px",position:"relative",borderBottomLeftRadius:20,borderBottomRightRadius:20,overflow:"hidden"},heroHeader:{background:`linear-gradient(135deg, ${i.primary} 0%, ${i.primaryDark} 100%)`,padding:"24px 20px 56px",position:"relative",borderBottomLeftRadius:24,borderBottomRightRadius:24,boxShadow:"0 4px 20px rgba(99, 102, 241, 0.2)",marginBottom:-40,zIndex:1,overflow:"hidden"},contentWrapper:{maxWidth:1200,margin:"-32px auto 0",padding:"0 16px",position:"relative",zIndex:10},card:{borderRadius:16,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",border:`1px solid ${i.border}`,overflow:"hidden",background:i.cardBg},itemCard:{marginBottom:8,borderRadius:12,border:`1px solid ${i.borderLight}`,transition:"all 0.2s ease",background:i.cardBg},kitchenContainer:{minHeight:"100vh",background:i.kitchenBg,padding:"16px 16px 100px",color:"#F8FAFC",fontFamily:"var(--font-sans), 'Sarabun', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"},kitchenGlassCard:{background:i.kitchenCard,backdropFilter:"blur(12px)",border:`1px solid ${i.kitchenBorder}`,borderRadius:16,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",overflow:"hidden"},kitchenHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20,flexWrap:"wrap",gap:12},sectionTitle:{display:"flex",alignItems:"center",gap:10,marginBottom:16,fontSize:16,fontWeight:600,color:i.text}}},75403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\shift\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[9276,4421,8571,8842,108,8963,1399,4658,3597],()=>r(75462));module.exports=i})();