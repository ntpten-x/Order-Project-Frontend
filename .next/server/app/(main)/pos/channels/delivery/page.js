(()=>{var e={};e.id=3859,e.ids=[3859],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},11970:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.Z,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>m,tree:()=>l}),t(14716),t(85429),t(58522),t(61804),t(7629),t(11930),t(12523);var s=t(23191),a=t(88716),o=t(43315),i=t(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(r,n);let l=["",{children:["(main)",{children:["pos",{children:["channels",{children:["delivery",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,14716)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\delivery\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\delivery\\page.tsx"],c="/(main)/pos/channels/delivery/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/pos/channels/delivery/page",pathname:"/pos/channels/delivery",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},9337:(e,r,t)=>{Promise.resolve().then(t.bind(t,56454))},16185:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n});var s=t(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"};var o=t(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e}).apply(this,arguments)}let n=s.forwardRef((e,r)=>s.createElement(o.Z,i({},e,{ref:r,icon:a})))},56454:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>K});var s=t(10326),a=t(77626),o=t.n(a),i=t(17577),n=t(35047),l=t(66874),d=t(46752),c=t(64635),p=t(61357),m=t(71935),x=t(4139),y=t(38106),u=t(75958),h=t(91259),f=t(49909),v=t(16185),g=t(72380),j=t(22817),b=t(26963),P=t(76892),w=t(52647),k=t(36231),z=t(41096),S=t(60578),Z=t(44976),N=t(20108),_=t(19211),C=t(12529),q=t(40820),E=t(40577);let O=q.q.POS.DELIVERY,F=(e,r="application/json")=>{let t={};return r&&(t["Content-Type"]=r),e&&(t.Cookie=e),t},R={getAll:async(e,r)=>{let t=(0,C.b)("GET",O),s=new URLSearchParams(r||"");s.has("page")||s.set("page","1"),s.has("limit")||s.set("limit","200");let a=s.toString();a&&(t+=`?${a}`);let o=F(e,""),i=await fetch(t,{cache:"no-store",headers:o,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e?.error?.message||e.error||e.message||"Failed to fetch delivery providers")}return(0,E.XO)(await i.json())}};t(83179);var B=t(13976),M=t(93922),$=t(79e3),A=t(15051),T=t(2504),D=t(95963),H=t(37938),I=t(45317),L=t(88295),V=t.n(L),W=t(62989),G=t.n(W);t(63699);let{Text:Y}=l.default;function K(){let e=(0,n.useRouter)(),{showLoading:r,hideLoading:t}=(0,H.x)(),{deliveryProviders:a,isLoading:l,isError:C,mutate:q}=function(){let{socket:e}=(0,i.useContext)(_.J);(0,Z.NL)();let{data:r,error:t,isLoading:s,refetch:a}=(0,N.a)({queryKey:["delivery"],queryFn:async()=>(await R.getAll()).data,staleTime:5e3});return{deliveryProviders:r||[],isLoading:s,isError:t,mutate:a}}(),{orders:E,isLoading:O}=(0,I.w)({orderType:B.m.Delivery}),[F,L]=(0,i.useState)(!1),W=(0,i.useMemo)(()=>(0,T.Do)(E),[E]),[G,K]=(0,i.useState)(""),[U,X]=(0,i.useState)(null),J=(0,i.useMemo)(()=>a.find(e=>e.id===U),[a,U]),Q=r=>{let t=(0,D.M9)(r);e.push(t)},ee=()=>{K(""),X(null),L(!0)},er=()=>{if(!U){d.ZP.error("กรุณาเลือกผู้ให้บริการ");return}if(!G.trim()){d.ZP.error("กรุณากรอกรหัสออเดอร์");return}r("กำลังเข้าสู่หน้าออเดอร์...");let t=G.trim();J?.delivery_prefix&&(t=`${J.delivery_prefix}-${t}`),e.push(`/pos/channels/delivery/${U}?code=${encodeURIComponent(t)}`)},et=e=>{switch(e){case"available":return"success";case"occupied":return"orange";case"waitingForPayment":return"blue";default:return"default"}};return(0,s.jsxs)(s.Fragment,{children:[s.jsx(A.c,{}),s.jsx(o(),{id:$.N5.__hash,children:$.N5}),s.jsx(o(),{id:"c1ca8602d2ef2218",children:".order-card-hover{-webkit-transition:all.3s cubic-bezier(.4,0,.2,1)!important;-moz-transition:all.3s cubic-bezier(.4,0,.2,1)!important;-o-transition:all.3s cubic-bezier(.4,0,.2,1)!important;transition:all.3s cubic-bezier(.4,0,.2,1)!important}.order-card-hover:hover{-webkit-transform:translatey(-4px)!important;-moz-transform:translatey(-4px)!important;-ms-transform:translatey(-4px)!important;-o-transform:translatey(-4px)!important;transform:translatey(-4px)!important;-webkit-box-shadow:0 12px 28px rgba(0,0,0,.1)!important;-moz-box-shadow:0 12px 28px rgba(0,0,0,.1)!important;box-shadow:0 12px 28px rgba(0,0,0,.1)!important}.order-card-hover:active{-webkit-transform:translatey(-2px)scale(.99)!important;-moz-transform:translatey(-2px)scale(.99)!important;-ms-transform:translatey(-2px)scale(.99)!important;-o-transform:translatey(-2px)scale(.99)!important;transform:translatey(-2px)scale(.99)!important}@media(hover:none){.order-card-hover:active{-webkit-transform:scale(.98)!important;-moz-transform:scale(.98)!important;-ms-transform:scale(.98)!important;-o-transform:scale(.98)!important;transform:scale(.98)!important}.order-card-hover:hover{-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important}}.back-button-hover:hover{background:rgba(255,255,255,.28)!important;-webkit-transform:translatex(-2px);-moz-transform:translatex(-2px);-ms-transform:translatex(-2px);-o-transform:translatex(-2px);transform:translatex(-2px)}.add-button-hover:hover{-webkit-transform:translatey(-2px)!important;-moz-transform:translatey(-2px)!important;-ms-transform:translatey(-2px)!important;-o-transform:translatey(-2px)!important;transform:translatey(-2px)!important;-webkit-box-shadow:0 12px 24px rgba(139,92,246,.35)!important;-moz-box-shadow:0 12px 24px rgba(139,92,246,.35)!important;box-shadow:0 12px 24px rgba(139,92,246,.35)!important}.add-button-hover:active{-webkit-transform:scale(.98)!important;-moz-transform:scale(.98)!important;-ms-transform:scale(.98)!important;-o-transform:scale(.98)!important;transform:scale(.98)!important}.hide-on-mobile{display:inline!important}.show-on-mobile-inline{display:none!important}@media(max-width:768px){.hide-on-mobile{display:none!important}.show-on-mobile-inline{display:inline!important}}.delivery-modal .ant-modal-content{-webkit-border-radius:20px!important;-moz-border-radius:20px!important;border-radius:20px!important;overflow:hidden}.delivery-modal .ant-modal-header{padding:20px 24px 16px!important;border-bottom:1px solid#f0f0f0!important}.delivery-modal .ant-modal-body{padding:24px!important}.delivery-modal .ant-modal-footer{padding:16px 24px 20px!important;border-top:1px solid#f0f0f0!important}"}),(0,s.jsxs)("div",{style:M.Np.container,className:"jsx-c1ca8602d2ef2218",children:[s.jsx(w.Z,{title:"เดลิเวอรี่",subtitle:(0,s.jsxs)(c.Z,{size:8,wrap:!0,children:[(0,s.jsxs)(p.Z,{children:["ทั้งหมด ",W.total]}),(0,s.jsxs)(p.Z,{color:"orange",children:["กำลังปรุง ",W.cooking]})]}),onBack:()=>{e.push("/pos/channels")},icon:s.jsx(v.Z,{style:{fontSize:20}}),actions:s.jsx(m.ZP,{type:"primary",icon:s.jsx(g.Z,{}),onClick:ee,children:"เพิ่มออเดอร์"})}),s.jsx(b.Z,{children:C?s.jsx(z.Z,{status:"error",title:(0,S.t)("page.error"),onRetry:()=>q()}):l||0!==a.length?s.jsx(P.Z,{title:"ออเดอร์",children:E.length>0?s.jsx(x.Z,{gutter:[16,16],children:E.map((e,r)=>{let t=(0,T.Yx)(e),o=M.ax[t],i=a.find(r=>r.id===e.delivery_id),n=e.delivery_code||e.order_no.split("-").pop();return s.jsx(y.Z,{xs:24,sm:12,md:8,lg:6,xl:6,className:"delivery-order-col-mobile",children:(0,s.jsxs)("article",{style:{...$.yy.orderCard,border:`1.5px solid ${o.border}`},onClick:()=>Q(e),onKeyDown:r=>{("Enter"===r.key||" "===r.key)&&(r.preventDefault(),Q(e))},role:"button",tabIndex:0,"aria-label":`ออเดอร์ ${n} - ${(0,T.NE)(e.status)}`,className:`jsx-c1ca8602d2ef2218 order-card-hover delivery-order-card table-card-animate table-card-delay-${r%6+1}`,children:[(0,s.jsxs)("div",{style:{...$.yy.orderCardHeader,background:o.light},className:"jsx-c1ca8602d2ef2218",children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},className:"jsx-c1ca8602d2ef2218",children:[s.jsx("div",{style:{width:40,height:40,borderRadius:12,background:`${o.primary}20`,display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-c1ca8602d2ef2218",children:s.jsx(v.Z,{style:{color:o.primary,fontSize:20}})}),(0,s.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[s.jsx(Y,{strong:!0,style:{fontSize:16,color:"#1E293B",display:"block",lineHeight:1.2},children:n}),s.jsx(Y,{type:"secondary",style:{fontSize:11},children:i?.delivery_name||"Delivery"})]})]}),s.jsx(p.Z,{color:et(t),style:{borderRadius:8,margin:0,fontWeight:600,border:"none",padding:"4px 12px"},children:(0,T.NE)(e.status)})]}),s.jsx("div",{style:$.yy.orderCardContent,className:"jsx-c1ca8602d2ef2218",children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},className:"jsx-c1ca8602d2ef2218",children:[(0,s.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[s.jsx(Y,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:4},children:"รายการสินค้า"}),(0,s.jsxs)(Y,{strong:!0,style:{fontSize:16},children:[e.items_count||0," รายการ"]})]}),(0,s.jsxs)("div",{style:{textAlign:"right"},className:"jsx-c1ca8602d2ef2218",children:[s.jsx(Y,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:4},children:"ยอดรวม"}),(0,s.jsxs)(Y,{strong:!0,style:{fontSize:20,color:o.primary},children:["฿",e.total_amount?.toLocaleString()]})]})]})}),(0,s.jsxs)("div",{style:$.yy.orderCardFooter,className:"jsx-c1ca8602d2ef2218",children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},className:"jsx-c1ca8602d2ef2218",children:[s.jsx(j.Z,{style:{fontSize:12,color:"#94A3B8"}}),s.jsx(Y,{type:"secondary",style:{fontSize:12},children:V()(e.create_date).fromNow()})]}),s.jsx(p.Z,{style:{margin:0,borderRadius:6,background:M.hS.delivery.light,color:M.hS.delivery.primary,border:`1px solid ${M.hS.delivery.border}`,fontSize:11,fontWeight:600},children:"Delivery"})]})]})},e.id)})}):s.jsx(k.Z,{title:(0,S.t)("delivery.noOrders"),description:"เริ่มรับออเดอร์โดยกดปุ่ม “เพิ่มออเดอร์”",action:s.jsx(m.ZP,{type:"primary",icon:s.jsx(g.Z,{}),onClick:ee,children:(0,S.t)("delivery.createNewOrder")})})}):s.jsx(z.Z,{status:"empty",title:(0,S.t)("delivery.noProviders"),action:s.jsx(m.ZP,{onClick:()=>q(),children:(0,S.t)("delivery.retry")})})}),s.jsx(u.Z,{title:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},className:"jsx-c1ca8602d2ef2218",children:[s.jsx("div",{style:{width:40,height:40,borderRadius:12,background:M.hS.delivery.light,display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-c1ca8602d2ef2218",children:s.jsx(v.Z,{style:{color:M.hS.delivery.primary,fontSize:20}})}),(0,s.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[s.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#1E293B"},className:"jsx-c1ca8602d2ef2218",children:(0,S.t)("delivery.createOrder")}),s.jsx("div",{style:{fontSize:13,fontWeight:400,color:"#94A3B8"},className:"jsx-c1ca8602d2ef2218",children:(0,S.t)("delivery.createOrderSubtitle")})]})]}),open:F,onOk:er,onCancel:()=>L(!1),okText:"ยืนยัน",cancelText:"ยกเลิก",centered:!0,className:"delivery-modal",okButtonProps:{style:{background:M.hS.delivery.primary,borderColor:M.hS.delivery.primary,height:44,borderRadius:12,fontWeight:600,padding:"0 24px"},disabled:l||!U||!G.trim()},cancelButtonProps:{style:{height:44,borderRadius:12,fontWeight:600,padding:"0 24px"}},children:(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:20},className:"jsx-c1ca8602d2ef2218",children:[(0,s.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[s.jsx(Y,{strong:!0,style:{display:"block",marginBottom:8,fontSize:14,color:"#475569"},children:(0,S.t)("delivery.selectProvider")}),s.jsx(h.default,{placeholder:(0,S.t)("delivery.selectProviderPlaceholder"),style:{width:"100%"},size:"large",value:U,onChange:X,options:a.map(e=>({label:e.delivery_name,value:e.id})),loading:l,dropdownStyle:{borderRadius:12,padding:8},dropdownMatchSelectWidth:!0,getPopupContainer:e=>e?.closest(".delivery-modal")||e?.parentElement||document.body,notFoundContent:l?(0,S.t)("delivery.loadingOrders"):(0,S.t)("delivery.noProviders")})]}),(0,s.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[s.jsx(Y,{strong:!0,style:{display:"block",marginBottom:8,fontSize:14,color:"#475569"},children:(0,S.t)("delivery.orderCode")}),s.jsx(f.default,{placeholder:(0,S.t)("delivery.enterOrderCode"),addonBefore:J?.delivery_prefix?`${J.delivery_prefix}-`:void 0,value:G,onChange:e=>K(e.target.value),size:"large",onPressEnter:er,style:{borderRadius:8}})]})]})})]})]})}V().extend(G()),V().locale("th")},41096:(e,r,t)=>{"use strict";t.d(r,{Z:()=>m});var s=t(10326);t(17577);var a=t(66874),o=t(21020),i=t(92121),n=t(22327),l=t(71935),d=t(52386),c=t(60578);let{Text:p}=a.default;function m({status:e,title:r,description:t,onRetry:a,action:m,style:x}){return"loading"===e?(0,s.jsxs)(o.Z,{align:"center",justify:"center",style:{minHeight:200,...x,gap:12},children:[s.jsx(i.Z,{size:"large"}),s.jsx(p,{type:"secondary",children:r||(0,c.t)("network.loading")})]}):"error"===e?s.jsx(n.ZP,{status:"error",title:r||(0,c.t)("page.error"),subTitle:t,extra:m||(a?s.jsx(l.ZP,{type:"primary",onClick:a,children:(0,c.t)("page.retry")}):void 0),style:{padding:d.H.pagePaddingY,...x}}):s.jsx(n.ZP,{status:"info",title:r||(0,c.t)("page.empty"),subTitle:t,extra:m,style:{padding:d.H.pagePaddingY,...x}})}},14716:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\channels\delivery\page.tsx#default`)}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[9276,4421,8571,1742,108,2514,8963,1399,4658,1587,9537],()=>t(11970));module.exports=s})();