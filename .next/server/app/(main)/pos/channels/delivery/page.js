(()=>{var e={};e.id=3859,e.ids=[3859],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},11970:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.Z,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>m,tree:()=>l}),t(14716),t(85429),t(58522),t(61804),t(7629),t(11930),t(12523);var a=t(23191),s=t(88716),n=t(43315),i=t(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(r,o);let l=["",{children:["(main)",{children:["pos",{children:["channels",{children:["delivery",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,14716)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\delivery\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\delivery\\page.tsx"],c="/(main)/pos/channels/delivery/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/pos/channels/delivery/page",pathname:"/pos/channels/delivery",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},9337:(e,r,t)=>{Promise.resolve().then(t.bind(t,56454))},16185:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o});var a=t(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"};var n=t(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}let o=a.forwardRef((e,r)=>a.createElement(n.Z,i({},e,{ref:r,icon:s})))},62989:function(e){var r;r=function(){return function(e,r,t){e=e||{};var a=r.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function n(e,r,t,s){return a.fromToBase(e,r,t,s)}t.en.relativeTime=s,a.fromToBase=function(r,a,n,i,o){for(var l,d,c,p=n.$locale().relativeTime||s,m=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],u=m.length,y=0;y<u;y+=1){var x=m[y];x.d&&(l=i?t(r).diff(n,x.d,!0):n.diff(r,x.d,!0));var h=(e.rounding||Math.round)(Math.abs(l));if(c=l>0,h<=x.r||!x.r){h<=1&&y>0&&(x=m[y-1]);var f=p[x.l];o&&(h=o(""+h)),d="string"==typeof f?f.replace("%d",h):f(h,a,x.l,c);break}}if(a)return d;var v=c?p.future:p.past;return"function"==typeof v?v(d):v.replace("%s",d)},a.to=function(e,r){return n(e,r,this,!0)},a.from=function(e,r){return n(e,r,this)};var i=function(e){return e.$u?t.utc():t()};a.toNow=function(e){return this.to(i(this),e)},a.fromNow=function(e){return this.from(i(this),e)}}},e.exports=r()},56454:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>W});var a=t(10326),s=t(77626),n=t.n(s),i=t(17577),o=t(35047),l=t(58184),d=t(46752),c=t(71935),p=t(4139),m=t(38106),u=t(61357),y=t(75698),x=t(75958),h=t(91259),f=t(49909),v=t(2643),b=t(16185),g=t(72380),j=t(22817),_=t(44976),P=t(20108),N=t(19211),k=t(12529);let w=t(40820).q.POS.DELIVERY,S=(e,r="application/json")=>{let t={};return r&&(t["Content-Type"]=r),e&&(t.Cookie=e),t},C={getAll:async(e,r)=>{let t=(0,k.b)("GET",w),a=new URLSearchParams(r||"");a.has("page")||a.set("page","1"),a.has("limit")||a.set("limit","200");let s=a.toString();s&&(t+=`?${s}`);let n=S(e,""),i=await fetch(t,{cache:"no-store",headers:n,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch delivery providers")}return i.json()}};var z=t(13976),D=t(93922),E=t(79e3),q=t(15051),T=t(2504),I=t(95963),A=t(37938),F=t(45317),$=t(88295),M=t.n($),O=t(62989),B=t.n(O);t(63699);let{Title:Z,Text:R}=l.default;function W(){let e=(0,o.useRouter)(),{showLoading:r,hideLoading:t}=(0,A.x)(),{deliveryProviders:s,isLoading:l}=function(){let{socket:e}=(0,i.useContext)(N.J);(0,_.NL)();let{data:r,error:t,isLoading:a,refetch:s}=(0,P.a)({queryKey:["delivery"],queryFn:async()=>(await C.getAll()).data,staleTime:5e3});return{deliveryProviders:r||[],isLoading:a,isError:t,mutate:s}}(),{orders:k,isLoading:w}=(0,F.w)({orderType:z.m.Delivery}),[S,$]=(0,i.useState)(!1),O=(0,i.useMemo)(()=>(0,T.Do)(k),[k]),[B,W]=(0,i.useState)(""),[H,L]=(0,i.useState)(null),G=(0,i.useMemo)(()=>s.find(e=>e.id===H),[s,H]),V=r=>{let t=(0,I.M9)(r);e.push(t)},U=()=>{W(""),L(null),$(!0)},Y=()=>{if(!H){d.ZP.error("กรุณาเลือกผู้ให้บริการ");return}if(!B.trim()){d.ZP.error("กรุณากรอกรหัสออเดอร์");return}r("กำลังเข้าสู่หน้าออเดอร์...");let t=B.trim();G?.delivery_prefix&&(t=`${G.delivery_prefix}-${t}`),e.push(`/pos/channels/delivery/${H}?code=${encodeURIComponent(t)}`)},J=e=>{switch(e){case"available":return"success";case"occupied":return"orange";case"waitingForPayment":return"blue";default:return"default"}};return(0,a.jsxs)(a.Fragment,{children:[a.jsx(q.c,{}),a.jsx(n(),{id:E.N5.__hash,children:E.N5}),a.jsx(n(),{id:"c1ca8602d2ef2218",children:".order-card-hover{-webkit-transition:all.3s cubic-bezier(.4,0,.2,1)!important;-moz-transition:all.3s cubic-bezier(.4,0,.2,1)!important;-o-transition:all.3s cubic-bezier(.4,0,.2,1)!important;transition:all.3s cubic-bezier(.4,0,.2,1)!important}.order-card-hover:hover{-webkit-transform:translatey(-4px)!important;-moz-transform:translatey(-4px)!important;-ms-transform:translatey(-4px)!important;-o-transform:translatey(-4px)!important;transform:translatey(-4px)!important;-webkit-box-shadow:0 12px 28px rgba(0,0,0,.1)!important;-moz-box-shadow:0 12px 28px rgba(0,0,0,.1)!important;box-shadow:0 12px 28px rgba(0,0,0,.1)!important}.order-card-hover:active{-webkit-transform:translatey(-2px)scale(.99)!important;-moz-transform:translatey(-2px)scale(.99)!important;-ms-transform:translatey(-2px)scale(.99)!important;-o-transform:translatey(-2px)scale(.99)!important;transform:translatey(-2px)scale(.99)!important}@media(hover:none){.order-card-hover:active{-webkit-transform:scale(.98)!important;-moz-transform:scale(.98)!important;-ms-transform:scale(.98)!important;-o-transform:scale(.98)!important;transform:scale(.98)!important}.order-card-hover:hover{-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important}}.back-button-hover:hover{background:rgba(255,255,255,.28)!important;-webkit-transform:translatex(-2px);-moz-transform:translatex(-2px);-ms-transform:translatex(-2px);-o-transform:translatex(-2px);transform:translatex(-2px)}.add-button-hover:hover{-webkit-transform:translatey(-2px)!important;-moz-transform:translatey(-2px)!important;-ms-transform:translatey(-2px)!important;-o-transform:translatey(-2px)!important;transform:translatey(-2px)!important;-webkit-box-shadow:0 12px 24px rgba(139,92,246,.35)!important;-moz-box-shadow:0 12px 24px rgba(139,92,246,.35)!important;box-shadow:0 12px 24px rgba(139,92,246,.35)!important}.add-button-hover:active{-webkit-transform:scale(.98)!important;-moz-transform:scale(.98)!important;-ms-transform:scale(.98)!important;-o-transform:scale(.98)!important;transform:scale(.98)!important}.hide-on-mobile{display:inline!important}.show-on-mobile-inline{display:none!important}@media(max-width:768px){.hide-on-mobile{display:none!important}.show-on-mobile-inline{display:inline!important}}.delivery-modal .ant-modal-content{-webkit-border-radius:20px!important;-moz-border-radius:20px!important;border-radius:20px!important;overflow:hidden}.delivery-modal .ant-modal-header{padding:20px 24px 16px!important;border-bottom:1px solid#f0f0f0!important}.delivery-modal .ant-modal-body{padding:24px!important}.delivery-modal .ant-modal-footer{padding:16px 24px 20px!important;border-top:1px solid#f0f0f0!important}"}),(0,a.jsxs)("div",{style:D.Np.container,className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsxs)("header",{style:{...E.yy.channelHeader,background:D.hS.delivery.gradient},role:"banner",className:"jsx-c1ca8602d2ef2218 delivery-header-mobile",children:[a.jsx("div",{className:"jsx-c1ca8602d2ef2218 header-pattern"}),a.jsx("div",{className:"jsx-c1ca8602d2ef2218 header-circle circle-1"}),a.jsx("div",{className:"jsx-c1ca8602d2ef2218 header-circle circle-2"}),(0,a.jsxs)("div",{style:E.yy.channelHeaderContent,className:"jsx-c1ca8602d2ef2218 delivery-header-content-mobile",children:[(0,a.jsxs)("button",{style:E.yy.channelBackButton,onClick:()=>{e.push("/pos/channels")},"aria-label":"กลับไปหน้าเลือกช่องทาง",className:"jsx-c1ca8602d2ef2218 back-button-hover delivery-back-button-mobile",children:[a.jsx(v.Z,{}),a.jsx("span",{className:"jsx-c1ca8602d2ef2218",children:"กลับ"})]}),(0,a.jsxs)("div",{style:E.yy.channelTitleSection,className:"jsx-c1ca8602d2ef2218 delivery-title-section-mobile",children:[a.jsx(b.Z,{style:E.yy.channelHeaderIcon,className:"delivery-header-icon-mobile","aria-hidden":"true"}),(0,a.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[a.jsx(Z,{level:3,style:E.yy.channelHeaderTitle,className:"delivery-header-title-mobile",children:"เดลิเวอรี่"}),a.jsx(R,{style:E.yy.channelHeaderSubtitle,children:"Delivery"})]})]}),(0,a.jsxs)("div",{style:E.yy.channelStatsBar,className:"jsx-c1ca8602d2ef2218 delivery-stats-bar-mobile",children:[(0,a.jsxs)("div",{style:E.yy.statItem,className:"jsx-c1ca8602d2ef2218",children:[a.jsx("span",{style:{...E.yy.statDot,background:"#fff"},className:"jsx-c1ca8602d2ef2218"}),(0,a.jsxs)(R,{style:E.yy.statText,children:["ทั้งหมด ",O.total]})]}),(0,a.jsxs)("div",{style:E.yy.statItem,className:"jsx-c1ca8602d2ef2218",children:[a.jsx("span",{style:{...E.yy.statDot,background:D.ax.occupied.primary},className:"jsx-c1ca8602d2ef2218"}),(0,a.jsxs)(R,{style:E.yy.statText,children:["กำลังปรุง ",O.cooking]})]})]})]})]}),(0,a.jsxs)("main",{style:{maxWidth:1400,margin:"0 auto",padding:"0 16px 32px"},role:"main",className:"jsx-c1ca8602d2ef2218 delivery-content-mobile",children:[a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:20},className:"jsx-c1ca8602d2ef2218",children:(0,a.jsxs)(c.ZP,{type:"primary",size:"large",icon:a.jsx(g.Z,{}),onClick:U,className:"add-button-hover delivery-add-button-mobile",style:{...E.yy.addOrderButton,background:D.hS.delivery.primary,boxShadow:`0 8px 20px ${D.hS.delivery.primary}40`},children:[a.jsx("span",{className:"jsx-c1ca8602d2ef2218 hide-on-mobile",children:"เพิ่มออเดอร์ใหม่"}),a.jsx("span",{className:"jsx-c1ca8602d2ef2218 show-on-mobile-inline",children:"เพิ่ม"})]})}),k.length>0?a.jsx(p.Z,{gutter:[16,16],children:k.map((e,r)=>{let t=(0,T.Yx)(e),n=D.ax[t],i=s.find(r=>r.id===e.delivery_id),o=e.delivery_code||e.order_no.split("-").pop();return a.jsx(m.Z,{xs:24,sm:12,md:8,lg:6,xl:6,className:"delivery-order-col-mobile",children:(0,a.jsxs)("article",{style:{...E.yy.orderCard,border:`1.5px solid ${n.border}`},onClick:()=>V(e),onKeyDown:r=>{("Enter"===r.key||" "===r.key)&&(r.preventDefault(),V(e))},role:"button",tabIndex:0,"aria-label":`ออเดอร์ ${o} - ${(0,T.NE)(e.status)}`,className:`jsx-c1ca8602d2ef2218 order-card-hover delivery-order-card table-card-animate table-card-delay-${r%6+1}`,children:[(0,a.jsxs)("div",{style:{...E.yy.orderCardHeader,background:n.light},className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},className:"jsx-c1ca8602d2ef2218",children:[a.jsx("div",{style:{width:40,height:40,borderRadius:12,background:`${n.primary}20`,display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-c1ca8602d2ef2218",children:a.jsx(b.Z,{style:{color:n.primary,fontSize:20}})}),(0,a.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[a.jsx(R,{strong:!0,style:{fontSize:16,color:"#1E293B",display:"block",lineHeight:1.2},children:o}),a.jsx(R,{type:"secondary",style:{fontSize:11},children:i?.delivery_name||"Delivery"})]})]}),a.jsx(u.Z,{color:J(t),style:{borderRadius:8,margin:0,fontWeight:600,border:"none",padding:"4px 12px"},children:(0,T.NE)(e.status)})]}),a.jsx("div",{style:E.yy.orderCardContent,className:"jsx-c1ca8602d2ef2218",children:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[a.jsx(R,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:4},children:"รายการสินค้า"}),(0,a.jsxs)(R,{strong:!0,style:{fontSize:16},children:[e.items_count||0," รายการ"]})]}),(0,a.jsxs)("div",{style:{textAlign:"right"},className:"jsx-c1ca8602d2ef2218",children:[a.jsx(R,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:4},children:"ยอดรวม"}),(0,a.jsxs)(R,{strong:!0,style:{fontSize:20,color:n.primary},children:["฿",e.total_amount?.toLocaleString()]})]})]})}),(0,a.jsxs)("div",{style:E.yy.orderCardFooter,className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},className:"jsx-c1ca8602d2ef2218",children:[a.jsx(j.Z,{style:{fontSize:12,color:"#94A3B8"}}),a.jsx(R,{type:"secondary",style:{fontSize:12},children:M()(e.create_date).fromNow()})]}),a.jsx(u.Z,{style:{margin:0,borderRadius:6,background:D.hS.delivery.light,color:D.hS.delivery.primary,border:`1px solid ${D.hS.delivery.border}`,fontSize:11,fontWeight:600},children:"Delivery"})]})]})},e.id)})}):(0,a.jsxs)("div",{style:E.yy.emptyStateContainer,className:"jsx-c1ca8602d2ef2218",children:[a.jsx(y.Z,{image:y.Z.PRESENTED_IMAGE_SIMPLE,description:(0,a.jsxs)("div",{style:{marginTop:16},className:"jsx-c1ca8602d2ef2218",children:[a.jsx(Z,{level:4,style:{marginBottom:8,color:"#1E293B"},children:"ไม่มีออเดอร์เดลิเวอรี่"}),a.jsx(R,{type:"secondary",style:{fontSize:15},children:'เริ่มรับออเดอร์โดยกดปุ่ม "เพิ่มออเดอร์"'})]})}),a.jsx(c.ZP,{type:"primary",size:"large",icon:a.jsx(g.Z,{}),onClick:U,style:{marginTop:24,background:D.hS.delivery.primary,height:52,borderRadius:16,padding:"0 32px",fontWeight:600,border:"none",boxShadow:`0 8px 20px ${D.hS.delivery.primary}40`},children:"สร้างออเดอร์ใหม่"})]})]}),a.jsx(x.Z,{title:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},className:"jsx-c1ca8602d2ef2218",children:[a.jsx("div",{style:{width:40,height:40,borderRadius:12,background:D.hS.delivery.light,display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-c1ca8602d2ef2218",children:a.jsx(b.Z,{style:{color:D.hS.delivery.primary,fontSize:20}})}),(0,a.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[a.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#1E293B"},className:"jsx-c1ca8602d2ef2218",children:"เปิดออเดอร์เดลิเวอรี่"}),a.jsx("div",{style:{fontSize:13,fontWeight:400,color:"#94A3B8"},className:"jsx-c1ca8602d2ef2218",children:"กรอกข้อมูลเพื่อสร้างออเดอร์ใหม่"})]})]}),open:S,onOk:Y,onCancel:()=>$(!1),okText:"ยืนยัน",cancelText:"ยกเลิก",centered:!0,className:"delivery-modal",okButtonProps:{style:{background:D.hS.delivery.primary,borderColor:D.hS.delivery.primary,height:44,borderRadius:12,fontWeight:600,padding:"0 24px"},disabled:!H||!B.trim()},cancelButtonProps:{style:{height:44,borderRadius:12,fontWeight:600,padding:"0 24px"}},children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:20},className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[a.jsx(R,{strong:!0,style:{display:"block",marginBottom:8,fontSize:14,color:"#475569"},children:"เลือกผู้ให้บริการ (Delivery Provider)"}),a.jsx(h.default,{placeholder:"เลือกผู้ให้บริการ",style:{width:"100%"},size:"large",value:H,onChange:L,options:s.map(e=>({label:e.delivery_name,value:e.id})),loading:l})]}),(0,a.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[a.jsx(R,{strong:!0,style:{display:"block",marginBottom:8,fontSize:14,color:"#475569"},children:"รหัสเดลิเวอรี่ / Order Code"}),a.jsx(f.default,{placeholder:"ระบุรหัสออเดอร์ (เช่น 123)",addonBefore:G?.delivery_prefix?`${G.delivery_prefix}-`:void 0,value:B,onChange:e=>W(e.target.value),size:"large",onPressEnter:Y,style:{borderRadius:8}})]})]})})]})]})}M().extend(B()),M().locale("th")},80440:(e,r,t)=>{"use strict";t.d(r,{s:()=>n});var a=t(17577),s=t(19211);let n=()=>(0,a.useContext)(s.J)},10985:(e,r,t)=>{"use strict";var a;t.d(r,{c:()=>a}),function(e){e.Available="Available",e.Unavailable="Unavailable"}(a||(a={}))},2504:(e,r,t)=>{"use strict";t.d(r,{NE:()=>d,Th:()=>o,Do:()=>c,Yx:()=>p,Zu:()=>m,Oi:()=>l,W9:()=>n,Tf:()=>i});var a=t(10985),s=t(13976);function n(e){let r={total:e.length,available:0,occupied:0,inactive:0};return e.forEach(e=>{e.is_active?e.status===a.c.Available?r.available++:r.occupied++:r.inactive++}),r}function i(e){return[...e].sort((e,r)=>{let t=parseInt(e.table_name.replace(/\D/g,"")),a=parseInt(r.table_name.replace(/\D/g,""));return isNaN(t)||isNaN(a)?e.table_name.localeCompare(r.table_name):t-a})}function o(e){return e.filter(e=>e.is_active)}function l(e){return e.is_active?"WaitingForPayment"===e.active_order_status?"waitingForPayment":e.status===a.c.Available?"available":"occupied":"inactive"}function d(e){return e?({Pending:"กำลังดำเนินการ",Cooking:"กำลังปรุง",Served:"เสิร์ฟแล้ว",WaitingForOrder:"รอรับออเดอร์",WaitingForPayment:"รอชำระเงิน",Paid:"ชำระเงินแล้ว",Completed:"เสร็จสมบูรณ์",Cancelled:"ยกเลิก"})[e]||e:""}function c(e){return e.reduce((e,r)=>(e.total++,r.status===s.i.Pending&&e.pending++,r.status===s.i.Cooking&&e.cooking++,r.status===s.i.Served&&e.served++,e),{total:0,pending:0,cooking:0,served:0})}function p(e){switch(e.status){case s.i.Pending:case s.i.Cooking:return"occupied";case s.i.Served:return"waitingForPayment";case s.i.Paid:return"available";default:return"inactive"}}let m=e=>{switch(e){case s.m.DineIn:case"DineIn":return"/pos/channels/dine-in";case s.m.TakeAway:case"TakeAway":return"/pos/channels/takeaway";case s.m.Delivery:case"Delivery":return"/pos/channels/delivery";default:return"/pos/orders"}}},95963:(e,r,t)=>{"use strict";t.d(r,{EO:()=>g,Gs:()=>l,HL:()=>j,M9:()=>_,Nz:()=>x,OY:()=>i,Rr:()=>v,Wl:()=>n,d$:()=>P,d7:()=>o,iN:()=>p,jN:()=>y,ku:()=>f,mz:()=>d,qO:()=>c,xG:()=>u,yj:()=>b,zP:()=>m,zf:()=>N});var a=t(13976),s=t(10985);let n=e=>{if(e.status===s.c.Available)return`/pos/channels/dine-in/${e.id}`;let r=e.active_order_id||e.active_order?.id,t=e.active_order_status||e.active_order?.status;return r?t===a.i.WaitingForPayment?`/pos/items/payment/${r}`:`/pos/orders/${r}`:`/pos/channels/dine-in/${e.id}`},i=e=>{switch(e){case a.i.Pending:return"orange";case a.i.Cooking:return"blue";case a.i.Served:return"green";case a.i.Paid:return"cyan";case a.i.Cancelled:return"red";case a.i.WaitingForPayment:return"gold";default:return"default"}},o=(e,r)=>{switch(e){case a.i.Pending:return"กำลังดำเนินการ";case a.i.Cooking:return"กำลังปรุง";case a.i.Served:if("TakeAway"===r||"Delivery"===r)return"ทำแล้ว";return"เสิร์ฟแล้ว";case a.i.Paid:return"ชำระเงินแล้ว";case a.i.Completed:return"สำเร็จ";case a.i.Cancelled:return"ยกเลิก";case a.i.WaitingForPayment:return"รอชำระเงิน";default:return e}},l=e=>{switch(e){case"DineIn":return"#722ed1";case"TakeAway":return"#fa8c16";case"Delivery":return"#eb2f96";default:return"#1890ff"}},d=e=>{switch(e){case"DineIn":return"ทานที่ร้าน";case"TakeAway":return"สั่งกลับบ้าน";case"Delivery":return"เดลิเวอรี่";default:return e}},c=e=>"DineIn"===e?"เสิร์ฟ":"ทำแล้ว",p=e=>"Delivery"===e?"จัดออเดอร์เสร็จแล้วพร้อมส่งให้ไรเดอร์":"DineIn"===e?"ยืนยันเสิร์ฟพร้อมชำระเงิน":"ยืนยันทำแล้วพร้อมชำระเงิน",m=e=>"DineIn"===e?"เสิร์ฟอาหารแล้ว":"ปรุงเสร็จแล้ว",u=e=>{let r="string"==typeof e?parseFloat(e):e;return`฿${Number(r).toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2})}`},y=e=>"DineIn"===e.order_type?e.table?.table_name||"ไม่ระบุโต๊ะ":"Delivery"===e.order_type?e.delivery_code||e.delivery?.delivery_name||"ไม่ระบุข้อมูล":"TakeAway"===e.order_type?e.order_no||"ไม่ระบุเลขที่":e.order_no||"N/A",x=e=>(e??[]).filter(e=>e.status!==a.i.Cancelled),h=e=>(e??[]).reduce((e,r)=>e+(Number(r.extra_price)||0),0),f=(e,r,t)=>((Number(e)||0)+h(t))*r,v=e=>x(e).reduce((e,r)=>{let t=r.product?.category?.display_name||"ไม่ระบุหมวด";return e[t]=(e[t]||0)+(r.quantity||0),e},{}),b=e=>x(e).reduce((e,r)=>e+Number(r.total_price||0),0),g=e=>"DineIn"===e.order_type?"/pos/channels/dine-in":"TakeAway"===e.order_type?"/pos/channels/takeaway":"Delivery"===e.order_type?"/pos/channels/delivery":"/pos/orders",j=e=>`/pos/orders/${e}`,_=e=>e.status===a.i.WaitingForPayment?e.order_type===a.m.Delivery?`/pos/items/delivery/${e.id}`:`/pos/items/payment/${e.id}`:`/pos/orders/${e.id}`,P=e=>e===a.m.Delivery?"/pos/channels/delivery":e===a.m.TakeAway?"/pos/channels/takeaway":e===a.m.DineIn?"/pos/channels/dine-in":"/pos/channels",N=(e,r,t,s)=>({order_no:s.orderNo||`ORD-${Date.now()}`,order_type:r,sub_total:t.subTotal,discount_amount:t.discountAmount,vat:0,total_amount:t.totalAmount,received_amount:0,change_amount:0,status:a.i.Pending,discount_id:s.discountId||null,payment_method_id:null,table_id:s.tableId||null,delivery_id:s.deliveryId||null,delivery_code:s.deliveryCode||null,items:e.map(e=>{let r=Number(e.product.price),t=(r+(e.details||[]).reduce((e,r)=>e+Number(r.extra_price),0))*e.quantity;return{product_id:e.product.id,quantity:e.quantity,price:r,total_price:t,discount_amount:0,notes:e.notes||"",status:a.i.Cooking,details:e.details||[]}})})},45317:(e,r,t)=>{"use strict";t.d(r,{w:()=>y});var a=t(17577),s=t(26859),n=t(13976),i=t(80440),o=t(54354),l=t(81711),d=t.n(l);let c=new Set([n.i.Paid,n.i.Completed,n.i.Cancelled]),p=[n.i.Pending,n.i.Cooking,n.i.Served,n.i.WaitingForPayment].join(","),m=["orders:create","orders:update","orders:delete","payments:create","payments:update"],u=(e,r)=>e.filter(e=>e.order_type===r&&!c.has(e.status));function y({orderType:e,limit:r=100,page:t=1,statusFilter:n=p,enabled:l=!0,refreshIntervalMs:c=15e3,events:y=m}){let{socket:x}=(0,i.s)(),[h,f]=(0,a.useState)([]),[v,b]=(0,a.useState)(!0),g=(0,a.useCallback)(async(a=!1)=>{if(l){a||b(!0);try{let a=await s.x.getAllSummary(void 0,t,r,n,e),i=u(a.data||[],e);f(e=>d()(e,i)?e:i)}catch{}finally{a||b(!1)}}},[l,r,e,t,n]);return(0,o.D)({socket:x,events:y,onRefresh:()=>g(!0),intervalMs:c,enabled:l,debounceMs:800}),{orders:h,isLoading:v,refresh:g}}},54354:(e,r,t)=>{"use strict";function a(e,r,t,a=e=>e.id,s=()=>!0){}function s({socket:e,events:r=[],onRefresh:t,intervalMs:a,enabled:s=!0,debounceMs:n}){}t.d(r,{D:()=>s,v:()=>a}),t(17577)},14716:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\channels\delivery\page.tsx#default`)}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[9276,8674,8571,8270,9345,108,2514,9042,1399,4658,9191],()=>t(11970));module.exports=a})();