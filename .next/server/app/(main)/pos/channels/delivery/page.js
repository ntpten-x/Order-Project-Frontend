(()=>{var e={};e.id=3859,e.ids=[3859],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},11970:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.Z,__next_app__:()=>u,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>l}),t(14716),t(85429),t(58522),t(86296),t(7629),t(11930),t(12523);var i=t(23191),a=t(88716),n=t(43315),s=t(95231),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);t.d(r,o);let l=["",{children:["(main)",{children:["pos",{children:["channels",{children:["delivery",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,14716)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\delivery\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,86296)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\delivery\\page.tsx"],c="/(main)/pos/channels/delivery/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/pos/channels/delivery/page",pathname:"/pos/channels/delivery",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},9337:(e,r,t)=>{Promise.resolve().then(t.bind(t,96896))},16185:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o});var i=t(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"};var n=t(74082);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}let o=i.forwardRef((e,r)=>i.createElement(n.Z,s({},e,{ref:r,icon:a})))},62989:function(e){var r;r=function(){return function(e,r,t){e=e||{};var i=r.prototype,a={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function n(e,r,t,a){return i.fromToBase(e,r,t,a)}t.en.relativeTime=a,i.fromToBase=function(r,i,n,s,o){for(var l,d,c,u=n.$locale().relativeTime||a,p=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],y=p.length,h=0;h<y;h+=1){var m=p[h];m.d&&(l=s?t(r).diff(n,m.d,!0):n.diff(r,m.d,!0));var v=(e.rounding||Math.round)(Math.abs(l));if(c=l>0,v<=m.r||!m.r){v<=1&&h>0&&(m=p[h-1]);var g=u[m.l];o&&(v=o(""+v)),d="string"==typeof g?g.replace("%d",v):g(v,i,m.l,c);break}}if(i)return d;var x=c?u.future:u.past;return"function"==typeof x?x(d):x.replace("%s",d)},i.to=function(e,r){return n(e,r,this,!0)},i.from=function(e,r){return n(e,r,this)};var s=function(e){return e.$u?t.utc():t()};i.toNow=function(e){return this.to(s(this),e)},i.fromNow=function(e){return this.from(s(this),e)}}},e.exports=r()},96896:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>O});var i=t(10326),a=t(17577),n=t(35047),s=t(58184),o=t(46752),l=t(71935),d=t(4139),c=t(38106),u=t(75698),p=t(75958),y=t(91259),h=t(49909),m=t(2643),v=t(16185),g=t(72380),x=t(44976),f=t(20108),b=t(19211),j=t(78769),P=t(13976),_=t(93922),k=t(79e3),w=t(15051),C=t(2504),T=t(95963),E=t(37938),D=t(45317),S=t(88295),N=t.n(S),F=t(62989),q=t.n(F);t(63699);let{Title:$,Text:I}=s.default;function O(){let e=(0,n.useRouter)(),{showLoading:r,hideLoading:t}=(0,E.x)(),{deliveryProviders:s,isLoading:S}=function(){let{socket:e}=(0,a.useContext)(b.J);(0,x.NL)();let{data:r,error:t,isLoading:i,refetch:n}=(0,f.a)({queryKey:["delivery"],queryFn:async()=>(await j.X.getAll()).data,staleTime:5e3});return{deliveryProviders:r||[],isLoading:i,isError:t,mutate:n}}(),{orders:F,isLoading:q}=(0,D.w)({orderType:P.m.Delivery}),[O,A]=(0,a.useState)(!1),M=(0,a.useMemo)(()=>(0,C.Do)(F),[F]),[Z,R]=(0,a.useState)(""),[z,B]=(0,a.useState)(null),W=(0,a.useMemo)(()=>s.find(e=>e.id===z),[s,z]),L=r=>{let t=(0,T.M9)(r);e.push(t)},G=()=>{R(""),B(null),A(!0)},H=()=>{if(!z){o.ZP.error("กรุณาเลือกผู้ให้บริการ");return}if(!Z.trim()){o.ZP.error("กรุณากรอกรหัสออเดอร์");return}r("กำลังเข้าสู่หน้าออเดอร์...");let t=Z.trim();W?.delivery_prefix&&(t=`${W.delivery_prefix}-${t}`),e.push(`/pos/channels/delivery/${z}?code=${encodeURIComponent(t)}`)};return(0,i.jsxs)(i.Fragment,{children:[i.jsx(w.c,{}),(0,i.jsxs)("div",{style:_.Np.container,children:[(0,i.jsxs)("div",{style:{...k.y.channelHeader,background:_.hS.delivery.gradient},className:"delivery-header-mobile",children:[i.jsx("div",{className:"header-pattern"}),(0,i.jsxs)("div",{style:k.y.channelHeaderContent,className:"delivery-header-content-mobile",children:[(0,i.jsxs)("div",{className:"back-button-hover delivery-back-button-mobile",style:k.y.channelBackButton,onClick:()=>{e.push("/pos/channels")},children:[i.jsx(m.Z,{}),i.jsx("span",{children:"กลับ"})]}),(0,i.jsxs)("div",{style:k.y.channelTitleSection,className:"delivery-title-section-mobile",children:[i.jsx(v.Z,{style:k.y.channelHeaderIcon,className:"delivery-header-icon-mobile"}),(0,i.jsxs)("div",{children:[i.jsx($,{level:3,style:k.y.channelHeaderTitle,className:"delivery-header-title-mobile",children:"เดลิเวอรี่"}),i.jsx(I,{style:k.y.channelHeaderSubtitle,children:"Delivery"})]})]}),(0,i.jsxs)("div",{style:k.y.channelStatsBar,className:"delivery-stats-bar-mobile",children:[(0,i.jsxs)("div",{style:k.y.statItem,children:[i.jsx("span",{style:{...k.y.statDot,background:"#fff"}}),(0,i.jsxs)(I,{style:k.y.statText,children:["ทั้งหมด ",M.total]})]}),(0,i.jsxs)("div",{style:k.y.statItem,children:[i.jsx("span",{style:{...k.y.statDot,background:_.ax.occupied.primary}}),(0,i.jsxs)(I,{style:k.y.statText,children:["กำลังปรุง ",M.cooking]})]})]})]})]}),(0,i.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto",padding:"0 16px 24px"},children:[i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:20},children:i.jsx(l.ZP,{type:"primary",size:"large",icon:i.jsx(g.Z,{}),onClick:G,style:{height:48,borderRadius:12,padding:"0 24px",fontWeight:700,background:_.hS.delivery.primary,border:"none",boxShadow:"0 8px 16px rgba(114, 46, 209, 0.25)"},children:"เพิ่มออเดอร์ใหม่"})}),F.length>0?i.jsx(d.Z,{gutter:[20,20],children:F.map((e,r)=>{let t=(0,C.Yx)(e),a=_.ax[t],n=s.find(r=>r.id===e.delivery_id),o=e.delivery_code||e.order_no.split("-").pop();return i.jsx(c.Z,{xs:12,sm:8,md:6,lg:4,children:(0,i.jsxs)("div",{className:`delivery-order-card table-card-animate table-card-delay-${r%6+1}`,style:{...k.y.channelPageCard,background:a.light,border:`2px solid ${a.border}`},onClick:()=>L(e),children:[i.jsx("div",{style:{...k.y.channelPageCardGradientOverlay,background:a.gradient}}),(0,i.jsxs)("div",{style:k.y.channelPageCardInner,children:[i.jsx(v.Z,{style:{...k.y.channelPageCardIcon,color:a.primary}}),i.jsx("div",{style:k.y.channelPageCardMainText,children:o}),(0,i.jsxs)("div",{style:{marginTop:10,display:"flex",flexDirection:"column",gap:4,alignItems:"center"},children:[(0,i.jsxs)("div",{style:{fontSize:12,fontWeight:700,color:a.primary,textTransform:"uppercase"},children:[n?.delivery_name||"DELIVERY"," • ",N()(e.create_date).fromNow()]}),i.jsx("div",{style:{...k.y.channelPageCardStatusBadge,background:a.primary,color:"#fff"},children:(0,C.NE)(e.status)})]})]})]})},e.id)})}):(0,i.jsxs)("div",{style:{background:"#fff",borderRadius:24,padding:"80px 24px",textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.06)"},children:[i.jsx(u.Z,{image:u.Z.PRESENTED_IMAGE_SIMPLE,description:(0,i.jsxs)("div",{style:{marginTop:16},children:[i.jsx($,{level:4,style:{marginBottom:8},children:"ไม่มีออเดอร์เดลิเวอรี่"}),i.jsx(I,{type:"secondary",children:'เริ่มรับออเดอร์โดยกดปุ่ม "เพิ่มออเดอร์"'})]})}),i.jsx(l.ZP,{type:"primary",size:"large",icon:i.jsx(g.Z,{}),onClick:G,style:{marginTop:24,background:_.hS.delivery.primary,borderColor:_.hS.delivery.primary,height:44,borderRadius:10,padding:"0 32px"},children:"สร้างออเดอร์ใหม่"})]})]}),i.jsx(p.Z,{title:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx(v.Z,{style:{color:_.hS.delivery.primary}}),i.jsx("span",{children:"เปิดออเดอร์เดลิเวอรี่ใหม่"})]}),open:O,onOk:H,onCancel:()=>A(!1),okText:"ยืนยัน",cancelText:"ยกเลิก",centered:!0,okButtonProps:{style:{background:_.hS.delivery.primary,borderColor:_.hS.delivery.primary},disabled:!z||!Z.trim()},children:(0,i.jsxs)("div",{style:{paddingTop:16,display:"flex",flexDirection:"column",gap:16},children:[(0,i.jsxs)("div",{children:[i.jsx(I,{strong:!0,style:{display:"block",marginBottom:8},children:"เลือกผู้ให้บริการ (Delivery Provider)"}),i.jsx(y.default,{placeholder:"เลือกผู้ให้บริการ",style:{width:"100%"},size:"large",value:z,onChange:B,options:s.map(e=>({label:e.delivery_name,value:e.id})),loading:S})]}),(0,i.jsxs)("div",{children:[i.jsx(I,{strong:!0,style:{display:"block",marginBottom:8},children:"รหัสเดลิเวอรี่ / Order Code"}),i.jsx(h.default,{placeholder:"ระบุรหัสออเดอร์ (เช่น 123)",addonBefore:W?.delivery_prefix?`${W.delivery_prefix}-`:void 0,value:Z,onChange:e=>R(e.target.value),size:"large",onPressEnter:H})]})]})})]})]})}N().extend(q()),N().locale("th")},80440:(e,r,t)=>{"use strict";t.d(r,{s:()=>n});var i=t(17577),a=t(19211);let n=()=>(0,i.useContext)(a.J)},78769:(e,r,t)=>{"use strict";t.d(r,{X:()=>s});var i=t(12529);let a=t(40820).q.POS.DELIVERY,n=(e,r="application/json")=>{let t={};return r&&(t["Content-Type"]=r),e&&(t.Cookie=e),t},s={getAll:async(e,r)=>{let t=(0,i.b)("GET",a),s=new URLSearchParams(r||"");s.has("page")||s.set("page","1"),s.has("limit")||s.set("limit","200");let o=s.toString();o&&(t+=`?${o}`);let l=n(e,""),d=await fetch(t,{cache:"no-store",headers:l,credentials:"include"});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch delivery providers")}return d.json()},getById:async(e,r)=>{let t=(0,i.b)("GET",`${a}/${e}`),s=n(r,""),o=await fetch(t,{cache:"no-store",headers:s,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch delivery provider")}return o.json()},getByName:async(e,r)=>{let t=(0,i.b)("GET",`${a}/getByName/${e}`),s=n(r,""),o=await fetch(t,{cache:"no-store",headers:s,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch delivery provider")}return o.json()},create:async(e,r,t)=>{let s=(0,i.b)("POST",`${a}`),o=n(r);t&&(o["X-CSRF-Token"]=t);let l=await fetch(s,{method:"POST",headers:o,credentials:"include",body:JSON.stringify(e)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to create delivery provider")}return l.json()},update:async(e,r,t,s)=>{let o=(0,i.b)("PUT",`${a}/${e}`),l=n(t);s&&(l["X-CSRF-Token"]=s);let d=await fetch(o,{method:"PUT",headers:l,credentials:"include",body:JSON.stringify(r)});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to update delivery provider")}return d.json()},delete:async(e,r,t)=>{let s=(0,i.b)("DELETE",`${a}/${e}`),o=n(r,"");t&&(o["X-CSRF-Token"]=t);let l=await fetch(s,{method:"DELETE",headers:o,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to delete delivery provider")}}}},10985:(e,r,t)=>{"use strict";var i;t.d(r,{c:()=>i}),function(e){e.Available="Available",e.Unavailable="Unavailable"}(i||(i={}))},2504:(e,r,t)=>{"use strict";t.d(r,{NE:()=>d,Th:()=>o,Do:()=>c,Yx:()=>u,Zu:()=>p,Oi:()=>l,W9:()=>n,Tf:()=>s});var i=t(10985),a=t(13976);function n(e){let r={total:e.length,available:0,occupied:0,inactive:0};return e.forEach(e=>{e.is_active?e.status===i.c.Available?r.available++:r.occupied++:r.inactive++}),r}function s(e){return[...e].sort((e,r)=>{let t=parseInt(e.table_name.replace(/\D/g,"")),i=parseInt(r.table_name.replace(/\D/g,""));return isNaN(t)||isNaN(i)?e.table_name.localeCompare(r.table_name):t-i})}function o(e){return e.filter(e=>e.is_active)}function l(e){return e.is_active?"WaitingForPayment"===e.active_order_status?"waitingForPayment":e.status===i.c.Available?"available":"occupied":"inactive"}function d(e){return e?({Pending:"กำลังดำเนินการ",Cooking:"กำลังปรุง",Served:"เสิร์ฟแล้ว",WaitingForOrder:"รอรับออเดอร์",WaitingForPayment:"รอชำระเงิน",Paid:"ชำระเงินแล้ว",Completed:"เสร็จสมบูรณ์",Cancelled:"ยกเลิก"})[e]||e:""}function c(e){return e.reduce((e,r)=>(e.total++,r.status===a.i.Pending&&e.pending++,r.status===a.i.Cooking&&e.cooking++,r.status===a.i.Served&&e.served++,e),{total:0,pending:0,cooking:0,served:0})}function u(e){switch(e.status){case a.i.Pending:case a.i.Cooking:return"occupied";case a.i.Served:return"waitingForPayment";case a.i.Paid:return"available";default:return"inactive"}}let p=e=>{switch(e){case a.m.DineIn:case"DineIn":return"/pos/channels/dine-in";case a.m.TakeAway:case"TakeAway":return"/pos/channels/takeaway";case a.m.Delivery:case"Delivery":return"/pos/channels/delivery";default:return"/pos/orders"}}},95963:(e,r,t)=>{"use strict";t.d(r,{EO:()=>b,Gs:()=>l,HL:()=>j,M9:()=>P,Nz:()=>m,OY:()=>s,Rr:()=>x,Wl:()=>n,d$:()=>_,d7:()=>o,iN:()=>u,jN:()=>h,ku:()=>g,mz:()=>d,qO:()=>c,xG:()=>y,yj:()=>f,zP:()=>p,zf:()=>k});var i=t(13976),a=t(10985);let n=e=>{if(e.status===a.c.Available)return`/pos/channels/dine-in/${e.id}`;let r=e.active_order_id||e.active_order?.id,t=e.active_order_status||e.active_order?.status;return r?t===i.i.WaitingForPayment?`/pos/items/payment/${r}`:`/pos/orders/${r}`:`/pos/channels/dine-in/${e.id}`},s=e=>{switch(e){case i.i.Pending:return"orange";case i.i.Cooking:return"blue";case i.i.Served:return"green";case i.i.Paid:return"cyan";case i.i.Cancelled:return"red";case i.i.WaitingForPayment:return"gold";default:return"default"}},o=(e,r)=>{switch(e){case i.i.Pending:return"กำลังดำเนินการ";case i.i.Cooking:return"กำลังปรุง";case i.i.Served:if("TakeAway"===r||"Delivery"===r)return"ทำแล้ว";return"เสิร์ฟแล้ว";case i.i.Paid:return"ชำระเงินแล้ว";case i.i.Completed:return"สำเร็จ";case i.i.Cancelled:return"ยกเลิก";case i.i.WaitingForPayment:return"รอชำระเงิน";default:return e}},l=e=>{switch(e){case"DineIn":return"#722ed1";case"TakeAway":return"#fa8c16";case"Delivery":return"#eb2f96";default:return"#1890ff"}},d=e=>{switch(e){case"DineIn":return"ทานที่ร้าน";case"TakeAway":return"สั่งกลับบ้าน";case"Delivery":return"เดลิเวอรี่";default:return e}},c=e=>"DineIn"===e?"เสิร์ฟ":"ทำแล้ว",u=e=>"Delivery"===e?"จัดออเดอร์เสร็จแล้วพร้อมส่งให้ไรเดอร์":"DineIn"===e?"ยืนยันเสิร์ฟพร้อมชำระเงิน":"ยืนยันทำแล้วพร้อมชำระเงิน",p=e=>"DineIn"===e?"เสิร์ฟอาหารแล้ว":"ปรุงเสร็จแล้ว",y=e=>{let r="string"==typeof e?parseFloat(e):e;return`฿${Number(r).toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2})}`},h=e=>"DineIn"===e.order_type?e.table?.table_name||"ไม่ระบุโต๊ะ":"Delivery"===e.order_type?e.delivery_code||e.delivery?.delivery_name||"ไม่ระบุข้อมูล":"TakeAway"===e.order_type?e.order_no||"ไม่ระบุเลขที่":e.order_no||"N/A",m=e=>(e??[]).filter(e=>e.status!==i.i.Cancelled),v=e=>(e??[]).reduce((e,r)=>e+(Number(r.extra_price)||0),0),g=(e,r,t)=>((Number(e)||0)+v(t))*r,x=e=>m(e).reduce((e,r)=>{let t=r.product?.category?.display_name||"ไม่ระบุหมวด";return e[t]=(e[t]||0)+(r.quantity||0),e},{}),f=e=>m(e).reduce((e,r)=>e+Number(r.total_price||0),0),b=e=>"DineIn"===e.order_type?"/pos/channels/dine-in":"TakeAway"===e.order_type?"/pos/channels/takeaway":"Delivery"===e.order_type?"/pos/channels/delivery":"/pos/orders",j=e=>`/pos/orders/${e}`,P=e=>e.status===i.i.WaitingForPayment?e.order_type===i.m.Delivery?`/pos/items/delivery/${e.id}`:`/pos/items/payment/${e.id}`:`/pos/orders/${e.id}`,_=e=>e===i.m.Delivery?"/pos/channels/delivery":e===i.m.TakeAway?"/pos/channels/takeaway":e===i.m.DineIn?"/pos/channels/dine-in":"/pos/channels",k=(e,r,t,a)=>({order_no:a.orderNo||`ORD-${Date.now()}`,order_type:r,sub_total:t.subTotal,discount_amount:t.discountAmount,vat:0,total_amount:t.totalAmount,received_amount:0,change_amount:0,status:i.i.Pending,discount_id:a.discountId||null,payment_method_id:null,table_id:a.tableId||null,delivery_id:a.deliveryId||null,delivery_code:a.deliveryCode||null,items:e.map(e=>{let r=Number(e.product.price),t=(r+(e.details||[]).reduce((e,r)=>e+Number(r.extra_price),0))*e.quantity;return{product_id:e.product.id,quantity:e.quantity,price:r,total_price:t,discount_amount:0,notes:e.notes||"",status:i.i.Cooking,details:e.details||[]}})})},45317:(e,r,t)=>{"use strict";t.d(r,{w:()=>h});var i=t(17577),a=t(26859),n=t(13976),s=t(80440),o=t(54354),l=t(81711),d=t.n(l);let c=new Set([n.i.Paid,n.i.Completed,n.i.Cancelled]),u=[n.i.Pending,n.i.Cooking,n.i.Served,n.i.WaitingForPayment].join(","),p=["orders:create","orders:update","orders:delete","payments:create","payments:update"],y=(e,r)=>e.filter(e=>e.order_type===r&&!c.has(e.status));function h({orderType:e,limit:r=100,page:t=1,statusFilter:n=u,enabled:l=!0,refreshIntervalMs:c=15e3,events:h=p}){let{socket:m}=(0,s.s)(),[v,g]=(0,i.useState)([]),[x,f]=(0,i.useState)(!0),b=(0,i.useCallback)(async(i=!1)=>{if(l){i||f(!0);try{let i=await a.x.getAllSummary(void 0,t,r,n,e),s=y(i.data||[],e);g(e=>d()(e,s)?e:s)}catch{}finally{i||f(!1)}}},[l,r,e,t,n]);return(0,o.D)({socket:m,events:h,onRefresh:()=>b(!0),intervalMs:c,enabled:l,debounceMs:800}),{orders:v,isLoading:x,refresh:b}}},54354:(e,r,t)=>{"use strict";function i(e,r,t,i=e=>e.id,a=()=>!0){}function a({socket:e,events:r=[],onRefresh:t,intervalMs:i,enabled:a=!0,debounceMs:n}){}t.d(r,{D:()=>a,v:()=>i}),t(17577)},14716:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});let i=(0,t(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\channels\delivery\page.tsx#default`)}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[9276,5898,8571,6927,108,5717,6295,6857,4300,2118],()=>t(11970));module.exports=i})();