(()=>{var e={};e.id=2851,e.ids=[2851],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},67882:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.Z,__next_app__:()=>l,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),t(24075),t(85429),t(58522),t(61804),t(7629),t(11930),t(12523);var i=t(23191),s=t(88716),n=t(43315),o=t(95231),a={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>o[e]);t.d(r,a);let d=["",{children:["(main)",{children:["pos",{children:["channels",{children:["delivery",{children:["[providerId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,24075)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\delivery\\[providerId]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],c=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\delivery\\[providerId]\\page.tsx"],u="/(main)/pos/channels/delivery/[providerId]/page",l={require:t,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/pos/channels/delivery/[providerId]/page",pathname:"/pos/channels/delivery/[providerId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},66701:(e,r,t)=>{Promise.resolve().then(t.bind(t,41897))},16185:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var i=t(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"};var n=t(74082);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}let a=i.forwardRef((e,r)=>i.createElement(n.Z,o({},e,{ref:r,icon:s})))},41897:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var i=t(10326),s=t(17577),n=t(35047),o=t(46752),a=t(16185),d=t(63196),c=t(26859),u=t(95963),l=t(2504),p=t(13976),y=t(37938),m=t(11834);function v({providerId:e,deliveryCode:r}){let{showLoading:t,hideLoading:v}=(0,y.x)(),[h,x]=(0,s.useState)(""),_=(0,n.useRouter)(),{cartItems:P,clearCart:g,getSubtotal:f,getDiscountAmount:b,getFinalPrice:j,selectedDiscount:q,setOrderMode:D,setReferenceId:I,setReferenceCode:w}=(0,d.j)(),O=async()=>{t();try{let t=(0,u.zf)(P,p.m.Delivery,{subTotal:f(),discountAmount:b(),totalAmount:j()},{discountId:q?.id,deliveryId:e,deliveryCode:r});await c.x.create(t,void 0,h),o.ZP.success("สร้างออเดอร์เรียบร้อยแล้ว"),g(),_.push((0,l.Zu)(p.m.Delivery))}catch(e){o.ZP.error(e instanceof Error?e.message:"ไม่สามารถทำรายการได้")}finally{v()}};return i.jsx(m.Z,{title:"เดริเวอรี่ (Delivery)",subtitle:`เดลิเวอรี่ ${r}`,icon:i.jsx(a.Z,{style:{fontSize:28}}),onConfirmOrder:O})}function h({params:e,searchParams:r}){return i.jsx(v,{providerId:e.providerId,deliveryCode:r.code})}t(33357)},95963:(e,r,t)=>{"use strict";t.d(r,{EO:()=>g,Gs:()=>d,HL:()=>f,M9:()=>b,Nz:()=>v,OY:()=>o,Rr:()=>_,Wl:()=>n,d$:()=>j,d7:()=>a,iN:()=>l,jN:()=>m,ku:()=>x,mz:()=>c,qO:()=>u,xG:()=>y,yj:()=>P,zP:()=>p,zf:()=>q});var i=t(13976),s=t(10985);let n=e=>{if(e.status===s.c.Available)return`/pos/channels/dine-in/${e.id}`;let r=e.active_order_id||e.active_order?.id,t=e.active_order_status||e.active_order?.status;return r?t===i.i.WaitingForPayment?`/pos/items/payment/${r}`:`/pos/orders/${r}`:`/pos/channels/dine-in/${e.id}`},o=e=>{switch(e){case i.i.Pending:return"orange";case i.i.Cooking:return"blue";case i.i.Served:return"green";case i.i.Paid:return"cyan";case i.i.Cancelled:return"red";case i.i.WaitingForPayment:return"gold";default:return"default"}},a=(e,r)=>{switch(e){case i.i.Pending:return"กำลังดำเนินการ";case i.i.Cooking:return"กำลังปรุง";case i.i.Served:if("TakeAway"===r||"Delivery"===r)return"ทำแล้ว";return"เสิร์ฟแล้ว";case i.i.Paid:return"ชำระเงินแล้ว";case i.i.Completed:return"สำเร็จ";case i.i.Cancelled:return"ยกเลิก";case i.i.WaitingForPayment:return"รอชำระเงิน";default:return e}},d=e=>{switch(e){case"DineIn":return"#722ed1";case"TakeAway":return"#fa8c16";case"Delivery":return"#eb2f96";default:return"#1890ff"}},c=e=>{switch(e){case"DineIn":return"ทานที่ร้าน";case"TakeAway":return"สั่งกลับบ้าน";case"Delivery":return"เดลิเวอรี่";default:return e}},u=e=>"DineIn"===e?"เสิร์ฟ":"ทำแล้ว",l=e=>"Delivery"===e?"จัดออเดอร์เสร็จแล้วพร้อมส่งให้ไรเดอร์":"DineIn"===e?"ยืนยันเสิร์ฟพร้อมชำระเงิน":"ยืนยันทำแล้วพร้อมชำระเงิน",p=e=>"DineIn"===e?"เสิร์ฟอาหารแล้ว":"ปรุงเสร็จแล้ว",y=e=>{let r="string"==typeof e?parseFloat(e):e;return`฿${Number(r).toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2})}`},m=e=>"DineIn"===e.order_type?e.table?.table_name||"ไม่ระบุโต๊ะ":"Delivery"===e.order_type?e.delivery_code||e.delivery?.delivery_name||"ไม่ระบุข้อมูล":"TakeAway"===e.order_type?e.order_no||"ไม่ระบุเลขที่":e.order_no||"N/A",v=e=>(e??[]).filter(e=>e.status!==i.i.Cancelled),h=e=>(e??[]).reduce((e,r)=>e+(Number(r.extra_price)||0),0),x=(e,r,t)=>((Number(e)||0)+h(t))*r,_=e=>v(e).reduce((e,r)=>{let t=r.product?.category?.display_name||"ไม่ระบุหมวด";return e[t]=(e[t]||0)+(r.quantity||0),e},{}),P=e=>v(e).reduce((e,r)=>e+Number(r.total_price||0),0),g=e=>"DineIn"===e.order_type?"/pos/channels/dine-in":"TakeAway"===e.order_type?"/pos/channels/takeaway":"Delivery"===e.order_type?"/pos/channels/delivery":"/pos/orders",f=e=>`/pos/orders/${e}`,b=e=>e.status===i.i.WaitingForPayment?e.order_type===i.m.Delivery?`/pos/items/delivery/${e.id}`:`/pos/items/payment/${e.id}`:`/pos/orders/${e.id}`,j=e=>e===i.m.Delivery?"/pos/channels/delivery":e===i.m.TakeAway?"/pos/channels/takeaway":e===i.m.DineIn?"/pos/channels/dine-in":"/pos/channels",q=(e,r,t,s)=>({order_no:s.orderNo||`ORD-${Date.now()}`,order_type:r,sub_total:t.subTotal,discount_amount:t.discountAmount,vat:0,total_amount:t.totalAmount,received_amount:0,change_amount:0,status:i.i.Pending,discount_id:s.discountId||null,payment_method_id:null,table_id:s.tableId||null,delivery_id:s.deliveryId||null,delivery_code:s.deliveryCode||null,items:e.map(e=>{let r=Number(e.product.price),t=(r+(e.details||[]).reduce((e,r)=>e+Number(r.extra_price),0))*e.quantity;return{product_id:e.product.id,quantity:e.quantity,price:r,total_price:t,discount_amount:0,notes:e.notes||"",status:i.i.Cooking,details:e.details||[]}})})},24075:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});let i=(0,t(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\channels\delivery\[providerId]\page.tsx#default`)}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[9276,8674,8571,8270,9345,108,6226,9042,1399,4658,7557],()=>t(67882));module.exports=i})();