(()=>{var e={};e.id=416,e.ids=[416],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},64572:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.Z,__next_app__:()=>u,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>l}),r(3521),r(85429),r(58522),r(86296),r(7629),r(11930),r(12523);var a=r(23191),n=r(88716),s=r(43315),i=r(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let l=["",{children:["(main)",{children:["pos",{children:["channels",{children:["takeaway",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3521)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\takeaway\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,86296)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\takeaway\\page.tsx"],c="/(main)/pos/channels/takeaway/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(main)/pos/channels/takeaway/page",pathname:"/pos/channels/takeaway",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},95795:(e,t,r)=>{Promise.resolve().then(r.bind(r,67363))},62989:function(e){var t;t=function(){return function(e,t,r){e=e||{};var a=t.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(e,t,r,n){return a.fromToBase(e,t,r,n)}r.en.relativeTime=n,a.fromToBase=function(t,a,s,i,o){for(var l,d,c,u=s.$locale().relativeTime||n,p=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],y=p.length,m=0;m<y;m+=1){var h=p[m];h.d&&(l=i?r(t).diff(s,h.d,!0):s.diff(t,h.d,!0));var x=(e.rounding||Math.round)(Math.abs(l));if(c=l>0,x<=h.r||!h.r){x<=1&&m>0&&(h=p[m-1]);var g=u[h.l];o&&(x=o(""+x)),d="string"==typeof g?g.replace("%d",x):g(x,a,h.l,c);break}}if(a)return d;var v=c?u.future:u.past;return"function"==typeof v?v(d):v.replace("%s",d)},a.to=function(e,t){return s(e,t,this,!0)},a.from=function(e,t){return s(e,t,this)};var i=function(e){return e.$u?r.utc():r()};a.toNow=function(e){return this.to(i(this),e)},a.fromNow=function(e){return this.from(i(this),e)}}},e.exports=t()},67363:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>q});var a=r(10326),n=r(17577),s=r(35047),i=r(58184),o=r(71935),l=r(4139),d=r(38106),c=r(56249),u=r(61357),p=r(276),y=r(75698),m=r(2643),h=r(9297),x=r(72380),g=r(13976),v=r(93922),f=r(79e3),b=r(15051),j=r(2504),_=r(95963),k=r(37938),w=r(45317),P=r(88295),S=r.n(P),D=r(62989),C=r.n(D);r(63699);let{Title:N,Text:T}=i.default;function q(){let e=(0,s.useRouter)(),{showLoading:t,hideLoading:r}=(0,k.x)(),{orders:i,isLoading:P}=(0,w.w)({orderType:g.m.TakeAway}),D=(0,n.useMemo)(()=>(0,j.Do)(i),[i]),C=()=>{e.push("/pos/channels/takeaway/buying")},q=t=>{let r=(0,_.M9)(t);e.push(r)};return(0,a.jsxs)(a.Fragment,{children:[a.jsx(b.c,{}),(0,a.jsxs)("div",{style:v.Np.container,children:[(0,a.jsxs)("div",{style:{...f.y.channelHeader,background:v.hS.takeaway.gradient},className:"takeaway-header-mobile",children:[a.jsx("div",{className:"header-pattern"}),(0,a.jsxs)("div",{style:f.y.channelHeaderContent,className:"takeaway-header-content-mobile",children:[(0,a.jsxs)("div",{className:"back-button-hover takeaway-back-button-mobile",style:f.y.channelBackButton,onClick:()=>{e.push("/pos/channels")},children:[a.jsx(m.Z,{}),a.jsx("span",{children:"กลับ"})]}),(0,a.jsxs)("div",{style:f.y.channelTitleSection,className:"takeaway-title-section-mobile",children:[a.jsx(h.Z,{style:f.y.channelHeaderIcon,className:"takeaway-header-icon-mobile"}),(0,a.jsxs)("div",{children:[a.jsx(N,{level:3,style:f.y.channelHeaderTitle,className:"takeaway-header-title-mobile",children:"สั่งกลับบ้าน"}),a.jsx(T,{style:f.y.channelHeaderSubtitle,children:"Take Away"})]})]}),(0,a.jsxs)("div",{style:f.y.channelStatsBar,className:"takeaway-stats-bar-mobile",children:[(0,a.jsxs)("div",{style:f.y.statItem,children:[a.jsx("span",{style:{...f.y.statDot,background:"#fff"}}),(0,a.jsxs)(T,{style:f.y.statText,children:["ทั้งหมด ",D.total]})]}),(0,a.jsxs)("div",{style:f.y.statItem,children:[a.jsx("span",{style:{...f.y.statDot,background:v.ax.occupied.primary}}),(0,a.jsxs)(T,{style:f.y.statText,children:["กำลังปรุง ",D.cooking]})]})]})]})]}),(0,a.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto",padding:"0 16px 24px"},children:[a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:20},children:a.jsx(o.ZP,{type:"primary",size:"large",icon:a.jsx(x.Z,{}),onClick:C,style:{height:48,borderRadius:12,padding:"0 24px",fontWeight:700,background:v.hS.takeaway.primary,border:"none",boxShadow:"0 8px 16px rgba(82, 196, 26, 0.25)"},children:"เพิ่มออเดอร์ใหม่"})}),i.length>0?a.jsx(l.Z,{gutter:[20,20],children:i.map((e,t)=>{let r=(0,j.Yx)(e),n=v.ax[r],s=e.order_no.split("-").pop();return a.jsx(d.Z,{xs:24,sm:12,md:12,lg:8,xl:6,children:(0,a.jsxs)(c.Z,{hoverable:!0,className:`takeaway-order-card table-card-animate table-card-delay-${t%6+1}`,style:{borderRadius:16,overflow:"hidden",border:`1px solid ${n.border}`,background:"#fff",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},bodyStyle:{padding:0},onClick:()=>q(e),children:[(0,a.jsxs)("div",{style:{padding:"12px 16px",background:n.light,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${n.border}40`},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx(h.Z,{style:{color:n.primary,fontSize:18}}),(0,a.jsxs)(T,{strong:!0,style:{fontSize:16},children:["#",s]})]}),a.jsx(u.Z,{color:"available"===r?"success":"occupied"===r?"orange":"waitingForPayment"===r?"blue":"default",style:{borderRadius:6,margin:0,fontWeight:600,border:"none"},children:(0,j.NE)(e.status)})]}),(0,a.jsxs)("div",{style:{padding:16},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12},children:[(0,a.jsxs)("div",{children:[a.jsx(T,{type:"secondary",style:{fontSize:12,display:"block"},children:"รายการสินค้า"}),(0,a.jsxs)(T,{strong:!0,style:{fontSize:15},children:[e.items_count||0," รายการ"]})]}),(0,a.jsxs)("div",{style:{textAlign:"right"},children:[a.jsx(T,{type:"secondary",style:{fontSize:12,display:"block"},children:"ยอดรวม"}),(0,a.jsxs)(T,{strong:!0,style:{fontSize:18,color:n.primary},children:["฿",e.total_amount?.toLocaleString()]})]})]}),a.jsx(p.Z,{style:{margin:"12px 0"}}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[a.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:n.primary,boxShadow:`0 0 8px ${n.primary}60`}}),a.jsx(T,{type:"secondary",style:{fontSize:12},children:S()(e.create_date).fromNow()})]}),a.jsx(T,{type:"secondary",style:{fontSize:12},children:"Take Away"})]})]})]})},e.id)})}):(0,a.jsxs)("div",{style:{background:"#fff",borderRadius:24,padding:"80px 24px",textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.06)"},children:[a.jsx(y.Z,{image:y.Z.PRESENTED_IMAGE_SIMPLE,description:(0,a.jsxs)("div",{style:{marginTop:16},children:[a.jsx(N,{level:4,style:{marginBottom:8},children:"ไม่มีออเดอร์ในขณะนี้"}),a.jsx(T,{type:"secondary",children:'เริ่มรับออเดอร์สั่งกลับบ้านโดยกดปุ่ม "เพิ่มออเดอร์"'})]})}),a.jsx(o.ZP,{type:"primary",size:"large",icon:a.jsx(x.Z,{}),onClick:C,style:{marginTop:24,background:v.hS.takeaway.primary,borderColor:v.hS.takeaway.primary,height:44,borderRadius:10,padding:"0 32px"},children:"สร้างออเดอร์ใหม่"})]})]})]})]})}S().extend(C()),S().locale("th")},80440:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});var a=r(17577),n=r(19211);let s=()=>(0,a.useContext)(n.J)},10985:(e,t,r)=>{"use strict";var a;r.d(t,{c:()=>a}),function(e){e.Available="Available",e.Unavailable="Unavailable"}(a||(a={}))},2504:(e,t,r)=>{"use strict";r.d(t,{NE:()=>d,Th:()=>o,Do:()=>c,Yx:()=>u,Zu:()=>p,Oi:()=>l,W9:()=>s,Tf:()=>i});var a=r(10985),n=r(13976);function s(e){let t={total:e.length,available:0,occupied:0,inactive:0};return e.forEach(e=>{e.is_active?e.status===a.c.Available?t.available++:t.occupied++:t.inactive++}),t}function i(e){return[...e].sort((e,t)=>{let r=parseInt(e.table_name.replace(/\D/g,"")),a=parseInt(t.table_name.replace(/\D/g,""));return isNaN(r)||isNaN(a)?e.table_name.localeCompare(t.table_name):r-a})}function o(e){return e.filter(e=>e.is_active)}function l(e){return e.is_active?"WaitingForPayment"===e.active_order_status?"waitingForPayment":e.status===a.c.Available?"available":"occupied":"inactive"}function d(e){return e?({Pending:"กำลังดำเนินการ",Cooking:"กำลังปรุง",Served:"เสิร์ฟแล้ว",WaitingForOrder:"รอรับออเดอร์",WaitingForPayment:"รอชำระเงิน",Paid:"ชำระเงินแล้ว",Completed:"เสร็จสมบูรณ์",Cancelled:"ยกเลิก"})[e]||e:""}function c(e){return e.reduce((e,t)=>(e.total++,t.status===n.i.Pending&&e.pending++,t.status===n.i.Cooking&&e.cooking++,t.status===n.i.Served&&e.served++,e),{total:0,pending:0,cooking:0,served:0})}function u(e){switch(e.status){case n.i.Pending:case n.i.Cooking:return"occupied";case n.i.Served:return"waitingForPayment";case n.i.Paid:return"available";default:return"inactive"}}let p=e=>{switch(e){case n.m.DineIn:case"DineIn":return"/pos/channels/dine-in";case n.m.TakeAway:case"TakeAway":return"/pos/channels/takeaway";case n.m.Delivery:case"Delivery":return"/pos/channels/delivery";default:return"/pos/orders"}}},95963:(e,t,r)=>{"use strict";r.d(t,{EO:()=>b,Gs:()=>l,HL:()=>j,M9:()=>_,Nz:()=>h,OY:()=>i,Rr:()=>v,Wl:()=>s,d$:()=>k,d7:()=>o,iN:()=>u,jN:()=>m,ku:()=>g,mz:()=>d,qO:()=>c,xG:()=>y,yj:()=>f,zP:()=>p,zf:()=>w});var a=r(13976),n=r(10985);let s=e=>{if(e.status===n.c.Available)return`/pos/channels/dine-in/${e.id}`;let t=e.active_order_id||e.active_order?.id,r=e.active_order_status||e.active_order?.status;return t?r===a.i.WaitingForPayment?`/pos/items/payment/${t}`:`/pos/orders/${t}`:`/pos/channels/dine-in/${e.id}`},i=e=>{switch(e){case a.i.Pending:return"orange";case a.i.Cooking:return"blue";case a.i.Served:return"green";case a.i.Paid:return"cyan";case a.i.Cancelled:return"red";case a.i.WaitingForPayment:return"gold";default:return"default"}},o=(e,t)=>{switch(e){case a.i.Pending:return"กำลังดำเนินการ";case a.i.Cooking:return"กำลังปรุง";case a.i.Served:if("TakeAway"===t||"Delivery"===t)return"ทำแล้ว";return"เสิร์ฟแล้ว";case a.i.Paid:return"ชำระเงินแล้ว";case a.i.Completed:return"สำเร็จ";case a.i.Cancelled:return"ยกเลิก";case a.i.WaitingForPayment:return"รอชำระเงิน";default:return e}},l=e=>{switch(e){case"DineIn":return"#722ed1";case"TakeAway":return"#fa8c16";case"Delivery":return"#eb2f96";default:return"#1890ff"}},d=e=>{switch(e){case"DineIn":return"ทานที่ร้าน";case"TakeAway":return"สั่งกลับบ้าน";case"Delivery":return"เดลิเวอรี่";default:return e}},c=e=>"DineIn"===e?"เสิร์ฟ":"ทำแล้ว",u=e=>"Delivery"===e?"จัดออเดอร์เสร็จแล้วพร้อมส่งให้ไรเดอร์":"DineIn"===e?"ยืนยันเสิร์ฟพร้อมชำระเงิน":"ยืนยันทำแล้วพร้อมชำระเงิน",p=e=>"DineIn"===e?"เสิร์ฟอาหารแล้ว":"ปรุงเสร็จแล้ว",y=e=>{let t="string"==typeof e?parseFloat(e):e;return`฿${Number(t).toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2})}`},m=e=>"DineIn"===e.order_type?e.table?.table_name||"ไม่ระบุโต๊ะ":"Delivery"===e.order_type?e.delivery_code||e.delivery?.delivery_name||"ไม่ระบุข้อมูล":"TakeAway"===e.order_type?e.order_no||"ไม่ระบุเลขที่":e.order_no||"N/A",h=e=>(e??[]).filter(e=>e.status!==a.i.Cancelled),x=e=>(e??[]).reduce((e,t)=>e+(Number(t.extra_price)||0),0),g=(e,t,r)=>((Number(e)||0)+x(r))*t,v=e=>h(e).reduce((e,t)=>{let r=t.product?.category?.display_name||"ไม่ระบุหมวด";return e[r]=(e[r]||0)+(t.quantity||0),e},{}),f=e=>h(e).reduce((e,t)=>e+Number(t.total_price||0),0),b=e=>"DineIn"===e.order_type?"/pos/channels/dine-in":"TakeAway"===e.order_type?"/pos/channels/takeaway":"Delivery"===e.order_type?"/pos/channels/delivery":"/pos/orders",j=e=>`/pos/orders/${e}`,_=e=>e.status===a.i.WaitingForPayment?e.order_type===a.m.Delivery?`/pos/items/delivery/${e.id}`:`/pos/items/payment/${e.id}`:`/pos/orders/${e.id}`,k=e=>e===a.m.Delivery?"/pos/channels/delivery":e===a.m.TakeAway?"/pos/channels/takeaway":e===a.m.DineIn?"/pos/channels/dine-in":"/pos/channels",w=(e,t,r,n)=>({order_no:n.orderNo||`ORD-${Date.now()}`,order_type:t,sub_total:r.subTotal,discount_amount:r.discountAmount,vat:0,total_amount:r.totalAmount,received_amount:0,change_amount:0,status:a.i.Pending,discount_id:n.discountId||null,payment_method_id:null,table_id:n.tableId||null,delivery_id:n.deliveryId||null,delivery_code:n.deliveryCode||null,items:e.map(e=>{let t=Number(e.product.price),r=(t+(e.details||[]).reduce((e,t)=>e+Number(t.extra_price),0))*e.quantity;return{product_id:e.product.id,quantity:e.quantity,price:t,total_price:r,discount_amount:0,notes:e.notes||"",status:a.i.Cooking,details:e.details||[]}})})},45317:(e,t,r)=>{"use strict";r.d(t,{w:()=>m});var a=r(17577),n=r(26859),s=r(13976),i=r(80440),o=r(54354),l=r(81711),d=r.n(l);let c=new Set([s.i.Paid,s.i.Completed,s.i.Cancelled]),u=[s.i.Pending,s.i.Cooking,s.i.Served,s.i.WaitingForPayment].join(","),p=["orders:create","orders:update","orders:delete","payments:create","payments:update"],y=(e,t)=>e.filter(e=>e.order_type===t&&!c.has(e.status));function m({orderType:e,limit:t=100,page:r=1,statusFilter:s=u,enabled:l=!0,refreshIntervalMs:c=15e3,events:m=p}){let{socket:h}=(0,i.s)(),[x,g]=(0,a.useState)([]),[v,f]=(0,a.useState)(!0),b=(0,a.useCallback)(async(a=!1)=>{if(l){a||f(!0);try{let a=await n.x.getAllSummary(void 0,r,t,s,e),i=y(a.data||[],e);g(e=>d()(e,i)?e:i)}catch{}finally{a||f(!1)}}},[l,t,e,r,s]);return(0,o.D)({socket:h,events:m,onRefresh:()=>b(!0),intervalMs:c,enabled:l,debounceMs:800}),{orders:x,isLoading:v,refresh:b}}},54354:(e,t,r)=>{"use strict";function a(e,t,r,a=e=>e.id,n=()=>!0){}function n({socket:e,events:t=[],onRefresh:r,intervalMs:a,enabled:n=!0,debounceMs:s}){}r.d(t,{D:()=>n,v:()=>a}),r(17577)},3521:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\channels\takeaway\page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,5898,8571,6927,5717,6295,6857,4300,2118],()=>r(64572));module.exports=a})();