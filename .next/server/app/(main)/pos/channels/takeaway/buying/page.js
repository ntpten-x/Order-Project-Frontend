(()=>{var e={};e.id=4674,e.ids=[4674],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},45733:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.Z,__next_app__:()=>l,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>u}),t(40507),t(85429),t(58522),t(61804),t(7629),t(11930),t(12523);var n=t(23191),s=t(88716),i=t(43315),a=t(95231),o={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);t.d(r,o);let u=["",{children:["(main)",{children:["pos",{children:["channels",{children:["takeaway",{children:["buying",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,40507)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\takeaway\\buying\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\takeaway\\buying\\page.tsx"],c="/(main)/pos/channels/takeaway/buying/page",l={require:t,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/pos/channels/takeaway/buying/page",pathname:"/pos/channels/takeaway/buying",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},25922:(e,r,t)=>{Promise.resolve().then(t.bind(t,49543))},49543:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>_});var n=t(10326),s=t(17577),i=t(35047),a=t(46752),o=t(9297),u=t(63196),d=t(26859),c=t(95963),l=t(2504),p=t(13976),y=t(37938),m=t(11834);function x({queueNumber:e}){let{showLoading:r,hideLoading:t}=(0,y.x)(),[x,_]=(0,s.useState)(""),h=(0,i.useRouter)(),{cartItems:P,clearCart:g,getSubtotal:v,getDiscountAmount:b,getFinalPrice:f,selectedDiscount:q,setOrderMode:j,setReferenceId:w,setReferenceCode:k}=(0,u.j)(),D=async()=>{r();try{let r=(0,c.zf)(P,p.m.TakeAway,{subTotal:v(),discountAmount:b(),totalAmount:f()},{discountId:q?.id,queueNumber:e});await d.x.create(r,void 0,x),a.ZP.success("สร้างออเดอร์เรียบร้อยแล้ว"),g(),h.push((0,l.Zu)(p.m.TakeAway))}catch(e){a.ZP.error(e instanceof Error?e.message:"ไม่สามารถทำรายการได้")}finally{t()}};return n.jsx(m.Z,{title:"ระบบขายหน้าร้าน (Take Away)",subtitle:`สั่งกลับบ้าน ${e?`- คิว ${e}`:""}`,icon:n.jsx(o.Z,{style:{fontSize:28}}),onConfirmOrder:D})}function _(){return n.jsx(x,{})}t(33357)},95963:(e,r,t)=>{"use strict";t.d(r,{EO:()=>v,Gs:()=>u,HL:()=>b,M9:()=>f,Nz:()=>x,OY:()=>a,Rr:()=>P,Wl:()=>i,d$:()=>q,d7:()=>o,iN:()=>l,jN:()=>m,ku:()=>h,mz:()=>d,qO:()=>c,xG:()=>y,yj:()=>g,zP:()=>p,zf:()=>j});var n=t(13976),s=t(10985);let i=e=>{if(e.status===s.c.Available)return`/pos/channels/dine-in/${e.id}`;let r=e.active_order_id||e.active_order?.id,t=e.active_order_status||e.active_order?.status;return r?t===n.i.WaitingForPayment?`/pos/items/payment/${r}`:`/pos/orders/${r}`:`/pos/channels/dine-in/${e.id}`},a=e=>{switch(e){case n.i.Pending:return"orange";case n.i.Cooking:return"blue";case n.i.Served:return"green";case n.i.Paid:return"cyan";case n.i.Cancelled:return"red";case n.i.WaitingForPayment:return"gold";default:return"default"}},o=(e,r)=>{switch(e){case n.i.Pending:return"กำลังดำเนินการ";case n.i.Cooking:return"กำลังปรุง";case n.i.Served:if("TakeAway"===r||"Delivery"===r)return"ทำแล้ว";return"เสิร์ฟแล้ว";case n.i.Paid:return"ชำระเงินแล้ว";case n.i.Completed:return"สำเร็จ";case n.i.Cancelled:return"ยกเลิก";case n.i.WaitingForPayment:return"รอชำระเงิน";default:return e}},u=e=>{switch(e){case"DineIn":return"#722ed1";case"TakeAway":return"#fa8c16";case"Delivery":return"#eb2f96";default:return"#1890ff"}},d=e=>{switch(e){case"DineIn":return"ทานที่ร้าน";case"TakeAway":return"สั่งกลับบ้าน";case"Delivery":return"เดลิเวอรี่";default:return e}},c=e=>"DineIn"===e?"เสิร์ฟ":"ทำแล้ว",l=e=>"Delivery"===e?"จัดออเดอร์เสร็จแล้วพร้อมส่งให้ไรเดอร์":"DineIn"===e?"ยืนยันเสิร์ฟพร้อมชำระเงิน":"ยืนยันทำแล้วพร้อมชำระเงิน",p=e=>"DineIn"===e?"เสิร์ฟอาหารแล้ว":"ปรุงเสร็จแล้ว",y=e=>{let r="string"==typeof e?parseFloat(e):e;return`฿${Number(r).toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2})}`},m=e=>"DineIn"===e.order_type?e.table?.table_name||"ไม่ระบุโต๊ะ":"Delivery"===e.order_type?e.delivery_code||e.delivery?.delivery_name||"ไม่ระบุข้อมูล":"TakeAway"===e.order_type?e.order_no||"ไม่ระบุเลขที่":e.order_no||"N/A",x=e=>(e??[]).filter(e=>e.status!==n.i.Cancelled),_=e=>(e??[]).reduce((e,r)=>e+(Number(r.extra_price)||0),0),h=(e,r,t)=>((Number(e)||0)+_(t))*r,P=e=>x(e).reduce((e,r)=>{let t=r.product?.category?.display_name||"ไม่ระบุหมวด";return e[t]=(e[t]||0)+(r.quantity||0),e},{}),g=e=>x(e).reduce((e,r)=>e+Number(r.total_price||0),0),v=e=>"DineIn"===e.order_type?"/pos/channels/dine-in":"TakeAway"===e.order_type?"/pos/channels/takeaway":"Delivery"===e.order_type?"/pos/channels/delivery":"/pos/orders",b=e=>`/pos/orders/${e}`,f=e=>e.status===n.i.WaitingForPayment?e.order_type===n.m.Delivery?`/pos/items/delivery/${e.id}`:`/pos/items/payment/${e.id}`:`/pos/orders/${e.id}`,q=e=>e===n.m.Delivery?"/pos/channels/delivery":e===n.m.TakeAway?"/pos/channels/takeaway":e===n.m.DineIn?"/pos/channels/dine-in":"/pos/channels",j=(e,r,t,s)=>({order_no:s.orderNo||`ORD-${Date.now()}`,order_type:r,sub_total:t.subTotal,discount_amount:t.discountAmount,vat:0,total_amount:t.totalAmount,received_amount:0,change_amount:0,status:n.i.Pending,discount_id:s.discountId||null,payment_method_id:null,table_id:s.tableId||null,delivery_id:s.deliveryId||null,delivery_code:s.deliveryCode||null,items:e.map(e=>{let r=Number(e.product.price),t=(r+(e.details||[]).reduce((e,r)=>e+Number(r.extra_price),0))*e.quantity;return{product_id:e.product.id,quantity:e.quantity,price:r,total_price:t,discount_amount:0,notes:e.notes||"",status:n.i.Cooking,details:e.details||[]}})})},40507:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});let n=(0,t(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\channels\takeaway\buying\page.tsx#default`)}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[9276,8674,8571,8270,9345,108,6226,9042,1399,4658,7557],()=>t(45733));module.exports=n})();