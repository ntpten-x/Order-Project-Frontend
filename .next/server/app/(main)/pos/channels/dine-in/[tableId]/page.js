(()=>{var e={};e.id=7947,e.ids=[7947],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},31308:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.Z,__next_app__:()=>u,originalPathname:()=>d,pages:()=>l,routeModule:()=>p,tree:()=>c}),r(43208),r(85429),r(58522),r(61804),r(7629),r(11930),r(12523);var s=r(23191),i=r(88716),n=r(43315),a=r(95231),o={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);r.d(t,o);let c=["",{children:["(main)",{children:["pos",{children:["channels",{children:["dine-in",{children:["[tableId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,43208)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\dine-in\\[tableId]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],l=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\dine-in\\[tableId]\\page.tsx"],d="/(main)/pos/channels/dine-in/[tableId]/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/pos/channels/dine-in/[tableId]/page",pathname:"/pos/channels/dine-in/[tableId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},89394:(e,t,r)=>{Promise.resolve().then(r.bind(r,31036))},31036:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(10326),i=r(17577),n=r(35047),a=r(18418),o=r(46752),c=r(62938),l=r(63196);r(31499);var d=r(26859),u=r(94001),p=r(11834),h=r(67355),m=r(13976),x=r(3548),P=r(2504),b=r(37938);function j({tableId:e}){let{showLoading:t,hideLoading:r}=(0,b.x)(),[a,j]=(0,i.useState)(""),[_,f]=(0,i.useState)(""),y=(0,n.useRouter)(),{user:g}=(0,u.a)(),E=(0,h.L)(),{cartItems:w,clearCart:q,getSubtotal:v,getDiscountAmount:O,getFinalPrice:F,selectedDiscount:T,setOrderMode:k,setReferenceId:S,setReferenceCode:$}=(0,l.j)(),I=async()=>{t("กำลังสร้างออเดอร์...");try{let t={order_no:`ORD-${Date.now()}`,order_type:m.m.DineIn,sub_total:v(),discount_amount:O(),vat:0,total_amount:F(),received_amount:0,change_amount:0,status:m.i.Pending,discount_id:T?.id||null,payment_method_id:null,table_id:e,delivery_id:null,delivery_code:null,created_by_id:g?.id||null,items:w.map(e=>{let t=Number(e.product.price),r=(e.details||[]).reduce((e,t)=>e+Number(t.extra_price),0),s=(t+r)*e.quantity;return{product_id:e.product.id,quantity:e.quantity,price:t,total_price:s,discount_amount:0,notes:e.notes||"",status:m.i.Cooking,details:e.details||[]}})};if(!E){x.x.addToQueue("CREATE_ORDER",t),o.ZP.warning("บันทึกออเดอร์แบบ Offline แล้ว (จะซิงค์เมื่อมีเน็ต)"),q(),y.push((0,P.Zu)(m.m.DineIn));return}await d.x.create(t,void 0,a),o.ZP.success("สร้างออเดอร์เรียบร้อยแล้ว"),q(),y.push((0,P.Zu)(m.m.DineIn))}catch(e){o.ZP.error(e instanceof Error?e.message:"ไม่สามารถทำรายการได้")}finally{r()}};return s.jsx(p.Z,{title:"ระบบขายหน้าร้าน",subtitle:_?`ทานที่ร้าน - โต๊ะ ${_}`:`ทานที่ร้าน - โต๊ะ ${e.substring(0,8)}...`,icon:s.jsx(c.Z,{style:{fontSize:28}}),onConfirmOrder:I})}r(33357);var _=r(26963);function f(){let e=(0,n.useParams)().tableId;return s.jsx(_.Z,{maxWidth:99999,style:{padding:0},children:s.jsx(a.default,{style:{background:"transparent"},children:s.jsx(a.default.Content,{style:{background:"transparent"},children:s.jsx(j,{tableId:e})})})})}},31499:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(12529),i=r(40820),n=r(40577);let a=i.q.POS.TABLES,o=(e,t="application/json")=>{let r={};return t&&(r["Content-Type"]=t),e&&(r.Cookie=e),r},c={getAll:async(e,t)=>{let r=(0,s.b)("GET",a),i=new URLSearchParams(t||"");i.has("page")||i.set("page","1"),i.has("limit")||i.set("limit","200");let c=i.toString();c&&(r+=`?${c}`);let l=o(e,""),d=await fetch(r,{cache:"no-store",headers:l,credentials:"include"});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error((0,n.i_)(e,"Failed to fetch tables"))}return(0,n.XO)(await d.json())},getById:async(e,t)=>{let r=(0,s.b)("GET",`${a}/${e}`),i=o(t,""),c=await fetch(r,{cache:"no-store",headers:i,credentials:"include"});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error((0,n.i_)(e,"Failed to fetch tables"))}return(0,n.hH)(await c.json())},getByName:async(e,t)=>{let r=(0,s.b)("GET",`${a}/getByName/${e}`),i=o(t,""),c=await fetch(r,{cache:"no-store",headers:i,credentials:"include"});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error((0,n.i_)(e,"Failed to fetch tables"))}return(0,n.hH)(await c.json())},create:async(e,t,r)=>{let i=(0,s.b)("POST",`${a}`),c=o(t);r&&(c["X-CSRF-Token"]=r);let l=await fetch(i,{method:"POST",headers:c,credentials:"include",body:JSON.stringify(e)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,n.i_)(e,"Failed to create table"))}return(0,n.hH)(await l.json())},update:async(e,t,r,i)=>{let c=(0,s.b)("PUT",`${a}/${e}`),l=o(r);i&&(l["X-CSRF-Token"]=i);let d=await fetch(c,{method:"PUT",headers:l,credentials:"include",body:JSON.stringify(t)});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error((0,n.i_)(e,"Failed to update table"))}return(0,n.hH)(await d.json())},delete:async(e,t,r)=>{let i=(0,s.b)("DELETE",`${a}/${e}`),c=o(t,"");r&&(c["X-CSRF-Token"]=r);let l=await fetch(i,{method:"DELETE",headers:c,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,n.i_)(e,"Failed to delete table"))}}}},43208:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\channels\dine-in\[tableId]\page.tsx#default`)}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,4421,8571,1742,108,9244,8963,1399,4658,7557],()=>r(31308));module.exports=s})();