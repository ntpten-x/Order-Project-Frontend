(()=>{var e={};e.id=7947,e.ids=[7947],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},31308:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.Z,__next_app__:()=>u,originalPathname:()=>d,pages:()=>l,routeModule:()=>p,tree:()=>c}),r(43208),r(85429),r(58522),r(86296),r(7629),r(11930),r(12523);var s=r(23191),n=r(88716),o=r(43315),i=r(95231),a={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>i[e]);r.d(t,a);let c=["",{children:["(main)",{children:["pos",{children:["channels",{children:["dine-in",{children:["[tableId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,43208)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\dine-in\\[tableId]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,86296)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],l=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\channels\\dine-in\\[tableId]\\page.tsx"],d="/(main)/pos/channels/dine-in/[tableId]/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(main)/pos/channels/dine-in/[tableId]/page",pathname:"/pos/channels/dine-in/[tableId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},89394:(e,t,r)=>{Promise.resolve().then(r.bind(r,31036))},31036:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(10326),n=r(17577),o=r(35047),i=r(46752),a=r(62938),c=r(63196);r(31499);var l=r(26859),d=r(94001),u=r(11834),p=r(67355),h=r(13976),m=r(3548),x=r(2504),P=r(37938);function b({tableId:e}){let{showLoading:t,hideLoading:r}=(0,P.x)(),[b,g]=(0,n.useState)(""),[f,j]=(0,n.useState)(""),y=(0,o.useRouter)(),{user:_}=(0,d.a)(),E=(0,p.L)(),{cartItems:q,clearCart:w,getSubtotal:v,getDiscountAmount:O,getFinalPrice:F,selectedDiscount:T,setOrderMode:S,setReferenceId:k,setReferenceCode:I}=(0,c.j)(),$=async()=>{t("กำลังสร้างออเดอร์...");try{let t={order_no:`ORD-${Date.now()}`,order_type:h.m.DineIn,sub_total:v(),discount_amount:O(),vat:0,total_amount:F(),received_amount:0,change_amount:0,status:h.i.Pending,discount_id:T?.id||null,payment_method_id:null,table_id:e,delivery_id:null,delivery_code:null,created_by_id:_?.id||null,items:q.map(e=>{let t=Number(e.product.price),r=(e.details||[]).reduce((e,t)=>e+Number(t.extra_price),0),s=(t+r)*e.quantity;return{product_id:e.product.id,quantity:e.quantity,price:t,total_price:s,discount_amount:0,notes:e.notes||"",status:h.i.Cooking,details:e.details||[]}})};if(!E){m.x.addToQueue("CREATE_ORDER",t),i.ZP.warning("บันทึกออเดอร์แบบ Offline แล้ว (จะซิงค์เมื่อมีเน็ต)"),w(),y.push((0,x.Zu)(h.m.DineIn));return}await l.x.create(t,void 0,b),i.ZP.success("สร้างออเดอร์เรียบร้อยแล้ว"),w(),y.push((0,x.Zu)(h.m.DineIn))}catch(e){i.ZP.error(e instanceof Error?e.message:"ไม่สามารถทำรายการได้")}finally{r()}};return s.jsx(u.Z,{title:"ระบบขายหน้าร้าน (Dine In)",subtitle:`ทานที่ร้าน - โต๊ะ ${f||e}`,icon:s.jsx(a.Z,{style:{fontSize:28}}),onConfirmOrder:$})}function g(){let e=(0,o.useParams)().tableId;return s.jsx(b,{tableId:e})}r(33357)},31499:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var s=r(12529);let n=r(40820).q.POS.TABLES,o=(e,t="application/json")=>{let r={};return t&&(r["Content-Type"]=t),e&&(r.Cookie=e),r},i={getAll:async(e,t)=>{let r=(0,s.b)("GET",n),i=new URLSearchParams(t||"");i.has("page")||i.set("page","1"),i.has("limit")||i.set("limit","200");let a=i.toString();a&&(r+=`?${a}`);let c=o(e,""),l=await fetch(r,{cache:"no-store",headers:c,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch tables")}return l.json()},getById:async(e,t)=>{let r=(0,s.b)("GET",`${n}/${e}`),i=o(t,""),a=await fetch(r,{cache:"no-store",headers:i,credentials:"include"});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch tables")}return a.json()},getByName:async(e,t)=>{let r=(0,s.b)("GET",`${n}/getByName/${e}`),i=o(t,""),a=await fetch(r,{cache:"no-store",headers:i,credentials:"include"});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch tables")}return a.json()},create:async(e,t,r)=>{let i=(0,s.b)("POST",`${n}`),a=o(t);r&&(a["X-CSRF-Token"]=r);let c=await fetch(i,{method:"POST",headers:a,credentials:"include",body:JSON.stringify(e)});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to create table")}return c.json()},update:async(e,t,r,i)=>{let a=(0,s.b)("PUT",`${n}/${e}`),c=o(r);i&&(c["X-CSRF-Token"]=i);let l=await fetch(a,{method:"PUT",headers:c,credentials:"include",body:JSON.stringify(t)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to update table")}return l.json()},delete:async(e,t,r)=>{let i=(0,s.b)("DELETE",`${n}/${e}`),a=o(t,"");r&&(a["X-CSRF-Token"]=r);let c=await fetch(i,{method:"DELETE",headers:a,credentials:"include"});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to delete table")}}}},43208:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\channels\dine-in\[tableId]\page.tsx#default`)}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5898,8571,6927,108,6226,5717,6857,4300,7557],()=>r(31308));module.exports=s})();