(()=>{var e={};e.id=4900,e.ids=[4900,5717],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},216:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.Z,__next_app__:()=>u,originalPathname:()=>c,pages:()=>d,routeModule:()=>h,tree:()=>l}),r(29940),r(85429),r(58522),r(86296),r(7629),r(11930),r(12523);var s=r(23191),n=r(88716),i=r(43315),o=r(95231),a={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>o[e]);r.d(t,a);let l=["",{children:["(main)",{children:["pos",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,29940)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\orders\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,86296)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\orders\\page.tsx"],c="/(main)/pos/orders/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(main)/pos/orders/page",pathname:"/pos/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},37085:(e,t,r)=>{Promise.resolve().then(r.bind(r,4043))},2643:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(17577);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var i=r(74082);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}let a=s.forwardRef((e,t)=>s.createElement(i.Z,o({},e,{ref:t,icon:n})))},63699:function(e,t,r){var s;s=function(e){"use strict";var t={name:"th",weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"},ordinal:function(e){return e+"."}};return(e&&"object"==typeof e&&"default"in e?e:{default:e}).default.locale(t,null,!0),t},e.exports=s(r(88295))},8472:()=>{},51596:(e,t,r)=>{"use strict";r(8472);var s=r(17577),n=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(s),i="undefined"!=typeof process&&process.env&&!0,o=function(e){return"[object String]"===Object.prototype.toString.call(e)},a=function(){function e(e){var t=void 0===e?{}:e,r=t.name,s=void 0===r?"stylesheet":r,n=t.optimizeForSpeed,a=void 0===n?i:n;l(o(s),"`name` must be a string"),this._name=s,this._deletedRulePlaceholder="#"+s+"-deleted-rule____{}",l("boolean"==typeof a,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=a,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){l("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),l(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;l(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){return l(o(e),"`insertRule` accepts only strings"),"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++},t.replaceRule=function(e,t){this._optimizeForSpeed;var r=this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(s){i||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}return e},t.deleteRule=function(e){this._serverSheet.deleteRule(e)},t.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},t.cssRules=function(){return this._serverSheet.cssRules},t.makeStyleTag=function(e,t,r){t&&l(o(t),"makeStyleTag accepts only strings as second parameter");var s=document.createElement("style");this._nonce&&s.setAttribute("nonce",this._nonce),s.type="text/css",s.setAttribute("data-"+e,""),t&&s.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return r?n.insertBefore(s,r):n.appendChild(s),s},function(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function l(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},c={};function u(e,t){if(!t)return"jsx-"+e;var r=String(t),s=e+r;return c[s]||(c[s]="jsx-"+d(e+"-"+r)),c[s]}function h(e,t){var r=e+(t=t.replace(/\/style/gi,"\\/style"));return c[r]||(c[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),c[r]}var p=s.createContext(null);p.displayName="StyleSheetContext",n.default.useInsertionEffect||n.default.useLayoutEffect;var m=void 0;function y(e){var t=m||s.useContext(p);return t&&t.add(e),null}y.dynamic=function(e){return e.map(function(e){return u(e[0],e[1])}).join(" ")},t.style=y},77626:(e,t,r)=>{"use strict";e.exports=r(51596).style},4043:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var s=r(10326),n=r(77626),i=r.n(n),o=r(17577),a=r(58184),l=r(3861),d=r(61357),c=r(276),u=r(71935),h=r(49909),p=r(56249),m=r(13483),y=r(75698),x=r(97458),f=r(29116),_=r(2643);let v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-40 824H232V687h97.9c11.6 32.8 32 62.3 59.1 84.7 34.5 28.5 78.2 44.3 123 44.3s88.5-15.7 123-44.3c27.1-22.4 47.5-51.9 59.1-84.7H792v-63H643.6l-5.2 24.7C626.4 708.5 573.2 752 512 752s-114.4-43.5-126.5-103.3l-5.2-24.7H232V136h560v752zM320 341h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 160h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"container",theme:"outlined"};var g=r(74082);function j(){return(j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}let S=o.forwardRef((e,t)=>o.createElement(g.Z,j({},e,{ref:t,icon:v})));var b=r(80490),P=r(22817),L=r(35047),w=r(13976),R=r(95963),k=r(43401),M=r(80440),z=r(54354),q=r(20108),C=r(3341),O=r(26859),F=r(88295),Z=r.n(F);r(63699);let{Title:Y,Text:E}=a.default,{useBreakpoint:H}=l.default;function T(){let e=(0,L.useRouter)(),t=!H().md,{socket:r}=(0,M.s)(),[n,a]=(0,o.useState)(1),[l,v]=(0,o.useState)(""),[g,j]=(0,o.useState)(""),{orders:F,total:T,isLoading:N,refetch:D}=function({page:e=1,limit:t=50,status:r,type:s,query:n}){let{data:i,error:o,isLoading:a,isFetching:l,refetch:d}=(0,q.a)({queryKey:["ordersSummary",e,t,r||"all",s||"all",n||""],queryFn:async()=>await O.x.getAllSummary(void 0,e,t,r,s,n),placeholderData:C.Wk,staleTime:3e3});return{orders:i?.data||[],total:i?.total||0,currentPage:i?.page||e,lastPage:i?.last_page||1,isLoading:a,isFetching:l,isError:o,refetch:d}}({page:n,limit:10,status:"Pending,Cooking,Served,WaitingForPayment",query:g||void 0});(0,z.D)({socket:r,events:["orders:create","orders:update","orders:delete","payments:create","payments:update"],onRefresh:()=>D(),intervalMs:15e3,debounceMs:1e3});let A=[{title:"เลขที่ออเดอร์",dataIndex:"order_no",key:"order_no",align:"center",render:e=>s.jsx(E,{strong:!0,style:{whiteSpace:"nowrap"},children:e})},{title:"วันเวลา",dataIndex:"create_date",key:"date",align:"center",render:e=>(0,s.jsxs)("div",{style:{whiteSpace:"nowrap"},children:[s.jsx(E,{children:Z()(e).format("DD MMM YYYY")}),s.jsx("br",{}),s.jsx(E,{type:"secondary",style:{fontSize:12},children:Z()(e).format("HH:mm")})]})},{title:"ประเภท",dataIndex:"order_type",key:"type",align:"center",render:e=>s.jsx(d.Z,{color:(0,R.Gs)(e),style:{margin:0},children:(0,R.mz)(e)})},{title:"โต๊ะ / รหัสอ้างอิง",key:"reference",align:"center",render:(e,t)=>{let r=(0,R.jN)(t),n="default";return t.order_type===w.m.DineIn&&(n="cyan"),t.order_type===w.m.Delivery&&(n="orange"),s.jsx(d.Z,{color:n,style:{margin:0},children:r})}},{title:"รายละเอียดรายการ",key:"items_summary",width:200,align:"center",render:(e,t)=>{let r=t.items_summary||{},n=t.items_count||0,i=Object.entries(r);return 0===n?s.jsx(E,{type:"secondary",children:"-"}):(0,s.jsxs)("div",{style:{fontSize:13,lineHeight:"1.6",textAlign:"left",display:"inline-block",minWidth:140},children:[i.length>0?(0,s.jsxs)(s.Fragment,{children:[i.map(([e,t])=>(0,s.jsxs)("div",{style:k.L2.summaryRow,children:[s.jsx(E,{type:"secondary",children:e}),(0,s.jsxs)(E,{strong:!0,children:[t," รายการ"]})]},e)),s.jsx(c.Z,{style:{margin:"4px 0"}})]}):null,(0,s.jsxs)("div",{style:k.L2.summaryRowBold,children:[s.jsx(E,{strong:!0,children:"รวม"}),(0,s.jsxs)(E,{strong:!0,style:{color:k.mv.primary},children:[n," รายการ"]})]})]})}},{title:"ยอดรวม",dataIndex:"total_amount",key:"total",align:"center",render:e=>s.jsx(E,{strong:!0,style:{whiteSpace:"nowrap"},children:(0,R.xG)(e)})},{title:"สถานะ",dataIndex:"status",key:"status",align:"center",render:e=>s.jsx(d.Z,{color:(0,R.OY)(e),style:{margin:0},children:(0,R.d7)(e)})},{title:"จัดการ",key:"action",align:"center",render:(t,r)=>s.jsx(u.ZP,{type:"primary",icon:s.jsx(f.Z,{}),onClick:()=>e.push(`/pos/orders/${r.id}`),style:{whiteSpace:"nowrap"},children:"ดูรายละเอียด"})}];return(0,s.jsxs)("div",{style:k.L2.container,children:[s.jsx(i(),{id:k.$k.__hash,children:k.$k}),s.jsx("div",{style:k.L2.header,className:"orders-header",children:(0,s.jsxs)("div",{style:k.L2.headerContent,className:"orders-content",children:[s.jsx(u.ZP,{icon:s.jsx(_.Z,{}),onClick:()=>e.push("/pos"),type:"text",style:{color:"#fff",fontSize:18,marginRight:16}}),s.jsx("div",{style:k.L2.headerIcon,className:"orders-header-icon",children:s.jsx(S,{style:{color:"#fff"}})}),(0,s.jsxs)("div",{style:k.L2.headerTextContainer,children:[s.jsx(Y,{level:2,style:k.L2.headerTitle,className:"orders-page-title",children:"รายการออเดอร์ปัจจุบัน"}),s.jsx(E,{style:k.L2.headerSubtitle,className:"orders-page-subtitle",children:"จัดการและติดตามสถานะออเดอร์ที่กำลังดำเนินการ"})]}),s.jsx(h.default,{allowClear:!0,placeholder:"ค้นหาเลขที่ออเดอร์/โต๊ะ/เดลิเวอรี่",value:l,onChange:e=>v(e.target.value),size:t?"middle":"large",style:{width:t?200:280}}),s.jsx(u.ZP,{icon:s.jsx(b.Z,{}),onClick:()=>D(),size:t?"middle":"large",ghost:!0,children:"รีเฟรช"})]})}),s.jsx("div",{style:k.L2.contentWrapper,className:"orders-content-wrapper",children:s.jsx(p.Z,{bordered:!1,style:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},bodyStyle:k.L2.cardBody,children:t?s.jsx(x.Z,{loading:N,dataSource:F,renderItem:t=>{let r=t.items_count||0;return(0,s.jsxs)("div",{style:k.L2.orderCard,onClick:()=>e.push(`/pos/orders/${t.id}`),className:"orders-card",children:[(0,s.jsxs)("div",{style:k.L2.cardHeader,className:"orders-card-header",children:[(0,s.jsxs)("div",{style:k.L2.cardHeaderLeft,children:[(0,s.jsxs)(E,{strong:!0,style:{fontSize:16},children:["#",t.order_no]}),s.jsx(d.Z,{color:(0,R.OY)(t.status),style:{margin:0},children:(0,R.d7)(t.status)})]}),s.jsx(d.Z,{color:(0,R.Gs)(t.order_type),children:(0,R.mz)(t.order_type)})]}),(0,s.jsxs)("div",{style:k.L2.cardBody,className:"orders-card-body",children:[(0,s.jsxs)("div",{style:k.L2.refSection,children:[t.order_type===w.m.DineIn&&t.table&&(0,s.jsxs)("div",{style:k.L2.refValue,className:"orders-ref-value",children:["โต๊ะ ",t.table.table_name]}),(t.order_type===w.m.Delivery||t.order_type===w.m.TakeAway)&&s.jsx("div",{style:k.L2.refValue,className:"orders-ref-value",children:t.delivery_code?`Ref: ${t.delivery_code}`:"-"})]}),(0,s.jsxs)("div",{style:k.L2.itemsSummary,children:[(0,s.jsxs)("div",{style:k.L2.metaSection,children:[s.jsx(S,{}),(0,s.jsxs)(E,{strong:!0,children:[r," รายการ"]})]}),(0,s.jsxs)("div",{style:k.L2.metaSection,children:[s.jsx(P.Z,{}),s.jsx(E,{children:Z()(t.create_date).format("HH:mm น.")})]})]}),(0,s.jsxs)("div",{style:k.L2.totalSection,children:[s.jsx(E,{style:k.L2.totalLabel,children:"ยอดรวม"}),s.jsx("div",{style:k.L2.totalAmount,className:"orders-total-amount",children:(0,R.xG)(Number(t.total_amount))})]}),s.jsx(u.ZP,{type:"primary",ghost:!0,icon:s.jsx(f.Z,{}),style:k.L2.actionButton,children:"รายละเอียด"})]})]})},pagination:{current:n,pageSize:10,total:T,onChange:e=>a(e),size:"small",style:{textAlign:"center",marginTop:16}}}):s.jsx(m.Z,{columns:A,dataSource:F,loading:N,rowKey:"id",virtual:!0,scroll:{y:600},pagination:{current:n,pageSize:10,total:T,onChange:e=>a(e),showTotal:e=>`ทั้งหมด ${e} รายการ`},locale:{emptyText:s.jsx(y.Z,{description:"ไม่พบรายการออเดอร์"})}})})})]})}Z().locale("th")},29940:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\orders\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5898,8571,6927,108,6857,4300,4259],()=>r(216));module.exports=s})();