(()=>{var e={};e.id=7068,e.ids=[7068],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},33971:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.Z,__next_app__:()=>u,originalPathname:()=>c,pages:()=>d,routeModule:()=>h,tree:()=>l}),s(3040),s(85429),s(58522),s(61804),s(7629),s(11930),s(12523);var r=s(23191),i=s(88716),n=s(43315),a=s(95231),o={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);s.d(t,o);let l=["",{children:["(main)",{children:["pos",{children:["shiftHistory",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3040)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\shiftHistory\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\shiftHistory\\page.tsx"],c="/(main)/pos/shiftHistory/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/pos/shiftHistory/page",pathname:"/pos/shiftHistory",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},97227:(e,t,s)=>{Promise.resolve().then(s.bind(s,79837))},2643:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var n=s(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}let o=r.forwardRef((e,t)=>r.createElement(n.Z,a({},e,{ref:t,icon:i})))},12226:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};var n=s(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}let o=r.forwardRef((e,t)=>r.createElement(n.Z,a({},e,{ref:t,icon:i})))},8039:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917 211.1l-199.2 24c-6.6.8-9.4 8.9-4.7 13.6l59.3 59.3-226 226-101.8-101.7c-6.3-6.3-16.4-6.2-22.6 0L100.3 754.1a8.03 8.03 0 000 11.3l45 45.2c3.1 3.1 8.2 3.1 11.3 0L433.3 534 535 635.7c6.3 6.2 16.4 6.2 22.6 0L829 364.5l59.3 59.3a8.01 8.01 0 0013.6-4.7l24-199.2c.7-5.1-3.7-9.5-8.9-8.8z"}}]},name:"rise",theme:"outlined"};var n=s(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}let o=r.forwardRef((e,t)=>r.createElement(n.Z,a({},e,{ref:t,icon:i})))},22896:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zm-405.8-201c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.3 0-12.7-6.5-12.7h-55.2c-5.1 0-10 2.5-13 6.6L468.9 542.4l-64.7-89.1z"}}]},name:"safety-certificate",theme:"outlined"};var n=s(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e}).apply(this,arguments)}let o=r.forwardRef((e,t)=>r.createElement(n.Z,a({},e,{ref:t,icon:i})))},63699:function(e,t,s){var r;r=function(e){"use strict";var t={name:"th",weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"},ordinal:function(e){return e+"."}};return(e&&"object"==typeof e&&"default"in e?e:{default:e}).default.locale(t,null,!0),t},e.exports=r(s(88295))},38476:function(e){var t;t=function(){"use strict";var e,t,s=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,r=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,i={years:31536e6,months:2628e6,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},n=function(e){return e instanceof u},a=function(e,t,s){return new u(e,s,t.$l)},o=function(e){return t.p(e)+"s"},l=function(e){return e<0},d=function(e){return l(e)?Math.ceil(e):Math.floor(e)},c=function(e,t){return e?l(e)?{negative:!0,format:""+Math.abs(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},u=function(){function l(e,t,s){var n=this;if(this.$d={},this.$l=s,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return a(e*i[o(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==typeof e)return Object.keys(e).forEach(function(t){n.$d[o(t)]=e[t]}),this.calMilliseconds(),this;if("string"==typeof e){var l=e.match(r);if(l){var d=l.slice(2).map(function(e){return null!=e?Number(e):0});return this.$d.years=d[0],this.$d.months=d[1],this.$d.weeks=d[2],this.$d.days=d[3],this.$d.hours=d[4],this.$d.minutes=d[5],this.$d.seconds=d[6],this.calMilliseconds(),this}}return this}var u=l.prototype;return u.calMilliseconds=function(){var e=this;this.$ms=Object.keys(this.$d).reduce(function(t,s){return t+(e.$d[s]||0)*i[s]},0)},u.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=d(e/31536e6),e%=31536e6,this.$d.months=d(e/2628e6),e%=2628e6,this.$d.days=d(e/864e5),e%=864e5,this.$d.hours=d(e/36e5),e%=36e5,this.$d.minutes=d(e/6e4),e%=6e4,this.$d.seconds=d(e/1e3),e%=1e3,this.$d.milliseconds=e},u.toISOString=function(){var e=c(this.$d.years,"Y"),t=c(this.$d.months,"M"),s=+this.$d.days||0;this.$d.weeks&&(s+=7*this.$d.weeks);var r=c(s,"D"),i=c(this.$d.hours,"H"),n=c(this.$d.minutes,"M"),a=this.$d.seconds||0;this.$d.milliseconds&&(a+=this.$d.milliseconds/1e3,a=Math.round(1e3*a)/1e3);var o=c(a,"S"),l=e.negative||t.negative||r.negative||i.negative||n.negative||o.negative,d=i.format||n.format||o.format?"T":"",u=(l?"-":"")+"P"+e.format+t.format+r.format+d+i.format+n.format+o.format;return"P"===u||"-P"===u?"P0D":u},u.toJSON=function(){return this.toISOString()},u.format=function(e){var r={Y:this.$d.years,YY:t.s(this.$d.years,2,"0"),YYYY:t.s(this.$d.years,4,"0"),M:this.$d.months,MM:t.s(this.$d.months,2,"0"),D:this.$d.days,DD:t.s(this.$d.days,2,"0"),H:this.$d.hours,HH:t.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:t.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:t.s(this.$d.seconds,2,"0"),SSS:t.s(this.$d.milliseconds,3,"0")};return(e||"YYYY-MM-DDTHH:mm:ss").replace(s,function(e,t){return t||String(r[e])})},u.as=function(e){return this.$ms/i[o(e)]},u.get=function(e){var t=this.$ms,s=o(e);return"milliseconds"===s?t%=1e3:t="weeks"===s?d(t/i[s]):this.$d[s],t||0},u.add=function(e,t,s){var r;return r=t?e*i[o(t)]:n(e)?e.$ms:a(e,this).$ms,a(this.$ms+r*(s?-1:1),this)},u.subtract=function(e,t){return this.add(e,t,!0)},u.locale=function(e){var t=this.clone();return t.$l=e,t},u.clone=function(){return a(this.$ms,this)},u.humanize=function(t){return e().add(this.$ms,"ms").locale(this.$l).fromNow(!t)},u.valueOf=function(){return this.asMilliseconds()},u.milliseconds=function(){return this.get("milliseconds")},u.asMilliseconds=function(){return this.as("milliseconds")},u.seconds=function(){return this.get("seconds")},u.asSeconds=function(){return this.as("seconds")},u.minutes=function(){return this.get("minutes")},u.asMinutes=function(){return this.as("minutes")},u.hours=function(){return this.get("hours")},u.asHours=function(){return this.as("hours")},u.days=function(){return this.get("days")},u.asDays=function(){return this.as("days")},u.weeks=function(){return this.get("weeks")},u.asWeeks=function(){return this.as("weeks")},u.months=function(){return this.get("months")},u.asMonths=function(){return this.as("months")},u.years=function(){return this.get("years")},u.asYears=function(){return this.as("years")},l}(),h=function(e,t,s){return e.add(t.years()*s,"y").add(t.months()*s,"M").add(t.days()*s,"d").add(t.hours()*s,"h").add(t.minutes()*s,"m").add(t.seconds()*s,"s").add(t.milliseconds()*s,"ms")};return function(s,r,i){e=i,t=i().$utils(),i.duration=function(e,t){return a(e,{$l:i.locale()},t)},i.isDuration=n;var o=r.prototype.add,l=r.prototype.subtract;r.prototype.add=function(e,t){return n(e)?h(this,e,1):o.bind(this)(e,t)},r.prototype.subtract=function(e,t){return n(e)?h(this,e,-1):l.bind(this)(e,t)}}},e.exports=t()},79837:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Q});var r,i=s(10326),n=s(17577),a=s(44976),o=s(20108),l=s(66874),d=s(14374),c=s(61357),u=s(71935),h=s(64635),f=s(49909),p=s(92442),m=s(92121),x=s(43778),y=s(75958),g=s(56249),j=s(4779),v=s(80490),b=s(22817),_=s(22896),$=s(8039),M=s(24395),S=s(63348),O=s(9078),P=s(12226),Y=s(88295),Z=s.n(Y),C=s(38476),w=s.n(C);s(63699);var D=s(35047),L=s(80440),H=s(7670),k=s(94658);(function(e){e.OPEN="OPEN",e.CLOSED="CLOSED"})(r||(r={})),s(83179);var q=s(26902),E=s(26963),z=s(76892),T=s(18978),R=s(52647),F=s(36231),I=s(44528);let N={...(0,I.yf)("linear-gradient(135deg, #0284c7 0%, #0369a1 100%)"),shiftCard:I.YO,shiftCardInner:I.lv},B=(0,I.IU)(".shift-history-page",".shift-history-card");Z().extend(w()),Z().locale("th");let{Text:A,Title:W}=l.default,{RangePicker:G}=d.default;function V(e){return Number(e||0)}function J(e){return`฿${V(e).toLocaleString("th-TH")}`}function K(e){if(!e)return"-";let t=Z()(e);return t.isValid()?t.format("DD/MM/YYYY HH:mm"):"-"}function U({shift:e,onViewSummary:t}){let s=e.status===r.CLOSED;return i.jsx("div",{className:"shift-history-card",style:{...N.shiftCard(!0),borderRadius:16,marginBottom:12},children:(0,i.jsxs)("div",{style:{...N.shiftCardInner,alignItems:"flex-start"},children:[(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6,flexWrap:"wrap"},children:[(0,i.jsxs)(A,{strong:!0,style:{fontSize:15,color:"#0f172a"},children:["Shift #",e.id.slice(0,8)]}),i.jsx(c.Z,{color:s?"default":"green",children:s?"ปิดกะแล้ว":"กำลังเปิดกะ"})]}),(0,i.jsxs)(A,{type:"secondary",style:{display:"block",fontSize:13},children:["ผู้เปิดกะ: ",e.user?.name||e.user?.username||"-"]}),(0,i.jsxs)(A,{type:"secondary",style:{display:"block",fontSize:13},children:["เปิดกะ: ",K(e.open_time)," | ปิดกะ: ",K(e.close_time)]}),(0,i.jsxs)(A,{type:"secondary",style:{display:"block",fontSize:12,marginTop:2},children:["ระยะเวลากะ: ",function(e,t){let s=Z()(e),r=t?Z()(t):Z()();if(!s.isValid()||!r.isValid())return"-";let i=Z().duration(r.diff(s)),n=Math.floor(i.asHours()),a=i.minutes();return`${n} ชม. ${a} นาที`}(e.open_time,e.close_time)]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:8,marginTop:10},children:[i.jsx(X,{label:"เงินเริ่มต้น",value:J(e.start_amount),color:"#334155"}),i.jsx(X,{label:"ยอดคาดหวัง",value:J(e.expected_amount),color:"#0369a1"}),i.jsx(X,{label:"ยอดนับจริง",value:J(e.end_amount),color:"#0f766e"}),i.jsx(X,{label:"ผลต่าง",value:J(e.diff_amount),color:V(e.diff_amount)>=0?"#059669":"#dc2626"})]})]}),i.jsx(u.ZP,{onClick:()=>t(e.id),children:"ดูสรุปกะ"})]})})}function X({label:e,value:t,color:s}){return(0,i.jsxs)("div",{style:{border:"1px solid #e2e8f0",borderRadius:10,padding:"8px 10px"},children:[i.jsx(A,{type:"secondary",style:{fontSize:12},children:e}),i.jsx("div",{style:{fontWeight:700,color:s,marginTop:2},children:t})]})}function Q(){let e=(0,D.useRouter)();(0,a.NL)();let{socket:t}=(0,L.s)(),{isAuthorized:s,isChecking:l}=(0,H.e)({allowedRoles:["Admin","Manager","Employee"]}),[d,Y]=(0,n.useState)(1),[C,w]=(0,n.useState)(10),[I,W]=(0,n.useState)(""),[K,X]=(0,n.useState)("all"),[Q,er]=(0,n.useState)(null),[ei,en]=(0,n.useState)(null),[ea,eo]=(0,n.useState)(!1),[el,ed]=(0,n.useState)(!1),ec=(0,n.useMemo)(()=>Q?.[0]?Q[0].startOf("day").toISOString():void 0,[Q]),eu=(0,n.useMemo)(()=>Q?.[1]?Q[1].endOf("day").toISOString():void 0,[Q]),eh=(0,n.useMemo)(()=>Q&&(Q[0]||Q[1])?Q[0]&&Q[1]&&Q[0].isSame(Q[1],"day")?Q[0].format("DD/MM/YYYY"):`${Q[0]?.format("DD/MM/YYYY")??""} - ${Q[1]?.format("DD/MM/YYYY")??""}`:"ทั้งหมด",[Q]),ef=[{label:"ทั้งหมด",value:null},{label:"วันนี้",value:[Z()().startOf("day"),Z()().endOf("day")]},{label:"เมื่อวาน",value:[Z()().subtract(1,"day").startOf("day"),Z()().subtract(1,"day").endOf("day")]},{label:"7 วันล่าสุด",value:[Z()().subtract(6,"days").startOf("day"),Z()().endOf("day")]},{label:"เดือนนี้",value:[Z()().startOf("month"),Z()().endOf("month")]}],ep=(0,o.a)({queryKey:["shiftHistory",d,C,I,K,ec,eu],queryFn:async()=>k.t.getHistory({page:d,limit:C,q:I.trim()||void 0,status:"all"===K?void 0:K,date_from:ec,date_to:eu}),placeholderData:e=>e,enabled:s,staleTime:15e3}),em=(0,o.a)({queryKey:["shiftSummaryById",ei],queryFn:async()=>ei?await k.t.getSummary(ei):null,enabled:!!ei,staleTime:1e4}),ex=ep.data,ey=ex?.data||[],eg=ex?.pagination,ej=ex?.stats,ev=ej?.open||0,eb=ej?.closed||0,e_=ej?.total||0;return l?i.jsx(q.H,{message:"กำลังตรวจสอบสิทธิ์การใช้งาน..."}):s?(0,i.jsxs)("div",{className:"shift-history-page",style:N.container,children:[i.jsx("style",{children:B}),i.jsx(R.Z,{title:"ประวัติกะการทำงาน",subtitle:`ทั้งหมด ${e_} กะ`,icon:i.jsx(j.Z,{}),onBack:()=>e.back(),actions:(0,i.jsxs)(h.Z,{size:8,children:[i.jsx(u.ZP,{icon:i.jsx(v.Z,{}),onClick:()=>ep.refetch(),loading:ep.isFetching}),i.jsx(u.ZP,{icon:i.jsx(b.Z,{}),onClick:()=>e.push("/pos/shift"),children:"ไปหน้ากะปัจจุบัน"})]})}),i.jsx(E.Z,{children:(0,i.jsxs)(T.Z,{children:[i.jsx(z.Z,{title:"ภาพรวม",children:(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:10},children:[i.jsx(ee,{label:"จำนวนกะทั้งหมด",value:String(e_),color:"#0f172a",icon:i.jsx(b.Z,{})}),i.jsx(ee,{label:"กะที่เปิดอยู่",value:String(ev),color:"#059669",icon:i.jsx(c.Z,{color:"green",children:"OPEN"})}),i.jsx(ee,{label:"กะที่ปิดแล้ว",value:String(eb),color:"#64748b",icon:i.jsx(c.Z,{children:"CLOSED"})}),i.jsx(ee,{label:"รวมเงินเริ่มต้น",value:J(ej?.total_start_amount),color:"#0369a1",icon:i.jsx(_.Z,{})}),i.jsx(ee,{label:"รวมยอดนับจริง",value:J(ej?.total_end_amount),color:"#0f766e",icon:i.jsx(es,{})}),i.jsx(ee,{label:"รวมผลต่าง",value:J(ej?.total_diff_amount),color:V(ej?.total_diff_amount)>=0?"#059669":"#dc2626",icon:i.jsx($.Z,{})})]})}),i.jsx(z.Z,{title:"ค้นหาและตัวกรอง",children:(0,i.jsxs)("div",{style:{display:"grid",gap:10},children:[i.jsx(f.default,{allowClear:!0,prefix:i.jsx(M.Z,{style:{color:"#94A3B8"}}),placeholder:"ค้นหาจาก Shift ID, username หรือชื่อผู้เปิดกะ",value:I,onChange:e=>{Y(1),W(e.target.value)}}),i.jsx(p.Z,{value:K,onChange:e=>{Y(1),X(e)},options:[{label:`ทั้งหมด (${e_})`,value:"all"},{label:`OPEN (${ev})`,value:r.OPEN},{label:`CLOSED (${eb})`,value:r.CLOSED}]}),(0,i.jsxs)("div",{onClick:()=>eo(!0),style:{padding:"10px 14px",border:"1px solid #e2e8f0",borderRadius:12,background:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},children:[(0,i.jsxs)(h.Z,{children:[i.jsx(S.Z,{style:{color:"#64748b"}}),i.jsx(A,{children:eh})]}),i.jsx(O.Z,{style:{fontSize:12,color:"#94a3b8"}})]})]})}),i.jsx(z.Z,{title:"รายการประวัติกะ",extra:i.jsx("span",{style:{fontWeight:600},children:ey.length}),children:ep.isLoading?i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"48px 0"},children:i.jsx(m.Z,{size:"large"})}):ey.length>0?(0,i.jsxs)(i.Fragment,{children:[ey.map(e=>i.jsx(U,{shift:e,onViewSummary:en},e.id)),i.jsx("div",{style:{display:"flex",justifyContent:"center",marginTop:16},children:i.jsx(x.Z,{current:eg?.page||d,pageSize:eg?.limit||C,total:eg?.total||0,showSizeChanger:!0,onChange:(e,t)=>{Y(e),w(t)}})})]}):i.jsx(F.Z,{title:"ไม่พบข้อมูลประวัติกะ",description:"ลองปรับคำค้นหา หรือตัวกรองช่วงวันที่"})})]})}),i.jsx(y.Z,{open:!!ei,title:"สรุปข้อมูลกะ",onCancel:()=>en(null),footer:null,width:760,children:em.isLoading?i.jsx("div",{style:{padding:"40px 0",textAlign:"center"},children:i.jsx(m.Z,{})}):em.data?(0,i.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:10},children:[i.jsx(et,{label:"ยอดขายรวม",value:J(em.data.summary.total_sales),color:"#10b981"}),i.jsx(et,{label:"กำไรสุทธิ",value:J(em.data.summary.net_profit),color:"#0369a1"}),i.jsx(et,{label:"เงินเริ่มต้น",value:J(em.data.shift_info.start_amount),color:"#334155"}),i.jsx(et,{label:"ผลต่าง",value:J(em.data.shift_info.diff_amount),color:V(em.data.shift_info.diff_amount)>=0?"#059669":"#dc2626"})]}),i.jsx(g.Z,{size:"small",title:"วิธีชำระเงิน",children:i.jsx("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))"},children:Object.entries(em.data.summary.payment_methods||{}).map(([e,t])=>(0,i.jsxs)("div",{style:{border:"1px solid #e2e8f0",borderRadius:10,padding:"8px 10px"},children:[i.jsx(A,{type:"secondary",children:e}),i.jsx("div",{style:{fontWeight:700},children:J(t)})]},e))})}),i.jsx(g.Z,{size:"small",title:"สินค้าขายดี",children:em.data.top_products.length>0?i.jsx("div",{style:{display:"grid",gap:8},children:em.data.top_products.map((e,t)=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",border:"1px solid #e2e8f0",borderRadius:10,padding:"8px 10px"},children:[(0,i.jsxs)(A,{strong:!0,children:[t+1,". ",e.name]}),(0,i.jsxs)(A,{children:[e.quantity," ",e.unit||"หน่วย"," | ",J(e.revenue)]})]},`${e.id}-${t}`))}):i.jsx(A,{type:"secondary",children:"ไม่พบข้อมูลสินค้าขายดี"})})]}):i.jsx(A,{type:"secondary",children:"ไม่พบข้อมูลสรุปกะ"})}),i.jsx(y.Z,{title:"เลือกช่วงเวลา",open:ea,onCancel:()=>{eo(!1),ed(!1)},footer:null,centered:!0,width:400,children:i.jsx("div",{id:"date-selection-container",style:{display:"flex",flexDirection:"column",gap:10,position:"relative"},children:el?(0,i.jsxs)("div",{style:{padding:"8px 0"},children:[i.jsx(A,{type:"secondary",style:{display:"block",marginBottom:12},children:"เลือกช่วงวันที่ของคุณ"}),i.jsx(G,{value:Q,onChange:e=>{Y(1),er(e),e&&e[0]&&e[1]&&(eo(!1),ed(!1))},format:"DD/MM/YYYY",allowClear:!0,style:{width:"100%"},getPopupContainer:e=>e.parentElement||document.body,defaultOpen:!0,placeholder:["วันที่เริ่มต้น","วันที่สิ้นสุด"]}),i.jsx("div",{style:{marginTop:20,display:"flex",justifyContent:"flex-end"},children:i.jsx(u.ZP,{onClick:()=>ed(!1),children:"ย้อนกลับ"})})]}):(0,i.jsxs)(i.Fragment,{children:[ef.map(e=>{let t=!!(!Q&&!e.value||Q&&e.value&&Q[0]?.isSame(e.value[0],"day")&&Q[1]?.isSame(e.value[1],"day"));return(0,i.jsxs)("div",{onClick:()=>{Y(1),er(e.value),eo(!1)},style:{padding:"14px 18px",border:"1px solid #e5e7eb",borderRadius:12,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",background:t?"#f0f9ff":"#fff",borderColor:t?"#0ea5e9":"#e5e7eb"},children:[i.jsx(A,{strong:t,children:e.label}),t&&i.jsx(P.Z,{style:{color:"#0ea5e9"}})]},e.label)}),i.jsx(u.ZP,{type:"dashed",style:{height:48,borderRadius:12},onClick:()=>ed(!0),children:"เลือกช่วงวันที่เอง..."})]})})})]}):i.jsx(q.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้",tone:"danger"})}function ee({label:e,value:t,color:s,icon:r}){return(0,i.jsxs)(g.Z,{size:"small",style:{borderRadius:12},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx("span",{style:{color:s},children:r}),i.jsx(A,{type:"secondary",children:e})]}),i.jsx(W,{level:4,style:{margin:"8px 0 0",color:s},children:t})]})}function et({label:e,value:t,color:s}){return(0,i.jsxs)("div",{style:{border:"1px solid #e2e8f0",borderRadius:10,padding:"10px 12px"},children:[i.jsx(A,{type:"secondary",children:e}),i.jsx("div",{style:{fontSize:20,fontWeight:700,color:s},children:t})]})}function es(){return i.jsx(_.Z,{})}},18978:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(10326);s(17577);var i=s(21020),n=s(52386);function a({children:e,gap:t=n.H.sectionGap,style:s}){return r.jsx(i.Z,{vertical:!0,gap:t,style:s,children:e})}},36231:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(10326);s(17577);var i=s(56249),n=s(75698),a=s(66874),o=s(52386);function l({title:e="ไม่มีข้อมูล",description:t,action:s,image:l}){return r.jsx(i.Z,{size:"small",variant:"outlined",style:{borderRadius:o.H.cardRadiusLG},bodyStyle:{padding:20},children:r.jsx(n.Z,{image:l,description:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[r.jsx(a.default.Text,{strong:!0,children:e}),t?r.jsx(a.default.Text,{type:"secondary",children:t}):null]}),children:s})})}},80440:(e,t,s)=>{"use strict";s.d(t,{s:()=>n});var r=s(17577),i=s(19211);let n=()=>(0,r.useContext)(i.J)},3040:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\shiftHistory\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9276,4421,8571,1742,108,8963,1399,4658,3849],()=>s(33971));module.exports=r})();