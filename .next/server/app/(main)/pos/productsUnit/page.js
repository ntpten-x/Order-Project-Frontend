(()=>{var e={};e.id=4663,e.ids=[4663],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},15181:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.Z,__next_app__:()=>p,originalPathname:()=>d,pages:()=>l,routeModule:()=>u,tree:()=>c}),r(91760),r(85429),r(58522),r(61804),r(7629),r(11930),r(12523);var s=r(23191),i=r(88716),n=r(43315),a=r(95231),o={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);r.d(t,o);let c=["",{children:["(main)",{children:["pos",{children:["productsUnit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,91760)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\productsUnit\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],l=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\productsUnit\\page.tsx"],d="/(main)/pos/productsUnit/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/pos/productsUnit/page",pathname:"/pos/productsUnit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},97902:(e,t,r)=>{Promise.resolve().then(r.bind(r,92484))},2643:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var n=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}let o=s.forwardRef((e,t)=>s.createElement(n.Z,a({},e,{ref:t,icon:i})))},75621:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"};var n=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}let o=s.forwardRef((e,t)=>s.createElement(n.Z,a({},e,{ref:t,icon:i})))},92484:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var s=r(10326),i=r(77626),n=r.n(i),a=r(17577),o=r(66874),c=r(71935),l=r(75958),d=r(46752),p=r(64635),u=r(49909),h=r(75621),x=r(46024),g=r(63191),m=r(24395),j=r(80490),y=r(72380),f=r(35047),v=r(37938),b=r(59746),P=r(80440),w=r(33357),Z=r(7670),k=r(54354),E=r(83179),_=r(61593),R=r(26902),F=r(26963),q=r(76892),C=r(18978),O=r(52647),U=r(36231);let{Text:B}=o.default,z=({totalUnits:e,activeUnits:t,inactiveUnits:r})=>(0,s.jsxs)("div",{style:_.R.statsCard,children:[(0,s.jsxs)("div",{style:_.R.statItem,children:[s.jsx("span",{style:{..._.R.statNumber,color:"#0891B2"},children:e}),s.jsx(B,{style:_.R.statLabel,children:"ทั้งหมด"})]}),s.jsx("div",{style:{width:1,height:24,background:"#f0f0f0",alignSelf:"center"}}),(0,s.jsxs)("div",{style:_.R.statItem,children:[s.jsx("span",{style:{..._.R.statNumber,color:"#10B981"},children:t}),s.jsx(B,{style:_.R.statLabel,children:"ใช้งาน"})]}),s.jsx("div",{style:{width:1,height:24,background:"#f0f0f0",alignSelf:"center"}}),(0,s.jsxs)("div",{style:_.R.statItem,children:[s.jsx("span",{style:{..._.R.statNumber,color:"#EF4444"},children:r}),s.jsx(B,{style:_.R.statLabel,children:"ไม่ใช้งาน"})]})]}),S=({unit:e,index:t,onEdit:r,onDelete:i})=>s.jsx("div",{className:"unit-card",style:{..._.R.unitCard(e.is_active),animationDelay:`${.05*t}s`},onClick:()=>r(e),children:(0,s.jsxs)("div",{style:_.R.unitCardInner,children:[s.jsx("div",{style:{width:56,height:56,borderRadius:16,background:e.is_active?"linear-gradient(135deg, #CFFAFE 0%, #A5F3FC 100%)":"#F1F5F9",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,boxShadow:e.is_active?"0 4px 10px rgba(8, 145, 178, 0.1)":"none"},children:s.jsx(h.Z,{style:{fontSize:24,color:e.is_active?"#0891B2":"#94A3B8"}})}),(0,s.jsxs)("div",{style:{flex:1,minWidth:0,paddingRight:8},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[s.jsx(B,{strong:!0,style:{fontSize:16,color:e.is_active?"#1E293B":"#64748B"},ellipsis:{tooltip:e.display_name},children:e.display_name}),e.is_active?s.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#10B981",boxShadow:"0 0 0 2px #ecfdf5"}}):s.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:"#CBD5E1"}})]}),s.jsx(B,{type:"secondary",style:{fontSize:13,display:"block",color:"#64748B"},ellipsis:{tooltip:e.unit_name},children:e.unit_name})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:8},children:[s.jsx(c.ZP,{type:"text",icon:s.jsx(x.Z,{}),onClick:t=>{t.stopPropagation(),r(e)},style:{borderRadius:12,color:"#0891B2",background:"#CFFAFE",width:36,height:36}}),s.jsx(c.ZP,{type:"text",danger:!0,icon:s.jsx(g.Z,{}),onClick:t=>{t.stopPropagation(),i(e)},style:{borderRadius:12,background:"#FEF2F2",width:36,height:36}})]})]})});function A(){let e=(0,f.useRouter)(),[t,r]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[x,B]=(0,a.useState)(""),{execute:A}=(0,b.J)(),{showLoading:H}=(0,v.x)(),{socket:I}=(0,P.s)(),{isAuthorized:L,isChecking:T}=(0,Z.e)({allowedRoles:["Admin","Manager"]}),D=(0,a.useCallback)(async()=>{A(async()=>{let e=await fetch("/api/pos/productsUnit");if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถดึงข้อมูลหน่วยสินค้าได้")}r(await e.json())},"กำลังโหลดข้อมูลหน่วยสินค้า...")},[A]);(0,k.v)(I,{create:E.b.productsUnit.create,update:E.b.productsUnit.update,delete:E.b.productsUnit.delete},r);let M=e=>{B(e)},N=()=>{H("กำลังเปิดหน้าจัดการหน่วยสินค้า..."),e.push("/pos/productsUnit/manager/add")},G=t=>{H("กำลังเปิดหน้าแก้ไขหน่วยสินค้า..."),e.push(`/pos/productsUnit/manager/edit/${t.id}`)},$=e=>{l.Z.confirm({title:"ยืนยันการลบหน่วยสินค้า",content:`คุณต้องการลบหน่วย "${e.display_name}" หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:s.jsx(g.Z,{style:{color:"#EF4444"}}),maskClosable:!0,onOk:async()=>{await A(async()=>{let t=await (0,w.P)();if(!(await fetch(`/api/pos/productsUnit/delete/${e.id}`,{method:"DELETE",headers:{"X-CSRF-Token":t}})).ok)throw Error("ไม่สามารถลบหน่วยสินค้าได้");d.ZP.success(`ลบหน่วย "${e.display_name}" สำเร็จ`)},"กำลังลบหน่วยสินค้า...")}})};if(T)return s.jsx(R.H,{message:"กำลังตรวจสอบสิทธิ์การใช้งาน..."});if(!L)return s.jsx(R.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับ...",tone:"danger"});let W=t.filter(e=>e.is_active),J=t.filter(e=>!e.is_active);return(0,s.jsxs)("div",{style:_.R.container,className:"jsx-154188238361bfc6 unit-page",children:[s.jsx("style",{children:_.W}),s.jsx(n(),{id:"154188238361bfc6",children:".search-input-placeholder-white input::-webkit-input-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input:-moz-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input::-moz-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input:-ms-input-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input::-ms-input-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input::placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input{color:white!important}.unit-card{cursor:pointer;-webkit-tap-highlight-color:transparent}"}),s.jsx(O.Z,{title:"หน่วยสินค้า",subtitle:`${t.length} รายการ`,icon:s.jsx(h.Z,{}),actions:(0,s.jsxs)(p.Z,{size:8,wrap:!0,children:[s.jsx(u.default,{prefix:s.jsx(m.Z,{style:{color:"#94A3B8"}}),allowClear:!0,placeholder:"ค้นหาหน่วยสินค้า...",onChange:e=>M(e.target.value),style:{minWidth:220}}),s.jsx(c.ZP,{icon:s.jsx(j.Z,{}),onClick:D}),s.jsx(c.ZP,{type:"primary",icon:s.jsx(y.Z,{}),onClick:N,children:"เพิ่มหน่วยสินค้า"})]})}),s.jsx(F.Z,{children:(0,s.jsxs)(C.Z,{children:[s.jsx(z,{totalUnits:t.length,activeUnits:W.length,inactiveUnits:J.length}),s.jsx(q.Z,{title:"รายการหน่วยสินค้า",extra:s.jsx("span",{style:{fontWeight:600},className:"jsx-154188238361bfc6",children:i.length}),children:i.length>0?i.map((e,t)=>s.jsx(S,{unit:e,index:t,onEdit:G,onDelete:$},e.id)):s.jsx(U.Z,{title:x.trim()?"ไม่พบหน่วยสินค้าที่ค้นหา":"ยังไม่มีหน่วยสินค้า",description:x.trim()?"ลองค้นหาด้วยคำอื่นหรือล้างการค้นหา":"เพิ่มหน่วยสินค้าตัวแรกเพื่อเริ่มต้นใช้งาน",action:x.trim()?null:s.jsx(c.ZP,{type:"primary",icon:s.jsx(y.Z,{}),onClick:N,children:"เพิ่มหน่วยสินค้า"})})})]})})]})}},18978:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(10326);r(17577);var i=r(21020),n=r(52386);function a({children:e,gap:t=n.H.sectionGap,style:r}){return s.jsx(i.Z,{vertical:!0,gap:t,style:r,children:e})}},36231:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var s=r(10326);r(17577);var i=r(56249),n=r(75698),a=r(66874),o=r(52386);function c({title:e="ไม่มีข้อมูล",description:t,action:r,image:c}){return s.jsx(i.Z,{size:"small",variant:"outlined",style:{borderRadius:o.H.cardRadiusLG},bodyStyle:{padding:20},children:s.jsx(n.Z,{image:c,description:(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[s.jsx(a.default.Text,{strong:!0,children:e}),t?s.jsx(a.default.Text,{type:"secondary",children:t}):null]}),children:r})})}},59746:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});var s=r(17577),i=r(75958),n=r(37938);let a=()=>{let{showLoading:e,hideLoading:t}=(0,n.x)();return{execute:(0,s.useCallback)(async(r,s="กำลังดำเนินการ...",n,a="เกิดข้อผิดพลาด")=>{try{return e(s,"async"),await r()}catch(t){console.error("Async action error:",t);let e=a;"string"==typeof t?e=t:t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&(e=t.response?.data?.message??t.message??(()=>{try{return JSON.stringify(t)}catch{return"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ (Unknown Error)"}})()),i.Z.error({title:"ข้อผิดพลาด",content:e});return}finally{t("async")}},[e,t])}}},80440:(e,t,r)=>{"use strict";r.d(t,{s:()=>n});var s=r(17577),i=r(19211);let n=()=>(0,s.useContext)(i.J)},61593:(e,t,r)=>{"use strict";r.d(t,{R:()=>i,W:()=>n});var s=r(44528);let i={...(0,s.yf)("linear-gradient(135deg, #06B6D4 0%, #0891B2 100%)"),unitCard:s.YO,unitCardInner:s.lv},n=(0,s.IU)(".unit-page",".unit-card")},54354:(e,t,r)=>{"use strict";function s(e,t,r,s=e=>e.id,i=()=>!0){}function i({socket:e,events:t=[],onRefresh:r,intervalMs:s,enabled:i=!0,debounceMs:n}){}r.d(t,{D:()=>i,v:()=>s}),r(17577)},91760:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\productsUnit\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,4421,8571,8842,8963,1399,4658,3849],()=>r(15181));module.exports=s})();