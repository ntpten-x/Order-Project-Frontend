(()=>{var e={};e.id=7736,e.ids=[7736],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},2943:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.Z,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>u,tree:()=>l}),t(46430),t(85429),t(58522),t(61804),t(7629),t(11930),t(12523);var s=t(23191),i=t(88716),o=t(43315),n=t(95231),a={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>n[e]);t.d(r,a);let l=["",{children:["(main)",{children:["pos",{children:["productsUnit",{children:["manager",{children:["[...mode]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,46430)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\productsUnit\\manager\\[...mode]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\productsUnit\\manager\\[...mode]\\page.tsx"],c="/(main)/pos/productsUnit/manager/[...mode]/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/pos/productsUnit/manager/[...mode]/page",pathname:"/pos/productsUnit/manager/[...mode]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},95175:(e,r,t)=>{Promise.resolve().then(t.bind(t,87966))},30278:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});var s=t(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var o=t(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e}).apply(this,arguments)}let a=s.forwardRef((e,r)=>s.createElement(o.Z,n({},e,{ref:r,icon:i})))},87966:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>C});var s=t(10326),i=t(17577),o=t(58184),n=t(43359),a=t(46752),l=t(75958),d=t(71935),c=t(92121),p=t(4139),u=t(38106),x=t(56249),h=t(49909),g=t(63459),m=t(35047),y=t(26963),j=t(76892),f=t(52647),b=t(75621),v=t(56811),F=t(63191),P=t(10907),_=t(30278);t(33357);var E=t(45207),k=t(26902),Z=t(61593);let{Title:q,Text:S}=o.default,w=({displayName:e,unitName:r,isActive:t})=>(0,s.jsxs)("div",{style:{background:"white",borderRadius:24,padding:24,boxShadow:"0 10px 30px rgba(0,0,0,0.05)",textAlign:"center",border:"1px solid #F1F5F9",height:"100%"},children:[s.jsx(q,{level:5,style:{color:"#94A3B8",marginBottom:20,fontWeight:600},children:"ตัวอย่างการแสดงผล"}),(0,s.jsxs)("div",{style:{borderRadius:20,border:`1px solid ${t?"#E2E8F0":"#F1F5F9"}`,padding:16,background:t?"white":"rgba(255,255,255,0.6)",boxShadow:t?"0 4px 12px rgba(0,0,0,0.06)":"none",display:"flex",alignItems:"center",gap:16,marginBottom:24,maxWidth:320,margin:"0 auto 24px"},children:[s.jsx("div",{style:{width:56,height:56,borderRadius:16,background:t?"linear-gradient(135deg, #CFFAFE 0%, #A5F3FC 100%)":"#F1F5F9",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:s.jsx(b.Z,{style:{fontSize:24,color:t?"#0891B2":"#94A3B8"}})}),(0,s.jsxs)("div",{style:{textAlign:"left",flex:1},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[s.jsx(S,{strong:!0,style:{fontSize:16,color:t?"#1E293B":"#64748B"},children:e||"ชื่อหน่วย"}),t&&s.jsx(v.Z,{style:{color:"#10B981",fontSize:14}})]}),s.jsx(S,{type:"secondary",style:{fontSize:13,display:"block"},children:r||"Unit Name"})]})]}),(0,s.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:16,padding:16},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[s.jsx(S,{style:{fontSize:13,color:"#64748B"},children:"สถานะ"}),s.jsx("div",{style:{padding:"4px 12px",borderRadius:20,background:t?"#ECFDF5":"#FEF2F2",color:t?"#10B981":"#EF4444",fontSize:12,fontWeight:600},children:t?"พร้อมใช้งาน":"ปิดใช้งาน"})]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s.jsx(S,{style:{fontSize:13,color:"#64748B"},children:"ประเภท"}),s.jsx(S,{strong:!0,style:{fontSize:13,color:"#1E293B"},children:"หน่วยนับสินค้า"})]})]})]});function C({params:e}){let r=(0,m.useRouter)(),[t]=n.Z.useForm(),[o,b]=(0,i.useState)(!1),[v,C]=(0,i.useState)(!1),[z,B]=(0,i.useState)(""),[R,U]=(0,i.useState)(""),[A,O]=(0,i.useState)(!0),[T,I]=(0,i.useState)(""),V=e.mode[0],W=e.mode[1]||null,M="edit"===V&&!!W,{isAuthorized:N,isChecking:$}=(0,E.e)({requiredRole:"Admin"});(0,i.useCallback)(async()=>{b(!0);try{let e=await fetch(`/api/pos/productsUnit/getById/${W}`);if(!e.ok)throw Error("ไม่สามารถดึงข้อมูลหน่วยสินค้าได้");let r=await e.json();t.setFieldsValue({unit_name:r.unit_name,display_name:r.display_name,is_active:r.is_active}),B(r.display_name||""),U(r.unit_name||""),O(r.is_active)}catch(e){console.error(e),a.ZP.error("ไม่สามารถดึงข้อมูลหน่วยสินค้าได้"),r.push("/pos/productsUnit")}finally{b(!1)}},[W,t,r]);let H=async e=>{C(!0);try{let t=M?`/api/pos/productsUnit/update/${W}`:"/api/pos/productsUnit/create",s=await fetch(t,{method:M?"PUT":"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":T},body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.message||(M?"ไม่สามารถอัปเดตหน่วยสินค้าได้":"ไม่สามารถสร้างหน่วยสินค้าได้"))}a.ZP.success(M?"อัปเดตหน่วยสินค้าสำเร็จ":"สร้างหน่วยสินค้าสำเร็จ"),r.push("/pos/productsUnit")}catch(e){console.error(e),a.ZP.error(e instanceof Error?e.message:"ไม่สามารถสร้าง/แก้ไขหน่วยสินค้าได้")}finally{C(!1)}},L=()=>r.push("/pos/productsUnit");return $?s.jsx(k.H,{message:"กำลังตรวจสอบสิทธิ์..."}):N?(0,s.jsxs)("div",{className:"manage-page",style:Z.R.container,children:[s.jsx(f.Z,{title:M?"แก้ไขหน่วยสินค้า":"เพิ่มหน่วยสินค้า",subtitle:M?"แก้ไขข้อมูลหน่วยสินค้า":"สร้างหน่วยสินค้าใหม่",onBack:L,actions:M?s.jsx(d.ZP,{danger:!0,onClick:()=>{W&&l.Z.confirm({title:"ยืนยันการลบหน่วยสินค้า",content:`คุณต้องการลบหน่วย "${z}" หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:s.jsx(F.Z,{style:{color:"#EF4444"}}),onOk:async()=>{try{if(!(await fetch(`/api/pos/productsUnit/delete/${W}`,{method:"DELETE",headers:{"X-CSRF-Token":T}})).ok)throw Error("ไม่สามารถลบหน่วยสินค้าได้");a.ZP.success("ลบหน่วยสินค้าสำเร็จ"),r.push("/pos/productsUnit")}catch(e){console.error(e),a.ZP.error("ไม่สามารถลบหน่วยสินค้าได้")}}})},icon:s.jsx(F.Z,{}),children:"ลบ"}):null}),s.jsx(y.Z,{maxWidth:1e3,children:s.jsx(j.Z,{style:{background:"transparent",border:"none"},children:o?s.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"100px 0",background:"rgba(255,255,255,0.8)",borderRadius:24,backdropFilter:"blur(10px)"},children:s.jsx(c.Z,{size:"large",tip:"กำลังโหลดข้อมูล..."})}):(0,s.jsxs)(p.Z,{gutter:[24,24],children:[s.jsx(u.Z,{xs:24,lg:14,xl:15,children:(0,s.jsxs)(x.Z,{bordered:!1,style:{borderRadius:24,boxShadow:"0 4px 20px rgba(0,0,0,0.04)",overflow:"hidden"},styles:{body:{padding:32}},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:24},children:[s.jsx(P.Z,{style:{fontSize:20,color:"#0891B2"}}),s.jsx(q,{level:5,style:{margin:0},children:"ข้อมูลหน่วยสินค้า"})]}),(0,s.jsxs)(n.Z,{form:t,layout:"vertical",onFinish:H,requiredMark:!1,autoComplete:"off",initialValues:{is_active:!0},onValuesChange:e=>{void 0!==e.display_name&&B(e.display_name),void 0!==e.unit_name&&U(e.unit_name),void 0!==e.is_active&&O(e.is_active)},children:[s.jsx(n.Z.Item,{name:"unit_name",label:s.jsx("span",{style:{fontWeight:600,color:"#475569"},children:"Unit Name (English)"}),rules:[{required:!0,message:"กรุณากรอกชื่อหน่วย"},{pattern:/^[a-zA-Z0-9\s\-_().]*$/,message:"กรุณากรอกภาษาอังกฤษเท่านั้น"},{max:100,message:"ความยาวต้องไม่เกิน 100 ตัวอักษร"}],children:s.jsx(h.default,{size:"large",placeholder:"e.g. Box, Kg, Liter",style:{borderRadius:12,height:48,backgroundColor:"#F8FAFC",border:"1px solid #E2E8F0"},maxLength:100})}),s.jsx(n.Z.Item,{name:"display_name",label:s.jsx("span",{style:{fontWeight:600,color:"#475569"},children:"ชื่อที่แสดง (ภาษาไทย)"}),rules:[{required:!0,message:"กรุณากรอกชื่อที่แสดง"},{max:100,message:"ความยาวต้องไม่เกิน 100 ตัวอักษร"}],children:s.jsx(h.default,{size:"large",placeholder:"เช่น กล่อง, กิโลกรัม, ลิตร",style:{borderRadius:12,height:48,backgroundColor:"#F8FAFC",border:"1px solid #E2E8F0"},maxLength:100})}),s.jsx("div",{style:{padding:"20px",background:"#F8FAFC",borderRadius:16,marginTop:24},children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsxs)("div",{children:[s.jsx(S,{strong:!0,style:{fontSize:15,display:"block"},children:"สถานะการใช้งาน"}),s.jsx(S,{type:"secondary",style:{fontSize:13},children:"เปิดเพื่อให้แสดงในหน้าขายสินค้า"})]}),s.jsx(n.Z.Item,{name:"is_active",valuePropName:"checked",noStyle:!0,children:s.jsx(g.Z,{style:{background:A?"#10B981":void 0}})})]})}),(0,s.jsxs)("div",{style:{marginTop:32,display:"flex",gap:12},children:[s.jsx(d.ZP,{size:"large",onClick:L,style:{flex:1,borderRadius:12,height:48,fontWeight:600},children:"ยกเลิก"}),s.jsx(d.ZP,{type:"primary",htmlType:"submit",loading:v,icon:s.jsx(_.Z,{}),style:{flex:2,borderRadius:12,height:48,fontWeight:600,background:"#0891B2",boxShadow:"0 4px 12px rgba(8, 145, 178, 0.3)"},children:"บันทึกข้อมูล"})]})]})]})}),s.jsx(u.Z,{xs:24,lg:10,xl:9,children:s.jsx(w,{displayName:z,unitName:R,isActive:A})})]})})})]}):s.jsx(k.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้",tone:"danger"})}},46430:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\productsUnit\manager\[...mode]\page.tsx#default`)}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[9276,8491,8571,8842,8963,1399,4658,6607],()=>t(2943));module.exports=s})();