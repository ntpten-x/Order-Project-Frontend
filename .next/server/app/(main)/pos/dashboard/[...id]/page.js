(()=>{var e={};e.id=9224,e.ids=[9224],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},74562:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.Z,__next_app__:()=>h,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>o}),r(31437),r(85429),r(58522),r(86296),r(7629),r(11930),r(12523);var n=r(23191),i=r(88716),s=r(43315),a=r(95231),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let o=["",{children:["(main)",{children:["pos",{children:["dashboard",{children:["[...id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,31437)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\dashboard\\[...id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,86296)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\dashboard\\[...id]\\page.tsx"],c="/(main)/pos/dashboard/[...id]/page",h={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/pos/dashboard/[...id]/page",pathname:"/pos/dashboard/[...id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},43270:(e,t,r)=>{Promise.resolve().then(r.bind(r,68252))},2643:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var s=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let l=n.forwardRef((e,t)=>n.createElement(s.Z,a({},e,{ref:t,icon:i})))},12226:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};var s=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let l=n.forwardRef((e,t)=>n.createElement(s.Z,a({},e,{ref:t,icon:i})))},6236:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(17577);let i={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};var s=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let l=n.forwardRef((e,t)=>n.createElement(s.Z,a({},e,{ref:t,icon:i})))},11397:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"};var s=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let l=n.forwardRef((e,t)=>n.createElement(s.Z,a({},e,{ref:t,icon:i})))},76775:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar-circle",theme:"outlined"};var s=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let l=n.forwardRef((e,t)=>n.createElement(s.Z,a({},e,{ref:t,icon:i})))},63699:function(e,t,r){var n;n=function(e){"use strict";var t={name:"th",weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"},ordinal:function(e){return e+"."}};return(e&&"object"==typeof e&&"default"in e?e:{default:e}).default.locale(t,null,!0),t},e.exports=n(r(88295))},68252:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Q});var n=r(10326),i=r(17577),s=r(58184),a=r(46752),l=r(92121),o=r(71935),d=r(41895),c=r(61357),h=r(4139),p=r(38106),x=r(56249),u=r(81135),m=r(71209),f=r(13483),g=r(91004),y=r(75958),j=r(27266),b=r(9297),v=r(71696),_=r(62938),S=r(12226),w=r(6236),Z=r(2643);let P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"};var z=r(74082);function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let C=i.forwardRef((e,t)=>i.createElement(z.Z,k({},e,{ref:t,icon:P})));var M=r(20331);let L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]},name:"tag",theme:"outlined"};function O(){return(O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let R=i.forwardRef((e,t)=>i.createElement(z.Z,O({},e,{ref:t,icon:L})));var H=r(76775),T=r(11397),Y=r(22817),B=r(35047),I=r(26859),N=r(57480),q=r(13976),E=r(93922),D=r(88295),F=r.n(D);r(63699),F().locale("th");let V=(0,i.forwardRef)(({order:e,shopName:t,shopAddress:r,shopPhone:i,shopTaxId:s,shopLogo:a},l)=>{let o=e.items||[],d=e.payments||[],c={border:"none",borderTop:"1px dashed #000",margin:"8px 0"},h={textAlign:"center"},p={display:"flex",justifyContent:"space-between",marginBottom:"4px"};return(0,n.jsxs)("div",{ref:l,style:{fontFamily:"'Courier New', Courier, monospace",fontSize:"12px",width:"80mm",padding:"10px",backgroundColor:"#fff",color:"#000",margin:"0 auto"},children:[(0,n.jsxs)("div",{style:h,children:[a&&n.jsx(n.Fragment,{children:n.jsx("img",{src:a,alt:"Logo",style:{width:60,height:60,objectFit:"contain",marginBottom:8}})}),n.jsx("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:4},children:t||"ร้านค้า POS"}),r&&n.jsx("div",{style:{fontSize:"10px",marginBottom:2},children:r}),i&&(0,n.jsxs)("div",{style:{fontSize:"10px",marginBottom:2},children:["โทร: ",i]}),s&&(0,n.jsxs)("div",{style:{fontSize:"10px",marginBottom:4},children:["เลขประจำตัวผู้เสียภาษี: ",s]})]}),n.jsx("hr",{style:c}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:p,children:[n.jsx("span",{children:"เลขที่ออเดอร์:"}),(0,n.jsxs)("span",{style:{fontWeight:"bold"},children:["#",e.order_no]})]}),(0,n.jsxs)("div",{style:p,children:[n.jsx("span",{children:"วันที่:"}),n.jsx("span",{children:F()(e.create_date).format("DD/MM/YYYY HH:mm")})]}),(0,n.jsxs)("div",{style:p,children:[n.jsx("span",{children:"ประเภท:"}),n.jsx("span",{children:(e=>{switch(e){case q.m.DineIn:return"ทานที่ร้าน";case q.m.TakeAway:return"สั่งกลับบ้าน";case q.m.Delivery:return"เดลิเวอรี่";default:return e}})(e.order_type)})]}),e.order_type===q.m.DineIn&&e.table&&(0,n.jsxs)("div",{style:p,children:[n.jsx("span",{children:"โต๊ะ:"}),n.jsx("span",{children:e.table.table_name})]}),(0,n.jsxs)("div",{style:p,children:[n.jsx("span",{children:"พนักงาน:"}),n.jsx("span",{children:e.created_by?.name||e.created_by?.username||"-"})]})]}),n.jsx("hr",{style:c}),(0,n.jsxs)("div",{children:[n.jsx("div",{style:{fontWeight:"bold",marginBottom:8},children:"รายการสินค้า"}),o.map((e,t)=>(0,n.jsxs)("div",{style:{marginBottom:6},children:[n.jsx("div",{style:p,children:n.jsx("span",{children:e.product?.display_name||e.product?.product_name||"สินค้า"})}),(0,n.jsxs)("div",{style:{...p,paddingLeft:10,fontSize:"11px"},children:[(0,n.jsxs)("span",{children:[e.quantity," x ฿",Number(e.price).toLocaleString()]}),(0,n.jsxs)("span",{children:["฿",Number(e.total_price).toLocaleString()]})]}),e.notes&&(0,n.jsxs)("div",{style:{paddingLeft:10,fontSize:"10px",fontStyle:"italic",color:"#666"},children:["*",e.notes]})]},e.id||t))]}),n.jsx("hr",{style:c}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:p,children:[n.jsx("span",{children:"รวมรายการ:"}),(0,n.jsxs)("span",{children:["฿",Number(e.sub_total).toLocaleString()]})]}),e.discount_amount>0&&(0,n.jsxs)("div",{style:p,children:[(0,n.jsxs)("span",{children:["ส่วนลด (",e.discount?.display_name||e.discount?.discount_name||"ส่วนลด","):"]}),(0,n.jsxs)("span",{style:{color:"red"},children:["-฿",Number(e.discount_amount).toLocaleString()]})]}),e.vat>0&&(0,n.jsxs)("div",{style:p,children:[n.jsx("span",{children:"VAT 7%:"}),(0,n.jsxs)("span",{children:["฿",Number(e.vat).toLocaleString()]})]}),(0,n.jsxs)("div",{style:{...p,fontWeight:"bold",fontSize:"14px",marginTop:8},children:[n.jsx("span",{children:"ยอดสุทธิ:"}),(0,n.jsxs)("span",{children:["฿",Number(e.total_amount).toLocaleString()]})]})]}),n.jsx("hr",{style:c}),d.length>0&&(0,n.jsxs)("div",{children:[n.jsx("div",{style:{fontWeight:"bold",marginBottom:8},children:"การชำระเงิน"}),d.map((e,t)=>(0,n.jsxs)("div",{style:p,children:[n.jsx("span",{children:e.payment_method?.display_name||e.payment_method?.payment_method_name||"ไม่ระบุ"}),(0,n.jsxs)("span",{children:["฿",Number(e.amount).toLocaleString()]})]},e.id||t)),d.some(e=>e.change_amount>0)&&(0,n.jsxs)("div",{style:p,children:[n.jsx("span",{children:"เงินทอน:"}),(0,n.jsxs)("span",{children:["฿",d.reduce((e,t)=>e+Number(t.change_amount||0),0).toLocaleString()]})]})]}),n.jsx("hr",{style:c}),(0,n.jsxs)("div",{style:{...h,marginTop:16},children:[n.jsx("div",{style:{fontSize:"11px",marginBottom:4},children:"ขอบคุณที่ใช้บริการ"}),n.jsx("div",{style:{fontSize:"10px",color:"#666"},children:"Thank you for your purchase!"}),(0,n.jsxs)("div",{style:{fontSize:"9px",color:"#999",marginTop:8},children:["พิมพ์เมื่อ: ",F()().format("DD/MM/YYYY HH:mm:ss")]})]})]})});V.displayName="ReceiptTemplate";var W=r(94098);let A=e=>[...e].sort((e,t)=>{let r=e.status===W.M.Cancelled,n=t.status===W.M.Cancelled;return r&&!n?1:!r&&n?-1:0}),X=e=>e===W.M.Cancelled?{backgroundColor:"#fff1f0",transition:"all 0.3s"}:{},G=e=>e===W.M.Cancelled?{color:"#f5222d",fontWeight:"bold"}:{};var $=r(80440),J=r(54354);let{Title:U,Text:K}=s.default;function Q({params:e}){let t=(0,B.useRouter)(),r=e.id[0],{socket:s}=(0,$.s)(),[P,z]=(0,i.useState)(null),[k,L]=(0,i.useState)(!0),[O,D]=(0,i.useState)(null),[Q,ee]=(0,i.useState)(!1),et=(0,i.useRef)(null),er=(0,i.useCallback)(async()=>{if(r){L(!0);try{let e=await I.x.getById(r);z(e)}catch(e){console.error("Fetch order detail error:",e),a.ZP.error("ไม่พบข้อมูลออเดอร์")}finally{L(!1)}}},[r]);if((0,J.D)({socket:s,events:["orders:update","orders:delete","payments:create","payments:update"],onRefresh:()=>er(),intervalMs:2e4}),(0,i.useCallback)(async()=>{try{let e=await N.n.getProfile();D(e)}catch(e){console.warn("Could not fetch shop profile",e)}},[]),k)return n.jsx("div",{style:{...E.Np.container,display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:n.jsx(l.Z,{size:"large"})});if(!P)return n.jsx("div",{style:E.Np.container,children:(0,n.jsxs)("div",{style:{padding:24,textAlign:"center"},children:[n.jsx(U,{level:4,children:"ไม่พบข้อมูลออเดอร์"}),n.jsx(o.ZP,{onClick:()=>t.back(),children:"ย้อนกลับ"})]})});let en=A(P.items||[]),ei=P.payments||[],es=en.length>12,ea=P.created_by?.display_name||P.created_by?.username||"ไม่ทราบ",el=P.table?.table_name||"-",eo=P.discount,ed=(e=>{switch(e){case q.m.DineIn:return{icon:n.jsx(j.Z,{}),label:"ทานที่ร้าน",color:"#1890ff"};case q.m.TakeAway:return{icon:n.jsx(b.Z,{}),label:"สั่งกลับบ้าน",color:"#52c41a"};case q.m.Delivery:return{icon:n.jsx(v.Z,{}),label:"เดลิเวอรี่",color:"#fa8c16"};default:return{icon:n.jsx(_.Z,{}),label:e,color:"#666"}}})(P.order_type),ec=(e=>{switch(e){case q.i.Paid:return{color:"green",label:"ชำระเงินแล้ว",icon:n.jsx(S.Z,{})};case q.i.Cancelled:return{color:"red",label:"ยกเลิก",icon:n.jsx(w.Z,{})};default:return{color:"default",label:e,icon:null}}})(P.status),eh=[{title:"รูป",dataIndex:"product",key:"image",width:80,render:e=>n.jsx("div",{style:{width:60,height:60,borderRadius:8,overflow:"hidden",border:"1px solid #f0f0f0"},children:e?.img_url?n.jsx(d.Z,{src:e.img_url,width:"100%",height:"100%",style:{objectFit:"cover"},preview:!1,alt:"product"}):n.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f5f5"},children:n.jsx(_.Z,{style:{fontSize:24,color:"#ccc"}})})})},{title:"สินค้า",dataIndex:"product",key:"name",render:(e,t)=>(0,n.jsxs)("div",{children:[n.jsx(K,{strong:!0,style:{fontSize:16},children:e?.display_name||e?.product_name||"สินค้า"}),t.details&&t.details.length>0&&n.jsx("div",{style:{marginTop:4,display:"flex",flexDirection:"column",gap:2},children:t.details.map((e,t)=>(0,n.jsxs)(K,{type:"secondary",style:{fontSize:13,display:"block",color:"#8c8c8c"},children:["+ ",e.detail_name," ",e.extra_price>0&&`(฿${Number(e.extra_price).toLocaleString()})`]},t))}),t.status===W.M.Cancelled&&n.jsx("div",{style:{marginTop:6},children:n.jsx(c.Z,{color:"red",style:{margin:0},children:"ยกเลิกแล้ว"})}),t.notes&&n.jsx("div",{style:{marginTop:6,background:"#fff7e6",padding:"2px 8px",borderRadius:4,border:"1px dashed #fa8c16",display:"inline-block"},children:(0,n.jsxs)(K,{type:"warning",style:{fontSize:12},children:["หมายเหตุ: ",t.notes]})})]})},{title:"จำนวน",dataIndex:"quantity",key:"quantity",align:"center",width:80},{title:"ราคา/หน่วย",dataIndex:"price",key:"price",align:"right",width:120,render:(e,t)=>(0,n.jsxs)(K,{style:G(t.status),children:["฿",Number(e).toLocaleString()]})},{title:"รวม",dataIndex:"total_price",key:"total",align:"right",width:120,render:(e,t)=>(0,n.jsxs)(K,{strong:!0,style:G(t.status),children:["฿",Number(e).toLocaleString()]})}];return(0,n.jsxs)("div",{style:E.Np.container,children:[n.jsx("div",{style:{...E.Np.heroParams,paddingBottom:60},children:n.jsx("div",{style:{maxWidth:1200,margin:"0 auto",position:"relative",zIndex:10},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[n.jsx(o.ZP,{type:"text",icon:n.jsx(Z.Z,{style:{fontSize:20,color:"#fff"}}),onClick:()=>t.back(),style:{background:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)"}}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(U,{level:3,style:{margin:0,color:"#fff"},children:["ออเดอร์ #",P.order_no]}),n.jsx(K,{style:{color:"rgba(255,255,255,0.85)"},children:F()(P.create_date).format("DD MMMM YYYY, HH:mm น.")})]})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[n.jsx(c.Z,{icon:ec.icon,color:ec.color,style:{fontSize:14,padding:"4px 12px"},children:ec.label}),n.jsx(o.ZP,{type:"primary",icon:n.jsx(C,{}),onClick:()=>{ee(!0),setTimeout(()=>{if(et.current){let e=et.current.innerHTML,t=window.open("","","width=400,height=600");t&&(t.document.write(`
                        <html>
                            <head>
                                <title>ใบเสร็จ #${P?.order_no}</title>
                                <style>
                                    body { font-family: 'Courier New', Courier, monospace; padding: 0; margin: 0; }
                                    @media print {
                                        body { -webkit-print-color-adjust: exact; }
                                    }
                                </style>
                            </head>
                            <body>${e}</body>
                        </html>
                    `),t.document.close(),t.focus(),t.print(),t.close())}ee(!1)},500)},style:{background:"#52c41a",borderColor:"#52c41a"},children:"พิมพ์ใบเสร็จ"})]})]})})}),(0,n.jsxs)("div",{style:{maxWidth:1200,margin:"-40px auto 30px",padding:"0 24px",position:"relative",zIndex:20},children:[(0,n.jsxs)(h.Z,{gutter:[24,24],style:{marginBottom:24},children:[n.jsx(p.Z,{xs:24,sm:12,md:8,style:{flex:1},children:n.jsx(x.Z,{bordered:!1,style:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.05)",height:"100%"},children:n.jsx(u.Z,{title:"โต๊ะ",value:el,prefix:n.jsx(j.Z,{style:{color:"#1890ff"}}),valueStyle:{fontWeight:"bold",fontSize:24}})})}),n.jsx(p.Z,{xs:24,sm:12,md:8,style:{flex:1},children:n.jsx(x.Z,{bordered:!1,style:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.05)",height:"100%"},children:n.jsx(u.Z,{title:"ประเภท",valueRender:()=>(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:4},children:[ed.icon,n.jsx("span",{style:{color:ed.color,fontWeight:"bold"},children:ed.label})]})})})}),n.jsx(p.Z,{xs:24,sm:12,md:8,style:{flex:1},children:n.jsx(x.Z,{bordered:!1,style:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.05)",height:"100%"},children:n.jsx(u.Z,{title:"ผู้สร้างออเดอร์",valueRender:()=>(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:4},children:[n.jsx(m.Z,{size:"small",icon:n.jsx(M.Z,{}),style:{background:E.X1.primary}}),n.jsx("span",{style:{fontWeight:500,fontSize:18},children:ea})]})})})}),n.jsx(p.Z,{xs:24,sm:12,md:8,style:{flex:1},children:n.jsx(x.Z,{bordered:!1,style:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.05)",height:"100%"},children:n.jsx(u.Z,{title:"ส่วนลด",valueRender:()=>eo?(0,n.jsxs)("div",{style:{marginTop:4},children:[n.jsx(c.Z,{icon:n.jsx(R,{}),color:"volcano",style:{fontSize:14,padding:"2px 8px"},children:eo.display_name||eo.discount_name}),n.jsx("div",{style:{marginTop:4},children:(0,n.jsxs)(K,{type:"danger",strong:!0,style:{fontSize:18},children:["-฿",Number(P.discount_amount).toLocaleString()]})})]}):n.jsx(K,{type:"secondary",style:{fontSize:18},children:"ไม่มีส่วนลด"})})})}),n.jsx(p.Z,{xs:24,sm:12,md:8,style:{flex:1},children:n.jsx(x.Z,{bordered:!1,style:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.05)",height:"100%"},children:n.jsx(u.Z,{title:"ยอดสุทธิ",value:P.total_amount,precision:2,prefix:n.jsx(H.Z,{style:{color:E.X1.primary}}),suffix:"฿",valueStyle:{color:E.X1.primary,fontWeight:"bold",fontSize:24}})})})]}),(0,n.jsxs)(h.Z,{gutter:[24,24],children:[n.jsx(p.Z,{xs:24,lg:16,children:n.jsx(x.Z,{title:(0,n.jsxs)(n.Fragment,{children:[n.jsx(_.Z,{style:{marginRight:8,color:E.X1.primary}}),"รายการสินค้า (",en.length," รายการ)"]}),bordered:!1,style:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},children:n.jsx(f.Z,{dataSource:en,columns:eh,rowKey:"id",virtual:es,scroll:es?{y:420}:void 0,pagination:!1,onRow:e=>({style:X(e.status)}),summary:()=>(0,n.jsxs)(f.Z.Summary,{fixed:!0,children:[(0,n.jsxs)(f.Z.Summary.Row,{children:[n.jsx(f.Z.Summary.Cell,{index:0,colSpan:3}),n.jsx(f.Z.Summary.Cell,{index:1,align:"right",children:n.jsx(K,{type:"secondary",children:"รวมรายการ"})}),n.jsx(f.Z.Summary.Cell,{index:2,align:"right",children:(0,n.jsxs)(K,{strong:!0,children:["฿",Number(P.sub_total).toLocaleString()]})})]}),P.discount_amount>0&&(0,n.jsxs)(f.Z.Summary.Row,{children:[n.jsx(f.Z.Summary.Cell,{index:0,colSpan:3}),n.jsx(f.Z.Summary.Cell,{index:1,align:"right",children:n.jsx(K,{type:"secondary",children:"ส่วนลด"})}),n.jsx(f.Z.Summary.Cell,{index:2,align:"right",children:(0,n.jsxs)(K,{type:"danger",children:["-฿",Number(P.discount_amount).toLocaleString()]})})]}),P.vat>0&&(0,n.jsxs)(f.Z.Summary.Row,{children:[n.jsx(f.Z.Summary.Cell,{index:0,colSpan:3}),n.jsx(f.Z.Summary.Cell,{index:1,align:"right",children:n.jsx(K,{type:"secondary",children:"VAT 7%"})}),n.jsx(f.Z.Summary.Cell,{index:2,align:"right",children:(0,n.jsxs)(K,{children:["฿",Number(P.vat).toLocaleString()]})})]}),(0,n.jsxs)(f.Z.Summary.Row,{style:{background:"#fafafa"},children:[n.jsx(f.Z.Summary.Cell,{index:0,colSpan:3}),n.jsx(f.Z.Summary.Cell,{index:1,align:"right",children:n.jsx(K,{strong:!0,style:{fontSize:16},children:"ยอดสุทธิ"})}),n.jsx(f.Z.Summary.Cell,{index:2,align:"right",children:(0,n.jsxs)(K,{strong:!0,style:{fontSize:18,color:E.X1.primary},children:["฿",Number(P.total_amount).toLocaleString()]})})]})]})})})}),n.jsx(p.Z,{xs:24,lg:8,children:n.jsx(x.Z,{title:(0,n.jsxs)(n.Fragment,{children:[n.jsx(T.Z,{style:{marginRight:8,color:"#52c41a"}}),"การชำระเงิน (",ei.length," รายการ)"]}),bordered:!1,style:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.05)",height:"100%"},children:ei.length>0?n.jsx(g.Z,{items:ei.map(e=>({color:"Success"===e.status?"green":"red",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx(K,{strong:!0,children:e.payment_method?.display_name||e.payment_method?.payment_method_name||"ไม่ระบุ"}),(0,n.jsxs)(K,{strong:!0,style:{color:E.X1.primary},children:["฿",Number(e.amount).toLocaleString()]})]}),n.jsx("div",{children:(0,n.jsxs)(K,{type:"secondary",style:{fontSize:12},children:[n.jsx(Y.Z,{style:{marginRight:4}}),F()(e.payment_date).format("DD/MM/YYYY HH:mm")]})}),e.amount_received>0&&(0,n.jsxs)("div",{style:{fontSize:12,marginTop:4},children:[(0,n.jsxs)(K,{type:"secondary",children:["รับมา ฿",Number(e.amount_received).toLocaleString()]}),e.change_amount>0&&(0,n.jsxs)(K,{type:"secondary",children:[" | ทอน ฿",Number(e.change_amount).toLocaleString()]})]})]})}))}):n.jsx("div",{style:{textAlign:"center",padding:20,color:"#999"},children:"ไม่มีข้อมูลการชำระเงิน"})})})]})]}),n.jsx(y.Z,{open:Q,footer:null,closable:!1,width:380,centered:!0,children:(0,n.jsxs)("div",{style:{textAlign:"center",padding:20},children:[n.jsx(l.Z,{size:"large"}),n.jsx("div",{style:{marginTop:16},children:"กำลังเตรียมพิมพ์..."})]})}),n.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:n.jsx(V,{ref:et,order:P,shopName:O?.shop_name,shopAddress:O?.address,shopPhone:O?.phone,shopTaxId:O?.tax_id,shopLogo:O?.logo_url})})]})}F().locale("th")},80440:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});var n=r(17577),i=r(19211);let s=()=>(0,n.useContext)(i.J)},57480:(e,t,r)=>{"use strict";r.d(t,{n:()=>a});var n=r(12529);let i="/pos/shopProfile",s=(e,t="application/json")=>{let r={};return t&&(r["Content-Type"]=t),e&&(r.Cookie=e),r},a={getProfile:async e=>{let t=(0,n.b)("GET",i),r=s(e,""),a=await fetch(t,{cache:"no-store",headers:r,credentials:"include"});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลร้านค้าได้")}return a.json()},updateProfile:async(e,t,r)=>{let a=(0,n.b)("PUT",i),l=s(t);r&&(l["X-CSRF-Token"]=r);let o=await fetch(a,{method:"PUT",headers:l,credentials:"include",body:JSON.stringify(e)});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถอัปเดตข้อมูลร้านค้าได้")}return o.json()}}},93922:(e,t,r)=>{"use strict";r.d(t,{Np:()=>s,X1:()=>n,ax:()=>a,hS:()=>i});let n={primary:"#1890ff",secondary:"#13c2c2",success:"#52c41a",warning:"#faad14",error:"#ff4d4f",background:"#f5f5f5",cardBg:"#ffffff",text:"#262626",textSecondary:"#8c8c8c",border:"#f0f0f0",id_dineIn:"#1890ff",id_takeaway:"#52c41a",id_delivery:"#722ed1",kitchen:"#ff6b35",shift:"#10b981",kitchenBg:"#0f172a",kitchenCard:"rgba(30, 41, 59, 0.7)",kitchenBorder:"rgba(255, 255, 255, 0.1)"},i={dineIn:{primary:"#1890ff",light:"#e6f7ff",border:"#91d5ff",gradient:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)"},takeaway:{primary:"#52c41a",light:"#f6ffed",border:"#b7eb8f",gradient:"linear-gradient(135deg, #52c41a 0%, #73d13d 100%)"},delivery:{primary:"#722ed1",light:"#f9f0ff",border:"#d3adf7",gradient:"linear-gradient(135deg, #722ed1 0%, #9254de 100%)"}},s={container:{minHeight:"100vh",background:n.background,fontFamily:"'Inter', 'Sarabun', sans-serif"},heroParams:{background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",padding:"32px 24px 70px",position:"relative",borderBottomLeftRadius:24,borderBottomRightRadius:24,boxShadow:"0 8px 24px rgba(24, 144, 255, 0.25)",marginBottom:-40,zIndex:1,overflow:"hidden"},kitchenContainer:{minHeight:"100vh",background:"#0f172a",padding:"24px 24px 100px",color:"#f8fafc",fontFamily:"'Inter', 'Sarabun', sans-serif"},kitchenGlassCard:{background:"rgba(30, 41, 59, 0.7)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:20,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",overflow:"hidden"},kitchenHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:16},shiftHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},sectionTitle:{display:"flex",alignItems:"center",gap:12,marginBottom:20,color:"#fff"},contentWrapper:{maxWidth:1400,margin:"-40px auto 30px",padding:"0 24px",position:"relative",zIndex:20},card:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:"none",overflow:"hidden",background:n.cardBg},itemCard:{marginBottom:8,borderRadius:8,transition:"all 0.3s ease"}},a={available:{primary:"#52c41a",light:"#f6ffed",border:"#b7eb8f",gradient:"linear-gradient(135deg, #52c41a 0%, #73d13d 100%)"},occupied:{primary:"#fa8c16",light:"#fff7e6",border:"#ffd591",gradient:"linear-gradient(135deg, #fa8c16 0%, #ffa940 100%)"},inactive:{primary:"#8c8c8c",light:"#fafafa",border:"#d9d9d9",gradient:"linear-gradient(135deg, #8c8c8c 0%, #bfbfbf 100%)"},waitingForPayment:{primary:"#1890ff",light:"#e6f7ff",border:"#91d5ff",gradient:"linear-gradient(135deg, #1890ff 0%, #40a9ff 100%)"}}},94098:(e,t,r)=>{"use strict";var n;r.d(t,{M:()=>n}),function(e){e.Pending="Pending",e.Cooking="Cooking",e.Served="Served",e.Cancelled="Cancelled"}(n||(n={}))},54354:(e,t,r)=>{"use strict";function n(e,t,r,n=e=>e.id,i=()=>!0){}function i({socket:e,events:t=[],onRefresh:r,intervalMs:n,enabled:i=!0,debounceMs:s}){}r.d(t,{D:()=>i,v:()=>n}),r(17577)},31437:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\dashboard\[...id]\page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[9276,5898,8571,6927,6857,4300],()=>r(74562));module.exports=n})();