(()=>{var e={};e.id=9224,e.ids=[9224],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},74562:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.Z,__next_app__:()=>p,originalPathname:()=>d,pages:()=>l,routeModule:()=>x,tree:()=>c}),s(31437),s(85429),s(58522),s(61804),s(7629),s(11930),s(12523);var a=s(23191),i=s(88716),n=s(43315),r=s(95231),o={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>r[e]);s.d(t,o);let c=["",{children:["(main)",{children:["pos",{children:["dashboard",{children:["[...id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,31437)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\dashboard\\[...id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(s.bind(s,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],l=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\dashboard\\[...id]\\page.tsx"],d="/(main)/pos/dashboard/[...id]/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/pos/dashboard/[...id]/page",pathname:"/pos/dashboard/[...id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},43270:(e,t,s)=>{Promise.resolve().then(s.bind(s,59578))},12226:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=s(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};var n=s(74082);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let o=a.forwardRef((e,t)=>a.createElement(n.Z,r({},e,{ref:t,icon:i})))},6236:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=s(17577);let i={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};var n=s(74082);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let o=a.forwardRef((e,t)=>a.createElement(n.Z,r({},e,{ref:t,icon:i})))},59578:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>G});var a=s(10326),i=s(17577),n=s(66874),r=s(46752),o=s(92121),c=s(71935),l=s(46803),d=s(75958),p=s(62938),x=s(27266),f=s(9297),m=s(71696),h=s(12226),u=s(6236),j=s(2643);let g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"};var y=s(74082);function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}let v=i.forwardRef((e,t)=>i.createElement(y.Z,b({},e,{ref:t,icon:g})));var w=s(20331),k=s(69914),N=s(11397),S=s(22817),z=s(35047),_=s(26859),C=s(57480),F=s(13976),P=s(57723),E=s(88295),A=s.n(E);s(63699);var Z=s(77626),q=s.n(Z),D=s(41947),I=s(94098);A().locale("th");let L=(0,i.forwardRef)(({order:e,shopName:t,shopAddress:s,shopPhone:i,shopTaxId:n,shopLogo:r},o)=>{let c=(e.items||[]).filter(e=>e.status!==I.M.Cancelled),l=e.payments||[],d=c.reduce((e,t)=>e+Number(t.total_price||0),0),p=Number(e.discount_amount||0),x=e.vat>0?(d-p)*.07:0;return(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 receipt-container",children:[(0,a.jsxs)("div",{ref:o,className:"jsx-ac80ffc1703a8a53 receipt-paper",children:[(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 text-center mb-4",children:[r&&a.jsx("img",{src:r,alt:"Logo",className:"jsx-ac80ffc1703a8a53 receipt-logo"}),a.jsx("div",{className:"jsx-ac80ffc1703a8a53 shop-name",children:t||"ร้านค้า POS"}),s&&a.jsx("div",{className:"jsx-ac80ffc1703a8a53 shop-info",children:s}),i&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 shop-info shop-phone",children:["โทร: ",i]}),n&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 shop-info",children:["TAX ID: ",n]})]}),a.jsx("div",{className:"jsx-ac80ffc1703a8a53 dashed-line"}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 section",children:[(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:"เลขที่ออเดอร์:"}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53 font-bold",children:["#",e.order_no]})]}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:"วันที่:"}),a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:A()(e.create_date).format("DD/MM/YYYY HH:mm")})]}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:"ประเภท:"}),a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:(e=>{switch(e){case F.m.DineIn:return"ทานที่ร้าน";case F.m.TakeAway:return"สั่งกลับบ้าน";case F.m.Delivery:return"เดลิเวอรี่";default:return e}})(e.order_type)})]}),e.order_type===F.m.DineIn&&e.table&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:"โต๊ะ:"}),a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:e.table.table_name})]}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:"พนักงาน:"}),a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:e.created_by?.name||e.created_by?.username||"-"})]})]}),a.jsx("div",{className:"jsx-ac80ffc1703a8a53 dashed-line"}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 section",children:[a.jsx("div",{className:"jsx-ac80ffc1703a8a53 section-header",children:"รายการสินค้า"}),(0,D.S)(c).map((e,t)=>(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 item-row",children:[a.jsx("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:e.product?.display_name||e.product?.product_name||"สินค้า"})}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 item-details",children:[(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:[e.quantity," x ฿",Number(e.price).toLocaleString()]}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["฿",Number(e.total_price).toLocaleString()]})]}),e.details&&e.details.map((e,t)=>(0,a.jsxs)("div",{style:{color:"#16a34a",fontStyle:"normal"},className:"jsx-ac80ffc1703a8a53 item-note",children:["+ ",e.detail_name," ",e.extra_price>0&&`(+฿${Number(e.extra_price).toLocaleString()})`]},t)),e.notes&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 item-note",children:["*",e.notes]})]},e.id||t))]}),a.jsx("div",{className:"jsx-ac80ffc1703a8a53 dashed-line"}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 section",children:[(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:"รวมรายการ:"}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["฿",Number(d).toLocaleString()]})]}),p>0&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["ส่วนลด (",e.discount?.display_name||e.discount?.discount_name||"ส่วนลด","):"]}),(0,a.jsxs)("span",{style:{color:"#ef4444"},className:"jsx-ac80ffc1703a8a53",children:["-฿",Number(p).toLocaleString()]})]}),x>0&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:"VAT 7%:"}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["฿",Number(x).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 total-row",children:[a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:"ยอดสุทธิ:"}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["฿",Number(d-p+x).toLocaleString()]})]})]}),a.jsx("div",{className:"jsx-ac80ffc1703a8a53 dashed-line"}),l.length>0&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 section",children:[a.jsx("div",{className:"jsx-ac80ffc1703a8a53 section-header",children:"การชำระเงิน"}),l.map((e,t)=>(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:e.payment_method?.display_name||e.payment_method?.payment_method_name||"ไม่ระบุ"}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["฿",Number(e.amount).toLocaleString()]})]},e.id||t)),l.some(e=>e.change_amount>0)&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[a.jsx("span",{className:"jsx-ac80ffc1703a8a53",children:"เงินทอน:"}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["฿",l.reduce((e,t)=>e+Number(t.change_amount||0),0).toLocaleString()]})]})]}),a.jsx("div",{className:"jsx-ac80ffc1703a8a53 dashed-line"}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 receipt-footer",children:[a.jsx("div",{style:{fontSize:"12px",fontWeight:600,marginBottom:4},className:"jsx-ac80ffc1703a8a53",children:"ขอบคุณที่ใช้บริการ"}),a.jsx("div",{style:{fontSize:"10px",color:"#666"},className:"jsx-ac80ffc1703a8a53",children:"Thank you for your purchase!"}),(0,a.jsxs)("div",{style:{fontSize:"9px",color:"#999",marginTop:8},className:"jsx-ac80ffc1703a8a53",children:["พิมพ์เมื่อ: ",A()().format("DD/MM/YYYY HH:mm:ss")]})]})]}),a.jsx(q(),{id:"ac80ffc1703a8a53",children:'.receipt-container.jsx-ac80ffc1703a8a53{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:20px;background:#f0f2f5}.receipt-paper.jsx-ac80ffc1703a8a53{font-family:"Courier New",Courier,monospace;font-size:12px;width:80mm;padding:16px;background-color:#fff;color:#000;margin:0 auto;-webkit-box-shadow:0 4px 12px rgba(0,0,0,.1);-moz-box-shadow:0 4px 12px rgba(0,0,0,.1);box-shadow:0 4px 12px rgba(0,0,0,.1);position:relative}.text-center.jsx-ac80ffc1703a8a53{text-align:center;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%}.mb-4.jsx-ac80ffc1703a8a53{margin-bottom:16px}.dashed-line.jsx-ac80ffc1703a8a53{border-top:1px dashed#000;margin:12px 0;opacity:.5}.shop-name.jsx-ac80ffc1703a8a53{font-weight:900;font-size:28px;margin-bottom:4px;text-align:center;width:100%}.shop-info.jsx-ac80ffc1703a8a53{font-size:12px;margin-bottom:2px;text-align:center;width:100%}.shop-phone.jsx-ac80ffc1703a8a53{font-size:16px;font-weight:700;margin-top:4px}.section.jsx-ac80ffc1703a8a53{margin-bottom:8px}.section-header.jsx-ac80ffc1703a8a53{font-weight:bold;margin-bottom:8px;font-size:13px}.flex-between.jsx-ac80ffc1703a8a53{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:4px}.font-bold.jsx-ac80ffc1703a8a53{font-weight:bold}.receipt-logo.jsx-ac80ffc1703a8a53{width:60px;height:60px;-o-object-fit:contain;object-fit:contain;margin-bottom:8px;margin-left:auto;margin-right:auto;display:block;-webkit-filter:grayscale(100%);filter:grayscale(100%)}.item-row.jsx-ac80ffc1703a8a53{margin-bottom:6px}.item-details.jsx-ac80ffc1703a8a53{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding-left:10px;font-size:12px;font-weight:600;color:#000}.item-note.jsx-ac80ffc1703a8a53{padding-left:10px;font-size:9px;font-weight:300;font-style:italic;color:#4b5563}.total-row.jsx-ac80ffc1703a8a53{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-weight:900;font-size:26px;margin-top:12px;border-top:2px solid#000;padding-top:8px}.receipt-footer.jsx-ac80ffc1703a8a53{text-align:center;margin-top:16px}@media print{.receipt-container.jsx-ac80ffc1703a8a53{padding:0;background:none}.receipt-paper.jsx-ac80ffc1703a8a53{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;width:100%;max-width:80mm}}'})]})});L.displayName="ReceiptTemplate";let R=e=>[...e].sort((e,t)=>{let s=e.status===I.M.Cancelled,a=t.status===I.M.Cancelled;return s&&!a?1:!s&&a?-1:0}),B=e=>e===I.M.Cancelled?{color:"#f5222d",fontWeight:"bold"}:{};var T=s(80440),M=s(54354),O=s(83179),H=s(26963);let{Title:W,Text:$}=n.default;A().locale("th");let V=["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],Y=e=>{let t=A()(e);return`${t.date()} ${V[t.month()]} ${t.format("HH:mm")}`};function G({params:e}){let t=(0,z.useRouter)(),s=e.id[0],{socket:n}=(0,T.s)(),[g,y]=(0,i.useState)(null),[b,E]=(0,i.useState)(!0),[A,Z]=(0,i.useState)(null),[q,V]=(0,i.useState)(!1),G=(0,i.useRef)(null),X=(0,i.useCallback)(async()=>{if(s){E(!0);try{let e=await _.x.getById(s);y(e)}catch(e){console.error("Fetch order detail error:",e),r.ZP.error("ไม่พบข้อมูลออเดอร์")}finally{E(!1)}}},[s]);(0,M.D)({socket:n,events:[O.b.orders.update,O.b.orders.delete,O.b.payments.create,O.b.payments.update],onRefresh:()=>X(),intervalMs:2e4});let J=(0,i.useCallback)(async()=>{try{let e=await C.n.getProfile();Z(e)}catch(e){console.warn("Could not fetch shop profile",e)}},[]);(0,M.D)({socket:n,events:[O.b.shopProfile.update],onRefresh:()=>J(),debounceMs:800});let U=(0,i.useMemo)(()=>R((0,D.S)(g?.items||[])),[g?.items]);if(b)return a.jsx(H.Z,{maxWidth:99999,style:{padding:0},children:a.jsx("div",{style:{minHeight:"100vh",background:"#F8FAFC",display:"flex",justifyContent:"center",alignItems:"center"},children:a.jsx(o.Z,{size:"large"})})});if(!g)return a.jsx(H.Z,{maxWidth:99999,style:{padding:0},children:a.jsx("div",{style:{minHeight:"100vh",background:"#F8FAFC",padding:24},children:(0,a.jsxs)("div",{style:{textAlign:"center",paddingTop:60},children:[a.jsx(p.Z,{style:{fontSize:48,color:"#CBD5E1",marginBottom:16}}),a.jsx(W,{level:4,style:{color:"#64748B"},children:"ไม่พบข้อมูลออเดอร์"}),a.jsx(c.ZP,{type:"primary",onClick:()=>t.back(),children:"ย้อนกลับ"})]})})});let K=g.payments||[],Q=g.created_by?.name||g.created_by?.username||"ไม่ทราบ",ee=g.table?.table_name||"-",et=g.discount,es=(e=>{switch(e){case F.m.DineIn:return{icon:a.jsx(x.Z,{}),label:"ทานที่ร้าน",color:"#fff",bg:"#3B82F6"};case F.m.TakeAway:return{icon:a.jsx(f.Z,{}),label:"กลับบ้าน",color:"#fff",bg:"#22C55E"};case F.m.Delivery:return{icon:a.jsx(m.Z,{}),label:"เดลิเวอรี่",color:"#fff",bg:"#EC4899"};default:return{icon:a.jsx(p.Z,{}),label:e,color:"#fff",bg:"#6B7280"}}})(g.order_type),ea=(e=>{switch(e){case F.i.Paid:return{bg:"#DCFCE7",color:"#16A34A",label:"ชำระเงินแล้ว",icon:a.jsx(h.Z,{})};case F.i.Cancelled:return{bg:"#FEE2E2",color:"#DC2626",label:"ยกเลิก",icon:a.jsx(u.Z,{})};default:return{bg:"#F3F4F6",color:"#6B7280",label:e,icon:null}}})(g.status);return a.jsx(H.Z,{maxWidth:99999,style:{padding:0},children:(0,a.jsxs)("div",{style:{minHeight:"100vh",background:"#F8FAFC",paddingBottom:100},children:[a.jsx("div",{style:{background:P.Pc.headerGradient,padding:"16px",position:"sticky",top:0,zIndex:100,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[a.jsx(c.ZP,{type:"text",icon:a.jsx(j.Z,{style:{fontSize:18,color:"#fff"}}),onClick:()=>t.back(),style:{background:"rgba(255,255,255,0.15)",border:"none",width:40,height:40,borderRadius:12}}),(0,a.jsxs)("div",{children:[(0,a.jsxs)($,{style:{color:"#fff",fontSize:18,fontWeight:700,display:"block"},children:["#",g.order_no]}),(0,a.jsxs)($,{style:{color:"rgba(255,255,255,0.8)",fontSize:12},children:["\uD83D\uDCC5 ",Y(g.create_date)]})]})]}),a.jsx(c.ZP,{icon:a.jsx(v,{}),onClick:()=>{V(!0),setTimeout(()=>{if(G.current){let e=G.current.innerHTML,t=window.open("","","width=400,height=600");t&&(t.document.write(`
                        <html>
                            <head>
                                <title>ใบเสร็จ #${g?.order_no}</title>
                                <style>
                                    body { 
                                        font-family: 'Courier New', Courier, monospace; 
                                        padding: 0; 
                                        margin: 0; 
                                        background: #fff;
                                    }
                                    .receipt-paper {
                                        width: 80mm;
                                        padding: 16px;
                                        margin: 0 auto;
                                    }
                                    .text-center { 
                                        text-align: center;
                                        display: flex;
                                        flex-direction: column;
                                        align-items: center;
                                        justify-content: center;
                                        width: 100%;
                                    }
                                    .shop-name {
                                        font-weight: 900;
                                        font-size: 28px;
                                        margin-bottom: 4px;
                                        text-align: center;
                                        width: 100%;
                                    }
                                    .shop-info {
                                        font-size: 12px;
                                        margin-bottom: 2px;
                                        text-align: center;
                                        width: 100%;
                                    }
                                    .shop-phone {
                                        font-size: 16px;
                                        font-weight: 700;
                                        margin-top: 4px;
                                    }
                                    .receipt-logo {
                                        width: 60px;
                                        height: 60px;
                                        object-fit: contain;
                                        margin-bottom: 8px;
                                        margin-left: auto;
                                        margin-right: auto;
                                        display: block;
                                        filter: grayscale(100%);
                                    }
                                    .dashed-line {
                                        border-top: 1px dashed #000;
                                        margin: 12px 0;
                                        opacity: 0.5;
                                    }
                                    .section { margin-bottom: 8px; }
                                    .flex-between {
                                        display: flex;
                                        justify-content: space-between;
                                        margin-bottom: 4px;
                                    }
                                    .font-bold { font-weight: bold; }
                                    .item-details {
                                        display: flex;
                                        justify-content: space-between;
                                        padding-left: 10px;
                                        font-size: 12px;
                                        font-weight: 600;
                                        color: #000;
                                    }
                                    .item-note {
                                        padding-left: 10px;
                                        font-size: 9px;
                                        font-weight: 300;
                                        font-style: italic;
                                        color: #4b5563;
                                    }
                                    .total-row {
                                        display: flex;
                                        justify-content: space-between;
                                        font-weight: 900;
                                        font-size: 26px;
                                        margin-top: 12px;
                                        border-top: 2px solid #000;
                                        padding-top: 8px;
                                    }
                                    .receipt-footer {
                                        text-align: center;
                                        margin-top: 16px;
                                    }
                                    @media print {
                                        body { -webkit-print-color-adjust: exact; }
                                        .receipt-paper { width: 100%; max-width: 80mm; box-shadow: none; }
                                    }
                                </style>
                            </head>
                            <body>
                                <div class="receipt-paper">
                                    ${e}
                                </div>
                            </body>
                        </html>
                    `),t.document.close(),t.focus(),t.print(),t.close())}V(!1)},500)},style:{background:"#fff",color:P.Pc.primary,border:"none",borderRadius:10,fontWeight:600,height:36},children:"พิมพ์"})]})}),(0,a.jsxs)("div",{style:{padding:"16px",maxWidth:600,margin:"0 auto"},children:[(0,a.jsxs)("div",{style:{background:"white",borderRadius:16,padding:"20px",marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[(0,a.jsxs)("span",{style:{padding:"6px 14px",borderRadius:8,background:ea.bg,color:ea.color,fontWeight:700,fontSize:13,display:"inline-flex",alignItems:"center",gap:6},children:[ea.icon,ea.label]}),(0,a.jsxs)($,{style:{fontSize:26,fontWeight:800,color:P.Pc.salesColor},children:["฿",Number(g.total_amount).toLocaleString()]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:[(0,a.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[a.jsx("span",{style:{width:36,height:36,borderRadius:10,background:es.bg,color:es.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:es.icon}),(0,a.jsxs)("div",{children:[a.jsx($,{type:"secondary",style:{fontSize:11,display:"block"},children:"ประเภท"}),a.jsx($,{strong:!0,style:{fontSize:13},children:es.label})]})]}),(0,a.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[a.jsx("span",{style:{width:36,height:36,borderRadius:10,background:"#EEF2FF",color:"#6366F1",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:a.jsx(x.Z,{})}),(0,a.jsxs)("div",{children:[a.jsx($,{type:"secondary",style:{fontSize:11,display:"block"},children:"โต๊ะ"}),a.jsx($,{strong:!0,style:{fontSize:13},children:ee})]})]}),(0,a.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[a.jsx("span",{style:{width:36,height:36,borderRadius:10,background:"#FEF3C7",color:"#D97706",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:a.jsx(w.Z,{})}),(0,a.jsxs)("div",{children:[a.jsx($,{type:"secondary",style:{fontSize:11,display:"block"},children:"พนักงาน"}),a.jsx($,{strong:!0,style:{fontSize:13},children:Q})]})]}),(0,a.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[a.jsx("span",{style:{width:36,height:36,borderRadius:10,background:et?"#FEE2E2":"#F3F4F6",color:et?"#DC2626":"#9CA3AF",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:a.jsx(k.Z,{})}),(0,a.jsxs)("div",{children:[a.jsx($,{type:"secondary",style:{fontSize:11,display:"block"},children:"ส่วนลด"}),et?(0,a.jsxs)($,{strong:!0,style:{fontSize:13,color:"#DC2626"},children:["-฿",Number(g.discount_amount).toLocaleString()]}):a.jsx($,{type:"secondary",style:{fontSize:13},children:"ไม่มี"})]})]})]})]}),(0,a.jsxs)("div",{style:{background:"white",borderRadius:16,overflow:"hidden",marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,a.jsxs)("div",{style:{padding:"16px",borderBottom:"1px solid #F1F5F9",display:"flex",alignItems:"center",gap:8},children:[a.jsx(p.Z,{style:{color:P.Pc.primary,fontSize:18}}),(0,a.jsxs)($,{strong:!0,style:{fontSize:15},children:["รายการสินค้า (",U.length,")"]})]}),a.jsx("div",{style:{padding:"8px 0"},children:U.map((e,t)=>{let s=B(e.status),i=e.status===I.M.Cancelled;return(0,a.jsxs)("div",{style:{padding:"12px 16px",borderBottom:t<U.length-1?"1px solid #F8FAFC":"none",display:"flex",gap:12,opacity:i?.5:1},children:[a.jsx("div",{style:{width:56,height:56,borderRadius:10,overflow:"hidden",flexShrink:0,background:"#F8FAFC",border:"1px solid #E5E7EB"},children:e.product?.img_url?a.jsx(l.Z,{src:e.product.img_url,width:56,height:56,style:{objectFit:"cover"},preview:!1,alt:e.product?.product_name||"product"}):a.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(p.Z,{style:{color:"#CBD5E1",fontSize:20}})})}),(0,a.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:8},children:[a.jsx($,{strong:!0,style:{fontSize:14,...s},children:e.product?.display_name||e.product?.product_name||"สินค้า"}),(0,a.jsxs)($,{strong:!0,style:{fontSize:14,color:P.Pc.salesColor,flexShrink:0,...s},children:["฿",Number(e.total_price).toLocaleString()]})]}),(0,a.jsxs)("div",{style:{marginTop:4,display:"flex",alignItems:"center",gap:8},children:[(0,a.jsxs)($,{type:"secondary",style:{fontSize:12},children:["x",e.quantity," • ฿",Number(e.price).toLocaleString(),"/ชิ้น"]}),i&&a.jsx("span",{style:{fontSize:10,padding:"2px 6px",borderRadius:4,background:"#FEE2E2",color:"#DC2626",fontWeight:600},children:"ยกเลิก"})]}),e.details&&e.details.length>0&&a.jsx("div",{style:{marginTop:6},children:e.details.map((e,t)=>(0,a.jsxs)($,{style:{fontSize:11,display:"block",color:"#16A34A",fontWeight:500},children:["+ ",e.detail_name," ",e.extra_price>0&&(0,a.jsxs)("span",{style:{color:"#16A34A"},children:["(+฿",Number(e.extra_price).toLocaleString(),")"]})]},t))}),e.notes&&a.jsx("div",{style:{marginTop:6,background:"#FEF3C7",padding:"4px 8px",borderRadius:6,display:"inline-block"},children:(0,a.jsxs)($,{style:{fontSize:11,color:"#B45309"},children:["\uD83D\uDCDD ",e.notes]})})]})]},e.id)})}),(0,a.jsxs)("div",{style:{background:"#F8FAFC",padding:"12px 16px",borderTop:"1px solid #F1F5F9"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[a.jsx($,{type:"secondary",style:{fontSize:13},children:"รวมรายการ"}),(0,a.jsxs)($,{style:{fontSize:13},children:["฿",U.filter(e=>e.status!==I.M.Cancelled).reduce((e,t)=>e+Number(t.total_price||0),0).toLocaleString()]})]}),g.discount_amount>0&&(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[a.jsx($,{type:"secondary",style:{fontSize:13},children:"ส่วนลด"}),(0,a.jsxs)($,{style:{fontSize:13,color:"#DC2626"},children:["-฿",Number(g.discount_amount).toLocaleString()]})]}),g.vat>0&&(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[a.jsx($,{type:"secondary",style:{fontSize:13},children:"VAT 7%"}),(0,a.jsxs)($,{style:{fontSize:13},children:["฿",Number(g.vat).toLocaleString()]})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:8,borderTop:"1px dashed #E2E8F0"},children:[a.jsx($,{strong:!0,style:{fontSize:15},children:"ยอดสุทธิ"}),(0,a.jsxs)($,{strong:!0,style:{fontSize:18,color:P.Pc.salesColor},children:["฿",(U.filter(e=>e.status!==I.M.Cancelled).reduce((e,t)=>e+Number(t.total_price||0),0)-Number(g.discount_amount||0)+Number(g.vat||0)).toLocaleString()]})]})]})]}),(0,a.jsxs)("div",{style:{background:"white",borderRadius:16,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,a.jsxs)("div",{style:{padding:"16px",borderBottom:"1px solid #F1F5F9",display:"flex",alignItems:"center",gap:8},children:[a.jsx(N.Z,{style:{color:"#22C55E",fontSize:18}}),(0,a.jsxs)($,{strong:!0,style:{fontSize:15},children:["การชำระเงิน (",K.length,")"]})]}),K.length>0?a.jsx("div",{style:{padding:"8px 0"},children:K.map((e,t)=>(0,a.jsxs)("div",{style:{padding:"14px 16px",borderBottom:t<K.length-1?"1px solid #F8FAFC":"none"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[a.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:"Success"===e.status?"#22C55E":"#EF4444"}}),a.jsx($,{strong:!0,style:{fontSize:14},children:e.payment_method?.display_name||e.payment_method?.payment_method_name||"ไม่ระบุ"})]}),(0,a.jsxs)($,{strong:!0,style:{fontSize:15,color:P.Pc.salesColor},children:["฿",Number(e.amount).toLocaleString()]})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,a.jsxs)($,{type:"secondary",style:{fontSize:12},children:[a.jsx(S.Z,{style:{marginRight:4}}),Y(e.payment_date)]}),e.amount_received>0&&(0,a.jsxs)($,{type:"secondary",style:{fontSize:12},children:["รับมา ฿",Number(e.amount_received).toLocaleString(),e.change_amount>0&&` • ทอน ฿${Number(e.change_amount).toLocaleString()}`]})]})]},e.id))}):(0,a.jsxs)("div",{style:{padding:"30px 16px",textAlign:"center"},children:[a.jsx(N.Z,{style:{fontSize:32,color:"#CBD5E1",marginBottom:8}}),a.jsx($,{type:"secondary",style:{display:"block"},children:"ไม่มีข้อมูลการชำระเงิน"})]})]})]}),a.jsx(d.Z,{open:q,footer:null,closable:!1,width:380,centered:!0,children:(0,a.jsxs)("div",{style:{textAlign:"center",padding:20},children:[a.jsx(o.Z,{size:"large"}),a.jsx("div",{style:{marginTop:16},children:"กำลังเตรียมพิมพ์..."})]})}),a.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:a.jsx(L,{ref:G,order:g,shopName:A?.shop_name,shopAddress:A?.address,shopPhone:A?.phone,shopTaxId:A?.tax_id,shopLogo:A?.logo_url})})]})})}},57480:(e,t,s)=>{"use strict";s.d(t,{n:()=>o});var a=s(12529),i=s(40577);let n="/pos/shopProfile",r=(e,t="application/json")=>{let s={};return t&&(s["Content-Type"]=t),e&&(s.Cookie=e),s},o={getProfile:async e=>{let t=(0,a.b)("GET",n),s=r(e,""),o=await fetch(t,{cache:"no-store",headers:s,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error((0,i.i_)(e,"ไม่สามารถดึงข้อมูลร้านค้าได้"))}return(0,i.hH)(await o.json())},updateProfile:async(e,t,s)=>{let o=(0,a.b)("PUT",n),c=r(t);s&&(c["X-CSRF-Token"]=s);let l=await fetch(o,{method:"PUT",headers:c,credentials:"include",body:JSON.stringify(e)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,i.i_)(e,"ไม่สามารถอัปเดตข้อมูลร้านค้าได้"))}return(0,i.hH)(await l.json())}}},94098:(e,t,s)=>{"use strict";var a;s.d(t,{M:()=>a}),function(e){e.Pending="Pending",e.Cooking="Cooking",e.Served="Served",e.Cancelled="Cancelled"}(a||(a={}))},41947:(e,t,s)=>{"use strict";s.d(t,{S:()=>a});let a=e=>{if(!e?.length)return[];let t=new Map;for(let s of e){let e=s.details?.length?JSON.stringify(s.details.map(e=>({n:e.detail_name,p:e.extra_price})).sort((e,t)=>e.n.localeCompare(t.n))):"[]",a=(s.notes??"").trim().toLowerCase(),i=String(s.status??""),n=s.product?.id??s.product_id??"unknown",r=`${n}|${e}|${a}|${i}`,o=t.get(r);if(o){o.quantity+=Number(s.quantity),o.total_price+=Number(s.total_price??0),o.originalItems.push(s);continue}let c={...s,id:String(s?.id??r),quantity:Number(s.quantity),total_price:Number(s.total_price??0),originalItems:[s]};t.set(r,c)}return Array.from(t.values())}},31437:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\dashboard\[...id]\page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9276,4421,8571,1742,8963,1399,4658,8118],()=>s(74562));module.exports=a})();