(()=>{var e={};e.id=9224,e.ids=[9224],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},74562:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.Z,__next_app__:()=>x,originalPathname:()=>c,pages:()=>l,routeModule:()=>p,tree:()=>o}),t(31437),t(85429),t(58522),t(61804),t(7629),t(11930),t(12523);var r=t(23191),a=t(88716),n=t(43315),i=t(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let o=["",{children:["(main)",{children:["pos",{children:["dashboard",{children:["[...id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,31437)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\dashboard\\[...id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],l=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\dashboard\\[...id]\\page.tsx"],c="/(main)/pos/dashboard/[...id]/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/pos/dashboard/[...id]/page",pathname:"/pos/dashboard/[...id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},43270:(e,s,t)=>{Promise.resolve().then(t.bind(t,59578))},2643:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d});var r=t(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var n=t(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}let d=r.forwardRef((e,s)=>r.createElement(n.Z,i({},e,{ref:s,icon:a})))},12226:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d});var r=t(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};var n=t(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}let d=r.forwardRef((e,s)=>r.createElement(n.Z,i({},e,{ref:s,icon:a})))},6236:(e,s,t)=>{"use strict";t.d(s,{Z:()=>d});var r=t(17577);let a={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};var n=t(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}let d=r.forwardRef((e,s)=>r.createElement(n.Z,i({},e,{ref:s,icon:a})))},59578:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>V});var r=t(10326),a=t(17577),n=t(58184),i=t(46752),d=t(92121),o=t(71935),l=t(41895),c=t(75958),x=t(62938),p=t(27266),h=t(9297),m=t(71696),j=t(12226),b=t(6236),u=t(2643);let y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"};var g=t(74082);function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}let v=a.forwardRef((e,s)=>a.createElement(g.Z,f({},e,{ref:s,icon:y})));var w=t(20331),N=t(69914),S=t(11397),C=t(22817),F=t(35047),k=t(26859),z=t(57480),_=t(13976),P=t(57723),E=t(88295),A=t.n(E);t(63699);var L=t(77626),Z=t.n(L);A().locale("th");let B=(0,a.forwardRef)(({order:e,shopName:s,shopAddress:t,shopPhone:a,shopTaxId:n,shopLogo:i},d)=>{let o=e.items||[],l=e.payments||[],c={display:"flex",justifyContent:"space-between",marginBottom:"4px"};return(0,r.jsxs)("div",{className:"jsx-8bea46dc162791d5 receipt-container",children:[(0,r.jsxs)("div",{ref:d,className:"jsx-8bea46dc162791d5 receipt-paper",children:[(0,r.jsxs)("div",{className:"jsx-8bea46dc162791d5 text-center mb-4",children:[i&&r.jsx("img",{src:i,alt:"Logo",className:"jsx-8bea46dc162791d5 receipt-logo"}),r.jsx("div",{className:"jsx-8bea46dc162791d5 shop-name",children:s||"ร้านค้า POS"}),t&&r.jsx("div",{className:"jsx-8bea46dc162791d5 shop-info",children:t}),a&&(0,r.jsxs)("div",{className:"jsx-8bea46dc162791d5 shop-info",children:["โทร: ",a]}),n&&(0,r.jsxs)("div",{className:"jsx-8bea46dc162791d5 shop-info",children:["TAX ID: ",n]})]}),r.jsx("div",{className:"jsx-8bea46dc162791d5 dashed-line"}),(0,r.jsxs)("div",{className:"jsx-8bea46dc162791d5 section",children:[(0,r.jsxs)("div",{style:c,className:"jsx-8bea46dc162791d5",children:[r.jsx("span",{className:"jsx-8bea46dc162791d5",children:"เลขที่ออเดอร์:"}),(0,r.jsxs)("span",{className:"jsx-8bea46dc162791d5 font-bold",children:["#",e.order_no]})]}),(0,r.jsxs)("div",{style:c,className:"jsx-8bea46dc162791d5",children:[r.jsx("span",{className:"jsx-8bea46dc162791d5",children:"วันที่:"}),r.jsx("span",{className:"jsx-8bea46dc162791d5",children:A()(e.create_date).format("DD/MM/YYYY HH:mm")})]}),(0,r.jsxs)("div",{style:c,className:"jsx-8bea46dc162791d5",children:[r.jsx("span",{className:"jsx-8bea46dc162791d5",children:"ประเภท:"}),r.jsx("span",{className:"jsx-8bea46dc162791d5",children:(e=>{switch(e){case _.m.DineIn:return"ทานที่ร้าน";case _.m.TakeAway:return"สั่งกลับบ้าน";case _.m.Delivery:return"เดลิเวอรี่";default:return e}})(e.order_type)})]}),e.order_type===_.m.DineIn&&e.table&&(0,r.jsxs)("div",{style:c,className:"jsx-8bea46dc162791d5",children:[r.jsx("span",{className:"jsx-8bea46dc162791d5",children:"โต๊ะ:"}),r.jsx("span",{className:"jsx-8bea46dc162791d5",children:e.table.table_name})]}),(0,r.jsxs)("div",{style:c,className:"jsx-8bea46dc162791d5",children:[r.jsx("span",{className:"jsx-8bea46dc162791d5",children:"พนักงาน:"}),r.jsx("span",{className:"jsx-8bea46dc162791d5",children:e.created_by?.name||e.created_by?.username||"-"})]})]}),r.jsx("div",{className:"jsx-8bea46dc162791d5 dashed-line"}),(0,r.jsxs)("div",{className:"jsx-8bea46dc162791d5 section",children:[r.jsx("div",{className:"jsx-8bea46dc162791d5 section-header",children:"รายการสินค้า"}),o.map((e,s)=>(0,r.jsxs)("div",{className:"jsx-8bea46dc162791d5 item-row",children:[r.jsx("div",{style:c,className:"jsx-8bea46dc162791d5",children:r.jsx("span",{className:"jsx-8bea46dc162791d5",children:e.product?.display_name||e.product?.product_name||"สินค้า"})}),(0,r.jsxs)("div",{style:{...c,paddingLeft:10,fontSize:"11px",color:"#4b5563"},className:"jsx-8bea46dc162791d5",children:[(0,r.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:[e.quantity," x ฿",Number(e.price).toLocaleString()]}),(0,r.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["฿",Number(e.total_price).toLocaleString()]})]}),e.notes&&(0,r.jsxs)("div",{className:"jsx-8bea46dc162791d5 item-note",children:["*",e.notes]})]},e.id||s))]}),r.jsx("div",{className:"jsx-8bea46dc162791d5 dashed-line"}),(0,r.jsxs)("div",{className:"jsx-8bea46dc162791d5 section",children:[(0,r.jsxs)("div",{style:c,className:"jsx-8bea46dc162791d5",children:[r.jsx("span",{className:"jsx-8bea46dc162791d5",children:"รวมรายการ:"}),(0,r.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["฿",Number(e.sub_total).toLocaleString()]})]}),e.discount_amount>0&&(0,r.jsxs)("div",{style:c,className:"jsx-8bea46dc162791d5",children:[(0,r.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["ส่วนลด (",e.discount?.display_name||e.discount?.discount_name||"ส่วนลด","):"]}),(0,r.jsxs)("span",{style:{color:"#ef4444"},className:"jsx-8bea46dc162791d5",children:["-฿",Number(e.discount_amount).toLocaleString()]})]}),e.vat>0&&(0,r.jsxs)("div",{style:c,className:"jsx-8bea46dc162791d5",children:[r.jsx("span",{className:"jsx-8bea46dc162791d5",children:"VAT 7%:"}),(0,r.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["฿",Number(e.vat).toLocaleString()]})]}),(0,r.jsxs)("div",{className:"jsx-8bea46dc162791d5 total-row",children:[r.jsx("span",{className:"jsx-8bea46dc162791d5",children:"ยอดสุทธิ:"}),(0,r.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["฿",Number(e.total_amount).toLocaleString()]})]})]}),r.jsx("div",{className:"jsx-8bea46dc162791d5 dashed-line"}),l.length>0&&(0,r.jsxs)("div",{className:"jsx-8bea46dc162791d5 section",children:[r.jsx("div",{className:"jsx-8bea46dc162791d5 section-header",children:"การชำระเงิน"}),l.map((e,s)=>(0,r.jsxs)("div",{style:c,className:"jsx-8bea46dc162791d5",children:[r.jsx("span",{className:"jsx-8bea46dc162791d5",children:e.payment_method?.display_name||e.payment_method?.payment_method_name||"ไม่ระบุ"}),(0,r.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["฿",Number(e.amount).toLocaleString()]})]},e.id||s)),l.some(e=>e.change_amount>0)&&(0,r.jsxs)("div",{style:c,className:"jsx-8bea46dc162791d5",children:[r.jsx("span",{className:"jsx-8bea46dc162791d5",children:"เงินทอน:"}),(0,r.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["฿",l.reduce((e,s)=>e+Number(s.change_amount||0),0).toLocaleString()]})]})]}),r.jsx("div",{className:"jsx-8bea46dc162791d5 dashed-line"}),(0,r.jsxs)("div",{className:"jsx-8bea46dc162791d5 receipt-footer",children:[r.jsx("div",{style:{fontSize:"12px",fontWeight:600,marginBottom:4},className:"jsx-8bea46dc162791d5",children:"ขอบคุณที่ใช้บริการ"}),r.jsx("div",{style:{fontSize:"10px",color:"#666"},className:"jsx-8bea46dc162791d5",children:"Thank you for your purchase!"}),(0,r.jsxs)("div",{style:{fontSize:"9px",color:"#999",marginTop:8},className:"jsx-8bea46dc162791d5",children:["พิมพ์เมื่อ: ",A()().format("DD/MM/YYYY HH:mm:ss")]})]})]}),r.jsx(Z(),{id:"8bea46dc162791d5",children:'.receipt-container.jsx-8bea46dc162791d5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:20px;background:#f0f2f5}.receipt-paper.jsx-8bea46dc162791d5{font-family:"Courier New",Courier,monospace;font-size:12px;width:80mm;padding:16px;background-color:#fff;color:#000;margin:0 auto;-webkit-box-shadow:0 4px 12px rgba(0,0,0,.1);-moz-box-shadow:0 4px 12px rgba(0,0,0,.1);box-shadow:0 4px 12px rgba(0,0,0,.1);position:relative}.dashed-line.jsx-8bea46dc162791d5{border-top:1px dashed#000;margin:12px 0;opacity:.5}.text-center.jsx-8bea46dc162791d5{text-align:center}.mb-4.jsx-8bea46dc162791d5{margin-bottom:16px}.font-bold.jsx-8bea46dc162791d5{fontweight:bold}.receipt-logo.jsx-8bea46dc162791d5{width:60px;height:60px;-o-object-fit:contain;object-fit:contain;margin-bottom:8px;-webkit-filter:grayscale(100%);filter:grayscale(100%)}.shop-name.jsx-8bea46dc162791d5{font-weight:bold;font-size:16px;margin-bottom:4px}.shop-info.jsx-8bea46dc162791d5{font-size:10px;margin-bottom:2px}.section.jsx-8bea46dc162791d5{margin-bottom:8px}.section-header.jsx-8bea46dc162791d5{font-weight:bold;margin-bottom:8px;font-size:13px}.item-row.jsx-8bea46dc162791d5{margin-bottom:6px}.item-note.jsx-8bea46dc162791d5{padding-left:10px;font-size:10px;font-style:italic;color:#666}.total-row.jsx-8bea46dc162791d5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-weight:bold;font-size:16px;margin-top:12px;border-top:2px solid#000;padding-top:8px}.receipt-footer.jsx-8bea46dc162791d5{text-align:center;margin-top:16px}@media print{.receipt-container.jsx-8bea46dc162791d5{padding:0;background:none}.receipt-paper.jsx-8bea46dc162791d5{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;width:100%;max-width:80mm}}'})]})});B.displayName="ReceiptTemplate";var R=t(94098);let D=e=>[...e].sort((e,s)=>{let t=e.status===R.M.Cancelled,r=s.status===R.M.Cancelled;return t&&!r?1:!t&&r?-1:0}),I=e=>e===R.M.Cancelled?{color:"#f5222d",fontWeight:"bold"}:{};var O=t(80440),q=t(54354);let{Title:T,Text:H}=n.default;A().locale("th");let M=["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],W=e=>{let s=A()(e);return`${s.date()} ${M[s.month()]} ${s.format("HH:mm")}`};function V({params:e}){let s=(0,F.useRouter)(),t=e.id[0],{socket:n}=(0,O.s)(),[y,g]=(0,a.useState)(null),[f,E]=(0,a.useState)(!0),[A,L]=(0,a.useState)(null),[Z,M]=(0,a.useState)(!1),V=(0,a.useRef)(null),Y=(0,a.useCallback)(async()=>{if(t){E(!0);try{let e=await k.x.getById(t);g(e)}catch(e){console.error("Fetch order detail error:",e),i.ZP.error("ไม่พบข้อมูลออเดอร์")}finally{E(!1)}}},[t]);if((0,q.D)({socket:n,events:["orders:update","orders:delete","payments:create","payments:update"],onRefresh:()=>Y(),intervalMs:2e4}),(0,a.useCallback)(async()=>{try{let e=await z.n.getProfile();L(e)}catch(e){console.warn("Could not fetch shop profile",e)}},[]),f)return r.jsx("div",{style:{minHeight:"100vh",background:"#F8FAFC",display:"flex",justifyContent:"center",alignItems:"center"},children:r.jsx(d.Z,{size:"large"})});if(!y)return r.jsx("div",{style:{minHeight:"100vh",background:"#F8FAFC",padding:24},children:(0,r.jsxs)("div",{style:{textAlign:"center",paddingTop:60},children:[r.jsx(x.Z,{style:{fontSize:48,color:"#CBD5E1",marginBottom:16}}),r.jsx(T,{level:4,style:{color:"#64748B"},children:"ไม่พบข้อมูลออเดอร์"}),r.jsx(o.ZP,{type:"primary",onClick:()=>s.back(),children:"ย้อนกลับ"})]})});let G=D(y.items||[]),$=y.payments||[],X=y.created_by?.name||y.created_by?.username||"ไม่ทราบ",U=y.table?.table_name||"-",J=y.discount,K=(e=>{switch(e){case _.m.DineIn:return{icon:r.jsx(p.Z,{}),label:"ทานที่ร้าน",color:"#fff",bg:"#3B82F6"};case _.m.TakeAway:return{icon:r.jsx(h.Z,{}),label:"กลับบ้าน",color:"#fff",bg:"#22C55E"};case _.m.Delivery:return{icon:r.jsx(m.Z,{}),label:"เดลิเวอรี่",color:"#fff",bg:"#EC4899"};default:return{icon:r.jsx(x.Z,{}),label:e,color:"#fff",bg:"#6B7280"}}})(y.order_type),Q=(e=>{switch(e){case _.i.Paid:return{bg:"#DCFCE7",color:"#16A34A",label:"ชำระเงินแล้ว",icon:r.jsx(j.Z,{})};case _.i.Cancelled:return{bg:"#FEE2E2",color:"#DC2626",label:"ยกเลิก",icon:r.jsx(b.Z,{})};default:return{bg:"#F3F4F6",color:"#6B7280",label:e,icon:null}}})(y.status);return(0,r.jsxs)("div",{style:{minHeight:"100vh",background:"#F8FAFC",paddingBottom:100},children:[r.jsx("div",{style:{background:P.Pc.headerGradient,padding:"16px",position:"sticky",top:0,zIndex:100,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[r.jsx(o.ZP,{type:"text",icon:r.jsx(u.Z,{style:{fontSize:18,color:"#fff"}}),onClick:()=>s.back(),style:{background:"rgba(255,255,255,0.15)",border:"none",width:40,height:40,borderRadius:12}}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(H,{style:{color:"#fff",fontSize:18,fontWeight:700,display:"block"},children:["#",y.order_no]}),(0,r.jsxs)(H,{style:{color:"rgba(255,255,255,0.8)",fontSize:12},children:["\uD83D\uDCC5 ",W(y.create_date)]})]})]}),r.jsx(o.ZP,{icon:r.jsx(v,{}),onClick:()=>{M(!0),setTimeout(()=>{if(V.current){let e=V.current.innerHTML,s=window.open("","","width=400,height=600");s&&(s.document.write(`
                        <html>
                            <head>
                                <title>ใบเสร็จ #${y?.order_no}</title>
                                <style>
                                    body { font-family: 'Courier New', Courier, monospace; padding: 0; margin: 0; }
                                    @media print {
                                        body { -webkit-print-color-adjust: exact; }
                                    }
                                </style>
                            </head>
                            <body>${e}</body>
                        </html>
                    `),s.document.close(),s.focus(),s.print(),s.close())}M(!1)},500)},style:{background:"#fff",color:P.Pc.primary,border:"none",borderRadius:10,fontWeight:600,height:36},children:"พิมพ์"})]})}),(0,r.jsxs)("div",{style:{padding:"16px",maxWidth:600,margin:"0 auto"},children:[(0,r.jsxs)("div",{style:{background:"white",borderRadius:16,padding:"20px",marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[(0,r.jsxs)("span",{style:{padding:"6px 14px",borderRadius:8,background:Q.bg,color:Q.color,fontWeight:700,fontSize:13,display:"inline-flex",alignItems:"center",gap:6},children:[Q.icon,Q.label]}),(0,r.jsxs)(H,{style:{fontSize:26,fontWeight:800,color:P.Pc.salesColor},children:["฿",Number(y.total_amount).toLocaleString()]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:[(0,r.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[r.jsx("span",{style:{width:36,height:36,borderRadius:10,background:K.bg,color:K.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:K.icon}),(0,r.jsxs)("div",{children:[r.jsx(H,{type:"secondary",style:{fontSize:11,display:"block"},children:"ประเภท"}),r.jsx(H,{strong:!0,style:{fontSize:13},children:K.label})]})]}),(0,r.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[r.jsx("span",{style:{width:36,height:36,borderRadius:10,background:"#EEF2FF",color:"#6366F1",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:r.jsx(p.Z,{})}),(0,r.jsxs)("div",{children:[r.jsx(H,{type:"secondary",style:{fontSize:11,display:"block"},children:"โต๊ะ"}),r.jsx(H,{strong:!0,style:{fontSize:13},children:U})]})]}),(0,r.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[r.jsx("span",{style:{width:36,height:36,borderRadius:10,background:"#FEF3C7",color:"#D97706",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:r.jsx(w.Z,{})}),(0,r.jsxs)("div",{children:[r.jsx(H,{type:"secondary",style:{fontSize:11,display:"block"},children:"พนักงาน"}),r.jsx(H,{strong:!0,style:{fontSize:13},children:X})]})]}),(0,r.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[r.jsx("span",{style:{width:36,height:36,borderRadius:10,background:J?"#FEE2E2":"#F3F4F6",color:J?"#DC2626":"#9CA3AF",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:r.jsx(N.Z,{})}),(0,r.jsxs)("div",{children:[r.jsx(H,{type:"secondary",style:{fontSize:11,display:"block"},children:"ส่วนลด"}),J?(0,r.jsxs)(H,{strong:!0,style:{fontSize:13,color:"#DC2626"},children:["-฿",Number(y.discount_amount).toLocaleString()]}):r.jsx(H,{type:"secondary",style:{fontSize:13},children:"ไม่มี"})]})]})]})]}),(0,r.jsxs)("div",{style:{background:"white",borderRadius:16,overflow:"hidden",marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,r.jsxs)("div",{style:{padding:"16px",borderBottom:"1px solid #F1F5F9",display:"flex",alignItems:"center",gap:8},children:[r.jsx(x.Z,{style:{color:P.Pc.primary,fontSize:18}}),(0,r.jsxs)(H,{strong:!0,style:{fontSize:15},children:["รายการสินค้า (",G.length,")"]})]}),r.jsx("div",{style:{padding:"8px 0"},children:G.map((e,s)=>{let t=I(e.status),a=e.status===R.M.Cancelled;return(0,r.jsxs)("div",{style:{padding:"12px 16px",borderBottom:s<G.length-1?"1px solid #F8FAFC":"none",display:"flex",gap:12,opacity:a?.5:1},children:[r.jsx("div",{style:{width:56,height:56,borderRadius:10,overflow:"hidden",flexShrink:0,background:"#F8FAFC",border:"1px solid #E5E7EB"},children:e.product?.img_url?r.jsx(l.Z,{src:e.product.img_url,width:56,height:56,style:{objectFit:"cover"},preview:!1,alt:e.product?.product_name||"product"}):r.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(x.Z,{style:{color:"#CBD5E1",fontSize:20}})})}),(0,r.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:8},children:[r.jsx(H,{strong:!0,style:{fontSize:14,...t},children:e.product?.display_name||e.product?.product_name||"สินค้า"}),(0,r.jsxs)(H,{strong:!0,style:{fontSize:14,color:P.Pc.salesColor,flexShrink:0,...t},children:["฿",Number(e.total_price).toLocaleString()]})]}),(0,r.jsxs)("div",{style:{marginTop:4,display:"flex",alignItems:"center",gap:8},children:[(0,r.jsxs)(H,{type:"secondary",style:{fontSize:12},children:["x",e.quantity," • ฿",Number(e.price).toLocaleString(),"/ชิ้น"]}),a&&r.jsx("span",{style:{fontSize:10,padding:"2px 6px",borderRadius:4,background:"#FEE2E2",color:"#DC2626",fontWeight:600},children:"ยกเลิก"})]}),e.details&&e.details.length>0&&r.jsx("div",{style:{marginTop:6},children:e.details.map((e,s)=>(0,r.jsxs)(H,{style:{fontSize:11,display:"block",color:"#16A34A",fontWeight:500},children:["+ ",e.detail_name," ",e.extra_price>0&&(0,r.jsxs)("span",{style:{color:"#16A34A"},children:["(+฿",Number(e.extra_price).toLocaleString(),")"]})]},s))}),e.notes&&r.jsx("div",{style:{marginTop:6,background:"#FEF3C7",padding:"4px 8px",borderRadius:6,display:"inline-block"},children:(0,r.jsxs)(H,{style:{fontSize:11,color:"#B45309"},children:["\uD83D\uDCDD ",e.notes]})})]})]},e.id)})}),(0,r.jsxs)("div",{style:{background:"#F8FAFC",padding:"12px 16px",borderTop:"1px solid #F1F5F9"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[r.jsx(H,{type:"secondary",style:{fontSize:13},children:"รวมรายการ"}),(0,r.jsxs)(H,{style:{fontSize:13},children:["฿",Number(y.sub_total).toLocaleString()]})]}),y.discount_amount>0&&(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[r.jsx(H,{type:"secondary",style:{fontSize:13},children:"ส่วนลด"}),(0,r.jsxs)(H,{style:{fontSize:13,color:"#DC2626"},children:["-฿",Number(y.discount_amount).toLocaleString()]})]}),y.vat>0&&(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[r.jsx(H,{type:"secondary",style:{fontSize:13},children:"VAT 7%"}),(0,r.jsxs)(H,{style:{fontSize:13},children:["฿",Number(y.vat).toLocaleString()]})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:8,borderTop:"1px dashed #E2E8F0"},children:[r.jsx(H,{strong:!0,style:{fontSize:15},children:"ยอดสุทธิ"}),(0,r.jsxs)(H,{strong:!0,style:{fontSize:18,color:P.Pc.salesColor},children:["฿",Number(y.total_amount).toLocaleString()]})]})]})]}),(0,r.jsxs)("div",{style:{background:"white",borderRadius:16,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,r.jsxs)("div",{style:{padding:"16px",borderBottom:"1px solid #F1F5F9",display:"flex",alignItems:"center",gap:8},children:[r.jsx(S.Z,{style:{color:"#22C55E",fontSize:18}}),(0,r.jsxs)(H,{strong:!0,style:{fontSize:15},children:["การชำระเงิน (",$.length,")"]})]}),$.length>0?r.jsx("div",{style:{padding:"8px 0"},children:$.map((e,s)=>(0,r.jsxs)("div",{style:{padding:"14px 16px",borderBottom:s<$.length-1?"1px solid #F8FAFC":"none"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:"Success"===e.status?"#22C55E":"#EF4444"}}),r.jsx(H,{strong:!0,style:{fontSize:14},children:e.payment_method?.display_name||e.payment_method?.payment_method_name||"ไม่ระบุ"})]}),(0,r.jsxs)(H,{strong:!0,style:{fontSize:15,color:P.Pc.salesColor},children:["฿",Number(e.amount).toLocaleString()]})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,r.jsxs)(H,{type:"secondary",style:{fontSize:12},children:[r.jsx(C.Z,{style:{marginRight:4}}),W(e.payment_date)]}),e.amount_received>0&&(0,r.jsxs)(H,{type:"secondary",style:{fontSize:12},children:["รับมา ฿",Number(e.amount_received).toLocaleString(),e.change_amount>0&&` • ทอน ฿${Number(e.change_amount).toLocaleString()}`]})]})]},e.id))}):(0,r.jsxs)("div",{style:{padding:"30px 16px",textAlign:"center"},children:[r.jsx(S.Z,{style:{fontSize:32,color:"#CBD5E1",marginBottom:8}}),r.jsx(H,{type:"secondary",style:{display:"block"},children:"ไม่มีข้อมูลการชำระเงิน"})]})]})]}),r.jsx(c.Z,{open:Z,footer:null,closable:!1,width:380,centered:!0,children:(0,r.jsxs)("div",{style:{textAlign:"center",padding:20},children:[r.jsx(d.Z,{size:"large"}),r.jsx("div",{style:{marginTop:16},children:"กำลังเตรียมพิมพ์..."})]})}),r.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:r.jsx(B,{ref:V,order:y,shopName:A?.shop_name,shopAddress:A?.address,shopPhone:A?.phone,shopTaxId:A?.tax_id,shopLogo:A?.logo_url})})]})}},57480:(e,s,t)=>{"use strict";t.d(s,{n:()=>i});var r=t(12529);let a="/pos/shopProfile",n=(e,s="application/json")=>{let t={};return s&&(t["Content-Type"]=s),e&&(t.Cookie=e),t},i={getProfile:async e=>{let s=(0,r.b)("GET",a),t=n(e,""),i=await fetch(s,{cache:"no-store",headers:t,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลร้านค้าได้")}return i.json()},updateProfile:async(e,s,t)=>{let i=(0,r.b)("PUT",a),d=n(s);t&&(d["X-CSRF-Token"]=t);let o=await fetch(i,{method:"PUT",headers:d,credentials:"include",body:JSON.stringify(e)});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถอัปเดตข้อมูลร้านค้าได้")}return o.json()}}},94098:(e,s,t)=>{"use strict";var r;t.d(s,{M:()=>r}),function(e){e.Pending="Pending",e.Cooking="Cooking",e.Served="Served",e.Cancelled="Cancelled"}(r||(r={}))},31437:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\dashboard\[...id]\page.tsx#default`)}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[9276,8674,8571,8270,9345,9042,1399,4658,526],()=>t(74562));module.exports=r})();