(()=>{var e={};e.id=561,e.ids=[561],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},45699:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.Z,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>u,tree:()=>o}),r(53803),r(85429),r(58522),r(61804),r(7629),r(11930),r(12523);var i=r(23191),s=r(88716),l=r(43315),n=r(95231),a={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>n[e]);r.d(t,a);let o=["",{children:["(main)",{children:["pos",{children:["delivery",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,53803)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\delivery\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\delivery\\page.tsx"],c="/(main)/pos/delivery/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/pos/delivery/page",pathname:"/pos/delivery",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},349:(e,t,r)=>{Promise.resolve().then(r.bind(r,33041))},33041:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var i=r(10326),s=r(77626),l=r.n(s),n=r(17577),a=r(66874),o=r(61357),d=r(71935),c=r(75958),p=r(46752),u=r(64635),h=r(49909),x=r(46226),y=r(71696),g=r(46024),v=r(63191),j=r(24395),m=r(80490),f=r(72380),b=r(35047),P=r(37938),w=r(59746),_=r(80440),F=r(33357),k=r(7670),Z=r(54354),E=r(83179),R=r(69711),C=r(86230),q=r(26902),S=r(26963),O=r(76892),A=r(18978),B=r(52647),D=r(36231);let{Text:I}=a.default,z=({totalDelivery:e,activeDelivery:t,inactiveDelivery:r})=>(0,i.jsxs)("div",{style:C.R.statsCard,children:[(0,i.jsxs)("div",{style:C.R.statItem,children:[i.jsx("span",{style:{...C.R.statNumber,color:"#0891B2"},children:e}),i.jsx(I,{style:C.R.statLabel,children:"ทั้งหมด"})]}),i.jsx("div",{style:{width:1,height:24,background:"#f0f0f0",alignSelf:"center"}}),(0,i.jsxs)("div",{style:C.R.statItem,children:[i.jsx("span",{style:{...C.R.statNumber,color:"#10B981"},children:t}),i.jsx(I,{style:C.R.statLabel,children:"เปิดใช้งาน"})]}),i.jsx("div",{style:{width:1,height:24,background:"#f0f0f0",alignSelf:"center"}}),(0,i.jsxs)("div",{style:C.R.statItem,children:[i.jsx("span",{style:{...C.R.statNumber,color:"#EF4444"},children:r}),i.jsx(I,{style:C.R.statLabel,children:"ปิดใช้งาน"})]})]}),N=({delivery:e,index:t,onEdit:r,onDelete:s})=>i.jsx("div",{className:"delivery-card",style:{...C.R.deliveryCard(e.is_active),animationDelay:`${.03*t}s`},onClick:()=>r(e),children:(0,i.jsxs)("div",{style:C.R.deliveryCardInner,children:[i.jsx("div",{style:{width:56,height:56,borderRadius:16,background:e.is_active?"linear-gradient(135deg, #CFFAFE 0%, #A5F3FC 100%)":"#F1F5F9",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,overflow:"hidden",position:"relative",boxShadow:e.is_active?"0 4px 10px rgba(8, 145, 178, 0.1)":"none"},children:e.logo?i.jsx(x.default,{src:e.logo,alt:e.delivery_name,fill:!0,sizes:"56px",style:{objectFit:"contain",padding:8,opacity:e.is_active?1:.6}}):i.jsx(y.Z,{style:{fontSize:24,color:e.is_active?"#0891B2":"#94A3B8"}})}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0,paddingRight:8},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[i.jsx(I,{strong:!0,style:{fontSize:16,color:e.is_active?"#1E293B":"#64748B"},ellipsis:{tooltip:e.delivery_name},children:e.delivery_name}),e.is_active?i.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#10B981",boxShadow:"0 0 0 2px #ecfdf5"}}):i.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:"#CBD5E1"}})]}),e.delivery_prefix&&i.jsx("div",{style:{display:"flex"},children:i.jsx(o.Z,{style:{borderRadius:6,margin:0,fontSize:10,color:"#0891B2",background:"#CFFAFE",border:"none",fontWeight:600,padding:"0 6px",lineHeight:"18px",height:18},children:e.delivery_prefix})})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[i.jsx(d.ZP,{type:"text",icon:i.jsx(g.Z,{}),onClick:t=>{t.stopPropagation(),r(e)},style:{borderRadius:12,color:"#0891B2",background:"#CFFAFE",width:36,height:36}}),i.jsx(d.ZP,{type:"text",danger:!0,icon:i.jsx(v.Z,{}),onClick:t=>{t.stopPropagation(),s(e)},style:{borderRadius:12,background:"#FEF2F2",width:36,height:36}})]})]})});function T(){let e=(0,b.useRouter)(),[t,r]=(0,n.useState)([]),[s,a]=(0,n.useState)([]),[o,x]=(0,n.useState)(""),{execute:g}=(0,w.J)(),{showLoading:I}=(0,P.x)(),{socket:T}=(0,_.s)(),{isAuthorized:G,isChecking:J}=(0,k.e)({allowedRoles:["Admin","Manager"]}),W=(0,n.useCallback)(async()=>{g(async()=>{let e=await fetch("/api/pos/delivery?limit=100");if(!e.ok)throw Error("Failed to fetch deliveries");let t=await e.json(),i=t.data||t;Array.isArray(i)&&(r(i),(0,R.v)("pos:delivery-providers",i))},"กำลังโหลดข้อมูล...")},[g]);(0,Z.v)(T,{create:E.b.delivery.create,update:E.b.delivery.update,delete:E.b.delivery.delete},r);let $=e=>{x(e)},H=()=>{I("กำลังเปิดหน้าจัดการบริการส่ง..."),e.push("/pos/delivery/manager/add")},L=t=>{I("กำลังเปิดหน้าแก้ไขบริการส่ง..."),e.push(`/pos/delivery/manager/edit/${t.id}`)},M=e=>{c.Z.confirm({title:"ยืนยันการลบบริการส่ง",content:`คุณต้องการลบบริการส่ง "${e.delivery_name}" หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:i.jsx(v.Z,{style:{color:"#EF4444"}}),maskClosable:!0,onOk:async()=>{await g(async()=>{let t=await (0,F.P)();if(!(await fetch(`/api/pos/delivery/delete/${e.id}`,{method:"DELETE",headers:{"X-CSRF-Token":t}})).ok)throw Error("ไม่สามารถลบบริการส่งได้");p.ZP.success(`ลบบริการส่ง "${e.delivery_name}" สำเร็จ`)},"กำลังลบบริการส่ง...")}})};if(J)return i.jsx(q.H,{message:"กำลังตรวจสอบสิทธิ์การใช้งาน..."});if(!G)return i.jsx(q.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับ...",tone:"danger"});let U=t.filter(e=>e.is_active),X=t.filter(e=>!e.is_active);return(0,i.jsxs)("div",{style:C.R.container,className:"jsx-81e749a9668c95f6 delivery-page",children:[i.jsx("style",{children:C.W}),i.jsx(l(),{id:"81e749a9668c95f6",children:".search-input-placeholder-white input::-webkit-input-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input:-moz-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input::-moz-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input:-ms-input-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input::-ms-input-placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input::placeholder{color:rgba(255,255,255,.6)!important}.search-input-placeholder-white input{color:white!important}.delivery-card{cursor:pointer;-webkit-tap-highlight-color:transparent}"}),i.jsx(B.Z,{title:"ช่องทางจัดส่ง",subtitle:`${t.length} รายการ`,icon:i.jsx(y.Z,{}),actions:(0,i.jsxs)(u.Z,{size:8,wrap:!0,children:[i.jsx(h.default,{prefix:i.jsx(j.Z,{style:{color:"#94A3B8"}}),allowClear:!0,placeholder:"ค้นหาช่องทางจัดส่ง...",onChange:e=>$(e.target.value),style:{minWidth:220}}),i.jsx(d.ZP,{icon:i.jsx(m.Z,{}),onClick:W}),i.jsx(d.ZP,{type:"primary",icon:i.jsx(f.Z,{}),onClick:H,children:"เพิ่มช่องทางจัดส่ง"})]})}),i.jsx(S.Z,{children:(0,i.jsxs)(A.Z,{children:[i.jsx(z,{totalDelivery:t.length,activeDelivery:U.length,inactiveDelivery:X.length}),i.jsx(O.Z,{title:"รายการช่องทางจัดส่ง",extra:i.jsx("span",{style:{fontWeight:600},className:"jsx-81e749a9668c95f6",children:s.length}),children:s.length>0?s.map((e,t)=>i.jsx(N,{delivery:e,index:t,onEdit:L,onDelete:M},e.id)):i.jsx(D.Z,{title:o.trim()?"ไม่พบช่องทางจัดส่งที่ค้นหา":"ยังไม่มีช่องทางจัดส่ง",description:o.trim()?"ลองค้นหาด้วยคำอื่นหรือล้างการค้นหา":"เพิ่มช่องทางจัดส่งตัวแรกเพื่อเริ่มต้นใช้งาน",action:o.trim()?null:i.jsx(d.ZP,{type:"primary",icon:i.jsx(f.Z,{}),onClick:H,children:"เพิ่มช่องทางจัดส่ง"})})})]})})]})}},18978:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(10326);r(17577);var s=r(21020),l=r(52386);function n({children:e,gap:t=l.H.sectionGap,style:r}){return i.jsx(s.Z,{vertical:!0,gap:t,style:r,children:e})}},36231:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(10326);r(17577);var s=r(56249),l=r(75698),n=r(66874),a=r(52386);function o({title:e="ไม่มีข้อมูล",description:t,action:r,image:o}){return i.jsx(s.Z,{size:"small",variant:"outlined",style:{borderRadius:a.H.cardRadiusLG},bodyStyle:{padding:20},children:i.jsx(l.Z,{image:o,description:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[i.jsx(n.default.Text,{strong:!0,children:e}),t?i.jsx(n.default.Text,{type:"secondary",children:t}):null]}),children:r})})}},59746:(e,t,r)=>{"use strict";r.d(t,{J:()=>n});var i=r(17577),s=r(75958),l=r(37938);let n=()=>{let{showLoading:e,hideLoading:t}=(0,l.x)();return{execute:(0,i.useCallback)(async(r,i="กำลังดำเนินการ...",l,n="เกิดข้อผิดพลาด")=>{try{return e(i,"async"),await r()}catch(t){console.error("Async action error:",t);let e=n;"string"==typeof t?e=t:t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&(e=t.response?.data?.message??t.message??(()=>{try{return JSON.stringify(t)}catch{return"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ (Unknown Error)"}})()),s.Z.error({title:"ข้อผิดพลาด",content:e});return}finally{t("async")}},[e,t])}}},80440:(e,t,r)=>{"use strict";r.d(t,{s:()=>l});var i=r(17577),s=r(19211);let l=()=>(0,i.useContext)(s.J)},86230:(e,t,r)=>{"use strict";r.d(t,{R:()=>s,W:()=>l});var i=r(44528);let s={...(0,i.yf)("linear-gradient(135deg, #06B6D4 0%, #0891B2 100%)"),deliveryCard:i.YO,deliveryCardInner:i.lv},l=(0,i.IU)(".delivery-page",".delivery-card")},69711:(e,t,r)=>{"use strict";r.d(t,{t:()=>s,v:()=>l});let i=()=>!1,s=(e,t)=>{if(!i())return null;try{let r=window.localStorage.getItem(e);if(!r)return null;let i=JSON.parse(r);if(!i?.ts||Date.now()-i.ts>t)return null;return i.data??null}catch{return null}},l=(e,t)=>{if(i())try{let r={ts:Date.now(),data:t};window.localStorage.setItem(e,JSON.stringify(r))}catch{}}},54354:(e,t,r)=>{"use strict";function i(e,t,r,i=e=>e.id,s=()=>!0){}function s({socket:e,events:t=[],onRefresh:r,intervalMs:i,enabled:s=!0,debounceMs:l}){}r.d(t,{D:()=>s,v:()=>i}),r(17577)},53803:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\delivery\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[9276,4421,8571,8842,9244,8963,1399,4658,3849],()=>r(45699));module.exports=i})();