(()=>{var e={};e.id=6834,e.ids=[6834],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},2974:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.Z,__next_app__:()=>p,originalPathname:()=>c,pages:()=>d,routeModule:()=>x,tree:()=>l}),t(90796),t(85429),t(58522),t(61804),t(7629),t(11930),t(12523);var s=t(23191),i=t(88716),o=t(43315),a=t(95231),n={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>a[e]);t.d(r,n);let l=["",{children:["(main)",{children:["pos",{children:["delivery",{children:["manager",{children:["[...mode]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,90796)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\delivery\\manager\\[...mode]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,85429)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\pos\\delivery\\manager\\[...mode]\\page.tsx"],c="/(main)/pos/delivery/manager/[...mode]/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/pos/delivery/manager/[...mode]/page",pathname:"/pos/delivery/manager/[...mode]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},25122:(e,r,t)=>{Promise.resolve().then(t.bind(t,36693))},30278:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n});var s=t(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var o=t(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e}).apply(this,arguments)}let n=s.forwardRef((e,r)=>s.createElement(o.Z,a({},e,{ref:r,icon:i})))},36693:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>B});var s=t(10326),i=t(77626),o=t.n(i),a=t(17577),n=t(66874),l=t(71935),d=t(43359),c=t(46752),p=t(75958),x=t(92121),u=t(49909),g=t(63459),h=t(35047),m=t(26963),y=t(76892),b=t(52647),v=t(71696),j=t(56811),f=t(30278),P=t(63191),F=t(46226),w=t(86230);t(33357);var E=t(7670),k=t(26902),_=t(37938);let{Title:C,Text:Z}=n.default,q=()=>(0,s.jsxs)(s.Fragment,{children:[s.jsx("style",{children:w.W}),s.jsx(o(),{id:"2eebb3b1f226f246",children:".ant-form-item-label>label{font-size:15px;font-weight:500;color:#334155}.ant-input-lg,.ant-input-number-lg{-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:10px 16px;font-size:16px;border-color:#E2E8F0}.ant-input-lg:hover,.ant-input-number-lg:hover{border-color:#0891B2}.ant-input-lg:focus,.ant-input-number-lg:focus{border-color:#0891B2;-webkit-box-shadow:0 0 0 2px rgba(8,145,178,.1);-moz-box-shadow:0 0 0 2px rgba(8,145,178,.1);box-shadow:0 0 0 2px rgba(8,145,178,.1)}.ant-card-bordered{border-color:#E2E8F0}"})]}),S=({name:e,logo:r})=>(0,s.jsxs)("div",{style:{background:"white",borderRadius:24,padding:24,boxShadow:"0 10px 30px rgba(0,0,0,0.05)",border:"1px solid #F1F5F9",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[s.jsx(C,{level:5,style:{color:"#94A3B8",marginBottom:20,fontWeight:600,width:"100%",textAlign:"left"},children:"ตัวอย่างการแสดงผล"}),(0,s.jsxs)("div",{style:{width:"100%",background:"white",borderRadius:16,border:"1px solid #E2E8F0",padding:"16px",display:"flex",alignItems:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.03)",maxWidth:400},children:[s.jsx("div",{style:{width:56,height:56,borderRadius:16,background:"linear-gradient(135deg, #CFFAFE 0%, #A5F3FC 100%)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginRight:16,overflow:"hidden",position:"relative",boxShadow:"0 4px 10px rgba(8, 145, 178, 0.1)"},children:r?s.jsx(F.default,{src:r,alt:e||"Logo",fill:!0,sizes:"56px",style:{objectFit:"contain",padding:8},onError:e=>{e.target.style.display="none"}}):s.jsx(v.Z,{style:{fontSize:24,color:"#0891B2"}})}),s.jsx("div",{style:{flex:1,minWidth:0},children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[s.jsx(Z,{strong:!0,style:{fontSize:16,color:"#1E293B"},children:e||"ชื่อบริการส่ง"}),s.jsx(j.Z,{style:{color:"#10B981",fontSize:14}})]})})]}),s.jsx("div",{style:{marginTop:24,textAlign:"center"},children:s.jsx(Z,{type:"secondary",style:{fontSize:13},children:"นี่คือลักษณะที่จะแสดงในรายการ"})})]}),z=({isEdit:e,loading:r,onCancel:t})=>(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:12,marginTop:40,borderTop:"1px solid #F1F5F9",paddingTop:24},children:[s.jsx(l.ZP,{size:"large",onClick:t,style:{borderRadius:12,height:48,padding:"0 32px",border:"1px solid #E2E8F0",color:"#64748B",fontWeight:600},children:"ยกเลิก"}),s.jsx(l.ZP,{type:"primary",htmlType:"submit",loading:r,icon:s.jsx(f.Z,{}),size:"large",style:{borderRadius:12,height:48,padding:"0 32px",background:"#0891B2",boxShadow:"0 4px 12px rgba(8, 145, 178, 0.3)",fontWeight:600,border:"none"},children:e?"บันทึกการแก้ไข":"สร้างบริการส่ง"})]});function B({params:e}){let r=(0,h.useRouter)(),[t]=d.Z.useForm(),[i,o]=(0,a.useState)(!1),[n,v]=(0,a.useState)(!1),[j,f]=(0,a.useState)(""),[C,B]=(0,a.useState)(""),[R,T]=(0,a.useState)(""),{showLoading:O,hideLoading:I}=(0,_.x)(),A=e.mode[0],L=e.mode[1]||null,V="edit"===A&&!!L,{isAuthorized:M,isChecking:W}=(0,E.e)({allowedRoles:["Admin","Manager"]});(0,a.useCallback)(async()=>{o(!0),O();try{let e=await fetch(`/api/pos/delivery/getById/${L}`);if(!e.ok)throw Error("ไม่สามารถดึงข้อมูลบริการส่งได้");let r=await e.json();t.setFieldsValue({delivery_name:r.delivery_name,delivery_prefix:r.delivery_prefix,logo:r.logo,is_active:r.is_active}),f(r.delivery_name||""),B(r.logo||"")}catch(e){console.error(e),c.ZP.error("ไม่สามารถดึงข้อมูลบริการส่งได้"),r.push("/pos/delivery")}finally{o(!1),I()}},[L,t,r,O,I]);let N=async e=>{v(!0);try{if(V){let r=await fetch(`/api/pos/delivery/update/${L}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":R},body:JSON.stringify(e)});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถอัปเดตบริการส่งได้")}c.ZP.success("อัปเดตบริการส่งสำเร็จ")}else{let r=await fetch("/api/pos/delivery/create",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":R},body:JSON.stringify(e)});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถสร้างบริการส่งได้")}c.ZP.success("สร้างบริการส่งสำเร็จ")}r.push("/pos/delivery")}catch(e){console.error(e),c.ZP.error(e.message||(V?"ไม่สามารถอัปเดตบริการส่งได้":"ไม่สามารถสร้างบริการส่งได้"))}finally{v(!1)}},G=()=>r.push("/pos/delivery");return W?s.jsx(k.H,{message:"กำลังตรวจสอบสิทธิ์..."}):M?(0,s.jsxs)("div",{className:"manage-page",style:w.R.container,children:[s.jsx(q,{}),s.jsx(b.Z,{title:V?"แก้ไขบริการส่ง":"เพิ่มบริการส่ง",subtitle:V?"แก้ไขข้อมูลบริการส่ง":"สร้างบริการส่งใหม่",onBack:G,actions:V?s.jsx(l.ZP,{danger:!0,onClick:()=>{L&&p.Z.confirm({title:"ยืนยันการลบบริการส่ง",content:`คุณต้องการลบบริการส่ง "${j}" หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:s.jsx(P.Z,{style:{color:"#EF4444"}}),maskClosable:!0,onOk:async()=>{try{let e=await fetch(`/api/pos/delivery/delete/${L}`,{method:"DELETE",headers:{"X-CSRF-Token":R}});if(!e.ok){let r=await e.json().catch(()=>({}));throw Error(r.error||r.message||"ไม่สามารถลบบริการส่งได้")}c.ZP.success("ลบบริการส่งสำเร็จ"),r.push("/pos/delivery")}catch(e){console.error(e),c.ZP.error("ไม่สามารถลบบริการส่งได้")}}})},icon:s.jsx(P.Z,{}),children:"ลบ"}):null}),s.jsx(m.Z,{maxWidth:1e3,children:s.jsx(y.Z,{style:{background:"transparent",border:"none"},children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx("div",{className:"md:col-span-2",children:s.jsx("div",{style:{background:"white",borderRadius:24,padding:32,boxShadow:"0 4px 24px rgba(0,0,0,0.04)"},children:i?s.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"60px 0"},children:s.jsx(x.Z,{size:"large"})}):(0,s.jsxs)(d.Z,{form:t,layout:"vertical",onFinish:N,requiredMark:!1,autoComplete:"off",initialValues:{is_active:!0},onValuesChange:e=>{void 0!==e.delivery_name&&f(e.delivery_name),void 0!==e.logo&&B(e.logo)},children:[(0,s.jsxs)("div",{style:{marginBottom:24},children:[s.jsx(Z,{strong:!0,style:{fontSize:18,color:"#1E293B",display:"block",marginBottom:16},children:"ข้อมูลทั่วไป"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[s.jsx(d.Z.Item,{name:"delivery_name",label:"ชื่อบริการส่ง *",rules:[{required:!0,message:"กรุณากรอกชื่อบริการส่ง"},{max:100,message:"ความยาวต้องไม่เกิน 100 ตัวอักษร"}],children:s.jsx(u.default,{size:"large",placeholder:"เช่น Grab, Lineman, Shopee Food",maxLength:100})}),s.jsx(d.Z.Item,{name:"delivery_prefix",label:"รหัสย่อ (Prefix)",rules:[{max:10,message:"ความยาวต้องไม่เกิน 10 ตัวอักษร"}],normalize:e=>(e||"").toUpperCase(),extra:"ใช้สำหรับสร้างรหัสออเดอร์ (เช่น GF-123)",children:s.jsx(u.default,{size:"large",placeholder:"เช่น GR, LM",maxLength:10,style:{textTransform:"uppercase",letterSpacing:"1px"}})})]})]}),(0,s.jsxs)("div",{style:{marginBottom:24,borderTop:"1px solid #F1F5F9",paddingTop:24},children:[s.jsx(Z,{strong:!0,style:{fontSize:18,color:"#1E293B",display:"block",marginBottom:16},children:"การแสดงผล"}),s.jsx(d.Z.Item,{name:"logo",label:"รูป (URL)",rules:[{validator:async(e,r)=>{if(r&&!r.startsWith("data:image"))try{new URL(r);return}catch{throw Error("กรุณากรอก URL ที่ถูกต้อง")}}}],children:s.jsx(u.default,{size:"large",placeholder:"https://example.com/logo.png",allowClear:!0})}),C&&(0,s.jsxs)("div",{style:{marginTop:-16,marginBottom:24,padding:16,background:"#F8FAFC",borderRadius:12,border:"1px dashed #E2E8F0"},children:[s.jsx(Z,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:12},children:"ตัวอย่างรูป"}),s.jsx("div",{style:{width:80,height:80,borderRadius:12,overflow:"hidden",background:"white",border:"1px solid #E2E8F0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:s.jsx(F.default,{src:C,alt:"Logo Preview",fill:!0,sizes:"80px",style:{objectFit:"contain",padding:8},onError:e=>{e.target.style.display="none"}})})]}),s.jsx(d.Z.Item,{name:"is_active",label:"สถานะการใช้งาน",valuePropName:"checked",style:{marginBottom:0},children:s.jsx(g.Z,{checkedChildren:"เปิดใช้งาน",unCheckedChildren:"ปิดใช้งาน",style:{background:t.getFieldValue("is_active")?"#10B981":void 0}})})]}),s.jsx(z,{isEdit:V,loading:n,onCancel:G})]})})}),s.jsx("div",{className:"md:col-span-1 hidden md:block",children:s.jsx("div",{style:{position:"sticky",top:24},children:s.jsx(S,{name:j,logo:C})})})]})})})]}):s.jsx(k.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้",tone:"danger"})}},86230:(e,r,t)=>{"use strict";t.d(r,{R:()=>i,W:()=>o});var s=t(44528);let i={...(0,s.yf)("linear-gradient(135deg, #06B6D4 0%, #0891B2 100%)"),deliveryCard:s.YO,deliveryCardInner:s.lv},o=(0,s.IU)(".delivery-page",".delivery-card")},90796:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\pos\delivery\manager\[...mode]\page.tsx#default`)}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[9276,4421,8571,8842,9244,8963,1399,4658,3849],()=>t(2974));module.exports=s})();