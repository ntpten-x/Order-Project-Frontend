(()=>{var e={};e.id=4777,e.ids=[4777],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},40208:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.Z,__next_app__:()=>p,originalPathname:()=>c,pages:()=>l,routeModule:()=>x,tree:()=>d}),r(71971),r(52987),r(58522),r(61804),r(7629),r(11930),r(12523);var i=r(23191),a=r(88716),s=r(43315),n=r(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let d=["",{children:["(main)",{children:["stock",{children:["items",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,71971)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\stock\\items\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,52987)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\stock\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],l=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\stock\\items\\page.tsx"],c="/(main)/stock/items/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/stock/items/page",pathname:"/stock/items",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},78180:(e,t,r)=>{Promise.resolve().then(r.bind(r,74913))},6236:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(17577);let a={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};var s=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let o=i.forwardRef((e,t)=>i.createElement(s.Z,n({},e,{ref:t,icon:a})))},30278:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var s=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let o=i.forwardRef((e,t)=>i.createElement(s.Z,n({},e,{ref:t,icon:a})))},74913:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ed});var i=r(10326),a=r(17577),s=r(58184),n=r(46752),o=r(75958),d=r(64635),l=r(71209),c=r(6400),p=r(61357),x=r(71935),g=r(97930),f=r(4139),b=r(38106),u=r(56249),h=r(81135),m=r(11401),y=r(13483),j=r(75698),v=r(6236),k=r(20331);let w={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};var Z=r(74082);function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let P=a.forwardRef((e,t)=>a.createElement(Z.Z,z({},e,{ref:t,icon:w})));var _=r(22817),S=r(63348),C=r(29116),E=r(61758),R=r(46024),q=r(80490),I=r(24949),O=r(31916),N=r(91259);let D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let F=a.forwardRef((e,t)=>a.createElement(Z.Z,T({},e,{ref:t,icon:D})));var L=r(9297),M=r(72380),W=r(24395),A=r(49965),B=r(30278);r(12529),r(40577);var H=r(49713),G=r(80440);r(81456);let{Text:V,Title:U}=s.default,$=({item:e,index:t,onUpdateQuantity:r,onRemove:a})=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:14,padding:14,background:"#fafafa",borderRadius:14,marginBottom:10,border:"1px solid #f0f0f0",transition:"all 0.3s ease",animation:`slideIn 0.3s ease ${.05*t}s both`},className:"editable-item-card",children:[i.jsx(m.Z,{count:t+1,color:"#667eea",size:"small",children:i.jsx(l.Z,{src:e.img_url||"https://placehold.co/56x56/f5f5f5/999999?text=\uD83D\uDCE6",shape:"square",size:56,style:{borderRadius:12,border:"2px solid #fff",boxShadow:"0 4px 12px rgba(0,0,0,0.08)",objectFit:"cover"}})}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[i.jsx(V,{strong:!0,style:{fontSize:14,display:"block",marginBottom:2,color:"#1a1a2e"},ellipsis:{tooltip:e.display_name},children:e.display_name}),(0,i.jsxs)(V,{type:"secondary",style:{fontSize:12},children:["หน่วย: ",e.unit_name]})]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[i.jsx(O.Z,{min:1,value:e.quantity_ordered,onChange:t=>r(e.ingredient_id,t),style:{width:80,borderRadius:10},size:"middle"}),i.jsx(c.Z,{title:"ลบรายการ",children:i.jsx(x.ZP,{danger:!0,type:"text",icon:i.jsx(F,{style:{fontSize:18}}),onClick:()=>a(e.ingredient_id),style:{width:36,height:36,borderRadius:10,display:"flex",alignItems:"center",justifyContent:"center"}})})]})]});function X({order:e,open:t,onClose:r,onSuccess:s}){let[d,l]=(0,a.useState)(!1),[c,p]=(0,a.useState)([]),[g,f]=(0,a.useState)([]),[b,u]=(0,a.useState)(null),{socket:h}=(0,G.s)(),m=e=>{f(g.filter(t=>t.ingredient_id!==e))},y=(e,t)=>{null!==t&&f(g.map(r=>r.ingredient_id===e?{...r,quantity_ordered:t}:r))},[v,k]=(0,a.useState)(""),w=async()=>{if(e){if(0===g.length){n.ZP.error("ออเดอร์ต้องมีสินค้าอย่างน้อย 1 ชิ้น");return}l(!0);try{let t=g.map(e=>({ingredient_id:e.ingredient_id,quantity_ordered:e.quantity_ordered}));await H.x.updateOrder(e.id,t,void 0,v),n.ZP.success("แก้ไขออเดอร์สำเร็จ"),s(),r()}catch(t){let e="แก้ไขออเดอร์ล้มเหลว";t instanceof Error&&(e=t.message),n.ZP.error(e)}finally{l(!1)}}},Z=c.filter(e=>!g.some(t=>t.ingredient_id===e.id));return(0,i.jsxs)(o.Z,{open:t,onCancel:r,footer:null,width:560,centered:!0,className:"edit-order-modal",style:{top:20},styles:{body:{padding:0},mask:{backdropFilter:"blur(8px)",background:"rgba(0, 0, 0, 0.45)"}},closeIcon:null,children:[(0,i.jsxs)("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",padding:"24px 24px 20px",position:"relative",overflow:"hidden"},children:[i.jsx("div",{style:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"rgba(255,255,255,0.1)"}}),i.jsx("div",{style:{position:"absolute",bottom:-30,left:-30,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.08)"}}),(0,i.jsxs)("div",{style:{position:"relative",zIndex:1},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[i.jsx("div",{style:{width:48,height:48,borderRadius:14,background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)"},children:i.jsx(R.Z,{style:{fontSize:24,color:"white"}})}),(0,i.jsxs)("div",{children:[i.jsx(V,{style:{color:"rgba(255,255,255,0.8)",fontSize:13,display:"block"},children:"แก้ไขออเดอร์"}),(0,i.jsxs)(U,{level:4,style:{color:"white",margin:0,fontWeight:700,letterSpacing:"0.5px"},children:["#",e?.id.substring(0,8).toUpperCase()]})]})]}),i.jsx("div",{style:{marginTop:16,display:"flex",alignItems:"center",gap:8},children:(0,i.jsxs)("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:20,padding:"6px 14px",display:"flex",alignItems:"center",gap:6,backdropFilter:"blur(4px)"},children:[i.jsx(L.Z,{style:{color:"white",fontSize:14}}),(0,i.jsxs)(V,{style:{color:"white",fontWeight:600,fontSize:13},children:[g.length," รายการ"]})]})})]})]}),(0,i.jsxs)("div",{style:{padding:"20px 24px 24px"},children:[(0,i.jsxs)("div",{style:{background:"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)",borderRadius:16,padding:16,marginBottom:20},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[i.jsx(M.Z,{style:{fontSize:16,color:"#d4380d"}}),i.jsx(V,{strong:!0,style:{fontSize:14,color:"#d4380d"},children:"เพิ่มสินค้าใหม่"})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:10},children:[i.jsx(N.default,{style:{flex:1},placeholder:"ค้นหาและเลือกสินค้า...",showSearch:!0,allowClear:!0,value:b,onChange:u,suffixIcon:i.jsx(W.Z,{style:{color:"#d4380d"}}),filterOption:(e,t)=>(t?.searchText??"").toLowerCase().includes(e.toLowerCase()),notFoundContent:i.jsx(j.Z,{image:j.Z.PRESENTED_IMAGE_SIMPLE,description:"ไม่พบสินค้า",style:{padding:"12px 0"}}),options:Z.map(e=>({value:e.id,searchText:e.display_name,label:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"4px 0"},children:[i.jsx("img",{src:e.img_url||"https://placehold.co/36x36?text=\uD83D\uDCE6",alt:e.display_name,style:{width:36,height:36,objectFit:"cover",borderRadius:8,border:"1px solid #f0f0f0"}}),(0,i.jsxs)("div",{children:[i.jsx("div",{style:{fontWeight:500,fontSize:13},children:e.display_name}),i.jsx("div",{style:{fontSize:11,color:"#8c8c8c"},children:e.unit?.display_name||"-"})]})]})})),styles:{popup:{root:{borderRadius:12}}}}),i.jsx(x.ZP,{type:"primary",icon:i.jsx(M.Z,{}),onClick:()=>{if(!b)return;let e=c.find(e=>e.id===b);if(e){if(g.find(e=>e.ingredient_id===b)){n.ZP.warning("สินค้านี้มีอยู่ในรายการแล้ว");return}f([...g,{ingredient_id:e.id,quantity_ordered:1,display_name:e.display_name,unit_name:e.unit?.display_name||"-",img_url:e.img_url}]),u(null)}},disabled:!b,style:{height:40,borderRadius:10,background:b?"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)":void 0,border:"none",fontWeight:600,boxShadow:b?"0 4px 12px rgba(245, 87, 108, 0.35)":void 0},children:"เพิ่ม"})]})]}),(0,i.jsxs)("div",{style:{marginBottom:20},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:14},children:[i.jsx(L.Z,{style:{fontSize:16,color:"#667eea"}}),i.jsx(V,{strong:!0,style:{fontSize:15,color:"#1a1a2e"},children:"รายการสินค้าในออเดอร์"})]}),i.jsx("div",{style:{maxHeight:280,overflowY:"auto",paddingRight:4,scrollbarWidth:"thin",scrollbarColor:"#d9d9d9 transparent"},children:g.length>0?g.map((e,t)=>i.jsx($,{item:e,index:t,onUpdateQuantity:y,onRemove:m},e.ingredient_id)):i.jsx(j.Z,{description:(0,i.jsxs)("div",{children:[i.jsx(V,{type:"secondary",children:"ยังไม่มีสินค้าในออเดอร์"}),i.jsx("br",{}),i.jsx(V,{type:"secondary",style:{fontSize:12},children:"เพิ่มสินค้าจากด้านบน"})]}),image:j.Z.PRESENTED_IMAGE_SIMPLE,style:{padding:"40px 0",background:"#fafafa",borderRadius:16}})})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:12},children:[i.jsx(x.ZP,{block:!0,size:"large",onClick:r,icon:i.jsx(A.Z,{}),style:{height:48,borderRadius:12,fontWeight:600},children:"ยกเลิก"}),i.jsx(x.ZP,{type:"primary",block:!0,size:"large",onClick:w,loading:d,icon:i.jsx(B.Z,{}),disabled:0===g.length,style:{height:48,borderRadius:12,fontWeight:600,background:g.length>0?"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)":void 0,border:"none",boxShadow:g.length>0?"0 4px 16px rgba(245, 87, 108, 0.35)":void 0},children:"บันทึกการแก้ไข"})]})]}),i.jsx("style",{children:`
                .edit-order-modal .ant-modal-content {
                    border-radius: 24px !important;
                    overflow: hidden;
                    padding: 0 !important;
                }
                
                @keyframes slideIn {
                    from {
                        opacity: 0;
                        transform: translateY(10px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                .editable-item-card:hover {
                    background: #fff0f6 !important;
                    border-color: #ffadd2 !important;
                    transform: translateX(4px);
                }
                
                .edit-order-modal .ant-select-selector {
                    border-radius: 10px !important;
                    height: 40px !important;
                }
                
                .edit-order-modal .ant-select-selection-placeholder,
                .edit-order-modal .ant-select-selection-item {
                    line-height: 38px !important;
                }
                
                .edit-order-modal .ant-input-number {
                    border-radius: 10px !important;
                }
                
                .edit-order-modal .ant-input-number-handler-wrap {
                    border-radius: 0 10px 10px 0 !important;
                }
                
                /* Custom scrollbar */
                *::-webkit-scrollbar {
                    width: 6px;
                }
                *::-webkit-scrollbar-track {
                    background: transparent;
                }
                *::-webkit-scrollbar-thumb {
                    background: #d9d9d9;
                    border-radius: 3px;
                }
                *::-webkit-scrollbar-thumb:hover {
                    background: #bfbfbf;
                }
            `})]})}var Y=r(25151),J=r(35047),K=r(94001),Q=r(77626),ee=r.n(Q);function et(){return i.jsx(ee(),{id:"8c68ddb7935f151e",children:".items-table .ant-table{background:transparent!important;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px;overflow:hidden}.items-table .ant-table-thead>tr>th{background:-webkit-linear-gradient(315deg,#667eea 0%,#764ba2 100%)!important;background:-moz-linear-gradient(315deg,#667eea 0%,#764ba2 100%)!important;background:-o-linear-gradient(315deg,#667eea 0%,#764ba2 100%)!important;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)!important;color:#fff!important;font-weight:600;font-size:14px;padding:16px 12px;border:none!important}.items-table .ant-table-thead>tr>th::before{display:none!important}.items-table .ant-table-tbody>tr>td{padding:16px 12px;vertical-align:middle;border-bottom:1px solid rgba(0,0,0,.04);-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.items-table .ant-table-tbody>tr:hover>td{background:rgba(102,126,234,.04)!important}.items-table .ant-table-tbody>tr:last-child>td{border-bottom:none}.status-card{background:-webkit-linear-gradient(315deg,#fff 0%,#f8f9fe 100%);background:-moz-linear-gradient(315deg,#fff 0%,#f8f9fe 100%);background:-o-linear-gradient(315deg,#fff 0%,#f8f9fe 100%);background:linear-gradient(135deg,#fff 0%,#f8f9fe 100%);-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px;border:1px solid rgba(102,126,234,.12);-webkit-box-shadow:0 4px 20px rgba(102,126,234,.08);-moz-box-shadow:0 4px 20px rgba(102,126,234,.08);box-shadow:0 4px 20px rgba(102,126,234,.08);-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease}.status-card:hover{-webkit-box-shadow:0 8px 32px rgba(102,126,234,.15);-moz-box-shadow:0 8px 32px rgba(102,126,234,.15);box-shadow:0 8px 32px rgba(102,126,234,.15);-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px)}.empty-state-card{background:-webkit-linear-gradient(top,#f8f9fe 0%,#fff 100%);background:-moz-linear-gradient(top,#f8f9fe 0%,#fff 100%);background:-o-linear-gradient(top,#f8f9fe 0%,#fff 100%);background:linear-gradient(180deg,#f8f9fe 0%,#fff 100%);-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;border:2px dashed rgba(102,126,234,.2)}.action-btn{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;font-weight:500;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease}.action-btn:hover{-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px);-webkit-box-shadow:0 4px 12px rgba(0,0,0,.1);-moz-box-shadow:0 4px 12px rgba(0,0,0,.1);box-shadow:0 4px 12px rgba(0,0,0,.1)}.order-item-badge{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:-webkit-linear-gradient(315deg,#f0f5ff 0%,#e8f0ff 100%);background:-moz-linear-gradient(315deg,#f0f5ff 0%,#e8f0ff 100%);background:-o-linear-gradient(315deg,#f0f5ff 0%,#e8f0ff 100%);background:linear-gradient(135deg,#f0f5ff 0%,#e8f0ff 100%);padding:6px 12px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;margin:3px 4px 3px 0;border:1px solid rgba(102,126,234,.15);font-size:13px;-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.order-item-badge:hover{background:-webkit-linear-gradient(315deg,#e8f0ff 0%,#d9e4ff 100%);background:-moz-linear-gradient(315deg,#e8f0ff 0%,#d9e4ff 100%);background:-o-linear-gradient(315deg,#e8f0ff 0%,#d9e4ff 100%);background:linear-gradient(135deg,#e8f0ff 0%,#d9e4ff 100%);border-color:rgba(102,126,234,.3)}@media screen and (max-width:768px){.items-table .ant-table-thead>tr>th{font-size:12px;padding:12px 8px}.items-table .ant-table-tbody>tr>td{font-size:13px;padding:12px 8px}.order-item-badge{font-size:12px;padding:4px 10px}}.items-table .ant-pagination{padding:16px 24px}.items-table .ant-pagination-item-active{background:-webkit-linear-gradient(315deg,#667eea 0%,#764ba2 100%);background:-moz-linear-gradient(315deg,#667eea 0%,#764ba2 100%);background:-o-linear-gradient(315deg,#667eea 0%,#764ba2 100%);background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-color:transparent}.items-table .ant-pagination-item-active a{color:#fff}"})}var er=r(26963),ei=r(76892),ea=r(18978),es=r(52647),en=r(36231);let{Text:eo}=s.default;function ed(){let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(!0),{socket:w}=(0,G.s)(),Z=(0,J.useRouter)(),{user:z}=(0,K.a)(),O=(0,a.useCallback)(async()=>{try{s(!0);let e=await fetch("/api/stock/orders?status=pending",{cache:"no-store",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch orders");let r=await e.json();t(Array.isArray(r)?r:r.data||[])}catch{console.error("Failed to fetch orders"),n.ZP.error("ไม่สามารถโหลดรายการออเดอร์ได้")}finally{s(!1)}},[]),[N,D]=(0,a.useState)(null),[T,F]=(0,a.useState)(null),[L,M]=(0,a.useState)(""),W=e=>{o.Z.confirm({title:(0,i.jsxs)(d.Z,{children:[i.jsx(v.Z,{style:{color:"#ff4d4f"}}),i.jsx("span",{children:"ยืนยันการยกเลิกออเดอร์"})]}),content:(0,i.jsxs)("div",{style:{marginTop:16},children:[i.jsx(eo,{children:"คุณต้องการยกเลิกออเดอร์นี้หรือไม่?"}),i.jsx("div",{style:{marginTop:12,padding:12,background:"rgba(255, 77, 79, 0.05)",borderRadius:8,border:"1px solid rgba(255, 77, 79, 0.1)"},children:(0,i.jsxs)(eo,{type:"secondary",style:{fontSize:13},children:["ผู้สั่ง: ",i.jsx("strong",{children:e.ordered_by?.name||e.ordered_by?.username})]})})]}),okText:"ยืนยันยกเลิก",cancelText:"ไม่ยกเลิก",okButtonProps:{danger:!0},centered:!0,onOk:async()=>{try{if(!(await fetch(`/api/stock/orders/${e.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":L},body:JSON.stringify({status:I.i.CANCELLED})})).ok)throw Error("Failed to cancel order");n.ZP.success("ยกเลิกออเดอร์สำเร็จ")}catch{n.ZP.error("ยกเลิกออเดอร์ล้มเหลว")}}})},A=e.reduce((e,t)=>e+(t.ordersItems?.length||0),0),B=[{title:(0,i.jsxs)(d.Z,{children:[i.jsx(k.Z,{}),i.jsx("span",{children:"ผู้สั่ง"})]}),dataIndex:"ordered_by",key:"ordered_by",width:140,render:e=>{let t=e?.name||e?.username||"Unknown";return(0,i.jsxs)(d.Z,{children:[i.jsx("div",{style:{width:32,height:32,borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:600,fontSize:14},children:t.charAt(0)?.toUpperCase()||"?"}),i.jsx(eo,{strong:!0,style:{fontSize:14},children:t})]})}},{title:(0,i.jsxs)(d.Z,{children:[i.jsx(P,{}),i.jsx("span",{children:"รายการสินค้า"})]}),dataIndex:"ordersItems",key:"items",render:e=>(0,i.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:[(e||[]).slice(0,3).map(e=>(0,i.jsxs)("span",{className:"order-item-badge",children:[i.jsx(l.Z,{src:e.ingredient?.img_url||"https://placehold.co/32x32/f5f5f5/999999?text=\uD83D\uDCE6",size:24,shape:"square",style:{borderRadius:6,marginRight:8}}),i.jsx(eo,{strong:!0,style:{color:"#5b6af8",fontSize:13},children:e.ingredient?.display_name}),(0,i.jsxs)(eo,{style:{color:"#8c8c8c",marginLeft:6,fontSize:12},children:["\xd7",e.quantity_ordered," ",e.ingredient?.unit?.display_name]})]},e.id)),e&&e.length>3&&i.jsx(c.Z,{title:e.slice(3).map(e=>e.ingredient?.display_name).join(", "),children:(0,i.jsxs)(p.Z,{color:"purple",style:{borderRadius:20,cursor:"pointer"},children:["+",e.length-3," รายการ"]})})]})},{title:"สถานะ",dataIndex:"status",key:"status",width:110,render:e=>{let t={color:"default",icon:i.jsx(_.Z,{}),text:e};return e===I.i.PENDING&&(t={color:"warning",icon:i.jsx(_.Z,{}),text:"รอดำเนินการ"}),e===I.i.COMPLETED&&(t={color:"success",icon:i.jsx(P,{}),text:"เสร็จสิ้น"}),e===I.i.CANCELLED&&(t={color:"error",icon:i.jsx(v.Z,{}),text:"ยกเลิก"}),i.jsx(p.Z,{color:t.color,icon:t.icon,style:{borderRadius:20,padding:"4px 12px",fontWeight:500,fontSize:13},children:t.text})}},{title:(0,i.jsxs)(d.Z,{children:[i.jsx(S.Z,{}),i.jsx("span",{children:"วันที่สั่ง"})]}),dataIndex:"create_date",key:"create_date",width:150,render:e=>(0,i.jsxs)(eo,{type:"secondary",style:{fontSize:13},children:[new Date(e).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric"}),i.jsx("br",{}),i.jsx(eo,{style:{fontSize:12,color:"#bfbfbf"},children:new Date(e).toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})})]})},{title:"การจัดการ",key:"actions",width:280,render:(e,t)=>(0,i.jsxs)(d.Z,{size:8,wrap:!0,children:[i.jsx(c.Z,{title:"ดูรายละเอียด",children:i.jsx(x.ZP,{className:"action-btn",size:"middle",icon:i.jsx(C.Z,{}),onClick:()=>F(t),style:{borderColor:"#667eea",color:"#667eea"},children:"ดู"})}),(z?.role==="Admin"||z?.role==="Manager")&&i.jsx(c.Z,{title:"ดำเนินการสั่งซื้อ",children:i.jsx(x.ZP,{className:"action-btn",type:"primary",size:"middle",icon:i.jsx(E.Z,{}),disabled:t.status!==I.i.PENDING,onClick:()=>Z.push(`/stock/buying?orderId=${t.id}`),style:{background:"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)",borderColor:"transparent",boxShadow:"0 2px 8px rgba(82, 196, 26, 0.3)"},children:"สั่งซื้อ"})}),i.jsx(c.Z,{title:"แก้ไขออเดอร์",children:i.jsx(x.ZP,{className:"action-btn",type:"primary",ghost:!0,size:"middle",icon:i.jsx(R.Z,{}),disabled:t.status!==I.i.PENDING,onClick:()=>D(t),children:"แก้ไข"})}),i.jsx(c.Z,{title:"ยกเลิกออเดอร์",children:i.jsx(x.ZP,{className:"action-btn",danger:!0,size:"middle",icon:i.jsx(v.Z,{}),disabled:t.status!==I.i.PENDING,onClick:()=>W(t),children:"ยกเลิก"})})]})}];return(0,i.jsxs)("div",{style:{padding:"24px",paddingBottom:120,minHeight:"100vh",background:"linear-gradient(180deg, #f8f9fc 0%, #f0f2f5 100%)"},children:[(0,i.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto"},children:[i.jsx(es.Z,{title:"รายการรอสั่งซื้อ",subtitle:`${e.length} รายการ`,icon:i.jsx(_.Z,{}),actions:i.jsx(x.ZP,{icon:i.jsx(q.Z,{}),onClick:O,loading:r,children:"รีเฟรช"})}),i.jsx(er.Z,{children:(0,i.jsxs)(ea.Z,{children:[i.jsx(ei.Z,{title:"สรุป",children:(0,i.jsxs)(f.Z,{gutter:[16,16],children:[i.jsx(b.Z,{xs:12,sm:8,md:6,children:i.jsx(u.Z,{className:"status-card",size:"small",styles:{body:{padding:16}},children:i.jsx(h.Z,{title:i.jsx(eo,{type:"secondary",style:{fontSize:13},children:"ออเดอร์ทั้งหมด"}),value:r?"-":e.length,prefix:i.jsx(m.Z,{status:"processing"}),styles:{content:{color:"#667eea",fontWeight:700,fontSize:28}}})})}),i.jsx(b.Z,{xs:12,sm:8,md:6,children:i.jsx(u.Z,{className:"status-card",size:"small",styles:{body:{padding:16}},children:i.jsx(h.Z,{title:i.jsx(eo,{type:"secondary",style:{fontSize:13},children:"รายการสินค้า"}),value:r?"-":A,prefix:i.jsx(m.Z,{status:"success"}),styles:{content:{color:"#52c41a",fontWeight:700,fontSize:28}}})})})]})}),i.jsx(ei.Z,{title:"รายการรอสั่งซื้อ",children:i.jsx(u.Z,{variant:"borderless",style:{borderRadius:20,boxShadow:"0 4px 24px rgba(0, 0, 0, 0.06)",overflow:"hidden"},styles:{body:{padding:0}},children:r?i.jsx(()=>i.jsx("div",{children:[1,2,3].map(e=>(0,i.jsxs)("div",{style:{padding:16,borderBottom:"1px solid rgba(0,0,0,0.04)",display:"flex",alignItems:"center",gap:16},children:[i.jsx(g.Z.Avatar,{active:!0,size:40}),i.jsx(g.Z,{active:!0,paragraph:{rows:1,width:["80%"]},title:!1})]},e))}),{}):0===e.length?i.jsx(en.Z,{title:"ยังไม่มีรายการรอสั่งซื้อ",description:"ยังไม่มีออเดอร์ที่รอการสั่งซื้อในขณะนี้",action:i.jsx(x.ZP,{type:"primary",icon:i.jsx(E.Z,{}),size:"large",onClick:()=>Z.push("/"),style:{borderRadius:10,height:48,paddingInline:32,fontWeight:600},children:"เลือกวัตถุดิบเพื่อสั่งซื้อ"})}):i.jsx(y.Z,{dataSource:e,columns:B,rowKey:"id",scroll:{x:900},pagination:{pageSize:10,showSizeChanger:!0,showTotal:(e,t)=>(0,i.jsxs)(eo,{type:"secondary",children:["แสดง ",t[0],"-",t[1]," จาก ",e," รายการ"]})},className:"items-table",locale:{emptyText:i.jsx(j.Z,{description:"ไม่มีข้อมูล"})}})})})]})})]}),i.jsx(X,{open:!!N,order:N,onClose:()=>D(null),onSuccess:O}),i.jsx(Y.Z,{open:!!T,order:T,onClose:()=>F(null)}),i.jsx(et,{})]})}},18978:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(10326);r(17577);var a=r(21020),s=r(52386);function n({children:e,gap:t=s.H.sectionGap,style:r}){return i.jsx(a.Z,{vertical:!0,gap:t,style:r,children:e})}},71971:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\stock\items\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[9276,8491,8571,8963,1399,1323,5595],()=>r(40208));module.exports=i})();