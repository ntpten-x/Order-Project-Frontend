(()=>{var t={};t.id=4062,t.ids=[4062],t.modules={72934:t=>{"use strict";t.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:t=>{"use strict";t.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:t=>{"use strict";t.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:t=>{"use strict";t.exports=require("assert")},78893:t=>{"use strict";t.exports=require("buffer")},61282:t=>{"use strict";t.exports=require("child_process")},84770:t=>{"use strict";t.exports=require("crypto")},17702:t=>{"use strict";t.exports=require("events")},92048:t=>{"use strict";t.exports=require("fs")},32615:t=>{"use strict";t.exports=require("http")},32694:t=>{"use strict";t.exports=require("http2")},35240:t=>{"use strict";t.exports=require("https")},98216:t=>{"use strict";t.exports=require("net")},19801:t=>{"use strict";t.exports=require("os")},55315:t=>{"use strict";t.exports=require("path")},76162:t=>{"use strict";t.exports=require("stream")},82452:t=>{"use strict";t.exports=require("tls")},74175:t=>{"use strict";t.exports=require("tty")},17360:t=>{"use strict";t.exports=require("url")},21764:t=>{"use strict";t.exports=require("util")},71568:t=>{"use strict";t.exports=require("zlib")},76119:(t,e,r)=>{"use strict";r.r(e),r.d(e,{GlobalError:()=>n.Z,__next_app__:()=>u,originalPathname:()=>d,pages:()=>l,routeModule:()=>h,tree:()=>c}),r(29440),r(52987),r(58522),r(61804),r(7629),r(11930),r(12523);var i=r(23191),s=r(88716),n=r(43315),a=r(95231),o={};for(let t in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(t)&&(o[t]=()=>a[t]);r.d(e,o);let c=["",{children:["(main)",{children:["stock",{children:["ingredientsUnit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,29440)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\stock\\ingredientsUnit\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,52987)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\stock\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],l=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\stock\\ingredientsUnit\\page.tsx"],d="/(main)/stock/ingredientsUnit/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/stock/ingredientsUnit/page",pathname:"/stock/ingredientsUnit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},25521:(t,e,r)=>{Promise.resolve().then(r.bind(r,7061))},2643:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var i=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var n=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}let o=i.forwardRef((t,e)=>i.createElement(n.Z,a({},t,{ref:e,icon:s})))},12129:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var i=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 472a40 40 0 1080 0 40 40 0 10-80 0zm367 352.9L696.3 352V178H768v-68H256v68h71.7v174L145 824.9c-2.8 7.4-4.3 15.2-4.3 23.1 0 35.3 28.7 64 64 64h614.6c7.9 0 15.7-1.5 23.1-4.3 33-12.7 49.4-49.8 36.6-82.8zM395.7 364.7V180h232.6v184.7L719.2 600c-20.7-5.3-42.1-8-63.9-8-61.2 0-119.2 21.5-165.3 60a188.78 188.78 0 01-121.3 43.9c-32.7 0-64.1-8.3-91.8-23.7l118.8-307.5zM210.5 844l41.7-107.8c35.7 18.1 75.4 27.8 116.6 27.8 61.2 0 119.2-21.5 165.3-60 33.9-28.2 76.3-43.9 121.3-43.9 35 0 68.4 9.5 97.6 27.1L813.5 844h-603z"}}]},name:"experiment",theme:"outlined"};var n=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}let o=i.forwardRef((t,e)=>i.createElement(n.Z,a({},t,{ref:e,icon:s})))},7061:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>D});var i=r(10326),s=r(17577),n=r(66874),a=r(46752),o=r(75958),c=r(92121),l=r(64635),d=r(71935),u=r(12129),h=r(80490),p=r(72380),x=r(44976),g=r(20108),f=r(10119),m=r(35047),y=r(37938),b=r(80440);r(83179);var j=r(94001),v=r(61357),P=r(56811),k=r(54695),w=r(46024),O=r(63191);let{Text:Z,Title:U}=n.default,C={container:{paddingBottom:100,backgroundColor:"#f8f9fc",minHeight:"100vh"},statsCard:{margin:"-40px 16px 0 16px",padding:"16px",background:"white",borderRadius:20,boxShadow:"0 8px 24px rgba(0,0,0,0.08)",display:"flex",justifyContent:"space-around",position:"relative",zIndex:10},statItem:{textAlign:"center",flex:1},statNumber:{fontSize:24,fontWeight:700,display:"block"},statLabel:{fontSize:12,color:"#8c8c8c",marginTop:2},listContainer:{padding:"20px 16px 0 16px"},unitCard:t=>({marginBottom:12,borderRadius:20,border:"none",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",overflow:"hidden",transition:"all 0.3s ease",background:t?"white":"linear-gradient(to right, #fafafa, white)",opacity:t?1:.7}),unitCardInner:{padding:16,display:"flex",alignItems:"center",gap:14}},q=()=>i.jsx("style",{children:`
        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(12px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .unit-card {
            animation: fadeSlideIn 0.4s ease both;
        }
        
        .unit-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.1) !important;
        }
        
        .unit-card:active {
            transform: scale(0.98);
        }
        
        /* Custom scrollbar */
        .ingredients-unit-page *::-webkit-scrollbar {
            width: 6px;
        }
        .ingredients-unit-page *::-webkit-scrollbar-track {
            background: transparent;
        }
        .ingredients-unit-page *::-webkit-scrollbar-thumb {
            background: #d9d9d9;
            border-radius: 3px;
        }
        .ingredients-unit-page *::-webkit-scrollbar-thumb:hover {
            background: #bfbfbf;
        }
    `}),E=({totalUnits:t,activeUnits:e,inactiveUnits:r})=>(0,i.jsxs)("div",{style:C.statsCard,children:[(0,i.jsxs)("div",{style:C.statItem,children:[i.jsx("span",{style:{...C.statNumber,color:"#722ed1"},children:t}),i.jsx(Z,{style:C.statLabel,children:"ทั้งหมด"})]}),i.jsx("div",{style:{width:1,background:"#f0f0f0"}}),(0,i.jsxs)("div",{style:C.statItem,children:[i.jsx("span",{style:{...C.statNumber,color:"#52c41a"},children:e}),i.jsx(Z,{style:C.statLabel,children:"ใช้งาน"})]}),i.jsx("div",{style:{width:1,background:"#f0f0f0"}}),(0,i.jsxs)("div",{style:C.statItem,children:[i.jsx("span",{style:{...C.statNumber,color:"#ff4d4f"},children:r}),i.jsx(Z,{style:C.statLabel,children:"ไม่ใช้งาน"})]})]}),S=({unit:t,index:e,onEdit:r,onDelete:s})=>i.jsx("div",{className:"unit-card",style:{...C.unitCard(t.is_active),animationDelay:`${.03*e}s`},children:(0,i.jsxs)("div",{style:C.unitCardInner,children:[i.jsx("div",{style:{width:52,height:52,borderRadius:14,background:"linear-gradient(135deg, #f9f0ff 0%, #efdbff 100%)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,border:"2px solid #d3adf7"},children:i.jsx(u.Z,{style:{fontSize:24,color:"#722ed1"}})}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[i.jsx(Z,{strong:!0,style:{fontSize:16,color:"#1a1a2e"},children:t.display_name}),t.is_active?i.jsx(P.Z,{style:{color:"#52c41a",fontSize:14}}):i.jsx(k.Z,{style:{color:"#ff4d4f",fontSize:14}})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:6,flexWrap:"wrap",alignItems:"center"},children:[i.jsx(v.Z,{color:"purple",style:{borderRadius:8,margin:0,fontSize:12,fontWeight:500},children:t.unit_name}),t.create_date&&(0,i.jsxs)(Z,{type:"secondary",style:{fontSize:11},children:["สร้างเมื่อ: ",new Date(t.create_date).toLocaleDateString("th-TH")]})]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[i.jsx(d.ZP,{type:"text",icon:i.jsx(w.Z,{}),onClick:e=>{e.stopPropagation(),r(t)},style:{borderRadius:10,color:"#722ed1",background:"#f9f0ff"}}),i.jsx(d.ZP,{type:"text",danger:!0,icon:i.jsx(O.Z,{}),onClick:e=>{e.stopPropagation(),s(t)},style:{borderRadius:10,background:"#fff2f0"}})]})]})});var R=r(26963),_=r(76892),M=r(18978),z=r(52647),L=r(36231),T=r(60578),I=r(81456);let{Text:F}=n.default;function D(){let t=(0,m.useRouter)(),{user:e,loading:r}=(0,j.a)(),n=(0,x.NL)(),{showLoading:v,hideLoading:P}=(0,y.x)(),{socket:k}=(0,b.s)(),[w,O]=(0,s.useState)(null),{data:Z=""}=(0,g.a)({queryKey:["csrfToken"],queryFn:()=>I.O.getCsrfToken(),staleTime:6e5}),{data:U=[],isLoading:D,isFetching:K}=(0,g.a)({queryKey:["ingredientsUnits"],queryFn:async()=>{let t=await fetch("/api/stock/ingredientsUnit/getAll",{cache:"no-store"});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||e.message||(0,T.t)("ingredientsUnit.fetch.error"))}return await t.json()},staleTime:6e4,enabled:!0===w}),A=(0,f.D)({mutationFn:async t=>{let e=Z||await I.O.getCsrfToken();if(!(await fetch(`/api/stock/ingredientsUnit/delete/${t.id}`,{method:"DELETE",headers:{"X-CSRF-Token":e||""}})).ok)throw Error((0,T.t)("ingredientsUnit.fetch.error"));return t.id},onSuccess:(t,e)=>{n.invalidateQueries({queryKey:["ingredientsUnits"]}),a.ZP.success((0,T.t)("ingredientsUnit.delete.success",{name:e.display_name}))},onError:t=>{let e=t instanceof Error?t.message:(0,T.t)("ingredientsUnit.fetch.error");a.ZP.error(e)}}),H=()=>{v(),t.push("/stock/ingredientsUnit/manage/add"),setTimeout(()=>P(),1e3)},N=e=>{v(),t.push(`/stock/ingredientsUnit/manage/edit/${e.id}`),setTimeout(()=>P(),1e3)},G=t=>{o.Z.confirm({title:(0,T.t)("ingredientsUnit.delete.title"),content:(0,T.t)("ingredientsUnit.delete.content",{name:t.display_name}),okText:(0,T.t)("ingredientsUnit.delete.ok"),okType:"danger",cancelText:(0,T.t)("ingredientsUnit.delete.cancel"),centered:!0,onOk:async()=>{await A.mutateAsync(t)}})};if(r||null===w)return(0,i.jsxs)("div",{style:{display:"flex",height:"100vh",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:16},children:[i.jsx(c.Z,{size:"large"}),i.jsx(F,{type:"secondary",children:(0,T.t)("common.checkingAuth")})]});if(!1===w)return(0,i.jsxs)("div",{style:{display:"flex",height:"100vh",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:16},children:[i.jsx(c.Z,{size:"large"}),i.jsx(F,{type:"danger",children:(0,T.t)("common.noPermissionRedirect")})]});let B=U.filter(t=>t.is_active),V=U.filter(t=>!t.is_active);return(0,i.jsxs)("div",{className:"ingredients-unit-page",style:C.container,children:[i.jsx(q,{}),i.jsx(z.Z,{title:(0,T.t)("ingredientsUnit.title"),subtitle:(0,T.t)("ingredientsUnit.subtitle",{count:U.length}),icon:i.jsx(u.Z,{}),actions:(0,i.jsxs)(l.Z,{size:8,wrap:!0,children:[i.jsx(d.ZP,{icon:i.jsx(h.Z,{}),onClick:()=>n.invalidateQueries({queryKey:["ingredientsUnits"]}),loading:K,children:(0,T.t)("ingredientsUnit.button.refresh")}),i.jsx(d.ZP,{type:"primary",icon:i.jsx(p.Z,{}),onClick:H,children:(0,T.t)("ingredientsUnit.button.add")})]})}),i.jsx(R.Z,{children:(0,i.jsxs)(M.Z,{children:[i.jsx(E,{totalUnits:U.length,activeUnits:B.length,inactiveUnits:V.length}),i.jsx(_.Z,{title:(0,T.t)("ingredientsUnit.section.list"),extra:i.jsx("span",{style:{fontWeight:600},children:U.length}),children:D?i.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"40px 0"},children:i.jsx(c.Z,{tip:(0,T.t)("ingredientsUnit.loading")})}):U.length>0?i.jsx("div",{style:C.listContainer,children:U.map((t,e)=>i.jsx(S,{unit:t,index:e,onEdit:N,onDelete:G},t.id))}):i.jsx(L.Z,{title:(0,T.t)("ingredientsUnit.empty.title"),description:(0,T.t)("ingredientsUnit.empty.desc"),action:i.jsx(d.ZP,{type:"primary",icon:i.jsx(p.Z,{}),onClick:H,children:(0,T.t)("ingredientsUnit.button.add")})})})]})})]})}},18978:(t,e,r)=>{"use strict";r.d(e,{Z:()=>a});var i=r(10326);r(17577);var s=r(21020),n=r(52386);function a({children:t,gap:e=n.H.sectionGap,style:r}){return i.jsx(s.Z,{vertical:!0,gap:e,style:r,children:t})}},36231:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});var i=r(10326);r(17577);var s=r(56249),n=r(75698),a=r(66874),o=r(52386);function c({title:t="ไม่มีข้อมูล",description:e,action:r,image:c}){return i.jsx(s.Z,{size:"small",variant:"outlined",style:{borderRadius:o.H.cardRadiusLG},bodyStyle:{padding:20},children:i.jsx(n.Z,{image:c,description:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[i.jsx(a.default.Text,{strong:!0,children:t}),e?i.jsx(a.default.Text,{type:"secondary",children:e}):null]}),children:r})})}},29440:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>i});let i=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\stock\ingredientsUnit\page.tsx#default`)},10119:(t,e,r)=>{"use strict";r.d(e,{D:()=>d});var i=r(17577),s=r(71180),n=r(12113),a=r(64351),o=r(3341),c=class extends a.l{#t;#e=void 0;#r;#i;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.VS)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(e.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#n(t)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#n()}mutate(t,e){return this.#i=e,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#s(){let t=this.#r?.state??(0,s.R)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#n(t){n.Vr.batch(()=>{if(this.#i&&this.hasListeners()){let e=this.#e.variables,r=this.#e.context,i={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#i.onSuccess?.(t.data,e,r,i)}catch(t){Promise.reject(t)}try{this.#i.onSettled?.(t.data,null,e,r,i)}catch(t){Promise.reject(t)}}else if(t?.type==="error"){try{this.#i.onError?.(t.error,e,r,i)}catch(t){Promise.reject(t)}try{this.#i.onSettled?.(void 0,t.error,e,r,i)}catch(t){Promise.reject(t)}}}this.listeners.forEach(t=>{t(this.#e)})})}},l=r(44976);function d(t,e){let r=(0,l.NL)(e),[s]=i.useState(()=>new c(r,t));i.useEffect(()=>{s.setOptions(t)},[s,t]);let a=i.useSyncExternalStore(i.useCallback(t=>s.subscribe(n.Vr.batchCalls(t)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),d=i.useCallback((t,e)=>{s.mutate(t,e).catch(o.ZT)},[s]);if(a.error&&(0,o.L3)(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:d,mutateAsync:a.mutate}}}};var e=require("../../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),i=e.X(0,[9276,4421,8571,108,8963,1399,1323],()=>r(76119));module.exports=i})();