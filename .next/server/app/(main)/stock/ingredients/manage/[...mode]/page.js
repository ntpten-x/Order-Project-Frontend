(()=>{var e={};e.id=8938,e.ids=[8938],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},89513:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.Z,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>u,tree:()=>l}),r(24185),r(52987),r(58522),r(61804),r(7629),r(11930),r(12523);var a=r(23191),n=r(88716),s=r(43315),i=r(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let l=["",{children:["(main)",{children:["stock",{children:["ingredients",{children:["manage",{children:["[...mode]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,24185)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\stock\\ingredients\\manage\\[...mode]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,52987)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\stock\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],c=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\stock\\ingredients\\manage\\[...mode]\\page.tsx"],d="/(main)/stock/ingredients/manage/[...mode]/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(main)/stock/ingredients/manage/[...mode]/page",pathname:"/stock/ingredients/manage/[...mode]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},8057:(e,t,r)=>{Promise.resolve().then(r.bind(r,13993))},2643:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(17577);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var s=r(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let o=a.forwardRef((e,t)=>a.createElement(s.Z,i({},e,{ref:t,icon:n})))},30278:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(17577);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var s=r(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let o=a.forwardRef((e,t)=>a.createElement(s.Z,i({},e,{ref:t,icon:n})))},13993:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Z});var a=r(10326),n=r(17577),s=r(49909),i=r(43359),o=r(46752),l=r(75958),c=r(71935),d=r(92121),p=r(91259),u=r(63459),m=r(35047),g=r(66874),h=r(71209),x=r(30278);let{Text:f,Title:y}=g.default,j={container:{paddingBottom:100,backgroundColor:"#f8f9fc",minHeight:"100vh"},actionButtons:{display:"flex",gap:12,marginTop:24,paddingTop:20,borderTop:"1px solid #f0f0f0"}},b=()=>a.jsx("style",{children:`
        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(12px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .manage-form-card {
            animation: fadeSlideIn 0.4s ease both;
        }
        
        .manage-page .ant-input,
        .manage-page .ant-input-number,
        .manage-page .ant-select-selector,
        .manage-page .ant-input-affix-wrapper {
            border-radius: 12px !important;
            border: 2px solid #f0f0f0 !important;
            transition: all 0.3s ease !important;
        }
        
        .manage-page .ant-input:focus,
        .manage-page .ant-input-focused,
        .manage-page .ant-input-number:focus,
        .manage-page .ant-input-number-focused,
        .manage-page .ant-select-focused .ant-select-selector,
        .manage-page .ant-input-affix-wrapper:focus,
        .manage-page .ant-input-affix-wrapper-focused {
            border-color: #1890ff !important;
            box-shadow: 0 0 0 3px rgba(24, 144, 255, 0.1) !important;
        }
        
        .manage-page .ant-input-lg,
        .manage-page .ant-select-lg .ant-select-selector {
            padding: 12px 16px !important;
            height: auto !important;
        }
        
        .manage-page .ant-form-item-label > label {
            font-weight: 600;
            color: #1a1a2e;
            font-size: 14px;
        }
        
        .manage-page .ant-form-item-required::before {
            display: none !important;
        }
        
        .manage-page .ant-form-item-required::after {
            content: '*' !important;
            display: inline-block !important;
            color: #ff4d4f !important;
            margin-left: 4px !important;
        }
        
        .manage-page .ant-switch {
            min-width: 50px;
        }
        
        .manage-page .ant-switch-checked {
            background: linear-gradient(135deg, #52c41a 0%, #389e0d 100%);
        }
        
        .manage-page textarea.ant-input {
            border-radius: 12px !important;
        }
    `}),P=({url:e,name:t})=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:14,padding:16,background:"#fafafa",borderRadius:16,marginTop:12},children:[a.jsx(h.Z,{src:e||"https://placehold.co/80x80/f5f5f5/999999?text=Preview",size:80,shape:"square",style:{borderRadius:14,border:"2px solid white",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"}}),(0,a.jsxs)("div",{children:[a.jsx(f,{strong:!0,style:{display:"block",marginBottom:4},children:t||"ตัวอย่างรูปภาพ"}),a.jsx(f,{type:"secondary",style:{fontSize:12},children:e?"แสดงตัวอย่างจาก URL":"ยังไม่มีรูปภาพ"})]})]}),v=({isEdit:e,loading:t,onCancel:r})=>(0,a.jsxs)("div",{style:j.actionButtons,children:[a.jsx(c.ZP,{size:"large",onClick:r,style:{flex:1,borderRadius:14,height:48},children:"ยกเลิก"}),a.jsx(c.ZP,{type:"primary",htmlType:"submit",size:"large",loading:t,icon:a.jsx(x.Z,{}),style:{flex:2,borderRadius:14,height:48,background:e?"linear-gradient(135deg, #faad14 0%, #fa8c16 100%)":"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)",border:"none",fontWeight:600,boxShadow:e?"0 4px 12px rgba(250, 173, 20, 0.4)":"0 4px 12px rgba(82, 196, 26, 0.4)"},children:e?"อัปเดต":"บันทึก"})]});r(81456);var k=r(26963),_=r(76892),w=r(52647);let{TextArea:q}=s.default;function Z({params:e}){let t=(0,m.useRouter)(),[r]=i.Z.useForm(),[g,h]=(0,n.useState)(!1),[x,f]=(0,n.useState)(!1),[y,Z]=(0,n.useState)([]),[E,O]=(0,n.useState)(""),[S,C]=(0,n.useState)(""),[z,T]=(0,n.useState)(""),F=e.mode[0],R=e.mode[1]||null,I="edit"===F&&!!R;(0,n.useCallback)(async()=>{h(!0);try{let e=await fetch(`/api/stock/ingredients/getById/${R}`);if(!e.ok)throw Error("ไม่สามารถดึงข้อมูลวัตถุดิบได้");let t=await e.json();r.setFieldsValue({ingredient_name:t.ingredient_name,display_name:t.display_name,description:t.description,img_url:t.img_url,unit_id:t.unit_id,is_active:t.is_active}),O(t.img_url||""),C(t.display_name||"")}catch(e){console.error(e),o.ZP.error("ไม่สามารถดึงข้อมูลวัตถุดิบได้"),t.push("/stock/ingredients")}finally{h(!1)}},[R,r,t]);let L=async e=>{f(!0);try{if(I){let t=await fetch(`/api/stock/ingredients/update/${R}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":z},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถอัปเดตวัตถุดิบได้")}o.ZP.success("อัปเดตวัตถุดิบสำเร็จ")}else{let t=await fetch("/api/stock/ingredients/create",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":z},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถสร้างวัตถุดิบได้")}o.ZP.success("สร้างวัตถุดิบสำเร็จ")}t.push("/stock/ingredients")}catch(e){console.error(e),o.ZP.error(e.message||(I?"ไม่สามารถอัปเดตวัตถุดิบได้":"ไม่สามารถสร้างวัตถุดิบได้"))}finally{f(!1)}},M=()=>t.push("/stock/ingredients");return(0,a.jsxs)("div",{className:"manage-page",style:j.container,children:[a.jsx(b,{}),a.jsx(w.Z,{title:I?"แก้ไขวัตถุดิบ":"เพิ่มวัตถุดิบ",subtitle:"ข้อมูลวัตถุดิบในคลัง",onBack:M,actions:I?a.jsx(c.ZP,{danger:!0,onClick:()=>{R&&l.Z.confirm({title:"ยืนยันการลบวัตถุดิบ",content:`คุณต้องการลบวัตถุดิบ "${S}" หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,onOk:async()=>{try{if(!(await fetch(`/api/stock/ingredients/delete/${R}`,{method:"DELETE",headers:{"X-CSRF-Token":z}})).ok)throw Error("ไม่สามารถลบวัตถุดิบได้");o.ZP.success("ลบวัตถุดิบสำเร็จ"),t.push("/stock/ingredients")}catch(e){console.error(e),o.ZP.error("ไม่สามารถลบวัตถุดิบได้")}}})},children:"ลบ"}):void 0}),a.jsx(k.Z,{maxWidth:900,children:a.jsx("div",{className:"manage-form-card",children:a.jsx(_.Z,{children:g?a.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"60px 0"},children:a.jsx(d.Z,{size:"large"})}):(0,a.jsxs)(i.Z,{form:r,layout:"vertical",onFinish:L,requiredMark:!1,autoComplete:"off",initialValues:{is_active:!0},onValuesChange:e=>{"string"==typeof e.img_url&&O(e.img_url),"string"==typeof e.display_name&&C(e.display_name)},children:[a.jsx(i.Z.Item,{name:"ingredient_name",label:"ชื่อวัตถุดิบ (ภาษาอังกฤษ) *",rules:[{required:!0,message:"กรุณากรอกชื่อวัตถุดิบ"},{pattern:/^[a-zA-Z0-9\s\-_().]*$/,message:"กรุณากรอกภาษาอังกฤษเท่านั้น"},{max:100,message:"ความยาวต้องไม่เกิน 100 ตัวอักษร"}],children:a.jsx(s.default,{size:"large",placeholder:"เช่น Sugar, Salt, Flour",maxLength:100})}),a.jsx(i.Z.Item,{name:"display_name",label:"ชื่อที่แสดง (ภาษาไทย) *",rules:[{required:!0,message:"กรุณากรอกชื่อที่แสดง"},{max:100,message:"ความยาวต้องไม่เกิน 100 ตัวอักษร"}],children:a.jsx(s.default,{size:"large",placeholder:"เช่น น้ำตาล, เกลือ, แป้ง",maxLength:100})}),a.jsx(i.Z.Item,{name:"unit_id",label:"หน่วยวัตถุดิบ *",rules:[{required:!0,message:"กรุณาเลือกหน่วยวัตถุดิบ"}],children:a.jsx(p.default,{size:"large",placeholder:"เลือกหน่วย",showSearch:!0,dropdownMatchSelectWidth:!0,getPopupContainer:e=>e?.parentElement||document.body,optionFilterProp:"children",children:y.map(e=>(0,a.jsxs)(p.default.Option,{value:e.id,children:[e.display_name," (",e.unit_name,")"]},e.id))})}),a.jsx(i.Z.Item,{name:"img_url",label:"รูปภาพ URL",children:a.jsx(s.default,{size:"large",placeholder:"https://example.com/image.jpg"})}),a.jsx(P,{url:E,name:S}),a.jsx(i.Z.Item,{name:"description",label:"รายละเอียด",style:{marginTop:20},children:a.jsx(q,{rows:4,placeholder:"รายละเอียดเพิ่มเติม...",style:{borderRadius:12}})}),a.jsx(i.Z.Item,{name:"is_active",label:"สถานะการใช้งาน",valuePropName:"checked",children:a.jsx(u.Z,{checkedChildren:"ใช้งาน",unCheckedChildren:"ไม่ใช้งาน"})}),a.jsx(v,{isEdit:I,loading:x,onCancel:M})]})})})})]})}},24185:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\stock\ingredients\manage\[...mode]\page.tsx#default`)}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,4421,8571,8963,1399,1323],()=>r(89513));module.exports=a})();