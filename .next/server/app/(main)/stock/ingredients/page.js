(()=>{var e={};e.id=3291,e.ids=[3291],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},59579:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.Z,__next_app__:()=>p,originalPathname:()=>l,pages:()=>d,routeModule:()=>u,tree:()=>c}),r(80281),r(52987),r(58522),r(61804),r(7629),r(11930),r(12523);var s=r(23191),i=r(88716),n=r(43315),a=r(95231),o={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);r.d(t,o);let c=["",{children:["(main)",{children:["stock",{children:["ingredients",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,80281)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\stock\\ingredients\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,52987)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\stock\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\stock\\ingredients\\page.tsx"],l="/(main)/stock/ingredients/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/(main)/stock/ingredients/page",pathname:"/stock/ingredients",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3904:(e,t,r)=>{Promise.resolve().then(r.bind(r,66177))},2643:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var n=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}let o=s.forwardRef((e,t)=>s.createElement(n.Z,a({},e,{ref:t,icon:i})))},12129:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(17577);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 472a40 40 0 1080 0 40 40 0 10-80 0zm367 352.9L696.3 352V178H768v-68H256v68h71.7v174L145 824.9c-2.8 7.4-4.3 15.2-4.3 23.1 0 35.3 28.7 64 64 64h614.6c7.9 0 15.7-1.5 23.1-4.3 33-12.7 49.4-49.8 36.6-82.8zM395.7 364.7V180h232.6v184.7L719.2 600c-20.7-5.3-42.1-8-63.9-8-61.2 0-119.2 21.5-165.3 60a188.78 188.78 0 01-121.3 43.9c-32.7 0-64.1-8.3-91.8-23.7l118.8-307.5zM210.5 844l41.7-107.8c35.7 18.1 75.4 27.8 116.6 27.8 61.2 0 119.2-21.5 165.3-60 33.9-28.2 76.3-43.9 121.3-43.9 35 0 68.4 9.5 97.6 27.1L813.5 844h-603z"}}]},name:"experiment",theme:"outlined"};var n=r(74082);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}let o=s.forwardRef((e,t)=>s.createElement(n.Z,a({},e,{ref:t,icon:i})))},66177:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>H});var s=r(10326),i=r(17577),n=r(66874),a=r(75958),o=r(46752),c=r(92121),d=r(64635),l=r(71935),p=r(12129),u=r(80490),g=r(72380),x=r(35047),h=r(37938),f=r(59746),y=r(80440),m=r(94001),j=r(54354),b=r(83179),v=r(71209),k=r(61357),P=r(56811),Z=r(54695),w=r(46024),_=r(63191),q=r(60578);let{Text:E,Title:C}=n.default,S={container:{paddingBottom:100,backgroundColor:"#f8f9fc",minHeight:"100vh"},statsCard:{margin:"-40px 16px 0 16px",padding:"16px",background:"white",borderRadius:20,boxShadow:"0 8px 24px rgba(0,0,0,0.08)",display:"flex",justifyContent:"space-around",position:"relative",zIndex:10},statItem:{textAlign:"center",flex:1},statNumber:{fontSize:24,fontWeight:700,display:"block"},statLabel:{fontSize:12,color:"#8c8c8c",marginTop:2},listContainer:{padding:"20px 16px 0 16px"},ingredientCard:e=>({marginBottom:12,borderRadius:20,border:"none",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",overflow:"hidden",transition:"all 0.3s ease",background:e?"white":"linear-gradient(to right, #fafafa, white)",opacity:e?1:.7}),ingredientCardInner:{padding:16,display:"flex",alignItems:"center",gap:14}},z=()=>s.jsx("style",{children:`
        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(12px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .ingredient-card {
            animation: fadeSlideIn 0.4s ease both;
        }
        
        .ingredient-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.1) !important;
        }
        
        .ingredient-card:active {
            transform: scale(0.98);
        }
        
        /* Custom scrollbar */
        .ingredients-page *::-webkit-scrollbar {
            width: 6px;
        }
        .ingredients-page *::-webkit-scrollbar-track {
            background: transparent;
        }
        .ingredients-page *::-webkit-scrollbar-thumb {
            background: #d9d9d9;
            border-radius: 3px;
        }
        .ingredients-page *::-webkit-scrollbar-thumb:hover {
            background: #bfbfbf;
        }
    `}),O=({totalIngredients:e,activeIngredients:t,inactiveIngredients:r})=>(0,s.jsxs)("div",{style:S.statsCard,children:[(0,s.jsxs)("div",{style:S.statItem,children:[s.jsx("span",{style:{...S.statNumber,color:"#1890ff"},children:e}),s.jsx(E,{style:S.statLabel,children:(0,q.t)("stock.ingredients.stats.total")})]}),s.jsx("div",{style:{width:1,background:"#f0f0f0"}}),(0,s.jsxs)("div",{style:S.statItem,children:[s.jsx("span",{style:{...S.statNumber,color:"#52c41a"},children:t}),s.jsx(E,{style:S.statLabel,children:(0,q.t)("stock.ingredients.stats.active")})]}),s.jsx("div",{style:{width:1,background:"#f0f0f0"}}),(0,s.jsxs)("div",{style:S.statItem,children:[s.jsx("span",{style:{...S.statNumber,color:"#ff4d4f"},children:r}),s.jsx(E,{style:S.statLabel,children:(0,q.t)("stock.ingredients.stats.inactive")})]})]}),I=({ingredient:e,index:t,onEdit:r,onDelete:i})=>s.jsx("div",{className:"ingredient-card",style:{...S.ingredientCard(e.is_active),animationDelay:`${.03*t}s`},children:(0,s.jsxs)("div",{style:S.ingredientCardInner,children:[s.jsx(v.Z,{src:e.img_url||"https://placehold.co/64x64/f5f5f5/999999?text=\uD83D\uDCE6",size:64,shape:"square",style:{borderRadius:14,border:"2px solid #f0f0f0",boxShadow:"0 4px 12px rgba(0,0,0,0.06)",flexShrink:0}}),(0,s.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[s.jsx(E,{strong:!0,style:{fontSize:16,color:"#1a1a2e"},ellipsis:{tooltip:e.display_name},children:e.display_name}),e.is_active?s.jsx(P.Z,{style:{color:"#52c41a",fontSize:14}}):s.jsx(Z.Z,{style:{color:"#ff4d4f",fontSize:14}})]}),s.jsx(E,{type:"secondary",style:{fontSize:13,display:"block",marginBottom:6},ellipsis:{tooltip:e.ingredient_name},children:e.ingredient_name}),(0,s.jsxs)("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[s.jsx(k.Z,{color:"blue",style:{borderRadius:8,margin:0,fontSize:11},children:e.unit?.display_name||"-"}),e.description&&s.jsx(k.Z,{style:{borderRadius:8,margin:0,fontSize:11,background:"#f5f5f5",border:"none",color:"#666"},children:e.description.length>20?e.description.substring(0,20)+"...":e.description})]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:8},children:[s.jsx(l.ZP,{type:"text",icon:s.jsx(w.Z,{}),onClick:t=>{t.stopPropagation(),r(e)},style:{borderRadius:10,color:"#1890ff",background:"#e6f7ff"}}),s.jsx(l.ZP,{type:"text",danger:!0,icon:s.jsx(_.Z,{}),onClick:t=>{t.stopPropagation(),i(e)},style:{borderRadius:10,background:"#fff2f0"}})]})]})});r(81456);var T=r(26963),R=r(76892),L=r(18978),D=r(52647),F=r(36231);let{Text:A}=n.default;function H(){let e=(0,x.useRouter)(),{user:t,loading:r}=(0,m.a)(),[n,v]=(0,i.useState)([]),{execute:k}=(0,f.J)(),{showLoading:P,hideLoading:Z}=(0,h.x)(),{socket:w}=(0,y.s)(),[_,E]=(0,i.useState)(""),[C,H]=(0,i.useState)(null),M=(0,i.useCallback)(async()=>{k(async()=>{let e=await fetch("/api/stock/ingredients");if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||t.message||(0,q.t)("stock.ingredients.loadError"))}v(await e.json())},(0,q.t)("stock.ingredients.loading"))},[k]);(0,j.v)(w,{create:b.b.ingredients.create,update:b.b.ingredients.update,delete:b.b.ingredients.delete},v);let N=()=>{P(),e.push("/stock/ingredients/manage/add"),setTimeout(()=>Z(),1e3)},B=t=>{P(),e.push(`/stock/ingredients/manage/edit/${t.id}`),setTimeout(()=>Z(),1e3)},G=e=>{a.Z.confirm({title:(0,q.t)("stock.ingredients.deleteTitle"),content:(0,q.t)("stock.ingredients.deleteContent",{name:e.display_name}),okText:(0,q.t)("branch.delete.ok"),okType:"danger",cancelText:(0,q.t)("branch.delete.cancel"),centered:!0,onOk:async()=>{await k(async()=>{if(!(await fetch(`/api/stock/ingredients/delete/${e.id}`,{method:"DELETE",headers:{"X-CSRF-Token":_}})).ok)throw Error((0,q.t)("stock.ingredients.deleteError"));o.ZP.success((0,q.t)("stock.ingredients.deleteSuccess",{name:e.display_name}))},(0,q.t)("stock.ingredients.deleting"))}})};if(r||null===C)return(0,s.jsxs)("div",{style:{display:"flex",height:"100vh",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:16},children:[s.jsx(c.Z,{size:"large"}),s.jsx(A,{type:"secondary",children:(0,q.t)("stock.ingredients.checkingAuth")})]});if(!1===C)return(0,s.jsxs)("div",{style:{display:"flex",height:"100vh",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:16},children:[s.jsx(c.Z,{size:"large"}),s.jsx(A,{type:"danger",children:(0,q.t)("stock.ingredients.redirecting")})]});let W=n.filter(e=>e.is_active),J=n.filter(e=>!e.is_active);return(0,s.jsxs)("div",{className:"ingredients-page",style:S.container,children:[s.jsx(z,{}),s.jsx(D.Z,{title:(0,q.t)("stock.ingredients.title"),subtitle:(0,q.t)("stock.ingredients.subtitle",{count:n.length}),icon:s.jsx(p.Z,{}),actions:(0,s.jsxs)(d.Z,{size:8,wrap:!0,children:[s.jsx(l.ZP,{icon:s.jsx(u.Z,{}),onClick:M,children:(0,q.t)("stock.ingredients.refresh")}),s.jsx(l.ZP,{type:"primary",icon:s.jsx(g.Z,{}),onClick:N,children:(0,q.t)("stock.ingredients.add")})]})}),s.jsx(T.Z,{children:(0,s.jsxs)(L.Z,{children:[s.jsx(O,{totalIngredients:n.length,activeIngredients:W.length,inactiveIngredients:J.length}),s.jsx(R.Z,{title:(0,q.t)("stock.ingredients.listTitle"),extra:s.jsx("span",{style:{fontWeight:600},children:n.length}),children:n.length>0?s.jsx("div",{style:S.listContainer,children:n.map((e,t)=>s.jsx(I,{ingredient:e,index:t,onEdit:B,onDelete:G},e.id))}):s.jsx(F.Z,{title:(0,q.t)("stock.ingredients.emptyTitle"),description:(0,q.t)("stock.ingredients.emptyDescription"),action:s.jsx(l.ZP,{type:"primary",icon:s.jsx(g.Z,{}),onClick:N,children:(0,q.t)("stock.ingredients.emptyAction")})})})]})})]})}},18978:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(10326);r(17577);var i=r(21020),n=r(52386);function a({children:e,gap:t=n.H.sectionGap,style:r}){return s.jsx(i.Z,{vertical:!0,gap:t,style:r,children:e})}},36231:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var s=r(10326);r(17577);var i=r(56249),n=r(75698),a=r(66874),o=r(52386);function c({title:e="ไม่มีข้อมูล",description:t,action:r,image:c}){return s.jsx(i.Z,{size:"small",variant:"outlined",style:{borderRadius:o.H.cardRadiusLG},bodyStyle:{padding:20},children:s.jsx(n.Z,{image:c,description:(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[s.jsx(a.default.Text,{strong:!0,children:e}),t?s.jsx(a.default.Text,{type:"secondary",children:t}):null]}),children:r})})}},59746:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});var s=r(17577),i=r(75958),n=r(37938);let a=()=>{let{showLoading:e,hideLoading:t}=(0,n.x)();return{execute:(0,s.useCallback)(async(r,s="กำลังดำเนินการ...",n,a="เกิดข้อผิดพลาด")=>{try{return e(s,"async"),await r()}catch(t){console.error("Async action error:",t);let e=a;"string"==typeof t?e=t:t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&(e=t.response?.data?.message??t.message??(()=>{try{return JSON.stringify(t)}catch{return"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ (Unknown Error)"}})()),i.Z.error({title:"ข้อผิดพลาด",content:e});return}finally{t("async")}},[e,t])}}},54354:(e,t,r)=>{"use strict";function s(e,t,r,s=e=>e.id,i=()=>!0){}function i({socket:e,events:t=[],onRefresh:r,intervalMs:s,enabled:i=!0,debounceMs:n}){}r.d(t,{D:()=>i,v:()=>s}),r(17577)},80281:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\stock\ingredients\page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,4421,8571,8963,1399,1323],()=>r(59579));module.exports=s})();