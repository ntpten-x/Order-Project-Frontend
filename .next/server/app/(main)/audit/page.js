(()=>{var e={};e.id=1976,e.ids=[1976],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},9974:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.Z,__next_app__:()=>E,originalPathname:()=>c,pages:()=>d,routeModule:()=>T,tree:()=>o}),r(65862),r(58522),r(61804),r(7629),r(11930),r(12523);var i=r(23191),a=r(88716),s=r(43315),n=r(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let o=["",{children:["(main)",{children:["audit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,65862)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\audit\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\audit\\page.tsx"],c="/(main)/audit/page",E={require:r,loadChunk:()=>Promise.resolve()},T=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(main)/audit/page",pathname:"/audit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},47548:(e,t,r)=>{Promise.resolve().then(r.bind(r,80296))},2643:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var s=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let l=i.forwardRef((e,t)=>i.createElement(s.Z,n({},e,{ref:t,icon:a})))},22896:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6zm-405.8-201c-3-4.1-7.8-6.6-13-6.6H336c-6.5 0-10.3 7.4-6.5 12.7l126.4 174a16.1 16.1 0 0026 0l212.6-292.7c3.8-5.3 0-12.7-6.5-12.7h-55.2c-5.1 0-10 2.5-13 6.6L468.9 542.4l-64.7-89.1z"}}]},name:"safety-certificate",theme:"outlined"};var s=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let l=i.forwardRef((e,t)=>i.createElement(s.Z,n({},e,{ref:t,icon:a})))},80296:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>K});var i,a=r(10326),s=r(17577),n=r(14374),l=r(66874),o=r(61357),d=r(64635),c=r(6400),E=r(71935),T=r(46752),u=r(56249),_=r(81135),h=r(49909),p=r(91259),x=r(13483),D=r(75698),R=r(90218),A=r(40432),C=r(276),y=r(29116),j=r(22896),O=r(80490);let P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};var g=r(74082);function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let b=s.forwardRef((e,t)=>s.createElement(g.Z,f({},e,{ref:t,icon:P}))),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm144 452H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm445.7 51.5l-93.3-93.3C814.7 780.7 828 743.9 828 704c0-97.2-78.8-176-176-176s-176 78.8-176 176 78.8 176 176 176c35.8 0 69-10.7 96.8-29l94.7 94.7c1.6 1.6 3.6 2.3 5.6 2.3s4.1-.8 5.6-2.3l31-31a7.9 7.9 0 000-11.2zM652 816c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"file-search",theme:"outlined"};function S(){return(S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}let m=s.forwardRef((e,t)=>s.createElement(g.Z,S({},e,{ref:t,icon:U})));var v=r(64421),N=r(20108),I=r(88295),L=r.n(I),w=r(26963),Z=r(52647),M=r(76892);!function(e){e.ORDER_CREATE="ORDER_CREATE",e.ORDER_UPDATE="ORDER_UPDATE",e.ORDER_DELETE="ORDER_DELETE",e.ORDER_STATUS_CHANGE="ORDER_STATUS_CHANGE",e.ORDER_CANCEL="ORDER_CANCEL",e.PAYMENT_CREATE="PAYMENT_CREATE",e.PAYMENT_UPDATE="PAYMENT_UPDATE",e.PAYMENT_DELETE="PAYMENT_DELETE",e.PAYMENT_REFUND="PAYMENT_REFUND",e.PAYMENT_ADJUST="PAYMENT_ADJUST",e.ITEM_ADD="ITEM_ADD",e.ITEM_UPDATE="ITEM_UPDATE",e.ITEM_DELETE="ITEM_DELETE",e.QUEUE_ADD="QUEUE_ADD",e.QUEUE_UPDATE="QUEUE_UPDATE",e.QUEUE_REMOVE="QUEUE_REMOVE",e.QUEUE_REORDER="QUEUE_REORDER",e.PRODUCT_CREATE="PRODUCT_CREATE",e.PRODUCT_UPDATE="PRODUCT_UPDATE",e.PRODUCT_DELETE="PRODUCT_DELETE",e.CATEGORY_CREATE="CATEGORY_CREATE",e.CATEGORY_UPDATE="CATEGORY_UPDATE",e.CATEGORY_DELETE="CATEGORY_DELETE",e.DISCOUNT_CREATE="DISCOUNT_CREATE",e.DISCOUNT_UPDATE="DISCOUNT_UPDATE",e.DISCOUNT_DELETE="DISCOUNT_DELETE",e.DISCOUNT_APPLY="DISCOUNT_APPLY",e.DELIVERY_CREATE="DELIVERY_CREATE",e.DELIVERY_UPDATE="DELIVERY_UPDATE",e.DELIVERY_DELETE="DELIVERY_DELETE",e.TABLE_CREATE="TABLE_CREATE",e.TABLE_UPDATE="TABLE_UPDATE",e.TABLE_DELETE="TABLE_DELETE",e.PAYMENT_METHOD_CREATE="PAYMENT_METHOD_CREATE",e.PAYMENT_METHOD_UPDATE="PAYMENT_METHOD_UPDATE",e.PAYMENT_METHOD_DELETE="PAYMENT_METHOD_DELETE",e.PRODUCTS_UNIT_CREATE="PRODUCTS_UNIT_CREATE",e.PRODUCTS_UNIT_UPDATE="PRODUCTS_UNIT_UPDATE",e.PRODUCTS_UNIT_DELETE="PRODUCTS_UNIT_DELETE",e.PAYMENT_ACCOUNT_CREATE="PAYMENT_ACCOUNT_CREATE",e.PAYMENT_ACCOUNT_UPDATE="PAYMENT_ACCOUNT_UPDATE",e.PAYMENT_ACCOUNT_ACTIVATE="PAYMENT_ACCOUNT_ACTIVATE",e.PAYMENT_ACCOUNT_DELETE="PAYMENT_ACCOUNT_DELETE",e.SHOP_PROFILE_UPDATE="SHOP_PROFILE_UPDATE",e.USER_CREATE="USER_CREATE",e.USER_UPDATE="USER_UPDATE",e.USER_DELETE="USER_DELETE",e.ROLE_CREATE="ROLE_CREATE",e.ROLE_UPDATE="ROLE_UPDATE",e.ROLE_DELETE="ROLE_DELETE",e.BRANCH_CREATE="BRANCH_CREATE",e.BRANCH_UPDATE="BRANCH_UPDATE",e.BRANCH_DELETE="BRANCH_DELETE",e.STOCK_INGREDIENT_CREATE="STOCK_INGREDIENT_CREATE",e.STOCK_INGREDIENT_UPDATE="STOCK_INGREDIENT_UPDATE",e.STOCK_INGREDIENT_DELETE="STOCK_INGREDIENT_DELETE",e.STOCK_INGREDIENT_UNIT_CREATE="STOCK_INGREDIENT_UNIT_CREATE",e.STOCK_INGREDIENT_UNIT_UPDATE="STOCK_INGREDIENT_UNIT_UPDATE",e.STOCK_INGREDIENT_UNIT_DELETE="STOCK_INGREDIENT_UNIT_DELETE",e.STOCK_ORDER_CREATE="STOCK_ORDER_CREATE",e.STOCK_ORDER_UPDATE="STOCK_ORDER_UPDATE",e.STOCK_ORDER_DELETE="STOCK_ORDER_DELETE",e.STOCK_ORDER_CONFIRM_PURCHASE="STOCK_ORDER_CONFIRM_PURCHASE",e.STOCK_ORDER_STATUS_UPDATE="STOCK_ORDER_STATUS_UPDATE",e.SHIFT_OPEN="SHIFT_OPEN",e.SHIFT_CLOSE="SHIFT_CLOSE"}(i||(i={}));let H={container:{background:"#f6f7fb",minHeight:"100vh",paddingBottom:80},filtersCard:{borderRadius:18,boxShadow:"0 12px 40px rgba(15, 23, 42, 0.05)",border:"1px solid #edf1f7"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:12},tableCard:{borderRadius:18,boxShadow:"0 10px 34px rgba(15, 23, 42, 0.05)",border:"1px solid #edf1f7"},jsonBlock:{background:"#0b1021",color:"#e8f0ff",borderRadius:12,padding:12,fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',fontSize:12,lineHeight:1.5,maxHeight:320,overflow:"auto",border:"1px solid #151b33"}},Y=()=>a.jsx("style",{children:`
      .audit-table .ant-table-tbody > tr:hover > td {
        background: #f5f7ff !important;
      }
      .audit-table .ant-table-cell {
        font-size: 13px;
      }
      .audit-chip {
        border-radius: 999px;
        padding: 4px 10px;
        font-weight: 600;
      }
      .audit-drawer .ant-drawer-body {
        padding: 18px;
      }
    `});var z=r(94001),k=r(78407);let{RangePicker:F}=n.default,{Text:q}=l.default;function G(e){return e.replace(/_/g," / ")}function B(e){let t=e.toUpperCase();return t.includes("DELETE")||t.includes("CANCEL")?"red":t.includes("REFUND")||t.includes("CLOSE")?"volcano":t.includes("UPDATE")||t.includes("STATUS")?"geekblue":t.includes("CREATE")||t.includes("ADD")||t.includes("OPEN")?"green":"purple"}function K(){let{user:e}=(0,z.a)(),t=e?.role==="Admin",[r,n]=(0,s.useState)(""),[l,P]=(0,s.useState)(),[g,f]=(0,s.useState)(),[U,S]=(0,s.useState)(),[I,K]=(0,s.useState)(null),[V,$]=(0,s.useState)(1),[W,Q]=(0,s.useState)(20),[X,J]=(0,s.useState)(null),ee=(0,s.useMemo)(()=>[r,l,g,U,I?.[0],I?.[1]].filter(Boolean).length,[r,l,g,U,I]),et=(0,s.useMemo)(()=>Object.values(i).map(e=>({value:e,label:G(e)})),[]),er=(0,N.a)({queryKey:["branches",t],queryFn:()=>k.x.getAll(),enabled:t,staleTime:3e5}),ei=(0,N.a)({queryKey:["auditLogs",V,W,r,l,g,U,I?.[0]?.toISOString(),I?.[1]?.toISOString()],queryFn:async()=>{let e=new URLSearchParams;e.set("page",String(V)),e.set("limit",String(W)),r&&e.set("search",r.trim()),l&&e.set("action_type",l),g&&e.set("entity_type",g.trim()),U&&e.set("branch_id",U),I?.[0]&&e.set("start_date",I[0].startOf("day").toISOString()),I?.[1]&&e.set("end_date",I[1].endOf("day").toISOString());let t=await fetch(`/api/audit/logs?${e.toString()}`,{cache:"no-store"}),i=await t.json().catch(()=>({}));if(!t.ok)throw Error(i.error||"โหลดข้อมูล Audit ไม่สำเร็จ");return{...i,data:(i.data||[]).map(e=>({...e,created_at:new Date(e.created_at)}))}},placeholderData:e=>e,staleTime:6e4}),ea=ei.data?.data??[],es=ei.data?.total??0,en=[{title:"เวลา",dataIndex:"created_at",width:170,render:e=>L()(e).format("DD MMM YYYY HH:mm"),sorter:(e,t)=>L()(e.created_at).valueOf()-L()(t.created_at).valueOf(),defaultSortOrder:"descend"},{title:"การกระทำ",dataIndex:"action_type",width:180,render:e=>a.jsx(o.Z,{color:B(e),style:{fontWeight:600},children:G(e)})},{title:"ผู้ใช้",dataIndex:"username",width:140,render:(e,t)=>(0,a.jsxs)(d.Z,{direction:"vertical",size:0,children:[a.jsx(q,{strong:!0,children:e||"ไม่ระบุ"}),t.user_id&&a.jsx(q,{type:"secondary",children:t.user_id.slice(0,8)})]})},{title:"สาขา",dataIndex:"branch_id",width:140,render:e=>e?a.jsx(o.Z,{color:"blue",children:e.slice(0,8)}):"-"},{title:"เป้าหมาย",dataIndex:"entity_type",width:180,render:(e,t)=>(0,a.jsxs)(d.Z,{direction:"vertical",size:0,children:[a.jsx(q,{children:t.entity_type||"-"}),t.entity_id&&(0,a.jsxs)(q,{type:"secondary",style:{fontSize:12},children:["ID: ",t.entity_id.slice(0,12)]})]})},{title:"รายละเอียด",dataIndex:"description",ellipsis:!0,render:e=>e?a.jsx(c.Z,{title:e,children:a.jsx(q,{children:e})}):a.jsx(q,{type:"secondary",children:"-"})},{title:"เส้นทาง",dataIndex:"path",width:220,render:(e,t)=>(0,a.jsxs)(d.Z,{size:8,children:[t.method&&a.jsx(o.Z,{color:"cyan",className:"audit-chip",children:t.method}),a.jsx(q,{type:"secondary",children:t.path||"-"})]})},{title:"IP / Agent",dataIndex:"ip_address",width:200,render:(e,t)=>(0,a.jsxs)(d.Z,{direction:"vertical",size:0,children:[a.jsx(q,{code:!0,children:t.ip_address}),t.user_agent&&a.jsx(q,{type:"secondary",style:{fontSize:12},ellipsis:!0,children:t.user_agent})]})},{title:"",key:"actions",fixed:"right",width:70,render:(e,t)=>a.jsx(E.ZP,{type:"link",icon:a.jsx(y.Z,{}),onClick:()=>J(t),"aria-label":"ดูรายละเอียด",children:"ดู"})}],el=async e=>{if(e&&"undefined"!=typeof navigator&&navigator.clipboard)try{await navigator.clipboard.writeText(e),T.ZP.success("คัดลอก ID แล้ว")}catch{T.ZP.error("คัดลอกไม่สำเร็จ")}};return(0,a.jsxs)("div",{style:H.container,children:[a.jsx(Y,{}),a.jsx(Z.Z,{title:"Audit Logs",subtitle:"ติดตามทุกการเปลี่ยนแปลงของระบบแบบละเอียด",icon:a.jsx(j.Z,{}),actions:(0,a.jsxs)(d.Z,{children:[a.jsx(E.ZP,{icon:a.jsx(O.Z,{}),onClick:()=>ei.refetch(),loading:ei.isFetching,children:"รีเฟรช"}),a.jsx(E.ZP,{icon:a.jsx(b,{}),onClick:()=>{n(""),P(void 0),f(void 0),K(null),t&&S(void 0),$(1),Q(20)},disabled:0===ee,children:"ล้างตัวกรอง"})]})}),(0,a.jsxs)(w.Z,{children:[a.jsx(M.Z,{children:(0,a.jsxs)("div",{style:H.statsGrid,children:[a.jsx(u.Z,{size:"small",style:{borderRadius:16},children:a.jsx(_.Z,{title:"จำนวน Log ทั้งหมด",value:es,prefix:a.jsx(m,{}),valueStyle:{fontWeight:700}})}),a.jsx(u.Z,{size:"small",style:{borderRadius:16},children:a.jsx(_.Z,{title:"บันทึกในหน้านี้",value:ea.length,suffix:`/ หน้า ${ei.data?.page??1}`,valueStyle:{fontWeight:700}})}),a.jsx(u.Z,{size:"small",style:{borderRadius:16},children:a.jsx(_.Z,{title:"ตัวกรองที่ใช้",value:ee,suffix:"ตัว",valueStyle:{fontWeight:700,color:ee?"#fa8c16":void 0}})}),!t&&a.jsx(u.Z,{size:"small",style:{borderRadius:16},children:a.jsx(_.Z,{title:"สาขาที่กำลังดู",value:e?.branch?.branch_name||e?.branch_id||"ไม่ระบุ",valueStyle:{fontWeight:700}})})]})}),a.jsx(M.Z,{title:"ตัวกรอง",extra:a.jsx(q,{type:"secondary",children:"ช่วยให้ค้นหาเหตุการณ์ได้เร็วขึ้น"}),children:a.jsx(u.Z,{style:H.filtersCard,bodyStyle:{padding:16},children:(0,a.jsxs)(d.Z,{size:12,wrap:!0,children:[a.jsx(h.default,{allowClear:!0,style:{width:220},placeholder:"ค้นหา (ผู้ใช้, รายละเอียด, Entity)",value:r,prefix:a.jsx(m,{}),onChange:e=>n(e.target.value),onPressEnter:()=>ei.refetch()}),a.jsx(p.default,{allowClear:!0,showSearch:!0,style:{width:220},placeholder:"เลือก Action",value:l,options:et,optionFilterProp:"label",onChange:e=>{P(e),$(1)}}),a.jsx(h.default,{allowClear:!0,style:{width:200},placeholder:"Entity type (เช่น Users, Orders)",value:g,onChange:e=>f(e.target.value)}),a.jsx(F,{allowClear:!0,value:I,onChange:e=>{K(e),$(1)}}),t&&a.jsx(p.default,{allowClear:!0,style:{width:220},placeholder:"เลือกสาขา",loading:er.isLoading,value:U,options:er.data?.map(e=>({label:e.branch_name,value:e.id})),onChange:e=>{S(e||void 0),$(1)}})]})})}),a.jsx(M.Z,{title:"รายการ Audit",children:a.jsx(u.Z,{style:H.tableCard,bodyStyle:{padding:0},children:a.jsx(x.Z,{className:"audit-table",rowKey:"id",dataSource:ea,columns:en,loading:ei.isLoading,scroll:{x:1200},pagination:{current:V,pageSize:W,total:es,showSizeChanger:!0,showTotal:e=>`ทั้งหมด ${e} รายการ`,onChange:(e,t)=>{$(e),Q(t)}},locale:{emptyText:a.jsx(D.Z,{description:(0,a.jsxs)(d.Z,{direction:"vertical",size:4,children:[a.jsx(q,{strong:!0,children:"ยังไม่มีข้อมูลที่ตรงเงื่อนไข"}),a.jsx(q,{type:"secondary",style:{fontSize:12},children:"ลองล้างตัวกรองหรือปรับช่วงเวลา"})]})})}})})})]}),a.jsx(R.Z,{className:"audit-drawer",title:(0,a.jsxs)(d.Z,{align:"center",children:[a.jsx(j.Z,{}),a.jsx("span",{children:"รายละเอียด Audit"})]}),open:!!X,onClose:()=>J(null),width:640,children:X&&(0,a.jsxs)(d.Z,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,a.jsxs)(d.Z,{align:"center",wrap:!0,children:[a.jsx(o.Z,{color:B(X.action_type),style:{fontWeight:700},children:G(X.action_type)}),a.jsx(o.Z,{color:"blue",children:L()(X.created_at).format("DD MMM YYYY HH:mm:ss")}),a.jsx(E.ZP,{size:"small",icon:a.jsx(v.Z,{}),onClick:()=>el(X.id),children:"คัดลอก ID"})]}),(0,a.jsxs)(A.Z,{size:"small",column:1,bordered:!0,children:[(0,a.jsxs)(A.Z.Item,{label:"ผู้ใช้งาน",children:[X.username||"ไม่ระบุ"," ",X.user_id&&(0,a.jsxs)(q,{type:"secondary",children:["(",X.user_id,")"]})]}),a.jsx(A.Z.Item,{label:"สาขา",children:X.branch_id||"ไม่ระบุ"}),(0,a.jsxs)(A.Z.Item,{label:"เป้าหมาย",children:[X.entity_type||"-"," ",X.entity_id&&(0,a.jsxs)(q,{type:"secondary",children:["(",X.entity_id,")"]})]}),a.jsx(A.Z.Item,{label:"เส้นทาง",children:(0,a.jsxs)(d.Z,{size:8,children:[X.method&&a.jsx(o.Z,{color:"cyan",children:X.method}),a.jsx(q,{children:X.path||"-"})]})}),a.jsx(A.Z.Item,{label:"IP / Agent",children:(0,a.jsxs)(d.Z,{direction:"vertical",size:4,children:[a.jsx(q,{code:!0,children:X.ip_address}),X.user_agent&&a.jsx(q,{type:"secondary",style:{fontSize:12},children:X.user_agent})]})}),a.jsx(A.Z.Item,{label:"รายละเอียดเพิ่มเติม",children:X.description||"-"})]}),a.jsx(C.Z,{children:"ค่าที่เปลี่ยนแปลง"}),a.jsx(u.Z,{size:"small",title:"ข้อมูลก่อน",bodyStyle:{padding:12},bordered:!0,children:X.old_values?a.jsx("pre",{style:H.jsonBlock,children:JSON.stringify(X.old_values,null,2)}):a.jsx(q,{type:"secondary",children:"ไม่มีข้อมูลก่อนหน้า"})}),a.jsx(u.Z,{size:"small",title:"ข้อมูลหลัง",bodyStyle:{padding:12},bordered:!0,children:X.new_values?a.jsx("pre",{style:H.jsonBlock,children:JSON.stringify(X.new_values,null,2)}):a.jsx(q,{type:"secondary",children:"ไม่มีข้อมูลใหม่"})})]})})]})}},52647:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var i=r(10326);r(17577);var a=r(2643),s=r(5591),n=r(3861),l=r(21020),o=r(71935),d=r(66874),c=r(52386);function E({title:e,subtitle:t,icon:r,onBack:E,actions:T,style:u}){let{token:_}=s.default.useToken(),h=n.default.useBreakpoint().md?c.H.pagePaddingXDesktop:c.H.pagePaddingXMobile;return i.jsx("div",{style:{padding:`${c.H.pagePaddingY}px ${h}px`,background:_.colorBgContainer,borderBottom:`1px solid ${_.colorBorderSecondary}`,...u},children:(0,i.jsxs)(l.Z,{align:"center",justify:"space-between",wrap:"wrap",gap:12,style:{maxWidth:c.H.pageMaxWidth,margin:"0 auto"},children:[(0,i.jsxs)(l.Z,{align:"center",gap:12,style:{minWidth:0},children:[E&&i.jsx(o.ZP,{type:"text","aria-label":"ย้อนกลับ",icon:i.jsx(a.Z,{}),onClick:E,style:{borderRadius:12,width:44,height:44}}),r&&i.jsx("div",{style:{width:44,height:44,borderRadius:14,display:"grid",placeItems:"center",background:_.colorFillTertiary,color:_.colorText},children:r}),(0,i.jsxs)("div",{style:{minWidth:0},children:[i.jsx(d.default.Title,{level:4,style:{margin:0},children:e}),t&&i.jsx(d.default.Text,{type:"secondary",children:t})]})]}),T&&i.jsx(l.Z,{gap:8,wrap:"wrap",children:T})]})})}},55075:(e,t,r)=>{"use strict";r.d(t,{E:()=>s,M:()=>a});var i=r(48571);let a=i.Ryn({id:i.Z_8(),branch_name:i.Z_8(),branch_code:i.Z_8(),address:i.Z_8().optional().nullable(),phone:i.Z_8().optional().nullable(),tax_id:i.Z_8().optional().nullable(),is_active:i.O72().default(!0),create_date:i.Z_8().or(i.hTZ()).transform(e=>new Date(e))}),s=i.IXX(a)},78407:(e,t,r)=>{"use strict";r.d(t,{x:()=>o});var i=r(40820),a=r(12529),s=r(55075),n=r(40577);let l=i.q.POS.BRANCH,o={getAll:async e=>{let t=(0,a.b)("GET",l),r={};e&&(r.Cookie=e);let i=await fetch(t,{cache:"no-store",credentials:"include",headers:r});if(!i.ok)throw Error("Failed to fetch branches");let o=await i.json();return s.E.parse((0,n.hH)(o))},getById:async(e,t)=>{let r=(0,a.b)("GET",`${l}/${e}`),i={};t&&(i.Cookie=t);let o=await fetch(r,{cache:"no-store",credentials:"include",headers:i});if(!o.ok)throw Error("Failed to fetch branch");let d=await o.json();return s.M.parse((0,n.hH)(d))},create:async(e,t,r)=>{let i=(0,a.b)("POST",l),s={"Content-Type":"application/json"};t&&(s.Cookie=t),r&&(s["X-CSRF-Token"]=r);let o=await fetch(i,{method:"POST",body:JSON.stringify(e),headers:s,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error((0,n.i_)(e,"Failed to create branch"))}return(0,n.hH)(await o.json())},update:async(e,t,r,i)=>{let s=(0,a.b)("PUT",`${l}/${e}`),o={"Content-Type":"application/json"};r&&(o.Cookie=r),i&&(o["X-CSRF-Token"]=i);let d=await fetch(s,{method:"PUT",body:JSON.stringify(t),headers:o,credentials:"include"});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error((0,n.i_)(e,"Failed to update branch"))}return(0,n.hH)(await d.json())},delete:async(e,t,r)=>{let i=(0,a.b)("DELETE",`${l}/${e}`),s={};t&&(s.Cookie=t),r&&(s["X-CSRF-Token"]=r);let o=await fetch(i,{method:"DELETE",headers:s,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error((0,n.i_)(e,"Failed to delete branch"))}}}},65862:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\audit\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[9276,4421,8571,108,8963,1399],()=>r(9974));module.exports=i})();