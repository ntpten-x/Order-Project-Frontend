(()=>{var e={};e.id=8012,e.ids=[8012],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},81542:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.Z,__next_app__:()=>u,originalPathname:()=>c,pages:()=>d,routeModule:()=>h,tree:()=>l}),t(89120),t(2792),t(58522),t(61804),t(7629),t(11930),t(12523);var a=t(23191),n=t(88716),i=t(43315),s=t(95231),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);t.d(r,o);let l=["",{children:["(main)",{children:["branch",{children:["manager",{children:["[...mode]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,89120)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\branch\\manager\\[...mode]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2792)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\branch\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\branch\\manager\\[...mode]\\page.tsx"],c="/(main)/branch/manager/[...mode]/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(main)/branch/manager/[...mode]/page",pathname:"/branch/manager/[...mode]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},66329:(e,r,t)=>{Promise.resolve().then(t.bind(t,14801))},92886:(e,r,t)=>{Promise.resolve().then(t.bind(t,84747))},2643:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o});var a=t(17577);let n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var i=t(74082);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}let o=a.forwardRef((e,r)=>a.createElement(i.Z,s({},e,{ref:r,icon:n})))},14801:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var a=t(10326);t(17577);var n=t(18418),i=t(35047),s=t(67329),o=t(88196);let l=()=>{let e=(0,i.useRouter)(),r=(0,i.usePathname)(),t=[{key:"home",label:"หน้าแรก",icon:a.jsx(s.Z,{}),path:"/"}];return a.jsx(o.Z,{maxWidth:260,items:t.map(t=>({key:t.key,label:t.label,icon:t.icon,onClick:()=>e.push(t.path),active:r===t.path}))})};function d({children:e}){return a.jsx(a.Fragment,{children:(0,a.jsxs)(n.default,{style:{minHeight:"100%",background:"transparent"},children:[a.jsx(n.default.Content,{style:{background:"transparent"},children:e}),a.jsx(l,{})]})})}},84747:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>C});var a=t(10326),n=t(17577),i=t(49909),s=t(43359),o=t(35509),l=t(92121),d=t(71935),c=t(4139),u=t(38106),h=t(63459),p=t(35047),x=t(77626),m=t.n(x);let{Title:g,Text:b}=t(58184).default,f={container:{minHeight:"100vh",background:"#f8f9fc",paddingBottom:40}},j=()=>a.jsx(m(),{id:"d6a7379aac763388",children:".manage-form-card .ant-form-item-label label{font-weight:600;color:#374151}.manage-form-card .ant-input,.manage-form-card .ant-input-number,.manage-form-card .ant-select-selector{-webkit-border-radius:12px!important;-moz-border-radius:12px!important;border-radius:12px!important;padding-top:8px;padding-bottom:8px}"});var y=t(78407),P=t(94001),v=t(33357),k=t(26963),Z=t(76892),w=t(52647);let{TextArea:_}=i.default;function C({params:e}){let r=(0,p.useRouter)(),[t]=s.Z.useForm(),[x,m]=(0,n.useState)(!1),[g,b]=(0,n.useState)(!1),{user:C,loading:E}=(0,P.a)(),{message:T,modal:q}=o.Z.useApp(),F=e.mode[0],O=e.mode[1]||null,S="edit"===F&&!!O;(0,n.useCallback)(async()=>{m(!0);try{let e=await y.x.getById(O);t.setFieldsValue({branch_name:e.branch_name,branch_code:e.branch_code,address:e.address,phone:e.phone,tax_id:e.tax_id,is_active:e.is_active})}catch(e){console.error(e),T.error("ไม่สามารถดึงข้อมูลสาขาได้"),r.push("/branch")}finally{m(!1)}},[O,t,r,T]);let z=async e=>{b(!0);try{let t=await (0,v.P)();S?(await y.x.update(O,e,void 0,t),T.success("อัปเดตสาขาสำเร็จ")):(await y.x.create(e,void 0,t),T.success("สร้างสาขาสำเร็จ")),r.push("/branch")}catch(e){console.error(e),T.error(e.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล")}finally{b(!1)}},R=()=>r.push("/branch");return E||S&&x?a.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f8f9fc"},children:a.jsx(l.Z,{size:"large"})}):(0,a.jsxs)("div",{style:f.container,children:[a.jsx(j,{}),a.jsx(w.Z,{title:S?"แก้ไขสาขา":"เพิ่มสาขา",subtitle:"ข้อมูลสาขาสำหรับระบบ POS",onBack:R,actions:S?a.jsx(d.ZP,{danger:!0,onClick:()=>{O&&q.confirm({title:"ยืนยันการลบสาขา",content:`คุณต้องการลบสาขานี้หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,onOk:async()=>{try{let e=await (0,v.P)();await y.x.delete(O,void 0,e),T.success("ลบสาขาสำเร็จ"),r.push("/branch")}catch{T.error("ไม่สามารถลบสาขาได้")}}})},children:"ลบ"}):void 0}),a.jsx(k.Z,{maxWidth:900,children:a.jsx("div",{className:"manage-form-card",children:a.jsx(Z.Z,{children:(0,a.jsxs)(s.Z,{form:t,layout:"vertical",onFinish:z,requiredMark:!1,autoComplete:"off",initialValues:{is_active:!0},children:[(0,a.jsxs)(c.Z,{gutter:24,children:[a.jsx(u.Z,{xs:24,md:12,children:a.jsx(s.Z.Item,{name:"branch_name",label:"ชื่อสาขา *",rules:[{required:!0,message:"กรุณากรอกชื่อสาขา"}],children:a.jsx(i.default,{size:"large",placeholder:"ระบุชื่อสาขา",maxLength:100})})}),a.jsx(u.Z,{xs:24,md:12,children:a.jsx(s.Z.Item,{name:"branch_code",label:"รหัสสาขา *",rules:[{required:!0,message:"กรุณากรอกรหัสสาขา"},{pattern:/^[A-Za-z0-9]+$/,message:"รหัสสาขาต้องเป็นตัวอักษรภาษาอังกฤษหรือตัวเลข"}],children:a.jsx(i.default,{size:"large",placeholder:"เช่น B001",maxLength:20})})})]}),a.jsx(s.Z.Item,{name:"address",label:"ที่อยู่",children:a.jsx(_,{rows:3,placeholder:"ที่อยู่สาขา",style:{borderRadius:12}})}),(0,a.jsxs)(c.Z,{gutter:24,children:[a.jsx(u.Z,{xs:24,md:12,children:a.jsx(s.Z.Item,{name:"phone",label:"เบอร์โทรศัพท์",children:a.jsx(i.default,{size:"large",placeholder:"02xxxxxxx",maxLength:20})})}),a.jsx(u.Z,{xs:24,md:12,children:a.jsx(s.Z.Item,{name:"tax_id",label:"เลขประจำตัวผู้เสียภาษี (Tax ID)",children:a.jsx(i.default,{size:"large",placeholder:"ระบุเลขผู้เสียภาษี",maxLength:50})})})]}),a.jsx(s.Z.Item,{name:"is_active",label:"สถานะ",valuePropName:"checked",children:a.jsx(h.Z,{checkedChildren:"เปิดใช้งาน",unCheckedChildren:"ปิดปรับปรุง"})}),(0,a.jsxs)("div",{style:{marginTop:32,display:"flex",justifyContent:"flex-end",gap:12},children:[a.jsx(d.ZP,{size:"large",onClick:R,style:{borderRadius:12,minWidth:100},children:"ยกเลิก"}),a.jsx(d.ZP,{type:"primary",htmlType:"submit",loading:g,size:"large",style:{borderRadius:12,minWidth:120,background:"#7c3aed",border:"none"},children:S?"บันทึกการแก้ไข":"สร้างสาขา"})]})]})})})})]})}},88196:(e,r,t)=>{"use strict";t.d(r,{Z:()=>h});var a=t(10326);t(17577);var n=t(58184),i=t(5591),s=t(3861),o=t(56249),l=t(11401),d=t(71935),c=t(83575);let{Text:u}=n.default;function h({items:e,maxWidth:r=440,bottomOffset:t=c.w}){let{token:n}=i.default.useToken(),h=!s.default.useBreakpoint().md,p={position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:`calc(${t}px + env(safe-area-inset-bottom))`,width:"calc(100% - 24px)",maxWidth:r,zIndex:900};return a.jsx("div",{style:p,"aria-label":"Bottom navigation",children:a.jsx(o.Z,{size:"small",variant:"outlined",bodyStyle:{padding:8,display:"grid",gridTemplateColumns:`repeat(${e.length}, minmax(0, 1fr))`,gap:4},style:{borderRadius:h?18:22,borderColor:n.colorBorderSecondary,background:"rgba(255, 255, 255, 0.92)",backdropFilter:"blur(12px)",boxShadow:n.boxShadowSecondary},children:e.map(e=>{let r=!!e.active,t=r?n.colorPrimary:n.colorTextSecondary,i=r?n.colorPrimary:n.colorTextSecondary,s=a.jsx("span",{style:{fontSize:22,lineHeight:1,color:t},children:e.icon}),o=e.badgeDot||(e.badgeCount??0)>0?a.jsx(l.Z,{dot:e.badgeDot,count:e.badgeCount,size:"small",children:s}):s;return(0,a.jsxs)(d.ZP,{type:"text",disabled:e.disabled,"aria-label":e.ariaLabel??e.label,"aria-current":r?"page":void 0,onClick:e.onClick,style:{height:h?64:68,paddingInline:0,borderRadius:16,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4,background:r?n.colorPrimaryBg:"transparent"},children:[o,a.jsx(u,{style:{fontSize:11,fontWeight:r?600:500,color:i,lineHeight:1},children:e.label})]},e.key)})})})}},52647:(e,r,t)=>{"use strict";t.d(r,{Z:()=>u});var a=t(10326);t(17577);var n=t(2643),i=t(5591),s=t(3861),o=t(21020),l=t(71935),d=t(58184),c=t(52386);function u({title:e,subtitle:r,icon:t,onBack:u,actions:h,style:p}){let{token:x}=i.default.useToken(),m=s.default.useBreakpoint().md?c.H.pagePaddingXDesktop:c.H.pagePaddingXMobile;return a.jsx("div",{style:{padding:`${c.H.pagePaddingY}px ${m}px`,background:x.colorBgContainer,borderBottom:`1px solid ${x.colorBorderSecondary}`,...p},children:(0,a.jsxs)(o.Z,{align:"center",justify:"space-between",wrap:"wrap",gap:12,style:{maxWidth:c.H.pageMaxWidth,margin:"0 auto"},children:[(0,a.jsxs)(o.Z,{align:"center",gap:12,style:{minWidth:0},children:[u&&a.jsx(l.ZP,{type:"text","aria-label":"ย้อนกลับ",icon:a.jsx(n.Z,{}),onClick:u,style:{borderRadius:12,width:44,height:44}}),t&&a.jsx("div",{style:{width:44,height:44,borderRadius:14,display:"grid",placeItems:"center",background:x.colorFillTertiary,color:x.colorText},children:t}),(0,a.jsxs)("div",{style:{minWidth:0},children:[a.jsx(d.default.Title,{level:4,style:{margin:0},children:e}),r&&a.jsx(d.default.Text,{type:"secondary",children:r})]})]}),h&&a.jsx(o.Z,{gap:8,wrap:"wrap",children:h})]})})}},55075:(e,r,t)=>{"use strict";t.d(r,{E:()=>i,M:()=>n});var a=t(48571);let n=a.Ryn({id:a.Z_8(),branch_name:a.Z_8(),branch_code:a.Z_8(),address:a.Z_8().optional().nullable(),phone:a.Z_8().optional().nullable(),tax_id:a.Z_8().optional().nullable(),is_active:a.O72().default(!0),create_date:a.Z_8().or(a.hTZ()).transform(e=>new Date(e))}),i=a.IXX(n)},78407:(e,r,t)=>{"use strict";t.d(r,{x:()=>l});var a=t(40820),n=t(12529),i=t(55075),s=t(40577);let o=a.q.POS.BRANCH,l={getAll:async e=>{let r=(0,n.b)("GET",o),t={};e&&(t.Cookie=e);let a=await fetch(r,{cache:"no-store",credentials:"include",headers:t});if(!a.ok)throw Error("Failed to fetch branches");let l=await a.json();return i.E.parse((0,s.hH)(l))},getById:async(e,r)=>{let t=(0,n.b)("GET",`${o}/${e}`),a={};r&&(a.Cookie=r);let l=await fetch(t,{cache:"no-store",credentials:"include",headers:a});if(!l.ok)throw Error("Failed to fetch branch");let d=await l.json();return i.M.parse((0,s.hH)(d))},create:async(e,r,t)=>{let a=(0,n.b)("POST",o),i={"Content-Type":"application/json"};r&&(i.Cookie=r),t&&(i["X-CSRF-Token"]=t);let l=await fetch(a,{method:"POST",body:JSON.stringify(e),headers:i,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,s.i_)(e,"Failed to create branch"))}return(0,s.hH)(await l.json())},update:async(e,r,t,a)=>{let i=(0,n.b)("PUT",`${o}/${e}`),l={"Content-Type":"application/json"};t&&(l.Cookie=t),a&&(l["X-CSRF-Token"]=a);let d=await fetch(i,{method:"PUT",body:JSON.stringify(r),headers:l,credentials:"include"});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error((0,s.i_)(e,"Failed to update branch"))}return(0,s.hH)(await d.json())},delete:async(e,r,t)=>{let a=(0,n.b)("DELETE",`${o}/${e}`),i={};r&&(i.Cookie=r),t&&(i["X-CSRF-Token"]=t);let l=await fetch(a,{method:"DELETE",headers:i,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,s.i_)(e,"Failed to delete branch"))}}}},2792:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\branch\layout.tsx#default`)},89120:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\branch\manager\[...mode]\page.tsx#default`)}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[9276,8491,8571,8963,1399],()=>t(81542));module.exports=a})();