(()=>{var e={};e.id=8012,e.ids=[8012],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},81542:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.Z,__next_app__:()=>u,originalPathname:()=>d,pages:()=>c,routeModule:()=>h,tree:()=>l}),r(89120),r(58522),r(61804),r(7629),r(11930),r(12523);var n=r(23191),s=r(88716),a=r(43315),i=r(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let l=["",{children:["(main)",{children:["branch",{children:["manager",{children:["[...mode]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,89120)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\branch\\manager\\[...mode]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],c=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\branch\\manager\\[...mode]\\page.tsx"],d="/(main)/branch/manager/[...mode]/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/branch/manager/[...mode]/page",pathname:"/branch/manager/[...mode]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},92886:(e,t,r)=>{Promise.resolve().then(r.bind(r,84747))},2643:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var a=r(74082);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let o=n.forwardRef((e,t)=>n.createElement(a.Z,i({},e,{ref:t,icon:s})))},8472:()=>{},51596:(e,t,r)=>{"use strict";r(8472);var n=r(17577),s=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(n),a="undefined"!=typeof process&&process.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,r=t.name,n=void 0===r?"stylesheet":r,s=t.optimizeForSpeed,o=void 0===s?a:s;l(i(n),"`name` must be a string"),this._name=n,this._deletedRulePlaceholder="#"+n+"-deleted-rule____{}",l("boolean"==typeof o,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=o,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){l("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),l(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;l(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){return l(i(e),"`insertRule` accepts only strings"),"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++},t.replaceRule=function(e,t){this._optimizeForSpeed;var r=this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(n){a||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}return e},t.deleteRule=function(e){this._serverSheet.deleteRule(e)},t.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},t.cssRules=function(){return this._serverSheet.cssRules},t.makeStyleTag=function(e,t,r){t&&l(i(t),"makeStyleTag accepts only strings as second parameter");var n=document.createElement("style");this._nonce&&n.setAttribute("nonce",this._nonce),n.type="text/css",n.setAttribute("data-"+e,""),t&&n.appendChild(document.createTextNode(t));var s=document.head||document.getElementsByTagName("head")[0];return r?s.insertBefore(n,r):s.appendChild(n),n},function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function l(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},d={};function u(e,t){if(!t)return"jsx-"+e;var r=String(t),n=e+r;return d[n]||(d[n]="jsx-"+c(e+"-"+r)),d[n]}function h(e,t){var r=e+(t=t.replace(/\/style/gi,"\\/style"));return d[r]||(d[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),d[r]}var p=n.createContext(null);p.displayName="StyleSheetContext",s.default.useInsertionEffect||s.default.useLayoutEffect;var m=void 0;function f(e){var t=m||n.useContext(p);return t&&t.add(e),null}f.dynamic=function(e){return e.map(function(e){return u(e[0],e[1])}).join(" ")},t.style=f},77626:(e,t,r)=>{"use strict";e.exports=r(51596).style},84747:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>R});var n=r(10326),s=r(17577),a=r(49909),i=r(43359),o=r(35509),l=r(92121),c=r(4139),d=r(38106),u=r(63459),h=r(71935),p=r(35047),m=r(77626),f=r.n(m),x=r(58184),g=r(2643),b=r(63191);let{Title:y,Text:j}=x.default,v={container:{minHeight:"100vh",background:"#f8f9fc",paddingBottom:40},header:{background:"#fff",padding:"20px 24px",borderBottom:"1px solid #f0f0f0",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:10,boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},formCard:{maxWidth:800,margin:"32px auto",padding:"32px",background:"#fff",borderRadius:20,boxShadow:"0 4px 20px rgba(0,0,0,0.05)"}},_=()=>n.jsx(f(),{id:"d6a7379aac763388",children:".manage-form-card .ant-form-item-label label{font-weight:600;color:#374151}.manage-form-card .ant-input,.manage-form-card .ant-input-number,.manage-form-card .ant-select-selector{-webkit-border-radius:12px!important;-moz-border-radius:12px!important;border-radius:12px!important;padding-top:8px;padding-bottom:8px}"}),S=({isEdit:e,onBack:t,onDelete:r})=>(0,n.jsxs)("div",{style:v.header,children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[n.jsx(h.ZP,{icon:n.jsx(g.Z,{}),onClick:t,style:{borderRadius:"50%",width:40,height:40,display:"flex",alignItems:"center",justifyContent:"center",border:"none",background:"#f3f4f6"}}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx(y,{level:4,style:{margin:0},children:e?"แก้ไขข้อมูลสาขา":"เพิ่มสาขาใหม่"}),e&&n.jsx("div",{style:{background:"#f3f4f6",padding:"2px 8px",borderRadius:6,fontSize:12,color:"#6b7280",fontWeight:600},children:"EDIT MODE"})]}),n.jsx(j,{type:"secondary",style:{fontSize:13},children:e?"ปรับปรุงข้อมูลสาขาที่มีอยู่":"กรอกข้อมูลเพื่อสร้างสาขาใหม่"})]})]}),e&&r&&n.jsx(h.ZP,{danger:!0,icon:n.jsx(b.Z,{}),onClick:r,style:{borderRadius:12,height:40},children:"ลบสาขา"})]});var P=r(78407),k=r(94001),w=r(33357);let{TextArea:C}=a.default;function R({params:e}){let t=(0,p.useRouter)(),[r]=i.Z.useForm(),[m,f]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),{user:b,loading:y}=(0,k.a)(),{message:j,modal:R}=o.Z.useApp(),E=e.mode[0],Z=e.mode[1]||null,F="edit"===E&&!!Z;(0,s.useCallback)(async()=>{f(!0);try{let e=await P.x.getById(Z);r.setFieldsValue({branch_name:e.branch_name,branch_code:e.branch_code,address:e.address,phone:e.phone,tax_id:e.tax_id,is_active:e.is_active})}catch(e){console.error(e),j.error("ไม่สามารถดึงข้อมูลสาขาได้"),t.push("/branch")}finally{f(!1)}},[Z,r,t,j]);let q=async e=>{g(!0);try{let r=await (0,w.P)();F?(await P.x.update(Z,e,void 0,r),j.success("อัปเดตสาขาสำเร็จ")):(await P.x.create(e,void 0,r),j.success("สร้างสาขาสำเร็จ")),t.push("/branch")}catch(e){console.error(e),j.error(e.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล")}finally{g(!1)}},T=()=>t.push("/branch");return y||F&&m?n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f8f9fc"},children:n.jsx(l.Z,{size:"large"})}):(0,n.jsxs)("div",{style:v.container,children:[n.jsx(_,{}),n.jsx(S,{isEdit:F,onBack:T,onDelete:F?()=>{Z&&R.confirm({title:"ยืนยันการลบสาขา",content:`คุณต้องการลบสาขานี้หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,onOk:async()=>{try{let e=await (0,w.P)();await P.x.delete(Z,void 0,e),j.success("ลบสาขาสำเร็จ"),t.push("/branch")}catch{j.error("ไม่สามารถลบสาขาได้")}}})}:void 0}),n.jsx("div",{className:"manage-form-card",style:v.formCard,children:(0,n.jsxs)(i.Z,{form:r,layout:"vertical",onFinish:q,requiredMark:!1,autoComplete:"off",initialValues:{is_active:!0},children:[(0,n.jsxs)(c.Z,{gutter:24,children:[n.jsx(d.Z,{xs:24,md:12,children:n.jsx(i.Z.Item,{name:"branch_name",label:"ชื่อสาขา *",rules:[{required:!0,message:"กรุณากรอกชื่อสาขา"}],children:n.jsx(a.default,{size:"large",placeholder:"ระบุชื่อสาขา",maxLength:100})})}),n.jsx(d.Z,{xs:24,md:12,children:n.jsx(i.Z.Item,{name:"branch_code",label:"รหัสสาขา *",rules:[{required:!0,message:"กรุณากรอกรหัสสาขา"},{pattern:/^[A-Za-z0-9]+$/,message:"รหัสสาขาต้องเป็นตัวอักษรภาษาอังกฤษหรือตัวเลข"}],children:n.jsx(a.default,{size:"large",placeholder:"เช่น B001",maxLength:20})})})]}),n.jsx(i.Z.Item,{name:"address",label:"ที่อยู่",children:n.jsx(C,{rows:3,placeholder:"ที่อยู่สาขา",style:{borderRadius:12}})}),(0,n.jsxs)(c.Z,{gutter:24,children:[n.jsx(d.Z,{xs:24,md:12,children:n.jsx(i.Z.Item,{name:"phone",label:"เบอร์โทรศัพท์",children:n.jsx(a.default,{size:"large",placeholder:"02xxxxxxx",maxLength:20})})}),n.jsx(d.Z,{xs:24,md:12,children:n.jsx(i.Z.Item,{name:"tax_id",label:"เลขประจำตัวผู้เสียภาษี (Tax ID)",children:n.jsx(a.default,{size:"large",placeholder:"ระบุเลขผู้เสียภาษี",maxLength:50})})})]}),n.jsx(i.Z.Item,{name:"is_active",label:"สถานะ",valuePropName:"checked",children:n.jsx(u.Z,{checkedChildren:"เปิดใช้งาน",unCheckedChildren:"ปิดปรับปรุง"})}),(0,n.jsxs)("div",{style:{marginTop:32,display:"flex",justifyContent:"flex-end",gap:12},children:[n.jsx(h.ZP,{size:"large",onClick:T,style:{borderRadius:12,minWidth:100},children:"ยกเลิก"}),n.jsx(h.ZP,{type:"primary",htmlType:"submit",loading:x,size:"large",style:{borderRadius:12,minWidth:120,background:"#7c3aed",border:"none"},children:F?"บันทึกการแก้ไข":"สร้างสาขา"})]})]})})]})}},55075:(e,t,r)=>{"use strict";r.d(t,{E:()=>a,M:()=>s});var n=r(48571);let s=n.Ryn({id:n.Z_8(),branch_name:n.Z_8(),branch_code:n.Z_8(),address:n.Z_8().optional().nullable(),phone:n.Z_8().optional().nullable(),tax_id:n.Z_8().optional().nullable(),is_active:n.O72().default(!0),create_date:n.Z_8().or(n.hTZ()).transform(e=>new Date(e))}),a=n.IXX(s)},78407:(e,t,r)=>{"use strict";r.d(t,{x:()=>o});var n=r(40820),s=r(12529),a=r(55075);let i=n.q.POS.BRANCH,o={getAll:async e=>{let t=(0,s.b)("GET",i),r={};e&&(r.Cookie=e);let n=await fetch(t,{cache:"no-store",credentials:"include",headers:r});if(!n.ok)throw Error("Failed to fetch branches");let o=await n.json();return a.E.parse(o)},getById:async(e,t)=>{let r=(0,s.b)("GET",`${i}/${e}`),n={};t&&(n.Cookie=t);let o=await fetch(r,{cache:"no-store",credentials:"include",headers:n});if(!o.ok)throw Error("Failed to fetch branch");let l=await o.json();return a.M.parse(l)},create:async(e,t,r)=>{let n=(0,s.b)("POST",i),a={"Content-Type":"application/json"};t&&(a.Cookie=t),r&&(a["X-CSRF-Token"]=r);let o=await fetch(n,{method:"POST",body:JSON.stringify(e),headers:a,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to create branch")}return o.json()},update:async(e,t,r,n)=>{let a=(0,s.b)("PUT",`${i}/${e}`),o={"Content-Type":"application/json"};r&&(o.Cookie=r),n&&(o["X-CSRF-Token"]=n);let l=await fetch(a,{method:"PUT",body:JSON.stringify(t),headers:o,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to update branch")}return l.json()},delete:async(e,t,r)=>{let n=(0,s.b)("DELETE",`${i}/${e}`),a={};t&&(a.Cookie=t),r&&(a["X-CSRF-Token"]=r);let o=await fetch(n,{method:"DELETE",headers:a,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to delete branch")}}}},89120:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\branch\manager\[...mode]\page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[9276,8674,8571,9042,1399],()=>r(81542));module.exports=n})();