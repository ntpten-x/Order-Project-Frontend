(()=>{var e={};e.id=9386,e.ids=[9386],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},20054:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.Z,__next_app__:()=>u,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>l}),r(92349),r(29329),r(58522),r(61804),r(7629),r(11930),r(12523);var a=r(23191),s=r(88716),o=r(43315),n=r(95231),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);r.d(t,i);let l=["",{children:["(main)",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,92349)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\users\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,29329)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\users\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58522)),"E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,61804)),"E:\\Project\\Order-Project-Frontend\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"E:\\Project\\Order-Project-Frontend\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11930)),"E:\\Project\\Order-Project-Frontend\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"E:\\Project\\Order-Project-Frontend\\src\\app\\not-found.tsx"]}],d=["E:\\Project\\Order-Project-Frontend\\src\\app\\(main)\\users\\page.tsx"],c="/(main)/users/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/(main)/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},73849:(e,t,r)=>{Promise.resolve().then(r.bind(r,95274))},8293:(e,t,r)=>{Promise.resolve().then(r.bind(r,64261))},2643:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var o=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let i=a.forwardRef((e,t)=>a.createElement(o.Z,n({},e,{ref:t,icon:s})))},4674:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(17577);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"};var o=r(74082);function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let i=a.forwardRef((e,t)=>a.createElement(o.Z,n({},e,{ref:t,icon:s})))},95274:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(10326);r(17577);var s=r(18418),o=r(35047),n=r(67329),i=r(88196);let l=()=>{let e=(0,o.useRouter)(),t=(0,o.usePathname)(),r=[{key:"home",label:"หน้าแรก",icon:a.jsx(n.Z,{}),path:"/"}];return a.jsx(i.Z,{maxWidth:260,items:r.map(r=>({key:r.key,label:r.label,icon:r.icon,onClick:()=>e.push(r.path),active:t===r.path}))})};function d({children:e}){return a.jsx(a.Fragment,{children:(0,a.jsxs)(s.default,{style:{minHeight:"100%",background:"transparent"},children:[a.jsx(s.default.Content,{style:{background:"transparent"},children:e}),a.jsx(l,{})]})})}},64261:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>$});var a=r(10326),s=r(17577),o=r(66874),n=r(3861),i=r(75958),l=r(46752),d=r(71935),c=r(49909),u=r(97930);let p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"};var h=r(74082);function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let m=s.forwardRef((e,t)=>s.createElement(h.Z,g({},e,{ref:t,icon:p})));var x=r(24395),f=r(80490);let b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"};function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let j=s.forwardRef((e,t)=>s.createElement(h.Z,y({},e,{ref:t,icon:b})));var v=r(4674),w=r(22817),F=r(46024),k=r(63191),_=r(35047),C=r(80440),E=r(59746),S=r(37938),P=r(94001),D=r(92121);r(81456);var Z=r(63814);r(83179);var B=r(26963),O=r(76892),z=r(52647),T=r(56368);let{Text:R}=o.default,{useBreakpoint:A}=n.default,q={Admin:{color:"#D97706",bg:"#FFFBEB",emoji:"\uD83D\uDC51"},Manager:{color:"#DB2777",bg:"#FDF2F8",emoji:"⭐"},Cashier:{color:"#2563EB",bg:"#EFF6FF",emoji:"\uD83D\uDCB3"},Chef:{color:"#059669",bg:"#ECFDF5",emoji:"\uD83D\uDC68‍\uD83C\uDF73"},Waiter:{color:"#7C3AED",bg:"#F5F3FF",emoji:"\uD83C\uDF7D️"}},I={color:"#64748B",bg:"#F1F5F9",emoji:"\uD83D\uDC64"},M=`
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes pulse-dot {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(0.8); }
  }

  .users-page-card {
    animation: fadeInUp 0.35s cubic-bezier(0.4, 0, 0.2, 1) both;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  }
  .users-page-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 32px rgba(15,23,42,0.10) !important;
  }
  .users-page-card:active {
    transform: scale(0.98);
  }

  .users-search-input .ant-input {
    border: none !important;
    box-shadow: none !important;
    background: transparent !important;
  }
  .users-search-input .ant-input-affix-wrapper {
    border: none !important;
    box-shadow: none !important;
    background: transparent !important;
  }

  .users-refresh-btn {
    transition: all 0.3s ease;
  }
  .users-refresh-btn:hover {
    background: rgba(59,130,246,0.08) !important;
  }

  .users-action-btn {
    transition: all 0.2s ease;
  }
  .users-action-btn:hover {
    transform: scale(1.05);
  }

  @media (hover: none) and (pointer: coarse) {
    .users-page-card:active {
      transform: scale(0.97);
      opacity: 0.9;
    }
  }
`;function $(){let e=(0,_.useRouter)(),t=A(),r=!t.md,[o,n]=(0,s.useState)([]),{socket:p}=(0,C.s)(),{execute:h}=(0,E.J)(),{showLoading:g,hideLoading:b}=(0,S.x)(),{user:y,loading:$}=(0,P.a)(),[W,U]=(0,s.useState)(""),[H,L]=(0,s.useState)(""),[X,N]=(0,s.useState)(!1),G=(0,T.c)(H,300),J=(0,s.useCallback)(async()=>{h(async()=>{n(await Z.W.getAllUsers())},"กำลังโหลดข้อมูลผู้ใช้...")},[h]),Y=(0,s.useMemo)(()=>{if(!G)return o;let e=G.toLowerCase();return o.filter(t=>(t.name||"").toLowerCase().includes(e)||t.username.toLowerCase().includes(e)||(t.roles?.display_name||t.roles?.roles_name||"").toLowerCase().includes(e)||(t.branch?.branch_name||"").toLowerCase().includes(e))},[o,G]),V=(0,s.useMemo)(()=>{let e=o.filter(e=>e.is_active).length,t=o.filter(e=>e.roles?.roles_name==="Admin").length;return{total:o.length,active:e,admin:t}},[o]),Q=()=>{g(),e.push("/users/manage/add"),setTimeout(()=>b(),1e3)},K=t=>{e.push(`/users/manage/edit/${t.id}`)},ee=e=>{i.Z.confirm({title:"ยืนยันการลบผู้ใช้",content:`คุณต้องการลบผู้ใช้ "${e.name||e.username}" หรือไม่?`,okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,onOk:async()=>{await h(async()=>{await Z.W.deleteUser(e.id,void 0,W),l.ZP.success(`ลบผู้ใช้ "${e.name||e.username}" สำเร็จ`)},"กำลังลบผู้ใช้งาน...")}})},et=e=>{let t=new Date,r=new Date(e),a=Math.floor((t.getTime()-r.getTime())/6e4);if(a<1)return"เมื่อกี้";if(a<60)return`${a} นาทีที่แล้ว`;let s=Math.floor(a/60);if(s<24)return`${s} ชม.ที่แล้ว`;let o=Math.floor(s/24);return o<30?`${o} วันที่แล้ว`:r.toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"2-digit"})};if($||!y||!["Admin","Manager"].includes(y.role))return a.jsx("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#F8FAFC"},children:a.jsx(D.Z,{size:"large"})});let er=0===o.length;return(0,a.jsxs)("div",{style:{minHeight:"100vh",background:"#F8FAFC",paddingBottom:100},children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:M}}),a.jsx(z.Z,{title:"จัดการผู้ใช้",subtitle:`ทั้งหมด ${o.length} คน`,icon:a.jsx(m,{style:{fontSize:20}}),actions:(0,a.jsxs)("div",{style:{display:"flex",gap:8},children:[a.jsx("button",{className:"users-refresh-btn",onClick:()=>N(!X),style:{width:40,height:40,borderRadius:12,border:"1px solid #E2E8F0",background:"#fff",display:"grid",placeItems:"center",cursor:"pointer",color:X?"#3B82F6":"#64748B"},children:a.jsx(x.Z,{style:{fontSize:18}})}),a.jsx("button",{className:"users-refresh-btn",onClick:J,style:{width:40,height:40,borderRadius:12,border:"1px solid #E2E8F0",background:"#fff",display:"grid",placeItems:"center",cursor:"pointer",color:"#64748B"},children:a.jsx(f.Z,{style:{fontSize:18}})}),a.jsx(d.ZP,{type:"primary",icon:a.jsx(j,{}),onClick:Q,style:{height:40,borderRadius:12,fontWeight:600,background:"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)",border:"none",boxShadow:"0 4px 12px rgba(59,130,246,0.25)"},children:!r&&"เพิ่มผู้ใช้"})]})}),X&&a.jsx("div",{style:{maxWidth:1200,margin:"0 auto",padding:r?"12px 16px 0":"16px 24px 0"},children:a.jsx("div",{className:"users-search-input",style:{background:"#fff",borderRadius:14,border:"1px solid #E2E8F0",boxShadow:"0 2px 8px rgba(15,23,42,0.04)",overflow:"hidden"},children:a.jsx(c.default,{prefix:a.jsx(x.Z,{style:{color:"#94A3B8",fontSize:16}}),placeholder:"ค้นหาผู้ใช้ตามชื่อ, username, บทบาท หรือสาขา...",value:H,onChange:e=>L(e.target.value),allowClear:!0,style:{padding:"12px 16px",fontSize:15,border:"none",background:"transparent"}})})}),(0,a.jsxs)(B.Z,{children:[a.jsx("div",{style:{display:"flex",gap:10,marginTop:16,marginBottom:20,overflowX:"auto",WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none",paddingBottom:4},children:[{label:"ทั้งหมด",count:V.total,color:"#3B82F6",bg:"#EFF6FF",emoji:"\uD83D\uDC65"},{label:"ใช้งาน",count:V.active,color:"#10B981",bg:"#ECFDF5",emoji:"✅"},{label:"แอดมิน",count:V.admin,color:"#D97706",bg:"#FFFBEB",emoji:"\uD83D\uDC51"}].map(e=>(0,a.jsxs)("div",{style:{flex:"1 0 0",minWidth:100,background:e.bg,borderRadius:14,padding:r?"12px 10px":"14px 16px",textAlign:"center",border:`1px solid ${e.color}15`,boxShadow:"0 2px 8px rgba(15,23,42,0.04)"},children:[a.jsx("div",{style:{fontSize:r?18:22,marginBottom:2},children:e.emoji}),a.jsx("div",{style:{fontSize:r?20:24,fontWeight:800,color:e.color,lineHeight:1.2},children:e.count}),a.jsx("div",{style:{fontSize:11,color:"#64748B",fontWeight:600,marginTop:2},children:e.label})]},e.label))}),a.jsx(O.Z,{children:er?a.jsx("div",{style:{padding:20},children:[1,2,3].map(e=>a.jsx("div",{style:{background:"#fff",borderRadius:16,padding:20,marginBottom:12,border:"1px solid #F1F5F9"},children:a.jsx(u.Z,{active:!0,avatar:!0,paragraph:{rows:2}})},e))}):0===Y.length?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px"},children:[a.jsx("div",{style:{fontSize:56,marginBottom:16,opacity:.7},children:"\uD83D\uDC64"}),a.jsx(R,{strong:!0,style:{fontSize:17,display:"block",color:"#1E293B",marginBottom:6},children:H?"ไม่พบผู้ใช้ที่ค้นหา":"ยังไม่มีผู้ใช้ในระบบ"}),a.jsx(R,{style:{color:"#94A3B8",fontSize:14},children:H?"ลองค้นหาด้วยคำอื่น":'กดปุ่ม "เพิ่มผู้ใช้" เพื่อเริ่มต้น'}),!H&&a.jsx("div",{style:{marginTop:20},children:a.jsx(d.ZP,{type:"primary",icon:a.jsx(j,{}),onClick:Q,style:{borderRadius:12,fontWeight:600,height:44,background:"linear-gradient(135deg, #3B82F6 0%, #2563EB 100%)",border:"none"},children:"เพิ่มผู้ใช้คนแรก"})})]}):a.jsx("div",{style:{display:"grid",gridTemplateColumns:r?"1fr":t.lg?"repeat(3, 1fr)":"repeat(2, 1fr)",gap:12},children:Y.map((e,t)=>{let r=e.roles?.roles_name||"",s=q[r]||I,o=e.name||e.username,n=e.is_active||!1;return(0,a.jsxs)("div",{className:"users-page-card",style:{background:"#fff",borderRadius:18,border:`1px solid ${n?"#D1FAE520":"#E2E8F0"}`,boxShadow:"0 2px 12px rgba(15,23,42,0.04)",overflow:"hidden",animationDelay:`${.04*t}s`},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"16px 16px 12px"},children:[(0,a.jsxs)("div",{style:{position:"relative",flexShrink:0},children:[a.jsx("div",{style:{width:48,height:48,borderRadius:16,background:s.bg,display:"grid",placeItems:"center",fontSize:22,border:`2px solid ${s.color}30`},children:s.emoji}),a.jsx("div",{style:{position:"absolute",bottom:-2,right:-2,width:14,height:14,borderRadius:"50%",background:n?"#10B981":"#CBD5E1",border:"2.5px solid #fff",boxShadow:n?"0 0 0 3px rgba(16,185,129,0.2)":"none"},className:n?"users-status-dot":""})]}),(0,a.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[a.jsx(R,{strong:!0,style:{fontSize:15,color:"#1E293B",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o}),a.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"2px 8px",borderRadius:20,background:s.bg,color:s.color,fontSize:11,fontWeight:700,whiteSpace:"nowrap",flexShrink:0},children:e.roles?.display_name||r||"N/A"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:[(0,a.jsxs)(R,{style:{fontSize:12,color:"#94A3B8"},children:["@",e.username]}),e.branch&&(0,a.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:3,padding:"1px 7px",borderRadius:8,background:"#F0F9FF",color:"#0369A1",fontSize:11,fontWeight:600},children:[a.jsx(v.Z,{style:{fontSize:10}}),e.branch.branch_name]})]})]}),a.jsx("span",{style:{padding:"4px 10px",borderRadius:20,background:n?"#ECFDF5":"#F1F5F9",color:n?"#059669":"#94A3B8",fontSize:11,fontWeight:700,whiteSpace:"nowrap",flexShrink:0},children:n?"\uD83D\uDFE2 ออนไลน์":"⚪ ออฟไลน์"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",background:"#FAFBFC",borderTop:"1px solid #F1F5F9"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,color:"#94A3B8",fontSize:12},children:[(0,a.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:4,whiteSpace:"nowrap"},children:[a.jsx(w.Z,{style:{fontSize:12}}),e.last_login_at?et(e.last_login_at):"ยังไม่เคยเข้า"]}),void 0!==e.is_use&&a.jsx("span",{style:{display:"inline-flex",alignItems:"center",gap:3,padding:"1px 7px",borderRadius:8,background:e.is_use?"#ECFDF5":"#FEF2F2",color:e.is_use?"#059669":"#DC2626",fontSize:11,fontWeight:600,whiteSpace:"nowrap"},children:e.is_use?"✓ ใช้งานได้":"✕ ระงับ"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:6},children:[a.jsx("button",{className:"users-action-btn",onClick:t=>{t.stopPropagation(),K(e)},style:{width:34,height:34,borderRadius:10,border:"1px solid #E2E8F0",background:"#fff",display:"grid",placeItems:"center",cursor:"pointer",color:"#3B82F6"},"aria-label":`แก้ไข ${o}`,children:a.jsx(F.Z,{style:{fontSize:14}})}),a.jsx("button",{className:"users-action-btn",onClick:t=>{t.stopPropagation(),ee(e)},style:{width:34,height:34,borderRadius:10,border:"1px solid #FEE2E2",background:"#FEF2F2",display:"grid",placeItems:"center",cursor:"pointer",color:"#EF4444"},"aria-label":`ลบ ${o}`,children:a.jsx(k.Z,{style:{fontSize:14}})})]})]})]},e.id)})})})]})]})}},88196:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var a=r(10326);r(17577);var s=r(66874),o=r(5591),n=r(3861),i=r(56249),l=r(11401),d=r(71935),c=r(83575);let{Text:u}=s.default;function p({items:e,maxWidth:t=440,bottomOffset:r=c.w}){let{token:s}=o.default.useToken(),p=!n.default.useBreakpoint().md,h={position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:`calc(${r}px + env(safe-area-inset-bottom))`,width:"calc(100% - 24px)",maxWidth:t,zIndex:900};return a.jsx("div",{style:h,"aria-label":"Bottom navigation",children:a.jsx(i.Z,{size:"small",variant:"outlined",bodyStyle:{padding:8,display:"grid",gridTemplateColumns:`repeat(${e.length}, minmax(0, 1fr))`,gap:4},style:{borderRadius:p?18:22,borderColor:s.colorBorderSecondary,background:"rgba(255, 255, 255, 0.92)",backdropFilter:"blur(12px)",boxShadow:s.boxShadowSecondary},children:e.map(e=>{let t=!!e.active,r=t?s.colorPrimary:s.colorTextSecondary,o=t?s.colorPrimary:s.colorTextSecondary,n=a.jsx("span",{style:{fontSize:22,lineHeight:1,color:r},children:e.icon}),i=e.badgeDot||(e.badgeCount??0)>0?a.jsx(l.Z,{dot:e.badgeDot,count:e.badgeCount,size:"small",children:n}):n;return(0,a.jsxs)(d.ZP,{type:"text",disabled:e.disabled,"aria-label":e.ariaLabel??e.label,"aria-current":t?"page":void 0,onClick:e.onClick,style:{height:p?64:68,paddingInline:0,borderRadius:16,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:4,background:t?s.colorPrimaryBg:"transparent"},children:[i,a.jsx(u,{style:{fontSize:11,fontWeight:t?600:500,color:o,lineHeight:1},children:e.label})]},e.key)})})})}},52647:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var a=r(10326);r(17577);var s=r(2643),o=r(5591),n=r(3861),i=r(21020),l=r(71935),d=r(66874),c=r(52386);function u({title:e,subtitle:t,icon:r,onBack:u,actions:p,style:h}){let{token:g}=o.default.useToken(),m=n.default.useBreakpoint().md?c.H.pagePaddingXDesktop:c.H.pagePaddingXMobile;return a.jsx("div",{style:{padding:`${c.H.pagePaddingY}px ${m}px`,background:g.colorBgContainer,borderBottom:`1px solid ${g.colorBorderSecondary}`,...h},children:(0,a.jsxs)(i.Z,{align:"center",justify:"space-between",wrap:"wrap",gap:12,style:{maxWidth:c.H.pageMaxWidth,margin:"0 auto"},children:[(0,a.jsxs)(i.Z,{align:"center",gap:12,style:{minWidth:0},children:[u&&a.jsx(l.ZP,{type:"text","aria-label":"ย้อนกลับ",icon:a.jsx(s.Z,{}),onClick:u,style:{borderRadius:12,width:44,height:44}}),r&&a.jsx("div",{style:{width:44,height:44,borderRadius:14,display:"grid",placeItems:"center",background:g.colorFillTertiary,color:g.colorText},children:r}),(0,a.jsxs)("div",{style:{minWidth:0},children:[a.jsx(d.default.Title,{level:4,style:{margin:0},children:e}),t&&a.jsx(d.default.Text,{type:"secondary",children:t})]})]}),p&&a.jsx(i.Z,{gap:8,wrap:"wrap",children:p})]})})}},59746:(e,t,r)=>{"use strict";r.d(t,{J:()=>n});var a=r(17577),s=r(75958),o=r(37938);let n=()=>{let{showLoading:e,hideLoading:t}=(0,o.x)();return{execute:(0,a.useCallback)(async(r,a="กำลังดำเนินการ...",o,n="เกิดข้อผิดพลาด")=>{try{return e(a,"async"),await r()}catch(t){console.error("Async action error:",t);let e=n;"string"==typeof t?e=t:t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&(e=t.response?.data?.message??t.message??(()=>{try{return JSON.stringify(t)}catch{return"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ (Unknown Error)"}})()),s.Z.error({title:"ข้อผิดพลาด",content:e});return}finally{t("async")}},[e,t])}}},80440:(e,t,r)=>{"use strict";r.d(t,{s:()=>o});var a=r(17577),s=r(19211);let o=()=>(0,a.useContext)(s.J)},55075:(e,t,r)=>{"use strict";r.d(t,{E:()=>o,M:()=>s});var a=r(48571);let s=a.Ryn({id:a.Z_8(),branch_name:a.Z_8(),branch_code:a.Z_8(),address:a.Z_8().optional().nullable(),phone:a.Z_8().optional().nullable(),tax_id:a.Z_8().optional().nullable(),is_active:a.O72().default(!0),create_date:a.Z_8().or(a.hTZ()).transform(e=>new Date(e))}),o=a.IXX(s)},63814:(e,t,r)=>{"use strict";r.d(t,{W:()=>u});var a=r(12529),s=r(48571);let o=s.Ryn({id:s.Z_8(),roles_name:s.Z_8(),display_name:s.Z_8()});var n=r(55075);let i=s.Ryn({id:s.Z_8(),username:s.Z_8(),name:s.Z_8().optional().nullable(),roles_id:s.Z_8().optional().nullable(),roles:o.optional().nullable(),branch_id:s.Z_8().optional().nullable(),branch:n.M.optional().nullable(),create_date:s.Z_8().or(s.hTZ()).transform(e=>new Date(e)).optional(),last_login_at:s.Z_8().or(s.hTZ()).transform(e=>new Date(e)).optional().nullable(),is_use:s.O72().optional().default(!0),is_active:s.O72().optional().default(!1)}),l=s.IXX(i);var d=r(40577);let c="/users",u={getAllUsers:async(e,t)=>{let r=(0,a.b)("GET",c);t&&(r+=`?${t.toString()}`);let s={};e&&(s.Cookie=e);let o=await fetch(r,{headers:s,credentials:"include",cache:"no-store"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.errors?.map(e=>e.message).join(", ")||(0,d.i_)(e,"ไม่สามารถดึงข้อมูลผู้ใช้ได้"))}let n=await o.json();return l.parse((0,d.hH)(n))},getUserById:async(e,t)=>{let r=(0,a.b)("GET",`${c}/${e}`),s={};t&&(s.Cookie=t);let o=await fetch(r,{headers:s,credentials:"include",cache:"no-store"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.errors?.map(e=>e.message).join(", ")||(0,d.i_)(e,"ไม่สามารถดึงข้อมูลผู้ใช้ได้"))}let n=await o.json();return i.parse((0,d.hH)(n))},createUser:async(e,t,r)=>{let s=(0,a.b)("POST",c),o={"Content-Type":"application/json"};t&&(o.Cookie=t),r&&(o["X-CSRF-Token"]=r);let n=await fetch(s,{method:"POST",headers:o,body:JSON.stringify(e),credentials:"include"});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.errors?.map(e=>e.message).join(", ")||(0,d.i_)(e,"ไม่สามารถสร้างผู้ใช้ได้"))}return(0,d.hH)(await n.json())},updateUser:async(e,t,r,s)=>{let o=(0,a.b)("PUT",`${c}/${e}`),n={"Content-Type":"application/json"};r&&(n.Cookie=r),s&&(n["X-CSRF-Token"]=s);let i=await fetch(o,{method:"PUT",headers:n,body:JSON.stringify(t),credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.errors?.map(e=>e.message).join(", ")||(0,d.i_)(e,"ไม่สามารถอัปเดตผู้ใช้ได้"))}return(0,d.hH)(await i.json())},deleteUser:async(e,t,r)=>{let s=(0,a.b)("DELETE",`${c}/${e}`),o={};t&&(o.Cookie=t),r&&(o["X-CSRF-Token"]=r);let n=await fetch(s,{method:"DELETE",headers:o,credentials:"include"});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.errors?.map(e=>e.message).join(", ")||(0,d.i_)(e,"ไม่สามารถลบผู้ใช้ได้"))}}}},83179:(e,t,r)=>{"use strict";r.d(t,{b:()=>a,g:()=>s});let a={system:{announcement:"system:announcement"},users:{create:"users:create",update:"users:update",delete:"users:delete",status:"users:update-status"},roles:{create:"roles:create",update:"roles:update",delete:"roles:delete"},branches:{create:"branches:create",update:"branches:update",delete:"branches:delete"},products:{create:"products:create",update:"products:update",delete:"products:delete"},productsUnit:{create:"productsUnit:create",update:"productsUnit:update",delete:"productsUnit:delete"},categories:{create:"category:create",update:"category:update",delete:"category:delete"},tables:{create:"tables:create",update:"tables:update",delete:"tables:delete"},orders:{create:"orders:create",update:"orders:update",delete:"orders:delete"},payments:{create:"payments:create",update:"payments:update",delete:"payments:delete"},discounts:{create:"discounts:create",update:"discounts:update",delete:"discounts:delete"},delivery:{create:"delivery:create",update:"delivery:update",delete:"delivery:delete"},shifts:{update:"shifts:update"},orderQueue:{added:"order-queue:added",updated:"order-queue:updated",removed:"order-queue:removed",reordered:"order-queue:reordered"},ingredients:{create:"ingredients:create",update:"ingredients:update",delete:"ingredients:delete"},ingredientsUnit:{create:"ingredientsUnit:create",update:"ingredientsUnit:update",delete:"ingredientsUnit:delete"},stock:{update:"stock:update"},stockOrders:{create:"stock:orders:create",update:"stock:orders:update",status:"stock:orders:status",delete:"stock:orders:delete",detailUpdate:"stock:orders:detail:update"},paymentAccounts:{create:"payment-accounts:create",update:"payment-accounts:update",delete:"payment-accounts:delete"},paymentMethods:{create:"paymentMethod:create",update:"paymentMethod:update",delete:"paymentMethod:delete"},shopProfile:{update:"shopProfile:update"},salesOrderItem:{create:"salesOrderItem:create",update:"salesOrderItem:update",delete:"salesOrderItem:delete"},salesOrderDetail:{create:"salesOrderDetail:create",update:"salesOrderDetail:update",delete:"salesOrderDetail:delete"}},s={stockOrdersUpdated:"orders_updated"}},56368:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var a=r(17577);let s=(e,t=400)=>{let[r,s]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let r=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(r)}},[e,t]),r}},29329:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\users\layout.tsx#default`)},92349:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(68570).createProxy)(String.raw`E:\Project\Order-Project-Frontend\src\app\(main)\users\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,4421,8571,8963,1399],()=>r(20054));module.exports=a})();