"use strict";(()=>{var e={};e.id=5315,e.ids=[5315],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29943:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>S,patchFetch:()=>T,requestAsyncStorage:()=>p,routeModule:()=>h,serverHooks:()=>P,staticGenerationAsyncStorage:()=>E});var o={};t.r(o),t.d(o,{DELETE:()=>u,GET:()=>d,PUT:()=>l});var s=t(49303),a=t(88716),n=t(60670),i=t(45657),c=t(87070);async function d(e,{params:r}){try{let{id:t}=r,o=e.headers.get("cookie")||"",s=await i.x.getOrderById(t,o);return c.NextResponse.json(s)}catch(e){return console.error("API Error:",e),c.NextResponse.json({error:e.message||"Internal Server Error"},{status:500})}}async function u(e,{params:r}){try{let{id:t}=r,o=e.headers.get("cookie")||"",s=e.headers.get("X-CSRF-Token")||"";return await i.x.deleteOrder(t,o,s),c.NextResponse.json({message:"Order deleted successfully"})}catch(e){return console.error("API Error:",e),c.NextResponse.json({error:e.message||"Internal Server Error"},{status:500})}}async function l(e,{params:r}){try{let{id:t}=r,o=await e.json(),s=e.headers.get("cookie")||"",a=e.headers.get("X-CSRF-Token")||"",n=await i.x.updateOrder(t,o.items,s,a);return c.NextResponse.json(n)}catch(e){return console.error("API Error:",e),c.NextResponse.json({error:e.message||"Internal Server Error"},{status:500})}}let h=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/stock/orders/[id]/route",pathname:"/api/stock/orders/[id]",filename:"route",bundlePath:"app/api/stock/orders/[id]/route"},resolvedPagePath:"E:\\Project\\Order-Project-Frontend\\src\\app\\api\\stock\\orders\\[id]\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:E,serverHooks:P}=h,S="/api/stock/orders/[id]/route";function T(){return(0,n.patchFetch)({serverHooks:P,staticGenerationAsyncStorage:E})}},87456:(e,r,t)=>{function o(e,r){return({GET:`${s.API_BASE_URL}${r}`,POST:`${s.API_BASE_URL}${r}`,PUT:`${s.API_BASE_URL}${r}`,DELETE:`${s.API_BASE_URL}${r}`,PATCH:`${s.API_BASE_URL}${r}`})[e]}t.d(r,{W:()=>s,b:()=>o});let s={get API_BASE_URL(){return"http://13.239.29.168:3000"}}},45657:(e,r,t)=>{t.d(r,{x:()=>n});var o=t(87456);let s="/stock/orders",a=(e,r="application/json")=>{let t={};return r&&(t["Content-Type"]=r),e&&(t.Cookie=e),t},n={createOrder:async(e,r,t)=>{let n=(0,o.b)("POST",s),i=a(r);t&&(i["X-CSRF-Token"]=t);let c=await fetch(n,{method:"POST",headers:i,body:JSON.stringify(e)});if(!c.ok){let e=await c.text();console.error("Backend Error [createOrder]:",{status:c.status,statusText:c.statusText,url:n,body:e});let r={};try{r=JSON.parse(e)}catch{}throw Error(r.error||r.message||`ไม่สามารถสร้างออเดอร์ได้ (${c.status})`)}return c.json()},getAllOrders:async(e,r)=>{let t=(0,o.b)("GET",s);r&&(t+=`?${r.toString()}`);let n=a(e,""),i=await fetch(t,{cache:"no-store",headers:n});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}return i.json()},getOrderById:async(e,r)=>{let t=(0,o.b)("GET",`${s}/${e}`),n=a(r,""),i=await fetch(t,{cache:"no-store",headers:n});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}return i.json()},updateStatus:async(e,r,t,n)=>{let i=(0,o.b)("PUT",`${s}/${e}/status`),c=a(t);n&&(c["X-CSRF-Token"]=n);let d=await fetch(i,{method:"PUT",headers:c,body:JSON.stringify({status:r})});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถอัปเดตสถานะออเดอร์ได้")}return d.json()},updateOrder:async(e,r,t,n)=>{let i=(0,o.b)("PUT",`${s}/${e}`),c=a(t);n&&(c["X-CSRF-Token"]=n);let d=await fetch(i,{method:"PUT",headers:c,body:JSON.stringify({items:r})});if(!d.ok){let e=await d.text();throw Error(`Failed to update order: ${d.status} ${e}`)}return d.json()},confirmPurchase:async(e,r,t,n,i)=>{let c=(0,o.b)("POST",`${s}/${e}/purchase`),d=a(n);i&&(d["X-CSRF-Token"]=i);let u=await fetch(c,{method:"POST",headers:d,body:JSON.stringify({items:r,purchased_by_id:t})});if(!u.ok){let e=await u.text();throw Error(`Failed to confirm purchase: ${u.status} ${e}`)}return u.json()},updatePurchaseDetail:async(e,r)=>{let t=(0,o.b)("POST","/stock/ordersDetail/update"),s=a(r),n=await fetch(t,{method:"POST",headers:s,body:JSON.stringify(e)});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถอัปเดตข้อมูลการซื้อได้")}return n.json()},deleteOrder:async(e,r,t)=>{let n=(0,o.b)("DELETE",`${s}/${e}`),i=a(r,"");t&&(i["X-CSRF-Token"]=t);let c=await fetch(n,{method:"DELETE",headers:i});if(!c.ok){let e=await c.text();throw Error(`Failed to delete order: ${c.status} ${e}`)}}}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[9276,5972],()=>t(29943));module.exports=o})();