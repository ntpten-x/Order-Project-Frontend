"use strict";(()=>{var E={};E.id=348,E.ids=[348],E.modules={20399:E=>{E.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:E=>{E.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},43074:(E,T,e)=>{e.r(T),e.d(T,{originalPathname:()=>U,patchFetch:()=>O,requestAsyncStorage:()=>i,routeModule:()=>s,serverHooks:()=>C,staticGenerationAsyncStorage:()=>n});var t={};e.r(t),e.d(t,{GET:()=>D,dynamic:()=>R});var _=e(49303),a=e(88716),A=e(60670),o=e(87070),r=e(73690);let R="force-dynamic";async function D(E,{params:T}){try{let e=E.headers.get("cookie")||"",t=await r.C.getLogById(T.id,e);return o.NextResponse.json(t)}catch(E){return console.error("[API] audit/logs/:id GET error:",E),o.NextResponse.json({error:E instanceof Error?E.message:"Failed to fetch audit log"},{status:500})}}let s=new _.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/audit/logs/[id]/route",pathname:"/api/audit/logs/[id]",filename:"route",bundlePath:"app/api/audit/logs/[id]/route"},resolvedPagePath:"E:\\Project\\Order-Project-Frontend\\src\\app\\api\\audit\\logs\\[id]\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:i,staticGenerationAsyncStorage:n,serverHooks:C}=s,U="/api/audit/logs/[id]/route";function O(){return(0,A.patchFetch)({serverHooks:C,staticGenerationAsyncStorage:n})}},95740:(E,T,e)=>{e.d(T,{q:()=>_,v:()=>t});let t="/api",_={AUTH:{LOGIN:"/auth/login",LOGOUT:"/auth/logout",ME:"/auth/me",CSRF:"/csrf",SWITCH_BRANCH:"/auth/switch-branch"},AUDIT:{LOGS:"/audit/logs"},POS:{PRODUCTS:"/pos/products",ORDERS:"/pos/orders",TABLES:"/pos/tables",DISCOUNTS:"/pos/discounts",DELIVERY:"/pos/delivery",PAYMENT_METHODS:"/pos/paymentMethod",PAYMENTS:"/pos/payments",CATEGORY:"/pos/category",SHIFTS:{BASE:"/pos/shifts",CURRENT:"/pos/shifts/current",OPEN:"/pos/shifts/open",CLOSE:"/pos/shifts/close"},DASHBOARD:{SALES:"/pos/dashboard/sales",TOP_ITEMS:"/pos/dashboard/top-items"},CHANNELS:{STATS:"/pos/orders/stats"},SHOP_PROFILE:"/pos/shopProfile",SALES_ORDER_ITEMS:"/pos/salesOrderItem",SALES_ORDER_DETAILS:"/pos/salesOrderDetail",PRODUCTS_UNIT:"/pos/productsUnit",PAYMENT_DETAILS:"/pos/paymentDetails",BRANCH:"/branches",ORDER_QUEUE:"/pos/queue"}}},87456:(E,T,e)=>{function t(E,T){return({GET:`${_.API_BASE_URL}${T}`,POST:`${_.API_BASE_URL}${T}`,PUT:`${_.API_BASE_URL}${T}`,DELETE:`${_.API_BASE_URL}${T}`,PATCH:`${_.API_BASE_URL}${T}`})[E]}e.d(T,{W:()=>_,b:()=>t});let _={get API_BASE_URL(){return"http://13.239.29.168:3000"}}},73690:(E,T,e)=>{e.d(T,{C:()=>s});var t,_=e(95740),a=e(87456),A=e(96543);!function(E){E.ORDER_CREATE="ORDER_CREATE",E.ORDER_UPDATE="ORDER_UPDATE",E.ORDER_DELETE="ORDER_DELETE",E.ORDER_STATUS_CHANGE="ORDER_STATUS_CHANGE",E.ORDER_CANCEL="ORDER_CANCEL",E.PAYMENT_CREATE="PAYMENT_CREATE",E.PAYMENT_UPDATE="PAYMENT_UPDATE",E.PAYMENT_DELETE="PAYMENT_DELETE",E.PAYMENT_REFUND="PAYMENT_REFUND",E.PAYMENT_ADJUST="PAYMENT_ADJUST",E.ITEM_ADD="ITEM_ADD",E.ITEM_UPDATE="ITEM_UPDATE",E.ITEM_DELETE="ITEM_DELETE",E.QUEUE_ADD="QUEUE_ADD",E.QUEUE_UPDATE="QUEUE_UPDATE",E.QUEUE_REMOVE="QUEUE_REMOVE",E.QUEUE_REORDER="QUEUE_REORDER",E.PRODUCT_CREATE="PRODUCT_CREATE",E.PRODUCT_UPDATE="PRODUCT_UPDATE",E.PRODUCT_DELETE="PRODUCT_DELETE",E.CATEGORY_CREATE="CATEGORY_CREATE",E.CATEGORY_UPDATE="CATEGORY_UPDATE",E.CATEGORY_DELETE="CATEGORY_DELETE",E.DISCOUNT_CREATE="DISCOUNT_CREATE",E.DISCOUNT_UPDATE="DISCOUNT_UPDATE",E.DISCOUNT_DELETE="DISCOUNT_DELETE",E.DISCOUNT_APPLY="DISCOUNT_APPLY",E.DELIVERY_CREATE="DELIVERY_CREATE",E.DELIVERY_UPDATE="DELIVERY_UPDATE",E.DELIVERY_DELETE="DELIVERY_DELETE",E.TABLE_CREATE="TABLE_CREATE",E.TABLE_UPDATE="TABLE_UPDATE",E.TABLE_DELETE="TABLE_DELETE",E.PAYMENT_METHOD_CREATE="PAYMENT_METHOD_CREATE",E.PAYMENT_METHOD_UPDATE="PAYMENT_METHOD_UPDATE",E.PAYMENT_METHOD_DELETE="PAYMENT_METHOD_DELETE",E.PRODUCTS_UNIT_CREATE="PRODUCTS_UNIT_CREATE",E.PRODUCTS_UNIT_UPDATE="PRODUCTS_UNIT_UPDATE",E.PRODUCTS_UNIT_DELETE="PRODUCTS_UNIT_DELETE",E.PAYMENT_ACCOUNT_CREATE="PAYMENT_ACCOUNT_CREATE",E.PAYMENT_ACCOUNT_UPDATE="PAYMENT_ACCOUNT_UPDATE",E.PAYMENT_ACCOUNT_ACTIVATE="PAYMENT_ACCOUNT_ACTIVATE",E.PAYMENT_ACCOUNT_DELETE="PAYMENT_ACCOUNT_DELETE",E.SHOP_PROFILE_UPDATE="SHOP_PROFILE_UPDATE",E.USER_CREATE="USER_CREATE",E.USER_UPDATE="USER_UPDATE",E.USER_DELETE="USER_DELETE",E.ROLE_CREATE="ROLE_CREATE",E.ROLE_UPDATE="ROLE_UPDATE",E.ROLE_DELETE="ROLE_DELETE",E.BRANCH_CREATE="BRANCH_CREATE",E.BRANCH_UPDATE="BRANCH_UPDATE",E.BRANCH_DELETE="BRANCH_DELETE",E.STOCK_INGREDIENT_CREATE="STOCK_INGREDIENT_CREATE",E.STOCK_INGREDIENT_UPDATE="STOCK_INGREDIENT_UPDATE",E.STOCK_INGREDIENT_DELETE="STOCK_INGREDIENT_DELETE",E.STOCK_INGREDIENT_UNIT_CREATE="STOCK_INGREDIENT_UNIT_CREATE",E.STOCK_INGREDIENT_UNIT_UPDATE="STOCK_INGREDIENT_UNIT_UPDATE",E.STOCK_INGREDIENT_UNIT_DELETE="STOCK_INGREDIENT_UNIT_DELETE",E.STOCK_ORDER_CREATE="STOCK_ORDER_CREATE",E.STOCK_ORDER_UPDATE="STOCK_ORDER_UPDATE",E.STOCK_ORDER_DELETE="STOCK_ORDER_DELETE",E.STOCK_ORDER_CONFIRM_PURCHASE="STOCK_ORDER_CONFIRM_PURCHASE",E.STOCK_ORDER_STATUS_UPDATE="STOCK_ORDER_STATUS_UPDATE",E.SHIFT_OPEN="SHIFT_OPEN",E.SHIFT_CLOSE="SHIFT_CLOSE"}(t||(t={}));let o=A.Ryn({id:A.Z_8(),action_type:A.jbo(t),user_id:A.Z_8().uuid().nullable().optional(),username:A.Z_8().nullable().optional(),ip_address:A.Z_8(),user_agent:A.Z_8().nullable().optional(),entity_type:A.Z_8().nullable().optional(),entity_id:A.Z_8().uuid().nullable().optional(),branch_id:A.Z_8().uuid().nullable().optional(),old_values:A.IMB(A.Z_8(),A._4T()).nullable().optional(),new_values:A.IMB(A.Z_8(),A._4T()).nullable().optional(),description:A.Z_8().nullable().optional(),path:A.Z_8().nullable().optional(),method:A.Z_8().nullable().optional(),created_at:A.Z_8().or(A.hTZ()).transform(E=>new Date(E))}),r=A.IXX(o);var R=e(91525);let D=_.q.AUDIT.LOGS,s={async getLogs(E,T){let e=(0,a.b)("GET",D);T&&Array.from(T.keys()).length>0&&(e+=`?${T.toString()}`);let t={};E&&(t.Cookie=E);let _=await fetch(e,{headers:t,cache:"no-store",credentials:"include"}),A=await _.json().catch(()=>({}));if(!_.ok)throw Error((0,R.i_)(A,"Failed to fetch audit logs"));let o=(0,R.XO)(A);return{data:r.parse(Array.isArray(o.data)?o.data:(0,R.hH)(A)),total:o.total,page:o.page,totalPages:o.last_page}},async getLogById(E,T){let e=(0,a.b)("GET",`${D}/${E}`),t={};T&&(t.Cookie=T);let _=await fetch(e,{headers:t,cache:"no-store",credentials:"include"}),A=await _.json().catch(()=>({}));if(!_.ok)throw Error((0,R.i_)(A,"Failed to fetch audit log"));return o.parse((0,R.hH)(A))}}},91525:(E,T,e)=>{function t(E){return!!E&&"object"==typeof E}function _(E){return E&&"object"==typeof E&&"success"in E&&!0===E.success&&"data"in E?E.data:E}function a(E,T="Request failed"){if("string"==typeof E)return E;if(!t(E))return T;if(!1===E.success){let T=E.error;if(t(T)&&"string"==typeof T.message&&T.message.trim())return T.message}if("error"in E){let T=E.error;if("string"==typeof T&&T.trim())return T;if(t(T)&&"string"==typeof T.message&&T.message.trim())return T.message}return"string"==typeof E.message&&E.message.trim()?E.message:T}function A(E){if(E&&"object"==typeof E&&"success"in E&&!0===E.success&&Array.isArray(E.data)){let T="number"==typeof E.meta?.total?E.meta.total:E.data.length,e="number"==typeof E.meta?.page?E.meta.page:1,t="number"==typeof E.meta?.limit?E.meta.limit:50,_="number"==typeof E.meta?.totalPages?E.meta.totalPages:Math.max(Math.ceil(T/Math.max(t,1)),1);return{data:E.data,total:T,page:e,last_page:_}}return E}e.d(T,{XO:()=>A,hH:()=>_,i_:()=>a})}};var T=require("../../../../../webpack-runtime.js");T.C(E);var e=E=>T(T.s=E),t=T.X(0,[9276,5972,6543],()=>e(43074));module.exports=t})();