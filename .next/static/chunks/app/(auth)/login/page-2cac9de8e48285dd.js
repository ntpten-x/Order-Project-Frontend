(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4665],{79279:function(n,t,e){Promise.resolve().then(e.bind(e,64861))},64861:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return nt}});var r=e(57437),o=e(2265),i=e(52717),a=e(19878),l=e(15883),s=e(42668),u=e(57400),d=e(14362),c=e(45008),p=e(85968),f=e(3146),g=e(96931),x=e(88589),m=e(50742);function h(){let n=(0,c._)(["\n  0%, 100% { transform: translateY(0) rotate(0deg); }\n  50% { transform: translateY(-20px) rotate(5deg); }\n"]);return h=function(){return n},n}function b(){let n=(0,c._)(["\n  0%, 100% { opacity: 0.4; transform: scale(1); }\n  50% { opacity: 0.6; transform: scale(1.05); }\n"]);return b=function(){return n},n}function v(){let n=(0,c._)(["\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]);return v=function(){return n},n}function w(){let n=(0,c._)(["\n  min-height: 100vh;\n  min-height: 100dvh; /* Dynamic viewport height for mobile */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);\n  padding: 1rem;\n  position: relative;\n  overflow: hidden;\n\n  /* Animated background orbs */\n  &::before {\n    content: '';\n    position: absolute;\n    width: 400px;\n    height: 400px;\n    border-radius: 50%;\n    background: radial-gradient(circle, rgba(99, 102, 241, 0.3) 0%, transparent 70%);\n    top: -100px;\n    left: -100px;\n    animation: "," 8s ease-in-out infinite;\n    pointer-events: none;\n  }\n\n  &::after {\n    content: '';\n    position: absolute;\n    width: 350px;\n    height: 350px;\n    border-radius: 50%;\n    background: radial-gradient(circle, rgba(34, 211, 238, 0.25) 0%, transparent 70%);\n    bottom: -80px;\n    right: -80px;\n    animation: "," 10s ease-in-out infinite reverse;\n    pointer-events: none;\n  }\n\n  @media (max-width: 480px) {\n    padding: 1.5rem;\n    align-items: center;\n    \n    &::before, &::after {\n      width: 250px;\n      height: 250px;\n    }\n  }\n"]);return w=function(){return n},n}function y(){let n=(0,c._)(["\n  position: absolute;\n  width: 200px;\n  height: 200px;\n  border-radius: 50%;\n  background: radial-gradient(circle, rgba(167, 139, 250, 0.2) 0%, transparent 70%);\n  top: 50%;\n  right: 15%;\n  animation: "," 6s ease-in-out infinite;\n  pointer-events: none;\n  z-index: 1;\n\n  @media (max-width: 768px) {\n    display: none;\n  }\n"]);return y=function(){return n},n}function k(){let n=(0,c._)(["\n  width: 100%;\n  max-width: 440px;\n  background: rgba(255, 255, 255, 0.08) !important;\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  border-radius: 24px !important;\n  border: 1px solid rgba(255, 255, 255, 0.15) !important;\n  box-shadow: \n    0 32px 64px rgba(0, 0, 0, 0.4),\n    0 0 0 1px rgba(255, 255, 255, 0.05) inset,\n    0 -20px 40px rgba(99, 102, 241, 0.1) inset !important;\n  padding: 2.5rem 2rem !important;\n  position: relative;\n  z-index: 10;\n  animation: "," 0.6s ease-out;\n\n  .ant-card-body {\n    padding: 0 !important;\n  }\n\n  /* Gradient border glow effect */\n  &::before {\n    content: '';\n    position: absolute;\n    inset: -1px;\n    border-radius: 25px;\n    padding: 1px;\n    background: linear-gradient(135deg, rgba(99, 102, 241, 0.5), rgba(34, 211, 238, 0.3), rgba(167, 139, 250, 0.5));\n    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);\n    mask-composite: xor;\n    -webkit-mask-composite: xor;\n    pointer-events: none;\n    opacity: 0.6;\n  }\n\n  @media (max-width: 480px) {\n    padding: 2rem 1.5rem !important;\n  }\n"]);return k=function(){return n},n}function j(){let n=(0,c._)(["\n  display: flex;\n  justify-content: center;\n  margin-bottom: 1.5rem;\n"]);return j=function(){return n},n}function Z(){let n=(0,c._)(["\n  width: 64px;\n  height: 64px;\n  border-radius: 16px;\n  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4);\n  \n  svg {\n    width: 32px;\n    height: 32px;\n    color: white;\n  }\n\n  @media (max-width: 480px) {\n    width: 56px;\n    height: 56px;\n    border-radius: 14px;\n    \n    svg {\n      width: 28px;\n      height: 28px;\n    }\n  }\n"]);return Z=function(){return n},n}function _(){let n=(0,c._)(["\n  font-size: 28px;\n  font-weight: 700;\n  color: #ffffff;\n  text-align: center;\n  margin-bottom: 0.5rem;\n  margin-top: 0;\n  letter-spacing: -0.02em;\n\n  @media (max-width: 480px) {\n    font-size: 24px;\n  }\n"]);return _=function(){return n},n}function z(){let n=(0,c._)(["\n  font-size: 15px;\n  color: rgba(255, 255, 255, 0.6);\n  text-align: center;\n  margin-bottom: 2rem;\n  margin-top: 0;\n\n  @media (max-width: 480px) {\n    font-size: 14px;\n    margin-bottom: 1.5rem;\n  }\n"]);return z=function(){return n},n}function C(){let n=(0,c._)(["\n  width: 100%;\n"]);return C=function(){return n},n}function S(){let n=(0,c._)(["\n  height: 52px;\n  border: 1.5px solid rgba(255, 255, 255, 0.15) !important;\n  border-radius: 14px !important;\n  padding: 0 16px !important;\n  font-size: 15px;\n  background: rgba(255, 255, 255, 0.06) !important;\n  color: #ffffff !important;\n  transition: all 0.2s ease;\n\n  &::placeholder {\n    color: rgba(255, 255, 255, 0.4);\n  }\n\n  &:hover {\n    border-color: rgba(99, 102, 241, 0.5) !important;\n    background: rgba(255, 255, 255, 0.08) !important;\n  }\n\n  &:focus,\n  &.ant-input-focused,\n  &.ant-input-affix-wrapper-focused {\n    border-color: #6366f1 !important;\n    background: rgba(255, 255, 255, 0.1) !important;\n    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2) !important;\n  }\n\n  .ant-input-prefix {\n    margin-right: 12px;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 18px;\n  }\n\n  @media (max-width: 480px) {\n    height: 56px;\n    font-size: 16px; /* Prevent iOS zoom */\n  }\n"]);return S=function(){return n},n}function P(){let n=(0,c._)(["\n  ","\n\n  input {\n    background: transparent !important;\n    color: #ffffff !important;\n    \n    &::placeholder {\n      color: rgba(255, 255, 255, 0.4);\n    }\n  }\n"]);return P=function(){return n},n}function I(){let n=(0,c._)(["\n  ","\n\n  input {\n    background: transparent !important;\n    color: #ffffff !important;\n    \n    &::placeholder {\n      color: rgba(255, 255, 255, 0.4);\n    }\n  }\n\n  .ant-input-suffix {\n    color: rgba(255, 255, 255, 0.5);\n    \n    .anticon {\n      font-size: 18px;\n      cursor: pointer;\n      transition: color 0.2s;\n      \n      &:hover {\n        color: rgba(255, 255, 255, 0.8);\n      }\n    }\n  }\n"]);return I=function(){return n},n}function L(){let n=(0,c._)(["\n  margin-bottom: 1.25rem;\n\n  .ant-form-item {\n    margin-bottom: 0;\n  }\n\n  .ant-form-item-explain-error {\n    font-size: 13px;\n    margin-top: 8px;\n    color: #fca5a5;\n    animation: "," 0.2s ease-out;\n  }\n"]);return L=function(){return n},n}function E(){let n=(0,c._)(["\n  height: 52px !important;\n  border-radius: 14px !important;\n  font-size: 16px !important;\n  font-weight: 600 !important;\n  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #6366f1 100%) !important;\n  background-size: 200% auto !important;\n  border: none !important;\n  color: white !important;\n  margin-top: 0.75rem !important;\n  box-shadow: 0 8px 24px rgba(99, 102, 241, 0.35) !important;\n  transition: all 0.3s ease !important;\n  cursor: pointer;\n\n  &:hover:not(:disabled) {\n    background-position: right center !important;\n    transform: translateY(-2px);\n    box-shadow: 0 12px 32px rgba(99, 102, 241, 0.5) !important;\n  }\n\n  &:active:not(:disabled) {\n    transform: translateY(0);\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n\n  /* Loading state */\n  &.ant-btn-loading {\n    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;\n    \n    .ant-btn-loading-icon {\n      color: white;\n    }\n  }\n\n  span {\n    color: white !important;\n  }\n\n  @media (max-width: 480px) {\n    height: 56px !important;\n    font-size: 17px !important;\n  }\n"]);return E=function(){return n},n}function M(){let n=(0,c._)(["\n  margin-top: 2rem;\n  text-align: center;\n"]);return M=function(){return n},n}function O(){let n=(0,c._)(["\n  margin-bottom: 1rem;\n  text-align: center;\n\n  a {\n    color: rgba(255, 255, 255, 0.6);\n    font-size: 14px;\n    text-decoration: none;\n    transition: color 0.2s ease;\n\n    &:hover {\n      color: #a5b4fc;\n    }\n  }\n"]);return O=function(){return n},n}function R(){let n=(0,c._)(["\n  color: rgba(255, 255, 255, 0.5);\n  font-size: 14px;\n  text-align: center;\n\n  a {\n    color: #a5b4fc;\n    font-weight: 600;\n    text-decoration: none;\n    margin-left: 4px;\n    transition: color 0.2s ease;\n\n    &:hover {\n      color: #c4b5fd;\n    }\n  }\n"]);return R=function(){return n},n}function D(){let n=(0,c._)(["\n  display: flex;\n  align-items: center;\n  margin: 1.5rem 0;\n  gap: 1rem;\n\n  &::before,\n  &::after {\n    content: '';\n    flex: 1;\n    height: 1px;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n  }\n\n  span {\n    color: rgba(255, 255, 255, 0.4);\n    font-size: 13px;\n    white-space: nowrap;\n  }\n"]);return D=function(){return n},n}function F(){let n=(0,c._)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  margin-top: 2rem;\n  padding-top: 1.5rem;\n  border-top: 1px solid rgba(255, 255, 255, 0.08);\n  \n  svg {\n    width: 14px;\n    height: 14px;\n    color: rgba(255, 255, 255, 0.3);\n  }\n  \n  span {\n    font-size: 12px;\n    color: rgba(255, 255, 255, 0.3);\n  }\n"]);return F=function(){return n},n}let A=(0,f.F4)(h()),G=(0,f.F4)(b()),N=(0,f.F4)(v()),T=p.Z.div(w(),A,A),Y=p.Z.div(y(),G),Q=(0,p.Z)(g.Z)(k(),N),W=p.Z.div(j()),q=p.Z.div(Z()),B=p.Z.h1(_()),J=p.Z.p(z()),$=p.Z.div(C()),H=(0,f.iv)(S()),K=(0,p.Z)(x.default)(P(),H),U=(0,p.Z)(x.default.Password)(I(),H),V=p.Z.div(L(),N),X=(0,p.Z)(m.ZP)(E());p.Z.div(M()),p.Z.div(O()),p.Z.div(R()),p.Z.div(D());let nn=p.Z.div(F());function nt(){let{login:n}=(0,d.a)(),[t,e]=(0,o.useState)(!1),c=(0,o.useRef)(null);(0,o.useEffect)(()=>{let n=setTimeout(()=>{var n;null===(n=c.current)||void 0===n||n.focus()},100);return()=>clearTimeout(n)},[]);let p=async t=>{e(!0);try{await n(t),i.ZP.success({message:"เข้าสู่ระบบสำเร็จ",description:"ยินดีต้อนรับเข้าสู่ระบบ",placement:"topRight"}),setTimeout(()=>{window.location.href="/"},1e3)}catch(n){i.ZP.error({message:"เข้าสู่ระบบไม่สำเร็จ",description:n.message||"ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง",placement:"topRight"})}finally{e(!1)}};return(0,r.jsxs)(T,{children:[(0,r.jsx)(Y,{}),(0,r.jsxs)(Q,{children:[(0,r.jsx)(W,{children:(0,r.jsx)(q,{children:(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),(0,r.jsx)("path",{d:"M2 17l10 5 10-5"}),(0,r.jsx)("path",{d:"M2 12l10 5 10-5"})]})})}),(0,r.jsx)(B,{children:"ยินดีต้อนรับ"}),(0,r.jsx)(J,{children:"เข้าสู่ระบบเพื่อจัดการร้านค้าของคุณ"}),(0,r.jsx)($,{children:(0,r.jsxs)(a.Z,{name:"login",onFinish:p,layout:"vertical",requiredMark:!1,autoComplete:"on",children:[(0,r.jsx)(V,{children:(0,r.jsx)(a.Z.Item,{name:"username",rules:[{required:!0,message:"กรุณากรอกชื่อผู้ใช้"}],children:(0,r.jsx)(K,{ref:c,prefix:(0,r.jsx)(l.Z,{}),placeholder:"ชื่อผู้ใช้",autoComplete:"username","aria-label":"ชื่อผู้ใช้"})})}),(0,r.jsx)(V,{children:(0,r.jsx)(a.Z.Item,{name:"password",rules:[{required:!0,message:"กรุณากรอกรหัสผ่าน"},{pattern:/^[a-zA-Z0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/,message:"กรุณากรอกภาษาอังกฤษ ตัวเลข หรืออักขระพิเศษเท่านั้น"}],children:(0,r.jsx)(U,{prefix:(0,r.jsx)(s.Z,{}),placeholder:"รหัสผ่าน",autoComplete:"current-password","aria-label":"รหัสผ่าน"})})}),(0,r.jsx)(a.Z.Item,{style:{marginBottom:0},children:(0,r.jsx)(X,{type:"primary",htmlType:"submit",loading:t,block:!0,children:"เข้าสู่ระบบ"})})]})}),(0,r.jsxs)(nn,{children:[(0,r.jsx)(u.Z,{}),(0,r.jsx)("span",{children:"การเชื่อมต่อที่ปลอดภัย"})]})]})]})}},14362:function(n,t,e){"use strict";e.d(t,{AuthProvider:function(){return p},a:function(){return f}});var r=e(57437),o=e(2265),i=e(99376),a=e(5447),l=e(84859),s=e(48651),u=e(3369),d=e(36799);let c=(0,o.createContext)(void 0),p=n=>{let{children:t}=n,[e,p]=(0,o.useState)(null),[f,g]=(0,o.useState)(!0),x=(0,i.useRouter)(),m=(0,i.usePathname)(),h=async()=>{try{let n=await a.O.getMe();p(n)}catch(n){p(null)}finally{g(!1)}};(0,o.useEffect)(()=>{h()},[]);let{showLoading:b,hideLoading:v}=(0,u.x)();(0,o.useEffect)(()=>{f||e||"/login"===m||x.push("/login")},[e,f,m,x]);let w=async n=>{try{b((0,d.t)("auth.loadingLogin"));let t=await a.O.getCsrfToken(),{token:e,...r}=await a.O.login(n,t);p(r),x.push("/")}catch(n){throw n}finally{v()}},y=async()=>{try{b((0,d.t)("auth.loadingLogout")),await a.O.logout(),l.x.clearQueue(),p(null),x.push("/login")}catch(n){console.error("Logout error:",n)}finally{v()}};return f?(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",background:"#ffffff"},children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",padding:"24px",background:"#ffffff",borderRadius:"20px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)(s.Z,{size:"large"}),(0,r.jsx)("div",{style:{color:"#64748b",fontSize:"14px",fontWeight:500},children:"กำลังตรวจสอบสิทธิ์..."})]})}):e||"/login"===m?(0,r.jsx)(c.Provider,{value:{user:e,loading:f,login:w,logout:y,checkAuth:h},children:t}):null},f=()=>{let n=(0,o.useContext)(c);if(!n)throw Error("useAuth must be used within an AuthProvider");return n}},3369:function(n,t,e){"use strict";e.d(t,{GlobalLoadingProvider:function(){return s},O:function(){return d},x:function(){return u}});var r=e(57437),o=e(2265),i=e(48651);let a=(0,o.createContext)(void 0),l=(0,o.createContext)(void 0),s=n=>{let{children:t}=n,[e,s]=(0,o.useState)({}),[u,d]=(0,o.useState)(void 0),c=(0,o.useCallback)(function(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";s(n=>({...n,[t]:(n[t]||0)+1})),n&&d(n)},[]),p=(0,o.useCallback)(function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";s(t=>{if(!t[n])return t;let e={...t};return e[n]-=1,e[n]<=0&&delete e[n],e})},[]),f=(0,o.useCallback)(()=>{s({}),d(void 0)},[]),g=Object.keys(e).length>0,x=(0,o.useMemo)(()=>({isLoading:g,loadingMessage:u}),[g,u]),m=(0,o.useMemo)(()=>({showLoading:c,hideLoading:p,resetLoading:f}),[c,p,f]);return(0,r.jsx)(l.Provider,{value:m,children:(0,r.jsxs)(a.Provider,{value:x,children:[t,g&&(0,r.jsx)("div",{role:"status","aria-live":"polite",className:"global-loading-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:13e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",transition:"opacity 0.25s ease"},children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16,background:"rgba(255, 255, 255, 0.95)",padding:"28px 40px",borderRadius:20,boxShadow:"0 10px 32px rgba(15, 23, 42, 0.14)",border:"1px solid rgba(148, 163, 184, 0.35)",minWidth:240,textAlign:"center"},children:[(0,r.jsx)(i.Z,{size:"large"}),u&&(0,r.jsx)("div",{style:{fontSize:16,color:"#334155",fontWeight:600,letterSpacing:"0.01em"},children:u})]})})]})})};function u(){let n=(0,o.useContext)(a),t=(0,o.useContext)(l);if(!n||!t)throw Error("useGlobalLoading must be used within a GlobalLoadingProvider");return(0,o.useMemo)(()=>({...n,...t}),[n,t])}function d(){let n=(0,o.useContext)(l);if(!n)throw Error("useGlobalLoadingDispatch must be used within a GlobalLoadingProvider");return n}},84859:function(n,t,e){"use strict";e.d(t,{M:function(){return s},x:function(){return l}});let r="pos_offline_queue",o=()=>{let n=localStorage.getItem(r);return n?JSON.parse(n):[]},i=n=>{let t=Date.now();return n.filter(n=>t-n.timestamp<=6048e5)},a=n=>{localStorage.setItem(r,JSON.stringify(n))},l={addToQueue:(n,t)=>{let e=i(o()),r={id:"offline-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:n,payload:t,timestamp:Date.now(),retryCount:0};return a([...e,r]),r},getQueue:()=>o(),removeFromQueue:n=>{a(o().filter(t=>t.id!==n))},incrementRetry:(n,t)=>{a(o().map(e=>e.id===n?{...e,retryCount:e.retryCount+1,lastError:t}:e))},clearQueue:()=>{localStorage.removeItem(r)},pruneExceeded:()=>{a(i(o()).filter(n=>n.retryCount<=5))}},s={maxRetry:5,backoff:n=>Math.min(3e4,2e3*n)}}},function(n){n.O(0,[253,1522,3418,742,4252,3916,8651,6931,4159,3831,8879,8589,9878,2239,2148,9385,2971,2117,1744],function(){return n(n.s=79279)}),_N_E=n.O()}]);