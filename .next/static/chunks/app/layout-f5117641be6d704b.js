(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{34548:function(e,r,t){Promise.resolve().then(t.bind(t,83111)),Promise.resolve().then(t.t.bind(t,72528,23)),Promise.resolve().then(t.t.bind(t,81822,23)),Promise.resolve().then(t.t.bind(t,2778,23)),Promise.resolve().then(t.bind(t,22032)),Promise.resolve().then(t.bind(t,57059)),Promise.resolve().then(t.bind(t,20852)),Promise.resolve().then(t.bind(t,14362)),Promise.resolve().then(t.bind(t,3369)),Promise.resolve().then(t.bind(t,46252)),Promise.resolve().then(t.bind(t,23174)),Promise.resolve().then(t.bind(t,22335))},22032:function(e,r,t){"use strict";var o=t(57437),n=t(29),i=t.n(n),a=t(2265),l=t(13817),s=t(60283),c=t(2651),d=t(38616),u=t(24783),f=t(91652),p=t(50742),g=t(52539),m=t(15883),y=t(70464),x=t(55322),h=t(40428),b=t(14362),v=t(99376);let{Header:w}=l.default,{Text:S}=s.default,{useToken:F}=c.default,{useBreakpoint:k}=d.default;r.default=()=>{let{user:e,logout:r}=(0,b.a)(),t=(0,v.usePathname)(),{token:n}=F(),l=k(),[s,c]=(0,a.useState)(!1),d=(0,a.useRef)(null);if((0,a.useEffect)(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.useEffect)(()=>{c(!1)},[t]),!e||"/login"===t)return null;let T=!l.md;return(0,o.jsxs)(w,{style:{position:"fixed",top:0,left:0,width:"100%",zIndex:1e3,boxSizing:"border-box",paddingTop:"env(safe-area-inset-top)",height:"calc(".concat(T?56:64,"px + env(safe-area-inset-top))"),padding:T?"0 16px":"0 24px",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"1px solid ".concat(n.colorBorderSecondary),boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)",transition:"all 0.3s ease"},children:[(0,o.jsxs)(u.Z,{size:12,align:"center",children:[(0,o.jsx)("div",{style:{width:T?"32px":"36px",height:T?"32px":"36px",background:"linear-gradient(135deg, ".concat(n.colorPrimary," 0%, ").concat(n.colorPrimaryActive," 100%)"),borderRadius:n.borderRadius,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px ".concat(n.colorPrimary,"40"),cursor:"pointer"},className:i().dynamic([["345d5f4e8354b6dd",[n.colorFillTertiary]]]),children:(0,o.jsx)(g.Z,{style:{fontSize:T?"18px":"20px",color:"#fff"}})}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",lineHeight:1.1},className:i().dynamic([["345d5f4e8354b6dd",[n.colorFillTertiary]]]),children:[(0,o.jsx)(S,{strong:!0,style:{fontSize:T?"16px":"18px",color:n.colorTextHeading,fontWeight:700,letterSpacing:"-0.02em"},children:"POS System"}),!T&&(0,o.jsx)(S,{style:{fontSize:"11px",fontWeight:500,color:n.colorTextDescription},children:"Management"})]})]}),(0,o.jsxs)("div",{ref:d,style:{position:"relative"},className:i().dynamic([["345d5f4e8354b6dd",[n.colorFillTertiary]]]),children:[(0,o.jsxs)("div",{onClick:()=>c(!s),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),c(e=>!e))},style:{display:"flex",alignItems:"center",gap:T?"8px":"10px",cursor:"pointer",padding:"4px",paddingRight:T?"4px":"10px",borderRadius:"24px",background:s?n.colorFillTertiary:"transparent",transition:"all 0.2s ease"},role:"button",tabIndex:0,"aria-expanded":s,"aria-label":"User menu",className:i().dynamic([["345d5f4e8354b6dd",[n.colorFillTertiary]]])+" user-profile-trigger",children:[(0,o.jsx)(f.Z,{size:T?32:36,icon:(0,o.jsx)(m.Z,{}),style:{background:n.colorBgContainer,color:n.colorPrimary,border:"1px solid ".concat(n.colorBorder),boxShadow:"0 2px 6px rgba(0,0,0,0.05)"}}),!T&&(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},className:i().dynamic([["345d5f4e8354b6dd",[n.colorFillTertiary]]]),children:[(0,o.jsx)(S,{strong:!0,style:{fontSize:"14px",color:n.colorText},children:(null==e?void 0:e.name)||"Member"}),(0,o.jsx)(y.Z,{style:{fontSize:"10px",color:n.colorTextDescription,marginLeft:8,transform:s?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s ease"}})]})]}),s&&(0,o.jsxs)("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:T?-8:0,width:260,background:"#ffffff",borderRadius:n.borderRadiusLG,boxShadow:"0 10px 40px rgba(0, 0, 0, 0.12)",padding:"8px",zIndex:1100,animation:"slideUp 0.2s cubic-bezier(0.23, 1, 0.32, 1)",border:"1px solid ".concat(n.colorBorderSecondary)},className:i().dynamic([["345d5f4e8354b6dd",[n.colorFillTertiary]]]),children:[(0,o.jsx)("div",{style:{padding:"16px",background:n.colorBgLayout,borderRadius:n.borderRadius,marginBottom:"8px"},className:i().dynamic([["345d5f4e8354b6dd",[n.colorFillTertiary]]]),children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},className:i().dynamic([["345d5f4e8354b6dd",[n.colorFillTertiary]]]),children:[(0,o.jsx)(f.Z,{size:44,icon:(0,o.jsx)(m.Z,{}),style:{background:"#fff",color:n.colorPrimary,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"}}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1,minWidth:0},className:i().dynamic([["345d5f4e8354b6dd",[n.colorFillTertiary]]]),children:[(0,o.jsx)(S,{strong:!0,style:{color:n.colorTextHeading,fontSize:"15px"},children:(null==e?void 0:e.name)||"Member"}),(0,o.jsxs)(S,{style:{color:n.colorTextSecondary,fontSize:"12px"},children:["@",(null==e?void 0:e.username)||"username"]}),(0,o.jsx)("div",{style:{marginTop:4,display:"inline-flex",padding:"2px 8px",background:n.colorPrimaryBg,color:n.colorPrimary,borderRadius:"4px",fontSize:"10px",fontWeight:600,width:"fit-content"},className:i().dynamic([["345d5f4e8354b6dd",[n.colorFillTertiary]]]),children:(null==e?void 0:e.role)||"Staff"})]})]})}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:4},className:i().dynamic([["345d5f4e8354b6dd",[n.colorFillTertiary]]]),children:[(0,o.jsx)(p.ZP,{type:"text",icon:(0,o.jsx)(x.Z,{}),style:{textAlign:"left",height:44,justifyContent:"flex-start",fontSize:"14px",color:n.colorText},block:!0,children:"การตั้งค่าระบบ"}),(0,o.jsx)("div",{style:{height:"1px",background:n.colorBorderSecondary,margin:"4px 0"},className:i().dynamic([["345d5f4e8354b6dd",[n.colorFillTertiary]]])}),(0,o.jsx)(p.ZP,{type:"text",danger:!0,icon:(0,o.jsx)(h.Z,{}),style:{textAlign:"left",height:44,justifyContent:"flex-start",fontSize:"14px",fontWeight:500},onClick:r,block:!0,children:"ออกจากระบบ"})]})]})]}),(0,o.jsx)(i(),{id:"345d5f4e8354b6dd",dynamic:[n.colorFillTertiary],children:"@-webkit-keyframes slideUp{from{opacity:0;-webkit-transform:translatey(8px);transform:translatey(8px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes slideUp{from{opacity:0;-moz-transform:translatey(8px);transform:translatey(8px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes slideUp{from{opacity:0;-o-transform:translatey(8px);transform:translatey(8px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes slideUp{from{opacity:0;-webkit-transform:translatey(8px);-moz-transform:translatey(8px);-o-transform:translatey(8px);transform:translatey(8px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.user-profile-trigger:hover{background:".concat(n.colorFillTertiary,"!important}")})]})}},57059:function(e,r,t){"use strict";t.d(r,{default:function(){return F}});var o=t(57437),n=t(99376),i=t(2265),a=t(2651),l=t(38616),s=t(3369),c=t(34029),d=t(24453),u=t(97235);let f=e=>{try{let r=window.location.origin;return new URL(e,r)}catch(e){return null}},p=e=>{let r=f(e);return!!r&&r.pathname.startsWith("/api")},g=e=>{let r=f(e);return!!r&&"/api/csrf"===r.pathname},m=e=>{if(!e)return!1;let r=new Headers(e);return r.has("x-skip-loading")||r.has("x-no-loading")},y=e=>["POST","PUT","PATCH","DELETE"].includes(e.toUpperCase()),x=(e,r)=>!(!p(e)||g(e)||m(null==r?void 0:r.headers)),h=(e,r,t)=>!(!p(e)||g(e)||new Headers(null==t?void 0:t.headers).has("X-CSRF-Token"))&&(y(r),!0);var b=t(36799);let v=(e,r)=>{if(!e&&!r)return"";if(e&&/^https?:\/\//i.test(e))return e;if(r&&/^https?:\/\//i.test(r))return new URL(e||"",r).toString();let t=r?r.replace(/\/$/,""):"",o=e?e.replace(/^\//,""):"";return t||o?t?o?"".concat(t,"/").concat(o):t:"/".concat(o):""},w=()=>{let{showLoading:e,hideLoading:r,loadingMessage:t}=(0,s.x)(),o=(0,i.useRef)(0),n=(0,i.useRef)(null),a=(0,i.useRef)(t),l=(0,i.useRef)(0);(0,i.useEffect)(()=>{a.current=t},[t]),(0,i.useEffect)(()=>{let t=()=>{let e=Date.now();e-l.current<5e3||(l.current=e,c.ZP.warning((0,b.t)("network.offline")))},i=()=>{o.current+=1,1===o.current&&(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{o.current>0&&e(a.current?void 0:(0,b.t)("network.loading"),"network")},150))},s=()=>{o.current=Math.max(0,o.current-1),0===o.current&&(n.current&&(clearTimeout(n.current),n.current=null),r("network"))},f=window.fetch.bind(window);window.fetch=async(e,r)=>{let o=e instanceof Request?e:null,n="string"==typeof e?e:(null==o?void 0:o.url)||"",a=((null==r?void 0:r.method)||(null==o?void 0:o.method)||"GET").toUpperCase(),l=x(n,r);l&&i();try{let t=r;if(h(n,a,r)){let e=new Headers((null==r?void 0:r.headers)||(null==o?void 0:o.headers)||{}),i=await (0,u.P)();i?e.set("X-CSRF-Token",i):console.warn("[CSRF] Failed to get CSRF token for request:",a,n),t={...r,headers:e}}return await f(e,t)}catch(e){throw t(),e}finally{l&&s()}};let p=d.Z.interceptors.request.use(async e=>{let r=v(e.url,e.baseURL),t=!!r&&x(r,{headers:e.headers});return e._trackLoading=t,t&&i(),e},e=>(((null==e?void 0:e.config)||{})._trackLoading&&s(),t(),Promise.reject(e))),g=d.Z.interceptors.response.use(e=>((e.config||{})._trackLoading&&s(),e),e=>(((null==e?void 0:e.config)||{})._trackLoading&&s(),t(),Promise.reject(e)));return()=>{window.fetch=f,d.Z.interceptors.request.eject(p),d.Z.interceptors.response.eject(g),n.current&&(clearTimeout(n.current),n.current=null)}},[e,r])};var S=t(63362),F=e=>{let{children:r}=e,t=(0,n.usePathname)(),{resetLoading:c}=(0,s.x)();w();let{token:d}=a.default.useToken(),u=l.default.useBreakpoint();(0,i.useEffect)(()=>{c()},[t,c]);let f="/login"===t,p=t.startsWith("/pos")||t.startsWith("/stock")||t.startsWith("/users")||t.startsWith("/branch"),g=!u.md,m=f?0:p?S.o:0;return(0,o.jsx)("main",{style:{paddingTop:f?0:"calc(".concat(f?0:g?56:64,"px + env(safe-area-inset-top))"),paddingBottom:m?"calc(".concat(m,"px + env(safe-area-inset-bottom))"):0,minHeight:"100vh",background:f?d.colorBgContainer:d.colorBgLayout,transition:"all 0.3s ease"},children:r})}},20852:function(e,r,t){"use strict";t.d(r,{default:function(){return d}});var o=t(57437),n=t(2265),i=t(52717),a=t(50742);let l=!!("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e,r){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{let t=e.installing;null!=t&&(t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("[SW] New content available; please refresh."),r&&r.onUpdate&&r.onUpdate(e)):(console.log("[SW] Content cached for offline use."),r&&r.onSuccess&&r.onSuccess(e)))})}}).catch(e=>{console.error("[SW] Error during service worker registration:",e)})}var c=t(36799);function d(){return(0,n.useEffect)(()=>{!function(e){if("serviceWorker"in navigator){let r="http://13.239.29.168:3000";if(r)try{new URL(r,window.location.origin).origin!==window.location.origin&&console.warn("[SW] Backend and frontend are on different origins. Service worker must be served from the frontend origin.")}catch(e){console.warn("[SW] Invalid NEXT_PUBLIC_BACKEND_API value. Service worker will use the frontend origin.")}window.addEventListener("load",()=>{let r=new URL("/sw.js",window.location.origin).toString();l?(function(e,r){fetch(e,{headers:{"Service-Worker":"script"}}).then(t=>{let o=t.headers.get("content-type");404===t.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):s(e,r)}).catch(()=>{console.log("[SW] No internet connection found. App is running in offline mode.")})}(r,e),navigator.serviceWorker.ready.then(()=>{console.log("[SW] Service worker ready")})):s(r,e)})}}({onSuccess:()=>{console.log("[SW] Service worker registered successfully")},onUpdate:e=>{i.ZP.info({key:"sw-update",message:(0,c.t)("network.newVersion"),duration:0,btn:(0,o.jsx)(a.ZP,{type:"primary",size:"small",onClick:()=>{var r;return(null===(r=e.waiting)||void 0===r?void 0:r.postMessage({type:"SKIP_WAITING"}))||window.location.reload()},children:"Reload"})})}})},[]),null}},23174:function(e,r,t){"use strict";t.d(r,{default:function(){return d}});var o=t(57437),n=t(2265),i=t(25917),a=t(99376),l=t(47213),s=t(64625),c={token:{fontSize:15,fontFamily:"var(--font-sans), 'Sarabun', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",fontFamilyCode:"var(--font-mono), ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace",colorPrimary:"#6366F1",colorSuccess:"#10B981",colorWarning:"#F59E0B",colorError:"#EF4444",colorInfo:"#3B82F6",colorTextHeading:"#1E293B",colorText:"#1E293B",colorTextSecondary:"#64748B",colorTextDescription:"#94A3B8",colorBgContainer:"#FFFFFF",colorBgLayout:"#F8FAFC",colorBorder:"#E2E8F0",colorBorderSecondary:"#F1F5F9",borderRadius:12,borderRadiusLG:16,borderRadiusSM:8,controlHeight:44,controlHeightLG:52,controlHeightSM:36,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04)",boxShadowSecondary:"0 4px 12px rgba(0, 0, 0, 0.08)"},components:{Button:{controlHeight:48,controlHeightLG:56,controlHeightSM:40,borderRadius:12,algorithm:!0,fontSize:15,fontWeight:600,paddingInline:20},Input:{controlHeight:48,borderRadius:12,paddingInline:16},Select:{controlHeight:48,borderRadius:12},Card:{borderRadiusLG:16,paddingLG:20,boxShadowTertiary:"0 2px 8px rgba(0, 0, 0, 0.06)"},Modal:{borderRadiusLG:20,paddingContentHorizontalLG:24},Table:{borderRadius:12,headerBg:"#F8FAFC",rowHoverBg:"#F1F5F9"},Tag:{borderRadiusSM:6},Typography:{lineHeightHeading1:1.2,lineHeightHeading2:1.3,lineHeightHeading3:1.4},Layout:{headerBg:"#FFFFFF",bodyBg:"#F8FAFC",siderBg:"#FFFFFF"},Menu:{itemBorderRadius:10,itemMarginInline:8},Tabs:{itemActiveColor:"#6366F1",inkBarColor:"#6366F1"},Divider:{colorSplit:"#E2E8F0"}}},d=e=>{let{children:r}=e,t=n.useMemo(()=>(0,i.Df)(),[]),[d,u]=(0,n.useState)(!1);return(0,a.useServerInsertedHTML)(()=>{if(!d)return u(!0),(0,o.jsx)("style",{id:"antd",dangerouslySetInnerHTML:{__html:(0,i.EN)(t,!0)}})}),(0,o.jsx)(i.V9,{cache:t,children:(0,o.jsx)(l.ZP,{theme:c,children:(0,o.jsx)(s.Z,{children:r})})})}},22335:function(e,r,t){"use strict";t.d(r,{default:function(){return y}});var o=t(57437),n=t(17026),i=t(76451),a=t(51737),l=t(15658),s=t(11559),c=t(29827),d=t(2265),u=t(3369),f=t(34029);let p=()=>{let e=(0,n.y)(),r=(0,i.B)(),{showLoading:t,hideLoading:o}=(0,u.x)(),a=(0,d.useRef)(!1),l=e+r>0;return(0,d.useEffect)(()=>{if(l&&!a.current){a.current=!0,t("กำลังโหลดข้อมูล...","query");return}!l&&a.current&&(a.current=!1,o("query"))},[l,t,o]),null};function g(e){if(e instanceof Error){var r,t;return(null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)?e.response.data.message:e.message}return"string"==typeof e?e:"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ"}function m(){return new a.S({queryCache:new l.t({onError:(e,r)=>{void 0!==r.state.data&&f.ZP.error(g(e))}}),mutationCache:new s.L({onError:(e,r,t,o)=>{var n;(null===(n=o.meta)||void 0===n?void 0:n.skipErrorToast)!==!0&&f.ZP.error(g(e))}}),defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,retry:(e,r)=>{var t;let o=null==r?void 0:null===(t=r.response)||void 0===t?void 0:t.status;return(!o||!(o>=400)||!(o<500))&&e<2},retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always",networkMode:"offlineFirst"},mutations:{retry:1,retryDelay:1e3,networkMode:"offlineFirst"}}})}function y(e){let{children:r}=e,[t]=(0,d.useState)(m);return(0,o.jsxs)(c.aH,{client:t,children:[(0,o.jsx)(p,{}),r]})}}},function(e){e.O(0,[410,2461,8024,4736,8592,1744],function(){return e(e.s=34548)}),_N_E=e.O()}]);