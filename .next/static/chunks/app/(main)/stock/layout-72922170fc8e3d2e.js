(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5277],{22562:function(t,e,r){Promise.resolve().then(r.bind(r,37820)),Promise.resolve().then(r.bind(r,30736))},38434:function(t,e,r){"use strict";r.d(e,{Z:function(){return s}});var n=r(2265),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},a=r(55015);function c(){return(c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var s=n.forwardRef((t,e)=>n.createElement(a.Z,c({},t,{ref:e,icon:o})))},84588:function(t,e,r){"use strict";r.d(e,{Z:function(){return s}});var n=r(2265),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"},a=r(55015);function c(){return(c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var s=n.forwardRef((t,e)=>n.createElement(a.Z,c({},t,{ref:e,icon:o})))},5311:function(t,e,r){"use strict";r.d(e,{Z:function(){return s}});var n=r(2265),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},a=r(55015);function c(){return(c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var s=n.forwardRef((t,e)=>n.createElement(a.Z,c({},t,{ref:e,icon:o})))},15424:function(t,e,r){"use strict";r.d(e,{Z:function(){return s}});var n=r(2265),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},a=r(55015);function c(){return(c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var s=n.forwardRef((t,e)=>n.createElement(a.Z,c({},t,{ref:e,icon:o})))},52539:function(t,e,r){"use strict";r.d(e,{Z:function(){return s}});var n=r(2265),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 312H696v-16c0-101.6-82.4-184-184-184s-184 82.4-184 184v16H192c-17.7 0-32 14.3-32 32v536c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V344c0-17.7-14.3-32-32-32zm-432-16c0-61.9 50.1-112 112-112s112 50.1 112 112v16H400v-16zm392 544H232V384h96v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h224v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h96v456z"}}]},name:"shopping",theme:"outlined"},a=r(55015);function c(){return(c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var s=n.forwardRef((t,e)=>n.createElement(a.Z,c({},t,{ref:e,icon:o})))},1915:function(t,e,r){"use strict";r.d(e,{Z:function(){return s}});var n=r(2265),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"},a=r(55015);function c(){return(c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var s=n.forwardRef((t,e)=>n.createElement(a.Z,c({},t,{ref:e,icon:o})))},37820:function(t,e,r){"use strict";var n=r(57437),o=r(2265),a=r(99376),c=r(5311),s=r(52539),i=r(38434),l=r(84588),u=r(1915),d=r(15424),f=r(14362),h=r(24675),p=r(76155);e.default=()=>{let t=(0,a.useRouter)(),e=(0,a.usePathname)(),{user:r}=(0,f.a)(),[g,v]=(0,o.useState)(0),{socket:m}=(0,h.s)(),b=o.useCallback(async()=>{try{let t=new URLSearchParams;t.append("status","pending"),t.append("t",Date.now().toString());let e=await p.x.getAllOrders(void 0,t);v(e.total)}catch(t){}},[]);(0,o.useEffect)(()=>{r&&b()},[r,b]),(0,o.useEffect)(()=>{if(!m)return;let t=t=>{((null==t?void 0:t.action)==="create"||(null==t?void 0:t.action)==="update_status")&&setTimeout(b,500)};m.on("orders_updated",t);let e=()=>b();return window.addEventListener("focus",e),()=>{m.off("orders_updated",t),window.removeEventListener("focus",e)}},[m,b]);let y=[{key:"home",label:"Home",icon:(0,n.jsx)(c.Z,{className:"text-2xl"}),path:"/"},{key:"shopping",label:"สั่งซื้อ",icon:(0,n.jsx)(s.Z,{className:"text-2xl"}),path:"/stock"},{key:"orders",label:"รายการ",icon:(0,n.jsx)(i.Z,{className:"text-2xl"}),path:"/stock/items"},{key:"history",label:"ประวัติ",icon:(0,n.jsx)(l.Z,{className:"text-2xl"}),path:"/stock/history"},...(null==r?void 0:r.role)==="Admin"?[{key:"ingredients",label:"วัตถุดิบ",icon:(0,n.jsx)(u.Z,{className:"text-2xl"}),path:"/stock/ingredients"},{key:"ingredientsUnit",label:"หน่วย",icon:(0,n.jsx)(d.Z,{className:"text-2xl"}),path:"/stock/ingredientsUnit"}]:[]],x="#FCD34D",w="#D1D5DB";return(0,n.jsx)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-md z-50",children:(0,n.jsx)("div",{className:"flex justify-around items-center h-[72px] px-6 py-2 bg-[#171717]/95 backdrop-blur-xl shadow-2xl border border-white/10 rounded-full",style:{boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.3)"},children:y.map(r=>{let o=e===r.path||e.startsWith(r.path+"/");return(0,n.jsxs)("button",{onClick:()=>t.push(r.path),className:"relative flex flex-col items-center justify-center w-full h-full group",children:[(0,n.jsxs)("div",{className:"relative flex items-center justify-center",children:[o&&(0,n.jsx)("div",{className:"absolute inset-0 bg-yellow-400/20 blur-xl rounded-full"}),(0,n.jsxs)("div",{className:"text-2xl transition-all duration-300 ease-out transform ".concat(o?"-translate-y-1 scale-110":"group-hover:scale-105"),style:{color:o?x:w},children:[r.icon,"orders"===r.key&&g>0&&(0,n.jsx)("div",{className:"absolute -top-1 -right-1 w-3.5 h-3.5 bg-red-500 rounded-full border-2 border-[#171717] z-10 animate-pulse"})]})]}),(0,n.jsx)("span",{className:"text-[11px] font-medium tracking-wide mt-1 transition-all duration-300 ".concat(o?"opacity-100 translate-y-0":"opacity-70 translate-y-1"),style:{color:o?x:w},children:r.label}),o&&(0,n.jsx)("div",{className:"absolute -bottom-2 w-1.5 h-1.5 rounded-full transition-all duration-300",style:{backgroundColor:x}})]},r.key)})})})}},71567:function(t,e,r){"use strict";r.d(e,{q:function(){return o},v:function(){return n}});let n="/api",o={AUTH:{LOGIN:"/auth/login",ME:"/auth/me",CSRF:"/csrf"},POS:{PRODUCTS:"/pos/products",ORDERS:"/pos/orders",TABLES:"/pos/tables",DISCOUNTS:"/pos/discounts",DELIVERY:"/pos/delivery",PAYMENT_METHODS:"/pos/paymentMethod",PAYMENTS:"/pos/payments",CATEGORY:"/pos/category",SHIFTS:{BASE:"/pos/shifts",CURRENT:"/pos/shifts/current",OPEN:"/pos/shifts/open",CLOSE:"/pos/shifts/close"},DASHBOARD:{SALES:"/pos/dashboard/sales",TOP_ITEMS:"/pos/dashboard/top-items"},CHANNELS:{STATS:"/pos/orders/stats"},SHOP_PROFILE:"/pos/shopProfile",SALES_ORDER_ITEMS:"/pos/salesOrderItem",SALES_ORDER_DETAILS:"/pos/salesOrderDetail",PRODUCTS_UNIT:"/pos/productsUnit",PAYMENT_DETAILS:"/pos/paymentDetails",BRANCH:"/branches"}}},14362:function(t,e,r){"use strict";r.d(e,{AuthProvider:function(){return d},a:function(){return f}});var n=r(57437),o=r(2265),a=r(99376),c=r(5447),s=r(84859),i=r(48651),l=r(3369);let u=(0,o.createContext)(void 0),d=t=>{let{children:e}=t,[r,d]=(0,o.useState)(null),[f,h]=(0,o.useState)(!0),p=(0,a.useRouter)(),g=(0,a.usePathname)(),v=async()=>{try{let t="";t=localStorage.getItem("token_ws")||"";let e=await c.O.getMe(t);d(e)}catch(t){d(null)}finally{h(!1)}};(0,o.useEffect)(()=>{v()},[]);let{showLoading:m,hideLoading:b}=(0,l.x)();(0,o.useEffect)(()=>{f||r||"/login"===g||p.push("/login")},[r,f,g,p]);let y=async t=>{try{m("กำลังเข้าสู่ระบบ...");let e=await c.O.getCsrfToken(),{token:r,...n}=await c.O.login(t,e);r&&localStorage.setItem("token_ws",r),d(n),p.push("/")}catch(t){throw t}finally{b()}},x=async()=>{try{m("กำลังออกจากระบบ...");let t="";t=localStorage.getItem("token_ws")||"",await c.O.logout(t),localStorage.removeItem("token_ws"),s.x.clearQueue(),d(null),p.push("/login")}catch(t){console.error("Logout error:",t)}finally{b()}};return f?(0,n.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-white",children:(0,n.jsx)(i.Z,{size:"large"})}):r||"/login"===g?(0,n.jsx)(u.Provider,{value:{user:r,loading:f,login:y,logout:x,checkAuth:v},children:e}):null},f=()=>{let t=(0,o.useContext)(u);if(!t)throw Error("useAuth must be used within an AuthProvider");return t}},46252:function(t,e,r){"use strict";r.d(e,{J:function(){return s},SocketProvider:function(){return i}});var n=r(57437),o=r(2265),a=r(68680),c=r(14362);let s=(0,o.createContext)({socket:null,isConnected:!1}),i=t=>{let{children:e}=t,[r,i]=(0,o.useState)(null),[l,u]=(0,o.useState)(!1),{user:d}=(0,c.a)();return(0,o.useEffect)(()=>{if(!d){r&&(r.disconnect(),i(null),u(!1));return}let t=localStorage.getItem("token_ws"),e=(0,a.io)("http://localhost:3000",{transports:["websocket"],withCredentials:!0,auth:t?{token:t}:void 0});return e.on("connect",()=>{console.log("Socket Connected:",e.id),u(!0)}),e.on("disconnect",()=>{console.log("Socket Disconnected"),u(!1)}),i(e),()=>{e.disconnect()}},[d]),(0,n.jsx)(s.Provider,{value:{socket:r,isConnected:l},children:e})}},3369:function(t,e,r){"use strict";r.d(e,{GlobalLoadingProvider:function(){return i},O:function(){return u},x:function(){return l}});var n=r(57437),o=r(2265),a=r(48651);let c=(0,o.createContext)(void 0),s=(0,o.createContext)(void 0),i=t=>{let{children:e}=t,[r,i]=(0,o.useState)({}),[l,u]=(0,o.useState)(void 0),d=(0,o.useCallback)(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";i(t=>({...t,[e]:(t[e]||0)+1})),t&&u(t)},[]),f=(0,o.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";i(e=>{if(!e[t])return e;let r={...e};return r[t]-=1,r[t]<=0&&delete r[t],r})},[]),h=(0,o.useCallback)(()=>{i({}),u(void 0)},[]),p=Object.keys(r).length>0,g=(0,o.useMemo)(()=>({isLoading:p,loadingMessage:l}),[p,l]),v=(0,o.useMemo)(()=>({showLoading:d,hideLoading:f,resetLoading:h}),[d,f,h]);return(0,n.jsx)(s.Provider,{value:v,children:(0,n.jsxs)(c.Provider,{value:g,children:[e,p&&(0,n.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-auto bg-black/10 backdrop-blur-[1px]",children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,background:"rgba(255, 255, 255, 0.9)",padding:"20px 40px",borderRadius:12,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[(0,n.jsx)(a.Z,{size:"large"}),l&&(0,n.jsx)("div",{style:{fontSize:14,color:"#1f1f1f",fontWeight:500},children:l})]})})]})})};function l(){let t=(0,o.useContext)(c),e=(0,o.useContext)(s);if(!t||!e)throw Error("useGlobalLoading must be used within a GlobalLoadingProvider");return(0,o.useMemo)(()=>({...t,...e}),[t,e])}function u(){let t=(0,o.useContext)(s);if(!t)throw Error("useGlobalLoadingDispatch must be used within a GlobalLoadingProvider");return t}},30736:function(t,e,r){"use strict";r.d(e,{CartProvider:function(){return c},j:function(){return s}});var n=r(57437),o=r(2265);let a=(0,o.createContext)(void 0),c=t=>{let{children:e}=t,[r,c]=(0,o.useState)([]);(0,o.useEffect)(()=>{let t=localStorage.getItem("shopping_cart");if(t)try{c(JSON.parse(t))}catch(t){console.error("Failed to parse cart from local storage",t)}},[]),(0,o.useEffect)(()=>{localStorage.setItem("shopping_cart",JSON.stringify(r))},[r]);let s=(0,o.useCallback)(t=>{c(e=>e.find(e=>e.ingredient.id===t.id)?e.map(e=>e.ingredient.id===t.id?{...e,quantity:e.quantity+1}:e):[...e,{ingredient:t,quantity:1}])},[]),i=(0,o.useCallback)(t=>{c(e=>e.filter(e=>e.ingredient.id!==t))},[]),l=(0,o.useCallback)((t,e)=>{if(e<=0){i(t);return}c(r=>r.map(r=>r.ingredient.id===t?{...r,quantity:e}:r))},[i]),u=(0,o.useCallback)(()=>{c([])},[]),d=r.reduce((t,e)=>t+e.quantity,0),f=o.useMemo(()=>({items:r,addToCart:s,removeFromCart:i,updateQuantity:l,clearCart:u,itemCount:d}),[r,s,i,l,u,d]);return(0,n.jsx)(a.Provider,{value:f,children:e})},s=()=>{let t=(0,o.useContext)(a);if(!t)throw Error("useCart must be used within a CartProvider");return t}},24675:function(t,e,r){"use strict";r.d(e,{s:function(){return a}});var n=r(2265),o=r(46252);let a=()=>(0,n.useContext)(o.J)},2913:function(t,e,r){"use strict";function n(t,e){return({GET:"".concat(o.API_BASE_URL).concat(e),POST:"".concat(o.API_BASE_URL).concat(e),PUT:"".concat(o.API_BASE_URL).concat(e),DELETE:"".concat(o.API_BASE_URL).concat(e),PATCH:"".concat(o.API_BASE_URL).concat(e)})[t]}r.d(e,{b:function(){return n}});let o={get API_BASE_URL(){return"/api"}}},5447:function(t,e,r){"use strict";r.d(e,{O:function(){return a}});var n=r(71567),o=r(2913);let a={login:async(t,e,r)=>{try{let a=(0,o.b)("POST",n.q.AUTH.LOGIN),c={"Content-Type":"application/json"};e&&(c["X-CSRF-Token"]=e),r&&(c.Cookie=r);let s=await fetch(a,{method:"POST",headers:c,credentials:"include",body:JSON.stringify(t)});if(!s.ok){let t=await s.json().catch(()=>({}));throw Error(t.message||t.detail||"เข้าสู่ระบบไม่สำเร็จ")}let i=await s.json();return{...i.user,token:i.token}}catch(t){throw Error(t.message||"เข้าสู่ระบบไม่สำเร็จ")}},logout:async(t,e,r)=>{try{let n=(0,o.b)("POST","/auth/logout"),a={"Content-Type":"application/json"};t&&(a.Authorization="Bearer ".concat(t)),e&&(a["X-CSRF-Token"]=e),r&&(a.Cookie=r),await fetch(n,{method:"POST",headers:a,credentials:"include"})}catch(t){console.error("Logout failed",t)}},getMe:async t=>{try{let e=(0,o.b)("GET",n.q.AUTH.ME),r=await fetch(e,{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},credentials:"include",cache:"no-store"});if(!r.ok)throw Error("Unauthorized");return await r.json()}catch(t){throw t}},async getCsrfToken(){try{let t=await fetch("".concat(n.v).concat(n.q.AUTH.CSRF),{credentials:"include"});if(!t.ok)return"";return(await t.json()).csrfToken}catch(t){return console.error("Failed to fetch CSRF token",t),""}}}},84859:function(t,e,r){"use strict";r.d(e,{M:function(){return s},x:function(){return c}});let n="pos_offline_queue",o=()=>{let t=localStorage.getItem(n);return t?JSON.parse(t):[]},a=t=>{localStorage.setItem(n,JSON.stringify(t))},c={addToQueue:(t,e)=>{let r=o(),n={id:"offline-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:t,payload:e,timestamp:Date.now(),retryCount:0};return a([...r,n]),n},getQueue:()=>o(),removeFromQueue:t=>{a(o().filter(e=>e.id!==t))},incrementRetry:(t,e)=>{a(o().map(r=>r.id===t?{...r,retryCount:r.retryCount+1,lastError:e}:r))},clearQueue:()=>{localStorage.removeItem(n)},pruneExceeded:()=>{a(o().filter(t=>t.retryCount<=5))}},s={maxRetry:5,backoff:t=>Math.min(3e4,2e3*t)}},76155:function(t,e,r){"use strict";r.d(e,{x:function(){return c}});var n=r(2913);let o="/stock/orders",a=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",r={};return e&&(r["Content-Type"]=e),t&&(r.Cookie=t),r},c={createOrder:async(t,e,r)=>{let c=(0,n.b)("POST",o),s=a(e);r&&(s["X-CSRF-Token"]=r);let i=await fetch(c,{method:"POST",headers:s,body:JSON.stringify(t)});if(!i.ok){let t=await i.text();console.error("Backend Error [createOrder]:",{status:i.status,statusText:i.statusText,url:c,body:t});let e={};try{e=JSON.parse(t)}catch(t){}throw Error(e.error||e.message||"ไม่สามารถสร้างออเดอร์ได้ (".concat(i.status,")"))}return i.json()},getAllOrders:async(t,e)=>{let r=(0,n.b)("GET",o);e&&(r+="?".concat(e.toString()));let c=a(t,""),s=await fetch(r,{cache:"no-store",headers:c});if(!s.ok){let t=await s.json().catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}return s.json()},getOrderById:async(t,e)=>{let r=(0,n.b)("GET","".concat(o,"/").concat(t)),c=a(e,""),s=await fetch(r,{cache:"no-store",headers:c});if(!s.ok){let t=await s.json().catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}return s.json()},updateStatus:async(t,e,r,c)=>{let s=(0,n.b)("PUT","".concat(o,"/").concat(t,"/status")),i=a(r);c&&(i["X-CSRF-Token"]=c);let l=await fetch(s,{method:"PUT",headers:i,body:JSON.stringify({status:e})});if(!l.ok){let t=await l.json().catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถอัปเดตสถานะออเดอร์ได้")}return l.json()},updateOrder:async(t,e,r,c)=>{let s=(0,n.b)("PUT","".concat(o,"/").concat(t)),i=a(r);c&&(i["X-CSRF-Token"]=c);let l=await fetch(s,{method:"PUT",headers:i,body:JSON.stringify({items:e})});if(!l.ok){let t=await l.text();throw Error("Failed to update order: ".concat(l.status," ").concat(t))}return l.json()},confirmPurchase:async(t,e,r,c,s)=>{let i=(0,n.b)("POST","".concat(o,"/").concat(t,"/purchase")),l=a(c);s&&(l["X-CSRF-Token"]=s);let u=await fetch(i,{method:"POST",headers:l,body:JSON.stringify({items:e,purchased_by_id:r})});if(!u.ok){let t=await u.text();throw Error("Failed to confirm purchase: ".concat(u.status," ").concat(t))}return u.json()},updatePurchaseDetail:async(t,e)=>{let r=(0,n.b)("POST","/stock/ordersDetail/update"),o=a(e),c=await fetch(r,{method:"POST",headers:o,body:JSON.stringify(t)});if(!c.ok){let t=await c.json().catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถอัปเดตข้อมูลการซื้อได้")}return c.json()},deleteOrder:async(t,e,r)=>{let c=(0,n.b)("DELETE","".concat(o,"/").concat(t)),s=a(e,"");r&&(s["X-CSRF-Token"]=r);let i=await fetch(c,{method:"DELETE",headers:s});if(!i.ok){let t=await i.text();throw Error("Failed to delete order: ".concat(i.status," ").concat(t))}}}}},function(t){t.O(0,[5015,7717,8651,1721,2971,2117,1744],function(){return t(t.s=22562)}),_N_E=t.O()}]);