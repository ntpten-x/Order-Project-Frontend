(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6797],{1654:function(e,t,r){Promise.resolve().then(r.bind(r,66266))},66266:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return X}});var a=r(57437),n=r(2265),i=r(24453),s=r(34029),o=r(96931),l=r(50337),d=r(50742),c=r(35713),x=r(35631),p=r(52539),f=r(89245),g=r(29),m=r.n(g),b=r(19683),y=r(80009),u=r(53743),h=r(33145),j=r(54752),k=r(9738),w=r(40312),v=r(49638),z=r(30736);let{Title:Z,Paragraph:S,Text:C}=b.default;var T=e=>{let{ingredient:t}=e,{addToCart:r}=(0,z.j)(),[i,l]=(0,n.useState)(!1),[c,x]=(0,n.useState)(!1),[p,f]=(0,n.useState)(!1),g=(0,n.useCallback)(()=>{x(!0)},[]),b=(0,n.useCallback)(()=>{x(!1)},[]);(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&c&&b()};return c&&document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[c,b]);let T=t.img_url||"https://placehold.co/600x400?text=No+Image";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.Z,{hoverable:!0,cover:(0,a.jsxs)("div",{onClick:g,style:{position:"relative",overflow:"hidden",borderRadius:"16px 16px 0 0",cursor:"pointer",background:"linear-gradient(145deg, #f8fafc 0%, #e2e8f0 100%)"},className:"jsx-34e97e55521c7fb8",children:[(0,a.jsxs)("div",{style:{position:"relative",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",minHeight:200,maxHeight:280,padding:16},className:"jsx-34e97e55521c7fb8",children:[!p&&(0,a.jsx)("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(145deg, #f1f5f9 0%, #e2e8f0 100%)"},className:"jsx-34e97e55521c7fb8",children:(0,a.jsx)("div",{style:{width:40,height:40,border:"3px solid #e2e8f0",borderTopColor:"#667eea",borderRadius:"50%",animation:"spin 1s linear infinite"},className:"jsx-34e97e55521c7fb8"})}),(0,a.jsx)("div",{style:{position:"relative",width:"100%",height:"250px"},className:"jsx-34e97e55521c7fb8",children:(0,a.jsx)(h.default,{alt:t.display_name,src:T,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",style:{objectFit:"contain",transition:"transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), filter 0.3s ease",opacity:p?1:0,borderRadius:8,filter:"drop-shadow(0 4px 12px rgba(0,0,0,0.1))"},onLoad:()=>f(!0),onError:()=>{f(!0)},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.08)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"}})})]}),(0,a.jsxs)("div",{style:{position:"absolute",bottom:12,left:12,padding:"8px 14px",borderRadius:20,background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",color:"#fff",display:"flex",alignItems:"center",gap:6,fontSize:12,fontWeight:500,opacity:.8,transition:"all 0.3s ease",border:"1px solid rgba(255,255,255,0.1)"},onMouseEnter:e=>{e.currentTarget.style.opacity="1",e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{e.currentTarget.style.opacity="0.8",e.currentTarget.style.transform="scale(1)"},className:"jsx-34e97e55521c7fb8",children:[(0,a.jsx)(j.Z,{style:{fontSize:14}}),(0,a.jsx)("span",{className:"jsx-34e97e55521c7fb8",children:"ดูรูปขยาย"})]}),t.unit&&(0,a.jsx)(y.Z,{style:{position:"absolute",top:12,right:12,margin:0,padding:"8px 16px",fontSize:"13px",fontWeight:600,borderRadius:24,background:"linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%)",backdropFilter:"blur(8px)",color:"#fff",border:"none",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)"},children:t.unit.display_name})]}),style:{width:"100%",borderRadius:20,overflow:"hidden",border:"none",boxShadow:"0 4px 24px rgba(0,0,0,0.06)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",background:"#fff"},styles:{body:{padding:"20px 24px 24px",display:"flex",flexDirection:"column",background:"#fff"}},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-10px)",e.currentTarget.style.boxShadow="0 20px 50px rgba(102, 126, 234, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 24px rgba(0,0,0,0.06)"},children:[(0,a.jsxs)("div",{style:{marginBottom:16,flexGrow:1},className:"jsx-34e97e55521c7fb8",children:[(0,a.jsx)(Z,{level:4,style:{margin:0,marginBottom:6,lineHeight:1.3,fontSize:"20px",fontWeight:700,color:"#1e293b",letterSpacing:"-0.02em"},children:t.display_name}),t.ingredient_name&&(0,a.jsx)(C,{style:{fontSize:"14px",color:"#64748b",fontWeight:500},children:t.ingredient_name}),(0,a.jsx)(S,{ellipsis:{rows:2,expandable:!1},style:{marginTop:14,marginBottom:0,minHeight:"48px",color:"#64748b",fontSize:"14px",lineHeight:1.7},children:t.description||"ไม่มีคำอธิบาย"})]}),(0,a.jsx)(d.ZP,{type:"primary",icon:i?(0,a.jsx)(k.Z,{}):(0,a.jsx)(w.Z,{}),onClick:e=>{e.stopPropagation(),r(t),l(!0),s.ZP.success("เพิ่ม ".concat(t.display_name," ลงตะกร้าแล้ว")),setTimeout(()=>l(!1),1500)},block:!0,size:"large",style:{height:52,borderRadius:14,fontSize:"15px",fontWeight:600,background:i?"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)":"linear-gradient(135deg, #0d9488 0%, #059669 100%)",border:"none",boxShadow:i?"0 4px 20px rgba(34, 197, 94, 0.4)":"0 4px 20px rgba(5, 150, 105, 0.35)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",transform:i?"scale(0.98)":"scale(1)"},onMouseEnter:e=>{i||(e.currentTarget.style.transform="translateY(-3px)",e.currentTarget.style.boxShadow="0 8px 28px rgba(5, 150, 105, 0.5)")},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow=i?"0 4px 20px rgba(34, 197, 94, 0.4)":"0 4px 20px rgba(5, 150, 105, 0.35)"},children:i?"เพิ่มแล้ว ✓":"เพิ่มลงตะกร้า"})]}),(0,a.jsx)(u.Z,{open:c,onCancel:b,footer:null,centered:!0,width:"auto",style:{maxWidth:"95vw"},styles:{mask:{backgroundColor:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)"},wrapper:{background:"transparent"},body:{padding:0,background:"transparent"}},closeIcon:(0,a.jsx)("div",{style:{position:"fixed",top:20,right:20,width:44,height:44,borderRadius:"50%",background:"rgba(255,255,255,0.15)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s ease",border:"1px solid rgba(255,255,255,0.2)"},className:"jsx-34e97e55521c7fb8",children:(0,a.jsx)(v.Z,{style:{color:"#fff",fontSize:18}})}),children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:20,animation:"modalFadeIn 0.3s ease-out"},className:"jsx-34e97e55521c7fb8",children:[(0,a.jsx)("div",{style:{background:"rgba(255,255,255,0.08)",borderRadius:20,padding:20,backdropFilter:"blur(12px)",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},className:"jsx-34e97e55521c7fb8",children:(0,a.jsx)("img",{alt:t.display_name,src:T,style:{maxWidth:"85vw",maxHeight:"75vh",width:"auto",height:"auto",objectFit:"contain",borderRadius:12,display:"block"},onError:e=>{e.currentTarget.src="https://placehold.co/600x400?text=No+Image"},className:"jsx-34e97e55521c7fb8"})}),(0,a.jsxs)("div",{style:{textAlign:"center",color:"#fff",maxWidth:"80vw"},className:"jsx-34e97e55521c7fb8",children:[(0,a.jsx)(Z,{level:3,style:{color:"#fff",margin:0,marginBottom:8,fontWeight:700,textShadow:"0 2px 10px rgba(0,0,0,0.3)"},children:t.display_name}),t.ingredient_name&&(0,a.jsx)(C,{style:{color:"rgba(255,255,255,0.7)",fontSize:16},children:t.ingredient_name}),t.unit&&(0,a.jsx)(y.Z,{style:{marginLeft:12,padding:"4px 14px",fontSize:"13px",fontWeight:600,borderRadius:16,background:"linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%)",color:"#fff",border:"none"},children:t.unit.display_name})]})]})}),(0,a.jsx)(m(),{id:"34e97e55521c7fb8",children:"@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes modalFadeIn{from{opacity:0;-webkit-transform:scale(.95);transform:scale(.95)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@-moz-keyframes modalFadeIn{from{opacity:0;-moz-transform:scale(.95);transform:scale(.95)}to{opacity:1;-moz-transform:scale(1);transform:scale(1)}}@-o-keyframes modalFadeIn{from{opacity:0;-o-transform:scale(.95);transform:scale(.95)}to{opacity:1;-o-transform:scale(1);transform:scale(1)}}@keyframes modalFadeIn{from{opacity:0;-webkit-transform:scale(.95);-moz-transform:scale(.95);-o-transform:scale(.95);transform:scale(.95)}to{opacity:1;-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}"})]})},I=r(40740),_=r(24783),F=r(91652),R=r(88589),P=r(26349),D=r(83669),B=r(22623),E=r(96473),N=r(14362),W=r(5447),H=r(76155),L=r(99376);let{Text:M,Title:A}=b.default;function U(){let[e,t]=(0,n.useState)(!1),{items:r,updateQuantity:i,clearCart:l,itemCount:x,updateItemNote:f}=(0,z.j)(),{user:g}=(0,N.a)(),m=(0,L.useRouter)(),[b,h]=(0,n.useState)(!1),[j,k]=(0,n.useState)(""),[v,Z]=(0,n.useState)(!1),[S,C]=(0,n.useState)(null),[T,U]=(0,n.useState)("");n.useEffect(()=>{let t=async()=>{k(await W.O.getCsrfToken())};e&&t()},[e]);let q=(e,t,r)=>{C({id:e,name:t,note:r}),U(r||""),Z(!0)},O=async()=>{if(!g){s.ZP.error("กรุณาเข้าสู่ระบบก่อนสั่งซื้อ");return}if(0===r.length){s.ZP.warning("ไม่มีสินค้าในตะกร้า");return}h(!0);try{let e=r.map(e=>({ingredient_id:e.ingredient.id,quantity_ordered:e.quantity}));await H.x.createOrder({ordered_by_id:g.id,items:e,remark:"สั่งซื้อผ่านเว็บ"},void 0,j),s.ZP.success("\uD83C\uDF89 สั่งออเดอร์สำเร็จ!"),l(),t(!1),m.push("/stock/items")}catch(e){console.error("Order failed:",e),s.ZP.error(e.message||"การสั่งซื้อล้มเหลว")}finally{h(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{position:"fixed",bottom:100,right:24,zIndex:1e3},children:(0,a.jsx)(c.Z,{count:x,offset:[-8,8],style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",border:"2px solid #fff",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",fontWeight:600},children:(0,a.jsx)(d.ZP,{type:"primary",shape:"circle",size:"large",icon:(0,a.jsx)(w.Z,{style:{fontSize:28}}),style:{width:64,height:64,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",boxShadow:"0 8px 24px rgba(102, 126, 234, 0.5)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onClick:()=>{t(!0)},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.1) translateY(-4px)",e.currentTarget.style.boxShadow="0 12px 32px rgba(102, 126, 234, 0.6)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1) translateY(0)",e.currentTarget.style.boxShadow="0 8px 24px rgba(102, 126, 234, 0.5)"}})})}),(0,a.jsx)(I.Z,{title:(0,a.jsxs)(_.Z,{align:"center",size:12,children:[(0,a.jsx)("div",{style:{width:40,height:40,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:10,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(w.Z,{style:{color:"#fff",fontSize:20}})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(A,{level:5,style:{margin:0,fontSize:18},children:"ตะกร้าสินค้า"}),(0,a.jsxs)(M,{type:"secondary",style:{fontSize:13},children:[x," รายการ"]})]})]}),placement:"right",onClose:()=>{t(!1)},open:e,styles:{wrapper:{width:420},header:{background:"#fafbff",borderBottom:"1px solid #f0f0f0",padding:"16px 24px"},body:{padding:0,background:"#f8f9fc"},footer:{padding:"16px 24px",background:"#fff",borderTop:"1px solid #f0f0f0"}},extra:r.length>0&&(0,a.jsx)(d.ZP,{type:"text",danger:!0,icon:(0,a.jsx)(P.Z,{}),onClick:()=>u.Z.confirm({title:"ล้างตะกร้า",content:"ยืนยันลบรายการทั้งหมด?",okText:"ยืนยัน",cancelText:"ยกเลิก",okButtonProps:{style:{background:"#ff4d4f"}},onOk:l}),style:{fontWeight:500},children:"ล้าง"}),footer:(0,a.jsx)("div",{children:(0,a.jsxs)(d.ZP,{type:"primary",block:!0,size:"large",onClick:O,loading:b,disabled:0===r.length,icon:(0,a.jsx)(D.Z,{}),style:{height:56,borderRadius:14,fontSize:17,fontWeight:600,background:0===r.length?"#d9d9d9":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",boxShadow:0===r.length?"none":"0 6px 20px rgba(102, 126, 234, 0.4)"},children:["ยืนยันการสั่งซื้อ (",x," รายการ)"]})}),children:(0,a.jsx)("div",{style:{padding:"16px 24px"},children:0===r.length?(0,a.jsxs)("div",{style:{textAlign:"center",marginTop:80},children:[(0,a.jsx)("div",{style:{width:120,height:120,margin:"0 auto 24px",background:"linear-gradient(135deg, rgba(102,126,234,0.1) 0%, rgba(118,75,162,0.1) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(p.Z,{style:{fontSize:56,color:"#667eea"}})}),(0,a.jsx)(A,{level:4,style:{color:"#666",marginBottom:8},children:"ตะกร้าว่างเปล่า"}),(0,a.jsx)(M,{type:"secondary",style:{fontSize:15},children:"เลือกวัตถุดิบที่ต้องการสั่งซื้อ"})]}):(0,a.jsx)(_.Z,{direction:"vertical",size:12,style:{width:"100%"},children:r.map(e=>{var t;let r=(null===(t=e.ingredient.unit)||void 0===t?void 0:t.display_name)||"หมวดหมู่ทั่วไป",n=(e.ingredient.price||129)*e.quantity,s=e.details||[];return(0,a.jsx)(o.Z,{size:"small",style:{borderRadius:16,border:"none",boxShadow:"0 2px 12px rgba(0,0,0,0.06)",overflow:"hidden",marginBottom:12},styles:{body:{padding:"16px"}},children:(0,a.jsxs)("div",{style:{display:"flex",gap:16},children:[(0,a.jsx)("div",{style:{flexShrink:0},children:(0,a.jsx)(F.Z,{src:e.ingredient.img_url,shape:"square",size:80,style:{borderRadius:12,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"}})}),(0,a.jsxs)("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:4},children:[(0,a.jsxs)("div",{style:{flex:1},children:[(0,a.jsx)(M,{strong:!0,style:{fontSize:16,color:"#1F2937",display:"block",lineHeight:1.2},children:e.ingredient.display_name}),(0,a.jsx)(y.Z,{style:{margin:"4px 0 0",border:"none",background:"#F3F4F6",color:"#6B7280",fontSize:11,borderRadius:6,padding:"0 6px"},children:r})]}),(0,a.jsxs)(M,{strong:!0,style:{fontSize:18,color:"#10B981",lineHeight:1},children:["฿",n.toLocaleString()]})]}),e.note&&(0,a.jsx)("div",{style:{marginTop:4,background:"#fef2f2",padding:"2px 6px",borderRadius:4,display:"inline-block",border:"1px solid #fecaca"},children:(0,a.jsxs)(M,{style:{fontSize:11,color:"#ef4444"},children:["\uD83D\uDCDD ",e.note]})}),s.length>0&&(0,a.jsx)("div",{style:{marginTop:6,marginBottom:8},children:s.map((e,t)=>(0,a.jsxs)(M,{style:{display:"block",fontSize:12,color:"#10B981",lineHeight:1.4},children:["+ ",e.detail_name," ",(0,a.jsxs)("span",{style:{opacity:.8},children:["(+฿",e.extra_price,")"]})]},t))}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"auto",paddingTop:8},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,background:"#F9FAFB",padding:"2px",borderRadius:8,border:"1px solid #F3F4F6"},children:[(0,a.jsx)(d.ZP,{size:"small",type:"text",icon:(0,a.jsx)(B.Z,{style:{fontSize:10}}),onClick:()=>i(e.ingredient.id,e.quantity-1),style:{width:24,height:24,minWidth:24}}),(0,a.jsx)(M,{strong:!0,style:{fontSize:14,minWidth:16,textAlign:"center"},children:e.quantity}),(0,a.jsx)(d.ZP,{size:"small",type:"text",icon:(0,a.jsx)(E.Z,{style:{fontSize:10}}),onClick:()=>i(e.ingredient.id,e.quantity+1),style:{width:24,height:24,minWidth:24,background:"#10B981",color:"white"}})]}),(0,a.jsxs)(_.Z,{size:4,children:[(0,a.jsx)(d.ZP,{type:"text",size:"small",icon:(0,a.jsx)("span",{style:{fontSize:14},children:"\uD83D\uDCDD"}),onClick:()=>q(e.ingredient.id,e.ingredient.display_name,e.note||""),style:{color:"#ef4444",background:"#fef2f2"}}),(0,a.jsx)(d.ZP,{type:"text",size:"small",icon:(0,a.jsx)(E.Z,{}),style:{color:"#10B981",background:"#ECQF9"}}),(0,a.jsx)(d.ZP,{type:"text",size:"small",danger:!0,icon:(0,a.jsx)(P.Z,{}),onClick:()=>i(e.ingredient.id,0),style:{background:"#FEF2F2"}})]})]})]})]})},e.ingredient.id)})})})}),(0,a.jsx)(u.Z,{title:(0,a.jsxs)(_.Z,{children:[(0,a.jsx)("span",{style:{fontSize:20},children:"\uD83D\uDCDD"}),(0,a.jsxs)(M,{strong:!0,style:{fontSize:18},children:["เพิ่มโน๊ต: ",null==S?void 0:S.name]})]}),open:v,onOk:()=>{S&&(f(S.id,T),Z(!1),C(null),s.ZP.success("บันทึกโน๊ตเรียบร้อยแล้ว"))},onCancel:()=>Z(!1),okText:"บันทึก",cancelText:"ยกเลิก",okButtonProps:{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",height:40,borderRadius:8,padding:"0 24px"}},cancelButtonProps:{style:{height:40,borderRadius:8}},children:(0,a.jsxs)("div",{style:{paddingTop:12},children:[(0,a.jsx)(M,{type:"secondary",style:{display:"block",marginBottom:8},children:"รายละเอียดเพิ่มเติมที่ต้องการแจ้ง"}),(0,a.jsx)(R.default.TextArea,{rows:4,value:T,onChange:e=>U(e.target.value),placeholder:"เช่น ไม่เผ็ดมาก, แยกน้ำ, ฯลฯ",style:{borderRadius:12,padding:12}})]})})]})}var q=r(24675);let O={container:{minHeight:"100vh",background:"#f8f9fc",fontFamily:"var(--font-sans), 'Sarabun', sans-serif"},gridConfig:{gutter:[24,24],xs:1,sm:1,md:2,lg:3,xl:3,xxl:4}},Y=()=>(0,a.jsx)(m(),{id:"395bfc5f9757b567",children:".hero-pattern{position:absolute;top:0;left:0;width:100%;height:100%;background-image:-webkit-radial-gradient(rgba(255,255,255,.1)1px,transparent 1px);background-image:-moz-radial-gradient(rgba(255,255,255,.1)1px,transparent 1px);background-image:-o-radial-gradient(rgba(255,255,255,.1)1px,transparent 1px);background-image:radial-gradient(rgba(255,255,255,.1)1px,transparent 1px);-webkit-background-size:20px 20px;-moz-background-size:20px 20px;-o-background-size:20px 20px;background-size:20px 20px;opacity:.5;pointer-events:none}.decorative-circle{position:absolute;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.circle-1{width:300px;height:300px;top:-100px;right:-50px}.circle-2{width:150px;height:150px;bottom:-30px;left:10%}@-webkit-keyframes fadeInUp{from{opacity:0;-webkit-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeInUp{from{opacity:0;-moz-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeInUp{from{opacity:0;-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeInUp{from{opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.animate-card{-webkit-animation:fadeInUp.6s ease-out forwards;-moz-animation:fadeInUp.6s ease-out forwards;-o-animation:fadeInUp.6s ease-out forwards;animation:fadeInUp.6s ease-out forwards;opacity:0}"});var G=r(25193),Q=r(37410),J=r(27623),K=r(20148),V=r(2786);function X(){let[e,t]=(0,n.useState)([]),[r,g]=(0,n.useState)(!0),[m,b]=(0,n.useState)(null),{socket:y}=(0,q.s)(),u=(0,n.useCallback)(async()=>{try{g(!0);let e=(await i.Z.get("/stock/ingredients?active=true")).data;t(Array.isArray(e)?e:[]),b(null)}catch(e){console.error("Error fetching ingredients:",e),b("ไม่สามารถโหลดรายการวัตถุดิบได้"),t([])}finally{g(!1)}},[]);(0,n.useEffect)(()=>{u()},[u]),(0,n.useEffect)(()=>{if(!y)return;let e=e=>{e.is_active&&(t(t=>[e,...t]),s.ZP.info("มีวัตถุดิบใหม่: ".concat(e.display_name)))},r=e=>{t(t=>{let r=t.find(t=>t.id===e.id);return e.is_active?r?t.map(t=>t.id===e.id?e:t):[e,...t]:t.filter(t=>t.id!==e.id)})},a=e=>{let{id:r}=e;t(e=>e.filter(e=>e.id!==r))};return y.on("ingredients:create",e),y.on("ingredients:update",r),y.on("ingredients:delete",a),()=>{y.off("ingredients:create",e),y.off("ingredients:update",r),y.off("ingredients:delete",a)}},[y]);let h=()=>(0,a.jsxs)(o.Z,{style:{borderRadius:16,overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.06)",border:"none"},children:[(0,a.jsx)(l.Z.Image,{active:!0,style:{width:"100%",height:180}}),(0,a.jsx)("div",{style:{padding:"16px 0"},children:(0,a.jsx)(l.Z,{active:!0,paragraph:{rows:2}})})]});return(0,a.jsxs)("div",{style:O.container,children:[(0,a.jsx)(Y,{}),(0,a.jsx)(K.Z,{title:"เลือกซื้อวัตถุดิบ",subtitle:"".concat(e.length," รายการ"),icon:(0,a.jsx)(p.Z,{}),actions:(0,a.jsx)(d.ZP,{icon:(0,a.jsx)(f.Z,{}),onClick:u,loading:r,children:"รีเฟรช"})}),(0,a.jsx)(G.Z,{children:(0,a.jsx)(J.Z,{children:(0,a.jsx)(Q.Z,{title:"รายการวัตถุดิบ",extra:(0,a.jsx)(c.Z,{count:r?0:e.length,style:{backgroundColor:"#6366f1"},overflowCount:999}),children:r?(0,a.jsx)(x.Z,{grid:O.gridConfig,dataSource:[1,2,3,4,5,6],renderItem:()=>(0,a.jsx)(x.Z.Item,{children:(0,a.jsx)(h,{})})}):m?(0,a.jsx)(V.Z,{title:"เกิดข้อผิดพลาด",description:m,action:(0,a.jsx)(d.ZP,{type:"primary",icon:(0,a.jsx)(f.Z,{}),onClick:u,children:"ลองใหม่อีกครั้ง"})}):0===e.length?(0,a.jsx)(V.Z,{title:"ยังไม่มีวัตถุดิบ",description:"ยังไม่มีวัตถุดิบที่พร้อมให้สั่งซื้อในขณะนี้"}):(0,a.jsx)(x.Z,{grid:O.gridConfig,dataSource:Array.isArray(e)?e:[],renderItem:(e,t)=>(0,a.jsx)(x.Z.Item,{className:"animate-card",style:{animationDelay:"".concat(50*t,"ms"),marginBottom:24},children:(0,a.jsx)(T,{ingredient:e})})})})})}),(0,a.jsx)(U,{})]})}}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=1654)}),_N_E=e.O()}]);