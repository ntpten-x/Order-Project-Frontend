(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5277],{22562:function(e,t,s){Promise.resolve().then(s.bind(s,37820)),Promise.resolve().then(s.bind(s,30736))},37820:function(e,t,s){"use strict";var a=s(57437),l=s(2265),n=s(99376),o=s(5311),r=s(52539),i=s(38434),c=s(84588),d=s(1915),u=s(15424),x=s(14362),h=s(24675),m=s(76155);t.default=()=>{let e=(0,n.useRouter)(),t=(0,n.usePathname)(),{user:s}=(0,x.a)(),[p,f]=(0,l.useState)(0),{socket:b}=(0,h.s)(),y=l.useCallback(async()=>{try{let e=new URLSearchParams;e.append("status","pending"),e.append("t",Date.now().toString());let t=await m.x.getAllOrders(void 0,e);f(t.total)}catch(e){}},[]);(0,l.useEffect)(()=>{s&&y()},[s,y]),(0,l.useEffect)(()=>{if(!b)return;let e=e=>{((null==e?void 0:e.action)==="create"||(null==e?void 0:e.action)==="update_status")&&setTimeout(y,500)};b.on("orders_updated",e);let t=()=>y();return window.addEventListener("focus",t),()=>{b.off("orders_updated",e),window.removeEventListener("focus",t)}},[b,y]);let k=[{key:"home",label:"Home",icon:(0,a.jsx)(o.Z,{className:"text-2xl"}),path:"/"},{key:"shopping",label:"สั่งซื้อ",icon:(0,a.jsx)(r.Z,{className:"text-2xl"}),path:"/stock"},{key:"orders",label:"รายการ",icon:(0,a.jsx)(i.Z,{className:"text-2xl"}),path:"/stock/items"},{key:"history",label:"ประวัติ",icon:(0,a.jsx)(c.Z,{className:"text-2xl"}),path:"/stock/history"},...(null==s?void 0:s.role)==="Admin"?[{key:"ingredients",label:"วัตถุดิบ",icon:(0,a.jsx)(d.Z,{className:"text-2xl"}),path:"/stock/ingredients"},{key:"ingredientsUnit",label:"หน่วย",icon:(0,a.jsx)(u.Z,{className:"text-2xl"}),path:"/stock/ingredientsUnit"}]:[]],v="#FCD34D",w="#D1D5DB";return(0,a.jsx)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-md z-50",children:(0,a.jsx)("div",{className:"flex justify-around items-center h-[72px] px-6 py-2 bg-[#171717]/95 backdrop-blur-xl shadow-2xl border border-white/10 rounded-full",style:{boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.3)"},children:k.map(s=>{let l=t===s.path||t.startsWith(s.path+"/");return(0,a.jsxs)("button",{onClick:()=>e.push(s.path),className:"relative flex flex-col items-center justify-center w-full h-full group",children:[(0,a.jsxs)("div",{className:"relative flex items-center justify-center",children:[l&&(0,a.jsx)("div",{className:"absolute inset-0 bg-yellow-400/20 blur-xl rounded-full"}),(0,a.jsxs)("div",{className:"text-2xl transition-all duration-300 ease-out transform ".concat(l?"-translate-y-1 scale-110":"group-hover:scale-105"),style:{color:l?v:w},children:[s.icon,"orders"===s.key&&p>0&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3.5 h-3.5 bg-red-500 rounded-full border-2 border-[#171717] z-10 animate-pulse"})]})]}),(0,a.jsx)("span",{className:"text-[11px] font-medium tracking-wide mt-1 transition-all duration-300 ".concat(l?"opacity-100 translate-y-0":"opacity-70 translate-y-1"),style:{color:l?v:w},children:s.label}),l&&(0,a.jsx)("div",{className:"absolute -bottom-2 w-1.5 h-1.5 rounded-full transition-all duration-300",style:{backgroundColor:v}})]},s.key)})})})}}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=22562)}),_N_E=e.O()}]);