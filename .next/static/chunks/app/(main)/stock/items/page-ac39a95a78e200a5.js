(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4777,9385],{95365:function(e,t,r){Promise.resolve().then(r.bind(r,76666))},76666:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ec}});var a=r(57437),s=r(2265),n=r(39486),i=r(38616),o=r(34029),d=r(53743),l=r(24783),c=r(91652),u=r(89970),h=r(80009),f=r(50742),g=r(50337),p=r(47451),b=r(69410),m=r(96931),x=r(45235),y=r(35713),k=r(2297),v=r(85180),j=r(81770),w=r(15883),S=r(46783),E=r(5540),P=r(49634),T=r(6520),Z=r(40312),O=r(13377),_=r(89245),C=r(12609),I=r(33477),z=r(93834),R=r(45246),N=r(52539),D=r(96473),A=r(29436),L=r(49638),U=r(78355),H=r(2913),q=r(98170);let F={findAll:async(e,t)=>{let r=(0,H.b)("GET","/stock/ingredients");t&&(r+="?".concat(t.toString()));let a={};e&&(a.Cookie=e);let s=await fetch(r,{cache:"no-store",credentials:"include",headers:a});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,q.i_)(e,"Failed to fetch ingredients"))}return(0,q.hH)(await s.json())}};var B=r(76155),G=r(24675),M=r(5447),W=r(12028);let{Text:X,Title:J}=n.default,Y=e=>{let{item:t,index:r,onUpdateQuantity:s,onRemove:n}=e;return(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:14,padding:14,background:"#fafafa",borderRadius:14,marginBottom:10,border:"1px solid #f0f0f0",transition:"all 0.3s ease",animation:"slideIn 0.3s ease ".concat(.05*r,"s both")},className:"editable-item-card",children:[(0,a.jsx)(y.Z,{count:r+1,color:"#667eea",size:"small",children:(0,a.jsx)(c.Z,{src:t.img_url||"https://placehold.co/56x56/f5f5f5/999999?text=\uD83D\uDCE6",shape:"square",size:56,style:{borderRadius:12,border:"2px solid #fff",boxShadow:"0 4px 12px rgba(0,0,0,0.08)",objectFit:"cover"}})}),(0,a.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,a.jsx)(X,{strong:!0,style:{fontSize:14,display:"block",marginBottom:2,color:"#1a1a2e"},ellipsis:{tooltip:t.display_name},children:t.display_name}),(0,a.jsxs)(X,{type:"secondary",style:{fontSize:12},children:["หน่วย: ",t.unit_name]})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)(I.Z,{min:1,value:t.quantity_ordered,onChange:e=>s(t.ingredient_id,e),style:{width:80,borderRadius:10},size:"middle"}),(0,a.jsx)(u.Z,{title:"ลบรายการ",children:(0,a.jsx)(f.ZP,{danger:!0,type:"text",icon:(0,a.jsx)(R.Z,{style:{fontSize:18}}),onClick:()=>n(t.ingredient_id),style:{width:36,height:36,borderRadius:10,display:"flex",alignItems:"center",justifyContent:"center"}})})]})]})};function Q(e){let{order:t,open:r,onClose:n,onSuccess:i}=e,[l,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)([]),[g,p]=(0,s.useState)([]),[b,m]=(0,s.useState)(null),{socket:x}=(0,G.s)(),y=e=>{var t;return(null==e?void 0:null===(t=e.ordersItems)||void 0===t?void 0:t.map(e=>{var t,r,a,s;return{ingredient_id:e.ingredient_id,quantity_ordered:e.quantity_ordered,display_name:(null===(t=e.ingredient)||void 0===t?void 0:t.display_name)||"Unknown",unit_name:(null===(a=e.ingredient)||void 0===a?void 0:null===(r=a.unit)||void 0===r?void 0:r.display_name)||"-",img_url:(null===(s=e.ingredient)||void 0===s?void 0:s.img_url)||void 0}}))||[]};(0,s.useEffect)(()=>{if(!x||!t||!r)return;let e=async()=>{try{let e=await B.x.getOrderById(t.id);p(y(e))}catch(e){}},a=e=>{e&&e.id===t.id&&(o.ZP.info("Order updated by another user."),p(y(e)))},s=e=>{e&&e.id===t.id&&e.status!==C.i.PENDING&&(o.ZP.warning("Order status changed to ".concat(e.status,". Closing editor.")),n())},i=r=>{(null==r?void 0:r.orderId)&&r.orderId===t.id&&e()},d=r=>{let{action:a,data:s,orderId:i}=r||{};s&&s.id===t.id?"update_order"===a?(o.ZP.info("Order updated by another user."),p(y(s))):"update_status"===a&&s.status!==C.i.PENDING&&(o.ZP.warning("Order status changed to ".concat(s.status,". Closing editor.")),n()):"update_item_detail"===a&&i===t.id&&e()};return x.on(W.b.stockOrders.update,a),x.on(W.b.stockOrders.status,s),x.on(W.b.stockOrders.detailUpdate,i),x.on(W.g.stockOrdersUpdated,d),()=>{x.off(W.b.stockOrders.update,a),x.off(W.b.stockOrders.status,s),x.off(W.b.stockOrders.detailUpdate,i),x.off(W.g.stockOrdersUpdated,d)}},[x,t,r,n]),(0,s.useEffect)(()=>{(async()=>{try{let e=(await F.findAll()).filter(e=>e.is_active);h(e),p(t=>t.map(t=>{let r=e.find(e=>e.id===t.ingredient_id);return{...t,img_url:t.img_url||(null==r?void 0:r.img_url)}}))}catch(e){console.error("Failed to load ingredients")}})()},[r]),(0,s.useEffect)(()=>{t&&r&&p(y(t))},[t,r]);let k=e=>{p(g.filter(t=>t.ingredient_id!==e))},j=(e,t)=>{null!==t&&p(g.map(r=>r.ingredient_id===e?{...r,quantity_ordered:t}:r))},[w,S]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{S(await M.O.getCsrfToken())})()},[]);let E=async()=>{if(t){if(0===g.length){o.ZP.error("ออเดอร์ต้องมีสินค้าอย่างน้อย 1 ชิ้น");return}c(!0);try{let e=g.map(e=>({ingredient_id:e.ingredient_id,quantity_ordered:e.quantity_ordered}));await B.x.updateOrder(t.id,e,void 0,w),o.ZP.success("แก้ไขออเดอร์สำเร็จ"),i(),n()}catch(t){let e="แก้ไขออเดอร์ล้มเหลว";t instanceof Error&&(e=t.message),o.ZP.error(e)}finally{c(!1)}}},P=u.filter(e=>!g.some(t=>t.ingredient_id===e.id));return(0,a.jsxs)(d.Z,{open:r,onCancel:n,footer:null,width:560,centered:!0,className:"edit-order-modal",style:{top:20},styles:{body:{padding:0},mask:{backdropFilter:"blur(8px)",background:"rgba(0, 0, 0, 0.45)"}},closeIcon:null,children:[(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",padding:"24px 24px 20px",position:"relative",overflow:"hidden"},children:[(0,a.jsx)("div",{style:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"rgba(255,255,255,0.1)"}}),(0,a.jsx)("div",{style:{position:"absolute",bottom:-30,left:-30,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.08)"}}),(0,a.jsxs)("div",{style:{position:"relative",zIndex:1},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,a.jsx)("div",{style:{width:48,height:48,borderRadius:14,background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)"},children:(0,a.jsx)(O.Z,{style:{fontSize:24,color:"white"}})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{style:{color:"rgba(255,255,255,0.8)",fontSize:13,display:"block"},children:"แก้ไขออเดอร์"}),(0,a.jsxs)(J,{level:4,style:{color:"white",margin:0,fontWeight:700,letterSpacing:"0.5px"},children:["#",null==t?void 0:t.id.substring(0,8).toUpperCase()]})]})]}),(0,a.jsx)("div",{style:{marginTop:16,display:"flex",alignItems:"center",gap:8},children:(0,a.jsxs)("div",{style:{background:"rgba(255,255,255,0.2)",borderRadius:20,padding:"6px 14px",display:"flex",alignItems:"center",gap:6,backdropFilter:"blur(4px)"},children:[(0,a.jsx)(N.Z,{style:{color:"white",fontSize:14}}),(0,a.jsxs)(X,{style:{color:"white",fontWeight:600,fontSize:13},children:[g.length," รายการ"]})]})})]})]}),(0,a.jsxs)("div",{style:{padding:"20px 24px 24px"},children:[(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)",borderRadius:16,padding:16,marginBottom:20},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[(0,a.jsx)(D.Z,{style:{fontSize:16,color:"#d4380d"}}),(0,a.jsx)(X,{strong:!0,style:{fontSize:14,color:"#d4380d"},children:"เพิ่มสินค้าใหม่"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,a.jsx)(z.default,{style:{flex:1},placeholder:"ค้นหาและเลือกสินค้า...",showSearch:!0,allowClear:!0,value:b,onChange:m,suffixIcon:(0,a.jsx)(A.Z,{style:{color:"#d4380d"}}),filterOption:(e,t)=>{var r;return(null!==(r=null==t?void 0:t.searchText)&&void 0!==r?r:"").toLowerCase().includes(e.toLowerCase())},notFoundContent:(0,a.jsx)(v.Z,{image:v.Z.PRESENTED_IMAGE_SIMPLE,description:"ไม่พบสินค้า",style:{padding:"12px 0"}}),options:P.map(e=>{var t;return{value:e.id,searchText:e.display_name,label:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"4px 0"},children:[(0,a.jsx)("img",{src:e.img_url||"https://placehold.co/36x36?text=\uD83D\uDCE6",alt:e.display_name,style:{width:36,height:36,objectFit:"cover",borderRadius:8,border:"1px solid #f0f0f0"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontWeight:500,fontSize:13},children:e.display_name}),(0,a.jsx)("div",{style:{fontSize:11,color:"#8c8c8c"},children:(null===(t=e.unit)||void 0===t?void 0:t.display_name)||"-"})]})]})}}),styles:{popup:{root:{borderRadius:12}}}}),(0,a.jsx)(f.ZP,{type:"primary",icon:(0,a.jsx)(D.Z,{}),onClick:()=>{var e;if(!b)return;let t=u.find(e=>e.id===b);if(t){if(g.find(e=>e.ingredient_id===b)){o.ZP.warning("สินค้านี้มีอยู่ในรายการแล้ว");return}p([...g,{ingredient_id:t.id,quantity_ordered:1,display_name:t.display_name,unit_name:(null===(e=t.unit)||void 0===e?void 0:e.display_name)||"-",img_url:t.img_url}]),m(null)}},disabled:!b,style:{height:40,borderRadius:10,background:b?"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)":void 0,border:"none",fontWeight:600,boxShadow:b?"0 4px 12px rgba(245, 87, 108, 0.35)":void 0},children:"เพิ่ม"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:20},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:14},children:[(0,a.jsx)(N.Z,{style:{fontSize:16,color:"#667eea"}}),(0,a.jsx)(X,{strong:!0,style:{fontSize:15,color:"#1a1a2e"},children:"รายการสินค้าในออเดอร์"})]}),(0,a.jsx)("div",{style:{maxHeight:280,overflowY:"auto",paddingRight:4,scrollbarWidth:"thin",scrollbarColor:"#d9d9d9 transparent"},children:g.length>0?g.map((e,t)=>(0,a.jsx)(Y,{item:e,index:t,onUpdateQuantity:j,onRemove:k},e.ingredient_id)):(0,a.jsx)(v.Z,{description:(0,a.jsxs)("div",{children:[(0,a.jsx)(X,{type:"secondary",children:"ยังไม่มีสินค้าในออเดอร์"}),(0,a.jsx)("br",{}),(0,a.jsx)(X,{type:"secondary",style:{fontSize:12},children:"เพิ่มสินค้าจากด้านบน"})]}),image:v.Z.PRESENTED_IMAGE_SIMPLE,style:{padding:"40px 0",background:"#fafafa",borderRadius:16}})})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,a.jsx)(f.ZP,{block:!0,size:"large",onClick:n,icon:(0,a.jsx)(L.Z,{}),style:{height:48,borderRadius:12,fontWeight:600},children:"ยกเลิก"}),(0,a.jsx)(f.ZP,{type:"primary",block:!0,size:"large",onClick:E,loading:l,icon:(0,a.jsx)(U.Z,{}),disabled:0===g.length,style:{height:48,borderRadius:12,fontWeight:600,background:g.length>0?"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)":void 0,border:"none",boxShadow:g.length>0?"0 4px 16px rgba(245, 87, 108, 0.35)":void 0},children:"บันทึกการแก้ไข"})]})]}),(0,a.jsx)("style",{children:"\n                .edit-order-modal .ant-modal-content {\n                    border-radius: 24px !important;\n                    overflow: hidden;\n                    padding: 0 !important;\n                }\n                \n                @keyframes slideIn {\n                    from {\n                        opacity: 0;\n                        transform: translateY(10px);\n                    }\n                    to {\n                        opacity: 1;\n                        transform: translateY(0);\n                    }\n                }\n                \n                .editable-item-card:hover {\n                    background: #fff0f6 !important;\n                    border-color: #ffadd2 !important;\n                    transform: translateX(4px);\n                }\n                \n                .edit-order-modal .ant-select-selector {\n                    border-radius: 10px !important;\n                    height: 40px !important;\n                }\n                \n                .edit-order-modal .ant-select-selection-placeholder,\n                .edit-order-modal .ant-select-selection-item {\n                    line-height: 38px !important;\n                }\n                \n                .edit-order-modal .ant-input-number {\n                    border-radius: 10px !important;\n                }\n                \n                .edit-order-modal .ant-input-number-handler-wrap {\n                    border-radius: 0 10px 10px 0 !important;\n                }\n                \n                /* Custom scrollbar */\n                *::-webkit-scrollbar {\n                    width: 6px;\n                }\n                *::-webkit-scrollbar-track {\n                    background: transparent;\n                }\n                *::-webkit-scrollbar-thumb {\n                    background: #d9d9d9;\n                    border-radius: 3px;\n                }\n                *::-webkit-scrollbar-thumb:hover {\n                    background: #bfbfbf;\n                }\n            "})]})}var V=r(57835),K=r(99376),$=r(14362),ee=r(29),et=r.n(ee);function er(){return(0,a.jsx)(et(),{id:"8c68ddb7935f151e",children:".items-table .ant-table{background:transparent!important;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px;overflow:hidden}.items-table .ant-table-thead>tr>th{background:-webkit-linear-gradient(315deg,#667eea 0%,#764ba2 100%)!important;background:-moz-linear-gradient(315deg,#667eea 0%,#764ba2 100%)!important;background:-o-linear-gradient(315deg,#667eea 0%,#764ba2 100%)!important;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)!important;color:#fff!important;font-weight:600;font-size:14px;padding:16px 12px;border:none!important}.items-table .ant-table-thead>tr>th::before{display:none!important}.items-table .ant-table-tbody>tr>td{padding:16px 12px;vertical-align:middle;border-bottom:1px solid rgba(0,0,0,.04);-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.items-table .ant-table-tbody>tr:hover>td{background:rgba(102,126,234,.04)!important}.items-table .ant-table-tbody>tr:last-child>td{border-bottom:none}.status-card{background:-webkit-linear-gradient(315deg,#fff 0%,#f8f9fe 100%);background:-moz-linear-gradient(315deg,#fff 0%,#f8f9fe 100%);background:-o-linear-gradient(315deg,#fff 0%,#f8f9fe 100%);background:linear-gradient(135deg,#fff 0%,#f8f9fe 100%);-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px;border:1px solid rgba(102,126,234,.12);-webkit-box-shadow:0 4px 20px rgba(102,126,234,.08);-moz-box-shadow:0 4px 20px rgba(102,126,234,.08);box-shadow:0 4px 20px rgba(102,126,234,.08);-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease}.status-card:hover{-webkit-box-shadow:0 8px 32px rgba(102,126,234,.15);-moz-box-shadow:0 8px 32px rgba(102,126,234,.15);box-shadow:0 8px 32px rgba(102,126,234,.15);-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px)}.empty-state-card{background:-webkit-linear-gradient(top,#f8f9fe 0%,#fff 100%);background:-moz-linear-gradient(top,#f8f9fe 0%,#fff 100%);background:-o-linear-gradient(top,#f8f9fe 0%,#fff 100%);background:linear-gradient(180deg,#f8f9fe 0%,#fff 100%);-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;border:2px dashed rgba(102,126,234,.2)}.action-btn{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;font-weight:500;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease}.action-btn:hover{-webkit-transform:translatey(-1px);-moz-transform:translatey(-1px);-ms-transform:translatey(-1px);-o-transform:translatey(-1px);transform:translatey(-1px);-webkit-box-shadow:0 4px 12px rgba(0,0,0,.1);-moz-box-shadow:0 4px 12px rgba(0,0,0,.1);box-shadow:0 4px 12px rgba(0,0,0,.1)}.order-item-badge{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:-webkit-linear-gradient(315deg,#f0f5ff 0%,#e8f0ff 100%);background:-moz-linear-gradient(315deg,#f0f5ff 0%,#e8f0ff 100%);background:-o-linear-gradient(315deg,#f0f5ff 0%,#e8f0ff 100%);background:linear-gradient(135deg,#f0f5ff 0%,#e8f0ff 100%);padding:6px 12px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;margin:3px 4px 3px 0;border:1px solid rgba(102,126,234,.15);font-size:13px;-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.order-item-badge:hover{background:-webkit-linear-gradient(315deg,#e8f0ff 0%,#d9e4ff 100%);background:-moz-linear-gradient(315deg,#e8f0ff 0%,#d9e4ff 100%);background:-o-linear-gradient(315deg,#e8f0ff 0%,#d9e4ff 100%);background:linear-gradient(135deg,#e8f0ff 0%,#d9e4ff 100%);border-color:rgba(102,126,234,.3)}@media screen and (max-width:768px){.items-table .ant-table-thead>tr>th{font-size:12px;padding:12px 8px}.items-table .ant-table-tbody>tr>td{font-size:13px;padding:12px 8px}.order-item-badge{font-size:12px;padding:4px 10px}}.items-table .ant-pagination{padding:16px 24px}.items-table .ant-pagination-item-active{background:-webkit-linear-gradient(315deg,#667eea 0%,#764ba2 100%);background:-moz-linear-gradient(315deg,#667eea 0%,#764ba2 100%);background:-o-linear-gradient(315deg,#667eea 0%,#764ba2 100%);background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-color:transparent}.items-table .ant-pagination-item-active a{color:#fff}"})}var ea=r(25193),es=r(37410),en=r(27623),ei=r(20148),eo=r(30290),ed=r(36799);let{Text:el}=n.default;function ec(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0),[I,z]=(0,s.useState)(null),{socket:R}=(0,G.s)(),N=(0,K.useRouter)(),{user:D}=(0,$.a)(),A=!i.default.useBreakpoint().md,L=(0,s.useCallback)(async()=>{try{n(!0),z(null);let e=await fetch("/api/stock/orders?status=pending",{cache:"no-store",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch orders");let r=await e.json();t(Array.isArray(r)?r:r.data||[])}catch(e){z((0,ed.t)("stock.error")),o.ZP.error((0,ed.t)("stock.error"))}finally{n(!1)}},[]);(0,s.useEffect)(()=>{L()},[L]),(0,s.useEffect)(()=>{if(!R)return;let e=e=>{e&&e.status===C.i.PENDING&&(t(t=>[e,...t]),o.ZP.success("New stock order received."))},r=e=>{e&&(e.status===C.i.PENDING?t(t=>t.map(t=>t.id===e.id?e:t)):t(t=>t.filter(t=>t.id!==e.id)))},a=e=>{e&&(e.status===C.i.PENDING?t(t=>t.map(t=>t.id===e.id?e:t)):t(t=>t.filter(t=>t.id!==e.id)),o.ZP.info("Order status updated."))},s=e=>{(null==e?void 0:e.id)&&(t(t=>t.filter(t=>t.id!==e.id)),o.ZP.warning("Order deleted."))},n=e=>{(null==e?void 0:e.orderId)&&L()},i=e=>{let{action:r,data:a,id:s,orderId:n}=e;switch(r){case"create":a&&a.status===C.i.PENDING&&(t(e=>[a,...e]),o.ZP.success("New stock order received."));break;case"update_status":a&&(a.status===C.i.PENDING?t(e=>e.map(e=>e.id===a.id?a:e)):t(e=>e.filter(e=>e.id!==a.id)),o.ZP.info("Order status updated."));break;case"delete":s&&(t(e=>e.filter(e=>e.id!==s)),o.ZP.warning("Order deleted."));break;case"update_item_detail":n&&L();break;default:L()}};return R.on(W.b.stockOrders.create,e),R.on(W.b.stockOrders.update,r),R.on(W.b.stockOrders.status,a),R.on(W.b.stockOrders.delete,s),R.on(W.b.stockOrders.detailUpdate,n),R.on(W.g.stockOrdersUpdated,i),()=>{R.off(W.b.stockOrders.create,e),R.off(W.b.stockOrders.update,r),R.off(W.b.stockOrders.status,a),R.off(W.b.stockOrders.delete,s),R.off(W.b.stockOrders.detailUpdate,n),R.off(W.g.stockOrdersUpdated,i)}},[R,L]);let[U,H]=(0,s.useState)(null),[q,F]=(0,s.useState)(null),[B,X]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{try{let e=await M.O.getCsrfToken();X(e)}catch(e){console.error("Failed to fetch CSRF token",e)}})()},[]);let J=e=>{var t,r;d.Z.confirm({title:(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(j.Z,{style:{color:"#ff4d4f"}}),(0,a.jsx)("span",{children:"ยืนยันการยกเลิกออเดอร์"})]}),content:(0,a.jsxs)("div",{style:{marginTop:16},children:[(0,a.jsx)(el,{children:"คุณต้องการยกเลิกออเดอร์นี้หรือไม่?"}),(0,a.jsx)("div",{style:{marginTop:12,padding:12,background:"rgba(255, 77, 79, 0.05)",borderRadius:8,border:"1px solid rgba(255, 77, 79, 0.1)"},children:(0,a.jsxs)(el,{type:"secondary",style:{fontSize:13},children:["ผู้สั่ง: ",(0,a.jsx)("strong",{children:(null===(t=e.ordered_by)||void 0===t?void 0:t.name)||(null===(r=e.ordered_by)||void 0===r?void 0:r.username)})]})})]}),okText:"ยืนยันยกเลิก",cancelText:"ไม่ยกเลิก",okButtonProps:{danger:!0},centered:!0,onOk:async()=>{try{if(!(await fetch("/api/stock/orders/".concat(e.id,"/status"),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":B},body:JSON.stringify({status:C.i.CANCELLED})})).ok)throw Error("Failed to cancel order");o.ZP.success("ยกเลิกออเดอร์สำเร็จ")}catch(e){o.ZP.error("ยกเลิกออเดอร์ล้มเหลว")}}})},Y=e.reduce((e,t)=>{var r;return e+((null===(r=t.ordersItems)||void 0===r?void 0:r.length)||0)},0),ee=[{title:(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(w.Z,{}),(0,a.jsx)("span",{children:"ผู้สั่ง"})]}),dataIndex:"ordered_by",key:"ordered_by",width:140,render:e=>{var t;let r=(null==e?void 0:e.name)||(null==e?void 0:e.username)||"Unknown";return(0,a.jsxs)(l.Z,{children:[(0,a.jsx)("div",{style:{width:32,height:32,borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:600,fontSize:14},children:(null===(t=r.charAt(0))||void 0===t?void 0:t.toUpperCase())||"?"}),(0,a.jsx)(el,{strong:!0,style:{fontSize:14},children:r})]})}},{title:(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(S.Z,{}),(0,a.jsx)("span",{children:"รายการสินค้า"})]}),dataIndex:"ordersItems",key:"items",render:e=>(0,a.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:4},children:[(e||[]).slice(0,3).map(e=>{var t,r,s,n;return(0,a.jsxs)("span",{className:"order-item-badge",children:[(0,a.jsx)(c.Z,{src:(null===(t=e.ingredient)||void 0===t?void 0:t.img_url)||"https://placehold.co/32x32/f5f5f5/999999?text=\uD83D\uDCE6",size:24,shape:"square",style:{borderRadius:6,marginRight:8}}),(0,a.jsx)(el,{strong:!0,style:{color:"#5b6af8",fontSize:13},children:null===(r=e.ingredient)||void 0===r?void 0:r.display_name}),(0,a.jsxs)(el,{style:{color:"#8c8c8c",marginLeft:6,fontSize:12},children:["\xd7",e.quantity_ordered," ",null===(n=e.ingredient)||void 0===n?void 0:null===(s=n.unit)||void 0===s?void 0:s.display_name]})]},e.id)}),e&&e.length>3&&(0,a.jsx)(u.Z,{title:e.slice(3).map(e=>{var t;return null===(t=e.ingredient)||void 0===t?void 0:t.display_name}).join(", "),children:(0,a.jsxs)(h.Z,{color:"purple",style:{borderRadius:20,cursor:"pointer"},children:["+",e.length-3," รายการ"]})})]})},{title:"สถานะ",dataIndex:"status",key:"status",width:110,render:e=>{let t={color:"default",icon:(0,a.jsx)(E.Z,{}),text:e};return e===C.i.PENDING&&(t={color:"warning",icon:(0,a.jsx)(E.Z,{}),text:"รอดำเนินการ"}),e===C.i.COMPLETED&&(t={color:"success",icon:(0,a.jsx)(S.Z,{}),text:"เสร็จสิ้น"}),e===C.i.CANCELLED&&(t={color:"error",icon:(0,a.jsx)(j.Z,{}),text:"ยกเลิก"}),(0,a.jsx)(h.Z,{color:t.color,icon:t.icon,style:{borderRadius:20,padding:"4px 12px",fontWeight:500,fontSize:13},children:t.text})}},{title:(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(P.Z,{}),(0,a.jsx)("span",{children:"วันที่สั่ง"})]}),dataIndex:"create_date",key:"create_date",width:150,render:e=>(0,a.jsxs)(el,{type:"secondary",style:{fontSize:13},children:[new Date(e).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric"}),(0,a.jsx)("br",{}),(0,a.jsx)(el,{style:{fontSize:12,color:"#bfbfbf"},children:new Date(e).toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})})]})},{title:"การจัดการ",key:"actions",width:280,render:(e,t)=>(0,a.jsxs)(l.Z,{size:8,wrap:!0,children:[(0,a.jsx)(u.Z,{title:"ดูรายละเอียด",children:(0,a.jsx)(f.ZP,{className:"action-btn",size:"middle",icon:(0,a.jsx)(T.Z,{}),onClick:()=>F(t),style:{borderColor:"#667eea",color:"#667eea"},children:"ดู"})}),((null==D?void 0:D.role)==="Admin"||(null==D?void 0:D.role)==="Manager")&&(0,a.jsx)(u.Z,{title:"ดำเนินการสั่งซื้อ",children:(0,a.jsx)(f.ZP,{className:"action-btn",type:"primary",size:"middle",icon:(0,a.jsx)(Z.Z,{}),disabled:t.status!==C.i.PENDING,onClick:()=>N.push("/stock/buying?orderId=".concat(t.id)),style:{background:"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)",borderColor:"transparent",boxShadow:"0 2px 8px rgba(82, 196, 26, 0.3)"},children:"สั่งซื้อ"})}),(0,a.jsx)(u.Z,{title:"แก้ไขออเดอร์",children:(0,a.jsx)(f.ZP,{className:"action-btn",type:"primary",ghost:!0,size:"middle",icon:(0,a.jsx)(O.Z,{}),disabled:t.status!==C.i.PENDING,onClick:()=>H(t),children:"แก้ไข"})}),(0,a.jsx)(u.Z,{title:"ยกเลิกออเดอร์",children:(0,a.jsx)(f.ZP,{className:"action-btn",danger:!0,size:"middle",icon:(0,a.jsx)(j.Z,{}),disabled:t.status!==C.i.PENDING,onClick:()=>J(t),children:"ยกเลิก"})})]})}];return(0,a.jsxs)("div",{style:{padding:"24px",paddingBottom:120,minHeight:"100vh",background:"linear-gradient(180deg, #f8f9fc 0%, #f0f2f5 100%)"},children:[(0,a.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto"},children:[(0,a.jsx)(ei.Z,{title:(0,ed.t)("stock.title"),subtitle:(0,ed.t)("stock.subtitleCount",{count:e.length}),icon:(0,a.jsx)(E.Z,{}),actions:(0,a.jsx)(f.ZP,{icon:(0,a.jsx)(_.Z,{}),onClick:L,loading:r,children:(0,ed.t)("queue.refresh")})}),(0,a.jsx)(ea.Z,{children:(0,a.jsxs)(en.Z,{children:[(0,a.jsx)(es.Z,{title:(0,ed.t)("stock.title"),children:(0,a.jsxs)(p.Z,{gutter:[16,16],children:[(0,a.jsx)(b.Z,{xs:12,sm:8,md:6,children:(0,a.jsx)(m.Z,{className:"status-card",size:"small",styles:{body:{padding:16}},children:(0,a.jsx)(x.Z,{title:(0,a.jsx)(el,{type:"secondary",style:{fontSize:13},children:(0,ed.t)("stock.title")}),value:r?"-":e.length,prefix:(0,a.jsx)(y.Z,{status:"processing"}),styles:{content:{color:"#667eea",fontWeight:700,fontSize:28}}})})}),(0,a.jsx)(b.Z,{xs:12,sm:8,md:6,children:(0,a.jsx)(m.Z,{className:"status-card",size:"small",styles:{body:{padding:16}},children:(0,a.jsx)(x.Z,{title:(0,a.jsx)(el,{type:"secondary",style:{fontSize:13},children:(0,ed.t)("stock.totalItems")}),value:r?"-":Y,prefix:(0,a.jsx)(y.Z,{status:"success"}),styles:{content:{color:"#52c41a",fontWeight:700,fontSize:28}}})})})]})}),(0,a.jsx)(es.Z,{title:(0,ed.t)("stock.title"),children:(0,a.jsx)(m.Z,{variant:"borderless",style:{borderRadius:20,boxShadow:"0 4px 24px rgba(0, 0, 0, 0.06)",overflow:"hidden"},styles:{body:{padding:0}},children:r?(0,a.jsx)(()=>(0,a.jsx)("div",{children:[1,2,3].map(e=>(0,a.jsxs)("div",{style:{padding:16,borderBottom:"1px solid rgba(0,0,0,0.04)",display:"flex",alignItems:"center",gap:16},children:[(0,a.jsx)(g.Z.Avatar,{active:!0,size:40}),(0,a.jsx)(g.Z,{active:!0,paragraph:{rows:1,width:["80%"]},title:!1})]},e))}),{}):I?(0,a.jsx)(eo.Z,{status:"error",title:I,onRetry:L}):0===e.length?(0,a.jsx)(eo.Z,{status:"empty",title:(0,ed.t)("stock.empty"),action:(0,a.jsx)(f.ZP,{type:"primary",icon:(0,a.jsx)(Z.Z,{}),size:"large",onClick:()=>N.push("/"),style:{borderRadius:10,height:48,paddingInline:32,fontWeight:600},children:(0,ed.t)("stock.emptyAction")})}):(0,a.jsx)(a.Fragment,{children:A?(0,a.jsx)("div",{style:{padding:16,display:"grid",gap:12},children:e.map(e=>{var t,r,s;return(0,a.jsx)(m.Z,{size:"small",style:{borderRadius:16,boxShadow:"0 6px 18px rgba(0,0,0,0.05)"},children:(0,a.jsxs)(l.Z,{direction:"vertical",size:6,style:{width:"100%"},children:[(0,a.jsxs)(el,{strong:!0,children:["#",e.id.slice(0,6)]}),(0,a.jsx)(el,{type:"secondary",children:(null===(t=e.ordered_by)||void 0===t?void 0:t.name)||(null===(r=e.ordered_by)||void 0===r?void 0:r.username)||"-"}),(0,a.jsxs)(el,{children:[(0,ed.t)("stock.itemsLabel"),": ",(null===(s=e.ordersItems)||void 0===s?void 0:s.length)||0]}),(0,a.jsx)(el,{type:"secondary",children:new Date(e.create_date).toLocaleString("th-TH")}),(0,a.jsx)(h.Z,{color:e.status===C.i.PENDING?"warning":e.status===C.i.COMPLETED?"success":"error",children:e.status===C.i.PENDING?(0,ed.t)("stock.status.pending"):e.status===C.i.COMPLETED?(0,ed.t)("stock.status.completed"):(0,ed.t)("stock.status.cancelled")}),(0,a.jsxs)(l.Z,{wrap:!0,children:[(0,a.jsx)(f.ZP,{size:"small",icon:(0,a.jsx)(T.Z,{}),onClick:()=>F(e),children:(0,ed.t)("stock.view")}),(0,a.jsx)(f.ZP,{size:"small",type:"primary",icon:(0,a.jsx)(Z.Z,{}),disabled:e.status!==C.i.PENDING,onClick:()=>N.push("/stock/buying?orderId=".concat(e.id)),children:(0,ed.t)("stock.buy")})]})]})},e.id)})}):(0,a.jsx)(k.Z,{dataSource:e,columns:ee,rowKey:"id",scroll:{x:900},pagination:{pageSize:10,showSizeChanger:!0,showTotal:(e,t)=>(0,a.jsxs)(el,{type:"secondary",children:[t[0],"-",t[1]," / ",e]})},className:"items-table",locale:{emptyText:(0,a.jsx)(v.Z,{description:(0,ed.t)("stock.empty")})}})})})})]})})]}),(0,a.jsx)(Q,{open:!!U,order:U,onClose:()=>H(null),onSuccess:L}),(0,a.jsx)(V.Z,{open:!!q,order:q,onClose:()=>F(null)}),(0,a.jsx)(er,{})]})}},27623:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var a=r(57437);r(2265);var s=r(10868),n=r(87530);function i(e){let{children:t,gap:r=n.H.sectionGap,style:i}=e;return(0,a.jsx)(s.Z,{vertical:!0,gap:r,style:i,children:t})}},30290:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var a=r(57437);r(2265);var s=r(39486),n=r(10868),i=r(48651),o=r(71047),d=r(50742),l=r(87530),c=r(36799);let{Text:u}=s.default;function h(e){let{status:t,title:r,description:s,onRetry:h,action:f,style:g}=e;return"loading"===t?(0,a.jsxs)(n.Z,{align:"center",justify:"center",style:{minHeight:200,...g,gap:12},children:[(0,a.jsx)(i.Z,{size:"large"}),(0,a.jsx)(u,{type:"secondary",children:r||(0,c.t)("network.loading")})]}):"error"===t?(0,a.jsx)(o.ZP,{status:"error",title:r||(0,c.t)("page.error"),subTitle:s,extra:f||(h?(0,a.jsx)(d.ZP,{type:"primary",onClick:h,children:(0,c.t)("page.retry")}):void 0),style:{padding:l.H.pagePaddingY,...g}}):(0,a.jsx)(o.ZP,{status:"info",title:r||(0,c.t)("page.empty"),subTitle:s,extra:f,style:{padding:l.H.pagePaddingY,...g}})}},71567:function(e,t,r){"use strict";r.d(t,{q:function(){return s},v:function(){return a}});let a="/api",s={AUTH:{LOGIN:"/auth/login",LOGOUT:"/auth/logout",ME:"/auth/me",CSRF:"/csrf",SWITCH_BRANCH:"/auth/switch-branch"},AUDIT:{LOGS:"/audit/logs"},POS:{PRODUCTS:"/pos/products",ORDERS:"/pos/orders",TABLES:"/pos/tables",DISCOUNTS:"/pos/discounts",DELIVERY:"/pos/delivery",PAYMENT_METHODS:"/pos/paymentMethod",PAYMENTS:"/pos/payments",CATEGORY:"/pos/category",SHIFTS:{BASE:"/pos/shifts",CURRENT:"/pos/shifts/current",OPEN:"/pos/shifts/open",CLOSE:"/pos/shifts/close"},DASHBOARD:{SALES:"/pos/dashboard/sales",TOP_ITEMS:"/pos/dashboard/top-items"},CHANNELS:{STATS:"/pos/orders/stats"},SHOP_PROFILE:"/pos/shopProfile",SALES_ORDER_ITEMS:"/pos/salesOrderItem",SALES_ORDER_DETAILS:"/pos/salesOrderDetail",PRODUCTS_UNIT:"/pos/productsUnit",PAYMENT_DETAILS:"/pos/paymentDetails",BRANCH:"/branches",ORDER_QUEUE:"/pos/queue"}}},2913:function(e,t,r){"use strict";function a(e,t){return({GET:"".concat(s.API_BASE_URL).concat(t),POST:"".concat(s.API_BASE_URL).concat(t),PUT:"".concat(s.API_BASE_URL).concat(t),DELETE:"".concat(s.API_BASE_URL).concat(t),PATCH:"".concat(s.API_BASE_URL).concat(t)})[e]}r.d(t,{b:function(){return a}});let s={get API_BASE_URL(){return"/api"}}},5447:function(e,t,r){"use strict";r.d(t,{O:function(){return i}});var a=r(71567),s=r(2913),n=r(98170);let i={login:async(e,t,r)=>{try{let o=(0,s.b)("POST",a.q.AUTH.LOGIN),d={"Content-Type":"application/json"};t&&(d["X-CSRF-Token"]=t),r&&(d.Cookie=r);let l=await fetch(o,{method:"POST",headers:d,credentials:"include",body:JSON.stringify(e)});if(!l.ok){var i;let e=await l.json().catch(()=>({})),t=(null==e?void 0:null===(i=e.error)||void 0===i?void 0:i.message)||e.message||e.detail||"Login failed";throw Error(t)}let c=(0,n.hH)(await l.json());return{...c.user,token:c.token}}catch(e){throw Error(e.message||"เข้าสู่ระบบไม่สำเร็จ")}},logout:async(e,t,r)=>{try{let n=(0,s.b)("POST",a.q.AUTH.LOGOUT),i={"Content-Type":"application/json"};e&&(i.Authorization="Bearer ".concat(e)),t&&(i["X-CSRF-Token"]=t),r&&(i.Cookie=r),await fetch(n,{method:"POST",headers:i,credentials:"include"})}catch(e){console.error("Logout failed",e)}},switchBranch:async(e,t,r)=>{let i=(0,s.b)("POST",a.q.AUTH.SWITCH_BRANCH),o={"Content-Type":"application/json"};t&&(o["X-CSRF-Token"]=t),r&&(o.Cookie=r);let d=await fetch(i,{method:"POST",headers:o,credentials:"include",body:JSON.stringify({branch_id:e})});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error((0,n.i_)(e,"Failed to switch branch"))}return(0,n.hH)(await d.json())},getMe:async e=>{try{let t=(0,s.b)("GET",a.q.AUTH.ME),r={"Content-Type":"application/json"};e&&(r.Authorization="Bearer ".concat(e));let i=await fetch(t,{method:"GET",headers:r,credentials:"include",cache:"no-store"});if(!i.ok)throw Error("Unauthorized");return(0,n.hH)(await i.json())}catch(e){throw e}},async getCsrfToken(){try{let e=await fetch("".concat(a.v).concat(a.q.AUTH.CSRF),{credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({}));return console.error("CSRF token fetch failed:",e.status,t),""}let t=await e.json();if(t.success&&t.csrfToken||t.csrfToken)return t.csrfToken;return""}catch(e){return console.error("Failed to fetch CSRF token",e),""}}}},76155:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});var a=r(2913),s=r(98170);let n="/stock/orders",i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",r={};return t&&(r["Content-Type"]=t),e&&(r.Cookie=e),r},o={createOrder:async(e,t,r)=>{let o=(0,a.b)("POST",n),d=i(t);r&&(d["X-CSRF-Token"]=r);let l=await fetch(o,{method:"POST",headers:d,body:JSON.stringify(e)});if(!l.ok){let e=await l.text();console.error("Backend Error [createOrder]:",{status:l.status,statusText:l.statusText,url:o,body:e});let t={};try{t=JSON.parse(e)}catch(e){}throw Error((0,s.i_)(t,"ไม่สามารถสร้างออเดอร์ได้ (".concat(l.status,")")))}return(0,s.hH)(await l.json())},getAllOrders:async(e,t)=>{let r=(0,a.b)("GET",n);t&&(r+="?".concat(t.toString()));let o=i(e,""),d=await fetch(r,{cache:"no-store",headers:o});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error((0,s.i_)(e,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}return(0,s.XO)(await d.json())},getOrderById:async(e,t)=>{let r=(0,a.b)("GET","".concat(n,"/").concat(e)),o=i(t,""),d=await fetch(r,{cache:"no-store",headers:o});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error((0,s.i_)(e,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}return(0,s.hH)(await d.json())},updateStatus:async(e,t,r,o)=>{let d=(0,a.b)("PUT","".concat(n,"/").concat(e,"/status")),l=i(r);o&&(l["X-CSRF-Token"]=o);let c=await fetch(d,{method:"PUT",headers:l,body:JSON.stringify({status:t})});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error((0,s.i_)(e,"ไม่สามารถอัปเดตสถานะออเดอร์ได้"))}return(0,s.hH)(await c.json())},updateOrder:async(e,t,r,o)=>{let d=(0,a.b)("PUT","".concat(n,"/").concat(e)),l=i(r);o&&(l["X-CSRF-Token"]=o);let c=await fetch(d,{method:"PUT",headers:l,body:JSON.stringify({items:t})});if(!c.ok){let e=await c.text();throw Error("Failed to update order: ".concat(c.status," ").concat(e))}return(0,s.hH)(await c.json())},confirmPurchase:async(e,t,r,o,d)=>{let l=(0,a.b)("POST","".concat(n,"/").concat(e,"/purchase")),c=i(o);d&&(c["X-CSRF-Token"]=d);let u=await fetch(l,{method:"POST",headers:c,body:JSON.stringify({items:t,purchased_by_id:r})});if(!u.ok){let e=await u.text();throw Error("Failed to confirm purchase: ".concat(u.status," ").concat(e))}return(0,s.hH)(await u.json())},updatePurchaseDetail:async(e,t)=>{let r=(0,a.b)("POST","/stock/ordersDetail/update"),n=i(t),o=await fetch(r,{method:"POST",headers:n,body:JSON.stringify(e)});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error((0,s.i_)(e,"ไม่สามารถอัปเดตข้อมูลการซื้อได้"))}return(0,s.hH)(await o.json())},deleteOrder:async(e,t,r)=>{let s=(0,a.b)("DELETE","".concat(n,"/").concat(e)),o=i(t,"");r&&(o["X-CSRF-Token"]=r);let d=await fetch(s,{method:"DELETE",headers:o});if(!d.ok){let e=await d.text();throw Error("Failed to delete order: ".concat(d.status," ").concat(e))}}}},98170:function(e,t,r){"use strict";function a(e){return!!e&&"object"==typeof e}function s(e){return e&&"object"==typeof e&&"success"in e&&!0===e.success&&"data"in e?e.data:e}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Request failed";if("string"==typeof e)return e;if(!a(e))return t;if(!1===e.success){let t=e.error;if(a(t)&&"string"==typeof t.message&&t.message.trim())return t.message}if("error"in e){let t=e.error;if("string"==typeof t&&t.trim())return t;if(a(t)&&"string"==typeof t.message&&t.message.trim())return t.message}return"string"==typeof e.message&&e.message.trim()?e.message:t}function i(e){if(e&&"object"==typeof e&&"success"in e&&!0===e.success&&Array.isArray(e.data)){var t,r,a,s;let n="number"==typeof(null===(t=e.meta)||void 0===t?void 0:t.total)?e.meta.total:e.data.length,i="number"==typeof(null===(r=e.meta)||void 0===r?void 0:r.page)?e.meta.page:1,o="number"==typeof(null===(a=e.meta)||void 0===a?void 0:a.limit)?e.meta.limit:50,d="number"==typeof(null===(s=e.meta)||void 0===s?void 0:s.totalPages)?e.meta.totalPages:Math.max(Math.ceil(n/Math.max(o,1)),1);return{data:e.data,total:n,page:i,last_page:d}}return e}r.d(t,{XO:function(){return i},hH:function(){return s},i_:function(){return n}})},36799:function(e,t,r){"use strict";r.d(t,{t:function(){return s}});var a=JSON.parse('{"auth.loadingLogin":"กำลังเข้าสู่ระบบ...","auth.loadingLogout":"กำลังออกจากระบบ...","network.loading":"กำลังดึงข้อมูล...","network.offline":"ไม่มีการเชื่อมต่ออินเทอร์เน็ต แอปกำลังทำงานแบบออฟไลน์","network.newVersion":"มีเวอร์ชันใหม่พร้อมใช้งาน กดรีเฟรชเพื่ออัปเดต","delivery.loadingOrders":"กำลังโหลดออเดอร์...","delivery.selectProvider":"เลือกผู้ให้บริการ (Delivery Provider)","delivery.selectProviderPlaceholder":"เลือกผู้ให้บริการ","delivery.orderCode":"รหัสเดลิเวอรี่ / Order Code","delivery.enterOrderCode":"ระบุรหัสออเดอร์ (เช่น 123)","delivery.createOrder":"เปิดออเดอร์เดลิเวอรี่","delivery.createOrderSubtitle":"กรอกข้อมูลเพื่อสร้างออเดอร์ใหม่","delivery.noProviders":"ยังไม่มีผู้ให้บริการเดลิเวอรี่","delivery.retry":"ลองใหม่","delivery.noOrders":"ไม่มีออเดอร์เดลิเวอรี่","delivery.addOrder":"เพิ่มออเดอร์","delivery.createNewOrder":"สร้างออเดอร์ใหม่","orders.loading":"กำลังโหลดข้อมูลออเดอร์...","orders.error":"โหลดข้อมูลออเดอร์ไม่สำเร็จ","orders.empty":"ไม่พบรายการออเดอร์","orders.searchPlaceholder":"ค้นหาเลขที่ออเดอร์ โต๊ะ หรือรหัสอ้างอิง","queue.loading":"กำลังโหลดคิว...","queue.error":"โหลดคิวไม่สำเร็จ","queue.empty":"ยังไม่มีออเดอร์ในคิว","queue.refresh":"รีเฟรช","queue.reorder":"จัดเรียง","queue.filter":"กรองสถานะ","queue.pending":"รอ","queue.processing":"กำลังดำเนินการ","queue.completed":"เสร็จสิ้น","queue.cancelled":"ยกเลิก","queue.priority.low":"ต่ำ","queue.priority.normal":"ปกติ","queue.priority.high":"สูง","queue.priority.urgent":"ด่วน","queue.updateStatusSuccess":"อัปเดตสถานะสำเร็จ","queue.updateStatusError":"อัปเดตสถานะไม่สำเร็จ","queue.addSuccess":"เพิ่มเข้าคิวสำเร็จ","queue.addError":"เพิ่มเข้าคิวไม่สำเร็จ","queue.removeSuccess":"ลบออกจากคิวสำเร็จ","queue.removeError":"ลบออกจากคิวไม่สำเร็จ","queue.reorderSuccess":"จัดเรียงคิวใหม่สำเร็จ","queue.reorderError":"จัดเรียงคิวใหม่ไม่สำเร็จ","stock.loading":"กำลังโหลดคำสั่งซื้อสต๊อก...","stock.error":"โหลดข้อมูลสต๊อกไม่สำเร็จ","stock.empty":"ยังไม่มีคำสั่งซื้อสต๊อก","stock.title":"คำสั่งซื้อสต๊อก","stock.subtitleCount":"{{count}} คำสั่งซื้อ","stock.totalItems":"จำนวนรายการรวม","stock.createdBy":"ผู้สร้าง","stock.items":"รายการ","stock.status":"สถานะ","stock.createdAt":"วันที่สร้าง","stock.actions":"จัดการ","stock.view":"ดู","stock.buy":"ซื้อ","stock.edit":"แก้ไข","stock.cancel":"ยกเลิก","stock.emptyAction":"ไปหน้าหลัก","stock.status.pending":"รอดำเนินการ","stock.status.completed":"เสร็จสิ้น","stock.status.cancelled":"ยกเลิก","stock.itemsLabel":"รายการ","stock.statusLabel":"สถานะ","users.title":"ผู้ใช้","users.subtitle":"{{count}} คน","users.add":"เพิ่มผู้ใช้","users.refresh":"รีเฟรช","users.empty":"ยังไม่มีผู้ใช้","users.noPermission":"คุณไม่มีสิทธิ์เข้าถึงหน้านี้","users.headerTitle":"จัดการผู้ใช้","users.headerSubtitle":"จัดการสิทธิ์และสถานะผู้ใช้ทั้งหมด","users.stats.total":"ผู้ใช้ทั้งหมด","users.stats.active":"เปิดใช้งาน/ใช้งานได้","users.stats.online":"กำลังใช้งาน","users.card.edit":"แก้ไข","users.card.delete":"ลบ","users.card.active":"เปิดใช้งาน","users.card.inactive":"ปิดใช้งาน","users.card.canUse":"อนุญาตใช้งาน","users.card.cannotUse":"ไม่อนุญาต","users.card.lastLogin":"เข้าสู่ระบบล่าสุด","page.retry":"ลองอีกครั้ง","page.empty":"ไม่มีข้อมูล","page.error":"เกิดข้อผิดพลาด","kitchen.soundBlocked":"เบราว์เซอร์บล็อกเสียงแจ้งเตือน","kitchen.soundOff":"ปิดเสียงแจ้งเตือน","kitchen.soundOn":"เปิดเสียงแจ้งเตือน","dashboard.title":"ภาพรวมยอดขาย","dashboard.subtitle":"สรุปยอดขายทุกช่องทาง","dashboard.reload":"รีเฟรช","dashboard.loading":"กำลังโหลดข้อมูล...","dashboard.totalSales":"ยอดขายรวม","dashboard.orders":"{{count}} ออเดอร์","dashboard.discount":"ส่วนลด ฿{{amount}}","dashboard.channel.dineIn":"ทานที่ร้าน","dashboard.channel.takeAway":"กลับบ้าน","dashboard.channel.delivery":"เดลิเวอรี่","dashboard.topProducts":"สินค้าขายดี","dashboard.topProducts.empty":"ยังไม่มีข้อมูลสินค้า","dashboard.recentOrders":"ออเดอร์ล่าสุด","dashboard.recentOrders.empty":"ยังไม่มีออเดอร์","dashboard.viewDetails":"ดูรายละเอียด","dashboard.dailySales":"ยอดขายรายวัน","dashboard.dailySales.date":"วันที่","dashboard.dailySales.orders":"ออเดอร์","dashboard.dailySales.sales":"ยอดขาย","dashboard.export.pdf":"PDF","dashboard.export.excel":"Excel","dashboard.exportPDF.loading":"กำลังสร้าง PDF...","dashboard.exportPDF.success":"ส่งออก PDF สำเร็จ","dashboard.exportPDF.error":"เกิดข้อผิดพลาดในการส่งออก PDF","dashboard.exportExcel.loading":"กำลังสร้าง Excel...","dashboard.exportExcel.success":"ส่งออก Excel สำเร็จ","dashboard.exportExcel.error":"เกิดข้อผิดพลาดในการส่งออก Excel","dashboard.paymentMethod":"\uD83D\uDCB3 {{method}}","branch.loading":"กำลังดึงข้อมูลสาขา...","branch.noPermission":"คุณไม่มีสิทธิ์เข้าถึงหน้าสาขา","branch.delete.title":"ยืนยันลบสาขา","branch.delete.content":"ต้องการลบสาขา \\"{{name}}\\" หรือไม่?","branch.delete.ok":"ลบ","branch.delete.cancel":"ยกเลิก","branch.delete.success":"ลบสาขา \\"{{name}}\\" แล้ว","branch.delete.error":"ไม่สามารถลบสาขาได้","branch.switch.success":"สลับไปยังสาขา \\"{{name}}\\" แล้ว","branch.switch.loading":"กำลังสลับสาขา...","branch.page.title":"สาขา","branch.page.subtitle":"{{count}} สาขา","branch.hero.title":"จัดการสาขา","branch.hero.subtitle":"ดูแลข้อมูลสาขาทั้งหมดในระบบ","branch.actions.refresh":"รีเฟรช","branch.actions.add":"เพิ่มสาขา","branch.section.listTitle":"สาขาทั้งหมด","branch.section.countTag":"{{filtered}} / {{total}} สาขา","branch.empty.filtered.title":"ไม่พบสาขาที่ค้นหา","branch.empty.filtered.description":"ลองลบตัวกรองหรือค้นหาด้วยคำอื่น เช่น ชื่อ รหัสสาขา ที่อยู่ หรือเบอร์โทร","branch.empty.default.title":"ยังไม่มีสาขา","branch.empty.default.description":"เพิ่มสาขาแรกเพื่อเริ่มใช้งาน POS ได้เลย","branch.empty.reset":"ล้างตัวกรอง","branch.empty.add":"เพิ่มสาขาใหม่","branch.stats.total":"สาขาทั้งหมด","branch.stats.active":"เปิดใช้งาน","branch.stats.inactive":"ปิดการใช้งาน","branch.card.switch":"สลับ","branch.card.edit":"แก้ไข","branch.card.delete":"ลบ","branch.card.switchTooltip":"สลับไปสาขานี้","branch.card.editTooltip":"แก้ไขข้อมูลสาขา","branch.card.deleteTooltip":"ลบสาขา","branch.card.addressFallback":"ไม่มีที่อยู่","branch.card.phoneFallback":"ไม่มีหมายเลขโทรศัพท์","branch.card.active":"เปิดใช้งานอยู่","branch.card.inactive":"ปิดใช้งานอยู่","branch.card.taxId":"เลขประจำตัวผู้เสียภาษี","branch.search.placeholder":"ค้นหาสาขา (ชื่อ รหัส ที่อยู่ หรือเบอร์โทร)","branch.search.filter.all":"ทั้งหมด","branch.search.filter.active":"เปิดใช้งาน","branch.search.filter.inactive":"ปิดใช้งาน","branch.search.result":"พบ {{count}} จาก {{total}} สาขา","branch.form.loadError":"ไม่สามารถดึงข้อมูลสาขาได้","branch.form.updateSuccess":"อัปเดตสาขาสำเร็จ","branch.form.createSuccess":"สร้างสาขาสำเร็จ","branch.form.saveError":"เกิดข้อผิดพลาดในการบันทึกข้อมูลสาขา","branch.form.deleteTitle":"ยืนยันการลบสาขา","branch.form.deleteContent":"คุณต้องการลบสาขานี้หรือไม่?","branch.form.deleteSuccess":"ลบสาขาสำเร็จ","branch.form.deleteError":"ไม่สามารถลบสาขาได้","branch.form.titleEdit":"แก้ไขสาขา","branch.form.titleCreate":"เพิ่มสาขา","branch.form.subtitle":"ข้อมูลสาขาสำหรับระบบ POS","branch.form.fields.nameLabel":"ชื่อสาขา *","branch.form.fields.nameRequired":"กรุณากรอกชื่อสาขา","branch.form.fields.namePlaceholder":"ระบุชื่อสาขา","branch.form.fields.codeLabel":"รหัสสาขา *","branch.form.fields.codeRequired":"กรุณากรอกรหัสสาขา","branch.form.fields.codePattern":"รหัสสาขาต้องเป็นตัวอักษรภาษาอังกฤษหรือตัวเลข","branch.form.fields.codePlaceholder":"เช่น B001","branch.form.fields.addressLabel":"ที่อยู่","branch.form.fields.addressPlaceholder":"ที่อยู่สาขา","branch.form.fields.phoneLabel":"เบอร์โทรศัพท์","branch.form.fields.phonePlaceholder":"02xxxxxxx","branch.form.fields.taxIdLabel":"เลขประจำตัวผู้เสียภาษี (Tax ID)","branch.form.fields.taxIdPlaceholder":"ระบุเลขผู้เสียภาษี","branch.form.fields.statusLabel":"สถานะ","branch.form.back":"ยกเลิก","branch.form.submitEdit":"บันทึกการแก้ไข","branch.form.submitCreate":"สร้างสาขา","users.manage.loadRolesError":"ไม่สามารถดึงข้อมูลบทบาทได้","users.manage.loadBranchesError":"ไม่สามารถดึงข้อมูลสาขาได้","users.manage.loadUserError":"ไม่สามารถดึงข้อมูลผู้ใช้ได้","users.manage.updateSuccess":"อัปเดตผู้ใช้สำเร็จ","users.manage.createSuccess":"สร้างผู้ใช้สำเร็จ","users.manage.saveErrorUpdate":"ไม่สามารถอัปเดตผู้ใช้ได้","users.manage.saveErrorCreate":"ไม่สามารถสร้างผู้ใช้ได้","users.manage.deleteSuccess":"ลบผู้ใช้สำเร็จ","users.manage.deleteError":"ไม่สามารถลบผู้ใช้ได้","users.manage.deleteTitle":"ลบผู้ใช้","users.manage.deleteDescription":"คุณต้องการลบผู้ใช้หรือไม่?","users.manage.deleteOk":"ใช่","users.manage.deleteCancel":"ยกเลิก","users.manage.deleteButton":"ลบผู้ใช้","users.manage.backToList":"กลับไปหน้าผู้ใช้","users.manage.headingEdit":"แก้ไขผู้ใช้","users.manage.headingCreate":"เพิ่มผู้ใช้","users.manage.form.usernameLabel":"ชื่อผู้ใช้","users.manage.form.usernameRequired":"กรุณากรอกชื่อผู้ใช้","users.manage.form.usernamePattern":"กรุณากรอกภาษาอังกฤษ ตัวเลข หรืออักขระพิเศษ (- _ @ .)","users.manage.form.usernamePlaceholder":"กรุณากรอกชื่อผู้ใช้","users.manage.form.nameLabel":"ชื่อ-นามสกุล / ชื่อเล่น","users.manage.form.nameRequired":"กรุณากรอกชื่อ-นามสกุล หรือ ชื่อเล่น","users.manage.form.namePlaceholder":"ระบุชื่อ (เช่น สมชาย หรือ น้องบี)","users.manage.form.passwordLabel":"รหัสผ่าน","users.manage.form.passwordLabelEdit":"รหัสผ่านใหม่ (ปล่อยว่างเพื่อไม่เปลี่ยนรหัสผ่าน)","users.manage.form.passwordRequired":"กรุณากรอกรหัสผ่าน","users.manage.form.passwordPattern":"กรุณากรอกภาษาอังกฤษ ตัวเลข หรืออักขระพิเศษเท่านั้น","users.manage.form.passwordPlaceholder":"กรุณากรอกรหัสผ่าน","users.manage.form.roleLabel":"บทบาท","users.manage.form.roleRequired":"กรุณาเลือกบทบาท","users.manage.form.rolePlaceholder":"เลือกบทบาท","users.manage.form.roleModalTitle":"เลือกบทบาท","users.manage.form.branchLabel":"สาขา","users.manage.form.branchRequired":"กรุณาเลือกสาขา","users.manage.form.branchPlaceholder":"เลือกสาขา","users.manage.form.branchModalTitle":"เลือกสาขา","users.manage.form.activeLabel":"สถานะ (Active)","users.manage.form.useLabel":"การใช้งาน (In Use)","users.manage.cancel":"ยกเลิก","users.manage.updateSubmit":"อัปเดตผู้ใช้","users.manage.createSubmit":"สร้างผู้ใช้","stock.ingredients.loading":"กำลังโหลดข้อมูลวัตถุดิบ...","stock.ingredients.loadError":"ไม่สามารถดึงข้อมูลวัตถุดิบได้","stock.ingredients.noPermission":"คุณไม่มีสิทธิ์เข้าถึงหน้านี้","stock.ingredients.deleteTitle":"ยืนยันการลบวัตถุดิบ","stock.ingredients.deleteContent":"คุณต้องการลบวัตถุดิบ \\"{{name}}\\" หรือไม่?","stock.ingredients.deleteSuccess":"ลบวัตถุดิบ \\"{{name}}\\" สำเร็จ","stock.ingredients.deleteError":"ไม่สามารถลบวัตถุดิบได้","stock.ingredients.deleting":"กำลังลบวัตถุดิบ...","stock.ingredients.checkingAuth":"กำลังตรวจสอบสิทธิ์การใช้งาน...","stock.ingredients.redirecting":"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับหน้าแรก...","stock.ingredients.title":"วัตถุดิบ","stock.ingredients.subtitle":"{{count}} รายการ","stock.ingredients.refresh":"รีเฟรช","stock.ingredients.add":"เพิ่มวัตถุดิบ","stock.ingredients.listTitle":"รายการวัตถุดิบ","stock.ingredients.emptyTitle":"ยังไม่มีวัตถุดิบ","stock.ingredients.emptyDescription":"เริ่มต้นด้วยการเพิ่มวัตถุดิบแรกของคุณ","stock.ingredients.emptyAction":"เพิ่มวัตถุดิบ","stock.ingredients.headerLabel":"จัดการข้อมูล","stock.ingredients.stats.total":"ทั้งหมด","stock.ingredients.stats.active":"ใช้งาน","stock.ingredients.stats.inactive":"ไม่ใช้งาน","common.checkingAuth":"กำลังตรวจสอบสิทธิ์การใช้งาน...","common.noPermissionRedirect":"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับหน้าแรก...","ingredientsUnit.title":"หน่วยวัตถุดิบ","ingredientsUnit.subtitle":"{{count}} หน่วย","ingredientsUnit.button.refresh":"รีเฟรช","ingredientsUnit.button.add":"เพิ่มหน่วยวัตถุดิบ","ingredientsUnit.section.list":"รายการหน่วยวัตถุดิบ","ingredientsUnit.loading":"กำลังโหลดหน่วยวัตถุดิบ...","ingredientsUnit.empty.title":"ยังไม่มีหน่วยวัตถุดิบ","ingredientsUnit.empty.desc":"เริ่มต้นด้วยการเพิ่มหน่วยวัตถุดิบแรกของคุณ","ingredientsUnit.fetch.error":"ไม่สามารถดึงข้อมูลหน่วยวัตถุดิบได้","ingredientsUnit.create.toast":"เพิ่มหน่วยวัตถุดิบ {{name}} แล้ว","ingredientsUnit.delete.title":"ยืนยันการลบหน่วยวัตถุดิบ","ingredientsUnit.delete.content":"ต้องการลบหน่วยวัตถุดิบ \\"{{name}}\\" หรือไม่?","ingredientsUnit.delete.ok":"ลบ","ingredientsUnit.delete.cancel":"ยกเลิก","ingredientsUnit.delete.success":"ลบหน่วยวัตถุดิบ \\"{{name}}\\" สำเร็จ","stockHistory.title":"ประวัติออเดอร์สต็อก","stockHistory.subtitle":"รายการที่เสร็จสิ้น/ยกเลิก","stockHistory.refresh":"รีเฟรช","stockHistory.sectionAll":"ประวัติทั้งหมด","stockHistory.count":"ทั้งหมด {{total}} รายการ","stockHistory.empty.title":"ยังไม่มีประวัติออเดอร์","stockHistory.empty.desc":"เมื่อมีรายการเสร็จสิ้น/ยกเลิก จะแสดงที่หน้านี้","stockHistory.delete.title":"ยืนยันการลบ","stockHistory.delete.content":"ต้องการลบประวัติออเดอร์ #{{code}} หรือไม่? ข้อมูลที่เกี่ยวข้องทั้งหมดจะถูกลบด้วย","stockHistory.delete.ok":"ลบ","stockHistory.delete.cancel":"ยกเลิก","stockHistory.delete.success":"ลบประวัติออเดอร์สำเร็จ","stockHistory.delete.error":"ลบประวัติออเดอร์ล้มเหลว","stockHistory.fetch.error":"ไม่สามารถโหลดประวัติออเดอร์ได้","stockHistory.paginationTotal":"ทั้งหมด {{total}} รายการ"}');function s(e,t){var r;let s=null!==(r=a[e])&&void 0!==r?r:e;return t?s.replace(/\{\{(\w+)\}\}/g,(e,r)=>{var a;return(null!==(a=t[r])&&void 0!==a?a:"").toString()}):s}}},function(e){e.O(0,[253,1522,3418,742,9486,4252,3916,8651,6931,4159,3831,2224,3248,2401,9,8879,4221,3834,5713,8056,4547,1652,1047,3106,2362,4193,2284,2971,2117,1744],function(){return e(e.s=95365)}),_N_E=e.O()}]);