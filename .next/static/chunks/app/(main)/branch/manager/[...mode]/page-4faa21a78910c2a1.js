(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8012],{89212:function(e,r,a){Promise.resolve().then(a.bind(a,54531))},54531:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return L}});var t=a(57437),n=a(2265),l=a(88589),s=a(19878),c=a(64625),d=a(48651),i=a(50742),o=a(47451),h=a(69410),m=a(66487),f=a(99376),b=a(29),u=a.n(b),x=a(60283),p=a(36799);let{Title:g,Text:j}=x.default,y={minHeight:"100vh",background:"#f8f9fc",paddingBottom:40},Z=()=>(0,t.jsx)(u(),{id:"d6a7379aac763388",children:".manage-form-card .ant-form-item-label label{font-weight:600;color:#374151}.manage-form-card .ant-input,.manage-form-card .ant-input-number,.manage-form-card .ant-select-selector{-webkit-border-radius:12px!important;-moz-border-radius:12px!important;border-radius:12px!important;padding-top:8px;padding-bottom:8px}"});var k=a(1665),v=a(14362),_=a(97235),C=a(25193),P=a(37410),w=a(20148);let{TextArea:I}=l.default;function L(e){let{params:r}=e,a=(0,f.useRouter)(),[b]=s.Z.useForm(),[u,x]=(0,n.useState)(!1),[g,j]=(0,n.useState)(!1),{user:L,loading:z}=(0,v.a)(),{message:E,modal:R}=c.Z.useApp(),T=r.mode[0],q=r.mode[1]||null,N="edit"===T&&!!q,S=(0,n.useCallback)(async()=>{x(!0);try{let e=await k.x.getById(q);b.setFieldsValue({branch_name:e.branch_name,branch_code:e.branch_code,address:e.address,phone:e.phone,tax_id:e.tax_id,is_active:e.is_active})}catch(e){console.error(e),E.error((0,p.t)("branch.form.loadError")),a.push("/branch")}finally{x(!1)}},[q,b,a,E]);(0,n.useEffect)(()=>{if(!z&&L){if("Admin"!==L.role){a.push("/");return}N&&S()}},[z,L,N,S,a]);let A=async e=>{j(!0);try{let r=await (0,_.P)();N?(await k.x.update(q,e,void 0,r),E.success((0,p.t)("branch.form.updateSuccess"))):(await k.x.create(e,void 0,r),E.success((0,p.t)("branch.form.createSuccess"))),a.push("/branch")}catch(e){console.error(e),E.error(e.message||(0,p.t)("branch.form.saveError"))}finally{j(!1)}},B=()=>a.push("/branch");return z||N&&u?(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f8f9fc"},children:(0,t.jsx)(d.Z,{size:"large"})}):(0,t.jsxs)("div",{style:y,children:[(0,t.jsx)(Z,{}),(0,t.jsx)(w.Z,{title:N?(0,p.t)("branch.form.titleEdit"):(0,p.t)("branch.form.titleCreate"),subtitle:(0,p.t)("branch.form.subtitle"),onBack:B,actions:N?(0,t.jsx)(i.ZP,{danger:!0,onClick:()=>{q&&R.confirm({title:(0,p.t)("branch.form.deleteTitle"),content:(0,p.t)("branch.form.deleteContent"),okText:(0,p.t)("branch.delete.ok"),okType:"danger",cancelText:(0,p.t)("branch.delete.cancel"),centered:!0,onOk:async()=>{try{let e=await (0,_.P)();await k.x.delete(q,void 0,e),E.success((0,p.t)("branch.form.deleteSuccess")),a.push("/branch")}catch(e){E.error((0,p.t)("branch.form.deleteError"))}}})},children:(0,p.t)("branch.delete.ok")}):void 0}),(0,t.jsx)(C.Z,{maxWidth:900,children:(0,t.jsx)("div",{className:"manage-form-card",children:(0,t.jsx)(P.Z,{children:(0,t.jsxs)(s.Z,{form:b,layout:"vertical",onFinish:A,requiredMark:!1,autoComplete:"off",initialValues:{is_active:!0},children:[(0,t.jsxs)(o.Z,{gutter:24,children:[(0,t.jsx)(h.Z,{xs:24,md:12,children:(0,t.jsx)(s.Z.Item,{name:"branch_name",label:(0,p.t)("branch.form.fields.nameLabel"),rules:[{required:!0,message:(0,p.t)("branch.form.fields.nameRequired")}],children:(0,t.jsx)(l.default,{size:"large",placeholder:(0,p.t)("branch.form.fields.namePlaceholder"),maxLength:100})})}),(0,t.jsx)(h.Z,{xs:24,md:12,children:(0,t.jsx)(s.Z.Item,{name:"branch_code",label:(0,p.t)("branch.form.fields.codeLabel"),rules:[{required:!0,message:(0,p.t)("branch.form.fields.codeRequired")},{pattern:/^[A-Za-z0-9]+$/,message:(0,p.t)("branch.form.fields.codePattern")}],children:(0,t.jsx)(l.default,{size:"large",placeholder:(0,p.t)("branch.form.fields.codePlaceholder"),maxLength:20})})})]}),(0,t.jsx)(s.Z.Item,{name:"address",label:(0,p.t)("branch.form.fields.addressLabel"),children:(0,t.jsx)(I,{rows:3,placeholder:(0,p.t)("branch.form.fields.addressPlaceholder"),style:{borderRadius:12}})}),(0,t.jsxs)(o.Z,{gutter:24,children:[(0,t.jsx)(h.Z,{xs:24,md:12,children:(0,t.jsx)(s.Z.Item,{name:"phone",label:(0,p.t)("branch.form.fields.phoneLabel"),children:(0,t.jsx)(l.default,{size:"large",placeholder:(0,p.t)("branch.form.fields.phonePlaceholder"),maxLength:20})})}),(0,t.jsx)(h.Z,{xs:24,md:12,children:(0,t.jsx)(s.Z.Item,{name:"tax_id",label:(0,p.t)("branch.form.fields.taxIdLabel"),children:(0,t.jsx)(l.default,{size:"large",placeholder:(0,p.t)("branch.form.fields.taxIdPlaceholder"),maxLength:50})})})]}),(0,t.jsx)(s.Z.Item,{name:"is_active",label:(0,p.t)("branch.form.fields.statusLabel"),valuePropName:"checked",children:(0,t.jsx)(m.Z,{checkedChildren:(0,p.t)("branch.stats.active"),unCheckedChildren:(0,p.t)("branch.stats.inactive")})}),(0,t.jsxs)("div",{style:{marginTop:32,display:"flex",justifyContent:"flex-end",gap:12},children:[(0,t.jsx)(i.ZP,{size:"large",onClick:B,style:{borderRadius:12,minWidth:100},children:(0,p.t)("branch.form.back")}),(0,t.jsx)(i.ZP,{type:"primary",htmlType:"submit",loading:g,size:"large",style:{borderRadius:12,minWidth:120,background:"#7c3aed",border:"none"},children:N?(0,p.t)("branch.form.submitEdit"):(0,p.t)("branch.form.submitCreate")})]})]})})})})]})}}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=89212)}),_N_E=e.O()}]);