(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1075],{28997:function(e,t,r){Promise.resolve().then(r.bind(r,76901))},76901:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var a=r(57437),n=r(2265),o=r(82646),s=r(64625),i=r(48651),l=r(50742),c=r(62376),d=r(99376),f=r(29),u=r.n(f),p=r(96931),x=r(45235),h=r(35713),y=r(89970),m=r(80009),b=r(89245),g=r(96473),j=r(13377),v=r(26349),k=r(36972),w=r(62273);let{Title:S,Text:T}=o.default,E={minHeight:"100vh",background:"#f8f9fc",paddingBottom:40},C={background:"linear-gradient(135deg, #7c3aed 0%, #a78bfa 100%)",padding:"30px 24px 80px",position:"relative",borderBottomLeftRadius:32,borderBottomRightRadius:32,marginBottom:-40,boxShadow:"0 10px 30px -10px rgba(124, 58, 237, 0.4)"},_={maxWidth:1200,margin:"0 auto",padding:"0 24px",position:"relative",zIndex:2},R=e=>({borderRadius:20,border:"none",overflow:"hidden",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",background:"#fff",boxShadow:e?"0 10px 30px rgba(124, 58, 237, 0.15)":"0 4px 20px rgba(0,0,0,0.05)",transform:e?"translateY(-4px)":"none",position:"relative"}),A=()=>(0,a.jsx)(u(),{id:"985ac2baae04cebc",children:"@-webkit-keyframes fadeInUp{from{opacity:0;-webkit-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeInUp{from{opacity:0;-moz-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeInUp{from{opacity:0;-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeInUp{from{opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}@-webkit-keyframes float{0%{-webkit-transform:translatey(0px);transform:translatey(0px)}50%{-webkit-transform:translatey(-10px);transform:translatey(-10px)}100%{-webkit-transform:translatey(0px);transform:translatey(0px)}}@-moz-keyframes float{0%{-moz-transform:translatey(0px);transform:translatey(0px)}50%{-moz-transform:translatey(-10px);transform:translatey(-10px)}100%{-moz-transform:translatey(0px);transform:translatey(0px)}}@-o-keyframes float{0%{-o-transform:translatey(0px);transform:translatey(0px)}50%{-o-transform:translatey(-10px);transform:translatey(-10px)}100%{-o-transform:translatey(0px);transform:translatey(0px)}}@keyframes float{0%{-webkit-transform:translatey(0px);-moz-transform:translatey(0px);-o-transform:translatey(0px);transform:translatey(0px)}50%{-webkit-transform:translatey(-10px);-moz-transform:translatey(-10px);-o-transform:translatey(-10px);transform:translatey(-10px)}100%{-webkit-transform:translatey(0px);-moz-transform:translatey(0px);-o-transform:translatey(0px);transform:translatey(0px)}}.decorative-shape{position:absolute;background:rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%}.shape-1{width:300px;height:300px;right:-100px;top:-100px}.shape-2{width:150px;height:150px;left:10%;bottom:20px;-webkit-animation:float 6s ease-in-out infinite;-moz-animation:float 6s ease-in-out infinite;-o-animation:float 6s ease-in-out infinite;animation:float 6s ease-in-out infinite}.action-btn{opacity:.7;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.action-btn:hover{opacity:1;-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}"}),I=e=>{let{onRefresh:t,onAdd:r}=e;return(0,a.jsxs)("div",{style:C,children:[(0,a.jsx)("div",{className:"decorative-shape shape-1"}),(0,a.jsx)("div",{className:"decorative-shape shape-2"}),(0,a.jsx)("div",{style:{maxWidth:1200,margin:"0 auto",position:"relative",zIndex:1},children:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[(0,a.jsx)("div",{style:{background:"rgba(255,255,255,0.2)",padding:10,borderRadius:14,display:"flex",backdropFilter:"blur(4px)"},children:(0,a.jsx)(c.Z,{style:{fontSize:28,color:"#fff"}})}),(0,a.jsx)(S,{level:2,style:{margin:0,color:"#fff",fontWeight:800},children:"จัดการสาขา"})]}),(0,a.jsx)(T,{style:{color:"rgba(255,255,255,0.9)",fontSize:16,display:"block",paddingLeft:4},children:"บริหารจัดการข้อมูลสาขาในระบบ"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,a.jsx)(l.ZP,{icon:(0,a.jsx)(b.Z,{}),onClick:t,size:"large",style:{background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.3)",color:"#fff",borderRadius:12,backdropFilter:"blur(4px)"},children:"รีเฟรช"}),(0,a.jsx)(l.ZP,{type:"primary",icon:(0,a.jsx)(g.Z,{}),onClick:r,size:"large",style:{background:"#fff",color:"#7c3aed",border:"none",borderRadius:12,fontWeight:600,boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},children:"เพิ่มสาขา"})]})]})})]})},P=e=>{let{totalBranches:t,activeBranches:r}=e;return(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16,marginTop:-40,marginBottom:32,position:"relative",zIndex:2,maxWidth:1200,marginLeft:"auto",marginRight:"auto",padding:"0 24px",justifyContent:"center"},children:[(0,a.jsx)(p.Z,{variant:"borderless",style:{borderRadius:16,boxShadow:"0 10px 30px rgba(0,0,0,0.08)"},children:(0,a.jsx)(x.Z,{title:(0,a.jsx)(T,{type:"secondary",children:"สาขาทั้งหมด"}),value:t,prefix:(0,a.jsx)(c.Z,{style:{color:"#8b5cf6",background:"#f5f3ff",padding:8,borderRadius:"50%"}}),styles:{content:{fontWeight:700}}})}),(0,a.jsx)(p.Z,{variant:"borderless",style:{borderRadius:16,boxShadow:"0 10px 30px rgba(0,0,0,0.08)"},children:(0,a.jsx)(x.Z,{title:(0,a.jsx)(T,{type:"secondary",children:"เปิดให้บริการ"}),value:r,styles:{content:{color:"#10b981",fontWeight:700}},prefix:(0,a.jsx)(h.Z,{status:"processing",color:"#10b981"})})})]})},O=e=>{let{branch:t,onEdit:r,onDelete:n}=e;return(0,a.jsxs)(p.Z,{hoverable:!0,style:R(t.is_active),styles:{body:{padding:20}},actions:[(0,a.jsx)(y.Z,{title:"แก้ไขข้อมูล",children:(0,a.jsx)(l.ZP,{type:"text",icon:(0,a.jsx)(j.Z,{style:{color:"#8b5cf6"}}),onClick:()=>r(t),children:"แก้ไข"})},"edit"),(0,a.jsx)(y.Z,{title:"ลบสาขา",children:(0,a.jsx)(l.ZP,{type:"text",danger:!0,icon:(0,a.jsx)(v.Z,{}),onClick:()=>n(t),children:"ลบ"})},"delete")],children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:16,marginBottom:16},children:[(0,a.jsx)("div",{style:{width:64,height:64,borderRadius:16,background:t.is_active?"#f5f3ff":"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",border:t.is_active?"2px solid #a78bfa":"2px solid transparent",transition:"all 0.3s ease"},children:(0,a.jsx)(c.Z,{style:{fontSize:28,color:t.is_active?"#7c3aed":"#9ca3af"}})}),(0,a.jsx)("div",{style:{flex:1},children:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(S,{level:4,style:{margin:0,marginBottom:4,color:"#1f2937"},children:t.branch_name}),(0,a.jsxs)(m.Z,{color:"purple",style:{borderRadius:12,border:"none",padding:"0 10px"},children:["Code: ",t.branch_code]})]}),(0,a.jsx)(y.Z,{title:t.is_active?"เปิดดำเนินการ":"ปิดปรับปรุง",children:t.is_active?(0,a.jsx)("div",{style:{width:12,height:12,borderRadius:"50%",background:"#10b981",boxShadow:"0 0 0 3px rgba(16, 185, 129, 0.2)"}}):(0,a.jsx)("div",{style:{width:12,height:12,borderRadius:"50%",background:"#d1d5db"}})})]})})]}),(0,a.jsxs)("div",{style:{background:"#f9fafb",padding:12,borderRadius:12},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[(0,a.jsx)(k.Z,{style:{color:"#9ca3af"}}),(0,a.jsx)(T,{ellipsis:!0,style:{color:"#4b5563",fontSize:13,flex:1},children:t.address||"-"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)(w.Z,{style:{color:"#9ca3af"}}),(0,a.jsx)(T,{style:{color:"#4b5563",fontSize:13},children:t.phone||"-"})]})]}),(0,a.jsxs)("div",{style:{marginTop:12,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)(T,{type:"secondary",style:{fontSize:12},children:["Tax ID: ",t.tax_id||"-"]}),t.is_active?(0,a.jsx)(m.Z,{color:"#10b981",style:{margin:0,borderRadius:12,border:"none"},children:"Active"}):(0,a.jsx)(m.Z,{style:{margin:0,borderRadius:12,border:"none",background:"#f3f4f6"},children:"Inactive"})]})]})};var Z=r(3369),z=r(14362),L=r(1665),D=r(97235),B=r(26972);let{Title:N,Text:U}=o.default;function F(){let e=(0,d.useRouter)(),[t,r]=(0,n.useState)([]),{showLoading:o,hideLoading:f}=(0,Z.x)(),{user:u,loading:p}=(0,z.a)(),{message:x,modal:h}=s.Z.useApp(),{execute:y}=(0,B.J)(),m=(0,n.useCallback)(async()=>{y(async()=>{r(await L.x.getAll())},"กำลังโหลดข้อมูลสาขา...")},[y]);(0,n.useEffect)(()=>{if(!p&&u){if("Admin"!==u.role){x.error("คุณไม่มีสิทธิ์เข้าถึงหน้านี้"),e.push("/");return}m()}},[u,p,e,m,x]);let b=()=>{o(),e.push("/branch/manager/add"),setTimeout(()=>f(),500)},g=t=>{e.push("/branch/manager/edit/".concat(t.id))},j=e=>{h.confirm({title:"ยืนยันการลบสาขา",content:'คุณต้องการลบสาขา "'.concat(e.branch_name,'" หรือไม่?'),okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,onOk:async()=>{try{let t=await (0,D.P)();await L.x.delete(e.id,void 0,t),x.success('ลบสาขา "'.concat(e.branch_name,'" สำเร็จ')),m()}catch(e){x.error("ไม่สามารถลบสาขาได้")}}})};if(p)return(0,a.jsx)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5"},children:(0,a.jsx)(i.Z,{size:"large"})});let v=t.filter(e=>e.is_active).length;return(0,a.jsxs)("div",{style:E,children:[(0,a.jsx)(A,{}),(0,a.jsx)(I,{onRefresh:m,onAdd:b}),(0,a.jsx)(P,{totalBranches:t.length,activeBranches:v}),(0,a.jsx)("div",{style:_,children:t.length>0?(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:24,justifyContent:"center"},children:t.map((e,t)=>(0,a.jsx)("div",{style:{animation:"fadeInUp 0.6s ease-out forwards",animationDelay:"".concat(50*t,"ms"),opacity:0},children:(0,a.jsx)(O,{branch:e,onEdit:g,onDelete:j})},e.id))}):(0,a.jsxs)("div",{style:{background:"white",borderRadius:20,padding:"60px 20px",textAlign:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.05)"},children:[(0,a.jsx)(c.Z,{style:{fontSize:64,color:"#e5e7eb",marginBottom:16}}),(0,a.jsx)(N,{level:3,style:{color:"#374151",margin:0},children:"ยังไม่มีข้อมูลสาขา"}),(0,a.jsx)(U,{type:"secondary",children:"เริ่มต้นด้วยการเพิ่มสาขาแรกของคุณ"}),(0,a.jsx)("div",{style:{marginTop:24},children:(0,a.jsx)(l.ZP,{type:"primary",onClick:b,children:"เพิ่มสาขา"})})]})})]})}},71567:function(e,t,r){"use strict";r.d(t,{q:function(){return n},v:function(){return a}});let a="/api",n={AUTH:{LOGIN:"/auth/login",ME:"/auth/me",CSRF:"/csrf"},POS:{PRODUCTS:"/pos/products",ORDERS:"/pos/orders",TABLES:"/pos/tables",DISCOUNTS:"/pos/discounts",DELIVERY:"/pos/delivery",PAYMENT_METHODS:"/pos/paymentMethod",PAYMENTS:"/pos/payments",CATEGORY:"/pos/category",SHIFTS:{BASE:"/pos/shifts",CURRENT:"/pos/shifts/current",OPEN:"/pos/shifts/open",CLOSE:"/pos/shifts/close"},DASHBOARD:{SALES:"/pos/dashboard/sales",TOP_ITEMS:"/pos/dashboard/top-items"},CHANNELS:{STATS:"/pos/orders/stats"},SHOP_PROFILE:"/pos/shopProfile",SALES_ORDER_ITEMS:"/pos/salesOrderItem",SALES_ORDER_DETAILS:"/pos/salesOrderDetail",PRODUCTS_UNIT:"/pos/productsUnit",PAYMENT_DETAILS:"/pos/paymentDetails",BRANCH:"/branches"}}},14362:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return f},a:function(){return u}});var a=r(57437),n=r(2265),o=r(99376),s=r(5447),i=r(84859),l=r(48651),c=r(3369);let d=(0,n.createContext)(void 0),f=e=>{let{children:t}=e,[r,f]=(0,n.useState)(null),[u,p]=(0,n.useState)(!0),x=(0,o.useRouter)(),h=(0,o.usePathname)(),y=async()=>{try{let e="";e=localStorage.getItem("token_ws")||"";let t=await s.O.getMe(e);f(t)}catch(e){f(null)}finally{p(!1)}};(0,n.useEffect)(()=>{y()},[]);let{showLoading:m,hideLoading:b}=(0,c.x)();(0,n.useEffect)(()=>{u||r||"/login"===h||x.push("/login")},[r,u,h,x]);let g=async e=>{try{m("กำลังเข้าสู่ระบบ...");let t=await s.O.getCsrfToken(),{token:r,...a}=await s.O.login(e,t);r&&localStorage.setItem("token_ws",r),f(a),x.push("/")}catch(e){throw e}finally{b()}},j=async()=>{try{m("กำลังออกจากระบบ...");let e="";e=localStorage.getItem("token_ws")||"",await s.O.logout(e),localStorage.removeItem("token_ws"),i.x.clearQueue(),f(null),x.push("/login")}catch(e){console.error("Logout error:",e)}finally{b()}};return u?(0,a.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-white",children:(0,a.jsx)(l.Z,{size:"large"})}):r||"/login"===h?(0,a.jsx)(d.Provider,{value:{user:r,loading:u,login:g,logout:j,checkAuth:y},children:t}):null},u=()=>{let e=(0,n.useContext)(d);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},3369:function(e,t,r){"use strict";r.d(t,{GlobalLoadingProvider:function(){return l},O:function(){return d},x:function(){return c}});var a=r(57437),n=r(2265),o=r(48651);let s=(0,n.createContext)(void 0),i=(0,n.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,n.useState)({}),[c,d]=(0,n.useState)(void 0),f=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";l(e=>({...e,[t]:(e[t]||0)+1})),e&&d(e)},[]),u=(0,n.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";l(t=>{if(!t[e])return t;let r={...t};return r[e]-=1,r[e]<=0&&delete r[e],r})},[]),p=(0,n.useCallback)(()=>{l({}),d(void 0)},[]),x=Object.keys(r).length>0,h=(0,n.useMemo)(()=>({isLoading:x,loadingMessage:c}),[x,c]),y=(0,n.useMemo)(()=>({showLoading:f,hideLoading:u,resetLoading:p}),[f,u,p]);return(0,a.jsx)(i.Provider,{value:y,children:(0,a.jsxs)(s.Provider,{value:h,children:[t,x&&(0,a.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-auto bg-black/10 backdrop-blur-[1px]",children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,background:"rgba(255, 255, 255, 0.9)",padding:"20px 40px",borderRadius:12,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[(0,a.jsx)(o.Z,{size:"large"}),c&&(0,a.jsx)("div",{style:{fontSize:14,color:"#1f1f1f",fontWeight:500},children:c})]})})]})})};function c(){let e=(0,n.useContext)(s),t=(0,n.useContext)(i);if(!e||!t)throw Error("useGlobalLoading must be used within a GlobalLoadingProvider");return(0,n.useMemo)(()=>({...e,...t}),[e,t])}function d(){let e=(0,n.useContext)(i);if(!e)throw Error("useGlobalLoadingDispatch must be used within a GlobalLoadingProvider");return e}},26972:function(e,t,r){"use strict";r.d(t,{J:function(){return s}});var a=r(2265),n=r(3369),o=r(53743);let s=()=>{let{showLoading:e,hideLoading:t}=(0,n.x)();return{execute:(0,a.useCallback)(async function(r){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"กำลังดำเนินการ...",n=(arguments.length>2&&arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"เกิดข้อผิดพลาด");try{return e(a,"async"),await r()}catch(e){console.error("Async action error:",e),o.Z.error({title:"ข้อผิดพลาด",content:e.message||n});return}finally{t("async")}},[e,t])}}},2913:function(e,t,r){"use strict";function a(e,t){return({GET:"".concat(n.API_BASE_URL).concat(t),POST:"".concat(n.API_BASE_URL).concat(t),PUT:"".concat(n.API_BASE_URL).concat(t),DELETE:"".concat(n.API_BASE_URL).concat(t),PATCH:"".concat(n.API_BASE_URL).concat(t)})[e]}r.d(t,{b:function(){return a}});let n={get API_BASE_URL(){return"/api"}}},81026:function(e,t,r){"use strict";r.d(t,{E:function(){return o},M:function(){return n}});var a=r(20019);let n=a.Ryn({id:a.Z_8(),branch_name:a.Z_8(),branch_code:a.Z_8(),address:a.Z_8().optional().nullable(),phone:a.Z_8().optional().nullable(),tax_id:a.Z_8().optional().nullable(),is_active:a.O72().default(!0),create_date:a.Z_8().or(a.hTZ()).transform(e=>new Date(e))}),o=a.IXX(n)},5447:function(e,t,r){"use strict";r.d(t,{O:function(){return o}});var a=r(71567),n=r(2913);let o={login:async(e,t,r)=>{try{let o=(0,n.b)("POST",a.q.AUTH.LOGIN),s={"Content-Type":"application/json"};t&&(s["X-CSRF-Token"]=t),r&&(s.Cookie=r);let i=await fetch(o,{method:"POST",headers:s,credentials:"include",body:JSON.stringify(e)});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.message||e.detail||"เข้าสู่ระบบไม่สำเร็จ")}let l=await i.json();return{...l.user,token:l.token}}catch(e){throw Error(e.message||"เข้าสู่ระบบไม่สำเร็จ")}},logout:async(e,t,r)=>{try{let a=(0,n.b)("POST","/auth/logout"),o={"Content-Type":"application/json"};e&&(o.Authorization="Bearer ".concat(e)),t&&(o["X-CSRF-Token"]=t),r&&(o.Cookie=r),await fetch(a,{method:"POST",headers:o,credentials:"include"})}catch(e){console.error("Logout failed",e)}},getMe:async e=>{try{let t=(0,n.b)("GET",a.q.AUTH.ME),r=await fetch(t,{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},credentials:"include",cache:"no-store"});if(!r.ok)throw Error("Unauthorized");return await r.json()}catch(e){throw e}},async getCsrfToken(){try{let e=await fetch("".concat(a.v).concat(a.q.AUTH.CSRF),{credentials:"include"});if(!e.ok)return"";return(await e.json()).csrfToken}catch(e){return console.error("Failed to fetch CSRF token",e),""}}}},1665:function(e,t,r){"use strict";r.d(t,{x:function(){return i}});var a=r(71567),n=r(2913),o=r(81026);let s=a.q.POS.BRANCH,i={getAll:async e=>{let t=(0,n.b)("GET",s),r={};e&&(r.Cookie=e);let a=await fetch(t,{cache:"no-store",credentials:"include",headers:r});if(!a.ok)throw Error("Failed to fetch branches");let i=await a.json();return o.E.parse(i)},getById:async(e,t)=>{let r=(0,n.b)("GET","".concat(s,"/").concat(e)),a={};t&&(a.Cookie=t);let i=await fetch(r,{cache:"no-store",credentials:"include",headers:a});if(!i.ok)throw Error("Failed to fetch branch");let l=await i.json();return o.M.parse(l)},create:async(e,t,r)=>{let a=(0,n.b)("POST",s),o={"Content-Type":"application/json"};t&&(o.Cookie=t),r&&(o["X-CSRF-Token"]=r);let i=await fetch(a,{method:"POST",body:JSON.stringify(e),headers:o,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to create branch")}return i.json()},update:async(e,t,r,a)=>{let o=(0,n.b)("PUT","".concat(s,"/").concat(e)),i={"Content-Type":"application/json"};r&&(i.Cookie=r),a&&(i["X-CSRF-Token"]=a);let l=await fetch(o,{method:"PUT",body:JSON.stringify(t),headers:i,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to update branch")}return l.json()},delete:async(e,t,r)=>{let a=(0,n.b)("DELETE","".concat(s,"/").concat(e)),o={};t&&(o.Cookie=t),r&&(o["X-CSRF-Token"]=r);let i=await fetch(a,{method:"DELETE",headers:o,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to delete branch")}}}},84859:function(e,t,r){"use strict";r.d(t,{M:function(){return i},x:function(){return s}});let a="pos_offline_queue",n=()=>{let e=localStorage.getItem(a);return e?JSON.parse(e):[]},o=e=>{localStorage.setItem(a,JSON.stringify(e))},s={addToQueue:(e,t)=>{let r=n(),a={id:"offline-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:e,payload:t,timestamp:Date.now(),retryCount:0};return o([...r,a]),a},getQueue:()=>n(),removeFromQueue:e=>{o(n().filter(t=>t.id!==e))},incrementRetry:(e,t)=>{o(n().map(r=>r.id===e?{...r,retryCount:r.retryCount+1,lastError:t}:r))},clearQueue:()=>{localStorage.removeItem(a)},pruneExceeded:()=>{o(n().filter(e=>e.retryCount<=5))}},i={maxRetry:5,backoff:e=>Math.min(3e4,2e3*e)}},97235:function(e,t,r){"use strict";r.d(t,{P:function(){return i}});var a=r(5447);let n=null,o=0,s=null;async function i(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Date.now();return!e&&n&&t-o<6e5?n:(s||(s=a.O.getCsrfToken().then(e=>(n=e||"",o=Date.now(),n)).finally(()=>{s=null})),s)}}},function(e){e.O(0,[5015,7717,7698,742,3211,7993,8651,2646,6207,7213,9021,2224,3248,9,8640,6931,19,5713,2239,4480,38,2971,2117,1744],function(){return e(e.s=28997)}),_N_E=e.O()}]);