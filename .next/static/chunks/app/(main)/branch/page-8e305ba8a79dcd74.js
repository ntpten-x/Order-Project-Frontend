(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1075],{28997:function(e,t,a){Promise.resolve().then(a.bind(a,76901))},76901:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Y}});var r=a(57437),s=a(2265),n=a(19683),i=a(64625),o=a(48651),l=a(50742),d=a(62376),c=a(99376),f=a(29),x=a.n(f),p=a(96931),y=a(45235),m=a(35713),b=a(89970),h=a(80009),g=a(89245),u=a(96473),j=a(13377),v=a(26349),k=a(36972),w=a(62273);let{Title:z,Text:Z}=n.default,R={minHeight:"100vh",background:"#f8f9fc",paddingBottom:40},_={background:"linear-gradient(135deg, #7c3aed 0%, #a78bfa 100%)",padding:"30px 24px 80px",position:"relative",borderBottomLeftRadius:32,borderBottomRightRadius:32,marginBottom:-40,boxShadow:"0 10px 30px -10px rgba(124, 58, 237, 0.4)"},C={maxWidth:1200,margin:"0 auto",padding:"0 24px",position:"relative",zIndex:2},I=e=>({borderRadius:20,border:"none",overflow:"hidden",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",background:"#fff",boxShadow:e?"0 10px 30px rgba(124, 58, 237, 0.15)":"0 4px 20px rgba(0,0,0,0.05)",transform:e?"translateY(-4px)":"none",position:"relative"}),S=()=>(0,r.jsx)(x(),{id:"985ac2baae04cebc",children:"@-webkit-keyframes fadeInUp{from{opacity:0;-webkit-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeInUp{from{opacity:0;-moz-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeInUp{from{opacity:0;-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeInUp{from{opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}@-webkit-keyframes float{0%{-webkit-transform:translatey(0px);transform:translatey(0px)}50%{-webkit-transform:translatey(-10px);transform:translatey(-10px)}100%{-webkit-transform:translatey(0px);transform:translatey(0px)}}@-moz-keyframes float{0%{-moz-transform:translatey(0px);transform:translatey(0px)}50%{-moz-transform:translatey(-10px);transform:translatey(-10px)}100%{-moz-transform:translatey(0px);transform:translatey(0px)}}@-o-keyframes float{0%{-o-transform:translatey(0px);transform:translatey(0px)}50%{-o-transform:translatey(-10px);transform:translatey(-10px)}100%{-o-transform:translatey(0px);transform:translatey(0px)}}@keyframes float{0%{-webkit-transform:translatey(0px);-moz-transform:translatey(0px);-o-transform:translatey(0px);transform:translatey(0px)}50%{-webkit-transform:translatey(-10px);-moz-transform:translatey(-10px);-o-transform:translatey(-10px);transform:translatey(-10px)}100%{-webkit-transform:translatey(0px);-moz-transform:translatey(0px);-o-transform:translatey(0px);transform:translatey(0px)}}.decorative-shape{position:absolute;background:rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%}.shape-1{width:300px;height:300px;right:-100px;top:-100px}.shape-2{width:150px;height:150px;left:10%;bottom:20px;-webkit-animation:float 6s ease-in-out infinite;-moz-animation:float 6s ease-in-out infinite;-o-animation:float 6s ease-in-out infinite;animation:float 6s ease-in-out infinite}.action-btn{opacity:.7;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.action-btn:hover{opacity:1;-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}"}),B=e=>{let{onRefresh:t,onAdd:a}=e;return(0,r.jsxs)("div",{style:_,children:[(0,r.jsx)("div",{className:"decorative-shape shape-1"}),(0,r.jsx)("div",{className:"decorative-shape shape-2"}),(0,r.jsx)("div",{style:{maxWidth:1200,margin:"0 auto",position:"relative",zIndex:1},children:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[(0,r.jsx)("div",{style:{background:"rgba(255,255,255,0.2)",padding:10,borderRadius:14,display:"flex",backdropFilter:"blur(4px)"},children:(0,r.jsx)(d.Z,{style:{fontSize:28,color:"#fff"}})}),(0,r.jsx)(z,{level:2,style:{margin:0,color:"#fff",fontWeight:800},children:"จัดการสาขา"})]}),(0,r.jsx)(Z,{style:{color:"rgba(255,255,255,0.9)",fontSize:16,display:"block",paddingLeft:4},children:"บริหารจัดการข้อมูลสาขาในระบบ"})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,r.jsx)(l.ZP,{icon:(0,r.jsx)(g.Z,{}),onClick:t,size:"large",style:{background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.3)",color:"#fff",borderRadius:12,backdropFilter:"blur(4px)"},children:"รีเฟรช"}),(0,r.jsx)(l.ZP,{type:"primary",icon:(0,r.jsx)(u.Z,{}),onClick:a,size:"large",style:{background:"#fff",color:"#7c3aed",border:"none",borderRadius:12,fontWeight:600,boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},children:"เพิ่มสาขา"})]})]})})]})},T=e=>{let{totalBranches:t,activeBranches:a}=e;return(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16,marginTop:-40,marginBottom:32,position:"relative",zIndex:2,maxWidth:1200,marginLeft:"auto",marginRight:"auto",padding:"0 24px",justifyContent:"center"},children:[(0,r.jsx)(p.Z,{variant:"borderless",style:{borderRadius:16,boxShadow:"0 10px 30px rgba(0,0,0,0.08)"},children:(0,r.jsx)(y.Z,{title:(0,r.jsx)(Z,{type:"secondary",children:"สาขาทั้งหมด"}),value:t,prefix:(0,r.jsx)(d.Z,{style:{color:"#8b5cf6",background:"#f5f3ff",padding:8,borderRadius:"50%"}}),styles:{content:{fontWeight:700}}})}),(0,r.jsx)(p.Z,{variant:"borderless",style:{borderRadius:16,boxShadow:"0 10px 30px rgba(0,0,0,0.08)"},children:(0,r.jsx)(y.Z,{title:(0,r.jsx)(Z,{type:"secondary",children:"เปิดให้บริการ"}),value:a,styles:{content:{color:"#10b981",fontWeight:700}},prefix:(0,r.jsx)(m.Z,{status:"processing",color:"#10b981"})})})]})},W=e=>{let{branch:t,onEdit:a,onDelete:s}=e;return(0,r.jsxs)(p.Z,{hoverable:!0,style:I(t.is_active),styles:{body:{padding:20}},actions:[(0,r.jsx)(b.Z,{title:"แก้ไขข้อมูล",children:(0,r.jsx)(l.ZP,{type:"text",icon:(0,r.jsx)(j.Z,{style:{color:"#8b5cf6"}}),onClick:()=>a(t),children:"แก้ไข"})},"edit"),(0,r.jsx)(b.Z,{title:"ลบสาขา",children:(0,r.jsx)(l.ZP,{type:"text",danger:!0,icon:(0,r.jsx)(v.Z,{}),onClick:()=>s(t),children:"ลบ"})},"delete")],children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:16,marginBottom:16},children:[(0,r.jsx)("div",{style:{width:64,height:64,borderRadius:16,background:t.is_active?"#f5f3ff":"#f3f4f6",display:"flex",alignItems:"center",justifyContent:"center",border:t.is_active?"2px solid #a78bfa":"2px solid transparent",transition:"all 0.3s ease"},children:(0,r.jsx)(d.Z,{style:{fontSize:28,color:t.is_active?"#7c3aed":"#9ca3af"}})}),(0,r.jsx)("div",{style:{flex:1},children:(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(z,{level:4,style:{margin:0,marginBottom:4,color:"#1f2937"},children:t.branch_name}),(0,r.jsxs)(h.Z,{color:"purple",style:{borderRadius:12,border:"none",padding:"0 10px"},children:["Code: ",t.branch_code]})]}),(0,r.jsx)(b.Z,{title:t.is_active?"เปิดดำเนินการ":"ปิดปรับปรุง",children:t.is_active?(0,r.jsx)("div",{style:{width:12,height:12,borderRadius:"50%",background:"#10b981",boxShadow:"0 0 0 3px rgba(16, 185, 129, 0.2)"}}):(0,r.jsx)("div",{style:{width:12,height:12,borderRadius:"50%",background:"#d1d5db"}})})]})})]}),(0,r.jsxs)("div",{style:{background:"#f9fafb",padding:12,borderRadius:12},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[(0,r.jsx)(k.Z,{style:{color:"#9ca3af"}}),(0,r.jsx)(Z,{ellipsis:!0,style:{color:"#4b5563",fontSize:13,flex:1},children:t.address||"-"})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,r.jsx)(w.Z,{style:{color:"#9ca3af"}}),(0,r.jsx)(Z,{style:{color:"#4b5563",fontSize:13},children:t.phone||"-"})]})]}),(0,r.jsxs)("div",{style:{marginTop:12,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)(Z,{type:"secondary",style:{fontSize:12},children:["Tax ID: ",t.tax_id||"-"]}),t.is_active?(0,r.jsx)(h.Z,{color:"#10b981",style:{margin:0,borderRadius:12,border:"none"},children:"Active"}):(0,r.jsx)(h.Z,{style:{margin:0,borderRadius:12,border:"none",background:"#f3f4f6"},children:"Inactive"})]})]})};var E=a(3369),P=a(24675),A=a(67697),N=a(14362),U=a(1665),D=a(97235),L=a(26972),O=a(73814);let{Title:F,Text:H}=n.default,J="pos:branches";function Y(){let e=(0,c.useRouter)(),[t,a]=(0,s.useState)([]),{showLoading:n,hideLoading:f}=(0,E.x)(),{socket:x}=(0,P.s)(),{user:p,loading:y}=(0,N.a)(),{message:m,modal:b}=i.Z.useApp(),{execute:h}=(0,L.J)(),g=(0,s.useCallback)(async()=>{h(async()=>{a(await U.x.getAll())},"กำลังโหลดข้อมูลสาขา...")},[h]);(0,A.v)(x,{create:"branches:create",update:"branches:update",delete:"branches:delete"},a,e=>e.id,e=>!1!==e.is_active),(0,s.useEffect)(()=>{let e=(0,O.t)(J,3e5);(null==e?void 0:e.length)&&a(e)},[]),(0,s.useEffect)(()=>{t.length>0&&(0,O.v)(J,t)},[t]),(0,s.useEffect)(()=>{if(!y&&p){if("Admin"!==p.role){m.error("คุณไม่มีสิทธิ์เข้าถึงหน้านี้"),e.push("/");return}g()}},[p,y,e,g,m]);let u=()=>{n(),e.push("/branch/manager/add"),setTimeout(()=>f(),500)},j=t=>{e.push("/branch/manager/edit/".concat(t.id))},v=e=>{b.confirm({title:"ยืนยันการลบสาขา",content:'คุณต้องการลบสาขา "'.concat(e.branch_name,'" หรือไม่?'),okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,onOk:async()=>{try{let t=await (0,D.P)();await U.x.delete(e.id,void 0,t),m.success('ลบสาขา "'.concat(e.branch_name,'" สำเร็จ')),g()}catch(e){m.error("ไม่สามารถลบสาขาได้")}}})};if(y)return(0,r.jsx)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5"},children:(0,r.jsx)(o.Z,{size:"large"})});let k=t.filter(e=>e.is_active).length;return(0,r.jsxs)("div",{style:R,children:[(0,r.jsx)(S,{}),(0,r.jsx)(B,{onRefresh:g,onAdd:u}),(0,r.jsx)(T,{totalBranches:t.length,activeBranches:k}),(0,r.jsx)("div",{style:C,children:t.length>0?(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:24,justifyContent:"center"},children:t.map((e,t)=>(0,r.jsx)("div",{style:{animation:"fadeInUp 0.6s ease-out forwards",animationDelay:"".concat(50*t,"ms"),opacity:0},children:(0,r.jsx)(W,{branch:e,onEdit:j,onDelete:v})},e.id))}):(0,r.jsxs)("div",{style:{background:"white",borderRadius:20,padding:"60px 20px",textAlign:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.05)"},children:[(0,r.jsx)(d.Z,{style:{fontSize:64,color:"#e5e7eb",marginBottom:16}}),(0,r.jsx)(F,{level:3,style:{color:"#374151",margin:0},children:"ยังไม่มีข้อมูลสาขา"}),(0,r.jsx)(H,{type:"secondary",children:"เริ่มต้นด้วยการเพิ่มสาขาแรกของคุณ"}),(0,r.jsx)("div",{style:{marginTop:24},children:(0,r.jsx)(l.ZP,{type:"primary",onClick:u,children:"เพิ่มสาขา"})})]})})]})}}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=28997)}),_N_E=e.O()}]);