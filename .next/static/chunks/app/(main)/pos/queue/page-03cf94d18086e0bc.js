(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5465,4390,2785],{86233:function(e,t,n){Promise.resolve().then(n.bind(n,96917))},96917:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r=n(57437),a=n(29),o=n.n(a),i=n(2265),s=n(39486),l=n(34029),d=n(53743),c=n(93834),u=n(50742),p=n(35713),m=n(80009),f=n(1915),h=n(89245),g=n(88898),y=n(5540),b=n(28595),x=n(83669),w=n(81770),v=n(26349),j=n(88444),k=n(5325),_=n(67918),S=n(2938),Z=n(42785);let P={container:{minHeight:"100vh",background:"#f5f7fa",fontFamily:"var(--font-sans), 'Sarabun', sans-serif",paddingBottom:100},statsGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginBottom:24},statCard:{background:"white",borderRadius:16,padding:20,textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",border:"1px solid #f0f0f0"},statIcon:{fontSize:32,marginBottom:8},statLabel:{fontSize:13,color:"#8c8c8c",marginTop:4},queueList:{display:"flex",flexDirection:"column",gap:12},queueCard:{background:"white",borderRadius:16,padding:16,boxShadow:"0 2px 8px rgba(0,0,0,0.06)",border:"1px solid #f0f0f0",transition:"all 0.3s ease"},queueCardContent:{display:"flex",flexDirection:"column",gap:12},queueCardTop:{display:"flex",alignItems:"center",gap:12},queuePosition:{width:48,height:48,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:700,fontSize:18,flexShrink:0},queueInfo:{flex:1,minWidth:0},queueOrderNo:{fontSize:16,fontWeight:600,color:"#1a1a2e",marginBottom:4},queueTags:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:8},queueMeta:{display:"flex",flexDirection:"column",gap:4,fontSize:12,color:"#8c8c8c"},queueNotes:{fontSize:12,color:"#8c8c8c",marginTop:4,padding:8,background:"#f8f9fa",borderRadius:8},queueActions:{display:"flex",gap:8,flexWrap:"wrap",marginTop:8}},C="\n    /* Mobile First - Base Styles */\n    .queue-header-mobile {\n        padding: 20px 16px 50px !important;\n    }\n\n    .queue-header-icon-mobile {\n        width: 48px !important;\n        height: 48px !important;\n        font-size: 20px !important;\n    }\n\n    .queue-header-title-mobile {\n        font-size: 18px !important;\n    }\n\n    .queue-header-subtitle-mobile {\n        font-size: 12px !important;\n    }\n\n    .queue-stats-grid-mobile {\n        grid-template-columns: repeat(2, 1fr) !important;\n        gap: 10px !important;\n    }\n\n    .queue-stat-card-mobile {\n        padding: 16px 12px !important;\n    }\n\n    .queue-stat-icon-mobile {\n        font-size: 28px !important;\n    }\n\n    .queue-card-mobile {\n        padding: 14px !important;\n    }\n\n    .queue-position-mobile {\n        width: 44px !important;\n        height: 44px !important;\n        font-size: 16px !important;\n    }\n\n    .queue-order-no-mobile {\n        font-size: 15px !important;\n    }\n\n    .queue-actions-mobile {\n        flex-direction: column !important;\n    }\n\n    .queue-actions-mobile button {\n        width: 100% !important;\n        height: 44px !important;\n    }\n\n    /* Tablet (768px+) */\n    @media (min-width: 768px) {\n        .queue-header-mobile {\n            padding: 32px 24px 60px !important;\n        }\n\n        .queue-header-icon-mobile {\n            width: 64px !important;\n            height: 64px !important;\n            font-size: 28px !important;\n        }\n\n        .queue-header-title-mobile {\n            font-size: 24px !important;\n        }\n\n        .queue-stats-grid-mobile {\n            grid-template-columns: repeat(4, 1fr) !important;\n            gap: 16px !important;\n        }\n\n        .queue-stat-card-mobile {\n            padding: 24px 20px !important;\n        }\n\n        .queue-stat-icon-mobile {\n            font-size: 36px !important;\n        }\n\n        .queue-card-mobile {\n            padding: 20px !important;\n        }\n\n        .queue-card-content-mobile {\n            flex-direction: row !important;\n            align-items: center !important;\n        }\n\n        .queue-actions-mobile {\n            flex-direction: row !important;\n            margin-top: 0 !important;\n            margin-left: auto !important;\n        }\n\n        .queue-actions-mobile button {\n            width: auto !important;\n        }\n    }\n\n    /* Desktop (1024px+) */\n    @media (min-width: 1024px) {\n        .queue-header-mobile {\n            padding: 40px 32px 80px !important;\n        }\n\n        .queue-stats-grid-mobile {\n            gap: 20px !important;\n        }\n    }\n\n    /* Animations */\n    @keyframes fadeInUp {\n        from {\n            opacity: 0;\n            transform: translateY(12px);\n        }\n        to {\n            opacity: 1;\n            transform: translateY(0);\n        }\n    }\n\n    .queue-card-animate {\n        animation: fadeInUp 0.4s ease forwards;\n        opacity: 0;\n    }\n\n    .queue-card-delay-1 { animation-delay: 0.1s; }\n    .queue-card-delay-2 { animation-delay: 0.2s; }\n    .queue-card-delay-3 { animation-delay: 0.3s; }\n    .queue-card-delay-4 { animation-delay: 0.4s; }\n\n    /* Hover Effects */\n    .queue-card-hover:hover {\n        transform: translateY(-2px);\n        box-shadow: 0 4px 16px rgba(0,0,0,0.1) !important;\n    }\n\n    .queue-card-hover:active {\n        transform: translateY(0);\n    }\n\n    /* Touch-friendly */\n    @media (max-width: 768px) {\n        .queue-card-hover {\n            -webkit-tap-highlight-color: rgba(102, 126, 234, 0.1);\n        }\n\n        .hide-on-mobile {\n            display: none !important;\n        }\n    }\n\n    @media (min-width: 769px) {\n        .hide-on-mobile {\n            display: inline !important;\n        }\n    }\n";var q=n(25193),T=n(37410),E=n(20148),R=n(30290),O=n(36799),Q=n(71096),N=n.n(Q);n(6729);let{Text:z}=s.default;N().locale("th");let I={[k.t.Low]:"default",[k.t.Normal]:"blue",[k.t.High]:"orange",[k.t.Urgent]:"red"},F={[k.t.Low]:"ต่ำ",[k.t.Normal]:"ปกติ",[k.t.High]:"สูง",[k.t.Urgent]:"ด่วน"},H={[k.l.Pending]:"default",[k.l.Processing]:"processing",[k.l.Completed]:"success",[k.l.Cancelled]:"error"},D={[k.l.Pending]:"รอ",[k.l.Processing]:"กำลังดำเนินการ",[k.l.Completed]:"เสร็จสิ้น",[k.l.Cancelled]:"ยกเลิก"};function A(){let[e,t]=(0,i.useState)(void 0),{queue:n,isLoading:a,error:s,updateStatus:Q,removeFromQueue:A,reorderQueue:L,isReordering:X,refetch:U}=(0,j.G)(e),{isAuthorized:M,isChecking:B}=(0,_.e)({allowedRoles:["Admin","Manager","Employee"]});(0,Z.mk)();let G=(e,t)=>{Q({id:e.id,data:{status:t}},{onSuccess:()=>{l.ZP.success("อัปเดตสถานะสำเร็จ")}})},W=e=>{var t;d.Z.confirm({title:"ยืนยันการลบออกจากคิว",content:'คุณต้องการลบออเดอร์ "'.concat((null===(t=e.order)||void 0===t?void 0:t.order_no)||e.order_id,'" ออกจากคิวหรือไม่?'),okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,onOk:()=>{A(e.id,{onSuccess:()=>{l.ZP.success("ลบออกจากคิวสำเร็จ")}})}})};if(B)return(0,r.jsx)(S.H,{message:"กำลังตรวจสอบสิทธิ์การใช้งาน..."});if(!M)return(0,r.jsx)(S.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้",tone:"danger"});let Y=n.filter(e=>e.status===k.l.Pending),J=n.filter(e=>e.status===k.l.Processing),K=n.filter(e=>e.status===k.l.Completed),V=e=>{switch(e){case k.t.Urgent:return"linear-gradient(135deg, #ff4d4f 0%, #cf1322 100%)";case k.t.High:return"linear-gradient(135deg, #fa8c16 0%, #d48806 100%)";case k.t.Normal:return"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)";default:return"linear-gradient(135deg, #8c8c8c 0%, #595959 100%)"}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{id:C.__hash,children:C}),(0,r.jsxs)("div",{style:P.container,children:[(0,r.jsx)(E.Z,{title:"Order Queue",subtitle:"จัดการคิวออเดอร์",icon:(0,r.jsx)(f.Z,{}),style:{background:"transparent",borderBottom:"none"},actions:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.default,{value:e,placeholder:(0,O.t)("queue.filter"),allowClear:!0,style:{width:160},size:"middle",onChange:t,dropdownMatchSelectWidth:!0,getPopupContainer:e=>(null==e?void 0:e.parentElement)||document.body,children:Object.values(k.l).map(e=>(0,r.jsx)(c.default.Option,{value:e,children:D[e]},e))}),(0,r.jsx)(u.ZP,{icon:(0,r.jsx)(h.Z,{}),onClick:()=>U(),children:(0,O.t)("queue.refresh")}),(0,r.jsx)(u.ZP,{icon:(0,r.jsx)(g.Z,{}),onClick:()=>{L(void 0,{onSuccess:()=>{l.ZP.success("จัดเรียงคิวใหม่สำเร็จ")}})},loading:X,type:"primary",children:"จัดเรียง"})]})}),(0,r.jsx)(q.Z,{maxWidth:1400,children:(0,r.jsxs)(T.Z,{style:{background:"transparent",border:"none"},children:[(0,r.jsxs)("div",{style:P.statsGrid,className:"queue-stats-grid-mobile",children:[(0,r.jsxs)("div",{style:P.statCard,className:"queue-stat-card-mobile",children:[(0,r.jsx)(p.Z,{count:Y.length,showZero:!0,offset:[10,-5],children:(0,r.jsx)(y.Z,{style:{...P.statIcon,color:"#1890ff"},className:"queue-stat-icon-mobile"})}),(0,r.jsx)(z,{style:P.statLabel,children:"รอในคิว"})]}),(0,r.jsxs)("div",{style:P.statCard,className:"queue-stat-card-mobile",children:[(0,r.jsx)(p.Z,{count:J.length,showZero:!0,offset:[10,-5],children:(0,r.jsx)(b.Z,{style:{...P.statIcon,color:"#fa8c16"},className:"queue-stat-icon-mobile"})}),(0,r.jsx)(z,{style:P.statLabel,children:"กำลังดำเนินการ"})]}),(0,r.jsxs)("div",{style:P.statCard,className:"queue-stat-card-mobile",children:[(0,r.jsx)(p.Z,{count:K.length,showZero:!0,offset:[10,-5],children:(0,r.jsx)(x.Z,{style:{...P.statIcon,color:"#52c41a"},className:"queue-stat-icon-mobile"})}),(0,r.jsx)(z,{style:P.statLabel,children:"เสร็จสิ้น"})]}),(0,r.jsxs)("div",{style:P.statCard,className:"queue-stat-card-mobile",children:[(0,r.jsx)(p.Z,{count:n.length,showZero:!0,offset:[10,-5],children:(0,r.jsx)(f.Z,{style:{...P.statIcon,color:"#722ed1"},className:"queue-stat-icon-mobile"})}),(0,r.jsx)(z,{style:P.statLabel,children:"ทั้งหมด"})]})]}),a?(0,r.jsx)(R.Z,{status:"loading",title:(0,O.t)("queue.loading")}):s?(0,r.jsx)(R.Z,{status:"error",title:(0,O.t)("queue.error"),onRetry:()=>U()}):0===n.length?(0,r.jsx)(R.Z,{status:"empty",title:(0,O.t)("queue.empty")}):(0,r.jsx)("div",{style:P.queueList,children:n.map((e,t)=>{var n;return(0,r.jsx)("div",{style:P.queueCard,className:"queue-card-hover queue-card-animate queue-card-delay-".concat(t%4+1),children:(0,r.jsxs)("div",{style:P.queueCardContent,className:"queue-card-content-mobile",children:[(0,r.jsxs)("div",{style:P.queueCardTop,children:[(0,r.jsx)("div",{style:{...P.queuePosition,background:V(e.priority)},className:"queue-position-mobile",children:e.queue_position}),(0,r.jsxs)("div",{style:P.queueInfo,children:[(0,r.jsx)(z,{strong:!0,style:P.queueOrderNo,className:"queue-order-no-mobile",children:(null===(n=e.order)||void 0===n?void 0:n.order_no)||"N/A"}),(0,r.jsxs)("div",{style:P.queueTags,children:[(0,r.jsx)(m.Z,{color:I[e.priority],style:{margin:0,borderRadius:8},children:F[e.priority]}),(0,r.jsx)(m.Z,{color:H[e.status],style:{margin:0,borderRadius:8},children:D[e.status]})]}),(0,r.jsxs)("div",{style:P.queueMeta,children:[(0,r.jsxs)(z,{type:"secondary",children:["สร้าง: ",N()(e.created_at).format("DD/MM/YYYY HH:mm")]}),e.started_at&&(0,r.jsxs)(z,{type:"secondary",children:["เริ่ม: ",N()(e.started_at).format("HH:mm")]}),e.completed_at&&(0,r.jsxs)(z,{type:"secondary",children:["เสร็จ: ",N()(e.completed_at).format("HH:mm")]})]}),e.notes&&(0,r.jsx)("div",{style:P.queueNotes,children:(0,r.jsxs)(z,{type:"secondary",children:["หมายเหตุ: ",e.notes]})})]})]}),(0,r.jsxs)("div",{style:P.queueActions,className:"queue-actions-mobile",children:[e.status===k.l.Pending&&(0,r.jsx)(u.ZP,{type:"primary",icon:(0,r.jsx)(b.Z,{}),onClick:()=>G(e,k.l.Processing),size:"middle",style:{borderRadius:10},children:"เริ่มดำเนินการ"}),e.status===k.l.Processing&&(0,r.jsx)(u.ZP,{type:"primary",icon:(0,r.jsx)(x.Z,{}),onClick:()=>G(e,k.l.Completed),size:"middle",style:{borderRadius:10,background:"#52c41a",borderColor:"#52c41a"},children:"เสร็จสิ้น"}),e.status!==k.l.Completed&&(0,r.jsx)(u.ZP,{danger:!0,icon:(0,r.jsx)(w.Z,{}),onClick:()=>G(e,k.l.Cancelled),size:"middle",style:{borderRadius:10},children:"ยกเลิก"}),(0,r.jsx)(u.ZP,{danger:!0,icon:(0,r.jsx)(v.Z,{}),onClick:()=>W(e),size:"middle",style:{borderRadius:10},children:"ลบ"})]})]})},e.id)})})]})})]})]})}},2938:function(e,t,n){"use strict";n.d(t,{H:function(){return m}});var r=n(57437),a=n(29),o=n.n(a);n(2265);var i=n(39486),s=n(47213),l=n(48651),d=n(48636),c=n(61935);let{Text:u,Title:p}=i.default,m=e=>{let{message:t,tone:n="secondary"}=e;return(0,r.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 access-guard-container",children:[(0,r.jsx)(s.ZP,{theme:{token:{colorPrimary:"#3b82f6"}},children:(0,r.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 content-wrapper",children:["danger"===n?(0,r.jsx)("div",{className:"jsx-e041fd1637d3b0f2 icon-circle danger",children:(0,r.jsx)(d.Z,{style:{fontSize:32,color:"#ef4444"}})}):(0,r.jsx)("div",{className:"jsx-e041fd1637d3b0f2 spinner-wrapper",children:(0,r.jsx)(l.Z,{indicator:(0,r.jsx)(c.Z,{style:{fontSize:40},spin:!0})})}),(0,r.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 text-content",children:[(0,r.jsx)(p,{level:4,style:{margin:0,color:"#1e293b"},children:"danger"===n?"Access Denied":"Loading"}),(0,r.jsx)(u,{type:n,style:{fontSize:16},children:t})]})]})}),(0,r.jsx)(o(),{id:"e041fd1637d3b0f2",children:".access-guard-container.jsx-e041fd1637d3b0f2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:100vh;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:#f8fafc}.content-wrapper.jsx-e041fd1637d3b0f2{background:white;padding:40px;-webkit-border-radius:24px;-moz-border-radius:24px;border-radius:24px;-webkit-box-shadow:0 20px 40px rgba(0,0,0,.05);-moz-box-shadow:0 20px 40px rgba(0,0,0,.05);box-shadow:0 20px 40px rgba(0,0,0,.05);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:24px;text-align:center;min-width:320px;-webkit-animation:fadeIn.5s ease-out;-moz-animation:fadeIn.5s ease-out;-o-animation:fadeIn.5s ease-out;animation:fadeIn.5s ease-out}.icon-circle.jsx-e041fd1637d3b0f2{width:80px;height:80px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff1f2}.spinner-wrapper.jsx-e041fd1637d3b0f2{padding:20px}.text-content.jsx-e041fd1637d3b0f2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:8px}@-webkit-keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeIn{from{opacity:0;-moz-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeIn{from{opacity:0;-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);-moz-transform:translatey(10px);-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}"})]})}},25193:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(57437);n(2265);var a=n(38616),o=n(87530);function i(e){let{children:t,maxWidth:n=o.H.pageMaxWidth,style:i}=e,s=a.default.useBreakpoint().md?o.H.pagePaddingXDesktop:o.H.pagePaddingXMobile;return(0,r.jsx)("div",{style:{width:"100%",maxWidth:n,margin:"0 auto",padding:"".concat(o.H.pagePaddingY,"px ").concat(s,"px"),...i},children:t})}},20148:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(57437);n(2265);var a=n(17588),o=n(2651),i=n(38616),s=n(10868),l=n(50742),d=n(39486),c=n(87530);function u(e){let{title:t,subtitle:n,icon:u,onBack:p,actions:m,style:f}=e,{token:h}=o.default.useToken(),g=i.default.useBreakpoint().md?c.H.pagePaddingXDesktop:c.H.pagePaddingXMobile;return(0,r.jsx)("div",{style:{padding:"".concat(c.H.pagePaddingY,"px ").concat(g,"px"),background:h.colorBgContainer,borderBottom:"1px solid ".concat(h.colorBorderSecondary),...f},children:(0,r.jsxs)(s.Z,{align:"center",justify:"space-between",wrap:"wrap",gap:12,style:{maxWidth:c.H.pageMaxWidth,margin:"0 auto"},children:[(0,r.jsxs)(s.Z,{align:"center",gap:12,style:{minWidth:0},children:[p&&(0,r.jsx)(l.ZP,{type:"text","aria-label":"ย้อนกลับ",icon:(0,r.jsx)(a.Z,{}),onClick:p,style:{borderRadius:12,width:44,height:44}}),u&&(0,r.jsx)("div",{style:{width:44,height:44,borderRadius:14,display:"grid",placeItems:"center",background:h.colorFillTertiary,color:h.colorText},children:u}),(0,r.jsxs)("div",{style:{minWidth:0},children:[(0,r.jsx)(d.default.Title,{level:4,style:{margin:0},children:t}),n&&(0,r.jsx)(d.default.Text,{type:"secondary",children:n})]})]}),m&&(0,r.jsx)(s.Z,{gap:8,wrap:"wrap",children:m})]})})}},37410:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(57437);n(2265);var a=n(2651),o=n(96931),i=n(10868),s=n(39486),l=n(87530);function d(e){let{title:t,extra:n,children:d,style:c}=e,{token:u}=a.default.useToken();return(0,r.jsx)(o.Z,{size:"small",variant:"outlined",style:{borderRadius:l.H.cardRadiusLG,...c},styles:{header:t?{borderBottomColor:u.colorBorderSecondary}:{display:"none"}},title:t?(0,r.jsxs)(i.Z,{align:"center",justify:"space-between",gap:12,children:[(0,r.jsx)(s.default.Text,{strong:!0,children:t}),n]}):void 0,children:d})}},30290:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(57437);n(2265);var a=n(39486),o=n(10868),i=n(48651),s=n(71047),l=n(50742),d=n(87530),c=n(36799);let{Text:u}=a.default;function p(e){let{status:t,title:n,description:a,onRetry:p,action:m,style:f}=e;return"loading"===t?(0,r.jsxs)(o.Z,{align:"center",justify:"center",style:{minHeight:200,...f,gap:12},children:[(0,r.jsx)(i.Z,{size:"large"}),(0,r.jsx)(u,{type:"secondary",children:n||(0,c.t)("network.loading")})]}):"error"===t?(0,r.jsx)(s.ZP,{status:"error",title:n||(0,c.t)("page.error"),subTitle:a,extra:m||(p?(0,r.jsx)(l.ZP,{type:"primary",onClick:p,children:(0,c.t)("page.retry")}):void 0),style:{padding:d.H.pagePaddingY,...f}}):(0,r.jsx)(s.ZP,{status:"info",title:n||(0,c.t)("page.empty"),subTitle:a,extra:m,style:{padding:d.H.pagePaddingY,...f}})}},87530:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});let r={pageMaxWidth:1200,pagePaddingXMobile:16,pagePaddingXDesktop:24,pagePaddingY:16,sectionGap:16,cardRadius:16,cardRadiusLG:20,cardShadow:"0 10px 24px rgba(15, 23, 42, 0.08)",surfaceBg:"#ffffff",surfaceBorder:"#e2e8f0"}},14362:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return p},a:function(){return m}});var r=n(57437),a=n(2265),o=n(99376),i=n(5447),s=n(84859),l=n(48651),d=n(3369),c=n(36799);let u=(0,a.createContext)(void 0),p=e=>{let{children:t}=e,[n,p]=(0,a.useState)(null),[m,f]=(0,a.useState)(!0),h=(0,o.useRouter)(),g=(0,o.usePathname)(),y=async()=>{try{let e=await i.O.getMe();p(e)}catch(e){p(null)}finally{f(!1)}};(0,a.useEffect)(()=>{y()},[]);let{showLoading:b,hideLoading:x}=(0,d.x)();(0,a.useEffect)(()=>{m||n||"/login"===g||h.push("/login")},[n,m,g,h]);let w=async e=>{try{b((0,c.t)("auth.loadingLogin"));let t=await i.O.getCsrfToken(),{token:n,...r}=await i.O.login(e,t);p(r),h.push("/")}catch(e){throw e}finally{x()}},v=async()=>{try{b((0,c.t)("auth.loadingLogout")),await i.O.logout(),s.x.clearQueue(),p(null),h.push("/login")}catch(e){console.error("Logout error:",e)}finally{x()}};return m?(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",background:"#ffffff"},children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",padding:"24px",background:"#ffffff",borderRadius:"20px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)(l.Z,{size:"large"}),(0,r.jsx)("div",{style:{color:"#64748b",fontSize:"14px",fontWeight:500},children:"กำลังตรวจสอบสิทธิ์..."})]})}):n||"/login"===g?(0,r.jsx)(u.Provider,{value:{user:n,loading:m,login:w,logout:v,checkAuth:y},children:t}):null},m=()=>{let e=(0,a.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},46252:function(e,t,n){"use strict";n.d(t,{J:function(){return l},SocketProvider:function(){return d}});var r=n(57437),a=n(2265),o=n(68680),i=n(34029),s=n(14362);let l=(0,a.createContext)({socket:null,isConnected:!1}),d=e=>{let{children:t}=e,[n,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(!1),p=(0,a.useRef)(!1),{user:m}=(0,s.a)();return(0,a.useEffect)(()=>{var e;if(!m){n&&(n.disconnect(),d(null),u(!1));return}let t=(null===(e=m.branch)||void 0===e?void 0:e.id)||m.branch_id||null,r=(0,o.io)("http://localhost:3000",{transports:["websocket"],withCredentials:!0,auth:{userId:m.id,branchId:t},reconnection:!0,reconnectionAttempts:5,reconnectionDelay:800,reconnectionDelayMax:8e3});return r.on("connect",()=>{console.log("Socket Connected:",r.id),u(!0),p.current=!1,i.ZP.success({content:"เชื่อมต่อเรียลไทม์แล้ว",key:"socket-status",duration:1.5})}),r.on("disconnect",()=>{console.log("Socket Disconnected"),u(!1),p.current||(p.current=!0,i.ZP.warning({content:"การเชื่อมต่อเรียลไทม์หลุด กำลังพยายามเชื่อมต่อใหม่...",key:"socket-status",duration:2}))}),r.io.on("reconnect_attempt",e=>{console.log("Socket reconnect attempt",e),u(!1)}),r.io.on("reconnect_failed",()=>{console.log("Socket reconnect failed"),i.ZP.error({content:"เชื่อมต่อเรียลไทม์ไม่สำเร็จ",key:"socket-status",duration:2})}),d(r),()=>{r.disconnect()}},[null==m?void 0:m.id]),(0,r.jsx)(l.Provider,{value:{socket:n,isConnected:c},children:t})}},3369:function(e,t,n){"use strict";n.d(t,{GlobalLoadingProvider:function(){return l},O:function(){return c},x:function(){return d}});var r=n(57437),a=n(2265),o=n(48651);let i=(0,a.createContext)(void 0),s=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[n,l]=(0,a.useState)({}),[d,c]=(0,a.useState)(void 0),u=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";l(e=>({...e,[t]:(e[t]||0)+1})),e&&c(e)},[]),p=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";l(t=>{if(!t[e])return t;let n={...t};return n[e]-=1,n[e]<=0&&delete n[e],n})},[]),m=(0,a.useCallback)(()=>{l({}),c(void 0)},[]),f=Object.keys(n).length>0,h=(0,a.useMemo)(()=>({isLoading:f,loadingMessage:d}),[f,d]),g=(0,a.useMemo)(()=>({showLoading:u,hideLoading:p,resetLoading:m}),[u,p,m]);return(0,r.jsx)(s.Provider,{value:g,children:(0,r.jsxs)(i.Provider,{value:h,children:[t,f&&(0,r.jsx)("div",{role:"status","aria-live":"polite",className:"global-loading-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:13e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",transition:"opacity 0.25s ease"},children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16,background:"rgba(255, 255, 255, 0.95)",padding:"28px 40px",borderRadius:20,boxShadow:"0 10px 32px rgba(15, 23, 42, 0.14)",border:"1px solid rgba(148, 163, 184, 0.35)",minWidth:240,textAlign:"center"},children:[(0,r.jsx)(o.Z,{size:"large"}),d&&(0,r.jsx)("div",{style:{fontSize:16,color:"#334155",fontWeight:600,letterSpacing:"0.01em"},children:d})]})})]})})};function d(){let e=(0,a.useContext)(i),t=(0,a.useContext)(s);if(!e||!t)throw Error("useGlobalLoading must be used within a GlobalLoadingProvider");return(0,a.useMemo)(()=>({...e,...t}),[e,t])}function c(){let e=(0,a.useContext)(s);if(!e)throw Error("useGlobalLoadingDispatch must be used within a GlobalLoadingProvider");return e}},88444:function(e,t,n){"use strict";n.d(t,{G:function(){return p}});var r=n(29827),a=n(11713),o=n(21770),i=n(2265),s=n(46252),l=n(86198),d=n(34029),c=n(12028),u=n(36799);function p(e){let{socket:t}=(0,i.useContext)(s.J),n=(0,r.NL)(),p=["orderQueue",e||"all"],{data:m=[],isLoading:f,error:h,refetch:g}=(0,a.a)({queryKey:p,queryFn:async()=>await l.e.getAll(void 0,e),staleTime:2e3});(0,i.useEffect)(()=>{if(!t)return;let r=(e,t)=>{let n=e.findIndex(e=>e.id===t.id);if(-1===n)return[t,...e];let r=e.slice();return r[n]=t,r},a=(e,t)=>e.filter(e=>e.id!==t),o=e=>{let t={Urgent:4,High:3,Normal:2,Low:1};return e.slice().sort((e,n)=>{let r=(t[n.priority]||0)-(t[e.priority]||0);return 0!==r?r:(e.queue_position||0)-(n.queue_position||0)})},i=e=>{n.getQueriesData({queryKey:["orderQueue"]}).forEach(t=>{let[r,a]=t;a&&n.setQueryData(r,e(a,r))})},s=e=>{i((t,n)=>{let a=n[1];return"all"!==a&&a&&e.status!==a?t:o(r(t,e))})},l=e=>{i((t,n)=>{let i=n[1],s="all"===i||!i||e.status===i,l=a(t,e.id);return s?o(r(l,e)):l})},d=e=>{i(t=>a(t,e.id))},u=t=>{var r;if(!(null==t?void 0:null===(r=t.updates)||void 0===r?void 0:r.length)){n.invalidateQueries({queryKey:["orderQueue",e||"all"],exact:!0});return}let a=new Map(t.updates.map(e=>[e.id,e]));i(e=>o(e.map(e=>{let t=a.get(e.id);return t?{...e,queue_position:t.queue_position,...t.priority?{priority:t.priority}:{}}:e})))};return t.on(c.b.orderQueue.added,s),t.on(c.b.orderQueue.updated,l),t.on(c.b.orderQueue.removed,d),t.on(c.b.orderQueue.reordered,u),()=>{t.off(c.b.orderQueue.added,s),t.off(c.b.orderQueue.updated,l),t.off(c.b.orderQueue.removed,d),t.off(c.b.orderQueue.reordered,u)}},[t,n,e]);let y=(0,o.D)({mutationFn:e=>l.e.addToQueue(e),onSuccess:()=>{n.invalidateQueries({queryKey:p,exact:!0}),d.ZP.success((0,u.t)("queue.addSuccess"))},onError:e=>{d.ZP.error(e.message||(0,u.t)("queue.addError"))}}),b=(0,o.D)({mutationFn:e=>{let{id:t,data:n}=e;return l.e.updateStatus(t,n)},onSuccess:()=>{n.invalidateQueries({queryKey:p,exact:!0}),d.ZP.success((0,u.t)("queue.updateStatusSuccess"))},onError:e=>{d.ZP.error(e.message||(0,u.t)("queue.updateStatusError"))}}),x=(0,o.D)({mutationFn:e=>l.e.removeFromQueue(e),onSuccess:()=>{n.invalidateQueries({queryKey:p,exact:!0}),d.ZP.success((0,u.t)("queue.removeSuccess"))},onError:e=>{d.ZP.error(e.message||(0,u.t)("queue.removeError"))}}),w=(0,o.D)({mutationFn:()=>l.e.reorderQueue(),onSuccess:()=>{n.invalidateQueries({queryKey:p,exact:!0}),d.ZP.success((0,u.t)("queue.reorderSuccess"))},onError:e=>{d.ZP.error(e.message||(0,u.t)("queue.reorderError"))}});return{queue:m,isLoading:f,error:h,refetch:g,addToQueue:y.mutate,updateStatus:b.mutate,removeFromQueue:x.mutate,reorderQueue:w.mutate,isAdding:y.isPending,isUpdating:b.isPending,isRemoving:x.isPending,isReordering:w.isPending}}},42785:function(e,t,n){"use strict";n.d(t,{DR:function(){return d},mk:function(){return u},yV:function(){return c}});var r=n(29827),a=n(2265),o=n(53286),i=n(47799),s=n(2838),l=n(86198);function d(){let e=(0,r.NL)();(0,a.useEffect)(()=>{(async()=>{try{await Promise.all([e.prefetchQuery({queryKey:["products",1,20,"all"],queryFn:()=>i.R.findAll(1,20,void 0,new URLSearchParams),staleTime:3e5}),e.prefetchQuery({queryKey:["categories"],queryFn:()=>s.G.findAll(),staleTime:6e5})])}catch(e){console.debug("Prefetch failed:",e)}})()},[e])}function c(){let e=(0,r.NL)();(0,a.useEffect)(()=>{(async()=>{try{await e.prefetchQuery({queryKey:["ordersSummary",1,50,"all","all",""],queryFn:()=>o.x.getAllSummary(void 0,1,50),staleTime:3e3})}catch(e){console.debug("Order list prefetch failed:",e)}})()},[e])}function u(){let e=(0,r.NL)();(0,a.useEffect)(()=>{(async()=>{try{await e.prefetchQuery({queryKey:["orderQueue","all"],queryFn:()=>l.e.getAll(),staleTime:2e3})}catch(e){console.debug("Queue prefetch failed:",e)}})()},[e])}},2838:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(2913),a=n(98170);let o="/pos/category",i={findAll:async(e,t)=>{let n=(0,r.b)("GET",o);t&&(n+="?".concat(t.toString()));let i={};e&&(i.Cookie=e);let s=await fetch(n,{cache:"no-store",credentials:"include",headers:i});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,a.i_)(e,"Failed to fetch categories"))}let l=await s.json(),d=(0,a.hH)(l);if(Array.isArray(d))return d;throw Error("Invalid categories response format")},findOne:async(e,t)=>{let n=(0,r.b)("GET","".concat(o,"/").concat(e)),i={};t&&(i.Cookie=t);let s=await fetch(n,{cache:"no-store",credentials:"include",headers:i});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,a.i_)(e,"Failed to fetch category"))}return(0,a.hH)(await s.json())},findOneByName:async(e,t)=>{let n=(0,r.b)("GET","".concat(o,"/name/").concat(e)),i={};t&&(i.Cookie=t);let s=await fetch(n,{cache:"no-store",credentials:"include",headers:i});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,a.i_)(e,"Failed to fetch category by name"))}return(0,a.hH)(await s.json())},create:async(e,t,n)=>{let i=(0,r.b)("POST",o),s={"Content-Type":"application/json"};t&&(s.Cookie=t),n&&(s["X-CSRF-Token"]=n);let l=await fetch(i,{method:"POST",headers:s,body:JSON.stringify(e),credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,a.i_)(e,"Failed to create category"))}return(0,a.hH)(await l.json())},update:async(e,t,n,i)=>{let s=(0,r.b)("PUT","".concat(o,"/").concat(e)),l={"Content-Type":"application/json"};n&&(l.Cookie=n),i&&(l["X-CSRF-Token"]=i);let d=await fetch(s,{method:"PUT",headers:l,body:JSON.stringify(t),credentials:"include"});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error((0,a.i_)(e,"Failed to update category"))}return(0,a.hH)(await d.json())},delete:async(e,t,n)=>{let i=(0,r.b)("DELETE","".concat(o,"/").concat(e)),s={};t&&(s.Cookie=t),n&&(s["X-CSRF-Token"]=n);let l=await fetch(i,{method:"DELETE",headers:s,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,a.i_)(e,"Failed to delete category"))}}}},84859:function(e,t,n){"use strict";n.d(t,{M:function(){return l},x:function(){return s}});let r="pos_offline_queue",a=()=>{let e=localStorage.getItem(r);return e?JSON.parse(e):[]},o=e=>{let t=Date.now();return e.filter(e=>t-e.timestamp<=6048e5)},i=e=>{localStorage.setItem(r,JSON.stringify(e))},s={addToQueue:(e,t)=>{let n=o(a()),r={id:"offline-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:e,payload:t,timestamp:Date.now(),retryCount:0};return i([...n,r]),r},getQueue:()=>a(),removeFromQueue:e=>{i(a().filter(t=>t.id!==e))},incrementRetry:(e,t)=>{i(a().map(n=>n.id===e?{...n,retryCount:n.retryCount+1,lastError:t}:n))},clearQueue:()=>{localStorage.removeItem(r)},pruneExceeded:()=>{i(o(a()).filter(e=>e.retryCount<=5))}},l={maxRetry:5,backoff:e=>Math.min(3e4,2e3*e)}},86198:function(e,t,n){"use strict";n.d(t,{e:function(){return l}});var r=n(2913),a=n(71567),o=n(97235);let i=a.q.POS.ORDER_QUEUE,s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",n={};return t&&(n["Content-Type"]=t),e&&(n.Cookie=e),n},l={getAll:async(e,t)=>{let n=new URLSearchParams;t&&n.append("status",t);let a=n.toString()?"".concat(i,"?").concat(n.toString()):i,o=(0,r.b)("GET",a),l=s(e,""),d=await fetch(o,{cache:"no-store",headers:l,credentials:"include"});if(!d.ok){var c;let e=await d.json().catch(()=>({}));throw Error((null===(c=e.error)||void 0===c?void 0:c.message)||e.message||"ไม่สามารถดึงข้อมูลคิวได้")}let u=await d.json();return u.success&&Array.isArray(u.data)?u.data:Array.isArray(u)?u:[]},addToQueue:async(e,t)=>{let n=(0,r.b)("POST",i),a=s(t),l=await (0,o.P)();l&&(a["X-CSRF-Token"]=l);let d=await fetch(n,{method:"POST",headers:a,credentials:"include",body:JSON.stringify({orderId:e.orderId,priority:e.priority||"Normal"})});if(!d.ok){var c;let e=await d.json().catch(()=>({}));throw Error((null===(c=e.error)||void 0===c?void 0:c.message)||e.message||"ไม่สามารถเพิ่มออเดอร์เข้าคิวได้")}let u=await d.json();return u.success&&u.data?u.data:u},updateStatus:async(e,t,n)=>{let a=(0,r.b)("PATCH","".concat(i,"/").concat(e,"/status")),l=s(n),d=await (0,o.P)();d&&(l["X-CSRF-Token"]=d);let c=await fetch(a,{method:"PATCH",headers:l,credentials:"include",body:JSON.stringify(t)});if(!c.ok){var u;let e=await c.json().catch(()=>({}));throw Error((null===(u=e.error)||void 0===u?void 0:u.message)||e.message||"ไม่สามารถอัปเดตสถานะได้")}let p=await c.json();return p.success&&p.data?p.data:p},removeFromQueue:async(e,t)=>{let n=(0,r.b)("DELETE","".concat(i,"/").concat(e)),a=s(t,""),l=await (0,o.P)();l&&(a["X-CSRF-Token"]=l);let d=await fetch(n,{method:"DELETE",headers:a,credentials:"include"});if(!d.ok){var c;let e=await d.json().catch(()=>({}));throw Error((null===(c=e.error)||void 0===c?void 0:c.message)||e.message||"ไม่สามารถลบออกจากคิวได้")}},reorderQueue:async e=>{let t=(0,r.b)("POST","".concat(i,"/reorder")),n=s(e),a=await (0,o.P)();a&&(n["X-CSRF-Token"]=a);let l=await fetch(t,{method:"POST",headers:n,credentials:"include"});if(!l.ok){var d;let e=await l.json().catch(()=>({}));throw Error((null===(d=e.error)||void 0===d?void 0:d.message)||e.message||"ไม่สามารถจัดเรียงคิวใหม่ได้")}}}},53286:function(e,t,n){"use strict";n.d(t,{x:function(){return w}});var r=n(20019),a=n(2913),o=n(71567),i=n(32446);let s=r.Ryn({id:r.Z_8(),username:r.Z_8()}).partial().nullable(),l=r.Ryn({id:r.Z_8(),display_name:r.Z_8()}).partial().nullable(),d=r.Ryn({id:r.Z_8(),display_name:r.Z_8(),img_url:r.Z_8().nullable(),price:r.oQ2.number(),category:l.optional()}).partial().nullable(),c=r.Ryn({id:r.Z_8().optional(),detail_name:r.Z_8(),extra_price:r.oQ2.number()}).partial(),u=r.Ryn({id:r.Z_8(),order_id:r.Z_8(),product_id:r.Z_8(),product_name:r.Z_8().optional(),quantity:r.oQ2.number(),price:r.oQ2.number(),total_price:r.oQ2.number(),discount_amount:r.oQ2.number().optional().default(0),notes:r.Z_8().nullable().optional(),status:r.jbo(i.i).optional(),product:d.optional(),details:r.IXX(c).optional()}),p=r.Ryn({id:r.Z_8(),order_no:r.Z_8(),order_type:r.jbo(i.m),table_id:r.Z_8().nullable().optional(),delivery_id:r.Z_8().nullable().optional(),delivery_code:r.Z_8().nullable().optional(),sub_total:r.oQ2.number(),discount_id:r.Z_8().nullable().optional(),discount_amount:r.oQ2.number(),vat:r.oQ2.number(),total_amount:r.oQ2.number(),received_amount:r.oQ2.number(),change_amount:r.oQ2.number(),status:r.jbo(i.i),created_by_id:r.Z_8().nullable().optional(),create_date:r.Z_8(),update_date:r.Z_8(),items:r.IXX(u).optional(),created_by:s.optional(),table:r.YjB().optional(),delivery:r.YjB().optional(),discount:r.YjB().optional(),payments:r.IXX(r.YjB()).optional()}),m=r.Ryn({data:r.IXX(p),total:r.oQ2.number(),page:r.oQ2.number(),last_page:r.oQ2.number().optional()}),f=r.Ryn({table_name:r.Z_8().nullable().optional(),delivery_name:r.Z_8().nullable().optional()}).partial().nullable(),h=r.Ryn({id:r.Z_8(),order_no:r.Z_8(),order_type:r.jbo(i.m),status:r.jbo(i.i),create_date:r.Z_8(),total_amount:r.oQ2.number(),delivery_code:r.Z_8().nullable().optional(),table_id:r.Z_8().nullable().optional(),delivery_id:r.Z_8().nullable().optional(),table:f.optional(),delivery:f.optional(),items_summary:r.IMB(r.Z_8(),r.oQ2.number()).optional(),items_count:r.oQ2.number().optional()}),g=r.Ryn({data:r.IXX(h),total:r.oQ2.number(),page:r.oQ2.number(),last_page:r.oQ2.number().optional()});var y=n(98170);let b=o.q.POS.ORDERS,x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",n={};return t&&(n["Content-Type"]=t),e&&(n.Cookie=e),n},w={getAll:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,l=new URLSearchParams({page:t.toString(),limit:n.toString(),...o&&{status:o},...i&&{type:i},...s&&{q:s}}),d="".concat(b,"?").concat(l.toString()),c=(0,a.b)("GET",d),u=x(e,""),p=await fetch(c,{cache:"no-store",headers:u,credentials:"include"});if(!p.ok){let e=await p.json().catch(()=>({}));throw Error((0,y.i_)(e,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}let f=await p.json();try{return m.parse((0,y.XO)(f))}catch(e){throw console.error("Zod Validation Error in ordersService.getAll:",e),e instanceof r.jmq&&console.error("Zod Issues:",e.issues),e}},getAllSummary:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,l=new URLSearchParams({page:t.toString(),limit:n.toString(),...o&&{status:o},...i&&{type:i},...s&&{q:s}}),d="".concat(b,"/summary?").concat(l.toString()),c=(0,a.b)("GET",d),u=x(e,""),p=await fetch(c,{cache:"no-store",headers:u,credentials:"include"});if(!p.ok){let e=await p.json().catch(()=>({}));throw Error((0,y.i_)(e,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}let m=await p.json();try{return g.parse((0,y.XO)(m))}catch(e){throw console.error("Zod Validation Error in ordersService.getAllSummary:",e),e instanceof r.jmq&&console.error("Zod Issues:",e.issues),e}},getStats:async e=>{let t=(0,a.b)("GET",o.q.POS.CHANNELS.STATS),n=x(e,""),r=await fetch(t,{cache:"no-store",headers:n,credentials:"include"});if(!r.ok){let e=await r.text();console.error("Order Stats Backend Error:",e);let t=await JSON.parse(e).catch(()=>({}));throw Error((0,y.i_)(t,"ไม่สามารถดึงข้อมูลสถิติได้"))}let i=await r.json();return(0,y.hH)(i)},getById:async(e,t)=>{let n=(0,a.b)("GET","".concat(b,"/").concat(e)),o=x(t,""),i=await fetch(n,{cache:"no-store",headers:o,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,y.i_)(e,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}let s=await i.json();try{let e=(0,y.hH)(s);if(Array.isArray(e)){if(0===e.length)throw Error("Order not found");return p.parse(e[0])}return p.parse(e)}catch(e){throw console.error("Zod Validation Error in ordersService.getById:",e),e instanceof r.jmq&&console.error("Zod Issues:",e.issues),e}},create:async(e,t,n)=>{let r=(0,a.b)("POST","".concat(b)),o=x(t);n&&(o["X-CSRF-Token"]=n);let i=await fetch(r,{method:"POST",headers:o,credentials:"include",body:JSON.stringify(e)});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,y.i_)(e,"ไม่สามารถสร้างออเดอร์ได้"))}return(0,y.hH)(await i.json())},update:async(e,t,n,r)=>{let o=(0,a.b)("PUT","".concat(b,"/").concat(e)),i=x(n);r&&(i["X-CSRF-Token"]=r);let s=await fetch(o,{method:"PUT",headers:i,credentials:"include",body:JSON.stringify(t)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,y.i_)(e,"ไม่สามารถแก้ไขออเดอร์ได้"))}return(0,y.hH)(await s.json())},delete:async(e,t,n)=>{let r=(0,a.b)("DELETE","".concat(b,"/").concat(e)),o=x(t,"");n&&(o["X-CSRF-Token"]=n);let i=await fetch(r,{method:"DELETE",headers:o,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,y.i_)(e,"ไม่สามารถลบออเดอร์ได้"))}},updateItemStatus:async(e,t,n,r)=>{let o=(0,a.b)("PATCH","".concat(b,"/items/").concat(e,"/status")),i=x(n);r&&(i["X-CSRF-Token"]=r);let s=await fetch(o,{method:"PATCH",headers:i,credentials:"include",body:JSON.stringify({status:t})});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,y.i_)(e,"ไม่สามารถอัปเดตสถานะรายการได้"))}},getItems:async(e,t)=>{let n=(0,a.b)("GET","".concat(b,"/items").concat(e?"?status=".concat(e):"")),r=x(t,""),o=await fetch(n,{cache:"no-store",headers:r,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error((0,y.i_)(e,"ไม่สามารถดึงข้อมูลรายการได้"))}let i=(0,y.hH)(await o.json());if(Array.isArray(i))return i;if(i&&"object"==typeof i&&"data"in i){let e=i.data;if(Array.isArray(e))return e}return i},addItem:async(e,t,n,r)=>{let o=(0,a.b)("POST","".concat(b,"/").concat(e,"/items")),i=x(n);r&&(i["X-CSRF-Token"]=r);let s=await fetch(o,{method:"POST",headers:i,credentials:"include",body:JSON.stringify(t)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,y.i_)(e,"ไม่สามารถเพิ่มรายการได้"))}return(0,y.hH)(await s.json())},updateItem:async(e,t,n,r)=>{let o=(0,a.b)("PUT","".concat(b,"/items/").concat(e)),i=x(n,"application/json");r&&(i["X-CSRF-Token"]=r);let s=await fetch(o,{method:"PUT",headers:i,credentials:"include",body:JSON.stringify(t)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,y.i_)(e,"ไม่สามารถแก้ไขรายการได้"))}return(0,y.hH)(await s.json())},deleteItem:async(e,t,n)=>{let r=(0,a.b)("DELETE","".concat(b,"/items/").concat(e)),o=x(t,"");n&&(o["X-CSRF-Token"]=n);let i=await fetch(r,{method:"DELETE",headers:o,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,y.i_)(e,"ไม่สามารถลบรายการได้"))}return(0,y.hH)(await i.json())},updateStatus:async(e,t,n)=>{let r={"Content-Type":"application/json"};n&&(r["X-CSRF-Token"]=n);let o=(0,a.b)("PUT","".concat(b,"/").concat(e));if(!(await fetch(o,{method:"PUT",headers:r,body:JSON.stringify({status:t}),credentials:"include"})).ok)throw Error("Failed to update status")}}},47799:function(e,t,n){"use strict";n.d(t,{R:function(){return c}});var r=n(2913),a=n(71567),o=n(20019);let i=o.Ryn({id:o.Z_8(),product_name:o.Z_8(),display_name:o.Z_8(),description:o.Z_8().optional().or(o.Z_8()),price:o.Rxh().or(o.Z_8().transform(e=>Number(e))),price_delivery:o.Rxh().or(o.Z_8().transform(e=>Number(e))).optional(),category_id:o.Z_8(),unit_id:o.Z_8(),img_url:o.Z_8().nullable().optional(),create_date:o.Z_8().or(o.hTZ()).transform(e=>new Date(e)),update_date:o.Z_8().or(o.hTZ()).transform(e=>new Date(e)),is_active:o.O72().optional().default(!0),category:o.YjB().optional(),unit:o.YjB().optional()}).transform(e=>{var t;return{...e,price_delivery:null!==(t=e.price_delivery)&&void 0!==t?t:e.price}}),s=o.Ryn({data:o.IXX(i),total:o.Rxh(),page:o.Rxh(),last_page:o.Rxh()});var l=n(98170);let d=a.q.POS.PRODUCTS,c={findAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=(0,r.b)("GET",d),i=new URLSearchParams(a||"");i.append("page",e.toString()),i.append("limit",t.toString()),o+="?".concat(i.toString());let c={};n&&(c.Cookie=n);let u=await fetch(o,{cache:"no-store",credentials:"include",headers:c});if(!u.ok){let e=await u.json().catch(()=>({}));throw Error((0,l.i_)(e,"Failed to fetch products"))}let p=await u.json(),m=(0,l.XO)(p);return s.parse(m)},findOne:async(e,t)=>{let n=(0,r.b)("GET","".concat(d,"/").concat(e)),a={};t&&(a.Cookie=t);let o=await fetch(n,{cache:"no-store",credentials:"include",headers:a});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error((0,l.i_)(e,"Failed to fetch product"))}let s=await o.json();return i.parse((0,l.hH)(s))},findOneByName:async(e,t)=>{let n=(0,r.b)("GET","".concat(d,"/name/").concat(e)),a={};t&&(a.Cookie=t);let o=await fetch(n,{cache:"no-store",credentials:"include",headers:a});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error((0,l.i_)(e,"Failed to fetch product by name"))}let s=await o.json();return i.parse((0,l.hH)(s))},create:async(e,t,n)=>{let a=(0,r.b)("POST",d),o={"Content-Type":"application/json"};t&&(o.Cookie=t),n&&(o["X-CSRF-Token"]=n);let i=await fetch(a,{method:"POST",headers:o,body:JSON.stringify(e),credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,l.i_)(e,"Failed to create product"))}let s=await i.json();return(0,l.hH)(s)},update:async(e,t,n,a)=>{let o=(0,r.b)("PUT","".concat(d,"/").concat(e)),i={"Content-Type":"application/json"};n&&(i.Cookie=n),a&&(i["X-CSRF-Token"]=a);let s=await fetch(o,{method:"PUT",headers:i,body:JSON.stringify(t),credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,l.i_)(e,"Failed to update product"))}let c=await s.json();return(0,l.hH)(c)},delete:async(e,t,n)=>{let a=(0,r.b)("DELETE","".concat(d,"/").concat(e)),o={};t&&(o.Cookie=t),n&&(o["X-CSRF-Token"]=n);let i=await fetch(a,{method:"DELETE",headers:o,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,l.i_)(e,"Failed to delete product"))}}}},5325:function(e,t,n){"use strict";var r,a,o,i;n.d(t,{l:function(){return r},t:function(){return a}}),(o=r||(r={})).Pending="Pending",o.Processing="Processing",o.Completed="Completed",o.Cancelled="Cancelled",(i=a||(a={})).Low="Low",i.Normal="Normal",i.High="High",i.Urgent="Urgent"},32446:function(e,t,n){"use strict";var r,a,o,i;n.d(t,{i:function(){return a},m:function(){return r}}),(o=r||(r={})).DineIn="DineIn",o.TakeAway="TakeAway",o.Delivery="Delivery",(i=a||(a={})).Pending="Pending",i.Cooking="Cooking",i.Served="Served",i.WaitingForPayment="WaitingForPayment",i.Paid="Paid",i.Completed="Completed",i.Cancelled="Cancelled"},67918:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var r=n(2265),a=n(34029),o=n(99376),i=n(14362);function s(){let{allowedRoles:e,requiredRole:t="Admin",redirectUnauthenticated:n="/login",redirectUnauthorized:s="/pos",unauthorizedMessage:l="คุณไม่มีสิทธิ์เข้าถึงหน้านี้"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=(0,o.useRouter)(),{user:c,loading:u}=(0,i.a)(),p=(0,r.useMemo)(()=>e&&e.length>0?e:t?[t]:void 0,[e,t]),m=(0,r.useMemo)(()=>(function(e,t,n){if(t)return"checking";if(!e)return"unauthenticated";if(n&&n.length>0){var r;let t="Admin"===(r=e.role)||"Manager"===r||"Employee"===r?r:null;if(!t||!(n.includes(t)||"Admin"===t))return"unauthorized"}return"authorized"})(c,u,p),[c,u,p]),f=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{if("unauthenticated"===m){d.replace(n);return}"unauthorized"===m&&(f.current||(f.current=!0,a.ZP.error(l)),d.replace(s))},[m,d,n,s,l]),{status:m,isAuthorized:"authorized"===m,isChecking:"checking"===m,user:c}}},97235:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(5447);let a=null,o=0,i=null;async function s(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Date.now();return!e&&a&&t-o<6e5?a:(i||(i=r.O.getCsrfToken().then(e=>(a=e||"",o=Date.now(),a)).finally(()=>{i=null})),i)}},12028:function(e,t,n){"use strict";n.d(t,{b:function(){return r},g:function(){return a}});let r={system:{announcement:"system:announcement"},users:{create:"users:create",update:"users:update",delete:"users:delete",status:"users:update-status"},roles:{create:"roles:create",update:"roles:update",delete:"roles:delete"},branches:{create:"branches:create",update:"branches:update",delete:"branches:delete"},products:{create:"products:create",update:"products:update",delete:"products:delete"},productsUnit:{create:"productsUnit:create",update:"productsUnit:update",delete:"productsUnit:delete"},categories:{create:"category:create",update:"category:update",delete:"category:delete"},tables:{create:"tables:create",update:"tables:update",delete:"tables:delete"},orders:{create:"orders:create",update:"orders:update",delete:"orders:delete"},payments:{create:"payments:create",update:"payments:update",delete:"payments:delete"},discounts:{create:"discounts:create",update:"discounts:update",delete:"discounts:delete"},delivery:{create:"delivery:create",update:"delivery:update",delete:"delivery:delete"},shifts:{update:"shifts:update"},orderQueue:{added:"order-queue:added",updated:"order-queue:updated",removed:"order-queue:removed",reordered:"order-queue:reordered"},ingredients:{create:"ingredients:create",update:"ingredients:update",delete:"ingredients:delete"},ingredientsUnit:{create:"ingredientsUnit:create",update:"ingredientsUnit:update",delete:"ingredientsUnit:delete"},stock:{update:"stock:update"},stockOrders:{create:"stock:orders:create",update:"stock:orders:update",status:"stock:orders:status",delete:"stock:orders:delete",detailUpdate:"stock:orders:detail:update"},paymentAccounts:{create:"payment-accounts:create",update:"payment-accounts:update",delete:"payment-accounts:delete"},paymentMethods:{create:"paymentMethod:create",update:"paymentMethod:update",delete:"paymentMethod:delete"},shopProfile:{update:"shopProfile:update"},salesOrderItem:{create:"salesOrderItem:create",update:"salesOrderItem:update",delete:"salesOrderItem:delete"},salesOrderDetail:{create:"salesOrderDetail:create",update:"salesOrderDetail:update",delete:"salesOrderDetail:delete"}},a={stockOrdersUpdated:"orders_updated"}}},function(e){e.O(0,[253,1522,3418,742,9486,4252,3916,8651,6931,4159,3831,2224,3248,2401,9,19,3834,9763,1713,5713,1047,7855,1214,9385,2971,2117,1744],function(){return e(e.s=86233)}),_N_E=e.O()}]);