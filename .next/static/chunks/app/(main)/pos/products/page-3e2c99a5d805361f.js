(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3843,9385,4390,3749],{50304:function(e,t,r){Promise.resolve().then(r.bind(r,92837))},92837:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ee}});var n=r(57437),a=r(2265),o=r(39486),i=r(80009),s=r(24783),l=r(80336),c=r(50742),d=r(34029),u=r(53743),p=r(51653),f=r(88589),h=r(24725),g=r(33145),m=r(62376),b=r(13377),y=r(26349),x=r(89245),k=r(96473),v=r(29436),w=r(70464),j=r(83669),S=r(99376),E=r(3369),C=r(26972),T=r(24675),P=r(97235),F=r(67918),R=r(67697),_=r(73814),O=r(69397);let A={...(0,O.yf)("linear-gradient(135deg, #4F46E5 0%, #4338CA 100%)"),productCard:O.YO,productCardInner:O.lv},Z="\n  ".concat((0,O.IU)(".products-page",".product-card"),"\n\n  @media (max-width: 576px) {\n    .products-header-content {\n      flex-direction: column !important;\n      align-items: stretch !important;\n      gap: 16px !important;\n    }\n    \n    .products-header-left {\n      width: 100%;\n    }\n\n    .products-header-actions {\n      width: 100%;\n      display: flex;\n      gap: 8px;\n    }\n\n    .products-search-input {\n      width: 100% !important;\n      flex: 1;\n    }\n\n    .products-add-btn-text {\n      display: none;\n    }\n    \n    .ant-empty-description {\n        padding: 0 20px;\n    }\n\n    .product-card-inner {\n        padding: 12px !important;\n        gap: 10px !important;\n    }\n  }\n");var I=r(79657),L=r(11713),U=r(2913),D=r(98170);let z=async(e,t)=>{let r=(0,U.b)("GET","/pos/productsUnit");t&&(r+="?".concat(t.toString()));let n={};e&&(n.Cookie=e);let a=await fetch(r,{cache:"no-store",credentials:"include",headers:n});if(!a.ok){var o;let e=await a.json().catch(()=>({}));throw Error((null==e?void 0:null===(o=e.error)||void 0===o?void 0:o.message)||e.error||e.message||"Failed to fetch products units")}return(0,D.hH)(await a.json())},H="pos:products-units";var B=r(67338);function q(e,t){let r=e.length>0,n=t.length>0;return{hasCategories:r,hasUnits:n,isReady:r&&n,missingFields:[!r&&"หมวดหมู่สินค้า",!n&&"หน่วยสินค้า"].filter(Boolean)}}function N(e,t){let r=q(e,t);return r.isReady?"":"กรุณาเพิ่ม".concat(r.missingFields.join("และ"),"ให้เรียบร้อยก่อนใช้งาน")}var M=r(12028),G=r(2938),W=r(25193),X=r(37410),J=r(27623),Y=r(20148),Q=r(2786);let{Text:K}=o.default,V=e=>{let{total:t,active:r,inactive:a}=e;return(0,n.jsxs)("div",{style:{background:"#fff",borderRadius:16,border:"1px solid #e2e8f0",display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:8,padding:14},children:[(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("span",{style:{fontSize:24,fontWeight:700,color:"#0f172a",display:"block"},children:t}),(0,n.jsx)(K,{style:{fontSize:12,color:"#64748b"},children:"ทั้งหมด"})]}),(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("span",{style:{fontSize:24,fontWeight:700,color:"#0f766e",display:"block"},children:r}),(0,n.jsx)(K,{style:{fontSize:12,color:"#64748b"},children:"ใช้งาน"})]}),(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("span",{style:{fontSize:24,fontWeight:700,color:"#b91c1c",display:"block"},children:a}),(0,n.jsx)(K,{style:{fontSize:12,color:"#64748b"},children:"ปิดใช้งาน"})]})]})},$=e=>{var t,r,a,o,d;let{product:u,onEdit:p,onDelete:f,onToggleActive:h,updatingStatusId:x}=e;return(0,n.jsx)("div",{className:"product-card",style:{...A.productCard(u.is_active),borderRadius:16},onClick:()=>p(u),children:(0,n.jsxs)("div",{className:"product-card-inner",style:A.productCardInner,children:[(0,n.jsx)("div",{style:{width:64,height:64,borderRadius:14,border:"1px solid #F1F5F9",overflow:"hidden",position:"relative",background:"#F8FAFC",flexShrink:0},children:u.img_url?(0,n.jsx)(g.default,{src:u.img_url,alt:u.display_name||u.product_name,fill:!0,style:{objectFit:"cover"},sizes:"64px"}):(0,n.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%)"},children:(0,n.jsx)(m.Z,{style:{fontSize:20,color:"#4F46E5"}})})}),(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[(0,n.jsx)(K,{strong:!0,style:{fontSize:16,color:"#0f172a"},ellipsis:{tooltip:u.display_name},children:u.display_name}),(0,n.jsx)(i.Z,{color:u.is_active?"green":"default",children:u.is_active?"ใช้งาน":"ปิดใช้งาน"})]}),(0,n.jsx)(K,{type:"secondary",style:{display:"block",marginBottom:6},ellipsis:{tooltip:u.product_name},children:u.product_name}),(0,n.jsxs)(s.Z,{size:6,wrap:!0,children:[(0,n.jsx)(i.Z,{style:{margin:0,border:"none",background:"#ecfdf5",color:"#047857"},children:(0,B.T4)(Number(u.price||0))}),Number(null!==(a=null!==(r=u.price_delivery)&&void 0!==r?r:u.price)&&void 0!==a?a:0)!==Number(null!==(o=u.price)&&void 0!==o?o:0)?(0,n.jsxs)(i.Z,{style:{margin:0,border:"none",background:"#fdf2f8",color:"#be185d"},children:["Delivery ",(0,B.T4)(Number(null!==(d=u.price_delivery)&&void 0!==d?d:0))]}):null,(null===(t=u.category)||void 0===t?void 0:t.display_name)?(0,n.jsx)(i.Z,{style:{margin:0,border:"none",background:"#eff6ff",color:"#1d4ed8"},children:u.category.display_name}):null]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)(l.Z,{size:"small",checked:u.is_active,loading:x===u.id,onClick:(e,t)=>{null==t||t.stopPropagation(),h(u,e)}}),(0,n.jsx)(c.ZP,{type:"text",icon:(0,n.jsx)(b.Z,{}),onClick:e=>{e.stopPropagation(),p(u)},style:{borderRadius:10,color:"#4F46E5",background:"#EEF2FF",width:36,height:36}}),(0,n.jsx)(c.ZP,{type:"text",danger:!0,icon:(0,n.jsx)(y.Z,{}),onClick:e=>{e.stopPropagation(),f(u)},style:{borderRadius:10,background:"#fef2f2",width:36,height:36}})]})]})})};function ee(){var e;let t=(0,S.useRouter)(),[r,o]=(0,a.useState)([]),[i,l]=(0,a.useState)(0),[g,b]=(0,a.useState)(null),[O,U]=(0,a.useState)(1),[D,B]=(0,a.useState)(1),[ee,et]=(0,a.useState)(!1),[er,en]=(0,a.useState)(""),[ea,eo]=(0,a.useState)("all"),[ei,es]=(0,a.useState)("all"),[el,ec]=(0,a.useState)(null),[ed,eu]=(0,a.useState)(!1),{execute:ep}=(0,C.J)(),{showLoading:ef}=(0,E.x)(),{socket:eh}=(0,T.s)(),{isAuthorized:eg,isChecking:em}=(0,F.e)({allowedRoles:["Admin","Manager"]}),{data:eb=[],isLoading:ey}=(0,I.L)(),{data:ex=[],isLoading:ek}=(0,L.a)({queryKey:["products-units"],queryFn:async()=>{let e=await z();return(null==e?void 0:e.length)&&(0,_.v)(H,e),e},initialData:()=>(0,_.t)(H,3e5)||void 0,staleTime:3e5,refetchOnWindowFocus:!1,retry:1}),ev=(0,a.useMemo)(()=>q(eb,ex),[eb,ex]);(0,a.useEffect)(()=>{(0,P.P)()},[]),(0,a.useEffect)(()=>{let e=(0,_.t)("pos:products:v3",6e5);(null==e?void 0:e.items)&&(o(e.items),l(e.total||e.items.length),U(e.page||1),B(e.last_page||1),b("number"==typeof e.active_total?e.active_total:null))},[]);let ew=(0,a.useCallback)(async()=>{ep(async()=>{let e=new URLSearchParams;e.set("page","1"),e.set("limit","50"),er.trim()&&e.set("q",er.trim()),"active"===ea&&e.set("is_active","true"),"inactive"===ea&&e.set("is_active","false"),"all"!==ei&&e.set("category_id",ei);let t=new URLSearchParams;t.set("page","1"),t.set("limit","1"),t.set("is_active","true"),"all"!==ei&&t.set("category_id",ei);let[r,n]=await Promise.all([fetch("/api/pos/products?".concat(e.toString())),fetch("/api/pos/products?".concat(t.toString()))]);if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลสินค้าได้")}if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงจำนวนสินค้าได้")}let a=await r.json(),i=await n.json(),s=Array.isArray(a.data)?a.data:[],c="number"==typeof a.total?a.total:s.length,d="number"==typeof a.page?a.page:1,u="number"==typeof a.last_page?a.last_page:1,p="number"==typeof i.total?i.total:null;o(s),l(c),U(d),B(u),b(p),er.trim()||"all"!==ea||"all"!==ei||(0,_.v)("pos:products:v3",{items:s,total:c,page:d,last_page:u,active_total:null!=p?p:void 0})},"กำลังโหลดข้อมูลสินค้า...")},[ep,er,ea,ei]);(0,a.useEffect)(()=>{if(!eg)return;let e=setTimeout(()=>{ew()},300);return()=>clearTimeout(e)},[eg,ew]),(0,R.D)({socket:eh,events:[M.b.products.create,M.b.products.update,M.b.products.delete],onRefresh:ew,enabled:eg,debounceMs:400}),(0,R.v)(eh,{create:M.b.categories.create,update:M.b.categories.update,delete:M.b.categories.delete},()=>ew());let ej=(0,a.useCallback)(async()=>{if(!ee&&!(O>=D)){et(!0);try{let e=O+1,t=new URLSearchParams;t.set("page",e.toString()),t.set("limit","50"),er.trim()&&t.set("q",er.trim()),"active"===ea&&t.set("is_active","true"),"inactive"===ea&&t.set("is_active","false"),"all"!==ei&&t.set("category_id",ei);let r=await fetch("/api/pos/products?".concat(t.toString()));if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.error||e.message||"โหลดข้อมูลเพิ่มไม่สำเร็จ")}let n=await r.json(),a=Array.isArray(n.data)?n.data:[],s="number"==typeof n.total?n.total:i,c="number"==typeof n.page?n.page:e,d="number"==typeof n.last_page?n.last_page:D;o(e=>{let t=new Map(e.map(e=>[e.id,e]));return a.forEach(e=>t.set(e.id,e)),Array.from(t.values())}),l(s),U(c),B(d)}catch(e){d.ZP.error(e instanceof Error?e.message:"โหลดข้อมูลเพิ่มไม่สำเร็จ")}finally{et(!1)}}},[ee,O,D,er,ea,ei,i]),eS=()=>{ef("กำลังเปิดหน้าจัดการสินค้า..."),t.push("/pos/products/manage/add")},eE=e=>{ef("กำลังเปิดหน้าแก้ไขสินค้า..."),t.push("/pos/products/manage/edit/".concat(e.id))},eC=e=>{u.Z.confirm({title:"ยืนยันการลบสินค้า",content:'คุณต้องการลบสินค้า "'.concat(e.display_name,'" หรือไม่?'),okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:(0,n.jsx)(y.Z,{style:{color:"#EF4444"}}),onOk:async()=>{await ep(async()=>{let t=await (0,P.P)();if(!(await fetch("/api/pos/products/delete/".concat(e.id),{method:"DELETE",headers:{"X-CSRF-Token":t}})).ok)throw Error("ไม่สามารถลบสินค้าได้");o(t=>t.filter(t=>t.id!==e.id)),l(e=>Math.max(e-1,0)),d.ZP.success('ลบสินค้า "'.concat(e.display_name,'" สำเร็จ'))},"กำลังลบสินค้า...")}})},eT=async(e,t)=>{ec(e.id);try{let r=await (0,P.P)(),n=await fetch("/api/pos/products/update/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":r},body:JSON.stringify({is_active:t})});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถเปลี่ยนสถานะสินค้าได้")}let a=await n.json();o(t=>t.map(t=>t.id===e.id?a:t)),d.ZP.success(t?"เปิดใช้งานสินค้าแล้ว":"ปิดใช้งานสินค้าแล้ว")}catch(e){console.error(e),d.ZP.error(e instanceof Error?e.message:"ไม่สามารถเปลี่ยนสถานะสินค้าได้")}finally{ec(null)}};if(em)return(0,n.jsx)(G.H,{message:"กำลังตรวจสอบสิทธิ์การใช้งาน..."});if(!eg)return(0,n.jsx)(G.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับ...",tone:"danger"});let eP=null!=g?g:r.filter(e=>e.is_active).length,eF=Math.max((i||r.length)-eP,0),eR=ey||ek;return eR||ev.isReady||0!==r.length?(0,n.jsxs)("div",{className:"products-page",style:A.container,children:[(0,n.jsx)("style",{children:Z}),(0,n.jsx)(Y.Z,{title:"สินค้า",subtitle:"ทั้งหมด ".concat(i||r.length," รายการ"),icon:(0,n.jsx)(m.Z,{}),actions:(0,n.jsxs)(s.Z,{size:8,wrap:!0,children:[(0,n.jsx)(c.ZP,{icon:(0,n.jsx)(x.Z,{}),onClick:ew}),(0,n.jsx)(c.ZP,{type:"primary",icon:(0,n.jsx)(k.Z,{}),onClick:eS,disabled:!ev.isReady,children:"เพิ่มสินค้า"})]})}),(0,n.jsx)(W.Z,{children:(0,n.jsxs)(J.Z,{children:[eR||ev.isReady||!(r.length>0)?null:(0,n.jsx)(X.Z,{title:"ต้องตั้งค่าก่อนเพิ่มสินค้า",children:(0,n.jsx)(p.Z,{message:"ข้อมูลอ้างอิงยังไม่ครบ",description:N(eb,ex),type:"warning",showIcon:!0})}),(0,n.jsx)(V,{total:i||r.length,active:eP,inactive:eF}),(0,n.jsx)(X.Z,{title:"ค้นหาและตัวกรอง",children:(0,n.jsxs)("div",{style:{display:"grid",gap:10,gridTemplateColumns:"1fr"},children:[(0,n.jsx)(f.default,{prefix:(0,n.jsx)(v.Z,{style:{color:"#94A3B8"}}),allowClear:!0,placeholder:"ค้นหาจากชื่อสินค้า ชื่อแสดง หรือคำค้นอื่น...",value:er,onChange:e=>en(e.target.value)}),(0,n.jsx)(h.Z,{options:[{label:"ทั้งหมด",value:"all"},{label:"ใช้งาน",value:"active"},{label:"ปิดใช้งาน",value:"inactive"}],value:ea,onChange:e=>eo(e)}),(0,n.jsxs)("div",{className:"modal-select-trigger ".concat("all"!==ei?"has-value":""),onClick:()=>eu(!0),style:{padding:"12px 16px",borderRadius:14,border:"2px solid #e2e8f0",background:"all"!==ei?"linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%)":"#fff",borderColor:"all"!==ei?"#4F46E5":"#e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",minHeight:48,transition:"all 0.2s ease"},children:[(0,n.jsx)("span",{style:{color:"all"!==ei?"#1e293b":"#94a3b8",fontWeight:"all"!==ei?600:400},children:"all"===ei?"ทุกหมวดหมู่":(null===(e=eb.find(e=>e.id===ei))||void 0===e?void 0:e.display_name)||"ทุกหมวดหมู่"}),(0,n.jsx)(w.Z,{style:{fontSize:12,color:"#94a3b8"}})]})]})}),(0,n.jsx)(u.Z,{title:"เลือกหมวดหมู่",open:ed,onCancel:()=>eu(!1),footer:null,centered:!0,width:400,styles:{body:{padding:"12px 16px 24px"}},children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:10,maxHeight:"60vh",overflowY:"auto"},children:[(0,n.jsxs)("div",{onClick:()=>{es("all"),eu(!1)},style:{padding:"14px 18px",border:"2px solid",borderRadius:12,cursor:"pointer",background:"all"===ei?"#eff6ff":"#fff",borderColor:"all"===ei?"#3b82f6":"#e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:54},children:[(0,n.jsx)("span",{style:{fontWeight:"all"===ei?600:400},children:"ทุกหมวดหมู่"}),"all"===ei&&(0,n.jsx)(j.Z,{style:{color:"#3b82f6",fontSize:18}})]}),eb.map(e=>(0,n.jsxs)("div",{onClick:()=>{es(e.id),eu(!1)},style:{padding:"14px 18px",border:"2px solid",borderRadius:12,cursor:"pointer",background:ei===e.id?"#eff6ff":"#fff",borderColor:ei===e.id?"#3b82f6":"#e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:54},children:[(0,n.jsx)("span",{style:{fontWeight:ei===e.id?600:400},children:e.display_name}),ei===e.id&&(0,n.jsx)(j.Z,{style:{color:"#3b82f6",fontSize:18}})]},e.id))]})}),(0,n.jsx)(X.Z,{title:"รายการสินค้า",extra:(0,n.jsx)("span",{style:{fontWeight:600},children:r.length}),children:r.length>0?(0,n.jsxs)(n.Fragment,{children:[r.map(e=>(0,n.jsx)($,{product:e,onEdit:eE,onDelete:eC,onToggleActive:eT,updatingStatusId:el},e.id)),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:12},children:O<D?(0,n.jsx)(c.ZP,{onClick:ej,loading:ee,style:{borderRadius:12},children:"โหลดเพิ่ม"}):(0,n.jsx)(K,{type:"secondary",style:{fontSize:12},children:"ไม่มีข้อมูลเพิ่มเติม"})})]}):(0,n.jsx)(Q.Z,{title:er.trim()?"ไม่พบสินค้าตามคำค้น":"ยังไม่มีสินค้า",description:er.trim()?"ลองเปลี่ยนคำค้น หรือตัวกรอง":"เพิ่มสินค้าแรกเพื่อเริ่มใช้งาน",action:er.trim()?null:(0,n.jsx)(c.ZP,{type:"primary",icon:(0,n.jsx)(k.Z,{}),onClick:eS,disabled:!ev.isReady,children:"เพิ่มสินค้า"})})})]})})]}):(0,n.jsxs)("div",{className:"products-page",style:A.container,children:[(0,n.jsx)("style",{children:Z}),(0,n.jsx)(Y.Z,{title:"สินค้า",subtitle:"ตั้งค่าระบบก่อนเพิ่มสินค้า",icon:(0,n.jsx)(m.Z,{}),actions:(0,n.jsxs)(s.Z,{size:8,wrap:!0,children:[(0,n.jsx)(c.ZP,{icon:(0,n.jsx)(x.Z,{}),onClick:ew}),(0,n.jsx)(c.ZP,{type:"primary",icon:(0,n.jsx)(k.Z,{}),disabled:!0,children:"เพิ่มสินค้า"})]})}),(0,n.jsx)(W.Z,{children:(0,n.jsx)(J.Z,{children:(0,n.jsx)(Q.Z,{title:"ยังไม่พร้อมเพิ่มสินค้า",description:N(eb,ex),action:(0,n.jsxs)(s.Z,{size:10,wrap:!0,children:[ev.hasCategories?null:(0,n.jsx)(c.ZP,{type:"primary",onClick:()=>t.push("/pos/category"),children:"เพิ่มหมวดหมู่"}),ev.hasUnits?null:(0,n.jsx)(c.ZP,{type:"primary",onClick:()=>t.push("/pos/productsUnit"),children:"เพิ่มหน่วยสินค้า"})]})})})})]})}},2938:function(e,t,r){"use strict";r.d(t,{H:function(){return f}});var n=r(57437),a=r(29),o=r.n(a);r(2265);var i=r(39486),s=r(47213),l=r(48651),c=r(48636),d=r(61935);let{Text:u,Title:p}=i.default,f=e=>{let{message:t,tone:r="secondary"}=e;return(0,n.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 access-guard-container",children:[(0,n.jsx)(s.ZP,{theme:{token:{colorPrimary:"#3b82f6"}},children:(0,n.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 content-wrapper",children:["danger"===r?(0,n.jsx)("div",{className:"jsx-e041fd1637d3b0f2 icon-circle danger",children:(0,n.jsx)(c.Z,{style:{fontSize:32,color:"#ef4444"}})}):(0,n.jsx)("div",{className:"jsx-e041fd1637d3b0f2 spinner-wrapper",children:(0,n.jsx)(l.Z,{indicator:(0,n.jsx)(d.Z,{style:{fontSize:40},spin:!0})})}),(0,n.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 text-content",children:[(0,n.jsx)(p,{level:4,style:{margin:0,color:"#1e293b"},children:"danger"===r?"Access Denied":"Loading"}),(0,n.jsx)(u,{type:r,style:{fontSize:16},children:t})]})]})}),(0,n.jsx)(o(),{id:"e041fd1637d3b0f2",children:".access-guard-container.jsx-e041fd1637d3b0f2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:100vh;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:#f8fafc}.content-wrapper.jsx-e041fd1637d3b0f2{background:white;padding:40px;-webkit-border-radius:24px;-moz-border-radius:24px;border-radius:24px;-webkit-box-shadow:0 20px 40px rgba(0,0,0,.05);-moz-box-shadow:0 20px 40px rgba(0,0,0,.05);box-shadow:0 20px 40px rgba(0,0,0,.05);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:24px;text-align:center;min-width:320px;-webkit-animation:fadeIn.5s ease-out;-moz-animation:fadeIn.5s ease-out;-o-animation:fadeIn.5s ease-out;animation:fadeIn.5s ease-out}.icon-circle.jsx-e041fd1637d3b0f2{width:80px;height:80px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff1f2}.spinner-wrapper.jsx-e041fd1637d3b0f2{padding:20px}.text-content.jsx-e041fd1637d3b0f2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:8px}@-webkit-keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeIn{from{opacity:0;-moz-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeIn{from{opacity:0;-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);-moz-transform:translatey(10px);-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}"})]})}},25193:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(57437);r(2265);var a=r(38616),o=r(87530);function i(e){let{children:t,maxWidth:r=o.H.pageMaxWidth,style:i}=e,s=a.default.useBreakpoint().md?o.H.pagePaddingXDesktop:o.H.pagePaddingXMobile;return(0,n.jsx)("div",{style:{width:"100%",maxWidth:r,margin:"0 auto",padding:"".concat(o.H.pagePaddingY,"px ").concat(s,"px"),...i},children:t})}},20148:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(57437);r(2265);var a=r(17588),o=r(2651),i=r(38616),s=r(10868),l=r(50742),c=r(39486),d=r(87530);function u(e){let{title:t,subtitle:r,icon:u,onBack:p,actions:f,style:h}=e,{token:g}=o.default.useToken(),m=i.default.useBreakpoint().md?d.H.pagePaddingXDesktop:d.H.pagePaddingXMobile;return(0,n.jsx)("div",{style:{padding:"".concat(d.H.pagePaddingY,"px ").concat(m,"px"),background:g.colorBgContainer,borderBottom:"1px solid ".concat(g.colorBorderSecondary),...h},children:(0,n.jsxs)(s.Z,{align:"center",justify:"space-between",wrap:"wrap",gap:12,style:{maxWidth:d.H.pageMaxWidth,margin:"0 auto"},children:[(0,n.jsxs)(s.Z,{align:"center",gap:12,style:{minWidth:0},children:[p&&(0,n.jsx)(l.ZP,{type:"text","aria-label":"ย้อนกลับ",icon:(0,n.jsx)(a.Z,{}),onClick:p,style:{borderRadius:12,width:44,height:44}}),u&&(0,n.jsx)("div",{style:{width:44,height:44,borderRadius:14,display:"grid",placeItems:"center",background:g.colorFillTertiary,color:g.colorText},children:u}),(0,n.jsxs)("div",{style:{minWidth:0},children:[(0,n.jsx)(c.default.Title,{level:4,style:{margin:0},children:t}),r&&(0,n.jsx)(c.default.Text,{type:"secondary",children:r})]})]}),f&&(0,n.jsx)(s.Z,{gap:8,wrap:"wrap",children:f})]})})}},37410:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(57437);r(2265);var a=r(2651),o=r(96931),i=r(10868),s=r(39486),l=r(87530);function c(e){let{title:t,extra:r,children:c,style:d}=e,{token:u}=a.default.useToken();return(0,n.jsx)(o.Z,{size:"small",variant:"outlined",style:{borderRadius:l.H.cardRadiusLG,...d},styles:{header:t?{borderBottomColor:u.colorBorderSecondary}:{display:"none"}},title:t?(0,n.jsxs)(i.Z,{align:"center",justify:"space-between",gap:12,children:[(0,n.jsx)(s.default.Text,{strong:!0,children:t}),r]}):void 0,children:c})}},27623:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(57437);r(2265);var a=r(10868),o=r(87530);function i(e){let{children:t,gap:r=o.H.sectionGap,style:i}=e;return(0,n.jsx)(a.Z,{vertical:!0,gap:r,style:i,children:t})}},2786:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(57437);r(2265);var a=r(96931),o=r(85180),i=r(39486),s=r(87530);function l(e){let{title:t="ไม่มีข้อมูล",description:r,action:l,image:c}=e;return(0,n.jsx)(a.Z,{size:"small",variant:"outlined",style:{borderRadius:s.H.cardRadiusLG},bodyStyle:{padding:20},children:(0,n.jsx)(o.Z,{image:c,description:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,n.jsx)(i.default.Text,{strong:!0,children:t}),r?(0,n.jsx)(i.default.Text,{type:"secondary",children:r}):null]}),children:l})})}},87530:function(e,t,r){"use strict";r.d(t,{H:function(){return n}});let n={pageMaxWidth:1200,pagePaddingXMobile:16,pagePaddingXDesktop:24,pagePaddingY:16,sectionGap:16,cardRadius:16,cardRadiusLG:20,cardShadow:"0 10px 24px rgba(15, 23, 42, 0.08)",surfaceBg:"#ffffff",surfaceBorder:"#e2e8f0"}},71567:function(e,t,r){"use strict";r.d(t,{q:function(){return a},v:function(){return n}});let n="/api",a={AUTH:{LOGIN:"/auth/login",LOGOUT:"/auth/logout",ME:"/auth/me",CSRF:"/csrf",SWITCH_BRANCH:"/auth/switch-branch"},AUDIT:{LOGS:"/audit/logs"},POS:{PRODUCTS:"/pos/products",ORDERS:"/pos/orders",TABLES:"/pos/tables",DISCOUNTS:"/pos/discounts",DELIVERY:"/pos/delivery",PAYMENT_METHODS:"/pos/paymentMethod",PAYMENTS:"/pos/payments",CATEGORY:"/pos/category",SHIFTS:{BASE:"/pos/shifts",CURRENT:"/pos/shifts/current",OPEN:"/pos/shifts/open",CLOSE:"/pos/shifts/close"},DASHBOARD:{SALES:"/pos/dashboard/sales",TOP_ITEMS:"/pos/dashboard/top-items"},CHANNELS:{STATS:"/pos/orders/stats"},SHOP_PROFILE:"/pos/shopProfile",SALES_ORDER_ITEMS:"/pos/salesOrderItem",SALES_ORDER_DETAILS:"/pos/salesOrderDetail",PRODUCTS_UNIT:"/pos/productsUnit",PAYMENT_DETAILS:"/pos/paymentDetails",BRANCH:"/branches",ORDER_QUEUE:"/pos/queue"}}},14362:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return p},a:function(){return f}});var n=r(57437),a=r(2265),o=r(99376),i=r(5447),s=r(84859),l=r(48651),c=r(3369),d=r(36799);let u=(0,a.createContext)(void 0),p=e=>{let{children:t}=e,[r,p]=(0,a.useState)(null),[f,h]=(0,a.useState)(!0),g=(0,o.useRouter)(),m=(0,o.usePathname)(),b=async()=>{try{let e=await i.O.getMe();p(e)}catch(e){p(null)}finally{h(!1)}};(0,a.useEffect)(()=>{b()},[]);let{showLoading:y,hideLoading:x}=(0,c.x)();(0,a.useEffect)(()=>{f||r||"/login"===m||g.push("/login")},[r,f,m,g]);let k=async e=>{try{y((0,d.t)("auth.loadingLogin"));let t=await i.O.getCsrfToken(),{token:r,...n}=await i.O.login(e,t);p(n),g.push("/")}catch(e){throw e}finally{x()}},v=async()=>{try{y((0,d.t)("auth.loadingLogout")),await i.O.logout(),s.x.clearQueue(),p(null),g.push("/login")}catch(e){console.error("Logout error:",e)}finally{x()}};return f?(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",background:"#ffffff"},children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",padding:"24px",background:"#ffffff",borderRadius:"20px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[(0,n.jsx)(l.Z,{size:"large"}),(0,n.jsx)("div",{style:{color:"#64748b",fontSize:"14px",fontWeight:500},children:"กำลังตรวจสอบสิทธิ์..."})]})}):r||"/login"===m?(0,n.jsx)(u.Provider,{value:{user:r,loading:f,login:k,logout:v,checkAuth:b},children:t}):null},f=()=>{let e=(0,a.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},46252:function(e,t,r){"use strict";r.d(t,{J:function(){return l},SocketProvider:function(){return c}});var n=r(57437),a=r(2265),o=r(68680),i=r(34029),s=r(14362);let l=(0,a.createContext)({socket:null,isConnected:!1}),c=e=>{let{children:t}=e,[r,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),p=(0,a.useRef)(!1),{user:f}=(0,s.a)();return(0,a.useEffect)(()=>{var e;if(!f){r&&(r.disconnect(),c(null),u(!1));return}let t=(null===(e=f.branch)||void 0===e?void 0:e.id)||f.branch_id||null,n=(0,o.io)("http://localhost:3000",{transports:["websocket"],withCredentials:!0,auth:{userId:f.id,branchId:t},reconnection:!0,reconnectionAttempts:5,reconnectionDelay:800,reconnectionDelayMax:8e3});return n.on("connect",()=>{console.log("Socket Connected:",n.id),u(!0),p.current=!1,i.ZP.success({content:"เชื่อมต่อเรียลไทม์แล้ว",key:"socket-status",duration:1.5})}),n.on("disconnect",()=>{console.log("Socket Disconnected"),u(!1),p.current||(p.current=!0,i.ZP.warning({content:"การเชื่อมต่อเรียลไทม์หลุด กำลังพยายามเชื่อมต่อใหม่...",key:"socket-status",duration:2}))}),n.io.on("reconnect_attempt",e=>{console.log("Socket reconnect attempt",e),u(!1)}),n.io.on("reconnect_failed",()=>{console.log("Socket reconnect failed"),i.ZP.error({content:"เชื่อมต่อเรียลไทม์ไม่สำเร็จ",key:"socket-status",duration:2})}),c(n),()=>{n.disconnect()}},[null==f?void 0:f.id]),(0,n.jsx)(l.Provider,{value:{socket:r,isConnected:d},children:t})}},3369:function(e,t,r){"use strict";r.d(t,{GlobalLoadingProvider:function(){return l},O:function(){return d},x:function(){return c}});var n=r(57437),a=r(2265),o=r(48651);let i=(0,a.createContext)(void 0),s=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,a.useState)({}),[c,d]=(0,a.useState)(void 0),u=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";l(e=>({...e,[t]:(e[t]||0)+1})),e&&d(e)},[]),p=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";l(t=>{if(!t[e])return t;let r={...t};return r[e]-=1,r[e]<=0&&delete r[e],r})},[]),f=(0,a.useCallback)(()=>{l({}),d(void 0)},[]),h=Object.keys(r).length>0,g=(0,a.useMemo)(()=>({isLoading:h,loadingMessage:c}),[h,c]),m=(0,a.useMemo)(()=>({showLoading:u,hideLoading:p,resetLoading:f}),[u,p,f]);return(0,n.jsx)(s.Provider,{value:m,children:(0,n.jsxs)(i.Provider,{value:g,children:[t,h&&(0,n.jsx)("div",{role:"status","aria-live":"polite",className:"global-loading-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:13e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",transition:"opacity 0.25s ease"},children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16,background:"rgba(255, 255, 255, 0.95)",padding:"28px 40px",borderRadius:20,boxShadow:"0 10px 32px rgba(15, 23, 42, 0.14)",border:"1px solid rgba(148, 163, 184, 0.35)",minWidth:240,textAlign:"center"},children:[(0,n.jsx)(o.Z,{size:"large"}),c&&(0,n.jsx)("div",{style:{fontSize:16,color:"#334155",fontWeight:600,letterSpacing:"0.01em"},children:c})]})})]})})};function c(){let e=(0,a.useContext)(i),t=(0,a.useContext)(s);if(!e||!t)throw Error("useGlobalLoading must be used within a GlobalLoadingProvider");return(0,a.useMemo)(()=>({...e,...t}),[e,t])}function d(){let e=(0,a.useContext)(s);if(!e)throw Error("useGlobalLoadingDispatch must be used within a GlobalLoadingProvider");return e}},79657:function(e,t,r){"use strict";r.d(t,{L:function(){return s}});var n=r(11713),a=r(2838),o=r(73814);let i="pos:categories";function s(){return(0,n.a)({queryKey:["categories"],queryFn:async()=>{let e=await a.G.findAll();return(null==e?void 0:e.length)&&(0,o.v)(i,e),e},initialData:()=>(0,o.t)(i,3e5)||void 0,staleTime:3e5,refetchOnWindowFocus:!1,retry:1})}},26972:function(e,t,r){"use strict";r.d(t,{J:function(){return i}});var n=r(2265),a=r(53743),o=r(3369);let i=()=>{let{showLoading:e,hideLoading:t}=(0,o.x)();return{execute:(0,n.useCallback)(async function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"กำลังดำเนินการ...",o=(arguments.length>2&&arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"เกิดข้อผิดพลาด");try{return e(n,"async"),await r()}catch(t){console.error("Async action error:",t);let e=o;if("string"==typeof t)e=t;else if(t instanceof Error)e=t.message;else if("object"==typeof t&&null!==t){var i,s,l,c;e=null!==(c=null!==(l=null===(s=t.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.message)&&void 0!==l?l:t.message)&&void 0!==c?c:(()=>{try{return JSON.stringify(t)}catch(e){return"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ (Unknown Error)"}})()}a.Z.error({title:"ข้อผิดพลาด",content:e});return}finally{t("async")}},[e,t])}}},24675:function(e,t,r){"use strict";r.d(t,{s:function(){return o}});var n=r(2265),a=r(46252);let o=()=>(0,n.useContext)(a.J)},2913:function(e,t,r){"use strict";function n(e,t){return({GET:"".concat(a.API_BASE_URL).concat(t),POST:"".concat(a.API_BASE_URL).concat(t),PUT:"".concat(a.API_BASE_URL).concat(t),DELETE:"".concat(a.API_BASE_URL).concat(t),PATCH:"".concat(a.API_BASE_URL).concat(t)})[e]}r.d(t,{b:function(){return n}});let a={get API_BASE_URL(){return"/api"}}},5447:function(e,t,r){"use strict";r.d(t,{O:function(){return i}});var n=r(71567),a=r(2913),o=r(98170);let i={login:async(e,t,r)=>{try{let s=(0,a.b)("POST",n.q.AUTH.LOGIN),l={"Content-Type":"application/json"};t&&(l["X-CSRF-Token"]=t),r&&(l.Cookie=r);let c=await fetch(s,{method:"POST",headers:l,credentials:"include",body:JSON.stringify(e)});if(!c.ok){var i;let e=await c.json().catch(()=>({})),t=(null==e?void 0:null===(i=e.error)||void 0===i?void 0:i.message)||e.message||e.detail||"Login failed";throw Error(t)}let d=(0,o.hH)(await c.json());return{...d.user,token:d.token}}catch(e){throw Error(e.message||"เข้าสู่ระบบไม่สำเร็จ")}},logout:async(e,t,r)=>{try{let o=(0,a.b)("POST",n.q.AUTH.LOGOUT),i={"Content-Type":"application/json"};e&&(i.Authorization="Bearer ".concat(e)),t&&(i["X-CSRF-Token"]=t),r&&(i.Cookie=r),await fetch(o,{method:"POST",headers:i,credentials:"include"})}catch(e){console.error("Logout failed",e)}},switchBranch:async(e,t,r)=>{let i=(0,a.b)("POST",n.q.AUTH.SWITCH_BRANCH),s={"Content-Type":"application/json"};t&&(s["X-CSRF-Token"]=t),r&&(s.Cookie=r);let l=await fetch(i,{method:"POST",headers:s,credentials:"include",body:JSON.stringify({branch_id:e})});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,o.i_)(e,"Failed to switch branch"))}return(0,o.hH)(await l.json())},getMe:async e=>{try{let t=(0,a.b)("GET",n.q.AUTH.ME),r={"Content-Type":"application/json"};e&&(r.Authorization="Bearer ".concat(e));let i=await fetch(t,{method:"GET",headers:r,credentials:"include",cache:"no-store"});if(!i.ok)throw Error("Unauthorized");return(0,o.hH)(await i.json())}catch(e){throw e}},async getCsrfToken(){try{let e=await fetch("".concat(n.v).concat(n.q.AUTH.CSRF),{credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({}));return console.error("CSRF token fetch failed:",e.status,t),""}let t=await e.json();if(t.success&&t.csrfToken||t.csrfToken)return t.csrfToken;return""}catch(e){return console.error("Failed to fetch CSRF token",e),""}}}},2838:function(e,t,r){"use strict";r.d(t,{G:function(){return i}});var n=r(2913),a=r(98170);let o="/pos/category",i={findAll:async(e,t)=>{let r=(0,n.b)("GET",o);t&&(r+="?".concat(t.toString()));let i={};e&&(i.Cookie=e);let s=await fetch(r,{cache:"no-store",credentials:"include",headers:i});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,a.i_)(e,"Failed to fetch categories"))}let l=await s.json(),c=(0,a.hH)(l);if(Array.isArray(c))return c;throw Error("Invalid categories response format")},findOne:async(e,t)=>{let r=(0,n.b)("GET","".concat(o,"/").concat(e)),i={};t&&(i.Cookie=t);let s=await fetch(r,{cache:"no-store",credentials:"include",headers:i});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,a.i_)(e,"Failed to fetch category"))}return(0,a.hH)(await s.json())},findOneByName:async(e,t)=>{let r=(0,n.b)("GET","".concat(o,"/name/").concat(e)),i={};t&&(i.Cookie=t);let s=await fetch(r,{cache:"no-store",credentials:"include",headers:i});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,a.i_)(e,"Failed to fetch category by name"))}return(0,a.hH)(await s.json())},create:async(e,t,r)=>{let i=(0,n.b)("POST",o),s={"Content-Type":"application/json"};t&&(s.Cookie=t),r&&(s["X-CSRF-Token"]=r);let l=await fetch(i,{method:"POST",headers:s,body:JSON.stringify(e),credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,a.i_)(e,"Failed to create category"))}return(0,a.hH)(await l.json())},update:async(e,t,r,i)=>{let s=(0,n.b)("PUT","".concat(o,"/").concat(e)),l={"Content-Type":"application/json"};r&&(l.Cookie=r),i&&(l["X-CSRF-Token"]=i);let c=await fetch(s,{method:"PUT",headers:l,body:JSON.stringify(t),credentials:"include"});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error((0,a.i_)(e,"Failed to update category"))}return(0,a.hH)(await c.json())},delete:async(e,t,r)=>{let i=(0,n.b)("DELETE","".concat(o,"/").concat(e)),s={};t&&(s.Cookie=t),r&&(s["X-CSRF-Token"]=r);let l=await fetch(i,{method:"DELETE",headers:s,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,a.i_)(e,"Failed to delete category"))}}}},84859:function(e,t,r){"use strict";r.d(t,{M:function(){return l},x:function(){return s}});let n="pos_offline_queue",a=()=>{let e=localStorage.getItem(n);return e?JSON.parse(e):[]},o=e=>{let t=Date.now();return e.filter(e=>t-e.timestamp<=6048e5)},i=e=>{localStorage.setItem(n,JSON.stringify(e))},s={addToQueue:(e,t)=>{let r=o(a()),n={id:"offline-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:e,payload:t,timestamp:Date.now(),retryCount:0};return i([...r,n]),n},getQueue:()=>a(),removeFromQueue:e=>{i(a().filter(t=>t.id!==e))},incrementRetry:(e,t)=>{i(a().map(r=>r.id===e?{...r,retryCount:r.retryCount+1,lastError:t}:r))},clearQueue:()=>{localStorage.removeItem(n)},pruneExceeded:()=>{i(o(a()).filter(e=>e.retryCount<=5))}},l={maxRetry:5,backoff:e=>Math.min(3e4,2e3*e)}},69397:function(e,t,r){"use strict";r.d(t,{IU:function(){return l},YO:function(){return i},lv:function(){return s},yf:function(){return o}});let n={colors:{primary:"#6366F1",primaryLight:"#EEF2FF",success:"#10B981",successLight:"#ECFDF5",warning:"#F59E0B",warningLight:"#FFFBEB",error:"#EF4444",errorLight:"#FEF2F2",info:"#3B82F6",infoLight:"#EFF6FF",bg:"#F8FAFC",card:"#FFFFFF",border:"#E2E8F0",borderLight:"#F1F5F9",text:"#1E293B",textSecondary:"#64748B",textMuted:"#94A3B8"},radius:{sm:8,md:12,lg:16,xl:20},shadow:{sm:"0 1px 2px rgba(0, 0, 0, 0.04)",md:"0 4px 12px rgba(0, 0, 0, 0.06)",lg:"0 8px 24px rgba(0, 0, 0, 0.08)"}},a={container:{paddingBottom:100,backgroundColor:n.colors.bg,minHeight:"100dvh",width:"100%",overflowX:"hidden"},header:{background:"linear-gradient(135deg, ".concat(n.colors.primary," 0%, #4F46E5 100%)"),padding:"16px 16px 48px 16px",position:"relative",overflow:"hidden",borderBottomLeftRadius:n.radius.xl,borderBottomRightRadius:n.radius.xl},headerDecoCircle1:{position:"absolute",top:-40,right:-40,width:120,height:120,borderRadius:"50%",background:"rgba(255,255,255,0.08)"},headerDecoCircle2:{position:"absolute",bottom:-20,left:-20,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.06)"},headerContent:{position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},headerLeft:{display:"flex",alignItems:"center",gap:12,flex:1},headerIconBox:{width:44,height:44,borderRadius:n.radius.md,background:"rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)",flexShrink:0},headerTitle:{color:"#fff",margin:0,fontSize:18,fontWeight:600},headerSubtitle:{color:"rgba(255,255,255,0.8)",fontSize:13,margin:0},headerActions:{display:"flex",gap:8,flexShrink:0},statsCard:{margin:"-32px 16px 0 16px",padding:16,background:n.colors.card,borderRadius:n.radius.lg,boxShadow:n.shadow.md,display:"flex",justifyContent:"space-around",position:"relative",zIndex:10},statItem:{textAlign:"center",flex:1},statNumber:{fontSize:22,fontWeight:700,display:"block",color:n.colors.text},statLabel:{fontSize:12,color:n.colors.textMuted,marginTop:2},listContainer:{padding:"16px 16px 0 16px"},sectionTitle:{display:"flex",alignItems:"center",gap:8,marginBottom:12,fontSize:15,fontWeight:600,color:n.colors.text}},o=e=>({...a,header:{...a.header,background:e}}),i=e=>({marginBottom:12,borderRadius:n.radius.lg,border:"1px solid ".concat(e?n.colors.border:n.colors.borderLight),boxShadow:e?n.shadow.sm:"none",overflow:"hidden",transition:"all 0.2s ease",background:n.colors.card,opacity:e?1:.6}),s={padding:16,display:"flex",alignItems:"center",gap:12};n.radius.md;let l=(e,t)=>"\n  /* Card animations */\n  ".concat(t," {\n    animation: fadeSlideIn 0.3s ease both;\n  }\n  \n  ").concat(t,":hover {\n    transform: translateY(-2px);\n    box-shadow: ").concat(n.shadow.md," !important;\n  }\n  \n  ").concat(t,":active {\n    transform: scale(0.99);\n  }\n  \n  /* Scrollbar */\n  ").concat(e," *::-webkit-scrollbar {\n    width: 5px;\n    height: 5px;\n  }\n  ").concat(e," *::-webkit-scrollbar-track {\n    background: transparent;\n  }\n  ").concat(e," *::-webkit-scrollbar-thumb {\n    background: #CBD5E1;\n    border-radius: 3px;\n  }\n  ").concat(e," *::-webkit-scrollbar-thumb:hover {\n    background: #94A3B8;\n  }\n")},98170:function(e,t,r){"use strict";function n(e){return!!e&&"object"==typeof e}function a(e){return e&&"object"==typeof e&&"success"in e&&!0===e.success&&"data"in e?e.data:e}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Request failed";if("string"==typeof e)return e;if(!n(e))return t;if(!1===e.success){let t=e.error;if(n(t)&&"string"==typeof t.message&&t.message.trim())return t.message}if("error"in e){let t=e.error;if("string"==typeof t&&t.trim())return t;if(n(t)&&"string"==typeof t.message&&t.message.trim())return t.message}return"string"==typeof e.message&&e.message.trim()?e.message:t}function i(e){if(e&&"object"==typeof e&&"success"in e&&!0===e.success&&Array.isArray(e.data)){var t,r,n,a;let o="number"==typeof(null===(t=e.meta)||void 0===t?void 0:t.total)?e.meta.total:e.data.length,i="number"==typeof(null===(r=e.meta)||void 0===r?void 0:r.page)?e.meta.page:1,s="number"==typeof(null===(n=e.meta)||void 0===n?void 0:n.limit)?e.meta.limit:50,l="number"==typeof(null===(a=e.meta)||void 0===a?void 0:a.totalPages)?e.meta.totalPages:Math.max(Math.ceil(o/Math.max(s,1)),1);return{data:e.data,total:o,page:i,last_page:l}}return e}r.d(t,{XO:function(){return i},hH:function(){return a},i_:function(){return o}})},36799:function(e,t,r){"use strict";r.d(t,{t:function(){return a}});var n=JSON.parse('{"auth.loadingLogin":"กำลังเข้าสู่ระบบ...","auth.loadingLogout":"กำลังออกจากระบบ...","network.loading":"กำลังดึงข้อมูล...","network.offline":"ไม่มีการเชื่อมต่ออินเทอร์เน็ต แอปกำลังทำงานแบบออฟไลน์","network.newVersion":"มีเวอร์ชันใหม่พร้อมใช้งาน กดรีเฟรชเพื่ออัปเดต","delivery.loadingOrders":"กำลังโหลดออเดอร์...","delivery.selectProvider":"เลือกผู้ให้บริการ (Delivery Provider)","delivery.selectProviderPlaceholder":"เลือกผู้ให้บริการ","delivery.orderCode":"รหัสเดลิเวอรี่ / Order Code","delivery.enterOrderCode":"ระบุรหัสออเดอร์ (เช่น 123)","delivery.createOrder":"เปิดออเดอร์เดลิเวอรี่","delivery.createOrderSubtitle":"กรอกข้อมูลเพื่อสร้างออเดอร์ใหม่","delivery.noProviders":"ยังไม่มีผู้ให้บริการเดลิเวอรี่","delivery.retry":"ลองใหม่","delivery.noOrders":"ไม่มีออเดอร์เดลิเวอรี่","delivery.addOrder":"เพิ่มออเดอร์","delivery.createNewOrder":"สร้างออเดอร์ใหม่","orders.loading":"กำลังโหลดข้อมูลออเดอร์...","orders.error":"โหลดข้อมูลออเดอร์ไม่สำเร็จ","orders.empty":"ไม่พบรายการออเดอร์","orders.searchPlaceholder":"ค้นหาเลขที่ออเดอร์ โต๊ะ หรือรหัสอ้างอิง","queue.loading":"กำลังโหลดคิว...","queue.error":"โหลดคิวไม่สำเร็จ","queue.empty":"ยังไม่มีออเดอร์ในคิว","queue.refresh":"รีเฟรช","queue.reorder":"จัดเรียง","queue.filter":"กรองสถานะ","queue.pending":"รอ","queue.processing":"กำลังดำเนินการ","queue.completed":"เสร็จสิ้น","queue.cancelled":"ยกเลิก","queue.priority.low":"ต่ำ","queue.priority.normal":"ปกติ","queue.priority.high":"สูง","queue.priority.urgent":"ด่วน","queue.updateStatusSuccess":"อัปเดตสถานะสำเร็จ","queue.updateStatusError":"อัปเดตสถานะไม่สำเร็จ","queue.addSuccess":"เพิ่มเข้าคิวสำเร็จ","queue.addError":"เพิ่มเข้าคิวไม่สำเร็จ","queue.removeSuccess":"ลบออกจากคิวสำเร็จ","queue.removeError":"ลบออกจากคิวไม่สำเร็จ","queue.reorderSuccess":"จัดเรียงคิวใหม่สำเร็จ","queue.reorderError":"จัดเรียงคิวใหม่ไม่สำเร็จ","stock.loading":"กำลังโหลดคำสั่งซื้อสต๊อก...","stock.error":"โหลดข้อมูลสต๊อกไม่สำเร็จ","stock.empty":"ยังไม่มีคำสั่งซื้อสต๊อก","stock.title":"คำสั่งซื้อสต๊อก","stock.subtitleCount":"{{count}} คำสั่งซื้อ","stock.totalItems":"จำนวนรายการรวม","stock.createdBy":"ผู้สร้าง","stock.items":"รายการ","stock.status":"สถานะ","stock.createdAt":"วันที่สร้าง","stock.actions":"จัดการ","stock.view":"ดู","stock.buy":"ซื้อ","stock.edit":"แก้ไข","stock.cancel":"ยกเลิก","stock.emptyAction":"ไปหน้าหลัก","stock.status.pending":"รอดำเนินการ","stock.status.completed":"เสร็จสิ้น","stock.status.cancelled":"ยกเลิก","stock.itemsLabel":"รายการ","stock.statusLabel":"สถานะ","users.title":"ผู้ใช้","users.subtitle":"{{count}} คน","users.add":"เพิ่มผู้ใช้","users.refresh":"รีเฟรช","users.empty":"ยังไม่มีผู้ใช้","users.noPermission":"คุณไม่มีสิทธิ์เข้าถึงหน้านี้","users.headerTitle":"จัดการผู้ใช้","users.headerSubtitle":"จัดการสิทธิ์และสถานะผู้ใช้ทั้งหมด","users.stats.total":"ผู้ใช้ทั้งหมด","users.stats.active":"เปิดใช้งาน/ใช้งานได้","users.stats.online":"กำลังใช้งาน","users.card.edit":"แก้ไข","users.card.delete":"ลบ","users.card.active":"เปิดใช้งาน","users.card.inactive":"ปิดใช้งาน","users.card.canUse":"อนุญาตใช้งาน","users.card.cannotUse":"ไม่อนุญาต","users.card.lastLogin":"เข้าสู่ระบบล่าสุด","page.retry":"ลองอีกครั้ง","page.empty":"ไม่มีข้อมูล","page.error":"เกิดข้อผิดพลาด","kitchen.soundBlocked":"เบราว์เซอร์บล็อกเสียงแจ้งเตือน","kitchen.soundOff":"ปิดเสียงแจ้งเตือน","kitchen.soundOn":"เปิดเสียงแจ้งเตือน","dashboard.title":"ภาพรวมยอดขาย","dashboard.subtitle":"สรุปยอดขายทุกช่องทาง","dashboard.reload":"รีเฟรช","dashboard.loading":"กำลังโหลดข้อมูล...","dashboard.totalSales":"ยอดขายรวม","dashboard.orders":"{{count}} ออเดอร์","dashboard.discount":"ส่วนลด ฿{{amount}}","dashboard.channel.dineIn":"ทานที่ร้าน","dashboard.channel.takeAway":"กลับบ้าน","dashboard.channel.delivery":"เดลิเวอรี่","dashboard.topProducts":"สินค้าขายดี","dashboard.topProducts.empty":"ยังไม่มีข้อมูลสินค้า","dashboard.recentOrders":"ออเดอร์ล่าสุด","dashboard.recentOrders.empty":"ยังไม่มีออเดอร์","dashboard.viewDetails":"ดูรายละเอียด","dashboard.dailySales":"ยอดขายรายวัน","dashboard.dailySales.date":"วันที่","dashboard.dailySales.orders":"ออเดอร์","dashboard.dailySales.sales":"ยอดขาย","dashboard.export.pdf":"PDF","dashboard.export.excel":"Excel","dashboard.exportPDF.loading":"กำลังสร้าง PDF...","dashboard.exportPDF.success":"ส่งออก PDF สำเร็จ","dashboard.exportPDF.error":"เกิดข้อผิดพลาดในการส่งออก PDF","dashboard.exportExcel.loading":"กำลังสร้าง Excel...","dashboard.exportExcel.success":"ส่งออก Excel สำเร็จ","dashboard.exportExcel.error":"เกิดข้อผิดพลาดในการส่งออก Excel","dashboard.paymentMethod":"\uD83D\uDCB3 {{method}}","branch.loading":"กำลังดึงข้อมูลสาขา...","branch.noPermission":"คุณไม่มีสิทธิ์เข้าถึงหน้าสาขา","branch.delete.title":"ยืนยันลบสาขา","branch.delete.content":"ต้องการลบสาขา \\"{{name}}\\" หรือไม่?","branch.delete.ok":"ลบ","branch.delete.cancel":"ยกเลิก","branch.delete.success":"ลบสาขา \\"{{name}}\\" แล้ว","branch.delete.error":"ไม่สามารถลบสาขาได้","branch.switch.success":"สลับไปยังสาขา \\"{{name}}\\" แล้ว","branch.switch.loading":"กำลังสลับสาขา...","branch.page.title":"สาขา","branch.page.subtitle":"{{count}} สาขา","branch.hero.title":"จัดการสาขา","branch.hero.subtitle":"ดูแลข้อมูลสาขาทั้งหมดในระบบ","branch.actions.refresh":"รีเฟรช","branch.actions.add":"เพิ่มสาขา","branch.section.listTitle":"สาขาทั้งหมด","branch.section.countTag":"{{filtered}} / {{total}} สาขา","branch.empty.filtered.title":"ไม่พบสาขาที่ค้นหา","branch.empty.filtered.description":"ลองลบตัวกรองหรือค้นหาด้วยคำอื่น เช่น ชื่อ รหัสสาขา ที่อยู่ หรือเบอร์โทร","branch.empty.default.title":"ยังไม่มีสาขา","branch.empty.default.description":"เพิ่มสาขาแรกเพื่อเริ่มใช้งาน POS ได้เลย","branch.empty.reset":"ล้างตัวกรอง","branch.empty.add":"เพิ่มสาขาใหม่","branch.stats.total":"สาขาทั้งหมด","branch.stats.active":"เปิดใช้งาน","branch.stats.inactive":"ปิดการใช้งาน","branch.card.switch":"สลับ","branch.card.edit":"แก้ไข","branch.card.delete":"ลบ","branch.card.switchTooltip":"สลับไปสาขานี้","branch.card.editTooltip":"แก้ไขข้อมูลสาขา","branch.card.deleteTooltip":"ลบสาขา","branch.card.addressFallback":"ไม่มีที่อยู่","branch.card.phoneFallback":"ไม่มีหมายเลขโทรศัพท์","branch.card.active":"เปิดใช้งานอยู่","branch.card.inactive":"ปิดใช้งานอยู่","branch.card.taxId":"เลขประจำตัวผู้เสียภาษี","branch.search.placeholder":"ค้นหาสาขา (ชื่อ รหัส ที่อยู่ หรือเบอร์โทร)","branch.search.filter.all":"ทั้งหมด","branch.search.filter.active":"เปิดใช้งาน","branch.search.filter.inactive":"ปิดใช้งาน","branch.search.result":"พบ {{count}} จาก {{total}} สาขา","branch.form.loadError":"ไม่สามารถดึงข้อมูลสาขาได้","branch.form.updateSuccess":"อัปเดตสาขาสำเร็จ","branch.form.createSuccess":"สร้างสาขาสำเร็จ","branch.form.saveError":"เกิดข้อผิดพลาดในการบันทึกข้อมูลสาขา","branch.form.deleteTitle":"ยืนยันการลบสาขา","branch.form.deleteContent":"คุณต้องการลบสาขานี้หรือไม่?","branch.form.deleteSuccess":"ลบสาขาสำเร็จ","branch.form.deleteError":"ไม่สามารถลบสาขาได้","branch.form.titleEdit":"แก้ไขสาขา","branch.form.titleCreate":"เพิ่มสาขา","branch.form.subtitle":"ข้อมูลสาขาสำหรับระบบ POS","branch.form.fields.nameLabel":"ชื่อสาขา *","branch.form.fields.nameRequired":"กรุณากรอกชื่อสาขา","branch.form.fields.namePlaceholder":"ระบุชื่อสาขา","branch.form.fields.codeLabel":"รหัสสาขา *","branch.form.fields.codeRequired":"กรุณากรอกรหัสสาขา","branch.form.fields.codePattern":"รหัสสาขาต้องเป็นตัวอักษรภาษาอังกฤษหรือตัวเลข","branch.form.fields.codePlaceholder":"เช่น B001","branch.form.fields.addressLabel":"ที่อยู่","branch.form.fields.addressPlaceholder":"ที่อยู่สาขา","branch.form.fields.phoneLabel":"เบอร์โทรศัพท์","branch.form.fields.phonePlaceholder":"02xxxxxxx","branch.form.fields.taxIdLabel":"เลขประจำตัวผู้เสียภาษี (Tax ID)","branch.form.fields.taxIdPlaceholder":"ระบุเลขผู้เสียภาษี","branch.form.fields.statusLabel":"สถานะ","branch.form.back":"ยกเลิก","branch.form.submitEdit":"บันทึกการแก้ไข","branch.form.submitCreate":"สร้างสาขา","users.manage.loadRolesError":"ไม่สามารถดึงข้อมูลบทบาทได้","users.manage.loadBranchesError":"ไม่สามารถดึงข้อมูลสาขาได้","users.manage.loadUserError":"ไม่สามารถดึงข้อมูลผู้ใช้ได้","users.manage.updateSuccess":"อัปเดตผู้ใช้สำเร็จ","users.manage.createSuccess":"สร้างผู้ใช้สำเร็จ","users.manage.saveErrorUpdate":"ไม่สามารถอัปเดตผู้ใช้ได้","users.manage.saveErrorCreate":"ไม่สามารถสร้างผู้ใช้ได้","users.manage.deleteSuccess":"ลบผู้ใช้สำเร็จ","users.manage.deleteError":"ไม่สามารถลบผู้ใช้ได้","users.manage.deleteTitle":"ลบผู้ใช้","users.manage.deleteDescription":"คุณต้องการลบผู้ใช้หรือไม่?","users.manage.deleteOk":"ใช่","users.manage.deleteCancel":"ยกเลิก","users.manage.deleteButton":"ลบผู้ใช้","users.manage.backToList":"กลับไปหน้าผู้ใช้","users.manage.headingEdit":"แก้ไขผู้ใช้","users.manage.headingCreate":"เพิ่มผู้ใช้","users.manage.form.usernameLabel":"ชื่อผู้ใช้","users.manage.form.usernameRequired":"กรุณากรอกชื่อผู้ใช้","users.manage.form.usernamePattern":"กรุณากรอกภาษาอังกฤษ ตัวเลข หรืออักขระพิเศษ (- _ @ .)","users.manage.form.usernamePlaceholder":"กรุณากรอกชื่อผู้ใช้","users.manage.form.nameLabel":"ชื่อ-นามสกุล / ชื่อเล่น","users.manage.form.nameRequired":"กรุณากรอกชื่อ-นามสกุล หรือ ชื่อเล่น","users.manage.form.namePlaceholder":"ระบุชื่อ (เช่น สมชาย หรือ น้องบี)","users.manage.form.passwordLabel":"รหัสผ่าน","users.manage.form.passwordLabelEdit":"รหัสผ่านใหม่ (ปล่อยว่างเพื่อไม่เปลี่ยนรหัสผ่าน)","users.manage.form.passwordRequired":"กรุณากรอกรหัสผ่าน","users.manage.form.passwordPattern":"กรุณากรอกภาษาอังกฤษ ตัวเลข หรืออักขระพิเศษเท่านั้น","users.manage.form.passwordPlaceholder":"กรุณากรอกรหัสผ่าน","users.manage.form.roleLabel":"บทบาท","users.manage.form.roleRequired":"กรุณาเลือกบทบาท","users.manage.form.rolePlaceholder":"เลือกบทบาท","users.manage.form.roleModalTitle":"เลือกบทบาท","users.manage.form.branchLabel":"สาขา","users.manage.form.branchRequired":"กรุณาเลือกสาขา","users.manage.form.branchPlaceholder":"เลือกสาขา","users.manage.form.branchModalTitle":"เลือกสาขา","users.manage.form.activeLabel":"สถานะ (Active)","users.manage.form.useLabel":"การใช้งาน (In Use)","users.manage.cancel":"ยกเลิก","users.manage.updateSubmit":"อัปเดตผู้ใช้","users.manage.createSubmit":"สร้างผู้ใช้","stock.ingredients.loading":"กำลังโหลดข้อมูลวัตถุดิบ...","stock.ingredients.loadError":"ไม่สามารถดึงข้อมูลวัตถุดิบได้","stock.ingredients.noPermission":"คุณไม่มีสิทธิ์เข้าถึงหน้านี้","stock.ingredients.deleteTitle":"ยืนยันการลบวัตถุดิบ","stock.ingredients.deleteContent":"คุณต้องการลบวัตถุดิบ \\"{{name}}\\" หรือไม่?","stock.ingredients.deleteSuccess":"ลบวัตถุดิบ \\"{{name}}\\" สำเร็จ","stock.ingredients.deleteError":"ไม่สามารถลบวัตถุดิบได้","stock.ingredients.deleting":"กำลังลบวัตถุดิบ...","stock.ingredients.checkingAuth":"กำลังตรวจสอบสิทธิ์การใช้งาน...","stock.ingredients.redirecting":"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับหน้าแรก...","stock.ingredients.title":"วัตถุดิบ","stock.ingredients.subtitle":"{{count}} รายการ","stock.ingredients.refresh":"รีเฟรช","stock.ingredients.add":"เพิ่มวัตถุดิบ","stock.ingredients.listTitle":"รายการวัตถุดิบ","stock.ingredients.emptyTitle":"ยังไม่มีวัตถุดิบ","stock.ingredients.emptyDescription":"เริ่มต้นด้วยการเพิ่มวัตถุดิบแรกของคุณ","stock.ingredients.emptyAction":"เพิ่มวัตถุดิบ","stock.ingredients.headerLabel":"จัดการข้อมูล","stock.ingredients.stats.total":"ทั้งหมด","stock.ingredients.stats.active":"ใช้งาน","stock.ingredients.stats.inactive":"ไม่ใช้งาน","common.checkingAuth":"กำลังตรวจสอบสิทธิ์การใช้งาน...","common.noPermissionRedirect":"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับหน้าแรก...","ingredientsUnit.title":"หน่วยวัตถุดิบ","ingredientsUnit.subtitle":"{{count}} หน่วย","ingredientsUnit.button.refresh":"รีเฟรช","ingredientsUnit.button.add":"เพิ่มหน่วยวัตถุดิบ","ingredientsUnit.section.list":"รายการหน่วยวัตถุดิบ","ingredientsUnit.loading":"กำลังโหลดหน่วยวัตถุดิบ...","ingredientsUnit.empty.title":"ยังไม่มีหน่วยวัตถุดิบ","ingredientsUnit.empty.desc":"เริ่มต้นด้วยการเพิ่มหน่วยวัตถุดิบแรกของคุณ","ingredientsUnit.fetch.error":"ไม่สามารถดึงข้อมูลหน่วยวัตถุดิบได้","ingredientsUnit.create.toast":"เพิ่มหน่วยวัตถุดิบ {{name}} แล้ว","ingredientsUnit.delete.title":"ยืนยันการลบหน่วยวัตถุดิบ","ingredientsUnit.delete.content":"ต้องการลบหน่วยวัตถุดิบ \\"{{name}}\\" หรือไม่?","ingredientsUnit.delete.ok":"ลบ","ingredientsUnit.delete.cancel":"ยกเลิก","ingredientsUnit.delete.success":"ลบหน่วยวัตถุดิบ \\"{{name}}\\" สำเร็จ","stockHistory.title":"ประวัติออเดอร์สต็อก","stockHistory.subtitle":"รายการที่เสร็จสิ้น/ยกเลิก","stockHistory.refresh":"รีเฟรช","stockHistory.sectionAll":"ประวัติทั้งหมด","stockHistory.count":"ทั้งหมด {{total}} รายการ","stockHistory.empty.title":"ยังไม่มีประวัติออเดอร์","stockHistory.empty.desc":"เมื่อมีรายการเสร็จสิ้น/ยกเลิก จะแสดงที่หน้านี้","stockHistory.delete.title":"ยืนยันการลบ","stockHistory.delete.content":"ต้องการลบประวัติออเดอร์ #{{code}} หรือไม่? ข้อมูลที่เกี่ยวข้องทั้งหมดจะถูกลบด้วย","stockHistory.delete.ok":"ลบ","stockHistory.delete.cancel":"ยกเลิก","stockHistory.delete.success":"ลบประวัติออเดอร์สำเร็จ","stockHistory.delete.error":"ลบประวัติออเดอร์ล้มเหลว","stockHistory.fetch.error":"ไม่สามารถโหลดประวัติออเดอร์ได้","stockHistory.paginationTotal":"ทั้งหมด {{total}} รายการ"}');function a(e,t){var r;let a=null!==(r=n[e])&&void 0!==r?r:e;return t?a.replace(/\{\{(\w+)\}\}/g,(e,r)=>{var n;return(null!==(n=t[r])&&void 0!==n?n:"").toString()}):a}},67918:function(e,t,r){"use strict";r.d(t,{e:function(){return s}});var n=r(2265),a=r(34029),o=r(99376),i=r(14362);function s(){let{allowedRoles:e,requiredRole:t="Admin",redirectUnauthenticated:r="/login",redirectUnauthorized:s="/pos",unauthorizedMessage:l="คุณไม่มีสิทธิ์เข้าถึงหน้านี้"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=(0,o.useRouter)(),{user:d,loading:u}=(0,i.a)(),p=(0,n.useMemo)(()=>e&&e.length>0?e:t?[t]:void 0,[e,t]),f=(0,n.useMemo)(()=>(function(e,t,r){if(t)return"checking";if(!e)return"unauthenticated";if(r&&r.length>0){var n;let t="Admin"===(n=e.role)||"Manager"===n||"Employee"===n?n:null;if(!t||!(r.includes(t)||"Admin"===t))return"unauthorized"}return"authorized"})(d,u,p),[d,u,p]),h=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{if("unauthenticated"===f){c.replace(r);return}"unauthorized"===f&&(h.current||(h.current=!0,a.ZP.error(l)),c.replace(s))},[f,c,r,s,l]),{status:f,isAuthorized:"authorized"===f,isChecking:"checking"===f,user:d}}},73814:function(e,t,r){"use strict";r.d(t,{t:function(){return a},v:function(){return o}});let n=()=>!0,a=(e,t)=>{if(!n())return null;try{var r;let n=window.localStorage.getItem(e);if(!n)return null;let a=JSON.parse(n);if(!(null==a?void 0:a.ts)||Date.now()-a.ts>t)return null;return null!==(r=a.data)&&void 0!==r?r:null}catch(e){return null}},o=(e,t)=>{if(n())try{let r={ts:Date.now(),data:t};window.localStorage.setItem(e,JSON.stringify(r))}catch(e){}}},97235:function(e,t,r){"use strict";r.d(t,{P:function(){return s}});var n=r(5447);let a=null,o=0,i=null;async function s(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Date.now();return!e&&a&&t-o<6e5?a:(i||(i=n.O.getCsrfToken().then(e=>(a=e||"",o=Date.now(),a)).finally(()=>{i=null})),i)}},67697:function(e,t,r){"use strict";r.d(t,{D:function(){return i},v:function(){return o}});var n=r(2265);let a=e=>{if("string"==typeof e)return e;if(e&&"object"==typeof e){var t;if("id"in e&&e.id)return e.id;if("data"in e&&(null===(t=e.data)||void 0===t?void 0:t.id))return e.data.id}};function o(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e.id,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>!0;(0,n.useEffect)(()=>{if(!e)return;let n=e=>{if(!i(e))return;let t=o(e);r(r=>r.some(e=>o(e)===t)?r:[...r,e])},s=e=>{let t=o(e);r(r=>i(e)?r.some(e=>o(e)===t)?r.map(r=>o(r)===t?e:r):[...r,e]:r.filter(e=>o(e)!==t))},l=e=>{let t=a(e);t&&r(e=>e.filter(e=>o(e)!==t))};return e.on(t.create,n),e.on(t.update,s),e.on(t.delete,l),()=>{e.off(t.create,n),e.off(t.update,s),e.off(t.delete,l)}},[e,t.create,t.update,t.delete,o,r,i])}function i(e){let{socket:t,events:r=[],onRefresh:a,intervalMs:o,enabled:i=!0,debounceMs:s}=e;(0,n.useEffect)(()=>{if(!i||!t||0===r.length)return;let e=null,n=()=>{if(!s||s<=0){a();return}e&&clearTimeout(e),e=setTimeout(()=>{e=null,a()},s)};return r.forEach(e=>t.on(e,n)),()=>{e&&clearTimeout(e),r.forEach(e=>t.off(e,n))}},[i,t,r,a,s]),(0,n.useEffect)(()=>{if(!i||!o)return;let e=setInterval(a,o);return()=>clearInterval(e)},[i,o,a])}},67338:function(e,t,r){"use strict";function n(e){return"฿".concat(e.toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2}))}function a(e){var t;return(null===(t=e.category)||void 0===t?void 0:t.display_name)||"ไม่มีหมวดหมู่"}function o(e){return!!e.img_url&&e.img_url.length>0}r.d(t,{T4:function(){return n},dU:function(){return o},r6:function(){return a}})},12028:function(e,t,r){"use strict";r.d(t,{b:function(){return n},g:function(){return a}});let n={system:{announcement:"system:announcement"},users:{create:"users:create",update:"users:update",delete:"users:delete",status:"users:update-status"},roles:{create:"roles:create",update:"roles:update",delete:"roles:delete"},branches:{create:"branches:create",update:"branches:update",delete:"branches:delete"},products:{create:"products:create",update:"products:update",delete:"products:delete"},productsUnit:{create:"productsUnit:create",update:"productsUnit:update",delete:"productsUnit:delete"},categories:{create:"category:create",update:"category:update",delete:"category:delete"},tables:{create:"tables:create",update:"tables:update",delete:"tables:delete"},orders:{create:"orders:create",update:"orders:update",delete:"orders:delete"},payments:{create:"payments:create",update:"payments:update",delete:"payments:delete"},discounts:{create:"discounts:create",update:"discounts:update",delete:"discounts:delete"},delivery:{create:"delivery:create",update:"delivery:update",delete:"delivery:delete"},shifts:{update:"shifts:update"},orderQueue:{added:"order-queue:added",updated:"order-queue:updated",removed:"order-queue:removed",reordered:"order-queue:reordered"},ingredients:{create:"ingredients:create",update:"ingredients:update",delete:"ingredients:delete"},ingredientsUnit:{create:"ingredientsUnit:create",update:"ingredientsUnit:update",delete:"ingredientsUnit:delete"},stock:{update:"stock:update"},stockOrders:{create:"stock:orders:create",update:"stock:orders:update",status:"stock:orders:status",delete:"stock:orders:delete",detailUpdate:"stock:orders:detail:update"},paymentAccounts:{create:"payment-accounts:create",update:"payment-accounts:update",delete:"payment-accounts:delete"},paymentMethods:{create:"paymentMethod:create",update:"paymentMethod:update",delete:"paymentMethod:delete"},shopProfile:{update:"shopProfile:update"},salesOrderItem:{create:"salesOrderItem:create",update:"salesOrderItem:update",delete:"salesOrderItem:delete"},salesOrderDetail:{create:"salesOrderDetail:create",update:"salesOrderDetail:update",delete:"salesOrderDetail:delete"}},a={stockOrdersUpdated:"orders_updated"}}},function(e){e.O(0,[253,1522,3418,742,9486,4252,3916,8651,6931,4159,3831,2224,3248,2401,9,8879,8589,9845,9763,1713,4725,4480,3145,4427,2971,2117,1744],function(){return e(e.s=50304)}),_N_E=e.O()}]);