(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{83970:function(e,t,a){Promise.resolve().then(a.bind(a,38631))},38631:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return K}});var o=a(57437),r=a(2265),n=a(8949),l=a(14362),i=a(59226),s=a(34029);let c=(0,r.createContext)(void 0),d=e=>{let{children:t}=e,{user:a}=(0,l.a)(),[n,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0),p=(0,r.useCallback)(async()=>{if(a)try{let e=await i.t.getCurrentShift();d(e)}catch(e){console.error("Error fetching shift:",e)}finally{m(!1)}},[a]);(0,r.useEffect)(()=>{p()},[p]);let h=async e=>{if(a)try{let t=await i.t.openShift(e);d(t),s.ZP.success("เปิดกะเรียบร้อยแล้ว")}catch(e){throw s.ZP.error(e instanceof Error?e.message:"เปิดกะไม่สำเร็จ"),e}},y=async e=>{if(a)try{await i.t.closeShift(e),d(null),s.ZP.success("ปิดกะเรียบร้อยแล้ว")}catch(e){throw s.ZP.error(e instanceof Error?e.message:"ปิดกะไม่สำเร็จ"),e}};return(0,o.jsx)(c.Provider,{value:{currentShift:n,loading:u,openShift:h,closeShift:y,refreshShift:p},children:t})},u=()=>{let e=(0,r.useContext)(c);if(!e)throw Error("useShift must be used within a ShiftProvider");return e};var m=a(99376),p=a(5311),h=a(62376),y=a(38434),f=a(88009),x=a(71891),g=a(1915),b=a(93132),_=a(29107),j=a(445),v=a(62670),S=a(72285),w=a(82646),Z=a(44967),k=a(53743),C=a(76188),E=a(33477),N=a(50742),I=a(71096),T=a.n(I);let{Title:P,Text:D}=w.default;function R(e){let{open:t,onCancel:a}=e,{currentShift:n,closeShift:l}=u(),[i,s]=(0,r.useState)(!1),[c]=Z.Z.useForm(),d=async e=>{s(!0);try{await l(e.endAmount),a(),c.resetFields()}catch(e){}finally{s(!1)}};return n?(0,o.jsxs)(k.Z,{open:t,onCancel:a,title:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)(P,{level:3,style:{marginBottom:0},children:"ปิดกะการขาย (Close Shift)"}),(0,o.jsx)(D,{type:"secondary",children:"กรุณานับเงินในลิ้นชักและระบุยอดที่นับได้"})]}),centered:!0,footer:null,children:[(0,o.jsxs)(C.Z,{column:1,bordered:!0,className:"mb-6",children:[(0,o.jsx)(C.Z.Item,{label:"เวลาเปิดกะ",children:T()(n.open_time).format("DD/MM/YYYY HH:mm")}),(0,o.jsxs)(C.Z.Item,{label:"เงินทอนเริ่มต้น",children:[Number(n.start_amount).toLocaleString()," บาท"]})]}),(0,o.jsxs)(Z.Z,{form:c,layout:"vertical",onFinish:d,children:[(0,o.jsx)(Z.Z.Item,{name:"endAmount",label:"ยอดเงินที่นับได้จริง (Cash Counted)",rules:[{required:!0,message:"กรุณาระบุจำนวนเงิน"}],children:(0,o.jsx)(E.Z,{style:{width:"100%",fontSize:"24px",height:"60px",display:"flex",alignItems:"center"},size:"large",prefix:(0,o.jsx)(v.Z,{style:{fontSize:"24px"}}),min:0,precision:2,placeholder:"0.00",autoFocus:!0,controls:!1,inputMode:"decimal",formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>null==e?void 0:e.replace(/\$\s?|(,*)/g,""),onKeyDown:e=>{if([8,46,9,27,13,190,110].includes(e.keyCode)||!0===e.ctrlKey||!0===e.metaKey||e.keyCode>=35&&e.keyCode<=39){(190===e.keyCode||110===e.keyCode)&&e.currentTarget.value.includes(".")&&e.preventDefault();return}(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}})}),(0,o.jsxs)("div",{className:"flex gap-4",children:[(0,o.jsx)(N.ZP,{block:!0,size:"large",onClick:a,disabled:i,children:"ยกเลิก"}),(0,o.jsx)(N.ZP,{type:"primary",danger:!0,htmlType:"submit",block:!0,size:"large",loading:i,children:"ยืนยันปิดกะ"})]})]})]}):null}var O=()=>{let e=(0,m.useRouter)(),t=(0,m.usePathname)(),{user:a}=(0,l.a)(),{currentShift:n}=u(),[i,s]=(0,r.useState)(!1),c=[{key:"home",label:"Home",icon:(0,o.jsx)(p.Z,{className:"text-2xl"}),path:"/"},{key:"pos",label:"ขายสินค้า",icon:(0,o.jsx)(h.Z,{className:"text-2xl"}),path:"/pos"},{key:"kitchen",label:"ครัว",icon:(0,o.jsx)(h.Z,{className:"text-2xl"}),path:"/pos/kitchen"},...(null==a?void 0:a.role)==="Admin"?[{key:"orders",label:"ออเดอร์",icon:(0,o.jsx)(y.Z,{className:"text-2xl"}),path:"/pos/orders"},{key:"dashboard",label:"Dashboard",icon:(0,o.jsx)(f.Z,{className:"text-2xl"}),path:"/pos/dashboard"},{key:"settings",label:"ตั้งค่า",icon:(0,o.jsx)(f.Z,{className:"text-2xl"}),path:"/pos/settings"},{key:"shift",label:"กะ",icon:(0,o.jsx)(f.Z,{className:"text-2xl"}),path:"/pos/shift"},{key:"items",label:"รอชำระเงิน",icon:(0,o.jsx)(f.Z,{className:"text-2xl"}),path:"/pos/items"},{key:"products",label:"สินค้า",icon:(0,o.jsx)(f.Z,{className:"text-2xl"}),path:"/pos/products"},{key:"category",label:"หมวดหมู่",icon:(0,o.jsx)(x.Z,{className:"text-2xl"}),path:"/pos/category"},{key:"unit",label:"หน่วย",icon:(0,o.jsx)(g.Z,{className:"text-2xl"}),path:"/pos/productsUnit"},{key:"tables",label:"โต๊ะ",icon:(0,o.jsx)(b.Z,{className:"text-2xl"}),path:"/pos/tables"},{key:"delivery",label:"บริการส่ง",icon:(0,o.jsx)(_.Z,{className:"text-2xl"}),path:"/pos/delivery"},{key:"discounts",label:"ส่วนลด",icon:(0,o.jsx)(j.Z,{className:"text-2xl"}),path:"/pos/discounts"},{key:"paymentMethod",label:"วิธีการชำระเงิน",icon:(0,o.jsx)(v.Z,{className:"text-2xl"}),path:"/pos/paymentMethod"}]:[]],d="#60A5FA",w="#D1D5DB";return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 w-[90%] max-w-md z-50",children:(0,o.jsxs)("div",{className:"flex justify-around items-center h-[72px] px-6 py-2 bg-[#171717]/95 backdrop-blur-xl shadow-2xl border border-white/10 rounded-full",style:{boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.3)"},children:[c.map(a=>{let r=t===a.path||"/"!==a.path&&t.startsWith(a.path+"/")||"/pos"===a.path&&"/pos"===t;return(0,o.jsxs)("button",{onClick:()=>e.push(a.path),className:"relative flex flex-col items-center justify-center w-full h-full group",children:[(0,o.jsxs)("div",{className:"relative flex items-center justify-center",children:[r&&(0,o.jsx)("div",{className:"absolute inset-0 bg-blue-400/20 blur-xl rounded-full"}),(0,o.jsx)("div",{className:"text-2xl transition-all duration-300 ease-out transform ".concat(r?"-translate-y-1 scale-110":"group-hover:scale-105"),style:{color:r?d:w},children:a.icon})]}),(0,o.jsx)("span",{className:"text-[11px] font-medium tracking-wide mt-1 transition-all duration-300 ".concat(r?"opacity-100 translate-y-0":"opacity-70 translate-y-1"),style:{color:r?d:w},children:a.label}),r&&(0,o.jsx)("div",{className:"absolute -bottom-2 w-1.5 h-1.5 rounded-full transition-all duration-300",style:{backgroundColor:d}})]},a.key)}),n&&(0,o.jsxs)("button",{onClick:()=>s(!0),className:"relative flex flex-col items-center justify-center w-full h-full group",children:[(0,o.jsx)("div",{className:"relative flex items-center justify-center",children:(0,o.jsx)("div",{className:"text-2xl transition-all duration-300 ease-out transform group-hover:scale-105 text-red-500",children:(0,o.jsx)(S.Z,{})})}),(0,o.jsx)("span",{className:"text-[11px] font-medium tracking-wide mt-1 transition-all duration-300 opacity-70 translate-y-1 text-red-500",children:"ปิดกะ"})]},"closeShift")]})}),(0,o.jsx)(R,{open:i,onCancel:()=>s(!1)})]})},Q=a(52717),F=a(20920),A=a(84859),X=a(53286),L=a(5447),B=a(98748);let M=e=>new Promise(t=>setTimeout(t,e)),J=()=>{let e=(0,F.L)(),[t,a]=(0,r.useState)(!1),n=(0,r.useCallback)(async()=>{if(t||0===A.x.getQueue().length)return;a(!0);let e=s.ZP.loading("กำลังซิงค์รายการที่ค้างอยู่...",0),o=0,r=0;A.x.pruneExceeded();let n=A.x.getQueue();try{let e=await L.O.getCsrfToken();for(let t of n)try{let a=A.M.backoff(t.retryCount);if(a>0&&await M(a),"ADD_ITEM"===t.type){let{orderId:a,itemData:o}=t.payload;await X.x.addItem(a,o,void 0,e)}else"CREATE_ORDER"===t.type&&await X.x.create(t.payload,void 0,e);A.x.removeFromQueue(t.id),o++}catch(e){if(t.retryCount+1>A.M.maxRetry)A.x.removeFromQueue(t.id),r++;else{let a=e instanceof Error?e.message:void 0;A.x.incrementRetry(t.id,a)}}}finally{e(),a(!1),o>0&&s.ZP.success("ซิงค์สำเร็จ ".concat(o," รายการ")),r>0&&Q.ZP.error({message:"ซิงค์บางรายการไม่สำเร็จ",description:"".concat(r," รายการเกินจำนวน retry ที่กำหนด"),placement:"bottomRight",duration:3})}},[t]);return(0,r.useEffect)(()=>{e?n():Q.ZP.warning({message:"ออฟไลน์",description:"รายการจะถูกเก็บเข้าคิวและซิงค์ให้อัตโนมัติเมื่อออนไลน์",icon:(0,o.jsx)(B.Z,{style:{color:"#faad14"}}),duration:2,placement:"bottomRight"})},[e,n]),null},{Title:q,Text:z}=w.default;function U(){let{currentShift:e,loading:t,openShift:a}=u(),[n,l]=(0,r.useState)(!1),[i]=Z.Z.useForm(),s=(0,m.usePathname)(),c=async e=>{l(!0);try{await a(e.startAmount)}catch(e){}finally{l(!1)}};return t?null:(0,o.jsx)(k.Z,{open:!t&&!e&&"/pos/shift"!==s,title:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)(q,{level:3,style:{marginBottom:0},children:"เปิดกะการขาย (Open Shift)"}),(0,o.jsx)(z,{type:"secondary",children:"กรุณาระบุเงินทอนเริ่มต้น"})]}),centered:!0,closable:!1,maskClosable:!1,footer:null,styles:{body:{padding:"20px 0"}},children:(0,o.jsxs)(Z.Z,{form:i,layout:"vertical",onFinish:c,initialValues:{startAmount:0},children:[(0,o.jsx)(Z.Z.Item,{name:"startAmount",label:"เงินทอนเริ่มต้น (บาท)",rules:[{required:!0,message:"กรุณาระบุจำนวนเงิน"}],children:(0,o.jsx)(E.Z,{style:{width:"100%",fontSize:"24px",height:"60px",display:"flex",alignItems:"center"},size:"large",prefix:(0,o.jsx)(v.Z,{style:{fontSize:"24px"}}),min:0,precision:2,placeholder:"0.00",autoFocus:!0,controls:!1,inputMode:"decimal",formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>null==e?void 0:e.replace(/\$\s?|(,*)/g,""),onKeyDown:e=>{if([8,46,9,27,13,190,110].includes(e.keyCode)||!0===e.ctrlKey||!0===e.metaKey||e.keyCode>=35&&e.keyCode<=39){(190===e.keyCode||110===e.keyCode)&&e.currentTarget.value.includes(".")&&e.preventDefault();return}(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}})}),(0,o.jsx)(Z.Z.Item,{style:{marginBottom:0},children:(0,o.jsx)(N.ZP,{type:"primary",htmlType:"submit",block:!0,size:"large",loading:n,className:"bg-emerald-500 hover:bg-emerald-600 border-none h-12 text-lg",children:"ยืนยันเปิดกะ"})})]})})}function K(e){let{children:t}=e;return(0,o.jsxs)(d,{children:[(0,o.jsx)(J,{}),(0,o.jsx)(U,{}),(0,o.jsxs)(n.Z,{children:[t,(0,o.jsx)(O,{})]})]})}},8949:function(e,t,a){"use strict";a.d(t,{Z:function(){return l},j:function(){return i}});var o=a(57437),r=a(2265);let n=(0,r.createContext)(void 0),l=e=>{let{children:t}=e,[a,l]=(0,r.useState)([]),[i,s]=(0,r.useState)("DINE_IN"),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),[p,h]=(0,r.useState)(null),[y,f]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1);r.useEffect(()=>{let e=localStorage.getItem("pos_cart_items"),t=localStorage.getItem("pos_order_mode"),a=localStorage.getItem("pos_ref_id"),o=localStorage.getItem("pos_ref_code"),r=localStorage.getItem("pos_discount"),n=localStorage.getItem("pos_payment");if(e)try{let t=JSON.parse(e).map((e,t)=>({...e,cart_item_id:e.cart_item_id||"item-".concat(Date.now(),"-").concat(t,"-").concat(Math.random().toString(36).substr(2,9))}));l(t)}catch(e){console.error("Failed to parse cart:",e),l([])}t&&s(t),a&&d(a),o&&m(o),r&&h(JSON.parse(r)),n&&f(JSON.parse(n)),g(!0)},[]),r.useEffect(()=>{x&&(localStorage.setItem("pos_cart_items",JSON.stringify(a)),localStorage.setItem("pos_order_mode",i),c?localStorage.setItem("pos_ref_id",c):localStorage.removeItem("pos_ref_id"),u?localStorage.setItem("pos_ref_code",u):localStorage.removeItem("pos_ref_code"),p?localStorage.setItem("pos_discount",JSON.stringify(p)):localStorage.removeItem("pos_discount"),y?localStorage.setItem("pos_payment",JSON.stringify(y)):localStorage.removeItem("pos_payment"))},[a,i,c,u,p,y,x]);let b=e=>{l(t=>t.filter(t=>t.cart_item_id!==e))},_=()=>a.reduce((e,t)=>e+(Number(t.product.price)+(t.details||[]).reduce((e,t)=>e+Number(t.extra_price),0))*t.quantity,0),j=()=>{let e=_();return p?"Percentage"===p.discount_type?e*p.discount_amount/100:Math.min(p.discount_amount,e):0};return(0,o.jsx)(n.Provider,{value:{cartItems:a,addToCart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;l(o=>{let r={cart_item_id:"item-".concat(Date.now(),"-").concat(o.length,"-").concat(Math.random().toString(36).substr(2,9)),product:e,quantity:t,notes:a,details:[]};return[...o,r]})},removeFromCart:b,updateQuantity:(e,t)=>{if(t<=0){b(e);return}l(a=>a.map(a=>a.cart_item_id===e?{...a,quantity:t}:a))},updateItemNote:(e,t)=>{l(a=>a.map(a=>a.cart_item_id===e?{...a,notes:t}:a))},clearCart:()=>{l([]),h(null),f(null),d(null),m(null)},addDetailToItem:(e,t)=>{l(a=>a.map(a=>a.cart_item_id===e?{...a,details:[...a.details||[],t]}:a))},removeDetailFromItem:(e,t)=>{l(a=>a.map(a=>a.cart_item_id===e?{...a,details:(a.details||[]).filter((e,a)=>a!==t)}:a))},updateItemDetails:(e,t)=>{l(a=>a.map(a=>a.cart_item_id===e?{...a,details:t}:a))},orderMode:i,setOrderMode:s,referenceId:c,setReferenceId:d,referenceCode:u,setReferenceCode:m,selectedDiscount:p,setSelectedDiscount:h,selectedPaymentMethod:y,setSelectedPaymentMethod:f,getTotalItems:()=>a.reduce((e,t)=>e+t.quantity,0),getSubtotal:_,getDiscountAmount:j,getFinalPrice:()=>Math.max(0,_()-j())},children:t})},i=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},20920:function(e,t,a){"use strict";a.d(t,{L:function(){return r}});var o=a(2265);function r(){let[e,t]=(0,o.useState)("undefined"==typeof navigator||navigator.onLine);return(0,o.useEffect)(()=>{let e=()=>t(!0),a=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",a),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",a)}},[]),e}},53286:function(e,t,a){"use strict";a.d(t,{x:function(){return b}});var o=a(20019),r=a(2913),n=a(71567),l=a(32446);let i=o.Ryn({id:o.Z_8(),username:o.Z_8()}).partial().nullable(),s=o.Ryn({id:o.Z_8(),display_name:o.Z_8()}).partial().nullable(),c=o.Ryn({id:o.Z_8(),display_name:o.Z_8(),img_url:o.Z_8().nullable(),price:o.oQ2.number(),category:s.optional()}).partial().nullable(),d=o.Ryn({id:o.Z_8().optional(),detail_name:o.Z_8(),extra_price:o.oQ2.number()}).partial(),u=o.Ryn({id:o.Z_8(),order_id:o.Z_8(),product_id:o.Z_8(),product_name:o.Z_8().optional(),quantity:o.oQ2.number(),price:o.oQ2.number(),total_price:o.oQ2.number(),discount_amount:o.oQ2.number().optional().default(0),notes:o.Z_8().nullable().optional(),status:o.jbo(l.i).optional(),product:c.optional(),details:o.IXX(d).optional()}),m=o.Ryn({id:o.Z_8(),order_no:o.Z_8(),order_type:o.jbo(l.m),table_id:o.Z_8().nullable().optional(),delivery_id:o.Z_8().nullable().optional(),delivery_code:o.Z_8().nullable().optional(),sub_total:o.oQ2.number(),discount_id:o.Z_8().nullable().optional(),discount_amount:o.oQ2.number(),vat:o.oQ2.number(),total_amount:o.oQ2.number(),received_amount:o.oQ2.number(),change_amount:o.oQ2.number(),status:o.jbo(l.i),created_by_id:o.Z_8().nullable().optional(),create_date:o.Z_8(),update_date:o.Z_8(),items:o.IXX(u).optional(),created_by:i.optional(),table:o.YjB().optional(),delivery:o.YjB().optional(),discount:o.YjB().optional(),payments:o.IXX(o.YjB()).optional()}),p=o.Ryn({data:o.IXX(m),total:o.oQ2.number(),page:o.oQ2.number(),last_page:o.oQ2.number().optional()}),h=o.Ryn({table_name:o.Z_8().nullable().optional(),delivery_name:o.Z_8().nullable().optional()}).partial().nullable(),y=o.Ryn({id:o.Z_8(),order_no:o.Z_8(),order_type:o.jbo(l.m),status:o.jbo(l.i),create_date:o.Z_8(),total_amount:o.oQ2.number(),delivery_code:o.Z_8().nullable().optional(),table_id:o.Z_8().nullable().optional(),delivery_id:o.Z_8().nullable().optional(),table:h.optional(),delivery:h.optional(),items_summary:o.IMB(o.Z_8(),o.oQ2.number()).optional(),items_count:o.oQ2.number().optional()}),f=o.Ryn({data:o.IXX(y),total:o.oQ2.number(),page:o.oQ2.number(),last_page:o.oQ2.number().optional()}),x=n.q.POS.ORDERS,g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",a={};return t&&(a["Content-Type"]=t),e&&(a.Cookie=e),a},b={getAll:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,s=new URLSearchParams({page:t.toString(),limit:a.toString(),...n&&{status:n},...l&&{type:l},...i&&{q:i}}),c="".concat(x,"?").concat(s.toString()),d=(0,r.b)("GET",c),u=g(e,""),m=await fetch(d,{cache:"no-store",headers:u,credentials:"include"});if(!m.ok){let e=await m.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let h=await m.json();try{return p.parse(h)}catch(e){throw console.error("Zod Validation Error in ordersService.getAll:",e),e instanceof o.jmq&&console.error("Zod Issues:",e.issues),e}},getAllSummary:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,s=new URLSearchParams({page:t.toString(),limit:a.toString(),...n&&{status:n},...l&&{type:l},...i&&{q:i}}),c="".concat(x,"/summary?").concat(s.toString()),d=(0,r.b)("GET",c),u=g(e,""),m=await fetch(d,{cache:"no-store",headers:u,credentials:"include"});if(!m.ok){let e=await m.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let p=await m.json();try{return f.parse(p)}catch(e){throw console.error("Zod Validation Error in ordersService.getAllSummary:",e),e instanceof o.jmq&&console.error("Zod Issues:",e.issues),e}},getStats:async e=>{let t=(0,r.b)("GET",n.q.POS.CHANNELS.STATS),a=g(e,""),o=await fetch(t,{cache:"no-store",headers:a,credentials:"include"});if(!o.ok){let e=await o.text();console.error("Order Stats Backend Error:",e);let t=await JSON.parse(e).catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถดึงข้อมูลสถิติได้")}return await o.json()},getById:async(e,t)=>{let a=(0,r.b)("GET","".concat(x,"/").concat(e)),n=g(t,""),l=await fetch(a,{cache:"no-store",headers:n,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let i=await l.json();try{return m.parse(i)}catch(e){throw console.error("Zod Validation Error in ordersService.getById:",e),e instanceof o.jmq&&console.error("Zod Issues:",e.issues),e}},create:async(e,t,a)=>{let o=(0,r.b)("POST","".concat(x)),n=g(t);a&&(n["X-CSRF-Token"]=a);let l=await fetch(o,{method:"POST",headers:n,credentials:"include",body:JSON.stringify(e)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถสร้างออเดอร์ได้")}return l.json()},update:async(e,t,a,o)=>{let n=(0,r.b)("PUT","".concat(x,"/").concat(e)),l=g(a);o&&(l["X-CSRF-Token"]=o);let i=await fetch(n,{method:"PUT",headers:l,credentials:"include",body:JSON.stringify(t)});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถแก้ไขออเดอร์ได้")}return i.json()},delete:async(e,t,a)=>{let o=(0,r.b)("DELETE","".concat(x,"/").concat(e)),n=g(t,"");a&&(n["X-CSRF-Token"]=a);let l=await fetch(o,{method:"DELETE",headers:n,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถลบออเดอร์ได้")}},updateItemStatus:async(e,t,a,o)=>{let n=(0,r.b)("PATCH","".concat(x,"/items/").concat(e,"/status")),l=g(a);o&&(l["X-CSRF-Token"]=o);let i=await fetch(n,{method:"PATCH",headers:l,credentials:"include",body:JSON.stringify({status:t})});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถอัปเดตสถานะรายการได้")}},getItems:async(e,t)=>{let a=(0,r.b)("GET","".concat(x,"/items").concat(e?"?status=".concat(e):"")),o=g(t,""),n=await fetch(a,{cache:"no-store",headers:o,credentials:"include"});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลรายการได้")}return n.json()},addItem:async(e,t,a,o)=>{let n=(0,r.b)("POST","".concat(x,"/").concat(e,"/items")),l=g(a);o&&(l["X-CSRF-Token"]=o);let i=await fetch(n,{method:"POST",headers:l,credentials:"include",body:JSON.stringify(t)});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถเพิ่มรายการได้")}return i.json()},updateItem:async(e,t,a,o)=>{let n=(0,r.b)("PUT","".concat(x,"/items/").concat(e)),l=g(a);o&&(l["X-CSRF-Token"]=o);let i=await fetch(n,{method:"PUT",headers:l,credentials:"include",body:JSON.stringify(t)});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถแก้ไขรายการได้")}return i.json()},deleteItem:async(e,t,a)=>{let o=(0,r.b)("DELETE","".concat(x,"/items/").concat(e)),n=g(t,"");a&&(n["X-CSRF-Token"]=a);let l=await fetch(o,{method:"DELETE",headers:n,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถลบรายการได้")}return l.json()},updateStatus:async(e,t,a)=>{let o={"Content-Type":"application/json"};a&&(o["X-CSRF-Token"]=a);let n=(0,r.b)("PUT","".concat(x,"/").concat(e));if(!(await fetch(n,{method:"PUT",headers:o,body:JSON.stringify({status:t}),credentials:"include"})).ok)throw Error("Failed to update status")}}},32446:function(e,t,a){"use strict";var o,r,n,l;a.d(t,{i:function(){return r},m:function(){return o}}),(n=o||(o={})).DineIn="DineIn",n.TakeAway="TakeAway",n.Delivery="Delivery",(l=r||(r={})).Pending="Pending",l.Cooking="Cooking",l.Served="Served",l.WaitingForPayment="WaitingForPayment",l.Paid="Paid",l.Completed="Completed",l.Cancelled="Cancelled"}},function(e){e.O(0,[5015,7717,7698,742,3211,7993,8651,2646,6207,7213,9021,2224,3248,19,4967,4547,2239,8869,7189,6011,2971,2117,1744],function(){return e(e.s=83970)}),_N_E=e.O()}]);