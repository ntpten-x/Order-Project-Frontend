(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1966],{93106:function(e,n,a){Promise.resolve().then(a.bind(a,88560))},88560:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return Z}});var t=a(57437),l=a(29),r=a.n(l),c=a(2265),s=a(99376),i=a(60283),o=a(47451),d=a(69410),h=a(62376),u=a(52539),p=a(67605),y=a(44225),b=a(11777),f=a(25369),j=a(29827),m=a(11713),v=a(46252),x=a(53286),g=a(12028),k=a(3369),N=a(42785),w=a(25193),C=a(37410),E=a(20148);let{Title:S,Text:I}=i.default;function Z(){var e,n,a;let l=(0,s.useRouter)(),{showLoading:i,hideLoading:Z}=(0,k.x)(),{stats:_,isLoading:D}=function(){let{socket:e}=(0,c.useContext)(v.J),n=(0,j.NL)(),{data:a,error:t,isLoading:l}=(0,m.a)({queryKey:["channelStats"],queryFn:async()=>await x.x.getStats(),staleTime:2e3,refetchOnReconnect:!0});return(0,c.useEffect)(()=>{if(!e)return;let a=()=>{n.invalidateQueries({queryKey:["channelStats"]})};return e.on(g.b.orders.create,a),e.on(g.b.orders.update,a),e.on(g.b.orders.delete,a),()=>{e.off(g.b.orders.create,a),e.off(g.b.orders.update,a),e.off(g.b.orders.delete,a)}},[e,n]),{stats:a,isLoading:l,isError:t}}();(0,N.DR)(),(0,c.useEffect)(()=>{l.prefetch("/pos/channels/dine-in"),l.prefetch("/pos/channels/takeaway"),l.prefetch("/pos/channels/delivery")},[l]),c.useEffect(()=>{D?i():Z()},[D,i,Z]);let F=[{id:"dine-in",title:"หน้าร้าน",subtitle:"Dine In",description:"รับออเดอร์ลูกค้าที่มานั่งทานที่ร้าน",icon:h.Z,colors:y.hS.dineIn,path:"/pos/channels/dine-in",count:null!==(e=null==_?void 0:_.dineIn)&&void 0!==e?e:0},{id:"takeaway",title:"สั่งกลับบ้าน",subtitle:"Take Away",description:"รับออเดอร์ลูกค้าที่สั่งกลับบ้าน",icon:u.Z,colors:y.hS.takeaway,path:"/pos/channels/takeaway",count:null!==(n=null==_?void 0:_.takeaway)&&void 0!==n?n:0},{id:"delivery",title:"เดลิเวอรี่",subtitle:"Delivery",description:"รับออเดอร์จัดส่งถึงบ้านลูกค้า",icon:p.Z,colors:y.hS.delivery,path:"/pos/channels/delivery",count:null!==(a=null==_?void 0:_.delivery)&&void 0!==a?a:0}],A=e=>{l.push(e)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E.Z,{title:"ช่องทางขาย",subtitle:"เลือกช่องทางขาย"}),(0,t.jsx)(w.Z,{children:(0,t.jsxs)(C.Z,{children:[(0,t.jsx)(f.c,{}),(0,t.jsx)(r(),{id:b.N5.__hash,children:b.N5}),(0,t.jsx)("div",{style:b.jr.channelsContainer,children:(0,t.jsx)("main",{style:b.jr.channelsCardsContainer,role:"main",className:"channels-cards-container-mobile",children:(0,t.jsx)(o.Z,{gutter:[20,20],justify:"center",children:F.map((e,n)=>{var a;let l=e.icon,r=e.count>0;return(0,t.jsx)(d.Z,{xs:24,sm:24,md:12,lg:8,children:(0,t.jsx)("article",{style:b.jr.channelCard,onClick:()=>A(e.path),onKeyDown:n=>{("Enter"===n.key||" "===n.key)&&(n.preventDefault(),A(e.path))},role:"button",tabIndex:0,"aria-label":"".concat(e.title," - ").concat(e.subtitle,". ").concat(r?"".concat(e.count," ออเดอร์กำลังดำเนินการ"):"ไม่มีออเดอร์"),className:"channel-card-hover fade-in-up card-delay-".concat(n+1),children:(0,t.jsxs)("div",{style:b.jr.channelCardInner,className:"channels-card-inner-mobile",children:[(0,t.jsxs)("div",{style:{...b.jr.channelIconWrapper,background:e.colors.light,border:"2px solid ".concat(e.colors.border)},className:"icon-wrapper channels-icon-wrapper-mobile",children:[(0,t.jsx)("div",{style:{...b.jr.channelDecorativeGlow,background:e.colors.gradient},className:"decorative-glow"}),(0,t.jsx)(l,{style:{...b.jr.channelIcon,color:e.colors.primary},"aria-hidden":"true",className:"channels-channel-icon-mobile"})]}),(0,t.jsx)(S,{level:2,style:b.jr.channelCardTitle,className:"channels-card-title-mobile",children:e.title}),(0,t.jsx)(I,{style:b.jr.channelCardSubtitle,className:"channels-card-subtitle-mobile",children:e.subtitle}),(0,t.jsxs)("div",{style:{...b.jr.channelStatsBadge,background:r?e.colors.light:"#F8FAFC",color:r?e.colors.primary:"#94A3B8",border:"1.5px solid ".concat(r?e.colors.border:"#E2E8F0")},"aria-live":"polite",className:"channels-stats-badge-mobile",children:[r&&(0,t.jsx)("span",{style:{...b.jr.channelActiveIndicator,background:e.colors.primary,boxShadow:"0 0 0 2px ".concat(e.colors.light)},"aria-hidden":"true",className:"pulse-animation"}),(0,t.jsx)("span",{style:{fontWeight:600},children:0===(a=e.count)?"ว่าง":1===a?"1 ออเดอร์":"".concat(a," ออเดอร์")})]})]})})},e.id)})})})})]})})]})}}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=93106)}),_N_E=e.O()}]);