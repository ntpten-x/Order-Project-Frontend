(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4674],{13410:function(t,e,n){Promise.resolve().then(n.bind(n,9395))},9395:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return w}});var u=n(57437),s=n(2265),c=n(99376),o=n(34029),a=n(52539),r=n(8949),i=n(53286),l=n(61414),f=n(252),d=n(32446),m=n(3369),y=n(77961),A=n(97235);function k(t){let{queueNumber:e}=t,{showLoading:n,hideLoading:k}=(0,m.x)(),[w,E]=(0,s.useState)(""),b=(0,c.useRouter)();(0,s.useEffect)(()=>{(async()=>{n();let t=await (0,A.P)();t&&E(t),k()})()},[n,k]);let{cartItems:h,clearCart:_,getSubtotal:x,getDiscountAmount:T,getFinalPrice:Z,selectedDiscount:j,setOrderMode:p,setReferenceId:v,setReferenceCode:N}=(0,r.j)();(0,s.useEffect)(()=>{p("TAKEAWAY"),v(null),N(e||null)},[e,p,v,N]);let P=async()=>{n();try{let t=(0,l.zf)(h,d.m.TakeAway,{subTotal:x(),discountAmount:T(),totalAmount:Z()},{discountId:null==j?void 0:j.id,queueNumber:e});await i.x.create(t,void 0,w),o.ZP.success("สร้างออเดอร์เรียบร้อยแล้ว"),_(),b.push((0,f.Zu)(d.m.TakeAway))}catch(t){o.ZP.error(t instanceof Error?t.message:"ไม่สามารถทำรายการได้")}finally{k()}};return(0,u.jsx)(y.Z,{title:"ระบบขายหน้าร้าน (Take Away)",subtitle:"สั่งกลับบ้าน ".concat(e?"- คิว ".concat(e):""),icon:(0,u.jsx)(a.Z,{style:{fontSize:28}}),onConfirmOrder:P})}function w(){return(0,u.jsx)(k,{})}}},function(t){t.O(0,[8024,4736,8592,1744],function(){return t(t.s=13410)}),_N_E=t.O()}]);