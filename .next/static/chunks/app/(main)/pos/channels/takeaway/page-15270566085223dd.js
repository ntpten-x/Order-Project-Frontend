(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[416],{14468:function(e,t,n){Promise.resolve().then(n.bind(n,42569))},42569:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var a=n(57437),r=n(2265),i=n(99376),o=n(82646),l=n(50742),s=n(47451),c=n(69410),d=n(96931),u=n(80009),y=n(23496),p=n(85180),m=n(17588),h=n(52539),b=n(96473),f=n(32446),g=n(44225),v=n(11777),_=n(25369),x=n(252),w=n(61414),j=n(3369),k=n(33203),S=n(71096),T=n.n(S),Z=n(45721),E=n.n(Z);n(6729);let{Title:C,Text:P}=o.default;function N(){let e=(0,i.useRouter)(),{showLoading:t,hideLoading:n}=(0,j.x)(),{orders:o,isLoading:S}=(0,k.w)({orderType:f.m.TakeAway}),Z=(0,r.useMemo)(()=>(0,x.Do)(o),[o]);(0,r.useEffect)(()=>{S?t("กำลังโหลดออเดอร์..."):n()},[S,t,n]);let E=()=>{e.push("/pos/channels/takeaway/buying")},N=t=>{let n=(0,w.M9)(t);e.push(n)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.c,{}),(0,a.jsxs)("div",{style:g.Np.container,children:[(0,a.jsxs)("div",{style:{...v.y.channelHeader,background:g.hS.takeaway.gradient},className:"takeaway-header-mobile",children:[(0,a.jsx)("div",{className:"header-pattern"}),(0,a.jsxs)("div",{style:v.y.channelHeaderContent,className:"takeaway-header-content-mobile",children:[(0,a.jsxs)("div",{className:"back-button-hover takeaway-back-button-mobile",style:v.y.channelBackButton,onClick:()=>{e.push("/pos/channels")},children:[(0,a.jsx)(m.Z,{}),(0,a.jsx)("span",{children:"กลับ"})]}),(0,a.jsxs)("div",{style:v.y.channelTitleSection,className:"takeaway-title-section-mobile",children:[(0,a.jsx)(h.Z,{style:v.y.channelHeaderIcon,className:"takeaway-header-icon-mobile"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(C,{level:3,style:v.y.channelHeaderTitle,className:"takeaway-header-title-mobile",children:"สั่งกลับบ้าน"}),(0,a.jsx)(P,{style:v.y.channelHeaderSubtitle,children:"Take Away"})]})]}),(0,a.jsxs)("div",{style:v.y.channelStatsBar,className:"takeaway-stats-bar-mobile",children:[(0,a.jsxs)("div",{style:v.y.statItem,children:[(0,a.jsx)("span",{style:{...v.y.statDot,background:"#fff"}}),(0,a.jsxs)(P,{style:v.y.statText,children:["ทั้งหมด ",Z.total]})]}),(0,a.jsxs)("div",{style:v.y.statItem,children:[(0,a.jsx)("span",{style:{...v.y.statDot,background:g.ax.occupied.primary}}),(0,a.jsxs)(P,{style:v.y.statText,children:["กำลังปรุง ",Z.cooking]})]})]})]})]}),(0,a.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto",padding:"0 16px 24px"},children:[(0,a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:20},children:(0,a.jsx)(l.ZP,{type:"primary",size:"large",icon:(0,a.jsx)(b.Z,{}),onClick:E,style:{height:48,borderRadius:12,padding:"0 24px",fontWeight:700,background:g.hS.takeaway.primary,border:"none",boxShadow:"0 8px 16px rgba(82, 196, 26, 0.25)"},children:"เพิ่มออเดอร์ใหม่"})}),o.length>0?(0,a.jsx)(s.Z,{gutter:[20,20],children:o.map((e,t)=>{var n;let r=(0,x.Yx)(e),i=g.ax[r],o=e.order_no.split("-").pop();return(0,a.jsx)(c.Z,{xs:24,sm:12,md:12,lg:8,xl:6,children:(0,a.jsxs)(d.Z,{hoverable:!0,className:"takeaway-order-card table-card-animate table-card-delay-".concat(t%6+1),style:{borderRadius:16,overflow:"hidden",border:"1px solid ".concat(i.border),background:"#fff",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0,0,0,0.05)"},bodyStyle:{padding:0},onClick:()=>N(e),children:[(0,a.jsxs)("div",{style:{padding:"12px 16px",background:i.light,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid ".concat(i.border,"40")},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)(h.Z,{style:{color:i.primary,fontSize:18}}),(0,a.jsxs)(P,{strong:!0,style:{fontSize:16},children:["#",o]})]}),(0,a.jsx)(u.Z,{color:"available"===r?"success":"occupied"===r?"orange":"waitingForPayment"===r?"blue":"default",style:{borderRadius:6,margin:0,fontWeight:600,border:"none"},children:(0,x.NE)(e.status)})]}),(0,a.jsxs)("div",{style:{padding:16},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(P,{type:"secondary",style:{fontSize:12,display:"block"},children:"รายการสินค้า"}),(0,a.jsxs)(P,{strong:!0,style:{fontSize:15},children:[e.items_count||0," รายการ"]})]}),(0,a.jsxs)("div",{style:{textAlign:"right"},children:[(0,a.jsx)(P,{type:"secondary",style:{fontSize:12,display:"block"},children:"ยอดรวม"}),(0,a.jsxs)(P,{strong:!0,style:{fontSize:18,color:i.primary},children:["฿",null===(n=e.total_amount)||void 0===n?void 0:n.toLocaleString()]})]})]}),(0,a.jsx)(y.Z,{style:{margin:"12px 0"}}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,a.jsx)("div",{style:{width:8,height:8,borderRadius:"50%",background:i.primary,boxShadow:"0 0 8px ".concat(i.primary,"60")}}),(0,a.jsx)(P,{type:"secondary",style:{fontSize:12},children:T()(e.create_date).fromNow()})]}),(0,a.jsx)(P,{type:"secondary",style:{fontSize:12},children:"Take Away"})]})]})]})},e.id)})}):(0,a.jsxs)("div",{style:{background:"#fff",borderRadius:24,padding:"80px 24px",textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.06)"},children:[(0,a.jsx)(p.Z,{image:p.Z.PRESENTED_IMAGE_SIMPLE,description:(0,a.jsxs)("div",{style:{marginTop:16},children:[(0,a.jsx)(C,{level:4,style:{marginBottom:8},children:"ไม่มีออเดอร์ในขณะนี้"}),(0,a.jsx)(P,{type:"secondary",children:'เริ่มรับออเดอร์สั่งกลับบ้านโดยกดปุ่ม "เพิ่มออเดอร์"'})]})}),(0,a.jsx)(l.ZP,{type:"primary",size:"large",icon:(0,a.jsx)(b.Z,{}),onClick:E,style:{marginTop:24,background:g.hS.takeaway.primary,borderColor:g.hS.takeaway.primary,height:44,borderRadius:10,padding:"0 32px"},children:"สร้างออเดอร์ใหม่"})]})]})]})]})}T().extend(E()),T().locale("th")},53286:function(e,t,n){"use strict";n.d(t,{x:function(){return v}});var a=n(20019),r=n(2913),i=n(71567),o=n(32446);let l=a.Ryn({id:a.Z_8(),username:a.Z_8()}).partial().nullable(),s=a.Ryn({id:a.Z_8(),display_name:a.Z_8()}).partial().nullable(),c=a.Ryn({id:a.Z_8(),display_name:a.Z_8(),img_url:a.Z_8().nullable(),price:a.oQ2.number(),category:s.optional()}).partial().nullable(),d=a.Ryn({id:a.Z_8().optional(),detail_name:a.Z_8(),extra_price:a.oQ2.number()}).partial(),u=a.Ryn({id:a.Z_8(),order_id:a.Z_8(),product_id:a.Z_8(),product_name:a.Z_8().optional(),quantity:a.oQ2.number(),price:a.oQ2.number(),total_price:a.oQ2.number(),discount_amount:a.oQ2.number().optional().default(0),notes:a.Z_8().nullable().optional(),status:a.jbo(o.i).optional(),product:c.optional(),details:a.IXX(d).optional()}),y=a.Ryn({id:a.Z_8(),order_no:a.Z_8(),order_type:a.jbo(o.m),table_id:a.Z_8().nullable().optional(),delivery_id:a.Z_8().nullable().optional(),delivery_code:a.Z_8().nullable().optional(),sub_total:a.oQ2.number(),discount_id:a.Z_8().nullable().optional(),discount_amount:a.oQ2.number(),vat:a.oQ2.number(),total_amount:a.oQ2.number(),received_amount:a.oQ2.number(),change_amount:a.oQ2.number(),status:a.jbo(o.i),created_by_id:a.Z_8().nullable().optional(),create_date:a.Z_8(),update_date:a.Z_8(),items:a.IXX(u).optional(),created_by:l.optional(),table:a.YjB().optional(),delivery:a.YjB().optional(),discount:a.YjB().optional(),payments:a.IXX(a.YjB()).optional()}),p=a.Ryn({data:a.IXX(y),total:a.oQ2.number(),page:a.oQ2.number(),last_page:a.oQ2.number().optional()}),m=a.Ryn({table_name:a.Z_8().nullable().optional(),delivery_name:a.Z_8().nullable().optional()}).partial().nullable(),h=a.Ryn({id:a.Z_8(),order_no:a.Z_8(),order_type:a.jbo(o.m),status:a.jbo(o.i),create_date:a.Z_8(),total_amount:a.oQ2.number(),delivery_code:a.Z_8().nullable().optional(),table_id:a.Z_8().nullable().optional(),delivery_id:a.Z_8().nullable().optional(),table:m.optional(),delivery:m.optional(),items_summary:a.IMB(a.Z_8(),a.oQ2.number()).optional(),items_count:a.oQ2.number().optional()}),b=a.Ryn({data:a.IXX(h),total:a.oQ2.number(),page:a.oQ2.number(),last_page:a.oQ2.number().optional()}),f=i.q.POS.ORDERS,g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",n={};return t&&(n["Content-Type"]=t),e&&(n.Cookie=e),n},v={getAll:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,s=new URLSearchParams({page:t.toString(),limit:n.toString(),...i&&{status:i},...o&&{type:o},...l&&{q:l}}),c="".concat(f,"?").concat(s.toString()),d=(0,r.b)("GET",c),u=g(e,""),y=await fetch(d,{cache:"no-store",headers:u,credentials:"include"});if(!y.ok){let e=await y.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let m=await y.json();try{return p.parse(m)}catch(e){throw console.error("Zod Validation Error in ordersService.getAll:",e),e instanceof a.jmq&&console.error("Zod Issues:",e.issues),e}},getAllSummary:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,s=new URLSearchParams({page:t.toString(),limit:n.toString(),...i&&{status:i},...o&&{type:o},...l&&{q:l}}),c="".concat(f,"/summary?").concat(s.toString()),d=(0,r.b)("GET",c),u=g(e,""),y=await fetch(d,{cache:"no-store",headers:u,credentials:"include"});if(!y.ok){let e=await y.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let p=await y.json();try{return b.parse(p)}catch(e){throw console.error("Zod Validation Error in ordersService.getAllSummary:",e),e instanceof a.jmq&&console.error("Zod Issues:",e.issues),e}},getStats:async e=>{let t=(0,r.b)("GET",i.q.POS.CHANNELS.STATS),n=g(e,""),a=await fetch(t,{cache:"no-store",headers:n,credentials:"include"});if(!a.ok){let e=await a.text();console.error("Order Stats Backend Error:",e);let t=await JSON.parse(e).catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถดึงข้อมูลสถิติได้")}return await a.json()},getById:async(e,t)=>{let n=(0,r.b)("GET","".concat(f,"/").concat(e)),i=g(t,""),o=await fetch(n,{cache:"no-store",headers:i,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let l=await o.json();try{return y.parse(l)}catch(e){throw console.error("Zod Validation Error in ordersService.getById:",e),e instanceof a.jmq&&console.error("Zod Issues:",e.issues),e}},create:async(e,t,n)=>{let a=(0,r.b)("POST","".concat(f)),i=g(t);n&&(i["X-CSRF-Token"]=n);let o=await fetch(a,{method:"POST",headers:i,credentials:"include",body:JSON.stringify(e)});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถสร้างออเดอร์ได้")}return o.json()},update:async(e,t,n,a)=>{let i=(0,r.b)("PUT","".concat(f,"/").concat(e)),o=g(n);a&&(o["X-CSRF-Token"]=a);let l=await fetch(i,{method:"PUT",headers:o,credentials:"include",body:JSON.stringify(t)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถแก้ไขออเดอร์ได้")}return l.json()},delete:async(e,t,n)=>{let a=(0,r.b)("DELETE","".concat(f,"/").concat(e)),i=g(t,"");n&&(i["X-CSRF-Token"]=n);let o=await fetch(a,{method:"DELETE",headers:i,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถลบออเดอร์ได้")}},updateItemStatus:async(e,t,n,a)=>{let i=(0,r.b)("PATCH","".concat(f,"/items/").concat(e,"/status")),o=g(n);a&&(o["X-CSRF-Token"]=a);let l=await fetch(i,{method:"PATCH",headers:o,credentials:"include",body:JSON.stringify({status:t})});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถอัปเดตสถานะรายการได้")}},getItems:async(e,t)=>{let n=(0,r.b)("GET","".concat(f,"/items").concat(e?"?status=".concat(e):"")),a=g(t,""),i=await fetch(n,{cache:"no-store",headers:a,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลรายการได้")}return i.json()},addItem:async(e,t,n,a)=>{let i=(0,r.b)("POST","".concat(f,"/").concat(e,"/items")),o=g(n);a&&(o["X-CSRF-Token"]=a);let l=await fetch(i,{method:"POST",headers:o,credentials:"include",body:JSON.stringify(t)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถเพิ่มรายการได้")}return l.json()},updateItem:async(e,t,n,a)=>{let i=(0,r.b)("PUT","".concat(f,"/items/").concat(e)),o=g(n);a&&(o["X-CSRF-Token"]=a);let l=await fetch(i,{method:"PUT",headers:o,credentials:"include",body:JSON.stringify(t)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถแก้ไขรายการได้")}return l.json()},deleteItem:async(e,t,n)=>{let a=(0,r.b)("DELETE","".concat(f,"/items/").concat(e)),i=g(t,"");n&&(i["X-CSRF-Token"]=n);let o=await fetch(a,{method:"DELETE",headers:i,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถลบรายการได้")}return o.json()},updateStatus:async(e,t,n)=>{let a={"Content-Type":"application/json"};n&&(a["X-CSRF-Token"]=n);let i=(0,r.b)("PUT","".concat(f,"/").concat(e));if(!(await fetch(i,{method:"PUT",headers:a,body:JSON.stringify({status:t}),credentials:"include"})).ok)throw Error("Failed to update status")}}},34962:function(e,t,n){"use strict";var a,r;n.d(t,{c:function(){return a}}),(r=a||(a={})).Available="Available",r.Unavailable="Unavailable"},252:function(e,t,n){"use strict";n.d(t,{NE:function(){return c},Th:function(){return l},Do:function(){return d},Yx:function(){return u},Zu:function(){return y},Oi:function(){return s},W9:function(){return i},Tf:function(){return o}});var a=n(34962),r=n(32446);function i(e){let t={total:e.length,available:0,occupied:0,inactive:0};return e.forEach(e=>{e.is_active?e.status===a.c.Available?t.available++:t.occupied++:t.inactive++}),t}function o(e){return[...e].sort((e,t)=>{let n=parseInt(e.table_name.replace(/\D/g,"")),a=parseInt(t.table_name.replace(/\D/g,""));return isNaN(n)||isNaN(a)?e.table_name.localeCompare(t.table_name):n-a})}function l(e){return e.filter(e=>e.is_active)}function s(e){return e.is_active?"WaitingForPayment"===e.active_order_status?"waitingForPayment":e.status===a.c.Available?"available":"occupied":"inactive"}function c(e){return e?({Pending:"กำลังดำเนินการ",Cooking:"กำลังปรุง",Served:"เสิร์ฟแล้ว",WaitingForOrder:"รอรับออเดอร์",WaitingForPayment:"รอชำระเงิน",Paid:"ชำระเงินแล้ว",Completed:"เสร็จสมบูรณ์",Cancelled:"ยกเลิก"})[e]||e:""}function d(e){return e.reduce((e,t)=>(e.total++,t.status===r.i.Pending&&e.pending++,t.status===r.i.Cooking&&e.cooking++,t.status===r.i.Served&&e.served++,e),{total:0,pending:0,cooking:0,served:0})}function u(e){switch(e.status){case r.i.Pending:case r.i.Cooking:return"occupied";case r.i.Served:return"waitingForPayment";case r.i.Paid:return"available";default:return"inactive"}}let y=e=>{switch(e){case r.m.DineIn:case"DineIn":return"/pos/channels/dine-in";case r.m.TakeAway:case"TakeAway":return"/pos/channels/takeaway";case r.m.Delivery:case"Delivery":return"/pos/channels/delivery";default:return"/pos/orders"}}},61414:function(e,t,n){"use strict";n.d(t,{EO:function(){return _},Gs:function(){return s},HL:function(){return x},M9:function(){return w},Nz:function(){return h},OY:function(){return o},Rr:function(){return g},Wl:function(){return i},d$:function(){return j},d7:function(){return l},iN:function(){return u},jN:function(){return m},ku:function(){return f},mz:function(){return c},qO:function(){return d},xG:function(){return p},yj:function(){return v},zP:function(){return y},zf:function(){return k}});var a=n(32446),r=n(34962);let i=e=>{var t,n;if(e.status===r.c.Available)return"/pos/channels/dine-in/".concat(e.id);let i=e.active_order_id||(null===(t=e.active_order)||void 0===t?void 0:t.id),o=e.active_order_status||(null===(n=e.active_order)||void 0===n?void 0:n.status);return i?o===a.i.WaitingForPayment?"/pos/items/payment/".concat(i):"/pos/orders/".concat(i):"/pos/channels/dine-in/".concat(e.id)},o=e=>{switch(e){case a.i.Pending:return"orange";case a.i.Cooking:return"blue";case a.i.Served:return"green";case a.i.Paid:return"cyan";case a.i.Cancelled:return"red";case a.i.WaitingForPayment:return"gold";default:return"default"}},l=(e,t)=>{switch(e){case a.i.Pending:return"กำลังดำเนินการ";case a.i.Cooking:return"กำลังปรุง";case a.i.Served:if("TakeAway"===t||"Delivery"===t)return"ทำแล้ว";return"เสิร์ฟแล้ว";case a.i.Paid:return"ชำระเงินแล้ว";case a.i.Completed:return"สำเร็จ";case a.i.Cancelled:return"ยกเลิก";case a.i.WaitingForPayment:return"รอชำระเงิน";default:return e}},s=e=>{switch(e){case"DineIn":return"#722ed1";case"TakeAway":return"#fa8c16";case"Delivery":return"#eb2f96";default:return"#1890ff"}},c=e=>{switch(e){case"DineIn":return"ทานที่ร้าน";case"TakeAway":return"สั่งกลับบ้าน";case"Delivery":return"เดลิเวอรี่";default:return e}},d=e=>"DineIn"===e?"เสิร์ฟ":"ทำแล้ว",u=e=>"Delivery"===e?"จัดออเดอร์เสร็จแล้วพร้อมส่งให้ไรเดอร์":"DineIn"===e?"ยืนยันเสิร์ฟพร้อมชำระเงิน":"ยืนยันทำแล้วพร้อมชำระเงิน",y=e=>"DineIn"===e?"เสิร์ฟอาหารแล้ว":"ปรุงเสร็จแล้ว",p=e=>{let t="string"==typeof e?parseFloat(e):e;return"฿".concat(Number(t).toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2}))},m=e=>{var t,n;return"DineIn"===e.order_type?(null===(t=e.table)||void 0===t?void 0:t.table_name)||"ไม่ระบุโต๊ะ":"Delivery"===e.order_type?e.delivery_code||(null===(n=e.delivery)||void 0===n?void 0:n.delivery_name)||"ไม่ระบุข้อมูล":"TakeAway"===e.order_type?e.order_no||"ไม่ระบุเลขที่":e.order_no||"N/A"},h=e=>(null!=e?e:[]).filter(e=>e.status!==a.i.Cancelled),b=e=>(null!=e?e:[]).reduce((e,t)=>e+(Number(t.extra_price)||0),0),f=(e,t,n)=>((Number(e)||0)+b(n))*t,g=e=>h(e).reduce((e,t)=>{var n,a;let r=(null===(a=t.product)||void 0===a?void 0:null===(n=a.category)||void 0===n?void 0:n.display_name)||"ไม่ระบุหมวด";return e[r]=(e[r]||0)+(t.quantity||0),e},{}),v=e=>h(e).reduce((e,t)=>e+Number(t.total_price||0),0),_=e=>"DineIn"===e.order_type?"/pos/channels/dine-in":"TakeAway"===e.order_type?"/pos/channels/takeaway":"Delivery"===e.order_type?"/pos/channels/delivery":"/pos/orders",x=e=>"/pos/orders/".concat(e),w=e=>e.status===a.i.WaitingForPayment?e.order_type===a.m.Delivery?"/pos/items/delivery/".concat(e.id):"/pos/items/payment/".concat(e.id):"/pos/orders/".concat(e.id),j=e=>e===a.m.Delivery?"/pos/channels/delivery":e===a.m.TakeAway?"/pos/channels/takeaway":e===a.m.DineIn?"/pos/channels/dine-in":"/pos/channels",k=(e,t,n,r)=>({order_no:r.orderNo||"ORD-".concat(Date.now()),order_type:t,sub_total:n.subTotal,discount_amount:n.discountAmount,vat:0,total_amount:n.totalAmount,received_amount:0,change_amount:0,status:a.i.Pending,discount_id:r.discountId||null,payment_method_id:null,table_id:r.tableId||null,delivery_id:r.deliveryId||null,delivery_code:r.deliveryCode||null,items:e.map(e=>{let t=Number(e.product.price),n=(t+(e.details||[]).reduce((e,t)=>e+Number(t.extra_price),0))*e.quantity;return{product_id:e.product.id,quantity:e.quantity,price:t,total_price:n,discount_amount:0,notes:e.notes||"",status:a.i.Cooking,details:e.details||[]}})})},33203:function(e,t,n){"use strict";n.d(t,{w:function(){return m}});var a=n(2265),r=n(53286),i=n(32446),o=n(24675),l=n(67697),s=n(21652),c=n.n(s);let d=new Set([i.i.Paid,i.i.Completed,i.i.Cancelled]),u=[i.i.Pending,i.i.Cooking,i.i.Served,i.i.WaitingForPayment].join(","),y=["orders:create","orders:update","orders:delete","payments:create","payments:update"],p=(e,t)=>e.filter(e=>e.order_type===t&&!d.has(e.status));function m(e){let{orderType:t,limit:n=100,page:i=1,statusFilter:s=u,enabled:d=!0,refreshIntervalMs:m=15e3,events:h=y}=e,{socket:b}=(0,o.s)(),[f,g]=(0,a.useState)([]),[v,_]=(0,a.useState)(!0),x=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(d){e||_(!0);try{let e=await r.x.getAllSummary(void 0,i,n,s,t),a=p(e.data||[],t);g(e=>c()(e,a)?e:a)}catch(e){}finally{e||_(!1)}}},[d,n,t,i,s]);return(0,a.useEffect)(()=>{d&&x(!1)},[d,x,s]),(0,l.D)({socket:b,events:h,onRefresh:()=>x(!0),intervalMs:m,enabled:d,debounceMs:800}),{orders:f,isLoading:v,refresh:x}}}},function(e){e.O(0,[5015,7717,7698,742,3211,7993,8651,2646,6207,1721,9,8640,6931,19,4221,5531,2836,3490,4103,2971,2117,1744],function(){return e(e.s=14468)}),_N_E=e.O()}]);