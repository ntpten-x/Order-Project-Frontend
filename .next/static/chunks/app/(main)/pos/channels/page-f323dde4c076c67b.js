(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1966],{93106:function(e,n,a){Promise.resolve().then(a.bind(a,88560))},88560:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return C}});var l=a(57437),r=a(29),s=a.n(r),c=a(2265),t=a(99376),i=a(19683),o=a(47451),d=a(69410),h=a(62376),u=a(52539),j=a(67605),p=a(44225),y=a(11777),m=a(25369),b=a(29827),v=a(11713),x=a(46252),f=a(53286),N=a(3369),g=a(42785);let{Title:k,Text:w}=i.default;function C(){var e,n,a;let r=(0,t.useRouter)(),{showLoading:i,hideLoading:C}=(0,N.x)(),{stats:S,isLoading:E}=function(){let{socket:e}=(0,c.useContext)(x.J),n=(0,b.NL)(),{data:a,error:l,isLoading:r}=(0,v.a)({queryKey:["channelStats"],queryFn:async()=>await f.x.getStats(),staleTime:2e3,refetchOnReconnect:!0});return(0,c.useEffect)(()=>{if(!e)return;let a=()=>{n.invalidateQueries({queryKey:["channelStats"]})};return e.on("orders:create",a),e.on("orders:update",a),e.on("orders:delete",a),()=>{e.off("orders:create",a),e.off("orders:update",a),e.off("orders:delete",a)}},[e,n]),{stats:a,isLoading:r,isError:l}}();(0,g.DR)(),(0,c.useEffect)(()=>{r.prefetch("/pos/channels/dine-in"),r.prefetch("/pos/channels/takeaway"),r.prefetch("/pos/channels/delivery")},[r]),c.useEffect(()=>{E?i():C()},[E,i,C]);let I=[{id:"dine-in",title:"หน้าร้าน",subtitle:"Dine In",description:"รับออเดอร์ลูกค้าที่มานั่งทานที่ร้าน",icon:h.Z,colors:p.hS.dineIn,path:"/pos/channels/dine-in",count:null!==(e=null==S?void 0:S.dineIn)&&void 0!==e?e:0},{id:"takeaway",title:"สั่งกลับบ้าน",subtitle:"Take Away",description:"รับออเดอร์ลูกค้าที่สั่งกลับบ้าน",icon:u.Z,colors:p.hS.takeaway,path:"/pos/channels/takeaway",count:null!==(n=null==S?void 0:S.takeaway)&&void 0!==n?n:0},{id:"delivery",title:"เดลิเวอรี่",subtitle:"Delivery",description:"รับออเดอร์จัดส่งถึงบ้านลูกค้า",icon:j.Z,colors:p.hS.delivery,path:"/pos/channels/delivery",count:null!==(a=null==S?void 0:S.delivery)&&void 0!==a?a:0}],_=e=>{r.push(e)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.c,{}),(0,l.jsx)(s(),{id:y.N5.__hash,children:y.N5}),(0,l.jsxs)("div",{style:y.jr.channelsContainer,children:[(0,l.jsxs)("header",{style:y.jr.channelsHeader,role:"banner",className:"channels-header-mobile",children:[(0,l.jsx)("div",{className:"header-pattern"}),(0,l.jsx)("div",{className:"header-circle circle-1"}),(0,l.jsx)("div",{className:"header-circle circle-2"}),(0,l.jsxs)("div",{style:y.jr.channelsHeaderContent,children:[(0,l.jsx)("div",{className:"header-icon-animate",children:(0,l.jsx)(h.Z,{style:y.jr.channelsHeaderIcon,className:"channels-header-icon-mobile","aria-hidden":"true"})}),(0,l.jsx)(k,{level:1,style:y.jr.channelsHeaderTitle,className:"channels-header-title-mobile",children:"เลือกช่องทางขาย"}),(0,l.jsx)(w,{style:y.jr.channelsHeaderSubtitle,className:"channels-header-subtitle-mobile",children:"Select Sales Channel"})]})]}),(0,l.jsx)("main",{style:y.jr.channelsCardsContainer,role:"main",className:"channels-cards-container-mobile",children:(0,l.jsx)(o.Z,{gutter:[20,20],justify:"center",children:I.map((e,n)=>{var a;let r=e.icon,s=e.count>0;return(0,l.jsx)(d.Z,{xs:24,sm:24,md:12,lg:8,children:(0,l.jsx)("article",{style:y.jr.channelCard,onClick:()=>_(e.path),onKeyDown:n=>{("Enter"===n.key||" "===n.key)&&(n.preventDefault(),_(e.path))},role:"button",tabIndex:0,"aria-label":"".concat(e.title," - ").concat(e.subtitle,". ").concat(s?"".concat(e.count," ออเดอร์กำลังดำเนินการ"):"ไม่มีออเดอร์"),className:"channel-card-hover fade-in-up card-delay-".concat(n+1),children:(0,l.jsxs)("div",{style:y.jr.channelCardInner,className:"channels-card-inner-mobile",children:[(0,l.jsxs)("div",{style:{...y.jr.channelIconWrapper,background:e.colors.light,border:"2px solid ".concat(e.colors.border)},className:"icon-wrapper channels-icon-wrapper-mobile",children:[(0,l.jsx)("div",{style:{...y.jr.channelDecorativeGlow,background:e.colors.gradient},className:"decorative-glow"}),(0,l.jsx)(r,{style:{...y.jr.channelIcon,color:e.colors.primary},"aria-hidden":"true",className:"channels-channel-icon-mobile"})]}),(0,l.jsx)(k,{level:2,style:y.jr.channelCardTitle,className:"channels-card-title-mobile",children:e.title}),(0,l.jsx)(w,{style:y.jr.channelCardSubtitle,className:"channels-card-subtitle-mobile",children:e.subtitle}),(0,l.jsxs)("div",{style:{...y.jr.channelStatsBadge,background:s?e.colors.light:"#F8FAFC",color:s?e.colors.primary:"#94A3B8",border:"1.5px solid ".concat(s?e.colors.border:"#E2E8F0")},"aria-live":"polite",className:"channels-stats-badge-mobile",children:[s&&(0,l.jsx)("span",{style:{...y.jr.channelActiveIndicator,background:e.colors.primary,boxShadow:"0 0 0 2px ".concat(e.colors.light)},"aria-hidden":"true",className:"pulse-animation"}),(0,l.jsx)("span",{style:{fontWeight:600},children:0===(a=e.count)?"ว่าง":1===a?"1 ออเดอร์":"".concat(a," ออเดอร์")})]})]})})},e.id)})})})]})]})}}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=93106)}),_N_E=e.O()}]);