(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1966],{93106:function(e,t,n){Promise.resolve().then(n.bind(n,88560))},67605:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2265),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"},a=n(55015);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=r.forwardRef((e,t)=>r.createElement(a.Z,c({},e,{ref:t,icon:o})))},62376:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2265),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M882 272.1V144c0-17.7-14.3-32-32-32H174c-17.7 0-32 14.3-32 32v128.1c-16.7 1-30 14.9-30 31.9v131.7a177 177 0 0014.4 70.4c4.3 10.2 9.6 19.8 15.6 28.9v345c0 17.6 14.3 32 32 32h676c17.7 0 32-14.3 32-32V535a175 175 0 0015.6-28.9c9.5-22.3 14.4-46 14.4-70.4V304c0-17-13.3-30.9-30-31.9zM214 184h596v88H214v-88zm362 656.1H448V736h128v104.1zm234 0H640V704c0-17.7-14.3-32-32-32H416c-17.7 0-32 14.3-32 32v136.1H214V597.9c2.9 1.4 5.9 2.8 9 4 22.3 9.4 46 14.1 70.4 14.1s48-4.7 70.4-14.1c13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0038.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0038.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 3-1.3 6-2.6 9-4v242.2zm30-404.4c0 59.8-49 108.3-109.3 108.3-40.8 0-76.4-22.1-95.2-54.9-2.9-5-8.1-8.1-13.9-8.1h-.6c-5.7 0-11 3.1-13.9 8.1A109.24 109.24 0 01512 544c-40.7 0-76.2-22-95-54.7-3-5.1-8.4-8.3-14.3-8.3s-11.4 3.2-14.3 8.3a109.63 109.63 0 01-95.1 54.7C233 544 184 495.5 184 435.7v-91.2c0-.3.2-.5.5-.5h655c.3 0 .5.2.5.5v91.2z"}}]},name:"shop",theme:"outlined"},a=n(55015);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=r.forwardRef((e,t)=>r.createElement(a.Z,c({},e,{ref:t,icon:o})))},52539:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2265),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 312H696v-16c0-101.6-82.4-184-184-184s-184 82.4-184 184v16H192c-17.7 0-32 14.3-32 32v536c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V344c0-17.7-14.3-32-32-32zm-432-16c0-61.9 50.1-112 112-112s112 50.1 112 112v16H400v-16zm392 544H232V384h96v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h224v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h96v456z"}}]},name:"shopping",theme:"outlined"},a=n(55015);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=r.forwardRef((e,t)=>r.createElement(a.Z,c({},e,{ref:t,icon:o})))},51646:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});var r=n(2265);let o=()=>r.useReducer(e=>e+1,0)},6543:function(e,t,n){"use strict";n.d(t,{c4:function(){return a},m9:function(){return s}});var r=n(2265),o=n(84560);let a=["xxl","xl","lg","md","sm","xs"],c=e=>({xs:"(max-width: ".concat(e.screenXSMax,"px)"),sm:"(min-width: ".concat(e.screenSM,"px)"),md:"(min-width: ".concat(e.screenMD,"px)"),lg:"(min-width: ".concat(e.screenLG,"px)"),xl:"(min-width: ".concat(e.screenXL,"px)"),xxl:"(min-width: ".concat(e.screenXXL,"px)")}),i=e=>{let t=[].concat(a).reverse();return t.forEach((n,r)=>{let o=n.toUpperCase(),a="screen".concat(o,"Min"),c="screen".concat(o);if(!(e[a]<=e[c]))throw Error("".concat(a,"<=").concat(c," fails : !(").concat(e[a],"<=").concat(e[c],")"));if(r<t.length-1){let n="screen".concat(o,"Max");if(!(e[c]<=e[n]))throw Error("".concat(c,"<=").concat(n," fails : !(").concat(e[c],"<=").concat(e[n],")"));let a=t[r+1].toUpperCase(),i="screen".concat(a,"Min");if(!(e[n]<=e[i]))throw Error("".concat(n,"<=").concat(i," fails : !(").concat(e[n],"<=").concat(e[i],")"))}}),e},s=(e,t)=>{if(t){for(let n of a)if(e[n]&&(null==t?void 0:t[n])!==void 0)return t[n]}};t.ZP=()=>{let[,e]=(0,o.ZP)(),t=c(i(e));return r.useMemo(()=>{let e=new Map,n=-1,r={};return{responsiveMap:t,matchHandlers:{},dispatch:t=>(r=t,e.forEach(e=>e(r)),e.size>=1),subscribe(t){return e.size||this.register(),n+=1,e.set(n,t),t(r),n},unsubscribe(t){e.delete(t),e.size||this.unregister()},register(){Object.entries(t).forEach(e=>{let[t,n]=e,o=e=>{let{matches:n}=e;this.dispatch({...r,[t]:n})},a=window.matchMedia(n);"function"==typeof(null==a?void 0:a.addEventListener)&&a.addEventListener("change",o),this.matchHandlers[n]={mql:a,listener:o},o(a)})},unregister(){Object.values(t).forEach(e=>{var t;let n=this.matchHandlers[e];"function"==typeof(null==n?void 0:null===(t=n.mql)||void 0===t?void 0:t.removeEventListener)&&n.mql.removeEventListener("change",null==n?void 0:n.listener)}),e.clear()}}},[t])}},28617:function(e,t,n){"use strict";var r=n(2265),o=n(90891),a=n(51646),c=n(6543);t.Z=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,r.useRef)(t),[,i]=(0,a.N)(),s=(0,c.ZP)();return(0,o.Z)(()=>{let t=s.subscribe(t=>{n.current=t,e&&i()});return()=>s.unsubscribe(t)},[]),n.current}},88560:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(57437),o=n(2265),a=n(99376),c=n(82646),i=n(47451),s=n(69410),l=n(62376),u=n(52539),d=n(67605),h=n(44225),f=n(11777),m=n(25369),p=n(29827),v=n(11713),b=n(46252),g=n(53286),y=n(3369);let{Title:S,Text:w}=c.default;function j(){var e,t,n;let c=(0,a.useRouter)(),{showLoading:j,hideLoading:E}=(0,y.x)(),{stats:_,isLoading:x}=function(){let{socket:e}=(0,o.useContext)(b.J),t=(0,p.NL)(),{data:n,error:r,isLoading:a}=(0,v.a)({queryKey:["channelStats"],queryFn:async()=>await g.x.getStats(),staleTime:2e3,refetchOnReconnect:!0});return(0,o.useEffect)(()=>{if(!e)return;let n=()=>{t.invalidateQueries({queryKey:["channelStats"]})};return e.on("orders:create",n),e.on("orders:update",n),e.on("orders:delete",n),()=>{e.off("orders:create",n),e.off("orders:update",n),e.off("orders:delete",n)}},[e,t]),{stats:n,isLoading:a,isError:r}}();(0,o.useEffect)(()=>{c.prefetch("/pos/channels/dine-in"),c.prefetch("/pos/channels/takeaway"),c.prefetch("/pos/channels/delivery")},[c]),o.useEffect(()=>{x?j():E()},[x,j,E]);let T=[{id:"dine-in",title:"หน้าร้าน",subtitle:"Dine In",icon:l.Z,colors:h.hS.dineIn,path:"/pos/channels/dine-in",count:null!==(e=null==_?void 0:_.dineIn)&&void 0!==e?e:0},{id:"takeaway",title:"สั่งกลับบ้าน",subtitle:"Take Away",icon:u.Z,colors:h.hS.takeaway,path:"/pos/channels/takeaway",count:null!==(t=null==_?void 0:_.takeaway)&&void 0!==t?t:0},{id:"delivery",title:"เดลิเวอรี่",subtitle:"Delivery",icon:d.Z,colors:h.hS.delivery,path:"/pos/channels/delivery",count:null!==(n=null==_?void 0:_.delivery)&&void 0!==n?n:0}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.c,{}),(0,r.jsxs)("div",{style:f.j.channelsContainer,children:[(0,r.jsxs)("div",{style:f.j.channelsHeader,className:"channels-header-mobile",children:[(0,r.jsx)("div",{className:"header-pattern"}),(0,r.jsx)("div",{className:"header-circle circle-1"}),(0,r.jsx)("div",{className:"header-circle circle-2"}),(0,r.jsxs)("div",{style:f.j.channelsHeaderContent,children:[(0,r.jsx)("div",{className:"header-icon-animate",children:(0,r.jsx)(l.Z,{style:f.j.channelsHeaderIcon,className:"channels-header-icon-mobile"})}),(0,r.jsx)(S,{level:1,style:f.j.channelsHeaderTitle,className:"channels-header-title-mobile",children:"เลือกช่องทางขาย"}),(0,r.jsx)(w,{style:f.j.channelsHeaderSubtitle,className:"channels-header-subtitle-mobile",children:"Select Sales Channel"})]})]}),(0,r.jsx)("div",{style:f.j.channelsCardsContainer,className:"channels-cards-container-mobile",children:(0,r.jsx)(i.Z,{gutter:[24,24],justify:"center",children:T.map((e,t)=>{var n;let o=e.icon,a=e.count>0;return(0,r.jsx)(s.Z,{xs:24,sm:12,md:8,children:(0,r.jsx)("div",{className:"channel-card-hover fade-in-up card-delay-".concat(t+1),style:f.j.channelCard,onClick:()=>c.push(e.path),children:(0,r.jsxs)("div",{style:f.j.channelCardInner,className:"channels-card-inner-mobile",children:[(0,r.jsxs)("div",{className:"icon-wrapper channels-icon-wrapper-mobile",style:{...f.j.channelIconWrapper,background:e.colors.light,border:"2px solid ".concat(e.colors.border)},children:[(0,r.jsx)("div",{className:"decorative-glow",style:{...f.j.channelDecorativeGlow,background:e.colors.gradient}}),(0,r.jsx)(o,{className:"channels-channel-icon-mobile",style:{...f.j.channelIcon,color:e.colors.primary}})]}),(0,r.jsx)(S,{level:2,style:f.j.channelCardTitle,className:"channels-card-title-mobile",children:e.title}),(0,r.jsx)(w,{style:f.j.channelCardSubtitle,className:"channels-card-subtitle-mobile",children:e.subtitle}),(0,r.jsxs)("div",{className:"channels-stats-badge-mobile",style:{...f.j.channelStatsBadge,background:a?e.colors.light:"#fafafa",color:a?e.colors.primary:"#8c8c8c",border:"1px solid ".concat(a?e.colors.border:"#f0f0f0")},children:[a&&(0,r.jsx)("span",{className:"pulse-animation",style:{...f.j.channelActiveIndicator,background:e.colors.primary}}),(0,r.jsx)("span",{children:0===(n=e.count)?"ว่าง":1===n?"1 ออเดอร์":"".concat(n," ออเดอร์")})]})]})})},e.id)})})})]})]})}},71567:function(e,t,n){"use strict";n.d(t,{q:function(){return o},v:function(){return r}});let r="/api",o={AUTH:{LOGIN:"/auth/login",ME:"/auth/me",CSRF:"/csrf"},POS:{PRODUCTS:"/pos/products",ORDERS:"/pos/orders",TABLES:"/pos/tables",DISCOUNTS:"/pos/discounts",DELIVERY:"/pos/delivery",PAYMENT_METHODS:"/pos/paymentMethod",PAYMENTS:"/pos/payments",CATEGORY:"/pos/category",SHIFTS:{BASE:"/pos/shifts",CURRENT:"/pos/shifts/current",OPEN:"/pos/shifts/open",CLOSE:"/pos/shifts/close"},DASHBOARD:{SALES:"/pos/dashboard/sales",TOP_ITEMS:"/pos/dashboard/top-items"},CHANNELS:{STATS:"/pos/orders/stats"},SHOP_PROFILE:"/pos/shopProfile",SALES_ORDER_ITEMS:"/pos/salesOrderItem",SALES_ORDER_DETAILS:"/pos/salesOrderDetail",PRODUCTS_UNIT:"/pos/productsUnit",PAYMENT_DETAILS:"/pos/paymentDetails",BRANCH:"/branches"}}},14362:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return d},a:function(){return h}});var r=n(57437),o=n(2265),a=n(99376),c=n(5447),i=n(84859),s=n(48651),l=n(3369);let u=(0,o.createContext)(void 0),d=e=>{let{children:t}=e,[n,d]=(0,o.useState)(null),[h,f]=(0,o.useState)(!0),m=(0,a.useRouter)(),p=(0,a.usePathname)(),v=async()=>{try{let e="";e=localStorage.getItem("token_ws")||"";let t=await c.O.getMe(e);d(t)}catch(e){d(null)}finally{f(!1)}};(0,o.useEffect)(()=>{v()},[]);let{showLoading:b,hideLoading:g}=(0,l.x)();(0,o.useEffect)(()=>{h||n||"/login"===p||m.push("/login")},[n,h,p,m]);let y=async e=>{try{b("กำลังเข้าสู่ระบบ...");let t=await c.O.getCsrfToken(),{token:n,...r}=await c.O.login(e,t);n&&localStorage.setItem("token_ws",n),d(r),m.push("/")}catch(e){throw e}finally{g()}},S=async()=>{try{b("กำลังออกจากระบบ...");let e="";e=localStorage.getItem("token_ws")||"",await c.O.logout(e),localStorage.removeItem("token_ws"),i.x.clearQueue(),d(null),m.push("/login")}catch(e){console.error("Logout error:",e)}finally{g()}};return h?(0,r.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-white",children:(0,r.jsx)(s.Z,{size:"large"})}):n||"/login"===p?(0,r.jsx)(u.Provider,{value:{user:n,loading:h,login:y,logout:S,checkAuth:v},children:t}):null},h=()=>{let e=(0,o.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},46252:function(e,t,n){"use strict";n.d(t,{J:function(){return i},SocketProvider:function(){return s}});var r=n(57437),o=n(2265),a=n(68680),c=n(14362);let i=(0,o.createContext)({socket:null,isConnected:!1}),s=e=>{let{children:t}=e,[n,s]=(0,o.useState)(null),[l,u]=(0,o.useState)(!1),{user:d}=(0,c.a)();return(0,o.useEffect)(()=>{if(!d){n&&(n.disconnect(),s(null),u(!1));return}let e=localStorage.getItem("token_ws"),t=(0,a.io)("http://localhost:3000",{transports:["websocket"],withCredentials:!0,auth:e?{token:e}:void 0});return t.on("connect",()=>{console.log("Socket Connected:",t.id),u(!0)}),t.on("disconnect",()=>{console.log("Socket Disconnected"),u(!1)}),s(t),()=>{t.disconnect()}},[d]),(0,r.jsx)(i.Provider,{value:{socket:n,isConnected:l},children:t})}},3369:function(e,t,n){"use strict";n.d(t,{GlobalLoadingProvider:function(){return s},O:function(){return u},x:function(){return l}});var r=n(57437),o=n(2265),a=n(48651);let c=(0,o.createContext)(void 0),i=(0,o.createContext)(void 0),s=e=>{let{children:t}=e,[n,s]=(0,o.useState)({}),[l,u]=(0,o.useState)(void 0),d=(0,o.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";s(e=>({...e,[t]:(e[t]||0)+1})),e&&u(e)},[]),h=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";s(t=>{if(!t[e])return t;let n={...t};return n[e]-=1,n[e]<=0&&delete n[e],n})},[]),f=(0,o.useCallback)(()=>{s({}),u(void 0)},[]),m=Object.keys(n).length>0,p=(0,o.useMemo)(()=>({isLoading:m,loadingMessage:l}),[m,l]),v=(0,o.useMemo)(()=>({showLoading:d,hideLoading:h,resetLoading:f}),[d,h,f]);return(0,r.jsx)(i.Provider,{value:v,children:(0,r.jsxs)(c.Provider,{value:p,children:[t,m&&(0,r.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-auto bg-black/10 backdrop-blur-[1px]",children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,background:"rgba(255, 255, 255, 0.9)",padding:"20px 40px",borderRadius:12,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[(0,r.jsx)(a.Z,{size:"large"}),l&&(0,r.jsx)("div",{style:{fontSize:14,color:"#1f1f1f",fontWeight:500},children:l})]})})]})})};function l(){let e=(0,o.useContext)(c),t=(0,o.useContext)(i);if(!e||!t)throw Error("useGlobalLoading must be used within a GlobalLoadingProvider");return(0,o.useMemo)(()=>({...e,...t}),[e,t])}function u(){let e=(0,o.useContext)(i);if(!e)throw Error("useGlobalLoadingDispatch must be used within a GlobalLoadingProvider");return e}},2913:function(e,t,n){"use strict";function r(e,t){return({GET:"".concat(o.API_BASE_URL).concat(t),POST:"".concat(o.API_BASE_URL).concat(t),PUT:"".concat(o.API_BASE_URL).concat(t),DELETE:"".concat(o.API_BASE_URL).concat(t),PATCH:"".concat(o.API_BASE_URL).concat(t)})[e]}n.d(t,{b:function(){return r}});let o={get API_BASE_URL(){return"/api"}}},5447:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});var r=n(71567),o=n(2913);let a={login:async(e,t,n)=>{try{let a=(0,o.b)("POST",r.q.AUTH.LOGIN),c={"Content-Type":"application/json"};t&&(c["X-CSRF-Token"]=t),n&&(c.Cookie=n);let i=await fetch(a,{method:"POST",headers:c,credentials:"include",body:JSON.stringify(e)});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.message||e.detail||"เข้าสู่ระบบไม่สำเร็จ")}let s=await i.json();return{...s.user,token:s.token}}catch(e){throw Error(e.message||"เข้าสู่ระบบไม่สำเร็จ")}},logout:async(e,t,n)=>{try{let r=(0,o.b)("POST","/auth/logout"),a={"Content-Type":"application/json"};e&&(a.Authorization="Bearer ".concat(e)),t&&(a["X-CSRF-Token"]=t),n&&(a.Cookie=n),await fetch(r,{method:"POST",headers:a,credentials:"include"})}catch(e){console.error("Logout failed",e)}},getMe:async e=>{try{let t=(0,o.b)("GET",r.q.AUTH.ME),n=await fetch(t,{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},credentials:"include",cache:"no-store"});if(!n.ok)throw Error("Unauthorized");return await n.json()}catch(e){throw e}},async getCsrfToken(){try{let e=await fetch("".concat(r.v).concat(r.q.AUTH.CSRF),{credentials:"include"});if(!e.ok)return"";return(await e.json()).csrfToken}catch(e){return console.error("Failed to fetch CSRF token",e),""}}}},84859:function(e,t,n){"use strict";n.d(t,{M:function(){return i},x:function(){return c}});let r="pos_offline_queue",o=()=>{let e=localStorage.getItem(r);return e?JSON.parse(e):[]},a=e=>{localStorage.setItem(r,JSON.stringify(e))},c={addToQueue:(e,t)=>{let n=o(),r={id:"offline-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:e,payload:t,timestamp:Date.now(),retryCount:0};return a([...n,r]),r},getQueue:()=>o(),removeFromQueue:e=>{a(o().filter(t=>t.id!==e))},incrementRetry:(e,t)=>{a(o().map(n=>n.id===e?{...n,retryCount:n.retryCount+1,lastError:t}:n))},clearQueue:()=>{localStorage.removeItem(r)},pruneExceeded:()=>{a(o().filter(e=>e.retryCount<=5))}},i={maxRetry:5,backoff:e=>Math.min(3e4,2e3*e)}},53286:function(e,t,n){"use strict";n.d(t,{x:function(){return y}});var r=n(20019),o=n(2913),a=n(71567),c=n(32446);let i=r.Ryn({id:r.Z_8(),username:r.Z_8()}).partial().nullable(),s=r.Ryn({id:r.Z_8(),display_name:r.Z_8()}).partial().nullable(),l=r.Ryn({id:r.Z_8(),display_name:r.Z_8(),img_url:r.Z_8().nullable(),price:r.oQ2.number(),category:s.optional()}).partial().nullable(),u=r.Ryn({id:r.Z_8().optional(),detail_name:r.Z_8(),extra_price:r.oQ2.number()}).partial(),d=r.Ryn({id:r.Z_8(),order_id:r.Z_8(),product_id:r.Z_8(),product_name:r.Z_8().optional(),quantity:r.oQ2.number(),price:r.oQ2.number(),total_price:r.oQ2.number(),discount_amount:r.oQ2.number().optional().default(0),notes:r.Z_8().nullable().optional(),status:r.jbo(c.i).optional(),product:l.optional(),details:r.IXX(u).optional()}),h=r.Ryn({id:r.Z_8(),order_no:r.Z_8(),order_type:r.jbo(c.m),table_id:r.Z_8().nullable().optional(),delivery_id:r.Z_8().nullable().optional(),delivery_code:r.Z_8().nullable().optional(),sub_total:r.oQ2.number(),discount_id:r.Z_8().nullable().optional(),discount_amount:r.oQ2.number(),vat:r.oQ2.number(),total_amount:r.oQ2.number(),received_amount:r.oQ2.number(),change_amount:r.oQ2.number(),status:r.jbo(c.i),created_by_id:r.Z_8().nullable().optional(),create_date:r.Z_8(),update_date:r.Z_8(),items:r.IXX(d).optional(),created_by:i.optional(),table:r.YjB().optional(),delivery:r.YjB().optional(),discount:r.YjB().optional(),payments:r.IXX(r.YjB()).optional()}),f=r.Ryn({data:r.IXX(h),total:r.oQ2.number(),page:r.oQ2.number(),last_page:r.oQ2.number().optional()}),m=r.Ryn({table_name:r.Z_8().nullable().optional(),delivery_name:r.Z_8().nullable().optional()}).partial().nullable(),p=r.Ryn({id:r.Z_8(),order_no:r.Z_8(),order_type:r.jbo(c.m),status:r.jbo(c.i),create_date:r.Z_8(),total_amount:r.oQ2.number(),delivery_code:r.Z_8().nullable().optional(),table_id:r.Z_8().nullable().optional(),delivery_id:r.Z_8().nullable().optional(),table:m.optional(),delivery:m.optional(),items_summary:r.IMB(r.Z_8(),r.oQ2.number()).optional(),items_count:r.oQ2.number().optional()}),v=r.Ryn({data:r.IXX(p),total:r.oQ2.number(),page:r.oQ2.number(),last_page:r.oQ2.number().optional()}),b=a.q.POS.ORDERS,g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",n={};return t&&(n["Content-Type"]=t),e&&(n.Cookie=e),n},y={getAll:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,a=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,s=new URLSearchParams({page:t.toString(),limit:n.toString(),...a&&{status:a},...c&&{type:c},...i&&{q:i}}),l="".concat(b,"?").concat(s.toString()),u=(0,o.b)("GET",l),d=g(e,""),h=await fetch(u,{cache:"no-store",headers:d,credentials:"include"});if(!h.ok){let e=await h.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let m=await h.json();try{return f.parse(m)}catch(e){throw console.error("Zod Validation Error in ordersService.getAll:",e),e instanceof r.jmq&&console.error("Zod Issues:",e.issues),e}},getAllSummary:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,a=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,s=new URLSearchParams({page:t.toString(),limit:n.toString(),...a&&{status:a},...c&&{type:c},...i&&{q:i}}),l="".concat(b,"/summary?").concat(s.toString()),u=(0,o.b)("GET",l),d=g(e,""),h=await fetch(u,{cache:"no-store",headers:d,credentials:"include"});if(!h.ok){let e=await h.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let f=await h.json();try{return v.parse(f)}catch(e){throw console.error("Zod Validation Error in ordersService.getAllSummary:",e),e instanceof r.jmq&&console.error("Zod Issues:",e.issues),e}},getStats:async e=>{let t=(0,o.b)("GET",a.q.POS.CHANNELS.STATS),n=g(e,""),r=await fetch(t,{cache:"no-store",headers:n,credentials:"include"});if(!r.ok){let e=await r.text();console.error("Order Stats Backend Error:",e);let t=await JSON.parse(e).catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถดึงข้อมูลสถิติได้")}return await r.json()},getById:async(e,t)=>{let n=(0,o.b)("GET","".concat(b,"/").concat(e)),a=g(t,""),c=await fetch(n,{cache:"no-store",headers:a,credentials:"include"});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let i=await c.json();try{return h.parse(i)}catch(e){throw console.error("Zod Validation Error in ordersService.getById:",e),e instanceof r.jmq&&console.error("Zod Issues:",e.issues),e}},create:async(e,t,n)=>{let r=(0,o.b)("POST","".concat(b)),a=g(t);n&&(a["X-CSRF-Token"]=n);let c=await fetch(r,{method:"POST",headers:a,credentials:"include",body:JSON.stringify(e)});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถสร้างออเดอร์ได้")}return c.json()},update:async(e,t,n,r)=>{let a=(0,o.b)("PUT","".concat(b,"/").concat(e)),c=g(n);r&&(c["X-CSRF-Token"]=r);let i=await fetch(a,{method:"PUT",headers:c,credentials:"include",body:JSON.stringify(t)});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถแก้ไขออเดอร์ได้")}return i.json()},delete:async(e,t,n)=>{let r=(0,o.b)("DELETE","".concat(b,"/").concat(e)),a=g(t,"");n&&(a["X-CSRF-Token"]=n);let c=await fetch(r,{method:"DELETE",headers:a,credentials:"include"});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถลบออเดอร์ได้")}},updateItemStatus:async(e,t,n,r)=>{let a=(0,o.b)("PATCH","".concat(b,"/items/").concat(e,"/status")),c=g(n);r&&(c["X-CSRF-Token"]=r);let i=await fetch(a,{method:"PATCH",headers:c,credentials:"include",body:JSON.stringify({status:t})});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถอัปเดตสถานะรายการได้")}},getItems:async(e,t)=>{let n=(0,o.b)("GET","".concat(b,"/items").concat(e?"?status=".concat(e):"")),r=g(t,""),a=await fetch(n,{cache:"no-store",headers:r,credentials:"include"});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลรายการได้")}return a.json()},addItem:async(e,t,n,r)=>{let a=(0,o.b)("POST","".concat(b,"/").concat(e,"/items")),c=g(n);r&&(c["X-CSRF-Token"]=r);let i=await fetch(a,{method:"POST",headers:c,credentials:"include",body:JSON.stringify(t)});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถเพิ่มรายการได้")}return i.json()},updateItem:async(e,t,n,r)=>{let a=(0,o.b)("PUT","".concat(b,"/items/").concat(e)),c=g(n);r&&(c["X-CSRF-Token"]=r);let i=await fetch(a,{method:"PUT",headers:c,credentials:"include",body:JSON.stringify(t)});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถแก้ไขรายการได้")}return i.json()},deleteItem:async(e,t,n)=>{let r=(0,o.b)("DELETE","".concat(b,"/items/").concat(e)),a=g(t,"");n&&(a["X-CSRF-Token"]=n);let c=await fetch(r,{method:"DELETE",headers:a,credentials:"include"});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถลบรายการได้")}return c.json()},updateStatus:async(e,t,n)=>{let r={"Content-Type":"application/json"};n&&(r["X-CSRF-Token"]=n);let a=(0,o.b)("PUT","".concat(b,"/").concat(e));if(!(await fetch(a,{method:"PUT",headers:r,body:JSON.stringify({status:t}),credentials:"include"})).ok)throw Error("Failed to update status")}}}},function(e){e.O(0,[5015,7717,7698,3211,7993,8651,2646,1721,19,9763,1713,4221,4103,2971,2117,1744],function(){return e(e.s=93106)}),_N_E=e.O()}]);