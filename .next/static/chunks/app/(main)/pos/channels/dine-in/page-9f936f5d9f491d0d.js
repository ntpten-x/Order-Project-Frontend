(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4290],{83449:function(e,a,t){Promise.resolve().then(t.bind(t,12538))},12538:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return P}});var r=t(57437),n=t(29),s=t.n(n),o=t(2265),i=t(99376),l=t(24783),c=t(80009),m=t(47451),f=t(69410),p=t(50742),b=t(62376),d=t(8881),x=t(83669),u=t(81770),y=t(25193),h=t(37410),k=t(20148),j=t(2786),g=t(29827),w=t(11713),v=t(46252),z=t(66290),N=t(44225),S=t(11777),Z=t(25369),_=t(61414),C=t(3369),E=t(252);function P(){let e=(0,i.useRouter)(),{showLoading:a,hideLoading:t}=(0,C.x)(),{tables:n,isLoading:P}=function(){let{socket:e}=(0,o.useContext)(v.J),a=(0,g.NL)(),{data:t,error:r,isLoading:n,refetch:s}=(0,w.a)({queryKey:["tables"],queryFn:async()=>(await z.$.getAll()).data,staleTime:2e3,refetchOnReconnect:!0});return(0,o.useEffect)(()=>{if(!e)return;let t=()=>{a.invalidateQueries({queryKey:["tables"]})};return e.on("tables:create",t),e.on("tables:update",t),e.on("tables:delete",t),e.on("orders:create",t),e.on("orders:update",t),e.on("orders:delete",t),()=>{e.off("tables:create",t),e.off("tables:update",t),e.off("tables:delete",t),e.off("orders:create",t),e.off("orders:update",t),e.off("orders:delete",t)}},[e,a]),{tables:t||[],isLoading:n,isError:r,mutate:s}}();o.useEffect(()=>{P?a():t()},[P,a,t]);let F=(0,o.useMemo)(()=>(0,E.W9)(n),[n]),T=(0,o.useMemo)(()=>(0,E.Th)(n),[n]),O=(0,o.useMemo)(()=>(0,E.Tf)(T),[T]),A=(a,t)=>{if(!t){let t=(0,_.Wl)(a);e.push(t)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z.c,{}),(0,r.jsx)(s(),{id:S.N5.__hash,children:S.N5}),(0,r.jsx)(s(),{id:"a961af50cb45fe5b",children:".table-card-hover{-webkit-transition:all.3s cubic-bezier(.4,0,.2,1)!important;-moz-transition:all.3s cubic-bezier(.4,0,.2,1)!important;-o-transition:all.3s cubic-bezier(.4,0,.2,1)!important;transition:all.3s cubic-bezier(.4,0,.2,1)!important}.table-card-hover:hover{-webkit-transform:translatey(-6px)!important;-moz-transform:translatey(-6px)!important;-ms-transform:translatey(-6px)!important;-o-transform:translatey(-6px)!important;transform:translatey(-6px)!important;-webkit-box-shadow:0 16px 32px rgba(0,0,0,.08)!important;-moz-box-shadow:0 16px 32px rgba(0,0,0,.08)!important;box-shadow:0 16px 32px rgba(0,0,0,.08)!important}.table-card-hover:hover .table-icon{-webkit-transform:scale(1.1)!important;-moz-transform:scale(1.1)!important;-ms-transform:scale(1.1)!important;-o-transform:scale(1.1)!important;transform:scale(1.1)!important}.table-card-hover:active{-webkit-transform:translatey(-2px)scale(.98)!important;-moz-transform:translatey(-2px)scale(.98)!important;-ms-transform:translatey(-2px)scale(.98)!important;-o-transform:translatey(-2px)scale(.98)!important;transform:translatey(-2px)scale(.98)!important}@media(hover:none){.table-card-hover:active{-webkit-transform:scale(.97)!important;-moz-transform:scale(.97)!important;-ms-transform:scale(.97)!important;-o-transform:scale(.97)!important;transform:scale(.97)!important}.table-card-hover:hover{-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important}}.table-icon-wrapper{width:64px;height:64px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-bottom:12px;position:relative;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease}.pulse-soft{-webkit-animation:pulseSoft 2s ease-in-out infinite;-moz-animation:pulseSoft 2s ease-in-out infinite;-o-animation:pulseSoft 2s ease-in-out infinite;animation:pulseSoft 2s ease-in-out infinite}@-webkit-keyframes pulseSoft{0%,100%{-webkit-transform:scale(1);transform:scale(1);opacity:1}50%{-webkit-transform:scale(1.05);transform:scale(1.05);opacity:.9}}@-moz-keyframes pulseSoft{0%,100%{-moz-transform:scale(1);transform:scale(1);opacity:1}50%{-moz-transform:scale(1.05);transform:scale(1.05);opacity:.9}}@-o-keyframes pulseSoft{0%,100%{-o-transform:scale(1);transform:scale(1);opacity:1}50%{-o-transform:scale(1.05);transform:scale(1.05);opacity:.9}}@keyframes pulseSoft{0%,100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1);opacity:1}50%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05);opacity:.9}}.back-button-hover:hover{background:rgba(255,255,255,.28)!important;-webkit-transform:translatex(-2px);-moz-transform:translatex(-2px);-ms-transform:translatex(-2px);-o-transform:translatex(-2px);transform:translatex(-2px)}.show-on-mobile{display:none!important}@media(max-width:768px){.show-on-mobile{display:inline!important}}"}),(0,r.jsxs)("div",{style:N.Np.container,className:"jsx-a961af50cb45fe5b",children:[(0,r.jsx)(k.Z,{title:"หน้าร้าน",subtitle:"เลือกโต๊ะ",onBack:()=>e.push("/pos/channels"),icon:(0,r.jsx)(b.Z,{style:{fontSize:20}}),actions:(0,r.jsxs)(l.Z,{size:8,wrap:!0,children:[(0,r.jsxs)(c.Z,{color:"success",children:["ว่าง ",F.available]}),(0,r.jsxs)(c.Z,{color:"warning",children:["ไม่ว่าง ",F.occupied]})]})}),(0,r.jsx)(y.Z,{children:(0,r.jsx)(h.Z,{title:"โต๊ะ",children:n.length>0?(0,r.jsx)(m.Z,{gutter:[16,16],children:O.map((e,a)=>{let t=(0,E.Oi)(e),n=N.ax[t],s="Available"===e.status,o=!e.is_active;return(0,r.jsx)(f.Z,{xs:12,sm:8,md:6,lg:6,xl:4,children:(0,r.jsxs)("article",{style:{...S.yy.channelPageCard,background:o?"#F8FAFC":n.light,border:"2px solid ".concat(n.border),opacity:o?.5:1,cursor:o?"not-allowed":"pointer"},onClick:()=>A(e,o),onKeyDown:a=>{o||"Enter"!==a.key&&" "!==a.key||(a.preventDefault(),A(e,o))},role:"button",tabIndex:o?-1:0,"aria-label":"โต๊ะ ".concat(e.table_name," - ").concat(o?"ปิดใช้งาน":s?"ว่าง":"ไม่ว่าง"),"aria-disabled":o,className:"jsx-a961af50cb45fe5b "+"table-card-hover dine-in-table-card dine-in-table-card-mobile table-card-animate table-card-delay-".concat(a%6+1),children:[(0,r.jsx)("div",{style:{...S.yy.channelPageCardGradientOverlay,background:n.gradient},className:"jsx-a961af50cb45fe5b"}),(0,r.jsxs)("div",{style:S.yy.channelPageCardInner,className:"jsx-a961af50cb45fe5b",children:[(0,r.jsx)("div",{style:{background:"".concat(n.primary,"15"),border:"2px solid ".concat(n.primary,"30")},className:"jsx-a961af50cb45fe5b table-icon-wrapper",children:o?(0,r.jsx)(d.Z,{className:"table-icon dine-in-table-icon-mobile",style:{fontSize:32,color:n.primary,transition:"transform 0.3s ease"}}):s?(0,r.jsx)(x.Z,{className:"table-icon dine-in-table-icon-mobile",style:{fontSize:32,color:n.primary,transition:"transform 0.3s ease"}}):(0,r.jsx)(u.Z,{className:"table-icon pulse-soft dine-in-table-icon-mobile",style:{fontSize:32,color:n.primary,transition:"transform 0.3s ease"}})}),(0,r.jsx)("div",{style:{...S.yy.channelPageCardMainText,fontSize:24,color:n.text||n.primary},className:"jsx-a961af50cb45fe5b dine-in-table-name-mobile",children:e.table_name}),(0,r.jsxs)("div",{style:{marginTop:12,display:"flex",flexDirection:"column",gap:6,alignItems:"center"},className:"jsx-a961af50cb45fe5b",children:[!o&&(0,r.jsx)("div",{style:{fontSize:13,fontWeight:700,color:s?N.ax.available.primary:"#EF4444",textTransform:"uppercase",letterSpacing:"0.5px"},className:"jsx-a961af50cb45fe5b",children:s?"● ว่าง":"● ไม่ว่าง"}),(0,r.jsx)("div",{style:{...S.yy.channelPageCardStatusBadge,background:o?"#94A3B8":s?"rgba(16, 185, 129, 0.1)":n.primary,color:o?"#fff":s?N.ax.available.primary:"#fff",border:s?"1px solid ".concat(N.ax.available.border):"none",fontSize:12,padding:"6px 14px"},className:"jsx-a961af50cb45fe5b",children:o?"ปิดใช้งาน":s?"รอรับออเดอร์":e.active_order_status?(0,E.NE)(e.active_order_status):"กำลังใช้งาน"})]})]})]})},e.id)})}):(0,r.jsx)(j.Z,{title:"ยังไม่มีข้อมูลโต๊ะ",description:"กรุณาเพิ่มข้อมูลโต๊ะก่อนเริ่มการขาย",action:(0,r.jsx)(p.ZP,{type:"primary",size:"large",icon:(0,r.jsx)(b.Z,{}),onClick:()=>e.push("/pos/tables"),children:"ไปหน้าจัดการโต๊ะ"})})})})]})]})}}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=83449)}),_N_E=e.O()}]);