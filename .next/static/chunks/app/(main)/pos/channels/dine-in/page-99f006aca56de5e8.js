(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4290],{83449:function(e,a,t){Promise.resolve().then(t.bind(t,12538))},12538:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return T}});var s=t(57437),r=t(29),n=t.n(r),i=t(2265),o=t(99376),l=t(19683),c=t(47451),m=t(69410),b=t(85180),d=t(50742),f=t(17588),p=t(62376),x=t(8881),y=t(83669),h=t(81770),u=t(29827),j=t(11713),g=t(46252),v=t(66290),k=t(44225),N=t(11777),w=t(25369),z=t(61414),S=t(3369),_=t(252);let{Title:E,Text:C}=l.default;function T(){let e=(0,o.useRouter)(),{showLoading:a,hideLoading:t}=(0,S.x)(),{tables:r,isLoading:l}=function(){let{socket:e}=(0,i.useContext)(g.J),a=(0,u.NL)(),{data:t,error:s,isLoading:r,refetch:n}=(0,j.a)({queryKey:["tables"],queryFn:async()=>(await v.$.getAll()).data,staleTime:2e3,refetchOnReconnect:!0});return(0,i.useEffect)(()=>{if(!e)return;let t=()=>{a.invalidateQueries({queryKey:["tables"]})};return e.on("tables:create",t),e.on("tables:update",t),e.on("tables:delete",t),e.on("orders:create",t),e.on("orders:update",t),e.on("orders:delete",t),()=>{e.off("tables:create",t),e.off("tables:update",t),e.off("tables:delete",t),e.off("orders:create",t),e.off("orders:update",t),e.off("orders:delete",t)}},[e,a]),{tables:t||[],isLoading:r,isError:s,mutate:n}}();i.useEffect(()=>{l?a():t()},[l,a,t]);let T=(0,i.useMemo)(()=>(0,_.W9)(r),[r]),I=(0,i.useMemo)(()=>(0,_.Th)(r),[r]),Z=(0,i.useMemo)(()=>(0,_.Tf)(I),[I]),P=(a,t)=>{if(!t){let t=(0,z.Wl)(a);e.push(t)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.c,{}),(0,s.jsx)(n(),{id:N.N5.__hash,children:N.N5}),(0,s.jsx)(n(),{id:"a961af50cb45fe5b",children:".table-card-hover{-webkit-transition:all.3s cubic-bezier(.4,0,.2,1)!important;-moz-transition:all.3s cubic-bezier(.4,0,.2,1)!important;-o-transition:all.3s cubic-bezier(.4,0,.2,1)!important;transition:all.3s cubic-bezier(.4,0,.2,1)!important}.table-card-hover:hover{-webkit-transform:translatey(-6px)!important;-moz-transform:translatey(-6px)!important;-ms-transform:translatey(-6px)!important;-o-transform:translatey(-6px)!important;transform:translatey(-6px)!important;-webkit-box-shadow:0 16px 32px rgba(0,0,0,.08)!important;-moz-box-shadow:0 16px 32px rgba(0,0,0,.08)!important;box-shadow:0 16px 32px rgba(0,0,0,.08)!important}.table-card-hover:hover .table-icon{-webkit-transform:scale(1.1)!important;-moz-transform:scale(1.1)!important;-ms-transform:scale(1.1)!important;-o-transform:scale(1.1)!important;transform:scale(1.1)!important}.table-card-hover:active{-webkit-transform:translatey(-2px)scale(.98)!important;-moz-transform:translatey(-2px)scale(.98)!important;-ms-transform:translatey(-2px)scale(.98)!important;-o-transform:translatey(-2px)scale(.98)!important;transform:translatey(-2px)scale(.98)!important}@media(hover:none){.table-card-hover:active{-webkit-transform:scale(.97)!important;-moz-transform:scale(.97)!important;-ms-transform:scale(.97)!important;-o-transform:scale(.97)!important;transform:scale(.97)!important}.table-card-hover:hover{-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important}}.table-icon-wrapper{width:64px;height:64px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-bottom:12px;position:relative;-webkit-transition:all.3s ease;-moz-transition:all.3s ease;-o-transition:all.3s ease;transition:all.3s ease}.pulse-soft{-webkit-animation:pulseSoft 2s ease-in-out infinite;-moz-animation:pulseSoft 2s ease-in-out infinite;-o-animation:pulseSoft 2s ease-in-out infinite;animation:pulseSoft 2s ease-in-out infinite}@-webkit-keyframes pulseSoft{0%,100%{-webkit-transform:scale(1);transform:scale(1);opacity:1}50%{-webkit-transform:scale(1.05);transform:scale(1.05);opacity:.9}}@-moz-keyframes pulseSoft{0%,100%{-moz-transform:scale(1);transform:scale(1);opacity:1}50%{-moz-transform:scale(1.05);transform:scale(1.05);opacity:.9}}@-o-keyframes pulseSoft{0%,100%{-o-transform:scale(1);transform:scale(1);opacity:1}50%{-o-transform:scale(1.05);transform:scale(1.05);opacity:.9}}@keyframes pulseSoft{0%,100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1);opacity:1}50%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05);opacity:.9}}.back-button-hover:hover{background:rgba(255,255,255,.28)!important;-webkit-transform:translatex(-2px);-moz-transform:translatex(-2px);-ms-transform:translatex(-2px);-o-transform:translatex(-2px);transform:translatex(-2px)}.show-on-mobile{display:none!important}@media(max-width:768px){.show-on-mobile{display:inline!important}}"}),(0,s.jsxs)("div",{style:k.Np.container,className:"jsx-a961af50cb45fe5b",children:[(0,s.jsxs)("header",{style:{...N.yy.channelHeader,background:k.hS.dineIn.gradient},role:"banner",className:"jsx-a961af50cb45fe5b dine-in-header-mobile",children:[(0,s.jsx)("div",{className:"jsx-a961af50cb45fe5b header-pattern"}),(0,s.jsx)("div",{className:"jsx-a961af50cb45fe5b header-circle circle-1"}),(0,s.jsx)("div",{className:"jsx-a961af50cb45fe5b header-circle circle-2"}),(0,s.jsxs)("div",{style:N.yy.channelHeaderContent,className:"jsx-a961af50cb45fe5b dine-in-header-content-mobile",children:[(0,s.jsxs)("button",{style:N.yy.channelBackButton,onClick:()=>e.push("/pos/channels"),"aria-label":"กลับไปหน้าเลือกช่องทาง",className:"jsx-a961af50cb45fe5b back-button-hover dine-in-back-button-mobile",children:[(0,s.jsx)(f.Z,{}),(0,s.jsx)("span",{className:"jsx-a961af50cb45fe5b",children:"กลับ"})]}),(0,s.jsxs)("div",{style:N.yy.channelTitleSection,className:"jsx-a961af50cb45fe5b dine-in-title-section-mobile",children:[(0,s.jsx)(p.Z,{style:N.yy.channelHeaderIcon,className:"dine-in-header-icon-mobile","aria-hidden":"true"}),(0,s.jsx)("div",{className:"jsx-a961af50cb45fe5b",children:(0,s.jsx)(E,{level:3,style:N.yy.channelHeaderTitle,className:"dine-in-header-title-mobile",children:"เลือกโต๊ะ"})})]}),(0,s.jsxs)("div",{style:N.yy.channelStatsBar,className:"jsx-a961af50cb45fe5b dine-in-stats-bar-mobile",children:[(0,s.jsxs)("div",{style:N.yy.statItem,className:"jsx-a961af50cb45fe5b",children:[(0,s.jsx)("span",{style:{...N.yy.statDot,background:k.ax.available.primary},className:"jsx-a961af50cb45fe5b"}),(0,s.jsxs)(C,{style:N.yy.statText,children:["ว่าง ",T.available]})]}),(0,s.jsxs)("div",{style:N.yy.statItem,className:"jsx-a961af50cb45fe5b",children:[(0,s.jsx)("span",{style:{...N.yy.statDot,background:k.ax.occupied.primary},className:"jsx-a961af50cb45fe5b"}),(0,s.jsxs)(C,{style:N.yy.statText,children:["ไม่ว่าง ",T.occupied]})]})]})]})]}),(0,s.jsx)("main",{style:{maxWidth:1400,margin:"24px auto 0",padding:"0 16px 32px"},role:"main",className:"jsx-a961af50cb45fe5b dine-in-content-mobile",children:r.length>0?(0,s.jsx)(c.Z,{gutter:[16,16],children:Z.map((e,a)=>{let t=(0,_.Oi)(e),r=k.ax[t],n="Available"===e.status,i=!e.is_active;return(0,s.jsx)(m.Z,{xs:12,sm:8,md:6,lg:6,xl:4,children:(0,s.jsxs)("article",{style:{...N.yy.channelPageCard,background:i?"#F8FAFC":r.light,border:"2px solid ".concat(r.border),opacity:i?.5:1,cursor:i?"not-allowed":"pointer"},onClick:()=>P(e,i),onKeyDown:a=>{i||"Enter"!==a.key&&" "!==a.key||(a.preventDefault(),P(e,i))},role:"button",tabIndex:i?-1:0,"aria-label":"โต๊ะ ".concat(e.table_name," - ").concat(i?"ปิดใช้งาน":n?"ว่าง":"ไม่ว่าง"),"aria-disabled":i,className:"jsx-a961af50cb45fe5b "+"table-card-hover dine-in-table-card dine-in-table-card-mobile table-card-animate table-card-delay-".concat(a%6+1),children:[(0,s.jsx)("div",{style:{...N.yy.channelPageCardGradientOverlay,background:r.gradient},className:"jsx-a961af50cb45fe5b"}),(0,s.jsxs)("div",{style:N.yy.channelPageCardInner,className:"jsx-a961af50cb45fe5b",children:[(0,s.jsx)("div",{style:{background:"".concat(r.primary,"15"),border:"2px solid ".concat(r.primary,"30")},className:"jsx-a961af50cb45fe5b table-icon-wrapper",children:i?(0,s.jsx)(x.Z,{className:"table-icon dine-in-table-icon-mobile",style:{fontSize:32,color:r.primary,transition:"transform 0.3s ease"}}):n?(0,s.jsx)(y.Z,{className:"table-icon dine-in-table-icon-mobile",style:{fontSize:32,color:r.primary,transition:"transform 0.3s ease"}}):(0,s.jsx)(h.Z,{className:"table-icon pulse-soft dine-in-table-icon-mobile",style:{fontSize:32,color:r.primary,transition:"transform 0.3s ease"}})}),(0,s.jsx)("div",{style:{...N.yy.channelPageCardMainText,fontSize:24,color:r.text||r.primary},className:"jsx-a961af50cb45fe5b dine-in-table-name-mobile",children:e.table_name}),(0,s.jsxs)("div",{style:{marginTop:12,display:"flex",flexDirection:"column",gap:6,alignItems:"center"},className:"jsx-a961af50cb45fe5b",children:[!i&&(0,s.jsx)("div",{style:{fontSize:13,fontWeight:700,color:n?k.ax.available.primary:"#EF4444",textTransform:"uppercase",letterSpacing:"0.5px"},className:"jsx-a961af50cb45fe5b",children:n?"● ว่าง":"● ไม่ว่าง"}),(0,s.jsx)("div",{style:{...N.yy.channelPageCardStatusBadge,background:i?"#94A3B8":n?"rgba(16, 185, 129, 0.1)":r.primary,color:i?"#fff":n?k.ax.available.primary:"#fff",border:n?"1px solid ".concat(k.ax.available.border):"none",fontSize:12,padding:"6px 14px"},className:"jsx-a961af50cb45fe5b",children:i?"ปิดใช้งาน":n?"รอรับออเดอร์":e.active_order_status?(0,_.NE)(e.active_order_status):"กำลังใช้งาน"})]})]})]})},e.id)})}):(0,s.jsx)("div",{style:N.yy.emptyStateContainer,className:"jsx-a961af50cb45fe5b",children:(0,s.jsx)(b.Z,{image:b.Z.PRESENTED_IMAGE_SIMPLE,styles:{image:{height:100}},description:(0,s.jsxs)("div",{style:{marginTop:20},className:"jsx-a961af50cb45fe5b",children:[(0,s.jsx)(E,{level:4,style:{marginBottom:8,color:"#1E293B"},children:"ยังไม่มีข้อมูลโต๊ะ"}),(0,s.jsx)(C,{type:"secondary",style:{fontSize:15},children:"กรุณาเพิ่มข้อมูลโต๊ะก่อนเริ่มการขาย"})]}),children:(0,s.jsx)(d.ZP,{type:"primary",size:"large",icon:(0,s.jsx)(p.Z,{}),style:{height:52,padding:"0 36px",borderRadius:16,fontSize:16,fontWeight:600,marginTop:20,background:k.hS.dineIn.primary,border:"none",boxShadow:"0 8px 20px ".concat(k.hS.dineIn.primary,"40")},onClick:()=>e.push("/pos/tables"),children:"ไปหน้าจัดการโต๊ะ"})})})})]})]})}}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=83449)}),_N_E=e.O()}]);