(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4290],{83449:function(e,t,n){Promise.resolve().then(n.bind(n,12538))},12538:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(57437),a=n(2265),i=n(99376),o=n(82646),s=n(47451),c=n(69410),l=n(85180),u=n(50742),d=n(17588),f=n(62376),h=n(8881),y=n(81770),p=n(29827),m=n(11713),g=n(46252),v=n(66290),b=n(44225),x=n(11777),S=n(25369),_=n(61414),T=n(3369),E=n(252);let{Title:k,Text:w}=o.default;function j(){let e=(0,i.useRouter)(),{showLoading:t,hideLoading:n}=(0,T.x)(),{tables:o,isLoading:j}=function(){let{socket:e}=(0,a.useContext)(g.J),t=(0,p.NL)(),{data:n,error:r,isLoading:i,refetch:o}=(0,m.a)({queryKey:["tables"],queryFn:async()=>(await v.$.getAll()).data,staleTime:2e3,refetchOnReconnect:!0});return(0,a.useEffect)(()=>{if(!e)return;let n=()=>{t.invalidateQueries({queryKey:["tables"]})};return e.on("tables:create",n),e.on("tables:update",n),e.on("tables:delete",n),e.on("orders:create",n),e.on("orders:update",n),e.on("orders:delete",n),()=>{e.off("tables:create",n),e.off("tables:update",n),e.off("tables:delete",n),e.off("orders:create",n),e.off("orders:update",n),e.off("orders:delete",n)}},[e,t]),{tables:n||[],isLoading:i,isError:r,mutate:o}}();a.useEffect(()=>{j?t():n()},[j,t,n]);let C=(0,a.useMemo)(()=>(0,E.W9)(o),[o]),P=(0,a.useMemo)(()=>(0,E.Th)(o),[o]),A=(0,a.useMemo)(()=>(0,E.Tf)(P),[P]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.c,{}),(0,r.jsxs)("div",{style:b.Np.container,children:[(0,r.jsxs)("div",{style:{...x.y.channelHeader,background:b.hS.dineIn.gradient},className:"dine-in-header-mobile",children:[(0,r.jsx)("div",{className:"header-pattern"}),(0,r.jsxs)("div",{style:x.y.channelHeaderContent,className:"dine-in-header-content-mobile",children:[(0,r.jsxs)("div",{className:"back-button-hover dine-in-back-button-mobile",style:x.y.channelBackButton,onClick:()=>e.push("/pos/channels"),children:[(0,r.jsx)(d.Z,{}),(0,r.jsx)("span",{children:"กลับ"})]}),(0,r.jsxs)("div",{style:x.y.channelTitleSection,className:"dine-in-title-section-mobile",children:[(0,r.jsx)(f.Z,{style:x.y.channelHeaderIcon,className:"dine-in-header-icon-mobile"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(k,{level:3,style:x.y.channelHeaderTitle,className:"dine-in-header-title-mobile",children:"เลือกโต๊ะ"}),(0,r.jsx)(w,{style:x.y.channelHeaderSubtitle,children:"Dine In"})]})]}),(0,r.jsxs)("div",{style:x.y.channelStatsBar,className:"dine-in-stats-bar-mobile",children:[(0,r.jsxs)("div",{style:x.y.statItem,children:[(0,r.jsx)("span",{style:{...x.y.statDot,background:b.ax.available.primary}}),(0,r.jsxs)(w,{style:x.y.statText,children:["ว่าง ",C.available]})]}),(0,r.jsxs)("div",{style:x.y.statItem,children:[(0,r.jsx)("span",{style:{...x.y.statDot,background:b.ax.occupied.primary}}),(0,r.jsxs)(w,{style:x.y.statText,children:["ไม่ว่าง ",C.occupied]})]})]})]})]}),(0,r.jsx)("div",{style:{maxWidth:1400,margin:"0 auto",padding:"0 16px 24px"},className:"dine-in-content-mobile",children:o.length>0?(0,r.jsx)(s.Z,{gutter:[20,20],children:A.map((t,n)=>{let a=(0,E.Oi)(t),i=b.ax[a],o="Available"===t.status,s=!t.is_active;return(0,r.jsx)(c.Z,{xs:12,sm:8,md:6,lg:4,children:(0,r.jsxs)("div",{className:"dine-in-table-card dine-in-table-card-mobile table-card-animate table-card-delay-".concat(n%6+1),style:{...x.y.channelPageCard,background:i.light,border:"2px solid ".concat(i.border),opacity:s?.6:1},onClick:()=>{if(!s){let n=(0,_.Wl)(t);e.push(n)}},children:[(0,r.jsx)("div",{style:{...x.y.channelPageCardGradientOverlay,background:i.gradient}}),(0,r.jsxs)("div",{style:x.y.channelPageCardInner,children:[s?(0,r.jsx)(h.Z,{className:"dine-in-table-icon-mobile",style:{...x.y.channelPageCardIcon,color:i.primary}}):o?(0,r.jsx)(f.Z,{className:"dine-in-table-icon-mobile",style:{...x.y.channelPageCardIcon,color:i.primary,opacity:.6}}):(0,r.jsx)(y.Z,{className:"pulse-soft dine-in-table-icon-mobile",style:{...x.y.channelPageCardIcon,color:i.primary}}),(0,r.jsx)("div",{style:x.y.channelPageCardMainText,className:"dine-in-table-name-mobile",children:t.table_name}),(0,r.jsxs)("div",{style:{marginTop:10,display:"flex",flexDirection:"column",gap:4,alignItems:"center"},children:[!s&&(0,r.jsx)("div",{style:{fontSize:12,fontWeight:700,color:o?"#52c41a":"#ff4d4f",textTransform:"uppercase",letterSpacing:"0.5px"},children:o?"ว่าง":"ไม่ว่าง"}),(0,r.jsx)("div",{style:{...x.y.channelPageCardStatusBadge,background:s?"#bfbfbf":o?"#f0f0f0":i.primary,color:s?"#fff":o?"#8c8c8c":"#fff",border:o?"1px solid #d9d9d9":"none",fontSize:11,padding:"2px 10px",height:"auto",lineHeight:"1.4"},children:s?"ปิดใช้งาน":o?"รอรับออเดอร์":t.active_order_status?(0,E.NE)(t.active_order_status):"ไม่ว่าง"})]})]})]})},t.id)})}):(0,r.jsx)("div",{style:{background:"#fff",borderRadius:24,padding:"100px 24px",textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.04)",marginTop:20},children:(0,r.jsx)(l.Z,{image:l.Z.PRESENTED_IMAGE_SIMPLE,imageStyle:{height:120},description:(0,r.jsxs)("div",{style:{marginTop:20},children:[(0,r.jsx)(k,{level:4,style:{marginBottom:8},children:"ยังไม่มีข้อมูลโต๊ะ"}),(0,r.jsx)(w,{type:"secondary",style:{fontSize:16},children:"กรุณาเพิ่มข้อมูลโต๊ะก่อนเริ่มการขาย"})]}),children:(0,r.jsx)(u.ZP,{type:"primary",size:"large",icon:(0,r.jsx)(f.Z,{}),style:{height:50,padding:"0 40px",borderRadius:25,fontSize:16,marginTop:20,background:b.hS.dineIn.primary,border:"none"},onClick:()=>e.push("/pos/tables"),children:"ไปหน้าจัดการโต๊ะ"})})})})]})]})}},71567:function(e,t,n){"use strict";n.d(t,{q:function(){return a},v:function(){return r}});let r="/api",a={AUTH:{LOGIN:"/auth/login",ME:"/auth/me",CSRF:"/csrf"},POS:{PRODUCTS:"/pos/products",ORDERS:"/pos/orders",TABLES:"/pos/tables",DISCOUNTS:"/pos/discounts",DELIVERY:"/pos/delivery",PAYMENT_METHODS:"/pos/paymentMethod",PAYMENTS:"/pos/payments",CATEGORY:"/pos/category",SHIFTS:{BASE:"/pos/shifts",CURRENT:"/pos/shifts/current",OPEN:"/pos/shifts/open",CLOSE:"/pos/shifts/close"},DASHBOARD:{SALES:"/pos/dashboard/sales",TOP_ITEMS:"/pos/dashboard/top-items"},CHANNELS:{STATS:"/pos/orders/stats"},SHOP_PROFILE:"/pos/shopProfile",SALES_ORDER_ITEMS:"/pos/salesOrderItem",SALES_ORDER_DETAILS:"/pos/salesOrderDetail",PRODUCTS_UNIT:"/pos/productsUnit",PAYMENT_DETAILS:"/pos/paymentDetails",BRANCH:"/branches"}}},14362:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return d},a:function(){return f}});var r=n(57437),a=n(2265),i=n(99376),o=n(5447),s=n(84859),c=n(48651),l=n(3369);let u=(0,a.createContext)(void 0),d=e=>{let{children:t}=e,[n,d]=(0,a.useState)(null),[f,h]=(0,a.useState)(!0),y=(0,i.useRouter)(),p=(0,i.usePathname)(),m=async()=>{try{let e="";e=localStorage.getItem("token_ws")||"";let t=await o.O.getMe(e);d(t)}catch(e){d(null)}finally{h(!1)}};(0,a.useEffect)(()=>{m()},[]);let{showLoading:g,hideLoading:v}=(0,l.x)();(0,a.useEffect)(()=>{f||n||"/login"===p||y.push("/login")},[n,f,p,y]);let b=async e=>{try{g("กำลังเข้าสู่ระบบ...");let t=await o.O.getCsrfToken(),{token:n,...r}=await o.O.login(e,t);n&&localStorage.setItem("token_ws",n),d(r),y.push("/")}catch(e){throw e}finally{v()}},x=async()=>{try{g("กำลังออกจากระบบ...");let e="";e=localStorage.getItem("token_ws")||"",await o.O.logout(e),localStorage.removeItem("token_ws"),s.x.clearQueue(),d(null),y.push("/login")}catch(e){console.error("Logout error:",e)}finally{v()}};return f?(0,r.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-white",children:(0,r.jsx)(c.Z,{size:"large"})}):n||"/login"===p?(0,r.jsx)(u.Provider,{value:{user:n,loading:f,login:b,logout:x,checkAuth:m},children:t}):null},f=()=>{let e=(0,a.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},46252:function(e,t,n){"use strict";n.d(t,{J:function(){return s},SocketProvider:function(){return c}});var r=n(57437),a=n(2265),i=n(68680),o=n(14362);let s=(0,a.createContext)({socket:null,isConnected:!1}),c=e=>{let{children:t}=e,[n,c]=(0,a.useState)(null),[l,u]=(0,a.useState)(!1),{user:d}=(0,o.a)();return(0,a.useEffect)(()=>{if(!d){n&&(n.disconnect(),c(null),u(!1));return}let e=localStorage.getItem("token_ws"),t=(0,i.io)("http://localhost:3000",{transports:["websocket"],withCredentials:!0,auth:e?{token:e}:void 0});return t.on("connect",()=>{console.log("Socket Connected:",t.id),u(!0)}),t.on("disconnect",()=>{console.log("Socket Disconnected"),u(!1)}),c(t),()=>{t.disconnect()}},[d]),(0,r.jsx)(s.Provider,{value:{socket:n,isConnected:l},children:t})}},3369:function(e,t,n){"use strict";n.d(t,{GlobalLoadingProvider:function(){return c},O:function(){return u},x:function(){return l}});var r=n(57437),a=n(2265),i=n(48651);let o=(0,a.createContext)(void 0),s=(0,a.createContext)(void 0),c=e=>{let{children:t}=e,[n,c]=(0,a.useState)({}),[l,u]=(0,a.useState)(void 0),d=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";c(e=>({...e,[t]:(e[t]||0)+1})),e&&u(e)},[]),f=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";c(t=>{if(!t[e])return t;let n={...t};return n[e]-=1,n[e]<=0&&delete n[e],n})},[]),h=(0,a.useCallback)(()=>{c({}),u(void 0)},[]),y=Object.keys(n).length>0,p=(0,a.useMemo)(()=>({isLoading:y,loadingMessage:l}),[y,l]),m=(0,a.useMemo)(()=>({showLoading:d,hideLoading:f,resetLoading:h}),[d,f,h]);return(0,r.jsx)(s.Provider,{value:m,children:(0,r.jsxs)(o.Provider,{value:p,children:[t,y&&(0,r.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-auto bg-black/10 backdrop-blur-[1px]",children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,background:"rgba(255, 255, 255, 0.9)",padding:"20px 40px",borderRadius:12,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[(0,r.jsx)(i.Z,{size:"large"}),l&&(0,r.jsx)("div",{style:{fontSize:14,color:"#1f1f1f",fontWeight:500},children:l})]})})]})})};function l(){let e=(0,a.useContext)(o),t=(0,a.useContext)(s);if(!e||!t)throw Error("useGlobalLoading must be used within a GlobalLoadingProvider");return(0,a.useMemo)(()=>({...e,...t}),[e,t])}function u(){let e=(0,a.useContext)(s);if(!e)throw Error("useGlobalLoadingDispatch must be used within a GlobalLoadingProvider");return e}},2913:function(e,t,n){"use strict";function r(e,t){return({GET:"".concat(a.API_BASE_URL).concat(t),POST:"".concat(a.API_BASE_URL).concat(t),PUT:"".concat(a.API_BASE_URL).concat(t),DELETE:"".concat(a.API_BASE_URL).concat(t),PATCH:"".concat(a.API_BASE_URL).concat(t)})[e]}n.d(t,{b:function(){return r}});let a={get API_BASE_URL(){return"/api"}}},5447:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});var r=n(71567),a=n(2913);let i={login:async(e,t,n)=>{try{let i=(0,a.b)("POST",r.q.AUTH.LOGIN),o={"Content-Type":"application/json"};t&&(o["X-CSRF-Token"]=t),n&&(o.Cookie=n);let s=await fetch(i,{method:"POST",headers:o,credentials:"include",body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.message||e.detail||"เข้าสู่ระบบไม่สำเร็จ")}let c=await s.json();return{...c.user,token:c.token}}catch(e){throw Error(e.message||"เข้าสู่ระบบไม่สำเร็จ")}},logout:async(e,t,n)=>{try{let r=(0,a.b)("POST","/auth/logout"),i={"Content-Type":"application/json"};e&&(i.Authorization="Bearer ".concat(e)),t&&(i["X-CSRF-Token"]=t),n&&(i.Cookie=n),await fetch(r,{method:"POST",headers:i,credentials:"include"})}catch(e){console.error("Logout failed",e)}},getMe:async e=>{try{let t=(0,a.b)("GET",r.q.AUTH.ME),n=await fetch(t,{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},credentials:"include",cache:"no-store"});if(!n.ok)throw Error("Unauthorized");return await n.json()}catch(e){throw e}},async getCsrfToken(){try{let e=await fetch("".concat(r.v).concat(r.q.AUTH.CSRF),{credentials:"include"});if(!e.ok)return"";return(await e.json()).csrfToken}catch(e){return console.error("Failed to fetch CSRF token",e),""}}}},84859:function(e,t,n){"use strict";n.d(t,{M:function(){return s},x:function(){return o}});let r="pos_offline_queue",a=()=>{let e=localStorage.getItem(r);return e?JSON.parse(e):[]},i=e=>{localStorage.setItem(r,JSON.stringify(e))},o={addToQueue:(e,t)=>{let n=a(),r={id:"offline-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:e,payload:t,timestamp:Date.now(),retryCount:0};return i([...n,r]),r},getQueue:()=>a(),removeFromQueue:e=>{i(a().filter(t=>t.id!==e))},incrementRetry:(e,t)=>{i(a().map(n=>n.id===e?{...n,retryCount:n.retryCount+1,lastError:t}:n))},clearQueue:()=>{localStorage.removeItem(r)},pruneExceeded:()=>{i(a().filter(e=>e.retryCount<=5))}},s={maxRetry:5,backoff:e=>Math.min(3e4,2e3*e)}},66290:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var r=n(2913);let a=n(71567).q.POS.TABLES,i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",n={};return t&&(n["Content-Type"]=t),e&&(n.Cookie=e),n},o={getAll:async(e,t)=>{let n=(0,r.b)("GET",a),o=new URLSearchParams(t||"");o.has("page")||o.set("page","1"),o.has("limit")||o.set("limit","200");let s=o.toString();s&&(n+="?".concat(s));let c=i(e,""),l=await fetch(n,{cache:"no-store",headers:c,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch tables")}return l.json()},getById:async(e,t)=>{let n=(0,r.b)("GET","".concat(a,"/").concat(e)),o=i(t,""),s=await fetch(n,{cache:"no-store",headers:o,credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch tables")}return s.json()},getByName:async(e,t)=>{let n=(0,r.b)("GET","".concat(a,"/getByName/").concat(e)),o=i(t,""),s=await fetch(n,{cache:"no-store",headers:o,credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch tables")}return s.json()},create:async(e,t,n)=>{let o=(0,r.b)("POST","".concat(a)),s=i(t);n&&(s["X-CSRF-Token"]=n);let c=await fetch(o,{method:"POST",headers:s,credentials:"include",body:JSON.stringify(e)});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to create table")}return c.json()},update:async(e,t,n,o)=>{let s=(0,r.b)("PUT","".concat(a,"/").concat(e)),c=i(n);o&&(c["X-CSRF-Token"]=o);let l=await fetch(s,{method:"PUT",headers:c,credentials:"include",body:JSON.stringify(t)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to update table")}return l.json()},delete:async(e,t,n)=>{let o=(0,r.b)("DELETE","".concat(a,"/").concat(e)),s=i(t,"");n&&(s["X-CSRF-Token"]=n);let c=await fetch(o,{method:"DELETE",headers:s,credentials:"include"});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to delete table")}}}},34962:function(e,t,n){"use strict";var r,a;n.d(t,{c:function(){return r}}),(a=r||(r={})).Available="Available",a.Unavailable="Unavailable"},252:function(e,t,n){"use strict";n.d(t,{NE:function(){return l},Th:function(){return s},Do:function(){return u},Yx:function(){return d},Zu:function(){return f},Oi:function(){return c},W9:function(){return i},Tf:function(){return o}});var r=n(34962),a=n(32446);function i(e){let t={total:e.length,available:0,occupied:0,inactive:0};return e.forEach(e=>{e.is_active?e.status===r.c.Available?t.available++:t.occupied++:t.inactive++}),t}function o(e){return[...e].sort((e,t)=>{let n=parseInt(e.table_name.replace(/\D/g,"")),r=parseInt(t.table_name.replace(/\D/g,""));return isNaN(n)||isNaN(r)?e.table_name.localeCompare(t.table_name):n-r})}function s(e){return e.filter(e=>e.is_active)}function c(e){return e.is_active?"WaitingForPayment"===e.active_order_status?"waitingForPayment":e.status===r.c.Available?"available":"occupied":"inactive"}function l(e){return e?({Pending:"กำลังดำเนินการ",Cooking:"กำลังปรุง",Served:"เสิร์ฟแล้ว",WaitingForOrder:"รอรับออเดอร์",WaitingForPayment:"รอชำระเงิน",Paid:"ชำระเงินแล้ว",Completed:"เสร็จสมบูรณ์",Cancelled:"ยกเลิก"})[e]||e:""}function u(e){return e.reduce((e,t)=>(e.total++,t.status===a.i.Pending&&e.pending++,t.status===a.i.Cooking&&e.cooking++,t.status===a.i.Served&&e.served++,e),{total:0,pending:0,cooking:0,served:0})}function d(e){switch(e.status){case a.i.Pending:case a.i.Cooking:return"occupied";case a.i.Served:return"waitingForPayment";case a.i.Paid:return"available";default:return"inactive"}}let f=e=>{switch(e){case a.m.DineIn:case"DineIn":return"/pos/channels/dine-in";case a.m.TakeAway:case"TakeAway":return"/pos/channels/takeaway";case a.m.Delivery:case"Delivery":return"/pos/channels/delivery";default:return"/pos/orders"}}},61414:function(e,t,n){"use strict";n.d(t,{EO:function(){return x},Gs:function(){return c},HL:function(){return S},M9:function(){return _},Nz:function(){return p},OY:function(){return o},Rr:function(){return v},Wl:function(){return i},d$:function(){return T},d7:function(){return s},iN:function(){return d},jN:function(){return y},ku:function(){return g},mz:function(){return l},qO:function(){return u},xG:function(){return h},yj:function(){return b},zP:function(){return f},zf:function(){return E}});var r=n(32446),a=n(34962);let i=e=>{var t,n;if(e.status===a.c.Available)return"/pos/channels/dine-in/".concat(e.id);let i=e.active_order_id||(null===(t=e.active_order)||void 0===t?void 0:t.id),o=e.active_order_status||(null===(n=e.active_order)||void 0===n?void 0:n.status);return i?o===r.i.WaitingForPayment?"/pos/items/payment/".concat(i):"/pos/orders/".concat(i):"/pos/channels/dine-in/".concat(e.id)},o=e=>{switch(e){case r.i.Pending:return"orange";case r.i.Cooking:return"blue";case r.i.Served:return"green";case r.i.Paid:return"cyan";case r.i.Cancelled:return"red";case r.i.WaitingForPayment:return"gold";default:return"default"}},s=(e,t)=>{switch(e){case r.i.Pending:return"กำลังดำเนินการ";case r.i.Cooking:return"กำลังปรุง";case r.i.Served:if("TakeAway"===t||"Delivery"===t)return"ทำแล้ว";return"เสิร์ฟแล้ว";case r.i.Paid:return"ชำระเงินแล้ว";case r.i.Completed:return"สำเร็จ";case r.i.Cancelled:return"ยกเลิก";case r.i.WaitingForPayment:return"รอชำระเงิน";default:return e}},c=e=>{switch(e){case"DineIn":return"#722ed1";case"TakeAway":return"#fa8c16";case"Delivery":return"#eb2f96";default:return"#1890ff"}},l=e=>{switch(e){case"DineIn":return"ทานที่ร้าน";case"TakeAway":return"สั่งกลับบ้าน";case"Delivery":return"เดลิเวอรี่";default:return e}},u=e=>"DineIn"===e?"เสิร์ฟ":"ทำแล้ว",d=e=>"Delivery"===e?"จัดออเดอร์เสร็จแล้วพร้อมส่งให้ไรเดอร์":"DineIn"===e?"ยืนยันเสิร์ฟพร้อมชำระเงิน":"ยืนยันทำแล้วพร้อมชำระเงิน",f=e=>"DineIn"===e?"เสิร์ฟอาหารแล้ว":"ปรุงเสร็จแล้ว",h=e=>{let t="string"==typeof e?parseFloat(e):e;return"฿".concat(Number(t).toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2}))},y=e=>{var t,n;return"DineIn"===e.order_type?(null===(t=e.table)||void 0===t?void 0:t.table_name)||"ไม่ระบุโต๊ะ":"Delivery"===e.order_type?e.delivery_code||(null===(n=e.delivery)||void 0===n?void 0:n.delivery_name)||"ไม่ระบุข้อมูล":"TakeAway"===e.order_type?e.order_no||"ไม่ระบุเลขที่":e.order_no||"N/A"},p=e=>(null!=e?e:[]).filter(e=>e.status!==r.i.Cancelled),m=e=>(null!=e?e:[]).reduce((e,t)=>e+(Number(t.extra_price)||0),0),g=(e,t,n)=>((Number(e)||0)+m(n))*t,v=e=>p(e).reduce((e,t)=>{var n,r;let a=(null===(r=t.product)||void 0===r?void 0:null===(n=r.category)||void 0===n?void 0:n.display_name)||"ไม่ระบุหมวด";return e[a]=(e[a]||0)+(t.quantity||0),e},{}),b=e=>p(e).reduce((e,t)=>e+Number(t.total_price||0),0),x=e=>"DineIn"===e.order_type?"/pos/channels/dine-in":"TakeAway"===e.order_type?"/pos/channels/takeaway":"Delivery"===e.order_type?"/pos/channels/delivery":"/pos/orders",S=e=>"/pos/orders/".concat(e),_=e=>e.status===r.i.WaitingForPayment?e.order_type===r.m.Delivery?"/pos/items/delivery/".concat(e.id):"/pos/items/payment/".concat(e.id):"/pos/orders/".concat(e.id),T=e=>e===r.m.Delivery?"/pos/channels/delivery":e===r.m.TakeAway?"/pos/channels/takeaway":e===r.m.DineIn?"/pos/channels/dine-in":"/pos/channels",E=(e,t,n,a)=>({order_no:a.orderNo||"ORD-".concat(Date.now()),order_type:t,sub_total:n.subTotal,discount_amount:n.discountAmount,vat:0,total_amount:n.totalAmount,received_amount:0,change_amount:0,status:r.i.Pending,discount_id:a.discountId||null,payment_method_id:null,table_id:a.tableId||null,delivery_id:a.deliveryId||null,delivery_code:a.deliveryCode||null,items:e.map(e=>{let t=Number(e.product.price),n=(t+(e.details||[]).reduce((e,t)=>e+Number(t.extra_price),0))*e.quantity;return{product_id:e.product.id,quantity:e.quantity,price:t,total_price:n,discount_amount:0,notes:e.notes||"",status:r.i.Cooking,details:e.details||[]}})})}},function(e){e.O(0,[5015,7717,7698,742,3211,7993,8651,2646,1721,9763,1713,4221,6416,4103,2971,2117,1744],function(){return e(e.s=83449)}),_N_E=e.O()}]);