(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3859,3490,4103],{15392:function(e,t,a){Promise.resolve().then(a.bind(a,73805))},73805:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var n=a(57437),r=a(2265),o=a(99376),i=a(82646),s=a(34029),l=a(50742),d=a(47451),c=a(69410),u=a(85180),p=a(53743),m=a(93834),f=a(88589),y=a(17588),h=a(67605),b=a(96473),g=a(29827),x=a(11713),v=a(46252),w=a(17050),k=a(32446),S=a(44225),_=a(11777),j=a(25369),T=a(252),C=a(61414),E=a(3369),I=a(33203),z=a(71096),P=a.n(z),R=a(45721),D=a.n(R);a(6729);let{Title:A,Text:O}=i.default;function N(){let e=(0,o.useRouter)(),{showLoading:t,hideLoading:a}=(0,E.x)(),{deliveryProviders:i,isLoading:z}=function(){let{socket:e}=(0,r.useContext)(v.J),t=(0,g.NL)(),{data:a,error:n,isLoading:o,refetch:i}=(0,x.a)({queryKey:["delivery"],queryFn:async()=>(await w.X.getAll()).data,staleTime:5e3});return(0,r.useEffect)(()=>{if(!e)return;let a=()=>{t.invalidateQueries({queryKey:["delivery"]})};return e.on("delivery:create",a),e.on("delivery:update",a),e.on("delivery:delete",a),()=>{e.off("delivery:create",a),e.off("delivery:update",a),e.off("delivery:delete",a)}},[e,t]),{deliveryProviders:a||[],isLoading:o,isError:n,mutate:i}}(),{orders:R,isLoading:D}=(0,I.w)({orderType:k.m.Delivery}),[N,B]=(0,r.useState)(!1),Z=(0,r.useMemo)(()=>(0,T.Do)(R),[R]),[U,F]=(0,r.useState)(""),[L,H]=(0,r.useState)(null),W=(0,r.useMemo)(()=>i.find(e=>e.id===L),[i,L]);(0,r.useEffect)(()=>{D||z?t("กำลังโหลดออเดอร์..."):a()},[D,z,t,a]);let M=t=>{let a=(0,C.M9)(t);e.push(a)},Q=()=>{F(""),H(null),B(!0)},G=()=>{if(!L){s.ZP.error("กรุณาเลือกผู้ให้บริการ");return}if(!U.trim()){s.ZP.error("กรุณากรอกรหัสออเดอร์");return}t("กำลังเข้าสู่หน้าออเดอร์...");let a=U.trim();(null==W?void 0:W.delivery_prefix)&&(a="".concat(W.delivery_prefix,"-").concat(a)),e.push("/pos/channels/delivery/".concat(L,"?code=").concat(encodeURIComponent(a)))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.c,{}),(0,n.jsxs)("div",{style:S.Np.container,children:[(0,n.jsxs)("div",{style:{..._.y.channelHeader,background:S.hS.delivery.gradient},className:"delivery-header-mobile",children:[(0,n.jsx)("div",{className:"header-pattern"}),(0,n.jsxs)("div",{style:_.y.channelHeaderContent,className:"delivery-header-content-mobile",children:[(0,n.jsxs)("div",{className:"back-button-hover delivery-back-button-mobile",style:_.y.channelBackButton,onClick:()=>{e.push("/pos/channels")},children:[(0,n.jsx)(y.Z,{}),(0,n.jsx)("span",{children:"กลับ"})]}),(0,n.jsxs)("div",{style:_.y.channelTitleSection,className:"delivery-title-section-mobile",children:[(0,n.jsx)(h.Z,{style:_.y.channelHeaderIcon,className:"delivery-header-icon-mobile"}),(0,n.jsxs)("div",{children:[(0,n.jsx)(A,{level:3,style:_.y.channelHeaderTitle,className:"delivery-header-title-mobile",children:"เดลิเวอรี่"}),(0,n.jsx)(O,{style:_.y.channelHeaderSubtitle,children:"Delivery"})]})]}),(0,n.jsxs)("div",{style:_.y.channelStatsBar,className:"delivery-stats-bar-mobile",children:[(0,n.jsxs)("div",{style:_.y.statItem,children:[(0,n.jsx)("span",{style:{..._.y.statDot,background:"#fff"}}),(0,n.jsxs)(O,{style:_.y.statText,children:["ทั้งหมด ",Z.total]})]}),(0,n.jsxs)("div",{style:_.y.statItem,children:[(0,n.jsx)("span",{style:{..._.y.statDot,background:S.ax.occupied.primary}}),(0,n.jsxs)(O,{style:_.y.statText,children:["กำลังปรุง ",Z.cooking]})]})]})]})]}),(0,n.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto",padding:"0 16px 24px"},children:[(0,n.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:20},children:(0,n.jsx)(l.ZP,{type:"primary",size:"large",icon:(0,n.jsx)(b.Z,{}),onClick:Q,style:{height:48,borderRadius:12,padding:"0 24px",fontWeight:700,background:S.hS.delivery.primary,border:"none",boxShadow:"0 8px 16px rgba(114, 46, 209, 0.25)"},children:"เพิ่มออเดอร์ใหม่"})}),R.length>0?(0,n.jsx)(d.Z,{gutter:[20,20],children:R.map((e,t)=>{let a=(0,T.Yx)(e),r=S.ax[a],o=i.find(t=>t.id===e.delivery_id),s=e.delivery_code||e.order_no.split("-").pop();return(0,n.jsx)(c.Z,{xs:12,sm:8,md:6,lg:4,children:(0,n.jsxs)("div",{className:"delivery-order-card table-card-animate table-card-delay-".concat(t%6+1),style:{..._.y.channelPageCard,background:r.light,border:"2px solid ".concat(r.border)},onClick:()=>M(e),children:[(0,n.jsx)("div",{style:{..._.y.channelPageCardGradientOverlay,background:r.gradient}}),(0,n.jsxs)("div",{style:_.y.channelPageCardInner,children:[(0,n.jsx)(h.Z,{style:{..._.y.channelPageCardIcon,color:r.primary}}),(0,n.jsx)("div",{style:_.y.channelPageCardMainText,children:s}),(0,n.jsxs)("div",{style:{marginTop:10,display:"flex",flexDirection:"column",gap:4,alignItems:"center"},children:[(0,n.jsxs)("div",{style:{fontSize:12,fontWeight:700,color:r.primary,textTransform:"uppercase"},children:[(null==o?void 0:o.delivery_name)||"DELIVERY"," • ",P()(e.create_date).fromNow()]}),(0,n.jsx)("div",{style:{..._.y.channelPageCardStatusBadge,background:r.primary,color:"#fff"},children:(0,T.NE)(e.status)})]})]})]})},e.id)})}):(0,n.jsxs)("div",{style:{background:"#fff",borderRadius:24,padding:"80px 24px",textAlign:"center",boxShadow:"0 4px 24px rgba(0,0,0,0.06)"},children:[(0,n.jsx)(u.Z,{image:u.Z.PRESENTED_IMAGE_SIMPLE,description:(0,n.jsxs)("div",{style:{marginTop:16},children:[(0,n.jsx)(A,{level:4,style:{marginBottom:8},children:"ไม่มีออเดอร์เดลิเวอรี่"}),(0,n.jsx)(O,{type:"secondary",children:'เริ่มรับออเดอร์โดยกดปุ่ม "เพิ่มออเดอร์"'})]})}),(0,n.jsx)(l.ZP,{type:"primary",size:"large",icon:(0,n.jsx)(b.Z,{}),onClick:Q,style:{marginTop:24,background:S.hS.delivery.primary,borderColor:S.hS.delivery.primary,height:44,borderRadius:10,padding:"0 32px"},children:"สร้างออเดอร์ใหม่"})]})]}),(0,n.jsx)(p.Z,{title:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)(h.Z,{style:{color:S.hS.delivery.primary}}),(0,n.jsx)("span",{children:"เปิดออเดอร์เดลิเวอรี่ใหม่"})]}),open:N,onOk:G,onCancel:()=>B(!1),okText:"ยืนยัน",cancelText:"ยกเลิก",centered:!0,okButtonProps:{style:{background:S.hS.delivery.primary,borderColor:S.hS.delivery.primary},disabled:!L||!U.trim()},children:(0,n.jsxs)("div",{style:{paddingTop:16,display:"flex",flexDirection:"column",gap:16},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(O,{strong:!0,style:{display:"block",marginBottom:8},children:"เลือกผู้ให้บริการ (Delivery Provider)"}),(0,n.jsx)(m.default,{placeholder:"เลือกผู้ให้บริการ",style:{width:"100%"},size:"large",value:L,onChange:H,options:i.map(e=>({label:e.delivery_name,value:e.id})),loading:z})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(O,{strong:!0,style:{display:"block",marginBottom:8},children:"รหัสเดลิเวอรี่ / Order Code"}),(0,n.jsx)(f.default,{placeholder:"ระบุรหัสออเดอร์ (เช่น 123)",addonBefore:(null==W?void 0:W.delivery_prefix)?"".concat(W.delivery_prefix,"-"):void 0,value:U,onChange:e=>F(e.target.value),size:"large",onPressEnter:G})]})]})})]})]})}P().extend(D()),P().locale("th")},71567:function(e,t,a){"use strict";a.d(t,{q:function(){return r},v:function(){return n}});let n="/api",r={AUTH:{LOGIN:"/auth/login",ME:"/auth/me",CSRF:"/csrf"},POS:{PRODUCTS:"/pos/products",ORDERS:"/pos/orders",TABLES:"/pos/tables",DISCOUNTS:"/pos/discounts",DELIVERY:"/pos/delivery",PAYMENT_METHODS:"/pos/paymentMethod",PAYMENTS:"/pos/payments",CATEGORY:"/pos/category",SHIFTS:{BASE:"/pos/shifts",CURRENT:"/pos/shifts/current",OPEN:"/pos/shifts/open",CLOSE:"/pos/shifts/close"},DASHBOARD:{SALES:"/pos/dashboard/sales",TOP_ITEMS:"/pos/dashboard/top-items"},CHANNELS:{STATS:"/pos/orders/stats"},SHOP_PROFILE:"/pos/shopProfile",SALES_ORDER_ITEMS:"/pos/salesOrderItem",SALES_ORDER_DETAILS:"/pos/salesOrderDetail",PRODUCTS_UNIT:"/pos/productsUnit",PAYMENT_DETAILS:"/pos/paymentDetails",BRANCH:"/branches"}}},14362:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return u},a:function(){return p}});var n=a(57437),r=a(2265),o=a(99376),i=a(5447),s=a(84859),l=a(48651),d=a(3369);let c=(0,r.createContext)(void 0),u=e=>{let{children:t}=e,[a,u]=(0,r.useState)(null),[p,m]=(0,r.useState)(!0),f=(0,o.useRouter)(),y=(0,o.usePathname)(),h=async()=>{try{let e="";e=localStorage.getItem("token_ws")||"";let t=await i.O.getMe(e);u(t)}catch(e){u(null)}finally{m(!1)}};(0,r.useEffect)(()=>{h()},[]);let{showLoading:b,hideLoading:g}=(0,d.x)();(0,r.useEffect)(()=>{p||a||"/login"===y||f.push("/login")},[a,p,y,f]);let x=async e=>{try{b("กำลังเข้าสู่ระบบ...");let t=await i.O.getCsrfToken(),{token:a,...n}=await i.O.login(e,t);a&&localStorage.setItem("token_ws",a),u(n),f.push("/")}catch(e){throw e}finally{g()}},v=async()=>{try{b("กำลังออกจากระบบ...");let e="";e=localStorage.getItem("token_ws")||"",await i.O.logout(e),localStorage.removeItem("token_ws"),s.x.clearQueue(),u(null),f.push("/login")}catch(e){console.error("Logout error:",e)}finally{g()}};return p?(0,n.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-white",children:(0,n.jsx)(l.Z,{size:"large"})}):a||"/login"===y?(0,n.jsx)(c.Provider,{value:{user:a,loading:p,login:x,logout:v,checkAuth:h},children:t}):null},p=()=>{let e=(0,r.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},46252:function(e,t,a){"use strict";a.d(t,{J:function(){return s},SocketProvider:function(){return l}});var n=a(57437),r=a(2265),o=a(68680),i=a(14362);let s=(0,r.createContext)({socket:null,isConnected:!1}),l=e=>{let{children:t}=e,[a,l]=(0,r.useState)(null),[d,c]=(0,r.useState)(!1),{user:u}=(0,i.a)();return(0,r.useEffect)(()=>{if(!u){a&&(a.disconnect(),l(null),c(!1));return}let e=localStorage.getItem("token_ws"),t=(0,o.io)("http://localhost:3000",{transports:["websocket"],withCredentials:!0,auth:e?{token:e}:void 0});return t.on("connect",()=>{console.log("Socket Connected:",t.id),c(!0)}),t.on("disconnect",()=>{console.log("Socket Disconnected"),c(!1)}),l(t),()=>{t.disconnect()}},[u]),(0,n.jsx)(s.Provider,{value:{socket:a,isConnected:d},children:t})}},3369:function(e,t,a){"use strict";a.d(t,{GlobalLoadingProvider:function(){return l},O:function(){return c},x:function(){return d}});var n=a(57437),r=a(2265),o=a(48651);let i=(0,r.createContext)(void 0),s=(0,r.createContext)(void 0),l=e=>{let{children:t}=e,[a,l]=(0,r.useState)({}),[d,c]=(0,r.useState)(void 0),u=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";l(e=>({...e,[t]:(e[t]||0)+1})),e&&c(e)},[]),p=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";l(t=>{if(!t[e])return t;let a={...t};return a[e]-=1,a[e]<=0&&delete a[e],a})},[]),m=(0,r.useCallback)(()=>{l({}),c(void 0)},[]),f=Object.keys(a).length>0,y=(0,r.useMemo)(()=>({isLoading:f,loadingMessage:d}),[f,d]),h=(0,r.useMemo)(()=>({showLoading:u,hideLoading:p,resetLoading:m}),[u,p,m]);return(0,n.jsx)(s.Provider,{value:h,children:(0,n.jsxs)(i.Provider,{value:y,children:[t,f&&(0,n.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center pointer-events-auto bg-black/10 backdrop-blur-[1px]",children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:10,background:"rgba(255, 255, 255, 0.9)",padding:"20px 40px",borderRadius:12,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[(0,n.jsx)(o.Z,{size:"large"}),d&&(0,n.jsx)("div",{style:{fontSize:14,color:"#1f1f1f",fontWeight:500},children:d})]})})]})})};function d(){let e=(0,r.useContext)(i),t=(0,r.useContext)(s);if(!e||!t)throw Error("useGlobalLoading must be used within a GlobalLoadingProvider");return(0,r.useMemo)(()=>({...e,...t}),[e,t])}function c(){let e=(0,r.useContext)(s);if(!e)throw Error("useGlobalLoadingDispatch must be used within a GlobalLoadingProvider");return e}},24675:function(e,t,a){"use strict";a.d(t,{s:function(){return o}});var n=a(2265),r=a(46252);let o=()=>(0,n.useContext)(r.J)},2913:function(e,t,a){"use strict";function n(e,t){return({GET:"".concat(r.API_BASE_URL).concat(t),POST:"".concat(r.API_BASE_URL).concat(t),PUT:"".concat(r.API_BASE_URL).concat(t),DELETE:"".concat(r.API_BASE_URL).concat(t),PATCH:"".concat(r.API_BASE_URL).concat(t)})[e]}a.d(t,{b:function(){return n}});let r={get API_BASE_URL(){return"/api"}}},5447:function(e,t,a){"use strict";a.d(t,{O:function(){return o}});var n=a(71567),r=a(2913);let o={login:async(e,t,a)=>{try{let o=(0,r.b)("POST",n.q.AUTH.LOGIN),i={"Content-Type":"application/json"};t&&(i["X-CSRF-Token"]=t),a&&(i.Cookie=a);let s=await fetch(o,{method:"POST",headers:i,credentials:"include",body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.message||e.detail||"เข้าสู่ระบบไม่สำเร็จ")}let l=await s.json();return{...l.user,token:l.token}}catch(e){throw Error(e.message||"เข้าสู่ระบบไม่สำเร็จ")}},logout:async(e,t,a)=>{try{let n=(0,r.b)("POST","/auth/logout"),o={"Content-Type":"application/json"};e&&(o.Authorization="Bearer ".concat(e)),t&&(o["X-CSRF-Token"]=t),a&&(o.Cookie=a),await fetch(n,{method:"POST",headers:o,credentials:"include"})}catch(e){console.error("Logout failed",e)}},getMe:async e=>{try{let t=(0,r.b)("GET",n.q.AUTH.ME),a=await fetch(t,{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},credentials:"include",cache:"no-store"});if(!a.ok)throw Error("Unauthorized");return await a.json()}catch(e){throw e}},async getCsrfToken(){try{let e=await fetch("".concat(n.v).concat(n.q.AUTH.CSRF),{credentials:"include"});if(!e.ok)return"";return(await e.json()).csrfToken}catch(e){return console.error("Failed to fetch CSRF token",e),""}}}},17050:function(e,t,a){"use strict";a.d(t,{X:function(){return i}});var n=a(2913);let r=a(71567).q.POS.DELIVERY,o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",a={};return t&&(a["Content-Type"]=t),e&&(a.Cookie=e),a},i={getAll:async(e,t)=>{let a=(0,n.b)("GET",r),i=new URLSearchParams(t||"");i.has("page")||i.set("page","1"),i.has("limit")||i.set("limit","200");let s=i.toString();s&&(a+="?".concat(s));let l=o(e,""),d=await fetch(a,{cache:"no-store",headers:l,credentials:"include"});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch delivery providers")}return d.json()},getById:async(e,t)=>{let a=(0,n.b)("GET","".concat(r,"/").concat(e)),i=o(t,""),s=await fetch(a,{cache:"no-store",headers:i,credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch delivery provider")}return s.json()},getByName:async(e,t)=>{let a=(0,n.b)("GET","".concat(r,"/getByName/").concat(e)),i=o(t,""),s=await fetch(a,{cache:"no-store",headers:i,credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to fetch delivery provider")}return s.json()},create:async(e,t,a)=>{let i=(0,n.b)("POST","".concat(r)),s=o(t);a&&(s["X-CSRF-Token"]=a);let l=await fetch(i,{method:"POST",headers:s,credentials:"include",body:JSON.stringify(e)});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to create delivery provider")}return l.json()},update:async(e,t,a,i)=>{let s=(0,n.b)("PUT","".concat(r,"/").concat(e)),l=o(a);i&&(l["X-CSRF-Token"]=i);let d=await fetch(s,{method:"PUT",headers:l,credentials:"include",body:JSON.stringify(t)});if(!d.ok){let e=await d.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to update delivery provider")}return d.json()},delete:async(e,t,a)=>{let i=(0,n.b)("DELETE","".concat(r,"/").concat(e)),s=o(t,"");a&&(s["X-CSRF-Token"]=a);let l=await fetch(i,{method:"DELETE",headers:s,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"Failed to delete delivery provider")}}}},84859:function(e,t,a){"use strict";a.d(t,{M:function(){return s},x:function(){return i}});let n="pos_offline_queue",r=()=>{let e=localStorage.getItem(n);return e?JSON.parse(e):[]},o=e=>{localStorage.setItem(n,JSON.stringify(e))},i={addToQueue:(e,t)=>{let a=r(),n={id:"offline-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:e,payload:t,timestamp:Date.now(),retryCount:0};return o([...a,n]),n},getQueue:()=>r(),removeFromQueue:e=>{o(r().filter(t=>t.id!==e))},incrementRetry:(e,t)=>{o(r().map(a=>a.id===e?{...a,retryCount:a.retryCount+1,lastError:t}:a))},clearQueue:()=>{localStorage.removeItem(n)},pruneExceeded:()=>{o(r().filter(e=>e.retryCount<=5))}},s={maxRetry:5,backoff:e=>Math.min(3e4,2e3*e)}},53286:function(e,t,a){"use strict";a.d(t,{x:function(){return x}});var n=a(20019),r=a(2913),o=a(71567),i=a(32446);let s=n.Ryn({id:n.Z_8(),username:n.Z_8()}).partial().nullable(),l=n.Ryn({id:n.Z_8(),display_name:n.Z_8()}).partial().nullable(),d=n.Ryn({id:n.Z_8(),display_name:n.Z_8(),img_url:n.Z_8().nullable(),price:n.oQ2.number(),category:l.optional()}).partial().nullable(),c=n.Ryn({id:n.Z_8().optional(),detail_name:n.Z_8(),extra_price:n.oQ2.number()}).partial(),u=n.Ryn({id:n.Z_8(),order_id:n.Z_8(),product_id:n.Z_8(),product_name:n.Z_8().optional(),quantity:n.oQ2.number(),price:n.oQ2.number(),total_price:n.oQ2.number(),discount_amount:n.oQ2.number().optional().default(0),notes:n.Z_8().nullable().optional(),status:n.jbo(i.i).optional(),product:d.optional(),details:n.IXX(c).optional()}),p=n.Ryn({id:n.Z_8(),order_no:n.Z_8(),order_type:n.jbo(i.m),table_id:n.Z_8().nullable().optional(),delivery_id:n.Z_8().nullable().optional(),delivery_code:n.Z_8().nullable().optional(),sub_total:n.oQ2.number(),discount_id:n.Z_8().nullable().optional(),discount_amount:n.oQ2.number(),vat:n.oQ2.number(),total_amount:n.oQ2.number(),received_amount:n.oQ2.number(),change_amount:n.oQ2.number(),status:n.jbo(i.i),created_by_id:n.Z_8().nullable().optional(),create_date:n.Z_8(),update_date:n.Z_8(),items:n.IXX(u).optional(),created_by:s.optional(),table:n.YjB().optional(),delivery:n.YjB().optional(),discount:n.YjB().optional(),payments:n.IXX(n.YjB()).optional()}),m=n.Ryn({data:n.IXX(p),total:n.oQ2.number(),page:n.oQ2.number(),last_page:n.oQ2.number().optional()}),f=n.Ryn({table_name:n.Z_8().nullable().optional(),delivery_name:n.Z_8().nullable().optional()}).partial().nullable(),y=n.Ryn({id:n.Z_8(),order_no:n.Z_8(),order_type:n.jbo(i.m),status:n.jbo(i.i),create_date:n.Z_8(),total_amount:n.oQ2.number(),delivery_code:n.Z_8().nullable().optional(),table_id:n.Z_8().nullable().optional(),delivery_id:n.Z_8().nullable().optional(),table:f.optional(),delivery:f.optional(),items_summary:n.IMB(n.Z_8(),n.oQ2.number()).optional(),items_count:n.oQ2.number().optional()}),h=n.Ryn({data:n.IXX(y),total:n.oQ2.number(),page:n.oQ2.number(),last_page:n.oQ2.number().optional()}),b=o.q.POS.ORDERS,g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",a={};return t&&(a["Content-Type"]=t),e&&(a.Cookie=e),a},x={getAll:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,l=new URLSearchParams({page:t.toString(),limit:a.toString(),...o&&{status:o},...i&&{type:i},...s&&{q:s}}),d="".concat(b,"?").concat(l.toString()),c=(0,r.b)("GET",d),u=g(e,""),p=await fetch(c,{cache:"no-store",headers:u,credentials:"include"});if(!p.ok){let e=await p.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let f=await p.json();try{return m.parse(f)}catch(e){throw console.error("Zod Validation Error in ordersService.getAll:",e),e instanceof n.jmq&&console.error("Zod Issues:",e.issues),e}},getAllSummary:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,l=new URLSearchParams({page:t.toString(),limit:a.toString(),...o&&{status:o},...i&&{type:i},...s&&{q:s}}),d="".concat(b,"/summary?").concat(l.toString()),c=(0,r.b)("GET",d),u=g(e,""),p=await fetch(c,{cache:"no-store",headers:u,credentials:"include"});if(!p.ok){let e=await p.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let m=await p.json();try{return h.parse(m)}catch(e){throw console.error("Zod Validation Error in ordersService.getAllSummary:",e),e instanceof n.jmq&&console.error("Zod Issues:",e.issues),e}},getStats:async e=>{let t=(0,r.b)("GET",o.q.POS.CHANNELS.STATS),a=g(e,""),n=await fetch(t,{cache:"no-store",headers:a,credentials:"include"});if(!n.ok){let e=await n.text();console.error("Order Stats Backend Error:",e);let t=await JSON.parse(e).catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถดึงข้อมูลสถิติได้")}return await n.json()},getById:async(e,t)=>{let a=(0,r.b)("GET","".concat(b,"/").concat(e)),o=g(t,""),i=await fetch(a,{cache:"no-store",headers:o,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลออเดอร์ได้")}let s=await i.json();try{return p.parse(s)}catch(e){throw console.error("Zod Validation Error in ordersService.getById:",e),e instanceof n.jmq&&console.error("Zod Issues:",e.issues),e}},create:async(e,t,a)=>{let n=(0,r.b)("POST","".concat(b)),o=g(t);a&&(o["X-CSRF-Token"]=a);let i=await fetch(n,{method:"POST",headers:o,credentials:"include",body:JSON.stringify(e)});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถสร้างออเดอร์ได้")}return i.json()},update:async(e,t,a,n)=>{let o=(0,r.b)("PUT","".concat(b,"/").concat(e)),i=g(a);n&&(i["X-CSRF-Token"]=n);let s=await fetch(o,{method:"PUT",headers:i,credentials:"include",body:JSON.stringify(t)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถแก้ไขออเดอร์ได้")}return s.json()},delete:async(e,t,a)=>{let n=(0,r.b)("DELETE","".concat(b,"/").concat(e)),o=g(t,"");a&&(o["X-CSRF-Token"]=a);let i=await fetch(n,{method:"DELETE",headers:o,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถลบออเดอร์ได้")}},updateItemStatus:async(e,t,a,n)=>{let o=(0,r.b)("PATCH","".concat(b,"/items/").concat(e,"/status")),i=g(a);n&&(i["X-CSRF-Token"]=n);let s=await fetch(o,{method:"PATCH",headers:i,credentials:"include",body:JSON.stringify({status:t})});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถอัปเดตสถานะรายการได้")}},getItems:async(e,t)=>{let a=(0,r.b)("GET","".concat(b,"/items").concat(e?"?status=".concat(e):"")),n=g(t,""),o=await fetch(a,{cache:"no-store",headers:n,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลรายการได้")}return o.json()},addItem:async(e,t,a,n)=>{let o=(0,r.b)("POST","".concat(b,"/").concat(e,"/items")),i=g(a);n&&(i["X-CSRF-Token"]=n);let s=await fetch(o,{method:"POST",headers:i,credentials:"include",body:JSON.stringify(t)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถเพิ่มรายการได้")}return s.json()},updateItem:async(e,t,a,n)=>{let o=(0,r.b)("PUT","".concat(b,"/items/").concat(e)),i=g(a);n&&(i["X-CSRF-Token"]=n);let s=await fetch(o,{method:"PUT",headers:i,credentials:"include",body:JSON.stringify(t)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถแก้ไขรายการได้")}return s.json()},deleteItem:async(e,t,a)=>{let n=(0,r.b)("DELETE","".concat(b,"/items/").concat(e)),o=g(t,"");a&&(o["X-CSRF-Token"]=a);let i=await fetch(n,{method:"DELETE",headers:o,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถลบรายการได้")}return i.json()},updateStatus:async(e,t,a)=>{let n={"Content-Type":"application/json"};a&&(n["X-CSRF-Token"]=a);let o=(0,r.b)("PUT","".concat(b,"/").concat(e));if(!(await fetch(o,{method:"PUT",headers:n,body:JSON.stringify({status:t}),credentials:"include"})).ok)throw Error("Failed to update status")}}},25369:function(e,t,a){"use strict";a.d(t,{c:function(){return i}});var n=a(57437),r=a(29),o=a.n(r);a(2265);let i=()=>(0,n.jsx)(o(),{id:"82ac251b1efd2c58",children:"@-webkit-keyframes fadeInUp{from{opacity:0;-webkit-transform:translatey(30px);transform:translatey(30px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeInUp{from{opacity:0;-moz-transform:translatey(30px);transform:translatey(30px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeInUp{from{opacity:0;-o-transform:translatey(30px);transform:translatey(30px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeInUp{from{opacity:0;-webkit-transform:translatey(30px);-moz-transform:translatey(30px);-o-transform:translatey(30px);transform:translatey(30px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.fade-in-up{-webkit-animation:fadeInUp.4s ease-out forwards;-moz-animation:fadeInUp.4s ease-out forwards;-o-animation:fadeInUp.4s ease-out forwards;animation:fadeInUp.4s ease-out forwards}@-webkit-keyframes slideInUp{from{opacity:0;-webkit-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes slideInUp{from{opacity:0;-moz-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes slideInUp{from{opacity:0;-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes slideInUp{from{opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}.slide-in-up{-webkit-animation:slideInUp.4s ease-out forwards;-moz-animation:slideInUp.4s ease-out forwards;-o-animation:slideInUp.4s ease-out forwards;animation:slideInUp.4s ease-out forwards}.table-card-animate{-webkit-animation:slideInUp.4s ease-out forwards;-moz-animation:slideInUp.4s ease-out forwards;-o-animation:slideInUp.4s ease-out forwards;animation:slideInUp.4s ease-out forwards;opacity:0}@-webkit-keyframes pulse{0%,100%{-webkit-transform:scale(1);transform:scale(1);opacity:1}50%{-webkit-transform:scale(1.05);transform:scale(1.05);opacity:.8}}@-moz-keyframes pulse{0%,100%{-moz-transform:scale(1);transform:scale(1);opacity:1}50%{-moz-transform:scale(1.05);transform:scale(1.05);opacity:.8}}@-o-keyframes pulse{0%,100%{-o-transform:scale(1);transform:scale(1);opacity:1}50%{-o-transform:scale(1.05);transform:scale(1.05);opacity:.8}}@keyframes pulse{0%,100%{-webkit-transform:scale(1);-moz-transform:scale(1);-o-transform:scale(1);transform:scale(1);opacity:1}50%{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05);opacity:.8}}.pulse-animation{-webkit-animation:pulse 2s ease-in-out infinite;-moz-animation:pulse 2s ease-in-out infinite;-o-animation:pulse 2s ease-in-out infinite;animation:pulse 2s ease-in-out infinite}@-webkit-keyframes pulse-soft{0%,100%{opacity:1}50%{opacity:.7}}@-moz-keyframes pulse-soft{0%,100%{opacity:1}50%{opacity:.7}}@-o-keyframes pulse-soft{0%,100%{opacity:1}50%{opacity:.7}}@keyframes pulse-soft{0%,100%{opacity:1}50%{opacity:.7}}.pulse-soft{-webkit-animation:pulse-soft 2s ease-in-out infinite;-moz-animation:pulse-soft 2s ease-in-out infinite;-o-animation:pulse-soft 2s ease-in-out infinite;animation:pulse-soft 2s ease-in-out infinite}@-webkit-keyframes float{0%,100%{-webkit-transform:translatey(0px);transform:translatey(0px)}50%{-webkit-transform:translatey(-10px);transform:translatey(-10px)}}@-moz-keyframes float{0%,100%{-moz-transform:translatey(0px);transform:translatey(0px)}50%{-moz-transform:translatey(-10px);transform:translatey(-10px)}}@-o-keyframes float{0%,100%{-o-transform:translatey(0px);transform:translatey(0px)}50%{-o-transform:translatey(-10px);transform:translatey(-10px)}}@keyframes float{0%,100%{-webkit-transform:translatey(0px);-moz-transform:translatey(0px);-o-transform:translatey(0px);transform:translatey(0px)}50%{-webkit-transform:translatey(-10px);-moz-transform:translatey(-10px);-o-transform:translatey(-10px);transform:translatey(-10px)}}.header-icon-animate{-webkit-animation:float 3s ease-in-out infinite;-moz-animation:float 3s ease-in-out infinite;-o-animation:float 3s ease-in-out infinite;animation:float 3s ease-in-out infinite}@-webkit-keyframes shimmer{0%{background-position:-200%0}100%{background-position:200%0}}@-moz-keyframes shimmer{0%{background-position:-200%0}100%{background-position:200%0}}@-o-keyframes shimmer{0%{background-position:-200%0}100%{background-position:200%0}}@keyframes shimmer{0%{background-position:-200%0}100%{background-position:200%0}}.hover-scale{-webkit-transition:-webkit-transform.2s;-moz-transition:-moz-transform.2s;-o-transition:-o-transform.2s;transition:-webkit-transform.2s;transition:-moz-transform.2s;transition:-o-transform.2s;transition:transform.2s}.hover-scale:hover{-webkit-transform:translatey(-4px);-moz-transform:translatey(-4px);-ms-transform:translatey(-4px);-o-transform:translatey(-4px);transform:translatey(-4px)}.channel-card-hover:hover{-webkit-transform:translatey(-12px);-moz-transform:translatey(-12px);-ms-transform:translatey(-12px);-o-transform:translatey(-12px);transform:translatey(-12px);-webkit-box-shadow:0 12px 40px rgba(0,0,0,.15);-moz-box-shadow:0 12px 40px rgba(0,0,0,.15);box-shadow:0 12px 40px rgba(0,0,0,.15)}.channel-card-hover:hover .icon-wrapper{-webkit-transform:scale(1.1)rotate(5deg);-moz-transform:scale(1.1)rotate(5deg);-ms-transform:scale(1.1)rotate(5deg);-o-transform:scale(1.1)rotate(5deg);transform:scale(1.1)rotate(5deg)}.channel-card-hover:hover .decorative-glow{opacity:.4;-webkit-transform:translate(-50%,-50%)scale(1.2);-moz-transform:translate(-50%,-50%)scale(1.2);-ms-transform:translate(-50%,-50%)scale(1.2);-o-transform:translate(-50%,-50%)scale(1.2);transform:translate(-50%,-50%)scale(1.2)}.channel-card-hover:active{-webkit-transform:translatey(-8px);-moz-transform:translatey(-8px);-ms-transform:translatey(-8px);-o-transform:translatey(-8px);transform:translatey(-8px)}.dine-in-table-card:hover{-webkit-transform:translatey(-6px);-moz-transform:translatey(-6px);-ms-transform:translatey(-6px);-o-transform:translatey(-6px);transform:translatey(-6px);-webkit-box-shadow:0 8px 24px rgba(0,0,0,.12);-moz-box-shadow:0 8px 24px rgba(0,0,0,.12);box-shadow:0 8px 24px rgba(0,0,0,.12)}.dine-in-table-card:active{-webkit-transform:translatey(-4px);-moz-transform:translatey(-4px);-ms-transform:translatey(-4px);-o-transform:translatey(-4px);transform:translatey(-4px)}.back-button-hover:hover{background:rgba(255,255,255,.25)!important}.card-delay-1{-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s;opacity:0}.card-delay-2{-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s;opacity:0}.card-delay-3{-webkit-animation-delay:.3s;-moz-animation-delay:.3s;-o-animation-delay:.3s;animation-delay:.3s;opacity:0}.table-card-delay-1{-webkit-animation-delay:.05s;-moz-animation-delay:.05s;-o-animation-delay:.05s;animation-delay:.05s}.table-card-delay-2{-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s}.table-card-delay-3{-webkit-animation-delay:.15s;-moz-animation-delay:.15s;-o-animation-delay:.15s;animation-delay:.15s}.table-card-delay-4{-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}.table-card-delay-5{-webkit-animation-delay:.25s;-moz-animation-delay:.25s;-o-animation-delay:.25s;animation-delay:.25s}.table-card-delay-6{-webkit-animation-delay:.3s;-moz-animation-delay:.3s;-o-animation-delay:.3s;animation-delay:.3s}.header-pattern{position:absolute;top:0;left:0;width:100%;height:100%;background-image:-webkit-radial-gradient(rgba(255,255,255,.15)2px,transparent 2px);background-image:-moz-radial-gradient(rgba(255,255,255,.15)2px,transparent 2px);background-image:-o-radial-gradient(rgba(255,255,255,.15)2px,transparent 2px);background-image:radial-gradient(rgba(255,255,255,.15)2px,transparent 2px);-webkit-background-size:30px 30px;-moz-background-size:30px 30px;-o-background-size:30px 30px;background-size:30px 30px;opacity:.4;pointer-events:none}.header-circle{position:absolute;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:rgba(255,255,255,.1);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.circle-1{width:300px;height:300px;top:-150px;right:-100px}.circle-2{width:200px;height:200px;bottom:-100px;left:-50px}@media(max-width:768px){.channels-header-mobile{padding:40px 16px 60px!important;-webkit-border-bottom-left-radius:24px!important;-moz-border-radius-bottomleft:24px!important;border-bottom-left-radius:24px!important;-webkit-border-bottom-right-radius:24px!important;-moz-border-radius-bottomright:24px!important;border-bottom-right-radius:24px!important}.channels-header-icon-mobile{font-size:40px!important}.channels-header-title-mobile{font-size:24px!important}.channels-header-subtitle-mobile{font-size:14px!important}.channels-cards-container-mobile{margin-top:-40px!important;padding:0 16px 120px!important}.channels-card-inner-mobile{padding:32px 20px!important}.channels-icon-wrapper-mobile{width:100px!important;height:100px!important;margin-bottom:20px!important}.channels-channel-icon-mobile{font-size:44px!important}.channels-card-title-mobile{font-size:20px!important}.channels-card-subtitle-mobile{font-size:13px!important}.channels-stats-badge-mobile{padding:6px 12px!important;font-size:13px!important;margin-top:16px!important}.dine-in-header-mobile{padding:20px 16px!important;margin-bottom:20px!important}.dine-in-header-content-mobile{-webkit-flex-wrap:wrap!important;-ms-flex-wrap:wrap!important;flex-wrap:wrap!important;gap:12px!important}.dine-in-back-button-mobile{padding:6px 10px!important;font-size:14px!important}.dine-in-title-section-mobile{-webkit-box-flex:1!important;-webkit-flex:1 1 100%!important;-moz-box-flex:1!important;-ms-flex:1 1 100%!important;flex:1 1 100%!important;-webkit-box-ordinal-group:3!important;-webkit-order:2!important;-moz-box-ordinal-group:3!important;-ms-flex-order:2!important;order:2!important}.dine-in-stats-bar-mobile{-webkit-box-ordinal-group:4!important;-webkit-order:3!important;-moz-box-ordinal-group:4!important;-ms-flex-order:3!important;order:3!important;width:100%!important;-webkit-justify-content:space-around!important;-ms-flex-pack:distribute!important;justify-content:space-around!important;margin-top:8px!important}.dine-in-header-icon-mobile{font-size:24px!important}.dine-in-header-title-mobile{font-size:18px!important}.dine-in-table-card-mobile{margin-bottom:0!important}.dine-in-table-icon-mobile{font-size:40px!important}.dine-in-table-name-mobile{font-size:32px!important}}@media(max-width:480px){.channels-header-mobile{padding:32px 16px 50px!important}.channels-header-title-mobile{font-size:22px!important}.channels-card-inner-mobile{padding:24px 16px!important}.channels-icon-wrapper-mobile{width:80px!important;height:80px!important}.channels-channel-icon-mobile{font-size:36px!important}.dine-in-header-mobile{-webkit-border-radius:0 0 16px 16px!important;-moz-border-radius:0 0 16px 16px!important;border-radius:0 0 16px 16px!important}.dine-in-content-mobile{padding:0 12px 20px!important}.dine-in-stat-text-mobile{font-size:12px!important}}"})},11777:function(e,t,a){"use strict";a.d(t,{j:function(){return n},y:function(){return r}});let n={channelsContainer:{minHeight:"100vh",background:"linear-gradient(180deg, #f0f2f5 0%, #ffffff 100%)",fontFamily:"'Inter', 'Sarabun', sans-serif"},channelsHeader:{background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",padding:"48px 24px",textAlign:"center",position:"relative",overflow:"hidden",borderBottomLeftRadius:32,borderBottomRightRadius:32,boxShadow:"0 8px 32px rgba(24, 144, 255, 0.2)"},channelsHeaderContent:{maxWidth:800,margin:"0 auto",position:"relative",zIndex:10},channelsHeaderIcon:{fontSize:56,color:"#fff",marginBottom:16,filter:"drop-shadow(0 4px 12px rgba(0,0,0,0.15))"},channelsHeaderTitle:{color:"#fff",fontSize:36,fontWeight:700,margin:0,marginBottom:8,textShadow:"0 2px 8px rgba(0,0,0,0.1)"},channelsHeaderSubtitle:{color:"rgba(255,255,255,0.9)",fontSize:18,fontWeight:400},channelsCardsContainer:{maxWidth:1200,margin:"-40px auto 0",padding:"0 24px 80px",position:"relative",zIndex:20},channelCard:{height:"100%",borderRadius:24,border:"none",background:"#fff",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden",cursor:"pointer"},channelCardInner:{padding:"48px 32px",textAlign:"center",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative"},channelIconWrapper:{width:140,height:140,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 32px",position:"relative",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)"},channelIcon:{fontSize:64,position:"relative",zIndex:2},channelCardTitle:{fontSize:28,fontWeight:700,marginBottom:8,color:"#262626"},channelCardSubtitle:{fontSize:16,color:"#8c8c8c",fontWeight:400},channelStatsBadge:{marginTop:20,padding:"8px 16px",borderRadius:12,fontSize:14,fontWeight:600,display:"inline-flex",alignItems:"center",gap:6,transition:"all 0.3s ease"},channelActiveIndicator:{width:8,height:8,borderRadius:"50%",display:"inline-block"},channelLoadingSkeleton:{width:100,height:32,borderRadius:12,background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",marginTop:20},channelDecorativeGlow:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",borderRadius:"50%",opacity:.2,filter:"blur(20px)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)"}},r={channelHeader:{padding:"24px 16px",position:"relative",overflow:"hidden",borderBottomLeftRadius:20,borderBottomRightRadius:20,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)",marginBottom:24},channelHeaderContent:{maxWidth:1400,margin:"0 auto",position:"relative",zIndex:10,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},channelBackButton:{color:"#fff",fontSize:14,display:"flex",alignItems:"center",gap:6,background:"rgba(255,255,255,0.15)",border:"1px solid rgba(255,255,255,0.3)",borderRadius:10,padding:"6px 12px",cursor:"pointer",transition:"all 0.3s ease"},channelTitleSection:{display:"flex",alignItems:"center",gap:12,flex:1},channelHeaderIcon:{fontSize:28,color:"#fff"},channelHeaderTitle:{color:"#fff",fontSize:20,fontWeight:700,margin:0,lineHeight:1.2},channelHeaderSubtitle:{color:"rgba(255,255,255,0.9)",fontSize:13,fontWeight:400},channelStatsBar:{display:"flex",gap:12,alignItems:"center",background:"rgba(255,255,255,0.15)",padding:"8px 14px",borderRadius:10,backdropFilter:"blur(10px)",flexShrink:0},statItem:{display:"flex",alignItems:"center",gap:6},statDot:{width:8,height:8,borderRadius:"50%"},statText:{color:"#fff",fontSize:13,fontWeight:500,whiteSpace:"nowrap"},channelPageCard:{borderRadius:16,border:"none",boxShadow:"0 4px 16px rgba(0,0,0,0.08)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden",cursor:"pointer",position:"relative"},channelPageCardInner:{padding:"24px 16px",textAlign:"center",position:"relative",zIndex:2},channelPageCardIcon:{fontSize:42,marginBottom:10,display:"block"},channelPageCardMainText:{fontSize:36,fontWeight:800,marginBottom:0,color:"#1f1f1f",lineHeight:1,letterSpacing:"-1px",display:"block"},channelPageCardStatusBadge:{padding:"4px 12px",borderRadius:8,fontSize:13,fontWeight:600,display:"inline-block",marginTop:10},channelPageCardGradientOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.05,pointerEvents:"none"}}},44225:function(e,t,a){"use strict";a.d(t,{Np:function(){return o},X1:function(){return n},ax:function(){return i},hS:function(){return r}});let n={primary:"#1890ff",secondary:"#13c2c2",success:"#52c41a",warning:"#faad14",error:"#ff4d4f",background:"#f5f5f5",cardBg:"#ffffff",text:"#262626",textSecondary:"#8c8c8c",border:"#f0f0f0",id_dineIn:"#1890ff",id_takeaway:"#52c41a",id_delivery:"#722ed1",kitchen:"#ff6b35",shift:"#10b981",kitchenBg:"#0f172a",kitchenCard:"rgba(30, 41, 59, 0.7)",kitchenBorder:"rgba(255, 255, 255, 0.1)"},r={dineIn:{primary:"#1890ff",light:"#e6f7ff",border:"#91d5ff",gradient:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)"},takeaway:{primary:"#52c41a",light:"#f6ffed",border:"#b7eb8f",gradient:"linear-gradient(135deg, #52c41a 0%, #73d13d 100%)"},delivery:{primary:"#722ed1",light:"#f9f0ff",border:"#d3adf7",gradient:"linear-gradient(135deg, #722ed1 0%, #9254de 100%)"}},o={container:{minHeight:"100vh",background:n.background,fontFamily:"'Inter', 'Sarabun', sans-serif"},heroParams:{background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",padding:"32px 24px 70px",position:"relative",borderBottomLeftRadius:24,borderBottomRightRadius:24,boxShadow:"0 8px 24px rgba(24, 144, 255, 0.25)",marginBottom:-40,zIndex:1,overflow:"hidden"},kitchenContainer:{minHeight:"100vh",background:"#0f172a",padding:"24px 24px 100px",color:"#f8fafc",fontFamily:"'Inter', 'Sarabun', sans-serif"},kitchenGlassCard:{background:"rgba(30, 41, 59, 0.7)",backdropFilter:"blur(12px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:20,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",overflow:"hidden"},kitchenHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:16},shiftHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},sectionTitle:{display:"flex",alignItems:"center",gap:12,marginBottom:20,color:"#fff"},contentWrapper:{maxWidth:1400,margin:"-40px auto 30px",padding:"0 24px",position:"relative",zIndex:20},card:{borderRadius:16,boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:"none",overflow:"hidden",background:n.cardBg},itemCard:{marginBottom:8,borderRadius:8,transition:"all 0.3s ease"}},i={available:{primary:"#52c41a",light:"#f6ffed",border:"#b7eb8f",gradient:"linear-gradient(135deg, #52c41a 0%, #73d13d 100%)"},occupied:{primary:"#fa8c16",light:"#fff7e6",border:"#ffd591",gradient:"linear-gradient(135deg, #fa8c16 0%, #ffa940 100%)"},inactive:{primary:"#8c8c8c",light:"#fafafa",border:"#d9d9d9",gradient:"linear-gradient(135deg, #8c8c8c 0%, #bfbfbf 100%)"},waitingForPayment:{primary:"#1890ff",light:"#e6f7ff",border:"#91d5ff",gradient:"linear-gradient(135deg, #1890ff 0%, #40a9ff 100%)"}}},32446:function(e,t,a){"use strict";var n,r,o,i;a.d(t,{i:function(){return r},m:function(){return n}}),(o=n||(n={})).DineIn="DineIn",o.TakeAway="TakeAway",o.Delivery="Delivery",(i=r||(r={})).Pending="Pending",i.Cooking="Cooking",i.Served="Served",i.WaitingForPayment="WaitingForPayment",i.Paid="Paid",i.Completed="Completed",i.Cancelled="Cancelled"},34962:function(e,t,a){"use strict";var n,r;a.d(t,{c:function(){return n}}),(r=n||(n={})).Available="Available",r.Unavailable="Unavailable"},252:function(e,t,a){"use strict";a.d(t,{NE:function(){return d},Th:function(){return s},Do:function(){return c},Yx:function(){return u},Zu:function(){return p},Oi:function(){return l},W9:function(){return o},Tf:function(){return i}});var n=a(34962),r=a(32446);function o(e){let t={total:e.length,available:0,occupied:0,inactive:0};return e.forEach(e=>{e.is_active?e.status===n.c.Available?t.available++:t.occupied++:t.inactive++}),t}function i(e){return[...e].sort((e,t)=>{let a=parseInt(e.table_name.replace(/\D/g,"")),n=parseInt(t.table_name.replace(/\D/g,""));return isNaN(a)||isNaN(n)?e.table_name.localeCompare(t.table_name):a-n})}function s(e){return e.filter(e=>e.is_active)}function l(e){return e.is_active?"WaitingForPayment"===e.active_order_status?"waitingForPayment":e.status===n.c.Available?"available":"occupied":"inactive"}function d(e){return e?({Pending:"กำลังดำเนินการ",Cooking:"กำลังปรุง",Served:"เสิร์ฟแล้ว",WaitingForOrder:"รอรับออเดอร์",WaitingForPayment:"รอชำระเงิน",Paid:"ชำระเงินแล้ว",Completed:"เสร็จสมบูรณ์",Cancelled:"ยกเลิก"})[e]||e:""}function c(e){return e.reduce((e,t)=>(e.total++,t.status===r.i.Pending&&e.pending++,t.status===r.i.Cooking&&e.cooking++,t.status===r.i.Served&&e.served++,e),{total:0,pending:0,cooking:0,served:0})}function u(e){switch(e.status){case r.i.Pending:case r.i.Cooking:return"occupied";case r.i.Served:return"waitingForPayment";case r.i.Paid:return"available";default:return"inactive"}}let p=e=>{switch(e){case r.m.DineIn:case"DineIn":return"/pos/channels/dine-in";case r.m.TakeAway:case"TakeAway":return"/pos/channels/takeaway";case r.m.Delivery:case"Delivery":return"/pos/channels/delivery";default:return"/pos/orders"}}},61414:function(e,t,a){"use strict";a.d(t,{EO:function(){return v},Gs:function(){return l},HL:function(){return w},M9:function(){return k},Nz:function(){return y},OY:function(){return i},Rr:function(){return g},Wl:function(){return o},d$:function(){return S},d7:function(){return s},iN:function(){return u},jN:function(){return f},ku:function(){return b},mz:function(){return d},qO:function(){return c},xG:function(){return m},yj:function(){return x},zP:function(){return p},zf:function(){return _}});var n=a(32446),r=a(34962);let o=e=>{var t,a;if(e.status===r.c.Available)return"/pos/channels/dine-in/".concat(e.id);let o=e.active_order_id||(null===(t=e.active_order)||void 0===t?void 0:t.id),i=e.active_order_status||(null===(a=e.active_order)||void 0===a?void 0:a.status);return o?i===n.i.WaitingForPayment?"/pos/items/payment/".concat(o):"/pos/orders/".concat(o):"/pos/channels/dine-in/".concat(e.id)},i=e=>{switch(e){case n.i.Pending:return"orange";case n.i.Cooking:return"blue";case n.i.Served:return"green";case n.i.Paid:return"cyan";case n.i.Cancelled:return"red";case n.i.WaitingForPayment:return"gold";default:return"default"}},s=(e,t)=>{switch(e){case n.i.Pending:return"กำลังดำเนินการ";case n.i.Cooking:return"กำลังปรุง";case n.i.Served:if("TakeAway"===t||"Delivery"===t)return"ทำแล้ว";return"เสิร์ฟแล้ว";case n.i.Paid:return"ชำระเงินแล้ว";case n.i.Completed:return"สำเร็จ";case n.i.Cancelled:return"ยกเลิก";case n.i.WaitingForPayment:return"รอชำระเงิน";default:return e}},l=e=>{switch(e){case"DineIn":return"#722ed1";case"TakeAway":return"#fa8c16";case"Delivery":return"#eb2f96";default:return"#1890ff"}},d=e=>{switch(e){case"DineIn":return"ทานที่ร้าน";case"TakeAway":return"สั่งกลับบ้าน";case"Delivery":return"เดลิเวอรี่";default:return e}},c=e=>"DineIn"===e?"เสิร์ฟ":"ทำแล้ว",u=e=>"Delivery"===e?"จัดออเดอร์เสร็จแล้วพร้อมส่งให้ไรเดอร์":"DineIn"===e?"ยืนยันเสิร์ฟพร้อมชำระเงิน":"ยืนยันทำแล้วพร้อมชำระเงิน",p=e=>"DineIn"===e?"เสิร์ฟอาหารแล้ว":"ปรุงเสร็จแล้ว",m=e=>{let t="string"==typeof e?parseFloat(e):e;return"฿".concat(Number(t).toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2}))},f=e=>{var t,a;return"DineIn"===e.order_type?(null===(t=e.table)||void 0===t?void 0:t.table_name)||"ไม่ระบุโต๊ะ":"Delivery"===e.order_type?e.delivery_code||(null===(a=e.delivery)||void 0===a?void 0:a.delivery_name)||"ไม่ระบุข้อมูล":"TakeAway"===e.order_type?e.order_no||"ไม่ระบุเลขที่":e.order_no||"N/A"},y=e=>(null!=e?e:[]).filter(e=>e.status!==n.i.Cancelled),h=e=>(null!=e?e:[]).reduce((e,t)=>e+(Number(t.extra_price)||0),0),b=(e,t,a)=>((Number(e)||0)+h(a))*t,g=e=>y(e).reduce((e,t)=>{var a,n;let r=(null===(n=t.product)||void 0===n?void 0:null===(a=n.category)||void 0===a?void 0:a.display_name)||"ไม่ระบุหมวด";return e[r]=(e[r]||0)+(t.quantity||0),e},{}),x=e=>y(e).reduce((e,t)=>e+Number(t.total_price||0),0),v=e=>"DineIn"===e.order_type?"/pos/channels/dine-in":"TakeAway"===e.order_type?"/pos/channels/takeaway":"Delivery"===e.order_type?"/pos/channels/delivery":"/pos/orders",w=e=>"/pos/orders/".concat(e),k=e=>e.status===n.i.WaitingForPayment?e.order_type===n.m.Delivery?"/pos/items/delivery/".concat(e.id):"/pos/items/payment/".concat(e.id):"/pos/orders/".concat(e.id),S=e=>e===n.m.Delivery?"/pos/channels/delivery":e===n.m.TakeAway?"/pos/channels/takeaway":e===n.m.DineIn?"/pos/channels/dine-in":"/pos/channels",_=(e,t,a,r)=>({order_no:r.orderNo||"ORD-".concat(Date.now()),order_type:t,sub_total:a.subTotal,discount_amount:a.discountAmount,vat:0,total_amount:a.totalAmount,received_amount:0,change_amount:0,status:n.i.Pending,discount_id:r.discountId||null,payment_method_id:null,table_id:r.tableId||null,delivery_id:r.deliveryId||null,delivery_code:r.deliveryCode||null,items:e.map(e=>{let t=Number(e.product.price),a=(t+(e.details||[]).reduce((e,t)=>e+Number(t.extra_price),0))*e.quantity;return{product_id:e.product.id,quantity:e.quantity,price:t,total_price:a,discount_amount:0,notes:e.notes||"",status:n.i.Cooking,details:e.details||[]}})})},33203:function(e,t,a){"use strict";a.d(t,{w:function(){return f}});var n=a(2265),r=a(53286),o=a(32446),i=a(24675),s=a(67697),l=a(21652),d=a.n(l);let c=new Set([o.i.Paid,o.i.Completed,o.i.Cancelled]),u=[o.i.Pending,o.i.Cooking,o.i.Served,o.i.WaitingForPayment].join(","),p=["orders:create","orders:update","orders:delete","payments:create","payments:update"],m=(e,t)=>e.filter(e=>e.order_type===t&&!c.has(e.status));function f(e){let{orderType:t,limit:a=100,page:o=1,statusFilter:l=u,enabled:c=!0,refreshIntervalMs:f=15e3,events:y=p}=e,{socket:h}=(0,i.s)(),[b,g]=(0,n.useState)([]),[x,v]=(0,n.useState)(!0),w=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(c){e||v(!0);try{let e=await r.x.getAllSummary(void 0,o,a,l,t),n=m(e.data||[],t);g(e=>d()(e,n)?e:n)}catch(e){}finally{e||v(!1)}}},[c,a,t,o,l]);return(0,n.useEffect)(()=>{c&&w(!1)},[c,w,l]),(0,s.D)({socket:h,events:y,onRefresh:()=>w(!0),intervalMs:f,enabled:c,debounceMs:800}),{orders:b,isLoading:x,refresh:w}}},67697:function(e,t,a){"use strict";a.d(t,{D:function(){return i},v:function(){return o}});var n=a(2265);let r=e=>{if("string"==typeof e)return e;if(e&&"object"==typeof e){var t;if("id"in e&&e.id)return e.id;if("data"in e&&(null===(t=e.data)||void 0===t?void 0:t.id))return e.data.id}};function o(e,t,a){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e.id,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>!0;(0,n.useEffect)(()=>{if(!e)return;let n=e=>{if(!i(e))return;let t=o(e);a(a=>a.some(e=>o(e)===t)?a:[...a,e])},s=e=>{let t=o(e);a(a=>i(e)?a.some(e=>o(e)===t)?a.map(a=>o(a)===t?e:a):[...a,e]:a.filter(e=>o(e)!==t))},l=e=>{let t=r(e);t&&a(e=>e.filter(e=>o(e)!==t))};return e.on(t.create,n),e.on(t.update,s),e.on(t.delete,l),()=>{e.off(t.create,n),e.off(t.update,s),e.off(t.delete,l)}},[e,t.create,t.update,t.delete,o,a,i])}function i(e){let{socket:t,events:a=[],onRefresh:r,intervalMs:o,enabled:i=!0,debounceMs:s}=e;(0,n.useEffect)(()=>{if(!i||!t||0===a.length)return;let e=null,n=()=>{if(!s||s<=0){r();return}e&&clearTimeout(e),e=setTimeout(()=>{e=null,r()},s)};return a.forEach(e=>t.on(e,n)),()=>{e&&clearTimeout(e),a.forEach(e=>t.off(e,n))}},[i,t,a,r,s]),(0,n.useEffect)(()=>{if(!i||!o)return;let e=setInterval(r,o);return()=>clearInterval(e)},[i,o,r])}}},function(e){e.O(0,[5015,7717,7698,742,3211,7993,8651,2646,6207,7213,9021,2224,3248,1721,5616,8589,5496,3834,19,9763,1713,4221,5531,3754,2971,2117,1744],function(){return e(e.s=15392)}),_N_E=e.O()}]);