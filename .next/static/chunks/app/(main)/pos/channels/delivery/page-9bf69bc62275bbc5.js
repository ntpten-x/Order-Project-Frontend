(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3859,9385],{15392:function(e,t,r){Promise.resolve().then(r.bind(r,43865))},5540:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2265),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},o=r(55015);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var s=a.forwardRef((e,t)=>a.createElement(o.Z,i({},e,{ref:t,icon:n})))},67605:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(2265),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"},o=r(55015);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}var s=a.forwardRef((e,t)=>a.createElement(o.Z,i({},e,{ref:t,icon:n})))},53743:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var a=r(42535),n=r(50815),o=r(74079),i=r(2265),s=r(28975),c=r(61994),l=r(93942),d=r(71744),u=r(64024),m=r(85695),f=r(90024),p=r(4065),h=(0,l.i)(e=>{let{prefixCls:t,className:r,closeIcon:a,closable:n,type:o,title:l,children:h,footer:y,...b}=e,{getPrefixCls:g}=i.useContext(d.E_),v=g(),x=t||g("modal"),k=(0,u.Z)(v),[_,w]=(0,p.ZP)(x,k),S="".concat(x,"-confirm"),j={};return j=o?{closable:null!=n&&n,title:"",footer:"",children:i.createElement(m.O,{...e,prefixCls:x,confirmPrefixCls:S,rootPrefixCls:v,content:h})}:{closable:null==n||n,title:l,footer:null!==y&&i.createElement(f.$,{...e}),children:h},i.createElement(s.s,{prefixCls:x,className:(0,c.W)(_,"".concat(x,"-pure-panel"),o&&S,o&&"".concat(S,"-").concat(o),r,w,k),...b,closeIcon:(0,f.b)(x,a),closable:n,...j})}),y=r(23248);function b(e){return(0,a.ZP)((0,a.uW)(e))}let g=o.Z;g.useModal=y.Z,g.info=function(e){return(0,a.ZP)((0,a.cw)(e))},g.success=function(e){return(0,a.ZP)((0,a.vq)(e))},g.error=function(e){return(0,a.ZP)((0,a.AQ)(e))},g.warning=b,g.warn=b,g.confirm=function(e){return(0,a.ZP)((0,a.Au)(e))},g.destroyAll=function(){for(;n.Z.length;){let e=n.Z.pop();e&&e()}},g.config=a.ai,g._InternalPanelDoNotUseOrYouWillBeFired=h;var v=g},45721:function(e){var t;t=function(){return function(e,t,r){e=e||{};var a=t.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(e,t,r,n){return a.fromToBase(e,t,r,n)}r.en.relativeTime=n,a.fromToBase=function(t,a,o,i,s){for(var c,l,d,u=o.$locale().relativeTime||n,m=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=m.length,p=0;p<f;p+=1){var h=m[p];h.d&&(c=i?r(t).diff(o,h.d,!0):o.diff(t,h.d,!0));var y=(e.rounding||Math.round)(Math.abs(c));if(d=c>0,y<=h.r||!h.r){y<=1&&p>0&&(h=m[p-1]);var b=u[h.l];s&&(y=s(""+y)),l="string"==typeof b?b.replace("%d",y):b(y,a,h.l,d);break}}if(a)return l;var g=d?u.future:u.past;return"function"==typeof g?g(l):g.replace("%s",l)},a.to=function(e,t){return o(e,t,this,!0)},a.from=function(e,t){return o(e,t,this)};var i=function(e){return e.$u?r.utc():r()};a.toNow=function(e){return this.to(i(this),e)},a.fromNow=function(e){return this.from(i(this),e)}}},e.exports=t()},43865:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return V}});var a=r(57437),n=r(29),o=r.n(n),i=r(2265),s=r(99376),c=r(39486),l=r(34029),d=r(24783),u=r(80009),m=r(50742),f=r(47451),p=r(69410),h=r(53743),y=r(93834),b=r(88589),g=r(67605),v=r(96473),x=r(5540),k=r(25193),_=r(37410),w=r(20148),S=r(2786),j=r(30290),E=r(36799),P=r(29827),T=r(11713),C=r(46252),O=r(2913),Z=r(71567),A=r(98170);let R=Z.q.POS.DELIVERY,N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",r={};return t&&(r["Content-Type"]=t),e&&(r.Cookie=e),r},D=async(e,t)=>{let r=(0,O.b)("GET",R),a=new URLSearchParams(t||"");a.has("page")||a.set("page","1"),a.has("limit")||a.set("limit","200");let n=a.toString();n&&(r+="?".concat(n));let o=N(e,""),i=await fetch(r,{cache:"no-store",headers:o,credentials:"include"});if(!i.ok){var s;let e=await i.json().catch(()=>({}));throw Error((null==e?void 0:null===(s=e.error)||void 0===s?void 0:s.message)||e.error||e.message||"Failed to fetch delivery providers")}return(0,A.XO)(await i.json())};var I=r(12028),L=r(32446),H=r(44225),U=r(11777),q=r(25369),z=r(252),F=r(61414),B=r(3369),M=r(33203),X=r(71096),Q=r.n(X),W=r(45721),G=r.n(W);r(6729);let{Text:Y}=c.default;function V(){let e=(0,s.useRouter)(),{showLoading:t,hideLoading:r}=(0,B.x)(),{deliveryProviders:n,isLoading:c,isError:O,mutate:Z}=function(){let{socket:e}=(0,i.useContext)(C.J),t=(0,P.NL)(),{data:r,error:a,isLoading:n,refetch:o}=(0,T.a)({queryKey:["delivery"],queryFn:async()=>(await D()).data,staleTime:5e3});return(0,i.useEffect)(()=>{if(!e)return;let r=()=>{t.invalidateQueries({queryKey:["delivery"]})};return e.on(I.b.delivery.create,r),e.on(I.b.delivery.update,r),e.on(I.b.delivery.delete,r),()=>{e.off(I.b.delivery.create,r),e.off(I.b.delivery.update,r),e.off(I.b.delivery.delete,r)}},[e,t]),{deliveryProviders:r||[],isLoading:n,isError:a,mutate:o}}(),{orders:A,isLoading:R}=(0,M.w)({orderType:L.m.Delivery}),[N,X]=(0,i.useState)(!1),W=(0,i.useMemo)(()=>(0,z.Do)(A),[A]),[G,V]=(0,i.useState)(""),[J,$]=(0,i.useState)(null),K=(0,i.useMemo)(()=>n.find(e=>e.id===J),[n,J]);(0,i.useEffect)(()=>{R||c?t((0,E.t)("delivery.loadingOrders")):r()},[R,c,t,r]);let ee=t=>{let r=(0,F.M9)(t);e.push(r)},et=()=>{V(""),$(null),X(!0)},er=()=>{if(!J){l.ZP.error("กรุณาเลือกผู้ให้บริการ");return}if(!G.trim()){l.ZP.error("กรุณากรอกรหัสออเดอร์");return}t("กำลังเข้าสู่หน้าออเดอร์...");let r=G.trim();(null==K?void 0:K.delivery_prefix)&&(r="".concat(K.delivery_prefix,"-").concat(r)),e.push("/pos/channels/delivery/".concat(J,"?code=").concat(encodeURIComponent(r)))},ea=e=>{switch(e){case"available":return"success";case"occupied":return"orange";case"waitingForPayment":return"blue";default:return"default"}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.c,{}),(0,a.jsx)(o(),{id:U.N5.__hash,children:U.N5}),(0,a.jsx)(o(),{id:"c1ca8602d2ef2218",children:".order-card-hover{-webkit-transition:all.3s cubic-bezier(.4,0,.2,1)!important;-moz-transition:all.3s cubic-bezier(.4,0,.2,1)!important;-o-transition:all.3s cubic-bezier(.4,0,.2,1)!important;transition:all.3s cubic-bezier(.4,0,.2,1)!important}.order-card-hover:hover{-webkit-transform:translatey(-4px)!important;-moz-transform:translatey(-4px)!important;-ms-transform:translatey(-4px)!important;-o-transform:translatey(-4px)!important;transform:translatey(-4px)!important;-webkit-box-shadow:0 12px 28px rgba(0,0,0,.1)!important;-moz-box-shadow:0 12px 28px rgba(0,0,0,.1)!important;box-shadow:0 12px 28px rgba(0,0,0,.1)!important}.order-card-hover:active{-webkit-transform:translatey(-2px)scale(.99)!important;-moz-transform:translatey(-2px)scale(.99)!important;-ms-transform:translatey(-2px)scale(.99)!important;-o-transform:translatey(-2px)scale(.99)!important;transform:translatey(-2px)scale(.99)!important}@media(hover:none){.order-card-hover:active{-webkit-transform:scale(.98)!important;-moz-transform:scale(.98)!important;-ms-transform:scale(.98)!important;-o-transform:scale(.98)!important;transform:scale(.98)!important}.order-card-hover:hover{-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important}}.back-button-hover:hover{background:rgba(255,255,255,.28)!important;-webkit-transform:translatex(-2px);-moz-transform:translatex(-2px);-ms-transform:translatex(-2px);-o-transform:translatex(-2px);transform:translatex(-2px)}.add-button-hover:hover{-webkit-transform:translatey(-2px)!important;-moz-transform:translatey(-2px)!important;-ms-transform:translatey(-2px)!important;-o-transform:translatey(-2px)!important;transform:translatey(-2px)!important;-webkit-box-shadow:0 12px 24px rgba(139,92,246,.35)!important;-moz-box-shadow:0 12px 24px rgba(139,92,246,.35)!important;box-shadow:0 12px 24px rgba(139,92,246,.35)!important}.add-button-hover:active{-webkit-transform:scale(.98)!important;-moz-transform:scale(.98)!important;-ms-transform:scale(.98)!important;-o-transform:scale(.98)!important;transform:scale(.98)!important}.hide-on-mobile{display:inline!important}.show-on-mobile-inline{display:none!important}@media(max-width:768px){.hide-on-mobile{display:none!important}.show-on-mobile-inline{display:inline!important}}.delivery-modal .ant-modal-content{-webkit-border-radius:20px!important;-moz-border-radius:20px!important;border-radius:20px!important;overflow:hidden}.delivery-modal .ant-modal-header{padding:20px 24px 16px!important;border-bottom:1px solid#f0f0f0!important}.delivery-modal .ant-modal-body{padding:24px!important}.delivery-modal .ant-modal-footer{padding:16px 24px 20px!important;border-top:1px solid#f0f0f0!important}"}),(0,a.jsxs)("div",{style:H.Np.container,className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsx)(w.Z,{title:"เดลิเวอรี่",subtitle:(0,a.jsxs)(d.Z,{size:8,wrap:!0,children:[(0,a.jsxs)(u.Z,{children:["ทั้งหมด ",W.total]}),(0,a.jsxs)(u.Z,{color:"orange",children:["กำลังปรุง ",W.cooking]})]}),onBack:()=>{e.push("/pos/channels")},icon:(0,a.jsx)(g.Z,{style:{fontSize:20}}),actions:(0,a.jsx)(m.ZP,{type:"primary",icon:(0,a.jsx)(v.Z,{}),onClick:et,children:"เพิ่มออเดอร์"})}),(0,a.jsx)(k.Z,{children:O?(0,a.jsx)(j.Z,{status:"error",title:(0,E.t)("page.error"),onRetry:()=>Z()}):c||0!==n.length?(0,a.jsx)(_.Z,{title:"ออเดอร์",children:A.length>0?(0,a.jsx)(f.Z,{gutter:[16,16],children:A.map((e,t)=>{var r;let o=(0,z.Yx)(e),i=H.ax[o],s=n.find(t=>t.id===e.delivery_id),c=e.delivery_code||e.order_no.split("-").pop();return(0,a.jsx)(p.Z,{xs:24,sm:12,md:8,lg:6,xl:6,className:"delivery-order-col-mobile",children:(0,a.jsxs)("article",{style:{...U.yy.orderCard,border:"1.5px solid ".concat(i.border)},onClick:()=>ee(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),ee(e))},role:"button",tabIndex:0,"aria-label":"ออเดอร์ ".concat(c," - ").concat((0,z.NE)(e.status)),className:"jsx-c1ca8602d2ef2218 "+"order-card-hover delivery-order-card table-card-animate table-card-delay-".concat(t%6+1),children:[(0,a.jsxs)("div",{style:{...U.yy.orderCardHeader,background:i.light},className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsx)("div",{style:{width:40,height:40,borderRadius:12,background:"".concat(i.primary,"20"),display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-c1ca8602d2ef2218",children:(0,a.jsx)(g.Z,{style:{color:i.primary,fontSize:20}})}),(0,a.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsx)(Y,{strong:!0,style:{fontSize:16,color:"#1E293B",display:"block",lineHeight:1.2},children:c}),(0,a.jsx)(Y,{type:"secondary",style:{fontSize:11},children:(null==s?void 0:s.delivery_name)||"Delivery"})]})]}),(0,a.jsx)(u.Z,{color:ea(o),style:{borderRadius:8,margin:0,fontWeight:600,border:"none",padding:"4px 12px"},children:(0,z.NE)(e.status)})]}),(0,a.jsx)("div",{style:U.yy.orderCardContent,className:"jsx-c1ca8602d2ef2218",children:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsx)(Y,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:4},children:"รายการสินค้า"}),(0,a.jsxs)(Y,{strong:!0,style:{fontSize:16},children:[e.items_count||0," รายการ"]})]}),(0,a.jsxs)("div",{style:{textAlign:"right"},className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsx)(Y,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:4},children:"ยอดรวม"}),(0,a.jsxs)(Y,{strong:!0,style:{fontSize:20,color:i.primary},children:["฿",null===(r=e.total_amount)||void 0===r?void 0:r.toLocaleString()]})]})]})}),(0,a.jsxs)("div",{style:U.yy.orderCardFooter,className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsx)(x.Z,{style:{fontSize:12,color:"#94A3B8"}}),(0,a.jsx)(Y,{type:"secondary",style:{fontSize:12},children:Q()(e.create_date).fromNow()})]}),(0,a.jsx)(u.Z,{style:{margin:0,borderRadius:6,background:H.hS.delivery.light,color:H.hS.delivery.primary,border:"1px solid ".concat(H.hS.delivery.border),fontSize:11,fontWeight:600},children:"Delivery"})]})]})},e.id)})}):(0,a.jsx)(S.Z,{title:(0,E.t)("delivery.noOrders"),description:"เริ่มรับออเดอร์โดยกดปุ่ม “เพิ่มออเดอร์”",action:(0,a.jsx)(m.ZP,{type:"primary",icon:(0,a.jsx)(v.Z,{}),onClick:et,children:(0,E.t)("delivery.createNewOrder")})})}):(0,a.jsx)(j.Z,{status:"empty",title:(0,E.t)("delivery.noProviders"),action:(0,a.jsx)(m.ZP,{onClick:()=>Z(),children:(0,E.t)("delivery.retry")})})}),(0,a.jsx)(h.Z,{title:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsx)("div",{style:{width:40,height:40,borderRadius:12,background:H.hS.delivery.light,display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-c1ca8602d2ef2218",children:(0,a.jsx)(g.Z,{style:{color:H.hS.delivery.primary,fontSize:20}})}),(0,a.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsx)("div",{style:{fontSize:18,fontWeight:700,color:"#1E293B"},className:"jsx-c1ca8602d2ef2218",children:(0,E.t)("delivery.createOrder")}),(0,a.jsx)("div",{style:{fontSize:13,fontWeight:400,color:"#94A3B8"},className:"jsx-c1ca8602d2ef2218",children:(0,E.t)("delivery.createOrderSubtitle")})]})]}),open:N,onOk:er,onCancel:()=>X(!1),okText:"ยืนยัน",cancelText:"ยกเลิก",centered:!0,className:"delivery-modal",okButtonProps:{style:{background:H.hS.delivery.primary,borderColor:H.hS.delivery.primary,height:44,borderRadius:12,fontWeight:600,padding:"0 24px"},disabled:c||!J||!G.trim()},cancelButtonProps:{style:{height:44,borderRadius:12,fontWeight:600,padding:"0 24px"}},children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:20},className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsx)(Y,{strong:!0,style:{display:"block",marginBottom:8,fontSize:14,color:"#475569"},children:(0,E.t)("delivery.selectProvider")}),(0,a.jsx)(y.default,{placeholder:(0,E.t)("delivery.selectProviderPlaceholder"),style:{width:"100%"},size:"large",value:J,onChange:$,options:n.map(e=>({label:e.delivery_name,value:e.id})),loading:c,dropdownStyle:{borderRadius:12,padding:8},dropdownMatchSelectWidth:!0,getPopupContainer:e=>(null==e?void 0:e.closest(".delivery-modal"))||(null==e?void 0:e.parentElement)||document.body,notFoundContent:c?(0,E.t)("delivery.loadingOrders"):(0,E.t)("delivery.noProviders")})]}),(0,a.jsxs)("div",{className:"jsx-c1ca8602d2ef2218",children:[(0,a.jsx)(Y,{strong:!0,style:{display:"block",marginBottom:8,fontSize:14,color:"#475569"},children:(0,E.t)("delivery.orderCode")}),(0,a.jsx)(b.default,{placeholder:(0,E.t)("delivery.enterOrderCode"),addonBefore:(null==K?void 0:K.delivery_prefix)?"".concat(K.delivery_prefix,"-"):void 0,value:G,onChange:e=>V(e.target.value),size:"large",onPressEnter:er,style:{borderRadius:8}})]})]})})]})]})}Q().extend(G()),Q().locale("th")},2786:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var a=r(57437);r(2265);var n=r(96931),o=r(85180),i=r(39486),s=r(87530);function c(e){let{title:t="ไม่มีข้อมูล",description:r,action:c,image:l}=e;return(0,a.jsx)(n.Z,{size:"small",variant:"outlined",style:{borderRadius:s.H.cardRadiusLG},bodyStyle:{padding:20},children:(0,a.jsx)(o.Z,{image:l,description:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,a.jsx)(i.default.Text,{strong:!0,children:t}),r?(0,a.jsx)(i.default.Text,{type:"secondary",children:r}):null]}),children:c})})}},30290:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}});var a=r(57437);r(2265);var n=r(39486),o=r(10868),i=r(48651),s=r(71047),c=r(50742),l=r(87530),d=r(36799);let{Text:u}=n.default;function m(e){let{status:t,title:r,description:n,onRetry:m,action:f,style:p}=e;return"loading"===t?(0,a.jsxs)(o.Z,{align:"center",justify:"center",style:{minHeight:200,...p,gap:12},children:[(0,a.jsx)(i.Z,{size:"large"}),(0,a.jsx)(u,{type:"secondary",children:r||(0,d.t)("network.loading")})]}):"error"===t?(0,a.jsx)(s.ZP,{status:"error",title:r||(0,d.t)("page.error"),subTitle:n,extra:f||(m?(0,a.jsx)(c.ZP,{type:"primary",onClick:m,children:(0,d.t)("page.retry")}):void 0),style:{padding:l.H.pagePaddingY,...p}}):(0,a.jsx)(s.ZP,{status:"info",title:r||(0,d.t)("page.empty"),subTitle:n,extra:f,style:{padding:l.H.pagePaddingY,...p}})}},71567:function(e,t,r){"use strict";r.d(t,{q:function(){return n},v:function(){return a}});let a="/api",n={AUTH:{LOGIN:"/auth/login",LOGOUT:"/auth/logout",ME:"/auth/me",CSRF:"/csrf",SWITCH_BRANCH:"/auth/switch-branch"},AUDIT:{LOGS:"/audit/logs"},POS:{PRODUCTS:"/pos/products",ORDERS:"/pos/orders",TABLES:"/pos/tables",DISCOUNTS:"/pos/discounts",DELIVERY:"/pos/delivery",PAYMENT_METHODS:"/pos/paymentMethod",PAYMENTS:"/pos/payments",CATEGORY:"/pos/category",SHIFTS:{BASE:"/pos/shifts",CURRENT:"/pos/shifts/current",OPEN:"/pos/shifts/open",CLOSE:"/pos/shifts/close"},DASHBOARD:{SALES:"/pos/dashboard/sales",TOP_ITEMS:"/pos/dashboard/top-items"},CHANNELS:{STATS:"/pos/orders/stats"},SHOP_PROFILE:"/pos/shopProfile",SALES_ORDER_ITEMS:"/pos/salesOrderItem",SALES_ORDER_DETAILS:"/pos/salesOrderDetail",PRODUCTS_UNIT:"/pos/productsUnit",PAYMENT_DETAILS:"/pos/paymentDetails",BRANCH:"/branches",ORDER_QUEUE:"/pos/queue"}}},24675:function(e,t,r){"use strict";r.d(t,{s:function(){return o}});var a=r(2265),n=r(46252);let o=()=>(0,a.useContext)(n.J)},2913:function(e,t,r){"use strict";function a(e,t){return({GET:"".concat(n.API_BASE_URL).concat(t),POST:"".concat(n.API_BASE_URL).concat(t),PUT:"".concat(n.API_BASE_URL).concat(t),DELETE:"".concat(n.API_BASE_URL).concat(t),PATCH:"".concat(n.API_BASE_URL).concat(t)})[e]}r.d(t,{b:function(){return a}});let n={get API_BASE_URL(){return"/api"}}},5447:function(e,t,r){"use strict";r.d(t,{O:function(){return i}});var a=r(71567),n=r(2913),o=r(98170);let i={login:async(e,t,r)=>{try{let s=(0,n.b)("POST",a.q.AUTH.LOGIN),c={"Content-Type":"application/json"};t&&(c["X-CSRF-Token"]=t),r&&(c.Cookie=r);let l=await fetch(s,{method:"POST",headers:c,credentials:"include",body:JSON.stringify(e)});if(!l.ok){var i;let e=await l.json().catch(()=>({})),t=(null==e?void 0:null===(i=e.error)||void 0===i?void 0:i.message)||e.message||e.detail||"Login failed";throw Error(t)}let d=(0,o.hH)(await l.json());return{...d.user,token:d.token}}catch(e){throw Error(e.message||"เข้าสู่ระบบไม่สำเร็จ")}},logout:async(e,t,r)=>{try{let o=(0,n.b)("POST",a.q.AUTH.LOGOUT),i={"Content-Type":"application/json"};e&&(i.Authorization="Bearer ".concat(e)),t&&(i["X-CSRF-Token"]=t),r&&(i.Cookie=r),await fetch(o,{method:"POST",headers:i,credentials:"include"})}catch(e){console.error("Logout failed",e)}},switchBranch:async(e,t,r)=>{let i=(0,n.b)("POST",a.q.AUTH.SWITCH_BRANCH),s={"Content-Type":"application/json"};t&&(s["X-CSRF-Token"]=t),r&&(s.Cookie=r);let c=await fetch(i,{method:"POST",headers:s,credentials:"include",body:JSON.stringify({branch_id:e})});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error((0,o.i_)(e,"Failed to switch branch"))}return(0,o.hH)(await c.json())},getMe:async e=>{try{let t=(0,n.b)("GET",a.q.AUTH.ME),r={"Content-Type":"application/json"};e&&(r.Authorization="Bearer ".concat(e));let i=await fetch(t,{method:"GET",headers:r,credentials:"include",cache:"no-store"});if(!i.ok)throw Error("Unauthorized");return(0,o.hH)(await i.json())}catch(e){throw e}},async getCsrfToken(){try{let e=await fetch("".concat(a.v).concat(a.q.AUTH.CSRF),{credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>({}));return console.error("CSRF token fetch failed:",e.status,t),""}let t=await e.json();if(t.success&&t.csrfToken||t.csrfToken)return t.csrfToken;return""}catch(e){return console.error("Failed to fetch CSRF token",e),""}}}},53286:function(e,t,r){"use strict";r.d(t,{x:function(){return x}});var a=r(20019),n=r(2913),o=r(71567),i=r(32446);let s=a.Ryn({id:a.Z_8(),username:a.Z_8()}).partial().nullable(),c=a.Ryn({id:a.Z_8(),display_name:a.Z_8()}).partial().nullable(),l=a.Ryn({id:a.Z_8(),display_name:a.Z_8(),img_url:a.Z_8().nullable(),price:a.oQ2.number(),category:c.optional()}).partial().nullable(),d=a.Ryn({id:a.Z_8().optional(),detail_name:a.Z_8(),extra_price:a.oQ2.number()}).partial(),u=a.Ryn({id:a.Z_8(),order_id:a.Z_8(),product_id:a.Z_8(),product_name:a.Z_8().optional(),quantity:a.oQ2.number(),price:a.oQ2.number(),total_price:a.oQ2.number(),discount_amount:a.oQ2.number().optional().default(0),notes:a.Z_8().nullable().optional(),status:a.jbo(i.i).optional(),product:l.optional(),details:a.IXX(d).optional()}),m=a.Ryn({id:a.Z_8(),order_no:a.Z_8(),order_type:a.jbo(i.m),table_id:a.Z_8().nullable().optional(),delivery_id:a.Z_8().nullable().optional(),delivery_code:a.Z_8().nullable().optional(),sub_total:a.oQ2.number(),discount_id:a.Z_8().nullable().optional(),discount_amount:a.oQ2.number(),vat:a.oQ2.number(),total_amount:a.oQ2.number(),received_amount:a.oQ2.number(),change_amount:a.oQ2.number(),status:a.jbo(i.i),created_by_id:a.Z_8().nullable().optional(),create_date:a.Z_8(),update_date:a.Z_8(),items:a.IXX(u).optional(),created_by:s.optional(),table:a.YjB().optional(),delivery:a.YjB().optional(),discount:a.YjB().optional(),payments:a.IXX(a.YjB()).optional()}),f=a.Ryn({data:a.IXX(m),total:a.oQ2.number(),page:a.oQ2.number(),last_page:a.oQ2.number().optional()}),p=a.Ryn({table_name:a.Z_8().nullable().optional(),delivery_name:a.Z_8().nullable().optional()}).partial().nullable(),h=a.Ryn({id:a.Z_8(),order_no:a.Z_8(),order_type:a.jbo(i.m),status:a.jbo(i.i),create_date:a.Z_8(),total_amount:a.oQ2.number(),delivery_code:a.Z_8().nullable().optional(),table_id:a.Z_8().nullable().optional(),delivery_id:a.Z_8().nullable().optional(),table:p.optional(),delivery:p.optional(),items_summary:a.IMB(a.Z_8(),a.oQ2.number()).optional(),items_count:a.oQ2.number().optional()}),y=a.Ryn({data:a.IXX(h),total:a.oQ2.number(),page:a.oQ2.number(),last_page:a.oQ2.number().optional()});var b=r(98170);let g=o.q.POS.ORDERS,v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",r={};return t&&(r["Content-Type"]=t),e&&(r.Cookie=e),r},x={getAll:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,c=new URLSearchParams({page:t.toString(),limit:r.toString(),...o&&{status:o},...i&&{type:i},...s&&{q:s}}),l="".concat(g,"?").concat(c.toString()),d=(0,n.b)("GET",l),u=v(e,""),m=await fetch(d,{cache:"no-store",headers:u,credentials:"include"});if(!m.ok){let e=await m.json().catch(()=>({}));throw Error((0,b.i_)(e,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}let p=await m.json();try{return f.parse((0,b.XO)(p))}catch(e){throw console.error("Zod Validation Error in ordersService.getAll:",e),e instanceof a.jmq&&console.error("Zod Issues:",e.issues),e}},getAllSummary:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,c=new URLSearchParams({page:t.toString(),limit:r.toString(),...o&&{status:o},...i&&{type:i},...s&&{q:s}}),l="".concat(g,"/summary?").concat(c.toString()),d=(0,n.b)("GET",l),u=v(e,""),m=await fetch(d,{cache:"no-store",headers:u,credentials:"include"});if(!m.ok){let e=await m.json().catch(()=>({}));throw Error((0,b.i_)(e,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}let f=await m.json();try{return y.parse((0,b.XO)(f))}catch(e){throw console.error("Zod Validation Error in ordersService.getAllSummary:",e),e instanceof a.jmq&&console.error("Zod Issues:",e.issues),e}},getStats:async e=>{let t=(0,n.b)("GET",o.q.POS.CHANNELS.STATS),r=v(e,""),a=await fetch(t,{cache:"no-store",headers:r,credentials:"include"});if(!a.ok){let e=await a.text();console.error("Order Stats Backend Error:",e);let t=await JSON.parse(e).catch(()=>({}));throw Error((0,b.i_)(t,"ไม่สามารถดึงข้อมูลสถิติได้"))}let i=await a.json();return(0,b.hH)(i)},getById:async(e,t)=>{let r=(0,n.b)("GET","".concat(g,"/").concat(e)),o=v(t,""),i=await fetch(r,{cache:"no-store",headers:o,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,b.i_)(e,"ไม่สามารถดึงข้อมูลออเดอร์ได้"))}let s=await i.json();try{let e=(0,b.hH)(s);if(Array.isArray(e)){if(0===e.length)throw Error("Order not found");return m.parse(e[0])}return m.parse(e)}catch(e){throw console.error("Zod Validation Error in ordersService.getById:",e),e instanceof a.jmq&&console.error("Zod Issues:",e.issues),e}},create:async(e,t,r)=>{let a=(0,n.b)("POST","".concat(g)),o=v(t);r&&(o["X-CSRF-Token"]=r);let i=await fetch(a,{method:"POST",headers:o,credentials:"include",body:JSON.stringify(e)});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,b.i_)(e,"ไม่สามารถสร้างออเดอร์ได้"))}return(0,b.hH)(await i.json())},update:async(e,t,r,a)=>{let o=(0,n.b)("PUT","".concat(g,"/").concat(e)),i=v(r);a&&(i["X-CSRF-Token"]=a);let s=await fetch(o,{method:"PUT",headers:i,credentials:"include",body:JSON.stringify(t)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,b.i_)(e,"ไม่สามารถแก้ไขออเดอร์ได้"))}return(0,b.hH)(await s.json())},delete:async(e,t,r)=>{let a=(0,n.b)("DELETE","".concat(g,"/").concat(e)),o=v(t,"");r&&(o["X-CSRF-Token"]=r);let i=await fetch(a,{method:"DELETE",headers:o,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,b.i_)(e,"ไม่สามารถลบออเดอร์ได้"))}},updateItemStatus:async(e,t,r,a)=>{let o=(0,n.b)("PATCH","".concat(g,"/items/").concat(e,"/status")),i=v(r);a&&(i["X-CSRF-Token"]=a);let s=await fetch(o,{method:"PATCH",headers:i,credentials:"include",body:JSON.stringify({status:t})});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,b.i_)(e,"ไม่สามารถอัปเดตสถานะรายการได้"))}},getItems:async(e,t)=>{let r=(0,n.b)("GET","".concat(g,"/items").concat(e?"?status=".concat(e):"")),a=v(t,""),o=await fetch(r,{cache:"no-store",headers:a,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error((0,b.i_)(e,"ไม่สามารถดึงข้อมูลรายการได้"))}let i=(0,b.hH)(await o.json());if(Array.isArray(i))return i;if(i&&"object"==typeof i&&"data"in i){let e=i.data;if(Array.isArray(e))return e}return i},addItem:async(e,t,r,a)=>{let o=(0,n.b)("POST","".concat(g,"/").concat(e,"/items")),i=v(r);a&&(i["X-CSRF-Token"]=a);let s=await fetch(o,{method:"POST",headers:i,credentials:"include",body:JSON.stringify(t)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,b.i_)(e,"ไม่สามารถเพิ่มรายการได้"))}return(0,b.hH)(await s.json())},updateItem:async(e,t,r,a)=>{let o=(0,n.b)("PUT","".concat(g,"/items/").concat(e)),i=v(r,"application/json");a&&(i["X-CSRF-Token"]=a);let s=await fetch(o,{method:"PUT",headers:i,credentials:"include",body:JSON.stringify(t)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,b.i_)(e,"ไม่สามารถแก้ไขรายการได้"))}return(0,b.hH)(await s.json())},deleteItem:async(e,t,r)=>{let a=(0,n.b)("DELETE","".concat(g,"/items/").concat(e)),o=v(t,"");r&&(o["X-CSRF-Token"]=r);let i=await fetch(a,{method:"DELETE",headers:o,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,b.i_)(e,"ไม่สามารถลบรายการได้"))}return(0,b.hH)(await i.json())},updateStatus:async(e,t,r)=>{let a={"Content-Type":"application/json"};r&&(a["X-CSRF-Token"]=r);let o=(0,n.b)("PUT","".concat(g,"/").concat(e));if(!(await fetch(o,{method:"PUT",headers:a,body:JSON.stringify({status:t}),credentials:"include"})).ok)throw Error("Failed to update status")}}},34962:function(e,t,r){"use strict";var a,n;r.d(t,{c:function(){return a}}),(n=a||(a={})).Available="Available",n.Unavailable="Unavailable"},98170:function(e,t,r){"use strict";function a(e){return!!e&&"object"==typeof e}function n(e){return e&&"object"==typeof e&&"success"in e&&!0===e.success&&"data"in e?e.data:e}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Request failed";if("string"==typeof e)return e;if(!a(e))return t;if(!1===e.success){let t=e.error;if(a(t)&&"string"==typeof t.message&&t.message.trim())return t.message}if("error"in e){let t=e.error;if("string"==typeof t&&t.trim())return t;if(a(t)&&"string"==typeof t.message&&t.message.trim())return t.message}return"string"==typeof e.message&&e.message.trim()?e.message:t}function i(e){if(e&&"object"==typeof e&&"success"in e&&!0===e.success&&Array.isArray(e.data)){var t,r,a,n;let o="number"==typeof(null===(t=e.meta)||void 0===t?void 0:t.total)?e.meta.total:e.data.length,i="number"==typeof(null===(r=e.meta)||void 0===r?void 0:r.page)?e.meta.page:1,s="number"==typeof(null===(a=e.meta)||void 0===a?void 0:a.limit)?e.meta.limit:50,c="number"==typeof(null===(n=e.meta)||void 0===n?void 0:n.totalPages)?e.meta.totalPages:Math.max(Math.ceil(o/Math.max(s,1)),1);return{data:e.data,total:o,page:i,last_page:c}}return e}r.d(t,{XO:function(){return i},hH:function(){return n},i_:function(){return o}})},252:function(e,t,r){"use strict";r.d(t,{NE:function(){return l},Th:function(){return s},Do:function(){return d},Yx:function(){return u},Zu:function(){return m},Oi:function(){return c},W9:function(){return o},Tf:function(){return i}});var a=r(34962),n=r(32446);function o(e){let t={total:e.length,available:0,occupied:0,inactive:0};return e.forEach(e=>{e.is_active?e.status===a.c.Available?t.available++:t.occupied++:t.inactive++}),t}function i(e){return[...e].sort((e,t)=>{let r=parseInt(e.table_name.replace(/\D/g,"")),a=parseInt(t.table_name.replace(/\D/g,""));return isNaN(r)||isNaN(a)?e.table_name.localeCompare(t.table_name):r-a})}function s(e){return e.filter(e=>e.is_active)}function c(e){return e.is_active?"WaitingForPayment"===e.active_order_status?"waitingForPayment":e.status===a.c.Available?"available":"occupied":"inactive"}function l(e){return e?({Pending:"กำลังดำเนินการ",Cooking:"กำลังปรุง",Served:"เสิร์ฟแล้ว",WaitingForOrder:"รอรับออเดอร์",WaitingForPayment:"รอชำระเงิน",Paid:"ชำระเงินแล้ว",Completed:"เสร็จสมบูรณ์",Cancelled:"ยกเลิก"})[e]||e:""}function d(e){return e.reduce((e,t)=>(e.total++,t.status===n.i.Pending&&e.pending++,t.status===n.i.Cooking&&e.cooking++,t.status===n.i.Served&&e.served++,e),{total:0,pending:0,cooking:0,served:0})}function u(e){switch(e.status){case n.i.Pending:case n.i.Cooking:return"occupied";case n.i.Served:return"waitingForPayment";case n.i.Paid:return"available";default:return"inactive"}}let m=e=>{switch(e){case n.m.DineIn:case"DineIn":return"/pos/channels/dine-in";case n.m.TakeAway:case"TakeAway":return"/pos/channels/takeaway";case n.m.Delivery:case"Delivery":return"/pos/channels/delivery";default:return"/pos/orders"}}},36799:function(e,t,r){"use strict";r.d(t,{t:function(){return n}});var a=JSON.parse('{"auth.loadingLogin":"กำลังเข้าสู่ระบบ...","auth.loadingLogout":"กำลังออกจากระบบ...","network.loading":"กำลังดึงข้อมูล...","network.offline":"ไม่มีการเชื่อมต่ออินเทอร์เน็ต แอปกำลังทำงานแบบออฟไลน์","network.newVersion":"มีเวอร์ชันใหม่พร้อมใช้งาน กดรีเฟรชเพื่ออัปเดต","delivery.loadingOrders":"กำลังโหลดออเดอร์...","delivery.selectProvider":"เลือกผู้ให้บริการ (Delivery Provider)","delivery.selectProviderPlaceholder":"เลือกผู้ให้บริการ","delivery.orderCode":"รหัสเดลิเวอรี่ / Order Code","delivery.enterOrderCode":"ระบุรหัสออเดอร์ (เช่น 123)","delivery.createOrder":"เปิดออเดอร์เดลิเวอรี่","delivery.createOrderSubtitle":"กรอกข้อมูลเพื่อสร้างออเดอร์ใหม่","delivery.noProviders":"ยังไม่มีผู้ให้บริการเดลิเวอรี่","delivery.retry":"ลองใหม่","delivery.noOrders":"ไม่มีออเดอร์เดลิเวอรี่","delivery.addOrder":"เพิ่มออเดอร์","delivery.createNewOrder":"สร้างออเดอร์ใหม่","orders.loading":"กำลังโหลดข้อมูลออเดอร์...","orders.error":"โหลดข้อมูลออเดอร์ไม่สำเร็จ","orders.empty":"ไม่พบรายการออเดอร์","orders.searchPlaceholder":"ค้นหาเลขที่ออเดอร์ โต๊ะ หรือรหัสอ้างอิง","queue.loading":"กำลังโหลดคิว...","queue.error":"โหลดคิวไม่สำเร็จ","queue.empty":"ยังไม่มีออเดอร์ในคิว","queue.refresh":"รีเฟรช","queue.reorder":"จัดเรียง","queue.filter":"กรองสถานะ","queue.pending":"รอ","queue.processing":"กำลังดำเนินการ","queue.completed":"เสร็จสิ้น","queue.cancelled":"ยกเลิก","queue.priority.low":"ต่ำ","queue.priority.normal":"ปกติ","queue.priority.high":"สูง","queue.priority.urgent":"ด่วน","queue.updateStatusSuccess":"อัปเดตสถานะสำเร็จ","queue.updateStatusError":"อัปเดตสถานะไม่สำเร็จ","queue.addSuccess":"เพิ่มเข้าคิวสำเร็จ","queue.addError":"เพิ่มเข้าคิวไม่สำเร็จ","queue.removeSuccess":"ลบออกจากคิวสำเร็จ","queue.removeError":"ลบออกจากคิวไม่สำเร็จ","queue.reorderSuccess":"จัดเรียงคิวใหม่สำเร็จ","queue.reorderError":"จัดเรียงคิวใหม่ไม่สำเร็จ","stock.loading":"กำลังโหลดคำสั่งซื้อสต๊อก...","stock.error":"โหลดข้อมูลสต๊อกไม่สำเร็จ","stock.empty":"ยังไม่มีคำสั่งซื้อสต๊อก","stock.title":"คำสั่งซื้อสต๊อก","stock.subtitleCount":"{{count}} คำสั่งซื้อ","stock.totalItems":"จำนวนรายการรวม","stock.createdBy":"ผู้สร้าง","stock.items":"รายการ","stock.status":"สถานะ","stock.createdAt":"วันที่สร้าง","stock.actions":"จัดการ","stock.view":"ดู","stock.buy":"ซื้อ","stock.edit":"แก้ไข","stock.cancel":"ยกเลิก","stock.emptyAction":"ไปหน้าหลัก","stock.status.pending":"รอดำเนินการ","stock.status.completed":"เสร็จสิ้น","stock.status.cancelled":"ยกเลิก","stock.itemsLabel":"รายการ","stock.statusLabel":"สถานะ","users.title":"ผู้ใช้","users.subtitle":"{{count}} คน","users.add":"เพิ่มผู้ใช้","users.refresh":"รีเฟรช","users.empty":"ยังไม่มีผู้ใช้","users.noPermission":"คุณไม่มีสิทธิ์เข้าถึงหน้านี้","users.headerTitle":"จัดการผู้ใช้","users.headerSubtitle":"จัดการสิทธิ์และสถานะผู้ใช้ทั้งหมด","users.stats.total":"ผู้ใช้ทั้งหมด","users.stats.active":"เปิดใช้งาน/ใช้งานได้","users.stats.online":"กำลังใช้งาน","users.card.edit":"แก้ไข","users.card.delete":"ลบ","users.card.active":"เปิดใช้งาน","users.card.inactive":"ปิดใช้งาน","users.card.canUse":"อนุญาตใช้งาน","users.card.cannotUse":"ไม่อนุญาต","users.card.lastLogin":"เข้าสู่ระบบล่าสุด","page.retry":"ลองอีกครั้ง","page.empty":"ไม่มีข้อมูล","page.error":"เกิดข้อผิดพลาด","kitchen.soundBlocked":"เบราว์เซอร์บล็อกเสียงแจ้งเตือน","kitchen.soundOff":"ปิดเสียงแจ้งเตือน","kitchen.soundOn":"เปิดเสียงแจ้งเตือน","dashboard.title":"ภาพรวมยอดขาย","dashboard.subtitle":"สรุปยอดขายทุกช่องทาง","dashboard.reload":"รีเฟรช","dashboard.loading":"กำลังโหลดข้อมูล...","dashboard.totalSales":"ยอดขายรวม","dashboard.orders":"{{count}} ออเดอร์","dashboard.discount":"ส่วนลด ฿{{amount}}","dashboard.channel.dineIn":"ทานที่ร้าน","dashboard.channel.takeAway":"กลับบ้าน","dashboard.channel.delivery":"เดลิเวอรี่","dashboard.topProducts":"สินค้าขายดี","dashboard.topProducts.empty":"ยังไม่มีข้อมูลสินค้า","dashboard.recentOrders":"ออเดอร์ล่าสุด","dashboard.recentOrders.empty":"ยังไม่มีออเดอร์","dashboard.viewDetails":"ดูรายละเอียด","dashboard.dailySales":"ยอดขายรายวัน","dashboard.dailySales.date":"วันที่","dashboard.dailySales.orders":"ออเดอร์","dashboard.dailySales.sales":"ยอดขาย","dashboard.export.pdf":"PDF","dashboard.export.excel":"Excel","dashboard.exportPDF.loading":"กำลังสร้าง PDF...","dashboard.exportPDF.success":"ส่งออก PDF สำเร็จ","dashboard.exportPDF.error":"เกิดข้อผิดพลาดในการส่งออก PDF","dashboard.exportExcel.loading":"กำลังสร้าง Excel...","dashboard.exportExcel.success":"ส่งออก Excel สำเร็จ","dashboard.exportExcel.error":"เกิดข้อผิดพลาดในการส่งออก Excel","dashboard.paymentMethod":"\uD83D\uDCB3 {{method}}","branch.loading":"กำลังดึงข้อมูลสาขา...","branch.noPermission":"คุณไม่มีสิทธิ์เข้าถึงหน้าสาขา","branch.delete.title":"ยืนยันลบสาขา","branch.delete.content":"ต้องการลบสาขา \\"{{name}}\\" หรือไม่?","branch.delete.ok":"ลบ","branch.delete.cancel":"ยกเลิก","branch.delete.success":"ลบสาขา \\"{{name}}\\" แล้ว","branch.delete.error":"ไม่สามารถลบสาขาได้","branch.switch.success":"สลับไปยังสาขา \\"{{name}}\\" แล้ว","branch.switch.loading":"กำลังสลับสาขา...","branch.page.title":"สาขา","branch.page.subtitle":"{{count}} สาขา","branch.hero.title":"จัดการสาขา","branch.hero.subtitle":"ดูแลข้อมูลสาขาทั้งหมดในระบบ","branch.actions.refresh":"รีเฟรช","branch.actions.add":"เพิ่มสาขา","branch.section.listTitle":"สาขาทั้งหมด","branch.section.countTag":"{{filtered}} / {{total}} สาขา","branch.empty.filtered.title":"ไม่พบสาขาที่ค้นหา","branch.empty.filtered.description":"ลองลบตัวกรองหรือค้นหาด้วยคำอื่น เช่น ชื่อ รหัสสาขา ที่อยู่ หรือเบอร์โทร","branch.empty.default.title":"ยังไม่มีสาขา","branch.empty.default.description":"เพิ่มสาขาแรกเพื่อเริ่มใช้งาน POS ได้เลย","branch.empty.reset":"ล้างตัวกรอง","branch.empty.add":"เพิ่มสาขาใหม่","branch.stats.total":"สาขาทั้งหมด","branch.stats.active":"เปิดใช้งาน","branch.stats.inactive":"ปิดการใช้งาน","branch.card.switch":"สลับ","branch.card.edit":"แก้ไข","branch.card.delete":"ลบ","branch.card.switchTooltip":"สลับไปสาขานี้","branch.card.editTooltip":"แก้ไขข้อมูลสาขา","branch.card.deleteTooltip":"ลบสาขา","branch.card.addressFallback":"ไม่มีที่อยู่","branch.card.phoneFallback":"ไม่มีหมายเลขโทรศัพท์","branch.card.active":"เปิดใช้งานอยู่","branch.card.inactive":"ปิดใช้งานอยู่","branch.card.taxId":"เลขประจำตัวผู้เสียภาษี","branch.search.placeholder":"ค้นหาสาขา (ชื่อ รหัส ที่อยู่ หรือเบอร์โทร)","branch.search.filter.all":"ทั้งหมด","branch.search.filter.active":"เปิดใช้งาน","branch.search.filter.inactive":"ปิดใช้งาน","branch.search.result":"พบ {{count}} จาก {{total}} สาขา","branch.form.loadError":"ไม่สามารถดึงข้อมูลสาขาได้","branch.form.updateSuccess":"อัปเดตสาขาสำเร็จ","branch.form.createSuccess":"สร้างสาขาสำเร็จ","branch.form.saveError":"เกิดข้อผิดพลาดในการบันทึกข้อมูลสาขา","branch.form.deleteTitle":"ยืนยันการลบสาขา","branch.form.deleteContent":"คุณต้องการลบสาขานี้หรือไม่?","branch.form.deleteSuccess":"ลบสาขาสำเร็จ","branch.form.deleteError":"ไม่สามารถลบสาขาได้","branch.form.titleEdit":"แก้ไขสาขา","branch.form.titleCreate":"เพิ่มสาขา","branch.form.subtitle":"ข้อมูลสาขาสำหรับระบบ POS","branch.form.fields.nameLabel":"ชื่อสาขา *","branch.form.fields.nameRequired":"กรุณากรอกชื่อสาขา","branch.form.fields.namePlaceholder":"ระบุชื่อสาขา","branch.form.fields.codeLabel":"รหัสสาขา *","branch.form.fields.codeRequired":"กรุณากรอกรหัสสาขา","branch.form.fields.codePattern":"รหัสสาขาต้องเป็นตัวอักษรภาษาอังกฤษหรือตัวเลข","branch.form.fields.codePlaceholder":"เช่น B001","branch.form.fields.addressLabel":"ที่อยู่","branch.form.fields.addressPlaceholder":"ที่อยู่สาขา","branch.form.fields.phoneLabel":"เบอร์โทรศัพท์","branch.form.fields.phonePlaceholder":"02xxxxxxx","branch.form.fields.taxIdLabel":"เลขประจำตัวผู้เสียภาษี (Tax ID)","branch.form.fields.taxIdPlaceholder":"ระบุเลขผู้เสียภาษี","branch.form.fields.statusLabel":"สถานะ","branch.form.back":"ยกเลิก","branch.form.submitEdit":"บันทึกการแก้ไข","branch.form.submitCreate":"สร้างสาขา","users.manage.loadRolesError":"ไม่สามารถดึงข้อมูลบทบาทได้","users.manage.loadBranchesError":"ไม่สามารถดึงข้อมูลสาขาได้","users.manage.loadUserError":"ไม่สามารถดึงข้อมูลผู้ใช้ได้","users.manage.updateSuccess":"อัปเดตผู้ใช้สำเร็จ","users.manage.createSuccess":"สร้างผู้ใช้สำเร็จ","users.manage.saveErrorUpdate":"ไม่สามารถอัปเดตผู้ใช้ได้","users.manage.saveErrorCreate":"ไม่สามารถสร้างผู้ใช้ได้","users.manage.deleteSuccess":"ลบผู้ใช้สำเร็จ","users.manage.deleteError":"ไม่สามารถลบผู้ใช้ได้","users.manage.deleteTitle":"ลบผู้ใช้","users.manage.deleteDescription":"คุณต้องการลบผู้ใช้หรือไม่?","users.manage.deleteOk":"ใช่","users.manage.deleteCancel":"ยกเลิก","users.manage.deleteButton":"ลบผู้ใช้","users.manage.backToList":"กลับไปหน้าผู้ใช้","users.manage.headingEdit":"แก้ไขผู้ใช้","users.manage.headingCreate":"เพิ่มผู้ใช้","users.manage.form.usernameLabel":"ชื่อผู้ใช้","users.manage.form.usernameRequired":"กรุณากรอกชื่อผู้ใช้","users.manage.form.usernamePattern":"กรุณากรอกภาษาอังกฤษ ตัวเลข หรืออักขระพิเศษ (- _ @ .)","users.manage.form.usernamePlaceholder":"กรุณากรอกชื่อผู้ใช้","users.manage.form.nameLabel":"ชื่อ-นามสกุล / ชื่อเล่น","users.manage.form.nameRequired":"กรุณากรอกชื่อ-นามสกุล หรือ ชื่อเล่น","users.manage.form.namePlaceholder":"ระบุชื่อ (เช่น สมชาย หรือ น้องบี)","users.manage.form.passwordLabel":"รหัสผ่าน","users.manage.form.passwordLabelEdit":"รหัสผ่านใหม่ (ปล่อยว่างเพื่อไม่เปลี่ยนรหัสผ่าน)","users.manage.form.passwordRequired":"กรุณากรอกรหัสผ่าน","users.manage.form.passwordPattern":"กรุณากรอกภาษาอังกฤษ ตัวเลข หรืออักขระพิเศษเท่านั้น","users.manage.form.passwordPlaceholder":"กรุณากรอกรหัสผ่าน","users.manage.form.roleLabel":"บทบาท","users.manage.form.roleRequired":"กรุณาเลือกบทบาท","users.manage.form.rolePlaceholder":"เลือกบทบาท","users.manage.form.roleModalTitle":"เลือกบทบาท","users.manage.form.branchLabel":"สาขา","users.manage.form.branchRequired":"กรุณาเลือกสาขา","users.manage.form.branchPlaceholder":"เลือกสาขา","users.manage.form.branchModalTitle":"เลือกสาขา","users.manage.form.activeLabel":"สถานะ (Active)","users.manage.form.useLabel":"การใช้งาน (In Use)","users.manage.cancel":"ยกเลิก","users.manage.updateSubmit":"อัปเดตผู้ใช้","users.manage.createSubmit":"สร้างผู้ใช้","stock.ingredients.loading":"กำลังโหลดข้อมูลวัตถุดิบ...","stock.ingredients.loadError":"ไม่สามารถดึงข้อมูลวัตถุดิบได้","stock.ingredients.noPermission":"คุณไม่มีสิทธิ์เข้าถึงหน้านี้","stock.ingredients.deleteTitle":"ยืนยันการลบวัตถุดิบ","stock.ingredients.deleteContent":"คุณต้องการลบวัตถุดิบ \\"{{name}}\\" หรือไม่?","stock.ingredients.deleteSuccess":"ลบวัตถุดิบ \\"{{name}}\\" สำเร็จ","stock.ingredients.deleteError":"ไม่สามารถลบวัตถุดิบได้","stock.ingredients.deleting":"กำลังลบวัตถุดิบ...","stock.ingredients.checkingAuth":"กำลังตรวจสอบสิทธิ์การใช้งาน...","stock.ingredients.redirecting":"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับหน้าแรก...","stock.ingredients.title":"วัตถุดิบ","stock.ingredients.subtitle":"{{count}} รายการ","stock.ingredients.refresh":"รีเฟรช","stock.ingredients.add":"เพิ่มวัตถุดิบ","stock.ingredients.listTitle":"รายการวัตถุดิบ","stock.ingredients.emptyTitle":"ยังไม่มีวัตถุดิบ","stock.ingredients.emptyDescription":"เริ่มต้นด้วยการเพิ่มวัตถุดิบแรกของคุณ","stock.ingredients.emptyAction":"เพิ่มวัตถุดิบ","stock.ingredients.headerLabel":"จัดการข้อมูล","stock.ingredients.stats.total":"ทั้งหมด","stock.ingredients.stats.active":"ใช้งาน","stock.ingredients.stats.inactive":"ไม่ใช้งาน","common.checkingAuth":"กำลังตรวจสอบสิทธิ์การใช้งาน...","common.noPermissionRedirect":"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับหน้าแรก...","ingredientsUnit.title":"หน่วยวัตถุดิบ","ingredientsUnit.subtitle":"{{count}} หน่วย","ingredientsUnit.button.refresh":"รีเฟรช","ingredientsUnit.button.add":"เพิ่มหน่วยวัตถุดิบ","ingredientsUnit.section.list":"รายการหน่วยวัตถุดิบ","ingredientsUnit.loading":"กำลังโหลดหน่วยวัตถุดิบ...","ingredientsUnit.empty.title":"ยังไม่มีหน่วยวัตถุดิบ","ingredientsUnit.empty.desc":"เริ่มต้นด้วยการเพิ่มหน่วยวัตถุดิบแรกของคุณ","ingredientsUnit.fetch.error":"ไม่สามารถดึงข้อมูลหน่วยวัตถุดิบได้","ingredientsUnit.create.toast":"เพิ่มหน่วยวัตถุดิบ {{name}} แล้ว","ingredientsUnit.delete.title":"ยืนยันการลบหน่วยวัตถุดิบ","ingredientsUnit.delete.content":"ต้องการลบหน่วยวัตถุดิบ \\"{{name}}\\" หรือไม่?","ingredientsUnit.delete.ok":"ลบ","ingredientsUnit.delete.cancel":"ยกเลิก","ingredientsUnit.delete.success":"ลบหน่วยวัตถุดิบ \\"{{name}}\\" สำเร็จ","stockHistory.title":"ประวัติออเดอร์สต็อก","stockHistory.subtitle":"รายการที่เสร็จสิ้น/ยกเลิก","stockHistory.refresh":"รีเฟรช","stockHistory.sectionAll":"ประวัติทั้งหมด","stockHistory.count":"ทั้งหมด {{total}} รายการ","stockHistory.empty.title":"ยังไม่มีประวัติออเดอร์","stockHistory.empty.desc":"เมื่อมีรายการเสร็จสิ้น/ยกเลิก จะแสดงที่หน้านี้","stockHistory.delete.title":"ยืนยันการลบ","stockHistory.delete.content":"ต้องการลบประวัติออเดอร์ #{{code}} หรือไม่? ข้อมูลที่เกี่ยวข้องทั้งหมดจะถูกลบด้วย","stockHistory.delete.ok":"ลบ","stockHistory.delete.cancel":"ยกเลิก","stockHistory.delete.success":"ลบประวัติออเดอร์สำเร็จ","stockHistory.delete.error":"ลบประวัติออเดอร์ล้มเหลว","stockHistory.fetch.error":"ไม่สามารถโหลดประวัติออเดอร์ได้","stockHistory.paginationTotal":"ทั้งหมด {{total}} รายการ"}');function n(e,t){var r;let n=null!==(r=a[e])&&void 0!==r?r:e;return t?n.replace(/\{\{(\w+)\}\}/g,(e,r)=>{var a;return(null!==(a=t[r])&&void 0!==a?a:"").toString()}):n}},61414:function(e,t,r){"use strict";r.d(t,{EO:function(){return k},Gs:function(){return l},HL:function(){return _},M9:function(){return w},Nz:function(){return y},OY:function(){return i},Rr:function(){return v},Wl:function(){return o},d$:function(){return S},d7:function(){return c},iN:function(){return m},jN:function(){return h},ku:function(){return g},mz:function(){return d},qO:function(){return u},s6:function(){return s},xG:function(){return p},yj:function(){return x},zP:function(){return f},zf:function(){return j}});var a=r(32446),n=r(34962);let o=e=>{var t,r;if(e.status===n.c.Available)return"/pos/channels/dine-in/".concat(e.id);let o=e.active_order_id||(null===(t=e.active_order)||void 0===t?void 0:t.id),i=e.active_order_status||(null===(r=e.active_order)||void 0===r?void 0:r.status);return o?i===a.i.WaitingForPayment?"/pos/items/payment/".concat(o):"/pos/orders/".concat(o):"/pos/channels/dine-in/".concat(e.id)},i=e=>{switch(e){case a.i.Pending:return"orange";case a.i.Cooking:return"blue";case a.i.Served:return"green";case a.i.Paid:return"cyan";case a.i.Cancelled:return"red";case a.i.WaitingForPayment:return"gold";default:if("cancelled"===String(null!=e?e:"").trim().toLowerCase())return"red";return"default"}},s=e=>"cancelled"===String(null!=e?e:"").trim().toLowerCase(),c=(e,t)=>{switch(e){case a.i.Pending:return"กำลังดำเนินการ";case a.i.Cooking:return"กำลังปรุง";case a.i.Served:if("TakeAway"===t||"Delivery"===t)return"ทำแล้ว";return"เสิร์ฟแล้ว";case a.i.Paid:return"ชำระเงินแล้ว";case a.i.Completed:return"สำเร็จ";case a.i.Cancelled:return"ยกเลิก";case a.i.WaitingForPayment:return"รอชำระเงิน";default:if(s(e))return"ยกเลิก";return e}},l=e=>{switch(e){case"DineIn":return"#722ed1";case"TakeAway":return"#fa8c16";case"Delivery":return"#eb2f96";default:return"#1890ff"}},d=e=>{switch(e){case"DineIn":return"ทานที่ร้าน";case"TakeAway":return"สั่งกลับบ้าน";case"Delivery":return"เดลิเวอรี่";default:return e}},u=e=>"DineIn"===e?"เสิร์ฟ":"ทำแล้ว",m=e=>"Delivery"===e?"จัดออเดอร์เสร็จแล้วพร้อมส่งให้ไรเดอร์":"DineIn"===e?"ยืนยันเสิร์ฟพร้อมชำระเงิน":"ยืนยันทำแล้วพร้อมชำระเงิน",f=e=>"DineIn"===e?"เสิร์ฟอาหารแล้ว":"ปรุงเสร็จแล้ว",p=e=>{let t="string"==typeof e?parseFloat(e):e;return"฿".concat(Number(t).toLocaleString("th-TH",{minimumFractionDigits:0,maximumFractionDigits:2}))},h=e=>{var t,r;return"DineIn"===e.order_type?(null===(t=e.table)||void 0===t?void 0:t.table_name)||"ไม่ระบุโต๊ะ":"Delivery"===e.order_type?e.delivery_code||(null===(r=e.delivery)||void 0===r?void 0:r.delivery_name)||"ไม่ระบุข้อมูล":"TakeAway"===e.order_type?e.order_no||"ไม่ระบุเลขที่":e.order_no||"N/A"},y=e=>(null!=e?e:[]).filter(e=>!s(e.status)),b=e=>(null!=e?e:[]).reduce((e,t)=>e+(Number(t.extra_price)||0),0),g=(e,t,r)=>((Number(e)||0)+b(r))*t,v=e=>y(e).reduce((e,t)=>{var r,a;let n=(null===(a=t.product)||void 0===a?void 0:null===(r=a.category)||void 0===r?void 0:r.display_name)||"ไม่ระบุหมวด";return e[n]=(e[n]||0)+(t.quantity||0),e},{}),x=e=>y(e).reduce((e,t)=>e+Number(t.total_price||0),0),k=e=>"DineIn"===e.order_type?"/pos/channels/dine-in":"TakeAway"===e.order_type?"/pos/channels/takeaway":"Delivery"===e.order_type?"/pos/channels/delivery":"/pos/orders",_=e=>"/pos/orders/".concat(e),w=e=>e.status===a.i.WaitingForPayment?e.order_type===a.m.Delivery?"/pos/items/delivery/".concat(e.id):"/pos/items/payment/".concat(e.id):"/pos/orders/".concat(e.id),S=e=>e===a.m.Delivery?"/pos/channels/delivery":e===a.m.TakeAway?"/pos/channels/takeaway":e===a.m.DineIn?"/pos/channels/dine-in":"/pos/channels",j=(e,t,r,n)=>({order_no:n.orderNo||"ORD-".concat(Date.now()),order_type:t,sub_total:r.subTotal,discount_amount:r.discountAmount,vat:0,total_amount:r.totalAmount,received_amount:0,change_amount:0,status:a.i.Pending,discount_id:n.discountId||null,payment_method_id:null,table_id:n.tableId||null,delivery_id:n.deliveryId||null,delivery_code:n.deliveryCode||null,items:e.map(e=>{var r;let n=t===a.m.Delivery?Number(null!==(r=e.product.price_delivery)&&void 0!==r?r:e.product.price):Number(e.product.price),o=(n+(e.details||[]).reduce((e,t)=>e+Number(t.extra_price),0))*e.quantity;return{product_id:e.product.id,quantity:e.quantity,price:n,total_price:o,discount_amount:0,notes:e.notes||"",status:a.i.Cooking,details:e.details||[]}})})},33203:function(e,t,r){"use strict";r.d(t,{w:function(){return h}});var a=r(2265),n=r(53286),o=r(32446),i=r(24675),s=r(67697),c=r(21652),l=r.n(c),d=r(12028);let u=new Set([o.i.Paid,o.i.Completed,o.i.Cancelled]),m=[o.i.Pending,o.i.Cooking,o.i.Served,o.i.WaitingForPayment].join(","),f=[d.b.orders.create,d.b.orders.update,d.b.orders.delete,d.b.payments.create,d.b.payments.update,d.b.salesOrderItem.create,d.b.salesOrderItem.update,d.b.salesOrderItem.delete,d.b.salesOrderDetail.create,d.b.salesOrderDetail.update,d.b.salesOrderDetail.delete],p=(e,t)=>e.filter(e=>e.order_type===t&&!u.has(e.status));function h(e){let{orderType:t,limit:r=100,page:o=1,statusFilter:c=m,enabled:d=!0,refreshIntervalMs:u=15e3,events:h=f}=e,{socket:y}=(0,i.s)(),[b,g]=(0,a.useState)([]),[v,x]=(0,a.useState)(!0),k=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(d){e||x(!0);try{let e=await n.x.getAllSummary(void 0,o,r,c,t),a=p(e.data||[],t);g(e=>l()(e,a)?e:a)}catch(e){}finally{e||x(!1)}}},[d,r,t,o,c]);return(0,a.useEffect)(()=>{d&&k(!1)},[d,k,c]),(0,s.D)({socket:y,events:h,onRefresh:()=>k(!0),intervalMs:u,enabled:d,debounceMs:800}),{orders:b,isLoading:v,refresh:k}}},67697:function(e,t,r){"use strict";r.d(t,{D:function(){return i},v:function(){return o}});var a=r(2265);let n=e=>{if("string"==typeof e)return e;if(e&&"object"==typeof e){var t;if("id"in e&&e.id)return e.id;if("data"in e&&(null===(t=e.data)||void 0===t?void 0:t.id))return e.data.id}};function o(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e.id,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>!0;(0,a.useEffect)(()=>{if(!e)return;let a=e=>{if(!i(e))return;let t=o(e);r(r=>r.some(e=>o(e)===t)?r:[...r,e])},s=e=>{let t=o(e);r(r=>i(e)?r.some(e=>o(e)===t)?r.map(r=>o(r)===t?e:r):[...r,e]:r.filter(e=>o(e)!==t))},c=e=>{let t=n(e);t&&r(e=>e.filter(e=>o(e)!==t))};return e.on(t.create,a),e.on(t.update,s),e.on(t.delete,c),()=>{e.off(t.create,a),e.off(t.update,s),e.off(t.delete,c)}},[e,t.create,t.update,t.delete,o,r,i])}function i(e){let{socket:t,events:r=[],onRefresh:n,intervalMs:o,enabled:i=!0,debounceMs:s}=e;(0,a.useEffect)(()=>{if(!i||!t||0===r.length)return;let e=null,a=()=>{if(!s||s<=0){n();return}e&&clearTimeout(e),e=setTimeout(()=>{e=null,n()},s)};return r.forEach(e=>t.on(e,a)),()=>{e&&clearTimeout(e),r.forEach(e=>t.off(e,a))}},[i,t,r,n,s]),(0,a.useEffect)(()=>{if(!i||!o)return;let e=setInterval(n,o);return()=>clearInterval(e)},[i,o,n])}}},function(e){e.O(0,[253,1522,3418,742,9486,4252,3916,8651,6931,4159,3831,2224,3248,2401,9,8879,8589,19,9845,4221,3834,9763,1713,1047,5531,563,2971,2117,1744],function(){return e(e.s=15392)}),_N_E=e.O()}]);