(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2851],{2727:function(e,t,n){Promise.resolve().then(n.bind(n,5727))},5727:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(57437),i=n(2265),o=n(99376),u=n(34029),s=n(67605),c=n(8949),l=n(53286),d=n(61414),a=n(252),f=n(32446),v=n(3369),y=n(77961),E=n(97235);function m(e){let{providerId:t,deliveryCode:n}=e,{showLoading:m,hideLoading:h}=(0,v.x)(),[p,_]=(0,i.useState)(""),b=(0,o.useRouter)();(0,i.useEffect)(()=>{(async()=>{m();let e=await (0,E.P)();e&&_(e),h()})()},[m,h]);let{cartItems:x,clearCart:C,getSubtotal:I,getDiscountAmount:Z,getFinalPrice:j,selectedDiscount:k,setOrderMode:w,setReferenceId:D,setReferenceCode:P}=(0,c.j)();(0,i.useEffect)(()=>{w("DELIVERY"),D(t),P(n)},[t,n,w,D,P]);let N=async()=>{m();try{let e=(0,d.zf)(x,f.m.Delivery,{subTotal:I(),discountAmount:Z(),totalAmount:j()},{discountId:null==k?void 0:k.id,deliveryId:t,deliveryCode:n});await l.x.create(e,void 0,p),u.ZP.success("สร้างออเดอร์เรียบร้อยแล้ว"),C(),b.push((0,a.Zu)(f.m.Delivery))}catch(e){u.ZP.error(e instanceof Error?e.message:"ไม่สามารถทำรายการได้")}finally{h()}};return(0,r.jsx)(y.Z,{title:"เดริเวอรี่ (Delivery)",subtitle:"เดลิเวอรี่ ".concat(n),icon:(0,r.jsx)(s.Z,{style:{fontSize:28}}),onConfirmOrder:N})}function h(e){let{params:t,searchParams:n}=e;return(0,r.jsx)(m,{providerId:t.providerId,deliveryCode:n.code})}}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=2727)}),_N_E=e.O()}]);