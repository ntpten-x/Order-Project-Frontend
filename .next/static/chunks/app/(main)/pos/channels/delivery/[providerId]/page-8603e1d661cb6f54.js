(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2851],{2727:function(e,t,n){Promise.resolve().then(n.bind(n,5727))},5727:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=n(57437),i=n(2265),s=n(13817),u=n(99376),o=n(34029),l=n(67605),c=n(8949),d=n(53286),a=n(61414),f=n(252),y=n(32446),v=n(3369),h=n(77961),p=n(97235);function x(e){let{providerId:t,deliveryCode:n}=e,{showLoading:s,hideLoading:x}=(0,v.x)(),[m,E]=(0,i.useState)(""),b=(0,u.useRouter)();(0,i.useEffect)(()=>{(async()=>{s();let e=await (0,p.P)();e&&E(e),x()})()},[s,x]);let{cartItems:j,clearCart:k,getSubtotal:C,getDiscountAmount:Z,getFinalPrice:_,selectedDiscount:I,setOrderMode:g,setReferenceId:w,setReferenceCode:D}=(0,c.j)();(0,i.useEffect)(()=>{g("DELIVERY"),w(t),D(n)},[t,n,g,w,D]);let P=async()=>{s();try{let e=(0,a.zf)(j,y.m.Delivery,{subTotal:C(),discountAmount:Z(),totalAmount:_()},{discountId:null==I?void 0:I.id,deliveryId:t,deliveryCode:n});await d.x.create(e,void 0,m),o.ZP.success("สร้างออเดอร์เรียบร้อยแล้ว"),k(),b.push((0,f.Zu)(y.m.Delivery))}catch(e){o.ZP.error(e instanceof Error?e.message:"ไม่สามารถทำรายการได้")}finally{x()}};return(0,r.jsx)(h.Z,{title:"เดริเวอรี่ (Delivery)",subtitle:"เดลิเวอรี่ ".concat(n),icon:(0,r.jsx)(l.Z,{style:{fontSize:28}}),onConfirmOrder:P})}var m=n(25193);function E(e){let{params:t,searchParams:n}=e;return(0,r.jsx)(m.Z,{maxWidth:99999,style:{padding:0},children:(0,r.jsx)(s.default,{style:{background:"transparent"},children:(0,r.jsx)(s.default.Content,{style:{background:"transparent"},children:(0,r.jsx)(x,{providerId:t.providerId,deliveryCode:n.code})})})})}}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=2727)}),_N_E=e.O()}]);