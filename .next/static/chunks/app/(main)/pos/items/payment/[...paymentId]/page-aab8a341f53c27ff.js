(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3368],{48492:function(e,t,n){Promise.resolve().then(n.bind(n,36699))},36699:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ed}});var i=n(57437),s=n(29),l=n.n(s),a=n(2265),r=n(99376),d=n(60283),o=n(34029),c=n(85180),p=n(50742),y=n(80009),u=n(47451),m=n(69410),x=n(96931),h=n(91652),f=n(23496),g=n(53743),j=n(61778),v=n(90136),b=n(17588),_=n(13377),w=n(62376),k=n(62670),S=n(86955),Z=n(99458),A=n(55322),C=n(13429),P=n(35398),T=n(14621),z=n.n(T),B=n(53286),D=n(63836),O=n(2913),I=n(71567),R=n(98170);let F=I.q.POS.DISCOUNTS,N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",n={};return t&&(n["Content-Type"]=t),e&&(n.Cookie=e),n},Q={getAll:async(e,t)=>{let n=(0,O.b)("GET",F),i=new URLSearchParams(t||"");i.toString()&&(n+="?".concat(i.toString()));let s=N(e,""),l=await fetch(n,{cache:"no-store",headers:s,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,R.i_)(e,"ไม่สามารถดึงข้อมูลส่วนลดได้"))}let a=await l.json();if(Array.isArray(a))return a;if((null==a?void 0:a.success)&&Array.isArray(a.data)||(null==a?void 0:a.data)&&Array.isArray(a.data))return a.data;if(a&&"object"==typeof a&&!Array.isArray(a)){if(a.success&&a.data&&"object"==typeof a.data&&!Array.isArray(a.data)&&a.data.id&&(a.data.discount_name||a.data.display_name))return[a.data];if(a.id&&(a.discount_name||a.display_name))return[a]}return[]}};var E=n(54528),G=n(66290),W=n(19135),M=n(97235),K=n(7806),L=n(32446),q=n(34962),H=n(69477),U=n(94532),Y=n(45963),V=n(49747),$=n(71096),X=n.n($);n(6729);var J=n(61414),ee=n(60300),et=n(3369),en=n(24675),ei=n(67697),es=n(12028),el=n(25193);let{Title:ea,Text:er}=d.default;function ed(){var e,t;let n=(0,r.useRouter)(),s=(0,r.useParams)(),[d,T]=o.ZP.useMessage(),O=Array.isArray(null==s?void 0:s.paymentId)?s.paymentId[0]:null==s?void 0:s.paymentId,[I,R]=(0,a.useState)(null),[F,N]=(0,a.useState)(!0),[$,X]=(0,a.useState)([]),[ed,eo]=(0,a.useState)([]),[ec,ep]=(0,a.useState)(null),[ey,eu]=(0,a.useState)(null),[em,ex]=(0,a.useState)(0),[eh,ef]=(0,a.useState)(null),[eg,ej]=(0,a.useState)(!1),{showLoading:ev,hideLoading:eb}=(0,et.x)(),{socket:e_}=(0,en.s)(),[ew,ek]=(0,a.useState)({open:!1,type:"confirm",title:"",content:"",onOk:()=>{}}),eS=()=>ek(e=>({...e,open:!1})),eZ=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(O)try{e||(N(!0),ev("กำลังโหลดข้อมูลการชำระเงิน..."));let t=await W.n.getProfile().catch(()=>null),[i,s,l]=await Promise.all([B.x.getById(O),D.E.getAll(),Q.getAll()]);if([L.i.Paid,L.i.Cancelled].includes(i.status)){n.push("/pos/channels");return}R(i);let a=(s.data||[]).filter(e=>i.order_type===L.m.Delivery||"Delivery"!==e.payment_method_name);X(a);let r=[];if(Array.isArray(l))r=l;else if(l&&"object"==typeof l){if("id"in l&&("string"==typeof l.discount_name||"string"==typeof l.display_name))r=[l];else if(Array.isArray(l.data))r=l.data;else if(!0===l.success&&Array.isArray(l.data))r=l.data;else{let e;if(!0===l.success&&(e=l.data)&&"object"==typeof e){let e=l.data;"id"in e&&("string"==typeof e.discount_name||"string"==typeof e.display_name)&&(r=[e])}}}eo(r),ep(t),i.discount&&ef(i.discount),i&&ex(Number(i.total_amount))}catch(t){e||d.error("ไม่สามารถโหลดข้อมูลการชำระเงินได้")}finally{e||(N(!1),eb())}},[d,O,n,ev,eb]),eA=(0,a.useMemo)(()=>{if(!ed||!Array.isArray(ed)||0===ed.length)return[];let e=ed.filter(e=>!!e&&(!0===e.is_active||void 0===e.is_active));return 0===e.length?[]:e.map(e=>{let t=e.display_name||e.discount_name;return t&&e.id?{label:"".concat(t," (").concat(e.discount_type===H.L.Percentage?"".concat(e.discount_amount,"%"):"-".concat(e.discount_amount,"฿"),")"),value:e.id}:null}).filter(e=>null!==e)},[ed]);(0,a.useEffect)(()=>{O&&eZ(!1)},[eZ,O]);let eC=!eg&&!ew.open;(0,ei.D)({socket:e_,events:[es.b.orders.update,es.b.orders.delete,es.b.payments.create,es.b.payments.update,es.b.paymentMethods.create,es.b.paymentMethods.update,es.b.discounts.create,es.b.discounts.update,es.b.discounts.delete,es.b.shopProfile.update,es.b.salesOrderItem.create,es.b.salesOrderItem.update,es.b.salesOrderItem.delete,es.b.salesOrderDetail.create,es.b.salesOrderDetail.update,es.b.salesOrderDetail.delete],onRefresh:async()=>{O&&await eZ(!0)},enabled:!!O&&eC,debounceMs:800}),(0,a.useEffect)(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]);let{subtotal:eP,discount:eT,vat:ez,total:eB,change:eD}=(0,V.hs)(I,em),eO=(0,a.useMemo)(()=>{if(!(null==I?void 0:I.items))return[];let e=I.items.filter(e=>e.status!==L.i.Cancelled);return(0,K.S)(e)},[null==I?void 0:I.items]),eI=async e=>{if(I)try{ev("กำลังอัปเดตส่วนลด...");let t=await (0,M.P)(),n=await B.x.update(I.id,{discount_id:e||null},void 0,t);if(R(n),e){let t=ed.find(t=>t.id===e);t&&(ef(t),d.success('ใช้ส่วนลด "'.concat(t.display_name,'" เรียบร้อย')))}else ef(null),d.info("ยกเลิกการใช้ส่วนลด");ex(Number(n.total_amount))}catch(e){d.error("ไม่สามารถบันทึกส่วนลดได้")}finally{eb()}},eR=async()=>{if(!ey){d.error("กรุณาเลือกวิธีการชำระเงิน");return}if(em<eB){d.error("ยอดเงินที่รับต้องมากกว่าหรือเท่ากับยอดชำระ");return}let e=$.find(e=>e.id===ey),t=(null==e?void 0:e.display_name)||"ไม่ระบุ";ek({open:!0,type:"success",title:"ยืนยันการชำระเงิน",content:(0,i.jsxs)("div",{style:{textAlign:"center"},children:[(0,i.jsxs)("div",{style:{fontSize:16,marginBottom:8},children:["วิธีการชำระเงิน: ",(0,i.jsx)(er,{strong:!0,children:t})]}),(0,i.jsxs)("div",{style:{fontSize:24,fontWeight:700,color:Y.QF.primary},children:["ยอดสุทธิ ",(0,J.xG)(eB)]}),eD>0&&(0,i.jsxs)("div",{style:{color:Y.QF.success,fontSize:18,marginTop:4},children:["เงินทอน ",(0,J.xG)(eD)]})]}),okText:"ยืนยัน",cancelText:"ยกเลิก",onOk:async()=>{try{ev("กำลังดำเนินการชำระเงิน..."),eS();let e=await (0,M.P)(),t={order_id:I.id,payment_method_id:ey,amount:eB,amount_received:em,change_amount:eD,status:U.b.Success};await E.U.create(t,void 0,e),await B.x.updateStatus(I.id,L.i.Paid,e),I.table_id&&await G.$.update(I.table_id,{status:q.c.Available},void 0,e),d.success("ชำระเงินเรียบร้อย"),n.push("/pos/dashboard/".concat(I.id))}catch(e){d.error("การชำระเงินล้มเหลว")}finally{eb()}}})},eF=async()=>{I&&ek({open:!0,type:"warning",title:"ย้อนกลับไปแก้ไขออเดอร์?",content:'สถานะออเดอร์จะถูกเปลี่ยนกลับเป็น "กำลังดำเนินการ" เพื่อให้คุณสามารถแก้ไขรายการอาหารได้ คุณแน่ใจหรือไม่?',okText:"ตกลง",cancelText:"ยกเลิก",onOk:async()=>{try{var e;ev("กำลังดำเนินการ..."),eS();let t=await (0,M.P)(),i=(null===(e=I.items)||void 0===e?void 0:e.filter(e=>e.status!==L.i.Cancelled))||[];await Promise.all(i.map(e=>B.x.updateItemStatus(e.id,L.i.Served,void 0,t))),await B.x.updateStatus(I.id,L.i.Pending,t),d.success("ย้อนกลับไปแก้ไขออเดอร์เรียบร้อย"),n.push((0,V.T_)(I.id))}catch(e){d.error("ไม่สามารถเปลี่ยนสถานะออเดอร์ได้")}finally{eb()}}})};return F&&!I?null:I?(0,i.jsx)(el.Z,{maxWidth:99999,style:{padding:0},children:(0,i.jsxs)("div",{style:Y.yn.container,children:[(0,i.jsx)(l(),{id:Y.um.__hash,children:Y.um}),T,(0,i.jsx)("div",{style:Y.yn.heroSection,className:"payment-hero-mobile",children:(0,i.jsx)("div",{style:Y.yn.contentWrapper,className:"payment-content-mobile",children:(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:16},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:16},children:[(0,i.jsx)(p.ZP,{type:"text",icon:(0,i.jsx)(b.Z,{style:{fontSize:20}}),style:{color:"#fff",padding:0,height:"auto",marginTop:4},onClick:()=>{(null==I?void 0:I.order_type)===L.m.DineIn?n.push("/pos/channels/dine-in"):(null==I?void 0:I.order_type)===L.m.TakeAway?n.push("/pos/channels/takeaway"):(null==I?void 0:I.order_type)===L.m.Delivery?n.push("/pos/channels/delivery"):n.back()}}),(0,i.jsxs)("div",{children:[(0,i.jsx)(ea,{level:3,style:Y.yn.pageTitle,children:"ชำระเงิน"}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:8,flexWrap:"wrap"},children:[(0,i.jsxs)(y.Z,{color:"blue",style:{borderRadius:4,border:"none"},children:[(0,J.mz)(I.order_type)," ",(0,J.jN)(I)]}),(0,i.jsx)(y.Z,{color:(0,J.OY)(I.status),style:{borderRadius:4,border:"none"},children:(0,J.d7)(I.status)}),(0,i.jsxs)(er,{style:{color:"rgba(255,255,255,0.85)",fontSize:13},children:["#",I.order_no]})]})]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,i.jsx)(p.ZP,{icon:(0,i.jsx)(_.Z,{}),onClick:eF,style:{background:"rgba(255,255,255,0.2)",border:"none",color:"#fff"},children:"แก้ไขออเดอร์"}),(0,i.jsx)(p.ZP,{danger:!0,onClick:()=>{I&&ek({open:!0,type:"danger",title:"ยืนยันการยกเลิกออเดอร์?",content:"การดำเนินการนี้จะยกเลิกสินค้าทุกรายการและคืนสถานะโต๊ะ (หากมี) คุณแน่ใจหรือไม่?",okText:"ยืนยันการยกเลิก",cancelText:"ยกเลิก",onOk:async()=>{try{var e;ev("กำลังดำเนินการยกเลิก..."),eS();let t=await (0,M.P)(),i=(null===(e=I.items)||void 0===e?void 0:e.filter(e=>e.status!==L.i.Cancelled))||[];await Promise.all(i.map(e=>B.x.updateItemStatus(e.id,L.i.Cancelled,void 0,t))),await B.x.updateStatus(I.id,L.i.Cancelled,t),I.table_id&&await G.$.update(I.table_id,{status:q.c.Available},void 0,t),d.success("ยกเลิกออเดอร์เรียบร้อย"),n.push((0,V.wv)())}catch(e){d.error("ไม่สามารถยกเลิกออเดอร์ได้")}finally{eb()}}})},children:"ยกเลิกออเดอร์"})]})]})})}),(0,i.jsx)("div",{style:{...Y.yn.contentWrapper,marginTop:-30,paddingBottom:40},children:(0,i.jsxs)(u.Z,{gutter:[24,24],children:[(0,i.jsx)(m.Z,{xs:24,lg:14,children:(0,i.jsxs)(x.Z,{style:Y.yn.card,styles:{body:{height:"100%",display:"flex",flexDirection:"column"}},children:[(0,i.jsx)(ea,{level:4,style:{marginBottom:16,marginTop:0},children:"รายการสรุป (Order Summary)"}),(0,i.jsx)("div",{style:{flex:1,overflowY:"auto",paddingRight:8,minHeight:300,maxHeight:500},children:eO.map((e,t)=>{var n,s;return(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16,paddingBottom:16,borderBottom:"1px solid ".concat(Y.QF.borderLight)},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:12,flex:1,minWidth:0},children:[(0,i.jsx)(h.Z,{shape:"square",size:50,src:null===(n=e.product)||void 0===n?void 0:n.img_url,icon:(0,i.jsx)(w.Z,{}),style:{backgroundColor:Y.QF.backgroundSecondary,flexShrink:0,borderRadius:8}}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,i.jsx)(er,{strong:!0,style:{display:"block"},ellipsis:!0,children:null===(s=e.product)||void 0===s?void 0:s.display_name}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,i.jsx)(er,{type:"secondary",style:{fontSize:13},children:(0,J.xG)(e.price)}),(0,i.jsxs)(y.Z,{style:{margin:0,fontSize:11},children:["x",e.quantity]})]}),e.notes&&(0,i.jsxs)(er,{style:{display:"block",fontSize:12,fontStyle:"italic",color:"#ef4444",marginTop:2},children:["* ",e.notes]}),e.details&&e.details.length>0&&(0,i.jsx)("div",{style:{marginTop:2,display:"flex",flexDirection:"column",gap:0},children:e.details.map((e,t)=>(0,i.jsx)("div",{children:(0,i.jsxs)(er,{style:{color:"#10b981",fontSize:12},children:["+ ",e.detail_name," ",Number(e.extra_price)>0?"(+".concat(Number(e.extra_price),")"):""]})},t))})]})]}),(0,i.jsx)(er,{strong:!0,children:(0,J.xG)(Number(e.total_price||Number(e.price)*e.quantity))})]},t)})}),(0,i.jsxs)("div",{style:Y.yn.summaryBox,children:[(0,i.jsxs)(u.Z,{justify:"space-between",style:{marginBottom:8},children:[(0,i.jsx)(er,{type:"secondary",children:"ยอดรวม (Subtotal)"}),(0,i.jsx)(er,{children:(0,J.xG)(eP)})]}),eT>0&&(0,i.jsxs)(u.Z,{justify:"space-between",style:{marginBottom:8,color:Y.QF.success},children:[(0,i.jsx)(er,{type:"success",children:"ส่วนลด (Discount)"}),(0,i.jsxs)(er,{type:"success",children:["-",(0,J.xG)(eT)]})]}),ez>0&&(0,i.jsxs)(u.Z,{justify:"space-between",style:{marginBottom:8},children:[(0,i.jsx)(er,{type:"secondary",children:"VAT (7%)"}),(0,i.jsx)(er,{children:(0,J.xG)(ez)})]}),(0,i.jsx)(f.Z,{style:{margin:"12px 0"}}),(0,i.jsxs)(u.Z,{justify:"space-between",align:"middle",children:[(0,i.jsx)(ea,{level:4,style:{margin:0},children:"ยอดสุทธิ (Total)"}),(0,i.jsx)(ea,{level:3,style:{color:Y.QF.primary,margin:0},children:(0,J.xG)(eB)})]})]})]})}),(0,i.jsxs)(m.Z,{xs:24,lg:10,children:[(0,i.jsxs)(x.Z,{style:{...Y.yn.card,height:"auto",marginBottom:12,overflow:"visible"},styles:{body:{padding:"12px 16px",overflow:"visible"}},children:[(0,i.jsx)(er,{strong:!0,style:{display:"block",marginBottom:8,fontSize:13},children:"ส่วนลด (Discount)"}),(0,i.jsxs)("div",{style:{border:"1px solid ".concat(eh?"#4F46E5":"#d9d9d9"),borderRadius:8,padding:"8px 12px",cursor:"pointer",background:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center",height:48,transition:"all 0.2s"},onClick:()=>{F||ej(!0)},children:[(0,i.jsx)("span",{style:{color:eh?"#1f2937":"#9ca3af"},children:eh?"".concat(eh.display_name||eh.discount_name," (").concat("Percentage"===eh.discount_type?"".concat(eh.discount_amount,"%"):"-".concat(eh.discount_amount,"฿"),")"):"เลือกส่วนลด (Select Discount)"}),eh?(0,i.jsx)("span",{onClick:e=>{e.stopPropagation(),eI(void 0)},style:{color:"#ef4444",padding:4},children:"✕"}):(0,i.jsx)("span",{style:{color:"#9ca3af"},children:"▼"})]})]}),(0,i.jsx)(g.Z,{title:"เลือกส่วนลด",open:eg,onCancel:()=>ej(!1),footer:null,centered:!0,width:400,zIndex:10001,children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:"60vh",overflowY:"auto"},children:[0===eA.length?(0,i.jsx)("div",{style:{textAlign:"center",padding:24,color:"#9ca3af"},children:"ไม่มีส่วนลดที่ใช้งานได้"}):eA.map(e=>(0,i.jsxs)("div",{onClick:()=>{eI(e.value),ej(!1)},style:{padding:"12px 16px",border:"1px solid #e5e7eb",borderRadius:8,cursor:"pointer",background:(null==eh?void 0:eh.id)===e.value?"#eff6ff":"#fff",borderColor:(null==eh?void 0:eh.id)===e.value?"#3b82f6":"#e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontWeight:(null==eh?void 0:eh.id)===e.value?500:400},children:e.label}),(null==eh?void 0:eh.id)===e.value&&(0,i.jsx)("span",{style:{color:"#3b82f6"},children:"✓"})]},e.value)),(0,i.jsx)("div",{onClick:()=>{eI(void 0),ej(!1)},style:{padding:"12px 16px",marginTop:8,textAlign:"center",color:"#ef4444",cursor:"pointer",border:"1px dashed #ef4444",borderRadius:8},children:"ไม่ใช้ส่วนลด"})]})}),(0,i.jsx)(x.Z,{style:Y.yn.card,children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,i.jsx)(er,{strong:!0,style:{fontSize:16},children:"วิธีการชำระเงิน (Payment Method)"}),0===$.length?(0,i.jsx)(j.Z,{message:"ยังไม่มีวิธีการชำระเงิน",description:"กรุณาเพิ่มวิธีการชำระเงินในเมนูตั้งค่าก่อนทำรายการ",type:"warning",showIcon:!0,style:{marginTop:16}}):(0,i.jsx)(u.Z,{gutter:[12,12],children:$.map(e=>{let t=ey===e.id;return(0,i.jsx)(m.Z,{span:12,children:(0,i.jsxs)("div",{onClick:()=>{eu(e.id),(0,V.Od)(e.payment_method_name,e.display_name)?ex(eB):(0,V.cc)(e.payment_method_name,e.display_name)?ex(0):ex(eB)},style:{...Y.yn.methodCard,...t?Y.yn.methodCardSelected:{}},children:[(0,i.jsx)("div",{style:{fontSize:24,marginBottom:8,color:t?Y.QF.primary:"#595959"},children:(0,V.cc)(e.payment_method_name,e.display_name)?(0,i.jsx)(k.Z,{}):(0,V.Od)(e.payment_method_name,e.display_name)?(0,i.jsx)(S.Z,{}):(0,i.jsx)(Z.Z,{})}),(0,i.jsx)(er,{strong:!0,style:{color:t?Y.QF.primary:void 0},children:e.display_name})]})},e.id)})}),ey&&(0,i.jsxs)("div",{style:{animation:"fadeIn 0.5s"},children:[(0,i.jsx)(f.Z,{style:{margin:"16px 0"}}),(()=>{let e=$.find(e=>e.id===ey),t=(0,V.cc)(null==e?void 0:e.payment_method_name,null==e?void 0:e.display_name);if((0,V.Od)(null==e?void 0:e.payment_method_name,null==e?void 0:e.display_name)){if(!(null==ec?void 0:ec.promptpay_number))return(0,i.jsxs)("div",{style:{textAlign:"center",padding:"16px 0"},children:[(0,i.jsx)("div",{style:{color:"#ff4d4f",marginBottom:12,fontWeight:500},children:"กรุณาตั้งค่าเบอร์ PromptPay ในระบบก่อน (Shop Profile)"}),(0,i.jsx)(p.ZP,{type:"primary",danger:!0,ghost:!0,icon:(0,i.jsx)(A.Z,{}),onClick:()=>n.push("/pos/settings"),children:"ไปตั้งค่าที่ Shop Profile"})]});let e=z()(ec.promptpay_number,{amount:eB});return(0,i.jsxs)("div",{style:Y.yn.qrArea,children:[(0,i.jsx)(er,{style:{display:"block",marginBottom:16,fontSize:16},children:"สแกน QR เพื่อชำระเงิน"}),(0,i.jsx)("div",{style:{background:"white",padding:12,display:"inline-block",borderRadius:8},children:(0,i.jsx)(P.t,{value:e,size:180,level:"L",includeMargin:!0})}),(0,i.jsx)("div",{style:{marginTop:16},children:(0,i.jsx)(ea,{level:3,style:{color:Y.QF.primary,margin:0},children:(0,J.xG)(eB)})}),(0,i.jsxs)(er,{type:"secondary",style:{display:"block",marginTop:8},children:[ec.promptpay_number,ec.promptpay_name&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),"(",ec.promptpay_name,")"]})]})]})}return t?(0,i.jsxs)("div",{style:Y.yn.inputArea,children:[(0,i.jsx)(er,{style:{display:"block",marginBottom:8},children:"รับเงินมา (Received)"}),(0,i.jsx)(v.Z,{style:{width:"100%",fontSize:24,padding:8,borderRadius:8,marginBottom:12},size:"large",min:0,value:em,onChange:e=>ex(e||0),formatter:e=>"฿ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>Number(e.replace(/฿\s?|(,*)/g,"")),onFocus:e=>e.target.select(),controls:!1,inputMode:"decimal",onKeyDown:e=>{["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","Escape",".",",","0","1","2","3","4","5","6","7","8","9"].includes(e.key)||e.ctrlKey||e.metaKey||e.preventDefault()}}),(0,i.jsxs)("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:16},children:[(0,i.jsx)(p.ZP,{onClick:()=>ex(eB),type:"primary",ghost:!0,size:"small",children:"พอดี"}),V.si.map(e=>(0,i.jsxs)(p.ZP,{onClick:()=>ex(e),size:"small",children:["฿",e]},e)),(0,i.jsx)(p.ZP,{icon:(0,i.jsx)(C.Z,{}),onClick:()=>ex(0),danger:!0,size:"small"})]}),(0,i.jsx)(f.Z,{style:{margin:"12px 0"}}),(0,i.jsxs)(u.Z,{justify:"space-between",align:"middle",style:{background:eD>=0?"#f6ffed":"#fff1f0",padding:12,borderRadius:8,border:"1px solid ".concat(eD>=0?"#b7eb8f":"#ffa39e")},children:[(0,i.jsx)(er,{style:{fontSize:16},children:"เงินทอน (Change)"}),(0,i.jsx)(er,{strong:!0,style:{fontSize:24,color:eD>=0?Y.QF.success:Y.QF.cancelled},children:(0,J.xG)(Math.max(0,eD))})]})]}):(0,i.jsxs)("div",{style:{textAlign:"center",padding:20},children:[(0,i.jsx)(er,{type:"secondary",children:"ตรวจสอบยอดเงินและชำระผ่านช่องทางที่เลือก"}),(0,i.jsx)("div",{style:{marginTop:16},children:(0,i.jsx)(v.Z,{style:{width:"100%",fontSize:24},value:em,onChange:e=>ex(e||0),formatter:e=>"฿ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>Number(e.replace(/฿\s?|(,*)/g,"")),controls:!1,inputMode:"decimal",onKeyDown:e=>{["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","Escape",".",",","0","1","2","3","4","5","6","7","8","9"].includes(e.key)||e.ctrlKey||e.metaKey||e.preventDefault()}})})]})})()]}),(0,i.jsxs)(p.ZP,{type:"primary",size:"large",block:!0,style:{height:56,fontSize:18,marginTop:8,background:Y.QF.success,border:"1px solid ".concat(Y.QF.success),fontWeight:700},onClick:eR,disabled:!ey||em<eB||!(0,V.VX)(null===(e=$.find(e=>e.id===ey))||void 0===e?void 0:e.payment_method_name,null===(t=$.find(e=>e.id===ey))||void 0===t?void 0:t.display_name,ec),children:["ยืนยันการชำระเงิน",em>=eB&&" (".concat((0,J.xG)(eB),")")]})]})})]})]})}),(0,i.jsx)(ee.Z,{open:ew.open,type:ew.type,title:ew.title,content:ew.content,okText:ew.okText,cancelText:ew.cancelText,onOk:ew.onOk,onCancel:eS})]})}):(0,i.jsx)(c.Z,{description:"ไม่พบข้อมูลออเดอร์"})}X().locale("th")}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=48492)}),_N_E=e.O()}]);