(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3368],{48492:function(e,t,i){Promise.resolve().then(i.bind(i,36699))},36699:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return ea}});var n=i(57437),l=i(29),s=i.n(l),a=i(2265),r=i(99376),o=i(19683),d=i(34029),c=i(85180),y=i(50742),p=i(80009),u=i(47451),m=i(69410),x=i(96931),h=i(91652),f=i(23496),g=i(53743),j=i(61778),v=i(90136),b=i(17588),_=i(13377),w=i(62376),k=i(62670),S=i(86955),Z=i(99458),A=i(55322),C=i(13429),T=i(35398),P=i(14621),z=i.n(P),B=i(53286),D=i(63836),R=i(2913),F=i(71567),I=i(98170);let N=F.q.POS.DISCOUNTS,O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",i={};return t&&(i["Content-Type"]=t),e&&(i.Cookie=e),i},Q={getAll:async(e,t)=>{let i=(0,R.b)("GET",N),n=new URLSearchParams(t||"");n.toString()&&(i+="?".concat(n.toString()));let l=O(e,""),s=await fetch(i,{cache:"no-store",headers:l,credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,I.i_)(e,"ไม่สามารถดึงข้อมูลส่วนลดได้"))}let a=await s.json();if(Array.isArray(a))return a;if((null==a?void 0:a.success)&&Array.isArray(a.data)||(null==a?void 0:a.data)&&Array.isArray(a.data))return a.data;if(a&&"object"==typeof a&&!Array.isArray(a)){if(a.success&&a.data&&"object"==typeof a.data&&!Array.isArray(a.data)&&a.data.id&&(a.data.discount_name||a.data.display_name))return[a.data];if(a.id&&(a.discount_name||a.display_name))return[a]}return[]}};var E=i(54528),G=i(66290),W=i(19135),M=i(97235),K=i(7806),L=i(32446),q=i(34962),H=i(69477),U=i(94532),Y=i(45963),V=i(49747),$=i(71096),X=i.n($);i(6729);var J=i(61414),ee=i(60300),et=i(3369),ei=i(24675),en=i(25193);let{Title:el,Text:es}=o.default;function ea(){var e,t;let i=(0,r.useRouter)(),l=(0,r.useParams)(),[o,P]=d.ZP.useMessage(),R=Array.isArray(null==l?void 0:l.paymentId)?l.paymentId[0]:null==l?void 0:l.paymentId,[F,I]=(0,a.useState)(null),[N,O]=(0,a.useState)(!0),[$,X]=(0,a.useState)([]),[ea,er]=(0,a.useState)([]),[eo,ed]=(0,a.useState)(null),[ec,ey]=(0,a.useState)(null),[ep,eu]=(0,a.useState)(0),[em,ex]=(0,a.useState)(null),[eh,ef]=(0,a.useState)(!1),{showLoading:eg,hideLoading:ej}=(0,et.x)();(0,ei.s)();let[ev,eb]=(0,a.useState)({open:!1,type:"confirm",title:"",content:"",onOk:()=>{}}),e_=()=>eb(e=>({...e,open:!1})),ew=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(R)try{e||(O(!0),eg("กำลังโหลดข้อมูลการชำระเงิน..."));let t=await W.n.getProfile().catch(()=>null),[n,l,s]=await Promise.all([B.x.getById(R),D.E.getAll(),Q.getAll()]);if([L.i.Paid,L.i.Cancelled].includes(n.status)){i.push("/pos/channels");return}I(n);let a=(l.data||[]).filter(e=>n.order_type===L.m.Delivery||"Delivery"!==e.payment_method_name);X(a);let r=[];if(Array.isArray(s))r=s;else if(s&&"object"==typeof s){if("id"in s&&("string"==typeof s.discount_name||"string"==typeof s.display_name))r=[s];else if(Array.isArray(s.data))r=s.data;else if(!0===s.success&&Array.isArray(s.data))r=s.data;else{let e;if(!0===s.success&&(e=s.data)&&"object"==typeof e){let e=s.data;"id"in e&&("string"==typeof e.discount_name||"string"==typeof e.display_name)&&(r=[e])}}}er(r),ed(t),n.discount&&ex(n.discount),n&&eu(Number(n.total_amount))}catch(t){e||o.error("ไม่สามารถโหลดข้อมูลการชำระเงินได้")}finally{e||(O(!1),ej())}},[o,R,i,eg,ej]),ek=(0,a.useMemo)(()=>{if(!ea||!Array.isArray(ea)||0===ea.length)return[];let e=ea.filter(e=>!!e&&(!0===e.is_active||void 0===e.is_active));return 0===e.length?[]:e.map(e=>{let t=e.display_name||e.discount_name;return t&&e.id?{label:"".concat(t," (").concat(e.discount_type===H.L.Percentage?"".concat(e.discount_amount,"%"):"-".concat(e.discount_amount,"฿"),")"),value:e.id}:null}).filter(e=>null!==e)},[ea]);(0,a.useEffect)(()=>{R&&ew(!1)},[ew,R]),(0,a.useEffect)(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]);let{subtotal:eS,discount:eZ,vat:eA,total:eC,change:eT}=(0,V.hs)(F,ep),eP=(0,a.useMemo)(()=>{if(!(null==F?void 0:F.items))return[];let e=F.items.filter(e=>e.status!==L.i.Cancelled);return(0,K.S)(e)},[null==F?void 0:F.items]),ez=async e=>{if(F)try{eg("กำลังอัปเดตส่วนลด...");let t=await (0,M.P)(),i=await B.x.update(F.id,{discount_id:e||null},void 0,t);if(I(i),e){let t=ea.find(t=>t.id===e);t&&(ex(t),o.success('ใช้ส่วนลด "'.concat(t.display_name,'" เรียบร้อย')))}else ex(null),o.info("ยกเลิกการใช้ส่วนลด");eu(Number(i.total_amount))}catch(e){o.error("ไม่สามารถบันทึกส่วนลดได้")}finally{ej()}},eB=async()=>{if(!ec){o.error("กรุณาเลือกวิธีการชำระเงิน");return}if(ep<eC){o.error("ยอดเงินที่รับต้องมากกว่าหรือเท่ากับยอดชำระ");return}let e=$.find(e=>e.id===ec),t=(null==e?void 0:e.display_name)||"ไม่ระบุ";eb({open:!0,type:"success",title:"ยืนยันการชำระเงิน",content:(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsxs)("div",{style:{fontSize:16,marginBottom:8},children:["วิธีการชำระเงิน: ",(0,n.jsx)(es,{strong:!0,children:t})]}),(0,n.jsxs)("div",{style:{fontSize:24,fontWeight:700,color:Y.QF.primary},children:["ยอดสุทธิ ",(0,J.xG)(eC)]}),eT>0&&(0,n.jsxs)("div",{style:{color:Y.QF.success,fontSize:18,marginTop:4},children:["เงินทอน ",(0,J.xG)(eT)]})]}),okText:"ยืนยัน",cancelText:"ยกเลิก",onOk:async()=>{try{eg("กำลังดำเนินการชำระเงิน..."),e_();let e=await (0,M.P)(),t={order_id:F.id,payment_method_id:ec,amount:eC,amount_received:ep,change_amount:eT,status:U.b.Success};await E.U.create(t,void 0,e),await B.x.updateStatus(F.id,L.i.Paid,e),F.table_id&&await G.$.update(F.table_id,{status:q.c.Available},void 0,e),o.success("ชำระเงินเรียบร้อย"),i.push("/pos/dashboard/".concat(F.id))}catch(e){o.error("การชำระเงินล้มเหลว")}finally{ej()}}})},eD=async()=>{F&&eb({open:!0,type:"warning",title:"ย้อนกลับไปแก้ไขออเดอร์?",content:'สถานะออเดอร์จะถูกเปลี่ยนกลับเป็น "กำลังดำเนินการ" เพื่อให้คุณสามารถแก้ไขรายการอาหารได้ คุณแน่ใจหรือไม่?',okText:"ตกลง",cancelText:"ยกเลิก",onOk:async()=>{try{var e;eg("กำลังดำเนินการ..."),e_();let t=await (0,M.P)(),n=(null===(e=F.items)||void 0===e?void 0:e.filter(e=>e.status!==L.i.Cancelled))||[];await Promise.all(n.map(e=>B.x.updateItemStatus(e.id,L.i.Served,void 0,t))),await B.x.updateStatus(F.id,L.i.Pending,t),o.success("ย้อนกลับไปแก้ไขออเดอร์เรียบร้อย"),i.push((0,V.T_)(F.id))}catch(e){o.error("ไม่สามารถเปลี่ยนสถานะออเดอร์ได้")}finally{ej()}}})};return N&&!F?null:F?(0,n.jsx)(en.Z,{maxWidth:99999,style:{padding:0},children:(0,n.jsxs)("div",{style:Y.yn.container,children:[(0,n.jsx)(s(),{id:Y.um.__hash,children:Y.um}),P,(0,n.jsx)("div",{style:Y.yn.heroSection,className:"payment-hero-mobile",children:(0,n.jsx)("div",{style:Y.yn.contentWrapper,className:"payment-content-mobile",children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:16},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:16},children:[(0,n.jsx)(y.ZP,{type:"text",icon:(0,n.jsx)(b.Z,{style:{fontSize:20}}),style:{color:"#fff",padding:0,height:"auto",marginTop:4},onClick:()=>{(null==F?void 0:F.order_type)===L.m.DineIn?i.push("/pos/channels/dine-in"):(null==F?void 0:F.order_type)===L.m.TakeAway?i.push("/pos/channels/takeaway"):(null==F?void 0:F.order_type)===L.m.Delivery?i.push("/pos/channels/delivery"):i.back()}}),(0,n.jsxs)("div",{children:[(0,n.jsx)(el,{level:3,style:Y.yn.pageTitle,children:"ชำระเงิน"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:8,flexWrap:"wrap"},children:[(0,n.jsxs)(p.Z,{color:"blue",style:{borderRadius:4,border:"none"},children:[(0,J.mz)(F.order_type)," ",(0,J.jN)(F)]}),(0,n.jsx)(p.Z,{color:(0,J.OY)(F.status),style:{borderRadius:4,border:"none"},children:(0,J.d7)(F.status)}),(0,n.jsxs)(es,{style:{color:"rgba(255,255,255,0.85)",fontSize:13},children:["#",F.order_no]})]})]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,n.jsx)(y.ZP,{icon:(0,n.jsx)(_.Z,{}),onClick:eD,style:{background:"rgba(255,255,255,0.2)",border:"none",color:"#fff"},children:"แก้ไขออเดอร์"}),(0,n.jsx)(y.ZP,{danger:!0,onClick:()=>{F&&eb({open:!0,type:"danger",title:"ยืนยันการยกเลิกออเดอร์?",content:"การดำเนินการนี้จะยกเลิกสินค้าทุกรายการและคืนสถานะโต๊ะ (หากมี) คุณแน่ใจหรือไม่?",okText:"ยืนยันการยกเลิก",cancelText:"ยกเลิก",onOk:async()=>{try{var e;eg("กำลังดำเนินการยกเลิก..."),e_();let t=await (0,M.P)(),n=(null===(e=F.items)||void 0===e?void 0:e.filter(e=>e.status!==L.i.Cancelled))||[];await Promise.all(n.map(e=>B.x.updateItemStatus(e.id,L.i.Cancelled,void 0,t))),await B.x.updateStatus(F.id,L.i.Cancelled,t),F.table_id&&await G.$.update(F.table_id,{status:q.c.Available},void 0,t),o.success("ยกเลิกออเดอร์เรียบร้อย"),i.push((0,V.wv)())}catch(e){o.error("ไม่สามารถยกเลิกออเดอร์ได้")}finally{ej()}}})},children:"ยกเลิกออเดอร์"})]})]})})}),(0,n.jsx)("div",{style:{...Y.yn.contentWrapper,marginTop:-30,paddingBottom:40},children:(0,n.jsxs)(u.Z,{gutter:[24,24],children:[(0,n.jsx)(m.Z,{xs:24,lg:14,children:(0,n.jsxs)(x.Z,{style:Y.yn.card,styles:{body:{height:"100%",display:"flex",flexDirection:"column"}},children:[(0,n.jsx)(el,{level:4,style:{marginBottom:16,marginTop:0},children:"รายการสรุป (Order Summary)"}),(0,n.jsx)("div",{style:{flex:1,overflowY:"auto",paddingRight:8,minHeight:300,maxHeight:500},children:eP.map((e,t)=>{var i,l;return(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16,paddingBottom:16,borderBottom:"1px solid ".concat(Y.QF.borderLight)},children:[(0,n.jsxs)("div",{style:{display:"flex",gap:12,flex:1,minWidth:0},children:[(0,n.jsx)(h.Z,{shape:"square",size:50,src:null===(i=e.product)||void 0===i?void 0:i.img_url,icon:(0,n.jsx)(w.Z,{}),style:{backgroundColor:Y.QF.backgroundSecondary,flexShrink:0,borderRadius:8}}),(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,n.jsx)(es,{strong:!0,style:{display:"block"},ellipsis:!0,children:null===(l=e.product)||void 0===l?void 0:l.display_name}),(0,n.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,n.jsx)(es,{type:"secondary",style:{fontSize:13},children:(0,J.xG)(e.price)}),(0,n.jsxs)(p.Z,{style:{margin:0,fontSize:11},children:["x",e.quantity]})]}),e.notes&&(0,n.jsxs)(es,{style:{display:"block",fontSize:12,fontStyle:"italic",color:"#ef4444",marginTop:2},children:["* ",e.notes]}),e.details&&e.details.length>0&&(0,n.jsx)("div",{style:{marginTop:2,display:"flex",flexDirection:"column",gap:0},children:e.details.map((e,t)=>(0,n.jsx)("div",{children:(0,n.jsxs)(es,{style:{color:"#10b981",fontSize:12},children:["+ ",e.detail_name," ",Number(e.extra_price)>0?"(+".concat(Number(e.extra_price),")"):""]})},t))})]})]}),(0,n.jsx)(es,{strong:!0,children:(0,J.xG)(Number(e.total_price||Number(e.price)*e.quantity))})]},t)})}),(0,n.jsxs)("div",{style:Y.yn.summaryBox,children:[(0,n.jsxs)(u.Z,{justify:"space-between",style:{marginBottom:8},children:[(0,n.jsx)(es,{type:"secondary",children:"ยอดรวม (Subtotal)"}),(0,n.jsx)(es,{children:(0,J.xG)(eS)})]}),eZ>0&&(0,n.jsxs)(u.Z,{justify:"space-between",style:{marginBottom:8,color:Y.QF.success},children:[(0,n.jsx)(es,{type:"success",children:"ส่วนลด (Discount)"}),(0,n.jsxs)(es,{type:"success",children:["-",(0,J.xG)(eZ)]})]}),eA>0&&(0,n.jsxs)(u.Z,{justify:"space-between",style:{marginBottom:8},children:[(0,n.jsx)(es,{type:"secondary",children:"VAT (7%)"}),(0,n.jsx)(es,{children:(0,J.xG)(eA)})]}),(0,n.jsx)(f.Z,{style:{margin:"12px 0"}}),(0,n.jsxs)(u.Z,{justify:"space-between",align:"middle",children:[(0,n.jsx)(el,{level:4,style:{margin:0},children:"ยอดสุทธิ (Total)"}),(0,n.jsx)(el,{level:3,style:{color:Y.QF.primary,margin:0},children:(0,J.xG)(eC)})]})]})]})}),(0,n.jsxs)(m.Z,{xs:24,lg:10,children:[(0,n.jsxs)(x.Z,{style:{...Y.yn.card,height:"auto",marginBottom:12,overflow:"visible"},styles:{body:{padding:"12px 16px",overflow:"visible"}},children:[(0,n.jsx)(es,{strong:!0,style:{display:"block",marginBottom:8,fontSize:13},children:"ส่วนลด (Discount)"}),(0,n.jsxs)("div",{style:{border:"1px solid ".concat(em?"#4F46E5":"#d9d9d9"),borderRadius:8,padding:"8px 12px",cursor:"pointer",background:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center",height:48,transition:"all 0.2s"},onClick:()=>{N||ef(!0)},children:[(0,n.jsx)("span",{style:{color:em?"#1f2937":"#9ca3af"},children:em?"".concat(em.display_name||em.discount_name," (").concat("Percentage"===em.discount_type?"".concat(em.discount_amount,"%"):"-".concat(em.discount_amount,"฿"),")"):"เลือกส่วนลด (Select Discount)"}),em?(0,n.jsx)("span",{onClick:e=>{e.stopPropagation(),ez(void 0)},style:{color:"#ef4444",padding:4},children:"✕"}):(0,n.jsx)("span",{style:{color:"#9ca3af"},children:"▼"})]})]}),(0,n.jsx)(g.Z,{title:"เลือกส่วนลด",open:eh,onCancel:()=>ef(!1),footer:null,centered:!0,width:400,zIndex:10001,children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:"60vh",overflowY:"auto"},children:[0===ek.length?(0,n.jsx)("div",{style:{textAlign:"center",padding:24,color:"#9ca3af"},children:"ไม่มีส่วนลดที่ใช้งานได้"}):ek.map(e=>(0,n.jsxs)("div",{onClick:()=>{ez(e.value),ef(!1)},style:{padding:"12px 16px",border:"1px solid #e5e7eb",borderRadius:8,cursor:"pointer",background:(null==em?void 0:em.id)===e.value?"#eff6ff":"#fff",borderColor:(null==em?void 0:em.id)===e.value?"#3b82f6":"#e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("span",{style:{fontWeight:(null==em?void 0:em.id)===e.value?500:400},children:e.label}),(null==em?void 0:em.id)===e.value&&(0,n.jsx)("span",{style:{color:"#3b82f6"},children:"✓"})]},e.value)),(0,n.jsx)("div",{onClick:()=>{ez(void 0),ef(!1)},style:{padding:"12px 16px",marginTop:8,textAlign:"center",color:"#ef4444",cursor:"pointer",border:"1px dashed #ef4444",borderRadius:8},children:"ไม่ใช้ส่วนลด"})]})}),(0,n.jsx)(x.Z,{style:Y.yn.card,children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,n.jsx)(es,{strong:!0,style:{fontSize:16},children:"วิธีการชำระเงิน (Payment Method)"}),0===$.length?(0,n.jsx)(j.Z,{message:"ยังไม่มีวิธีการชำระเงิน",description:"กรุณาเพิ่มวิธีการชำระเงินในเมนูตั้งค่าก่อนทำรายการ",type:"warning",showIcon:!0,style:{marginTop:16}}):(0,n.jsx)(u.Z,{gutter:[12,12],children:$.map(e=>{let t=ec===e.id;return(0,n.jsx)(m.Z,{span:12,children:(0,n.jsxs)("div",{onClick:()=>{ey(e.id),(0,V.Od)(e.payment_method_name,e.display_name)?eu(eC):(0,V.cc)(e.payment_method_name,e.display_name)?eu(0):eu(eC)},style:{...Y.yn.methodCard,...t?Y.yn.methodCardSelected:{}},children:[(0,n.jsx)("div",{style:{fontSize:24,marginBottom:8,color:t?Y.QF.primary:"#595959"},children:(0,V.cc)(e.payment_method_name,e.display_name)?(0,n.jsx)(k.Z,{}):(0,V.Od)(e.payment_method_name,e.display_name)?(0,n.jsx)(S.Z,{}):(0,n.jsx)(Z.Z,{})}),(0,n.jsx)(es,{strong:!0,style:{color:t?Y.QF.primary:void 0},children:e.display_name})]})},e.id)})}),ec&&(0,n.jsxs)("div",{style:{animation:"fadeIn 0.5s"},children:[(0,n.jsx)(f.Z,{style:{margin:"16px 0"}}),(()=>{let e=$.find(e=>e.id===ec),t=(0,V.cc)(null==e?void 0:e.payment_method_name,null==e?void 0:e.display_name);if((0,V.Od)(null==e?void 0:e.payment_method_name,null==e?void 0:e.display_name)){if(!(null==eo?void 0:eo.promptpay_number))return(0,n.jsxs)("div",{style:{textAlign:"center",padding:"16px 0"},children:[(0,n.jsx)("div",{style:{color:"#ff4d4f",marginBottom:12,fontWeight:500},children:"กรุณาตั้งค่าเบอร์ PromptPay ในระบบก่อน (Shop Profile)"}),(0,n.jsx)(y.ZP,{type:"primary",danger:!0,ghost:!0,icon:(0,n.jsx)(A.Z,{}),onClick:()=>i.push("/pos/settings"),children:"ไปตั้งค่าที่ Shop Profile"})]});let e=z()(eo.promptpay_number,{amount:eC});return(0,n.jsxs)("div",{style:Y.yn.qrArea,children:[(0,n.jsx)(es,{style:{display:"block",marginBottom:16,fontSize:16},children:"สแกน QR เพื่อชำระเงิน"}),(0,n.jsx)("div",{style:{background:"white",padding:12,display:"inline-block",borderRadius:8},children:(0,n.jsx)(T.t,{value:e,size:180,level:"L",includeMargin:!0})}),(0,n.jsx)("div",{style:{marginTop:16},children:(0,n.jsx)(el,{level:3,style:{color:Y.QF.primary,margin:0},children:(0,J.xG)(eC)})}),(0,n.jsxs)(es,{type:"secondary",style:{display:"block",marginTop:8},children:[eo.promptpay_number,eo.promptpay_name&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),"(",eo.promptpay_name,")"]})]})]})}return t?(0,n.jsxs)("div",{style:Y.yn.inputArea,children:[(0,n.jsx)(es,{style:{display:"block",marginBottom:8},children:"รับเงินมา (Received)"}),(0,n.jsx)(v.Z,{style:{width:"100%",fontSize:24,padding:8,borderRadius:8,marginBottom:12},size:"large",min:0,value:ep,onChange:e=>eu(e||0),formatter:e=>"฿ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>Number(e.replace(/฿\s?|(,*)/g,"")),onFocus:e=>e.target.select(),controls:!1,inputMode:"decimal",onKeyDown:e=>{["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","Escape",".",",","0","1","2","3","4","5","6","7","8","9"].includes(e.key)||e.ctrlKey||e.metaKey||e.preventDefault()}}),(0,n.jsxs)("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:16},children:[(0,n.jsx)(y.ZP,{onClick:()=>eu(eC),type:"primary",ghost:!0,size:"small",children:"พอดี"}),V.si.map(e=>(0,n.jsxs)(y.ZP,{onClick:()=>eu(e),size:"small",children:["฿",e]},e)),(0,n.jsx)(y.ZP,{icon:(0,n.jsx)(C.Z,{}),onClick:()=>eu(0),danger:!0,size:"small"})]}),(0,n.jsx)(f.Z,{style:{margin:"12px 0"}}),(0,n.jsxs)(u.Z,{justify:"space-between",align:"middle",style:{background:eT>=0?"#f6ffed":"#fff1f0",padding:12,borderRadius:8,border:"1px solid ".concat(eT>=0?"#b7eb8f":"#ffa39e")},children:[(0,n.jsx)(es,{style:{fontSize:16},children:"เงินทอน (Change)"}),(0,n.jsx)(es,{strong:!0,style:{fontSize:24,color:eT>=0?Y.QF.success:Y.QF.cancelled},children:(0,J.xG)(Math.max(0,eT))})]})]}):(0,n.jsxs)("div",{style:{textAlign:"center",padding:20},children:[(0,n.jsx)(es,{type:"secondary",children:"ตรวจสอบยอดเงินและชำระผ่านช่องทางที่เลือก"}),(0,n.jsx)("div",{style:{marginTop:16},children:(0,n.jsx)(v.Z,{style:{width:"100%",fontSize:24},value:ep,onChange:e=>eu(e||0),formatter:e=>"฿ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>Number(e.replace(/฿\s?|(,*)/g,"")),controls:!1,inputMode:"decimal",onKeyDown:e=>{["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","Escape",".",",","0","1","2","3","4","5","6","7","8","9"].includes(e.key)||e.ctrlKey||e.metaKey||e.preventDefault()}})})]})})()]}),(0,n.jsxs)(y.ZP,{type:"primary",size:"large",block:!0,style:{height:56,fontSize:18,marginTop:8,background:Y.QF.success,border:"1px solid ".concat(Y.QF.success),fontWeight:700},onClick:eB,disabled:!ec||ep<eC||!(0,V.VX)(null===(e=$.find(e=>e.id===ec))||void 0===e?void 0:e.payment_method_name,null===(t=$.find(e=>e.id===ec))||void 0===t?void 0:t.display_name,eo),children:["ยืนยันการชำระเงิน",ep>=eC&&" (".concat((0,J.xG)(eC),")")]})]})})]})]})}),(0,n.jsx)(ee.Z,{open:ev.open,type:ev.type,title:ev.title,content:ev.content,okText:ev.okText,cancelText:ev.cancelText,onOk:ev.onOk,onCancel:e_})]})}):(0,n.jsx)(c.Z,{description:"ไม่พบข้อมูลออเดอร์"})}X().locale("th")}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=48492)}),_N_E=e.O()}]);