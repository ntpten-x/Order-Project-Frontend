(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3368],{48492:function(e,t,n){Promise.resolve().then(n.bind(n,36699))},36699:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return en}});var i=n(57437),s=n(29),l=n.n(s),a=n(2265),r=n(99376),o=n(19683),d=n(34029),c=n(85180),u=n(50742),p=n(80009),y=n(47451),m=n(69410),x=n(96931),h=n(91652),g=n(23496),f=n(53743),v=n(61778),j=n(90136),b=n(17588),_=n(13377),w=n(62376),S=n(62670),k=n(86955),Z=n(99458),A=n(55322),C=n(13429),T=n(35398),P=n(14621),D=n.n(P),z=n(53286),R=n(63836),B=n(2913);let O=n(71567).q.POS.DISCOUNTS,N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",n={};return t&&(n["Content-Type"]=t),e&&(n.Cookie=e),n},F={getAll:async(e,t)=>{let n=(0,B.b)("GET",O),i=new URLSearchParams(t||"");i.toString()&&(n+="?".concat(i.toString()));let s=N(e,""),l=await fetch(n,{cache:"no-store",headers:s,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลส่วนลดได้")}let a=await l.json();if(console.log("[DiscountsService] Raw response from backend:",JSON.stringify(a,null,2)),Array.isArray(a))return console.log("[DiscountsService] Response is array, returning:",a.length,"items"),a;if((null==a?void 0:a.success)&&Array.isArray(a.data))return console.log("[DiscountsService] Response is { success: true, data: [...] }, returning:",a.data.length,"items"),a.data;if((null==a?void 0:a.data)&&Array.isArray(a.data))return console.log("[DiscountsService] Response is { data: [...] }, returning:",a.data.length,"items"),a.data;if(a&&"object"==typeof a&&!Array.isArray(a)){if(a.success&&a.data&&"object"==typeof a.data&&!Array.isArray(a.data)&&a.data.id&&(a.data.discount_name||a.data.display_name))return console.log("[DiscountsService] Received single discount in success.data, converting to array:",a.data),[a.data];if(a.id&&(a.discount_name||a.display_name))return console.log("[DiscountsService] Received single discount object, converting to array:",a),[a]}return console.error("[DiscountsService] Unexpected discounts response format:",a),[]}};var I=n(54528),Q=n(66290),E=n(19135),G=n(97235),W=n(32446),M=n(34962),K=n(69477),L=n(94532),q=n(45963),U=n(49747),H=n(71096),Y=n.n(H);n(6729);var V=n(61414),$=n(60300),J=n(3369),X=n(24675);let{Title:ee,Text:et}=o.default;function en(){var e,t,n;let s=(0,r.useRouter)(),o=(0,r.useParams)(),[P,B]=d.ZP.useMessage(),O=Array.isArray(null==o?void 0:o.paymentId)?o.paymentId[0]:null==o?void 0:o.paymentId,[N,H]=(0,a.useState)(null),[Y,en]=(0,a.useState)(!0),[ei,es]=(0,a.useState)([]),[el,ea]=(0,a.useState)([]),[er,eo]=(0,a.useState)(null),[ed,ec]=(0,a.useState)(null),[eu,ep]=(0,a.useState)(0),[ey,em]=(0,a.useState)(null),[ex,eh]=(0,a.useState)(!1),{showLoading:eg,hideLoading:ef}=(0,J.x)();(0,X.s)();let ev=(0,a.useRef)(null),ej=(0,a.useRef)(null),[eb,e_]=(0,a.useState)({open:!1,type:"confirm",title:"",content:"",onOk:()=>{}}),ew=()=>e_(e=>({...e,open:!1})),eS=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(O)try{e||(en(!0),eg("กำลังโหลดข้อมูลการชำระเงิน..."));let t=await E.n.getProfile().catch(()=>null),[n,i,l]=await Promise.all([z.x.getById(O),R.E.getAll(),F.getAll()]);if([W.i.Paid,W.i.Cancelled].includes(n.status)){s.push("/pos/channels");return}H(n);let a=(i.data||[]).filter(e=>n.order_type===W.m.Delivery||"Delivery"!==e.payment_method_name);es(a);let r=[];Array.isArray(l)?r=l:l&&"object"==typeof l&&(l.id&&(l.discount_name||l.display_name)?r=[l]:l.data&&Array.isArray(l.data)?r=l.data:l.success&&Array.isArray(l.data)?r=l.data:l.success&&l.data&&"object"==typeof l.data&&!Array.isArray(l.data)&&l.data.id&&(l.data.discount_name||l.data.display_name)&&(r=[l.data])),ea(r),eo(t),n.discount&&em(n.discount),n&&ep(Number(n.total_amount))}catch(t){e||P.error("ไม่สามารถโหลดข้อมูลการชำระเงินได้")}finally{e||(en(!1),ef())}},[P,O,s,eg,ef]),ek=(0,a.useMemo)(()=>{if(console.log("[DiscountOptions] Input discounts:",el),!el||!Array.isArray(el)||0===el.length)return console.log("[DiscountOptions] No discounts available"),[];let e=el.filter(e=>!!e&&(!0===e.is_active||void 0===e.is_active));if(console.log("[DiscountOptions] Active discounts:",e),0===e.length)return console.log("[DiscountOptions] No active discounts"),[];let t=e.map(e=>{let t=e.display_name||e.discount_name;return t&&e.id?{label:"".concat(t," (").concat(e.discount_type===K.L.Percentage?"".concat(e.discount_amount,"%"):"-".concat(e.discount_amount,"฿"),")"),value:e.id}:(console.log("[DiscountOptions] Skipping item without name/id:",e),null)}).filter(e=>null!==e);return console.log("[DiscountOptions] Final options:",t),t},[el]);(0,a.useEffect)(()=>{O&&eS(!1)},[eS,O]),(0,a.useEffect)(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]);let{subtotal:eZ,discount:eA,vat:eC,total:eT,change:eP}=(0,U.hs)(N,eu),eD=async e=>{if(N)try{eg("กำลังอัปเดตส่วนลด...");let t=await (0,G.P)(),n=await z.x.update(N.id,{discount_id:e||null},void 0,t);if(H(n),e){let t=el.find(t=>t.id===e);t&&(em(t),P.success('ใช้ส่วนลด "'.concat(t.display_name,'" เรียบร้อย')))}else em(null),P.info("ยกเลิกการใช้ส่วนลด");ep(Number(n.total_amount))}catch(e){P.error("ไม่สามารถบันทึกส่วนลดได้")}finally{ef()}},ez=async()=>{if(!ed){P.error("กรุณาเลือกวิธีการชำระเงิน");return}if(eu<eT){P.error("ยอดเงินที่รับต้องมากกว่าหรือเท่ากับยอดชำระ");return}let e=ei.find(e=>e.id===ed),t=(null==e?void 0:e.display_name)||"ไม่ระบุ";e_({open:!0,type:"success",title:"ยืนยันการชำระเงิน",content:(0,i.jsxs)("div",{style:{textAlign:"center"},children:[(0,i.jsxs)("div",{style:{fontSize:16,marginBottom:8},children:["วิธีการชำระเงิน: ",(0,i.jsx)(et,{strong:!0,children:t})]}),(0,i.jsxs)("div",{style:{fontSize:24,fontWeight:700,color:q.QF.primary},children:["ยอดสุทธิ ",(0,V.xG)(eT)]}),eP>0&&(0,i.jsxs)("div",{style:{color:q.QF.success,fontSize:18,marginTop:4},children:["เงินทอน ",(0,V.xG)(eP)]})]}),okText:"ยืนยัน",cancelText:"ยกเลิก",onOk:async()=>{try{eg("กำลังดำเนินการชำระเงิน..."),ew();let e=await (0,G.P)(),t={order_id:N.id,payment_method_id:ed,amount:eT,amount_received:eu,change_amount:eP,status:L.b.Success};await I.U.create(t,void 0,e),await z.x.updateStatus(N.id,W.i.Paid,e),N.table_id&&await Q.$.update(N.table_id,{status:M.c.Available},void 0,e),P.success("ชำระเงินเรียบร้อย"),s.push("/pos/dashboard/".concat(N.id))}catch(e){P.error("การชำระเงินล้มเหลว")}finally{ef()}}})},eR=async()=>{N&&e_({open:!0,type:"warning",title:"ย้อนกลับไปแก้ไขออเดอร์?",content:'สถานะออเดอร์จะถูกเปลี่ยนกลับเป็น "กำลังดำเนินการ" เพื่อให้คุณสามารถแก้ไขรายการอาหารได้ คุณแน่ใจหรือไม่?',okText:"ตกลง",cancelText:"ยกเลิก",onOk:async()=>{try{var e;eg("กำลังดำเนินการ..."),ew();let t=await (0,G.P)(),n=(null===(e=N.items)||void 0===e?void 0:e.filter(e=>e.status!==W.i.Cancelled))||[];await Promise.all(n.map(e=>z.x.updateItemStatus(e.id,W.i.Served,void 0,t))),await z.x.updateStatus(N.id,W.i.Pending,t),P.success("ย้อนกลับไปแก้ไขออเดอร์เรียบร้อย"),s.push((0,U.T_)(N.id))}catch(e){P.error("ไม่สามารถเปลี่ยนสถานะออเดอร์ได้")}finally{ef()}}})};return Y&&!N?null:N?(0,i.jsxs)("div",{style:q.yn.container,children:[(0,i.jsx)(l(),{id:q.um.__hash,children:q.um}),B,(0,i.jsx)("div",{style:q.yn.heroSection,className:"payment-hero-mobile",children:(0,i.jsx)("div",{style:q.yn.contentWrapper,className:"payment-content-mobile",children:(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:16},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:16},children:[(0,i.jsx)(u.ZP,{type:"text",icon:(0,i.jsx)(b.Z,{style:{fontSize:20}}),style:{color:"#fff",padding:0,height:"auto",marginTop:4},onClick:()=>{(null==N?void 0:N.order_type)===W.m.DineIn?s.push("/pos/channels/dine-in"):(null==N?void 0:N.order_type)===W.m.TakeAway?s.push("/pos/channels/takeaway"):(null==N?void 0:N.order_type)===W.m.Delivery?s.push("/pos/channels/delivery"):s.back()}}),(0,i.jsxs)("div",{children:[(0,i.jsx)(ee,{level:3,style:q.yn.pageTitle,children:"ชำระเงิน"}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:8,flexWrap:"wrap"},children:[(0,i.jsxs)(p.Z,{color:"blue",style:{borderRadius:4,border:"none"},children:[(0,V.mz)(N.order_type)," ",(0,V.jN)(N)]}),(0,i.jsx)(p.Z,{color:(0,V.OY)(N.status),style:{borderRadius:4,border:"none"},children:(0,V.d7)(N.status)}),(0,i.jsxs)(et,{style:{color:"rgba(255,255,255,0.85)",fontSize:13},children:["#",N.order_no]})]})]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,i.jsx)(u.ZP,{icon:(0,i.jsx)(_.Z,{}),onClick:eR,style:{background:"rgba(255,255,255,0.2)",border:"none",color:"#fff"},children:"แก้ไขออเดอร์"}),(0,i.jsx)(u.ZP,{danger:!0,onClick:()=>{N&&e_({open:!0,type:"danger",title:"ยืนยันการยกเลิกออเดอร์?",content:"การดำเนินการนี้จะยกเลิกสินค้าทุกรายการและคืนสถานะโต๊ะ (หากมี) คุณแน่ใจหรือไม่?",okText:"ยืนยันการยกเลิก",cancelText:"ยกเลิก",onOk:async()=>{try{var e;eg("กำลังดำเนินการยกเลิก..."),ew();let t=await (0,G.P)(),n=(null===(e=N.items)||void 0===e?void 0:e.filter(e=>e.status!==W.i.Cancelled))||[];await Promise.all(n.map(e=>z.x.updateItemStatus(e.id,W.i.Cancelled,void 0,t))),await z.x.updateStatus(N.id,W.i.Cancelled,t),N.table_id&&await Q.$.update(N.table_id,{status:M.c.Available},void 0,t),P.success("ยกเลิกออเดอร์เรียบร้อย"),s.push((0,U.wv)())}catch(e){P.error("ไม่สามารถยกเลิกออเดอร์ได้")}finally{ef()}}})},children:"ยกเลิกออเดอร์"})]})]})})}),(0,i.jsx)("div",{style:{...q.yn.contentWrapper,marginTop:-30,paddingBottom:40},children:(0,i.jsxs)(y.Z,{gutter:[24,24],children:[(0,i.jsx)(m.Z,{xs:24,lg:14,children:(0,i.jsxs)(x.Z,{style:q.yn.card,styles:{body:{height:"100%",display:"flex",flexDirection:"column"}},children:[(0,i.jsx)(ee,{level:4,style:{marginBottom:16,marginTop:0},children:"รายการสรุป (Order Summary)"}),(0,i.jsx)("div",{style:{flex:1,overflowY:"auto",paddingRight:8,minHeight:300,maxHeight:500},children:null===(e=N.items)||void 0===e?void 0:e.filter(e=>e.status!==W.i.Cancelled).map((e,t)=>{var n,s;return(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16,paddingBottom:16,borderBottom:"1px solid ".concat(q.QF.borderLight)},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:12,flex:1,minWidth:0},children:[(0,i.jsx)(h.Z,{shape:"square",size:50,src:null===(n=e.product)||void 0===n?void 0:n.img_url,icon:(0,i.jsx)(w.Z,{}),style:{backgroundColor:q.QF.backgroundSecondary,flexShrink:0,borderRadius:8}}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,i.jsx)(et,{strong:!0,style:{display:"block"},ellipsis:!0,children:null===(s=e.product)||void 0===s?void 0:s.display_name}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,i.jsx)(et,{type:"secondary",style:{fontSize:13},children:(0,V.xG)(e.price)}),(0,i.jsxs)(p.Z,{style:{margin:0,fontSize:11},children:["x",e.quantity]})]}),e.notes&&(0,i.jsxs)(et,{style:{display:"block",fontSize:12,fontStyle:"italic",color:"#ef4444",marginTop:2},children:["* ",e.notes]}),e.details&&e.details.length>0&&(0,i.jsx)("div",{style:{marginTop:2,display:"flex",flexDirection:"column",gap:0},children:e.details.map((e,t)=>(0,i.jsx)("div",{children:(0,i.jsxs)(et,{style:{color:"#10b981",fontSize:12},children:["+ ",e.detail_name," ",Number(e.extra_price)>0?"(+".concat(Number(e.extra_price),")"):""]})},t))})]})]}),(0,i.jsx)(et,{strong:!0,children:(0,V.xG)(Number(e.total_price||Number(e.price)*e.quantity))})]},t)})}),(0,i.jsxs)("div",{style:q.yn.summaryBox,children:[(0,i.jsxs)(y.Z,{justify:"space-between",style:{marginBottom:8},children:[(0,i.jsx)(et,{type:"secondary",children:"ยอดรวม (Subtotal)"}),(0,i.jsx)(et,{children:(0,V.xG)(eZ)})]}),eA>0&&(0,i.jsxs)(y.Z,{justify:"space-between",style:{marginBottom:8,color:q.QF.success},children:[(0,i.jsx)(et,{type:"success",children:"ส่วนลด (Discount)"}),(0,i.jsxs)(et,{type:"success",children:["-",(0,V.xG)(eA)]})]}),eC>0&&(0,i.jsxs)(y.Z,{justify:"space-between",style:{marginBottom:8},children:[(0,i.jsx)(et,{type:"secondary",children:"VAT (7%)"}),(0,i.jsx)(et,{children:(0,V.xG)(eC)})]}),(0,i.jsx)(g.Z,{style:{margin:"12px 0"}}),(0,i.jsxs)(y.Z,{justify:"space-between",align:"middle",children:[(0,i.jsx)(ee,{level:4,style:{margin:0},children:"ยอดสุทธิ (Total)"}),(0,i.jsx)(ee,{level:3,style:{color:q.QF.primary,margin:0},children:(0,V.xG)(eT)})]})]})]})}),(0,i.jsxs)(m.Z,{xs:24,lg:10,children:[(0,i.jsxs)(x.Z,{style:{...q.yn.card,height:"auto",marginBottom:12,overflow:"visible"},styles:{body:{padding:"12px 16px",overflow:"visible"}},children:[(0,i.jsx)(et,{strong:!0,style:{display:"block",marginBottom:8,fontSize:13},children:"ส่วนลด (Discount)"}),(0,i.jsxs)("div",{style:{border:"1px solid ".concat(ey?"#4F46E5":"#d9d9d9"),borderRadius:8,padding:"8px 12px",cursor:"pointer",background:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center",height:48,transition:"all 0.2s"},onClick:()=>{Y||eh(!0)},children:[(0,i.jsx)("span",{style:{color:ey?"#1f2937":"#9ca3af"},children:ey?"".concat(ey.display_name||ey.discount_name," (").concat("Percentage"===ey.discount_type?"".concat(ey.discount_amount,"%"):"-".concat(ey.discount_amount,"฿"),")"):"เลือกส่วนลด (Select Discount)"}),ey?(0,i.jsx)("span",{onClick:e=>{e.stopPropagation(),eD(void 0)},style:{color:"#ef4444",padding:4},children:"✕"}):(0,i.jsx)("span",{style:{color:"#9ca3af"},children:"▼"})]})]}),(0,i.jsx)(f.Z,{title:"เลือกส่วนลด",open:ex,onCancel:()=>eh(!1),footer:null,centered:!0,width:400,zIndex:10001,children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:"60vh",overflowY:"auto"},children:[0===ek.length?(0,i.jsx)("div",{style:{textAlign:"center",padding:24,color:"#9ca3af"},children:"ไม่มีส่วนลดที่ใช้งานได้"}):ek.map(e=>(0,i.jsxs)("div",{onClick:()=>{eD(e.value),eh(!1)},style:{padding:"12px 16px",border:"1px solid #e5e7eb",borderRadius:8,cursor:"pointer",background:(null==ey?void 0:ey.id)===e.value?"#eff6ff":"#fff",borderColor:(null==ey?void 0:ey.id)===e.value?"#3b82f6":"#e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontWeight:(null==ey?void 0:ey.id)===e.value?500:400},children:e.label}),(null==ey?void 0:ey.id)===e.value&&(0,i.jsx)("span",{style:{color:"#3b82f6"},children:"✓"})]},e.value)),(0,i.jsx)("div",{onClick:()=>{eD(void 0),eh(!1)},style:{padding:"12px 16px",marginTop:8,textAlign:"center",color:"#ef4444",cursor:"pointer",border:"1px dashed #ef4444",borderRadius:8},children:"ไม่ใช้ส่วนลด"})]})}),(0,i.jsx)(x.Z,{style:q.yn.card,children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[(0,i.jsx)(et,{strong:!0,style:{fontSize:16},children:"วิธีการชำระเงิน (Payment Method)"}),0===ei.length?(0,i.jsx)(v.Z,{message:"ยังไม่มีวิธีการชำระเงิน",description:"กรุณาเพิ่มวิธีการชำระเงินในเมนูตั้งค่าก่อนทำรายการ",type:"warning",showIcon:!0,style:{marginTop:16}}):(0,i.jsx)(y.Z,{gutter:[12,12],children:ei.map(e=>{let t=ed===e.id;return(0,i.jsx)(m.Z,{span:12,children:(0,i.jsxs)("div",{onClick:()=>{ec(e.id),(0,U.Od)(e.payment_method_name,e.display_name)?ep(eT):(0,U.cc)(e.payment_method_name,e.display_name)?ep(0):ep(eT)},style:{...q.yn.methodCard,...t?q.yn.methodCardSelected:{}},children:[(0,i.jsx)("div",{style:{fontSize:24,marginBottom:8,color:t?q.QF.primary:"#595959"},children:(0,U.cc)(e.payment_method_name,e.display_name)?(0,i.jsx)(S.Z,{}):(0,U.Od)(e.payment_method_name,e.display_name)?(0,i.jsx)(k.Z,{}):(0,i.jsx)(Z.Z,{})}),(0,i.jsx)(et,{strong:!0,style:{color:t?q.QF.primary:void 0},children:e.display_name})]})},e.id)})}),ed&&(0,i.jsxs)("div",{style:{animation:"fadeIn 0.5s"},children:[(0,i.jsx)(g.Z,{style:{margin:"16px 0"}}),(()=>{let e=ei.find(e=>e.id===ed),t=(0,U.cc)(null==e?void 0:e.payment_method_name,null==e?void 0:e.display_name);if((0,U.Od)(null==e?void 0:e.payment_method_name,null==e?void 0:e.display_name)){if(!(null==er?void 0:er.promptpay_number))return(0,i.jsxs)("div",{style:{textAlign:"center",padding:"16px 0"},children:[(0,i.jsx)("div",{style:{color:"#ff4d4f",marginBottom:12,fontWeight:500},children:"กรุณาตั้งค่าเบอร์ PromptPay ในระบบก่อน (Shop Profile)"}),(0,i.jsx)(u.ZP,{type:"primary",danger:!0,ghost:!0,icon:(0,i.jsx)(A.Z,{}),onClick:()=>s.push("/pos/settings"),children:"ไปตั้งค่าที่ Shop Profile"})]});let e=D()(er.promptpay_number,{amount:eT});return(0,i.jsxs)("div",{style:q.yn.qrArea,children:[(0,i.jsx)(et,{style:{display:"block",marginBottom:16,fontSize:16},children:"สแกน QR เพื่อชำระเงิน"}),(0,i.jsx)("div",{style:{background:"white",padding:12,display:"inline-block",borderRadius:8},children:(0,i.jsx)(T.t,{value:e,size:180,level:"L",includeMargin:!0})}),(0,i.jsx)("div",{style:{marginTop:16},children:(0,i.jsx)(ee,{level:3,style:{color:q.QF.primary,margin:0},children:(0,V.xG)(eT)})}),(0,i.jsxs)(et,{type:"secondary",style:{display:"block",marginTop:8},children:[er.promptpay_number,er.promptpay_name&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("br",{}),"(",er.promptpay_name,")"]})]})]})}return t?(0,i.jsxs)("div",{style:q.yn.inputArea,children:[(0,i.jsx)(et,{style:{display:"block",marginBottom:8},children:"รับเงินมา (Received)"}),(0,i.jsx)(j.Z,{ref:ev,style:{width:"100%",fontSize:24,padding:8,borderRadius:8,marginBottom:12},size:"large",min:0,value:eu,onChange:e=>ep(e||0),formatter:e=>"฿ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>Number(e.replace(/฿\s?|(,*)/g,"")),onFocus:e=>e.target.select(),controls:!1,inputMode:"decimal",onKeyDown:e=>{["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","Escape",".",",","0","1","2","3","4","5","6","7","8","9"].includes(e.key)||e.ctrlKey||e.metaKey||e.preventDefault()}}),(0,i.jsxs)("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginBottom:16},children:[(0,i.jsx)(u.ZP,{onClick:()=>ep(eT),type:"primary",ghost:!0,size:"small",children:"พอดี"}),U.si.map(e=>(0,i.jsxs)(u.ZP,{onClick:()=>ep(e),size:"small",children:["฿",e]},e)),(0,i.jsx)(u.ZP,{icon:(0,i.jsx)(C.Z,{}),onClick:()=>ep(0),danger:!0,size:"small"})]}),(0,i.jsx)(g.Z,{style:{margin:"12px 0"}}),(0,i.jsxs)(y.Z,{justify:"space-between",align:"middle",style:{background:eP>=0?"#f6ffed":"#fff1f0",padding:12,borderRadius:8,border:"1px solid ".concat(eP>=0?"#b7eb8f":"#ffa39e")},children:[(0,i.jsx)(et,{style:{fontSize:16},children:"เงินทอน (Change)"}),(0,i.jsx)(et,{strong:!0,style:{fontSize:24,color:eP>=0?q.QF.success:q.QF.cancelled},children:(0,V.xG)(Math.max(0,eP))})]})]}):(0,i.jsxs)("div",{style:{textAlign:"center",padding:20},children:[(0,i.jsx)(et,{type:"secondary",children:"ตรวจสอบยอดเงินและชำระผ่านช่องทางที่เลือก"}),(0,i.jsx)("div",{style:{marginTop:16},children:(0,i.jsx)(j.Z,{ref:ej,style:{width:"100%",fontSize:24},value:eu,onChange:e=>ep(e||0),formatter:e=>"฿ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>Number(e.replace(/฿\s?|(,*)/g,"")),controls:!1,inputMode:"decimal",onKeyDown:e=>{["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","Escape",".",",","0","1","2","3","4","5","6","7","8","9"].includes(e.key)||e.ctrlKey||e.metaKey||e.preventDefault()}})})]})})()]}),(0,i.jsxs)(u.ZP,{type:"primary",size:"large",block:!0,style:{height:56,fontSize:18,marginTop:8,background:q.QF.success,border:"1px solid ".concat(q.QF.success),fontWeight:700},onClick:ez,disabled:!ed||eu<eT||!(0,U.VX)(null===(t=ei.find(e=>e.id===ed))||void 0===t?void 0:t.payment_method_name,null===(n=ei.find(e=>e.id===ed))||void 0===n?void 0:n.display_name,er),children:["ยืนยันการชำระเงิน",eu>=eT&&" (".concat((0,V.xG)(eT),")")]})]})})]})]})}),(0,i.jsx)($.Z,{open:eb.open,type:eb.type,title:eb.title,content:eb.content,okText:eb.okText,cancelText:eb.cancelText,onOk:eb.onOk,onCancel:ew})]}):(0,i.jsx)(c.Z,{description:"ไม่พบข้อมูลออเดอร์"})}Y().locale("th")}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=48492)}),_N_E=e.O()}]);