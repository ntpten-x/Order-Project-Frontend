(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5392],{3196:function(e,r,t){Promise.resolve().then(t.bind(t,78989))},78989:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return D}});var i=t(57437),n=t(2265),d=t(99376),o=t(82646),s=t(47451),a=t(69410),l=t(96931),c=t(50337),x=t(85180),u=t(80009),p=t(24783),f=t(23496),g=t(91652),y=t(50742),h=t(62376),m=t(52539),b=t(67605),j=t(83669),v=t(15883),S=t(53286),k=t(32446),Z=t(69602),_=t(61414),w=t(3369),z=t(24675),R=t(67697),C=t(71096),q=t.n(C);t(6729);var I=t(21652),A=t.n(I);let{Title:W,Text:B}=o.default;function D(){let e=(0,d.useRouter)(),[r,t]=(0,n.useState)([]),[o,C]=(0,n.useState)(!0),{showLoading:I,hideLoading:D}=(0,w.O)(),{socket:T}=(0,z.s)(),U=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e&&(I("กำลังโหลดรายการรอชำระเงิน..."),C(!0));let r=[k.i.WaitingForPayment].join(","),i=(await S.x.getAll(void 0,1,100,r)).data.map(e=>({order:e,items:e.items||[],totalAmount:e.total_amount}));i.sort((e,r)=>q()(r.order.create_date).unix()-q()(e.order.create_date).unix()),t(e=>A()(e,i)?e:i)}catch(e){}finally{e&&(C(!1),D())}},[I,D]);(0,n.useEffect)(()=>{U(!0)},[U]),(0,R.D)({socket:T,events:["orders:update","orders:create","orders:delete"],onRefresh:()=>U(!1),intervalMs:15e3,debounceMs:1e3});let N=(e,r)=>{switch(e){case k.m.DineIn:return"โต๊ะ ".concat((null==r?void 0:r.table_name)||"N/A");case k.m.TakeAway:return"สั่งกลับบ้าน";case k.m.Delivery:return"เดลิเวอรี่";default:return e||"N/A"}},L=e=>{switch(e){case k.m.DineIn:return(0,i.jsx)(h.Z,{});case k.m.TakeAway:return(0,i.jsx)(m.Z,{});case k.m.Delivery:return(0,i.jsx)(b.Z,{});default:return(0,i.jsx)(h.Z,{})}},E=(r,t)=>{if(!r)return;I("กำลังไปหน้าชำระเงิน...");let i=t===k.m.Delivery?"/pos/items/delivery/".concat(r):"/pos/items/payment/".concat(r);e.push(i)};return(0,i.jsxs)("div",{style:Z.q.container,children:[(0,i.jsx)("div",{style:Z.q.heroSection,children:(0,i.jsx)("div",{style:Z.q.contentWrapper,children:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:20},children:[(0,i.jsx)(j.Z,{style:{fontSize:28,color:"#fff"}}),(0,i.jsxs)("div",{children:[(0,i.jsx)(W,{level:3,style:Z.q.pageTitle,children:"รายการรอชำระเงิน"}),(0,i.jsx)(B,{style:Z.q.pageSubtitle,children:"Waiting For Payment Orders"})]})]})})}),(0,i.jsx)("div",{style:{...Z.q.contentWrapper,marginTop:-40,padding:"0 24px"},children:o?(0,i.jsx)(s.Z,{gutter:[16,16],children:Array.from({length:6}).map((e,r)=>(0,i.jsx)(a.Z,{xs:24,sm:12,lg:8,children:(0,i.jsx)(l.Z,{style:Z.q.card,children:(0,i.jsx)(c.Z,{active:!0,paragraph:{rows:3}})})},"skeleton-".concat(r)))}):0===r.length?(0,i.jsx)(l.Z,{style:{borderRadius:12,border:"none",boxShadow:Z.U.cardShadow},children:(0,i.jsx)(x.Z,{description:"ไม่มีรายการรอชำระเงิน"})}):(0,i.jsx)(s.Z,{gutter:[16,16],children:r.map(e=>(0,i.jsx)(a.Z,{xs:24,sm:12,lg:8,children:(0,i.jsxs)(l.Z,{hoverable:!0,style:Z.q.card,bodyStyle:{flex:1,display:"flex",flexDirection:"column"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:16},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u.Z,{color:"geekblue",style:{fontSize:13,padding:"4px 8px",marginBottom:6,borderRadius:6},children:q()(e.order.create_date).format("HH:mm")}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[L(e.order.order_type),(0,i.jsx)(B,{strong:!0,style:{fontSize:16},children:N(e.order.order_type,e.order.table)})]}),(0,i.jsxs)(p.Z,{size:4,direction:"vertical",style:{marginTop:4},children:[(0,i.jsxs)(B,{type:"secondary",style:{fontSize:12},children:["#",e.order.order_no]}),e.order.created_by_id&&(0,i.jsxs)(B,{type:"secondary",style:{fontSize:11},children:[(0,i.jsx)(v.Z,{style:{marginRight:4}}),e.order.created_by_id]})]})]}),(0,i.jsx)(B,{strong:!0,style:{fontSize:20,color:Z.U.primary},children:(0,_.xG)(e.totalAmount)})]}),(0,i.jsx)(f.Z,{style:{margin:"12px 0"}}),(0,i.jsx)("div",{style:{flex:1},children:e.items.map((e,r)=>{var t,n;return(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12,alignItems:"center"},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center",flex:1,minWidth:0},children:[(null===(t=e.product)||void 0===t?void 0:t.img_url)?(0,i.jsx)(g.Z,{shape:"square",size:40,src:e.product.img_url,style:{borderRadius:8,border:"1px solid ".concat(Z.U.borderLight)}}):(0,i.jsx)("div",{style:{width:40,height:40,borderRadius:8,background:"#f8fafc",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid ".concat(Z.U.borderLight)},children:(0,i.jsx)(h.Z,{style:{color:Z.U.textLight}})}),(0,i.jsxs)("div",{style:{minWidth:0,flex:1},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,i.jsxs)(u.Z,{style:{margin:0,padding:"0 4px",fontSize:11},children:["x",e.quantity]}),(0,i.jsx)(B,{strong:!0,style:{fontSize:14},ellipsis:!0,children:null===(n=e.product)||void 0===n?void 0:n.display_name})]}),(0,i.jsx)(B,{type:"secondary",style:{fontSize:12,display:"block",marginTop:1},children:(0,_.xG)(e.price)}),e.notes&&(0,i.jsxs)(B,{type:"secondary",style:{fontSize:11,display:"block",fontStyle:"italic"},children:["* ",e.notes]})]})]}),(0,i.jsx)(B,{strong:!0,style:{marginLeft:8},children:(0,_.xG)(Number(e.total_price||Number(e.price)*e.quantity))})]},r)})}),(0,i.jsx)(f.Z,{style:{margin:"12px 0"}}),(0,i.jsx)(y.ZP,{type:"primary",block:!0,size:"large",style:{background:Z.U.success,borderColor:Z.U.success,borderRadius:8,height:44,fontWeight:600},onClick:()=>E(e.order.id,e.order.order_type),children:"ชำระเงิน"})]})},e.order.id))})})]})}q().locale("th")},69602:function(e,r,t){"use strict";t.d(r,{U:function(){return i},q:function(){return n}});let i={...t(1165).mv,cash:"#10b981",qr:"#1d4ed8",creditCard:"#f59e0b",totalCardBg:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",summaryBg:"#fafafa"},n={container:{minHeight:"100vh",background:i.background,fontFamily:"'Inter', 'Sarabun', sans-serif"},heroSection:{background:"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)",padding:"32px 24px 70px",position:"relative",borderBottomLeftRadius:24,borderBottomRightRadius:24,boxShadow:"0 8px 24px rgba(24, 144, 255, 0.25)",marginBottom:-40,zIndex:1,overflow:"hidden"},contentWrapper:{maxWidth:1200,margin:"0 auto",position:"relative",zIndex:10},pageTitle:{margin:0,color:"#fff",fontSize:"clamp(20px, 5vw, 28px)",fontWeight:700},pageSubtitle:{color:"rgba(255,255,255,0.85)",fontSize:14},card:{borderRadius:12,overflow:"hidden",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",height:"100%",display:"flex",flexDirection:"column"},methodCard:{borderWidth:2,borderStyle:"solid",borderColor:"#f0f0f0",borderRadius:12,padding:16,textAlign:"center",cursor:"pointer",background:"#fff",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},methodCardSelected:{borderColor:i.primary,background:"#eff6ff",transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.15)"},inputArea:{background:"#f8fafc",padding:20,borderRadius:12,border:"1px solid ".concat(i.border)},qrArea:{textAlign:"center",background:"#fff",padding:24,borderRadius:16,border:"1px dashed ".concat(i.primary),boxShadow:"0 4px 20px rgba(0,0,0,0.05)"},summaryBox:{marginTop:"auto",background:i.backgroundSecondary,padding:16,borderRadius:12}}}},function(e){e.O(0,[5015,7717,7698,742,3211,7993,8651,2646,6207,1721,9,8640,6931,19,1652,5531,1624,3490,4191,2971,2117,1744],function(){return e(e.s=3196)}),_N_E=e.O()}]);