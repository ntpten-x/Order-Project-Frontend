(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4900],{62121:function(e,t,r){Promise.resolve().then(r.bind(r,23191))},23191:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W}});var l=r(57437),n=r(29),s=r.n(n),a=r(42785),i=r(2265),o=r(19683),d=r(38616),c=r(80009),y=r(23496),m=r(50742),u=r(24783),x=r(88589),h=r(96931),j=r(35631),p=r(6520),g=r(63680),v=r(89245),f=r(5540),_=r(99376),S=r(32446),b=r(61414),Z=r(1165),k=r(12093),w=r(11713),L=r(45345),C=r(53286),D=r(71096),N=r.n(D);r(6729);var z=r(25193),I=r(37410),E=r(20148),P=r(2786),B=r(73179);function H(e){let{emptyTitle:t="ไม่มีข้อมูล",emptyDescription:r,emptyAction:n,emptyImage:s,scroll:a,locale:i,pagination:o,...d}=e;return(0,l.jsx)(B.Z,{...d,scroll:{x:"max-content",...a},pagination:void 0===o?{size:"small"}:o,locale:{...i,emptyText:(0,l.jsx)("div",{style:{padding:16},children:(0,l.jsx)(P.Z,{title:t,description:r,action:n,image:s})})}})}let{Text:R}=o.default,{useBreakpoint:T}=d.default;function W(){let e=(0,_.useRouter)(),t=!T().md;(0,a.yV)();let[r,n]=(0,i.useState)(1),[o,d]=(0,i.useState)(""),D=(0,k.c)(o.trim(),400);(0,i.useEffect)(()=>{n(1)},[D]);let{orders:B,total:W,isLoading:Y,refetch:A}=function(e){let{page:t=1,limit:r=50,status:l,type:n,query:s}=e,{data:a,error:i,isLoading:o,isFetching:d,refetch:c}=(0,w.a)({queryKey:["ordersSummary",t,r,l||"all",n||"all",s||""],queryFn:async()=>await C.x.getAllSummary(void 0,t,r,l,n,s),placeholderData:L.Wk,staleTime:3e3});return{orders:(null==a?void 0:a.data)||[],total:(null==a?void 0:a.total)||0,currentPage:(null==a?void 0:a.page)||t,lastPage:(null==a?void 0:a.last_page)||1,isLoading:o,isFetching:d,isError:i,refetch:c}}({page:r,limit:10,status:"Pending,Cooking,Served,WaitingForPayment",query:D||void 0}),O=[{title:"เลขที่ออเดอร์",dataIndex:"order_no",key:"order_no",align:"center",render:e=>(0,l.jsx)(R,{strong:!0,style:{whiteSpace:"nowrap"},children:e})},{title:"วันเวลา",dataIndex:"create_date",key:"date",align:"center",render:e=>(0,l.jsxs)("div",{style:{whiteSpace:"nowrap"},children:[(0,l.jsx)(R,{children:N()(e).format("DD MMM YYYY")}),(0,l.jsx)("br",{}),(0,l.jsx)(R,{type:"secondary",style:{fontSize:12},children:N()(e).format("HH:mm")})]})},{title:"ประเภท",dataIndex:"order_type",key:"type",align:"center",render:e=>(0,l.jsx)(c.Z,{color:(0,b.Gs)(e),style:{margin:0},children:(0,b.mz)(e)})},{title:"โต๊ะ / รหัสอ้างอิง",key:"reference",align:"center",render:(e,t)=>{let r=(0,b.jN)(t),n="default";return t.order_type===S.m.DineIn&&(n="cyan"),t.order_type===S.m.Delivery&&(n="orange"),(0,l.jsx)(c.Z,{color:n,style:{margin:0},children:r})}},{title:"รายละเอียดรายการ",key:"items_summary",width:200,align:"center",render:(e,t)=>{let r=t.items_summary||{},n=t.items_count||0,s=Object.entries(r);return 0===n?(0,l.jsx)(R,{type:"secondary",children:"-"}):(0,l.jsxs)("div",{style:{fontSize:13,lineHeight:"1.6",textAlign:"left",display:"inline-block",minWidth:140},children:[s.length>0?(0,l.jsxs)(l.Fragment,{children:[s.map(e=>{let[t,r]=e;return(0,l.jsxs)("div",{style:Z.L2.summaryRow,children:[(0,l.jsx)(R,{type:"secondary",children:t}),(0,l.jsxs)(R,{strong:!0,children:[r," รายการ"]})]},t)}),(0,l.jsx)(y.Z,{style:{margin:"4px 0"}})]}):null,(0,l.jsxs)("div",{style:Z.L2.summaryRowBold,children:[(0,l.jsx)(R,{strong:!0,children:"รวม"}),(0,l.jsxs)(R,{strong:!0,style:{color:Z.mv.primary},children:[n," รายการ"]})]})]})}},{title:"ยอดรวม",dataIndex:"total_amount",key:"total",align:"center",render:e=>(0,l.jsx)(R,{strong:!0,style:{whiteSpace:"nowrap"},children:(0,b.xG)(e)})},{title:"สถานะ",dataIndex:"status",key:"status",align:"center",render:e=>(0,l.jsx)(c.Z,{color:(0,b.OY)(e),style:{margin:0},children:(0,b.d7)(e)})},{title:"จัดการ",key:"action",align:"center",render:(t,r)=>(0,l.jsx)(m.ZP,{type:"primary",icon:(0,l.jsx)(p.Z,{}),onClick:()=>e.push("/pos/orders/".concat(r.id)),style:{whiteSpace:"nowrap"},children:"ดูรายละเอียด"})}];return(0,l.jsxs)("div",{style:Z.L2.container,children:[(0,l.jsx)(s(),{id:Z.$k.__hash,children:Z.$k}),(0,l.jsx)(E.Z,{title:"ออเดอร์",subtitle:"รายการออเดอร์ที่กำลังดำเนินการ",onBack:()=>e.push("/pos"),icon:(0,l.jsx)(g.Z,{style:{fontSize:20}}),actions:(0,l.jsxs)(u.Z,{size:8,wrap:!0,children:[(0,l.jsx)(x.default,{allowClear:!0,placeholder:"ค้นหาออเดอร์...",value:o,onChange:e=>d(e.target.value),style:{minWidth:t?200:280}}),(0,l.jsx)(m.ZP,{icon:(0,l.jsx)(v.Z,{}),onClick:()=>A(),children:"รีเฟรช"})]})}),(0,l.jsx)(z.Z,{children:(0,l.jsx)(I.Z,{children:(0,l.jsx)("main",{style:Z.L2.contentWrapper,className:"orders-content-wrapper",children:(0,l.jsx)(h.Z,{bordered:!1,style:{borderRadius:20,boxShadow:Z.mv.cardShadow,border:"1px solid rgba(226, 232, 240, 0.8)"},styles:{body:Z.L2.cardBody},children:t?(0,l.jsx)(j.Z,{loading:Y,dataSource:B,locale:{emptyText:(0,l.jsx)("div",{style:{padding:12},children:(0,l.jsx)(P.Z,{title:"ไม่พบรายการออเดอร์"})})},renderItem:t=>{let r=t.items_count||0;return(0,l.jsxs)("article",{style:{...Z.L2.orderCard,marginBottom:14},onClick:()=>e.push("/pos/orders/".concat(t.id)),role:"button",tabIndex:0,"aria-label":"ออเดอร์ ".concat(t.order_no),onKeyDown:r=>"Enter"===r.key&&e.push("/pos/orders/".concat(t.id)),className:"orders-card fade-in",children:[(0,l.jsxs)("div",{style:Z.L2.cardHeader,className:"orders-card-header",children:[(0,l.jsxs)("div",{style:Z.L2.cardHeaderLeft,children:[(0,l.jsxs)(R,{strong:!0,style:{fontSize:17,color:Z.mv.text},children:["#",t.order_no]}),(0,l.jsx)(c.Z,{color:(0,b.OY)(t.status),style:{margin:0,borderRadius:8,fontWeight:600},children:(0,b.d7)(t.status)})]}),(0,l.jsx)(c.Z,{color:(0,b.Gs)(t.order_type),style:{borderRadius:8,fontWeight:600},children:(0,b.mz)(t.order_type)})]}),(0,l.jsxs)("div",{style:Z.L2.cardBody,className:"orders-card-body",children:[(0,l.jsxs)("div",{style:Z.L2.refSection,children:[t.order_type===S.m.DineIn&&t.table&&(0,l.jsxs)("div",{style:Z.L2.refValue,className:"orders-ref-value",children:["\uD83E\uDE91 โต๊ะ ",t.table.table_name]}),(t.order_type===S.m.Delivery||t.order_type===S.m.TakeAway)&&(0,l.jsxs)("div",{style:Z.L2.refValue,className:"orders-ref-value",children:["\uD83D\uDCCB ",t.delivery_code?"Ref: ".concat(t.delivery_code):"-"]})]}),(0,l.jsxs)("div",{style:Z.L2.itemsSummary,children:[(0,l.jsxs)("div",{style:Z.L2.metaSection,children:[(0,l.jsx)(g.Z,{style:{color:Z.mv.primary}}),(0,l.jsxs)(R,{strong:!0,style:{color:Z.mv.text},children:[r," รายการ"]})]}),(0,l.jsxs)("div",{style:Z.L2.metaSection,children:[(0,l.jsx)(f.Z,{style:{color:Z.mv.textSecondary}}),(0,l.jsx)(R,{style:{color:Z.mv.textSecondary},children:N()(t.create_date).format("HH:mm น.")})]})]}),(0,l.jsxs)("div",{style:Z.L2.totalSection,children:[(0,l.jsx)(R,{style:Z.L2.totalLabel,children:"ยอดรวม"}),(0,l.jsx)("div",{style:Z.L2.totalAmount,className:"orders-total-amount",children:(0,b.xG)(Number(t.total_amount))})]}),(0,l.jsx)(m.ZP,{type:"primary",ghost:!0,icon:(0,l.jsx)(p.Z,{}),style:Z.L2.actionButton,className:"scale-hover",children:"ดูรายละเอียด"})]})]})},pagination:{current:r,pageSize:10,total:W,onChange:e=>n(e),size:"small",style:{textAlign:"center",marginTop:16}}}):(0,l.jsx)(H,{columns:O,dataSource:B,loading:Y,rowKey:"id",virtual:!0,scroll:{y:600},pagination:{current:r,pageSize:10,total:W,onChange:e=>n(e),showTotal:e=>"ทั้งหมด ".concat(e," รายการ")},emptyTitle:"ไม่พบรายการออเดอร์"})})})})})]})}N().locale("th")}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=62121)}),_N_E=e.O()}]);