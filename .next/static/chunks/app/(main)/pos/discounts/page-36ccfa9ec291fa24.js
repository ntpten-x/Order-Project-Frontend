(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2519],{90153:function(e,t,n){Promise.resolve().then(n.bind(n,62024))},89245:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(2265),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},a=n(55015);function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=r.forwardRef((e,t)=>r.createElement(a.Z,l({},e,{ref:t,icon:i})))},85180:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(2265),i=n(61994),a=n(80052),l=n(71744),o=n(55274),s=n(13761),c=n(84560),d=n(99320),u=n(71140);let f=e=>{let{componentCls:t,margin:n,marginXS:r,marginXL:i,fontSize:a,lineHeight:l}=e;return{[t]:{marginInline:r,fontSize:a,lineHeight:l,textAlign:"center",["".concat(t,"-image")]:{height:e.emptyImgHeight,marginBottom:r,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},["".concat(t,"-description")]:{color:e.colorTextDescription},["".concat(t,"-footer")]:{marginTop:n},"&-normal":{marginBlock:i,color:e.colorTextDescription,["".concat(t,"-description")]:{color:e.colorTextDescription},["".concat(t,"-image")]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:r,color:e.colorTextDescription,["".concat(t,"-image")]:{height:e.emptyImgHeightSM}}}}};var h=(0,d.I$)("Empty",e=>{let{componentCls:t,controlHeightLG:n,calc:r}=e;return f((0,u.IX)(e,{emptyImgCls:"".concat(t,"-img"),emptyImgHeight:r(n).mul(2.5).equal(),emptyImgHeightMD:n,emptyImgHeightSM:r(n).mul(.875).equal()}))});let g=r.createElement(()=>{let[,e]=(0,c.ZP)(),[t]=(0,o.Z)("Empty"),n=new s.t(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return r.createElement("svg",{style:n,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},r.createElement("title",null,(null==t?void 0:t.description)||"Empty"),r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("g",{transform:"translate(24 31.67)"},r.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),r.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),r.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),r.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),r.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),r.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),r.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},r.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),r.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},null),p=r.createElement(()=>{let[,e]=(0,c.ZP)(),[t]=(0,o.Z)("Empty"),{colorFill:n,colorFillTertiary:i,colorFillQuaternary:a,colorBgContainer:l}=e,{borderColor:d,shadowColor:u,contentColor:f}=(0,r.useMemo)(()=>({borderColor:new s.t(n).onBackground(l).toHexString(),shadowColor:new s.t(i).onBackground(l).toHexString(),contentColor:new s.t(a).onBackground(l).toHexString()}),[n,i,a,l]);return r.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},r.createElement("title",null,(null==t?void 0:t.description)||"Empty"),r.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},r.createElement("ellipse",{fill:u,cx:"32",cy:"33",rx:"32",ry:"7"}),r.createElement("g",{fillRule:"nonzero",stroke:d},r.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),r.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:f}))))},null),x=e=>{var t;let{className:n,rootClassName:s,prefixCls:c,image:d,description:u,children:f,imageStyle:x,style:m,classNames:y,styles:v,...b}=e,{getPrefixCls:j,direction:w,className:E,style:k,classNames:C,styles:S,image:Z}=(0,l.dj)("empty"),I=j("empty",c),[z,P]=h(I),[_,D]=(0,a.MW)([C,y],[S,v],{props:e}),[R]=(0,o.Z)("Empty"),L=void 0!==u?u:null==R?void 0:R.description,M=null!==(t=null!=d?d:Z)&&void 0!==t?t:g,N=null;return N="string"==typeof M?r.createElement("img",{draggable:!1,alt:"string"==typeof L?L:"empty",src:M}):M,r.createElement("div",{className:(0,i.W)(z,P,I,E,{["".concat(I,"-normal")]:M===p,["".concat(I,"-rtl")]:"rtl"===w},n,s,_.root),style:{...D.root,...k,...m},...b},r.createElement("div",{className:(0,i.W)("".concat(I,"-image"),_.image),style:{...x,...D.image}},N),L&&r.createElement("div",{className:(0,i.W)("".concat(I,"-description"),_.description),style:D.description},L),f&&r.createElement("div",{className:(0,i.W)("".concat(I,"-footer"),_.footer),style:D.footer},f))};x.PRESENTED_IMAGE_DEFAULT=g,x.PRESENTED_IMAGE_SIMPLE=p;var m=x},53743:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(42535),i=n(50815),a=n(74079),l=n(2265),o=n(28975),s=n(61994),c=n(93942),d=n(71744),u=n(64024),f=n(85695),h=n(90024),g=n(4065),p=(0,c.i)(e=>{let{prefixCls:t,className:n,closeIcon:r,closable:i,type:a,title:c,children:p,footer:x,...m}=e,{getPrefixCls:y}=l.useContext(d.E_),v=y(),b=t||y("modal"),j=(0,u.Z)(v),[w,E]=(0,g.ZP)(b,j),k="".concat(b,"-confirm"),C={};return C=a?{closable:null!=i&&i,title:"",footer:"",children:l.createElement(f.O,{...e,prefixCls:b,confirmPrefixCls:k,rootPrefixCls:v,content:p})}:{closable:null==i||i,title:c,footer:null!==x&&l.createElement(h.$,{...e}),children:p},l.createElement(o.s,{prefixCls:b,className:(0,s.W)(w,"".concat(b,"-pure-panel"),a&&k,a&&"".concat(k,"-").concat(a),n,E,j),...m,closeIcon:(0,h.b)(b,r),closable:i,...C})}),x=n(23248);function m(e){return(0,r.ZP)((0,r.uW)(e))}let y=a.Z;y.useModal=x.Z,y.info=function(e){return(0,r.ZP)((0,r.cw)(e))},y.success=function(e){return(0,r.ZP)((0,r.vq)(e))},y.error=function(e){return(0,r.ZP)((0,r.AQ)(e))},y.warning=m,y.warn=m,y.confirm=function(e){return(0,r.ZP)((0,r.Au)(e))},y.destroyAll=function(){for(;i.Z.length;){let e=i.Z.pop();e&&e()}},y.config=r.ai,y._InternalPanelDoNotUseOrYouWillBeFired=p;var v=y},62024:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r=n(57437),i=n(2265),a=n(82646),l=n(88589),o=n(50742),s=n(80009),c=n(85180),d=n(53743),u=n(34029),f=n(48651),h=n(44314),g=n(89245),p=n(96473),x=n(62670),m=n(8900),y=n(39725),v=n(13377),b=n(26349),j=n(69477),w=n(99376),E=n(3369),k=n(26972),C=n(24675),S=n(97235),Z=n(3286),I=n(67697),z=n(73814);let P={container:{paddingBottom:100,backgroundColor:"#f8f9fc",minHeight:"100vh"},header:{background:"linear-gradient(135deg, #fa8c16 0%, #d48806 100%)",padding:"20px 20px 60px 20px",position:"relative",overflow:"hidden"},headerDecoCircle1:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"rgba(255,255,255,0.1)"},headerDecoCircle2:{position:"absolute",bottom:-30,left:-30,width:100,height:100,borderRadius:"50%",background:"rgba(255,255,255,0.08)"},headerContent:{position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"space-between"},headerLeft:{display:"flex",alignItems:"center",gap:12},headerIconBox:{width:48,height:48,borderRadius:14,background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)"},headerActions:{display:"flex",gap:8},statsCard:{margin:"-40px 16px 0 16px",padding:"16px",background:"white",borderRadius:20,boxShadow:"0 8px 24px rgba(0,0,0,0.08)",display:"flex",justifyContent:"space-around",position:"relative",zIndex:10},statItem:{textAlign:"center",flex:1},statNumber:{fontSize:24,fontWeight:700,display:"block"},statLabel:{fontSize:12,color:"#8c8c8c",marginTop:2},listContainer:{padding:"20px 16px 0 16px"},sectionTitle:{display:"flex",alignItems:"center",gap:8,marginBottom:16},discountCard:e=>({marginBottom:12,borderRadius:20,border:"none",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",overflow:"hidden",transition:"all 0.3s ease",background:e?"white":"linear-gradient(to right, #fafafa, white)",opacity:e?1:.7}),discountCardInner:{padding:16,display:"flex",alignItems:"center",gap:14}},{Text:_,Title:D}=a.default,R=e=>{let{onRefresh:t,onAdd:n,searchValue:i,onSearchChange:a}=e;return(0,r.jsxs)("div",{style:P.header,children:[(0,r.jsx)("div",{style:P.headerDecoCircle1}),(0,r.jsx)("div",{style:P.headerDecoCircle2}),(0,r.jsxs)("div",{style:P.headerContent,children:[(0,r.jsxs)("div",{style:P.headerLeft,children:[(0,r.jsx)("div",{style:P.headerIconBox,children:(0,r.jsx)(h.Z,{style:{fontSize:24,color:"white"}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(_,{style:{color:"rgba(255,255,255,0.85)",fontSize:13,display:"block"},children:"จัดการข้อมูล"}),(0,r.jsx)(D,{level:4,style:{color:"white",margin:0,fontWeight:700,letterSpacing:"0.5px"},children:"ส่วนลด"})]})]}),(0,r.jsxs)("div",{style:P.headerActions,children:[(0,r.jsx)(l.default,{allowClear:!0,placeholder:"ค้นหาส่วนลด...",value:i,onChange:e=>a(e.target.value),style:{width:240,borderRadius:10}}),(0,r.jsx)(o.ZP,{type:"text",icon:(0,r.jsx)(g.Z,{style:{color:"white"}}),onClick:t,style:{background:"rgba(255,255,255,0.2)",borderRadius:12,height:40,width:40}}),(0,r.jsx)(o.ZP,{type:"primary",icon:(0,r.jsx)(p.Z,{}),onClick:n,style:{background:"white",color:"#fa8c16",borderRadius:12,height:40,fontWeight:600,border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:"เพิ่มส่วนลด"})]})]})]})},L=e=>{let{totalDiscounts:t,fixedDiscounts:n,percentageDiscounts:i,activeDiscounts:a,inactiveDiscounts:l}=e;return(0,r.jsxs)("div",{style:P.statsCard,children:[(0,r.jsxs)("div",{style:P.statItem,children:[(0,r.jsx)("span",{style:{...P.statNumber,color:"#fa8c16"},children:t}),(0,r.jsx)(_,{style:P.statLabel,children:"ทั้งหมด"})]}),(0,r.jsx)("div",{style:{width:1,background:"#f0f0f0"}}),(0,r.jsxs)("div",{style:P.statItem,children:[(0,r.jsx)("span",{style:{...P.statNumber,color:"#1890ff"},children:n}),(0,r.jsx)(_,{style:P.statLabel,children:"คงที่ (บาท)"})]}),(0,r.jsx)("div",{style:{width:1,background:"#f0f0f0"}}),(0,r.jsxs)("div",{style:P.statItem,children:[(0,r.jsx)("span",{style:{...P.statNumber,color:"#722ed1"},children:i}),(0,r.jsx)(_,{style:P.statLabel,children:"เปอร์เซ็นต์"})]}),(0,r.jsx)("div",{style:{width:1,background:"#f0f0f0"}}),(0,r.jsxs)("div",{style:P.statItem,children:[(0,r.jsx)("span",{style:{...P.statNumber,color:"#52c41a"},children:a}),(0,r.jsx)(_,{style:P.statLabel,children:"เปิดใช้งาน"})]}),(0,r.jsx)("div",{style:{width:1,background:"#f0f0f0"}}),(0,r.jsxs)("div",{style:P.statItem,children:[(0,r.jsx)("span",{style:{...P.statNumber,color:"#ff4d4f"},children:l}),(0,r.jsx)(_,{style:P.statLabel,children:"ปิดใช้งาน"})]})]})},M=e=>{let{discount:t,index:n,onEdit:i,onDelete:a}=e,l=t.discount_type===j.L.Fixed;return(0,r.jsx)("div",{className:"discount-card",style:{...P.discountCard(t.is_active),animationDelay:"".concat(.03*n,"s")},children:(0,r.jsxs)("div",{style:P.discountCardInner,children:[(0,r.jsx)("div",{style:{width:64,height:64,borderRadius:14,border:"2px solid #f0f0f0",boxShadow:"0 4px 12px rgba(0,0,0,0.06)",flexShrink:0,overflow:"hidden",position:"relative",background:l?"linear-gradient(135deg, #e6f7ff 0%, #bae7ff 100%)":"linear-gradient(135deg, #f9f0ff 0%, #efdbff 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:l?(0,r.jsx)(x.Z,{style:{fontSize:28,color:"#1890ff"}}):(0,r.jsx)(h.Z,{style:{fontSize:28,color:"#722ed1"}})}),(0,r.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[(0,r.jsx)(_,{strong:!0,style:{fontSize:16,color:"#1a1a2e"},children:t.display_name||t.discount_name}),t.is_active?(0,r.jsx)(m.Z,{style:{color:"#52c41a",fontSize:14}}):(0,r.jsx)(y.Z,{style:{color:"#ff4d4f",fontSize:14}})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:6,flexWrap:"wrap",alignItems:"center"},children:[(0,r.jsx)(s.Z,{color:l?"blue":"purple",style:{borderRadius:8,margin:0,fontSize:11},children:l?"฿".concat(t.discount_amount):"".concat(t.discount_amount,"%")}),(0,r.jsx)(s.Z,{color:t.is_active?"success":"default",style:{borderRadius:8,margin:0,fontSize:11},children:t.is_active?"เปิดใช้งาน":"ปิดใช้งาน"}),t.description&&(0,r.jsx)(_,{type:"secondary",style:{fontSize:11},ellipsis:!0,children:t.description})]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,r.jsx)(o.ZP,{type:"text",icon:(0,r.jsx)(v.Z,{}),onClick:e=>{e.stopPropagation(),i(t)},style:{borderRadius:10,color:"#fa8c16",background:"#fff7e6"}}),(0,r.jsx)(o.ZP,{type:"text",danger:!0,icon:(0,r.jsx)(b.Z,{}),onClick:e=>{e.stopPropagation(),a(t)},style:{borderRadius:10,background:"#fff2f0"}})]})]})})},N=e=>{let{onAdd:t}=e;return(0,r.jsx)(c.Z,{image:c.Z.PRESENTED_IMAGE_SIMPLE,description:(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsx)(_,{type:"secondary",style:{fontSize:15},children:"ยังไม่มีส่วนลด"}),(0,r.jsx)("br",{}),(0,r.jsx)(_,{type:"secondary",style:{fontSize:13},children:"เริ่มต้นเพิ่มส่วนลดแรกของคุณ"})]}),style:{padding:"60px 20px",background:"white",borderRadius:20,margin:"0 16px"},children:(0,r.jsx)(o.ZP,{type:"primary",icon:(0,r.jsx)(p.Z,{}),onClick:t,style:{background:"linear-gradient(135deg, #fa8c16 0%, #d48806 100%)",border:"none"},children:"เพิ่มส่วนลด"})})};function A(){let e=(0,w.useRouter)(),[t,n]=(0,i.useState)([]),[a,l]=(0,i.useState)(""),[o,s]=(0,i.useState)(""),{execute:c}=(0,k.J)(),{showLoading:g}=(0,E.x)(),{socket:p}=(0,C.s)(),{isAuthorized:x,isChecking:m}=(0,Z.e)({requiredRole:"Admin"});(0,i.useEffect)(()=>{(0,S.P)()},[]),(0,i.useEffect)(()=>{let e=setTimeout(()=>{s(a.trim())},400);return()=>clearTimeout(e)},[a]),(0,i.useEffect)(()=>{if(o)return;let e=(0,z.t)("pos:discounts",3e5);e&&e.length>0&&n(e)},[o]);let y=(0,i.useCallback)(async e=>{c(async()=>{let t=new URLSearchParams;e&&t.set("q",e);let r=t.toString()?"/api/pos/discounts?".concat(t.toString()):"/api/pos/discounts",i=await fetch(r);if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถดึงข้อมูลส่วนลดได้")}n(await i.json())},"กำลังโหลดข้อมูลส่วนลด...")},[c]);(0,i.useEffect)(()=>{x&&y(o||void 0)},[x,y,o]);let v=o.trim().toLowerCase(),b=(0,i.useCallback)(e=>!v||"".concat(e.display_name||""," ").concat(e.discount_name||""," ").concat(e.description||"").toLowerCase().includes(v),[v]);(0,I.v)(p,{create:"discounts:create",update:"discounts:update",delete:"discounts:delete"},n,e=>e.id,b),(0,i.useEffect)(()=>{!o&&t.length>0&&(0,z.v)("pos:discounts",t)},[t,o]);let D=()=>{g("กำลังเปิดหน้าจัดการส่วนลด..."),e.push("/pos/discounts/manager/add")},A=t=>{g("กำลังเปิดหน้าแก้ไขส่วนลด..."),e.push("/pos/discounts/manager/edit/".concat(t.id))},H=e=>{d.Z.confirm({title:"ยืนยันการลบส่วนลด",content:'คุณต้องการลบส่วนลด "'.concat(e.display_name||e.discount_name,'" หรือไม่?'),okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,onOk:async()=>{await c(async()=>{let t=await (0,S.P)();if(!(await fetch("/api/pos/discounts/delete/".concat(e.id),{method:"DELETE",headers:{"X-CSRF-Token":t}})).ok)throw Error("ไม่สามารถลบส่วนลดได้");u.ZP.success('ลบส่วนลด "'.concat(e.display_name||e.discount_name,'" สำเร็จ'))},"กำลังลบส่วนลด...")}})};if(m)return(0,r.jsxs)("div",{style:{display:"flex",height:"100vh",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:16},children:[(0,r.jsx)(f.Z,{size:"large"}),(0,r.jsx)(_,{type:"secondary",children:"กำลังตรวจสอบสิทธิ์การใช้งาน..."})]});if(!x)return(0,r.jsxs)("div",{style:{display:"flex",height:"100vh",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:16},children:[(0,r.jsx)(f.Z,{size:"large"}),(0,r.jsx)(_,{type:"danger",children:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับ..."})]});let T=t.filter(e=>e.is_active),B=t.filter(e=>!e.is_active),F=t.filter(e=>e.discount_type===j.L.Fixed),W=t.filter(e=>e.discount_type===j.L.Percentage);return(0,r.jsxs)("div",{className:"discount-page",style:P.container,children:[(0,r.jsx)("style",{children:"\n    @keyframes fadeSlideIn {\n        from {\n            opacity: 0;\n            transform: translateY(12px);\n        }\n        to {\n            opacity: 1;\n            transform: translateY(0);\n        }\n    }\n    \n    .discount-card {\n        animation: fadeSlideIn 0.4s ease both;\n    }\n    \n    .discount-card:hover {\n        transform: translateY(-2px);\n        box-shadow: 0 8px 24px rgba(0,0,0,0.1) !important;\n    }\n    \n    .discount-card:active {\n        transform: scale(0.98);\n    }\n    \n    .discount-page *::-webkit-scrollbar {\n        width: 6px;\n    }\n    .discount-page *::-webkit-scrollbar-track {\n        background: transparent;\n    }\n    .discount-page *::-webkit-scrollbar-thumb {\n        background: #d9d9d9;\n        border-radius: 3px;\n    }\n    .discount-page *::-webkit-scrollbar-thumb:hover {\n        background: #bfbfbf;\n    }\n"}),(0,r.jsx)(R,{onRefresh:()=>y(o||void 0),onAdd:D,searchValue:a,onSearchChange:l}),(0,r.jsx)(L,{totalDiscounts:t.length,fixedDiscounts:F.length,percentageDiscounts:W.length,activeDiscounts:T.length,inactiveDiscounts:B.length}),(0,r.jsx)("div",{style:P.listContainer,children:t.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:P.sectionTitle,children:[(0,r.jsx)(h.Z,{style:{fontSize:18,color:"#fa8c16"}}),(0,r.jsx)("span",{style:{fontSize:16,fontWeight:600,color:"#1a1a2e"},children:"รายการส่วนลด"}),(0,r.jsxs)("div",{style:{background:"linear-gradient(135deg, #fa8c16 0%, #d48806 100%)",color:"white",padding:"4px 12px",borderRadius:20,fontSize:12,fontWeight:600},children:[t.length," รายการ"]})]}),t.map((e,t)=>(0,r.jsx)(M,{discount:e,index:t,onEdit:A,onDelete:H},e.id))]}):(0,r.jsx)(N,{onAdd:D})})]})}},26972:function(e,t,n){"use strict";n.d(t,{J:function(){return l}});var r=n(2265),i=n(3369),a=n(53743);let l=()=>{let{showLoading:e,hideLoading:t}=(0,i.x)();return{execute:(0,r.useCallback)(async function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"กำลังดำเนินการ...",i=(arguments.length>2&&arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"เกิดข้อผิดพลาด");try{return e(r,"async"),await n()}catch(e){console.error("Async action error:",e),a.Z.error({title:"ข้อผิดพลาด",content:e.message||i});return}finally{t("async")}},[e,t])}}},69477:function(e,t,n){"use strict";var r,i;n.d(t,{L:function(){return r}}),(i=r||(r={})).Fixed="Fixed",i.Percentage="Percentage"},3286:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var r=n(2265),i=n(34029),a=n(99376),l=n(14362);function o(){let{requiredRole:e="Admin",redirectUnauthenticated:t="/login",redirectUnauthorized:n="/pos",unauthorizedMessage:o="คุณไม่มีสิทธิ์เข้าถึงหน้านี้"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,a.useRouter)(),{user:c,loading:d}=(0,l.a)(),u=(0,r.useMemo)(()=>d?"checking":c?e&&c.role!==e?"unauthorized":"authorized":"unauthenticated",[c,d,e]),f=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{if("unauthenticated"===u){s.replace(t);return}"unauthorized"===u&&(f.current||(f.current=!0,i.ZP.error(o)),s.replace(n))},[u,s,t,n,o]),{status:u,isAuthorized:"authorized"===u,isChecking:"checking"===u,user:c}}},73814:function(e,t,n){"use strict";n.d(t,{t:function(){return i},v:function(){return a}});let r=()=>!0,i=(e,t)=>{if(!r())return null;try{var n;let r=window.localStorage.getItem(e);if(!r)return null;let i=JSON.parse(r);if(!(null==i?void 0:i.ts)||Date.now()-i.ts>t)return null;return null!==(n=i.data)&&void 0!==n?n:null}catch(e){return null}},a=(e,t)=>{if(r())try{let n={ts:Date.now(),data:t};window.localStorage.setItem(e,JSON.stringify(n))}catch(e){}}},97235:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(5447);let i=null,a=0,l=null;async function o(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Date.now();return!e&&i&&t-a<6e5?i:(l||(l=r.O.getCsrfToken().then(e=>(i=e||"",a=Date.now(),i)).finally(()=>{l=null})),l)}}},function(e){e.O(0,[5015,7717,7698,742,3211,7993,8651,2646,6207,7213,9021,2224,3248,1721,9,5616,8589,1672,3490,2971,2117,1744],function(){return e(e.s=90153)}),_N_E=e.O()}]);