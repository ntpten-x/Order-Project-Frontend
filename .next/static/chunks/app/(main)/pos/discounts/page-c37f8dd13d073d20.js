(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2519],{90153:function(e,t,n){Promise.resolve().then(n.bind(n,35037))},89245:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(2265),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},o=n(55015);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=r.forwardRef((e,t)=>r.createElement(o.Z,i({},e,{ref:t,icon:a})))},53743:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(42535),a=n(50815),o=n(74079),i=n(2265),s=n(28975),l=n(61994),c=n(93942),d=n(71744),u=n(64024),p=n(85695),f=n(90024),g=n(4065),h=(0,c.i)(e=>{let{prefixCls:t,className:n,closeIcon:r,closable:a,type:o,title:c,children:h,footer:x,...y}=e,{getPrefixCls:m}=i.useContext(d.E_),b=m(),v=t||m("modal"),j=(0,u.Z)(b),[k,w]=(0,g.ZP)(v,j),S="".concat(v,"-confirm"),C={};return C=o?{closable:null!=a&&a,title:"",footer:"",children:i.createElement(p.O,{...e,prefixCls:v,confirmPrefixCls:S,rootPrefixCls:b,content:h})}:{closable:null==a||a,title:c,footer:null!==x&&i.createElement(f.$,{...e}),children:h},i.createElement(s.s,{prefixCls:v,className:(0,l.W)(k,"".concat(v,"-pure-panel"),o&&S,o&&"".concat(S,"-").concat(o),n,w,j),...y,closeIcon:(0,f.b)(v,r),closable:a,...C})}),x=n(23248);function y(e){return(0,r.ZP)((0,r.uW)(e))}let m=o.Z;m.useModal=x.Z,m.info=function(e){return(0,r.ZP)((0,r.cw)(e))},m.success=function(e){return(0,r.ZP)((0,r.vq)(e))},m.error=function(e){return(0,r.ZP)((0,r.AQ)(e))},m.warning=y,m.warn=y,m.confirm=function(e){return(0,r.ZP)((0,r.Au)(e))},m.destroyAll=function(){for(;a.Z.length;){let e=a.Z.pop();e&&e()}},m.config=r.ai,m._InternalPanelDoNotUseOrYouWillBeFired=h;var b=m},35037:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var r=n(57437),a=n(2265),o=n(39486),i=n(80009),s=n(80336),l=n(50742),c=n(53743),d=n(34029),u=n(24783),p=n(88589),f=n(24725),g=n(62670),h=n(44314),x=n(13377),y=n(26349),m=n(89245),b=n(96473),v=n(29436),j=n(69477),k=n(99376),w=n(3369),S=n(26972),C=n(24675),Z=n(97235),F=n(67918),E=n(67697),P=n(73814),_=n(12028),I=n(69711),z=n(2938),R=n(25193),A=n(37410),O=n(27623),T=n(20148),L=n(2786);let{Text:B}=o.default,D=e=>{let t=new Date(e);return Number.isNaN(t.getTime())?"-":new Intl.DateTimeFormat("th-TH",{dateStyle:"medium",timeStyle:"short"}).format(t)},N=e=>{let t=Number(e.discount_amount||0);return e.discount_type===j.L.Percentage?"".concat(t,"%"):"".concat(t.toLocaleString("th-TH")," บาท")},U=e=>{let{total:t,active:n,inactive:a,fixed:o,percentage:i}=e;return(0,r.jsxs)("div",{style:{background:"#fff",borderRadius:16,border:"1px solid #e2e8f0",display:"grid",gridTemplateColumns:"repeat(5, minmax(0, 1fr))",gap:8,padding:14},children:[(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsx)("span",{style:{fontSize:24,fontWeight:700,color:"#0f172a",display:"block"},children:t}),(0,r.jsx)(B,{style:{fontSize:12,color:"#64748b"},children:"ทั้งหมด"})]}),(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsx)("span",{style:{fontSize:24,fontWeight:700,color:"#d97706",display:"block"},children:n}),(0,r.jsx)(B,{style:{fontSize:12,color:"#64748b"},children:"ใช้งาน"})]}),(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsx)("span",{style:{fontSize:24,fontWeight:700,color:"#b91c1c",display:"block"},children:a}),(0,r.jsx)(B,{style:{fontSize:12,color:"#64748b"},children:"ปิดใช้งาน"})]}),(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsx)("span",{style:{fontSize:24,fontWeight:700,color:"#0369a1",display:"block"},children:o}),(0,r.jsx)(B,{style:{fontSize:12,color:"#64748b"},children:"ลดเป็นบาท"})]}),(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsx)("span",{style:{fontSize:24,fontWeight:700,color:"#7e22ce",display:"block"},children:i}),(0,r.jsx)(B,{style:{fontSize:12,color:"#64748b"},children:"ลดเปอร์เซ็นต์"})]})]})},W=e=>{let{discount:t,onEdit:n,onDelete:a,onToggleActive:o,updatingStatusId:c}=e,d=t.discount_type===j.L.Fixed;return(0,r.jsx)("div",{className:"discount-card",style:{...I.R.discountCard(t.is_active),borderRadius:16},onClick:()=>n(t),children:(0,r.jsxs)("div",{style:I.R.discountCardInner,children:[(0,r.jsx)("div",{style:{width:52,height:52,borderRadius:14,background:d?"linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)":"linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,boxShadow:d?"0 4px 10px rgba(3, 105, 161, 0.18)":"0 4px 10px rgba(126, 34, 206, 0.18)"},children:d?(0,r.jsx)(g.Z,{style:{fontSize:22,color:"#0369a1"}}):(0,r.jsx)(h.Z,{style:{fontSize:22,color:"#7e22ce"}})}),(0,r.jsxs)("div",{style:{flex:1,minWidth:0,paddingRight:8},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[(0,r.jsx)(B,{strong:!0,style:{fontSize:16,color:"#0f172a"},ellipsis:{tooltip:t.display_name},children:t.display_name}),(0,r.jsx)(i.Z,{color:t.is_active?"green":"default",children:t.is_active?"ใช้งาน":"ปิดใช้งาน"})]}),(0,r.jsx)(B,{type:"secondary",style:{fontSize:13,display:"block",color:"#334155"},ellipsis:{tooltip:t.discount_name},children:t.discount_name}),(0,r.jsxs)(B,{type:"secondary",style:{fontSize:12,display:"block",marginTop:2},children:["มูลค่าส่วนลด ",N(t)]}),(0,r.jsxs)(B,{type:"secondary",style:{fontSize:12,display:"block",marginTop:2},children:["สร้างเมื่อ ",D(t.create_date)]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,r.jsx)(s.Z,{size:"small",checked:t.is_active,loading:c===t.id,onClick:(e,n)=>{null==n||n.stopPropagation(),o(t,e)}}),(0,r.jsx)(l.ZP,{type:"text",icon:(0,r.jsx)(x.Z,{}),onClick:e=>{e.stopPropagation(),n(t)},style:{borderRadius:10,color:"#d97706",background:"#fff7ed",width:36,height:36}}),(0,r.jsx)(l.ZP,{type:"text",danger:!0,icon:(0,r.jsx)(y.Z,{}),onClick:e=>{e.stopPropagation(),a(t)},style:{borderRadius:10,background:"#fef2f2",width:36,height:36}})]})]})})};function M(){let e=(0,k.useRouter)(),[t,n]=(0,a.useState)([]),[o,i]=(0,a.useState)(""),[s,g]=(0,a.useState)("all"),[x,B]=(0,a.useState)("all"),[D,N]=(0,a.useState)(null),{execute:M}=(0,S.J)(),{showLoading:J}=(0,w.x)(),{socket:H}=(0,C.s)(),{isAuthorized:q,isChecking:Y}=(0,F.e)({allowedRoles:["Admin","Manager"]});(0,a.useEffect)(()=>{(0,Z.P)()},[]),(0,a.useEffect)(()=>{let e=(0,P.t)("pos:discounts",3e5);e&&e.length>0&&n(e)},[]);let X=(0,a.useCallback)(async()=>{M(async()=>{let e=await fetch("/api/pos/discounts");if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||t.message||"ไม่สามารถดึงข้อมูลส่วนลดได้")}let t=await e.json(),r=Array.isArray(t)?t:null==t?void 0:t.data;if(!Array.isArray(r))throw Error("รูปแบบข้อมูลไม่ถูกต้อง");n(r)},"กำลังโหลดข้อมูลส่วนลด...")},[M]);(0,a.useEffect)(()=>{q&&X()},[q,X]),(0,E.v)(H,{create:_.b.discounts.create,update:_.b.discounts.update,delete:_.b.discounts.delete},n),(0,a.useEffect)(()=>{t.length>0&&(0,P.v)("pos:discounts",t)},[t]);let G=(0,a.useMemo)(()=>{let e=t;"active"===s?e=e.filter(e=>e.is_active):"inactive"===s&&(e=e.filter(e=>!e.is_active)),"all"!==x&&(e=e.filter(e=>e.discount_type===x));let n=o.trim().toLowerCase();return n&&(e=e.filter(e=>e.display_name.toLowerCase().includes(n)||e.discount_name.toLowerCase().includes(n)||(e.description||"").toLowerCase().includes(n))),e},[t,o,s,x]),Q=()=>{J("กำลังเปิดหน้าจัดการส่วนลด..."),e.push("/pos/discounts/manager/add")},$=t=>{J("กำลังเปิดหน้าแก้ไขส่วนลด..."),e.push("/pos/discounts/manager/edit/".concat(t.id))},K=e=>{c.Z.confirm({title:"ยืนยันการลบส่วนลด",content:'คุณต้องการลบส่วนลด "'.concat(e.display_name,'" หรือไม่?'),okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:(0,r.jsx)(y.Z,{style:{color:"#EF4444"}}),onOk:async()=>{await M(async()=>{let t=await (0,Z.P)();if(!(await fetch("/api/pos/discounts/delete/".concat(e.id),{method:"DELETE",headers:{"X-CSRF-Token":t}})).ok)throw Error("ไม่สามารถลบส่วนลดได้");n(t=>t.filter(t=>t.id!==e.id)),d.ZP.success('ลบส่วนลด "'.concat(e.display_name,'" สำเร็จ'))},"กำลังลบส่วนลด...")}})},V=async(e,t)=>{N(e.id);try{let r=await (0,Z.P)(),a=await fetch("/api/pos/discounts/update/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":r},body:JSON.stringify({is_active:t})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถเปลี่ยนสถานะส่วนลดได้")}let o=await a.json();n(t=>t.map(t=>t.id===e.id?o:t)),d.ZP.success(t?"เปิดใช้งานส่วนลดแล้ว":"ปิดใช้งานส่วนลดแล้ว")}catch(e){console.error(e),d.ZP.error(e instanceof Error?e.message:"ไม่สามารถเปลี่ยนสถานะส่วนลดได้")}finally{N(null)}};if(Y)return(0,r.jsx)(z.H,{message:"กำลังตรวจสอบสิทธิ์การใช้งาน..."});if(!q)return(0,r.jsx)(z.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับ...",tone:"danger"});let ee=t.filter(e=>e.is_active).length,et=t.filter(e=>!e.is_active).length,en=t.filter(e=>e.discount_type===j.L.Fixed).length,er=t.filter(e=>e.discount_type===j.L.Percentage).length;return(0,r.jsxs)("div",{className:"discount-page",style:I.R.container,children:[(0,r.jsx)("style",{children:I.W}),(0,r.jsx)(T.Z,{title:"ส่วนลด",subtitle:"ทั้งหมด ".concat(t.length," รายการ"),icon:(0,r.jsx)(h.Z,{}),actions:(0,r.jsxs)(u.Z,{size:8,wrap:!0,children:[(0,r.jsx)(l.ZP,{icon:(0,r.jsx)(m.Z,{}),onClick:X}),(0,r.jsx)(l.ZP,{type:"primary",icon:(0,r.jsx)(b.Z,{}),onClick:Q,children:"เพิ่มส่วนลด"})]})}),(0,r.jsx)(R.Z,{children:(0,r.jsxs)(O.Z,{children:[(0,r.jsx)(U,{total:t.length,active:ee,inactive:et,fixed:en,percentage:er}),(0,r.jsx)(A.Z,{title:"ค้นหาและตัวกรอง",children:(0,r.jsxs)("div",{style:{display:"grid",gap:10,gridTemplateColumns:"1fr",alignItems:"center"},children:[(0,r.jsx)(p.default,{prefix:(0,r.jsx)(v.Z,{style:{color:"#94A3B8"}}),allowClear:!0,placeholder:"ค้นหาจากชื่อแสดง ชื่อระบบ หรือคำอธิบาย...",value:o,onChange:e=>i(e.target.value)}),(0,r.jsx)(f.Z,{options:[{label:"ทั้งหมด (".concat(t.length,")"),value:"all"},{label:"ใช้งาน (".concat(ee,")"),value:"active"},{label:"ปิดใช้งาน (".concat(et,")"),value:"inactive"}],value:s,onChange:e=>g(e)}),(0,r.jsx)(f.Z,{options:[{label:"ทุกประเภท (".concat(t.length,")"),value:"all"},{label:"ลดเป็นบาท (".concat(en,")"),value:j.L.Fixed},{label:"ลด % (".concat(er,")"),value:j.L.Percentage}],value:x,onChange:e=>B(e)})]})}),(0,r.jsx)(A.Z,{title:"รายการส่วนลด",extra:(0,r.jsx)("span",{style:{fontWeight:600},children:G.length}),children:G.length>0?G.map(e=>(0,r.jsx)(W,{discount:e,onEdit:$,onDelete:K,onToggleActive:V,updatingStatusId:D},e.id)):(0,r.jsx)(L.Z,{title:o.trim()?"ไม่พบส่วนลดตามคำค้น":"ยังไม่มีส่วนลด",description:o.trim()?"ลองเปลี่ยนคำค้น หรือตัวกรองสถานะ/ประเภท":"เพิ่มส่วนลดแรกเพื่อเริ่มใช้งาน",action:o.trim()?null:(0,r.jsx)(l.ZP,{type:"primary",icon:(0,r.jsx)(b.Z,{}),onClick:Q,children:"เพิ่มส่วนลด"})})})]})})]})}},27623:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(57437);n(2265);var a=n(10868),o=n(87530);function i(e){let{children:t,gap:n=o.H.sectionGap,style:i}=e;return(0,r.jsx)(a.Z,{vertical:!0,gap:n,style:i,children:t})}},2786:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(57437);n(2265);var a=n(96931),o=n(85180),i=n(39486),s=n(87530);function l(e){let{title:t="ไม่มีข้อมูล",description:n,action:l,image:c}=e;return(0,r.jsx)(a.Z,{size:"small",variant:"outlined",style:{borderRadius:s.H.cardRadiusLG},bodyStyle:{padding:20},children:(0,r.jsx)(o.Z,{image:c,description:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,r.jsx)(i.default.Text,{strong:!0,children:t}),n?(0,r.jsx)(i.default.Text,{type:"secondary",children:n}):null]}),children:l})})}},46252:function(e,t,n){"use strict";n.d(t,{J:function(){return l},SocketProvider:function(){return c}});var r=n(57437),a=n(2265),o=n(68680),i=n(34029),s=n(14362);let l=(0,a.createContext)({socket:null,isConnected:!1}),c=e=>{let{children:t}=e,[n,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),p=(0,a.useRef)(!1),{user:f}=(0,s.a)();return(0,a.useEffect)(()=>{var e;if(!f){n&&(n.disconnect(),c(null),u(!1));return}let t=(null===(e=f.branch)||void 0===e?void 0:e.id)||f.branch_id||null,r=(0,o.io)("http://localhost:3000",{transports:["websocket"],withCredentials:!0,auth:{userId:f.id,branchId:t},reconnection:!0,reconnectionAttempts:5,reconnectionDelay:800,reconnectionDelayMax:8e3});return r.on("connect",()=>{console.log("Socket Connected:",r.id),u(!0),p.current=!1,i.ZP.success({content:"เชื่อมต่อเรียลไทม์แล้ว",key:"socket-status",duration:1.5})}),r.on("disconnect",()=>{console.log("Socket Disconnected"),u(!1),p.current||(p.current=!0,i.ZP.warning({content:"การเชื่อมต่อเรียลไทม์หลุด กำลังพยายามเชื่อมต่อใหม่...",key:"socket-status",duration:2}))}),r.io.on("reconnect_attempt",e=>{console.log("Socket reconnect attempt",e),u(!1)}),r.io.on("reconnect_failed",()=>{console.log("Socket reconnect failed"),i.ZP.error({content:"เชื่อมต่อเรียลไทม์ไม่สำเร็จ",key:"socket-status",duration:2})}),c(r),()=>{r.disconnect()}},[null==f?void 0:f.id]),(0,r.jsx)(l.Provider,{value:{socket:n,isConnected:d},children:t})}},26972:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});var r=n(2265),a=n(53743),o=n(3369);let i=()=>{let{showLoading:e,hideLoading:t}=(0,o.x)();return{execute:(0,r.useCallback)(async function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"กำลังดำเนินการ...",o=(arguments.length>2&&arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"เกิดข้อผิดพลาด");try{return e(r,"async"),await n()}catch(t){console.error("Async action error:",t);let e=o;if("string"==typeof t)e=t;else if(t instanceof Error)e=t.message;else if("object"==typeof t&&null!==t){var i,s,l,c;e=null!==(c=null!==(l=null===(s=t.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.message)&&void 0!==l?l:t.message)&&void 0!==c?c:(()=>{try{return JSON.stringify(t)}catch(e){return"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ (Unknown Error)"}})()}a.Z.error({title:"ข้อผิดพลาด",content:e});return}finally{t("async")}},[e,t])}}},24675:function(e,t,n){"use strict";n.d(t,{s:function(){return o}});var r=n(2265),a=n(46252);let o=()=>(0,r.useContext)(a.J)},69711:function(e,t,n){"use strict";n.d(t,{R:function(){return a},W:function(){return o}});var r=n(69397);let a={...(0,r.yf)("linear-gradient(135deg, #F59E0B 0%, #D97706 100%)"),discountCard:r.YO,discountCardInner:r.lv},o=(0,r.IU)(".discount-page",".discount-card")},69397:function(e,t,n){"use strict";n.d(t,{IU:function(){return l},YO:function(){return i},lv:function(){return s},yf:function(){return o}});let r={colors:{primary:"#6366F1",primaryLight:"#EEF2FF",success:"#10B981",successLight:"#ECFDF5",warning:"#F59E0B",warningLight:"#FFFBEB",error:"#EF4444",errorLight:"#FEF2F2",info:"#3B82F6",infoLight:"#EFF6FF",bg:"#F8FAFC",card:"#FFFFFF",border:"#E2E8F0",borderLight:"#F1F5F9",text:"#1E293B",textSecondary:"#64748B",textMuted:"#94A3B8"},radius:{sm:8,md:12,lg:16,xl:20},shadow:{sm:"0 1px 2px rgba(0, 0, 0, 0.04)",md:"0 4px 12px rgba(0, 0, 0, 0.06)",lg:"0 8px 24px rgba(0, 0, 0, 0.08)"}},a={container:{paddingBottom:100,backgroundColor:r.colors.bg,minHeight:"100dvh",width:"100%",overflowX:"hidden"},header:{background:"linear-gradient(135deg, ".concat(r.colors.primary," 0%, #4F46E5 100%)"),padding:"16px 16px 48px 16px",position:"relative",overflow:"hidden",borderBottomLeftRadius:r.radius.xl,borderBottomRightRadius:r.radius.xl},headerDecoCircle1:{position:"absolute",top:-40,right:-40,width:120,height:120,borderRadius:"50%",background:"rgba(255,255,255,0.08)"},headerDecoCircle2:{position:"absolute",bottom:-20,left:-20,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.06)"},headerContent:{position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},headerLeft:{display:"flex",alignItems:"center",gap:12,flex:1},headerIconBox:{width:44,height:44,borderRadius:r.radius.md,background:"rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)",flexShrink:0},headerTitle:{color:"#fff",margin:0,fontSize:18,fontWeight:600},headerSubtitle:{color:"rgba(255,255,255,0.8)",fontSize:13,margin:0},headerActions:{display:"flex",gap:8,flexShrink:0},statsCard:{margin:"-32px 16px 0 16px",padding:16,background:r.colors.card,borderRadius:r.radius.lg,boxShadow:r.shadow.md,display:"flex",justifyContent:"space-around",position:"relative",zIndex:10},statItem:{textAlign:"center",flex:1},statNumber:{fontSize:22,fontWeight:700,display:"block",color:r.colors.text},statLabel:{fontSize:12,color:r.colors.textMuted,marginTop:2},listContainer:{padding:"16px 16px 0 16px"},sectionTitle:{display:"flex",alignItems:"center",gap:8,marginBottom:12,fontSize:15,fontWeight:600,color:r.colors.text}},o=e=>({...a,header:{...a.header,background:e}}),i=e=>({marginBottom:12,borderRadius:r.radius.lg,border:"1px solid ".concat(e?r.colors.border:r.colors.borderLight),boxShadow:e?r.shadow.sm:"none",overflow:"hidden",transition:"all 0.2s ease",background:r.colors.card,opacity:e?1:.6}),s={padding:16,display:"flex",alignItems:"center",gap:12};r.radius.md;let l=(e,t)=>"\n  /* Card animations */\n  ".concat(t," {\n    animation: fadeSlideIn 0.3s ease both;\n  }\n  \n  ").concat(t,":hover {\n    transform: translateY(-2px);\n    box-shadow: ").concat(r.shadow.md," !important;\n  }\n  \n  ").concat(t,":active {\n    transform: scale(0.99);\n  }\n  \n  /* Scrollbar */\n  ").concat(e," *::-webkit-scrollbar {\n    width: 5px;\n    height: 5px;\n  }\n  ").concat(e," *::-webkit-scrollbar-track {\n    background: transparent;\n  }\n  ").concat(e," *::-webkit-scrollbar-thumb {\n    background: #CBD5E1;\n    border-radius: 3px;\n  }\n  ").concat(e," *::-webkit-scrollbar-thumb:hover {\n    background: #94A3B8;\n  }\n")},69477:function(e,t,n){"use strict";var r,a;n.d(t,{L:function(){return r}}),(a=r||(r={})).Fixed="Fixed",a.Percentage="Percentage"},73814:function(e,t,n){"use strict";n.d(t,{t:function(){return a},v:function(){return o}});let r=()=>!0,a=(e,t)=>{if(!r())return null;try{var n;let r=window.localStorage.getItem(e);if(!r)return null;let a=JSON.parse(r);if(!(null==a?void 0:a.ts)||Date.now()-a.ts>t)return null;return null!==(n=a.data)&&void 0!==n?n:null}catch(e){return null}},o=(e,t)=>{if(r())try{let n={ts:Date.now(),data:t};window.localStorage.setItem(e,JSON.stringify(n))}catch(e){}}},67697:function(e,t,n){"use strict";n.d(t,{D:function(){return i},v:function(){return o}});var r=n(2265);let a=e=>{if("string"==typeof e)return e;if(e&&"object"==typeof e){var t;if("id"in e&&e.id)return e.id;if("data"in e&&(null===(t=e.data)||void 0===t?void 0:t.id))return e.data.id}};function o(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e.id,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>!0;(0,r.useEffect)(()=>{if(!e)return;let r=e=>{if(!i(e))return;let t=o(e);n(n=>n.some(e=>o(e)===t)?n:[...n,e])},s=e=>{let t=o(e);n(n=>i(e)?n.some(e=>o(e)===t)?n.map(n=>o(n)===t?e:n):[...n,e]:n.filter(e=>o(e)!==t))},l=e=>{let t=a(e);t&&n(e=>e.filter(e=>o(e)!==t))};return e.on(t.create,r),e.on(t.update,s),e.on(t.delete,l),()=>{e.off(t.create,r),e.off(t.update,s),e.off(t.delete,l)}},[e,t.create,t.update,t.delete,o,n,i])}function i(e){let{socket:t,events:n=[],onRefresh:a,intervalMs:o,enabled:i=!0,debounceMs:s}=e;(0,r.useEffect)(()=>{if(!i||!t||0===n.length)return;let e=null,r=()=>{if(!s||s<=0){a();return}e&&clearTimeout(e),e=setTimeout(()=>{e=null,a()},s)};return n.forEach(e=>t.on(e,r)),()=>{e&&clearTimeout(e),n.forEach(e=>t.off(e,r))}},[i,t,n,a,s]),(0,r.useEffect)(()=>{if(!i||!o)return;let e=setInterval(a,o);return()=>clearInterval(e)},[i,o,a])}},12028:function(e,t,n){"use strict";n.d(t,{b:function(){return r},g:function(){return a}});let r={system:{announcement:"system:announcement"},users:{create:"users:create",update:"users:update",delete:"users:delete",status:"users:update-status"},roles:{create:"roles:create",update:"roles:update",delete:"roles:delete"},branches:{create:"branches:create",update:"branches:update",delete:"branches:delete"},products:{create:"products:create",update:"products:update",delete:"products:delete"},productsUnit:{create:"productsUnit:create",update:"productsUnit:update",delete:"productsUnit:delete"},categories:{create:"category:create",update:"category:update",delete:"category:delete"},tables:{create:"tables:create",update:"tables:update",delete:"tables:delete"},orders:{create:"orders:create",update:"orders:update",delete:"orders:delete"},payments:{create:"payments:create",update:"payments:update",delete:"payments:delete"},discounts:{create:"discounts:create",update:"discounts:update",delete:"discounts:delete"},delivery:{create:"delivery:create",update:"delivery:update",delete:"delivery:delete"},shifts:{update:"shifts:update"},orderQueue:{added:"order-queue:added",updated:"order-queue:updated",removed:"order-queue:removed",reordered:"order-queue:reordered"},ingredients:{create:"ingredients:create",update:"ingredients:update",delete:"ingredients:delete"},ingredientsUnit:{create:"ingredientsUnit:create",update:"ingredientsUnit:update",delete:"ingredientsUnit:delete"},stock:{update:"stock:update"},stockOrders:{create:"stock:orders:create",update:"stock:orders:update",status:"stock:orders:status",delete:"stock:orders:delete",detailUpdate:"stock:orders:detail:update"},paymentAccounts:{create:"payment-accounts:create",update:"payment-accounts:update",delete:"payment-accounts:delete"},paymentMethods:{create:"paymentMethod:create",update:"paymentMethod:update",delete:"paymentMethod:delete"},shopProfile:{update:"shopProfile:update"},salesOrderItem:{create:"salesOrderItem:create",update:"salesOrderItem:update",delete:"salesOrderItem:delete"},salesOrderDetail:{create:"salesOrderDetail:create",update:"salesOrderDetail:update",delete:"salesOrderDetail:delete"}},a={stockOrdersUpdated:"orders_updated"}}},function(e){e.O(0,[253,1522,3418,742,9486,4252,3916,8651,6931,4159,3831,2224,3248,2401,9,8879,8589,9845,4725,4480,8770,9385,4390,2971,2117,1744],function(){return e(e.s=90153)}),_N_E=e.O()}]);