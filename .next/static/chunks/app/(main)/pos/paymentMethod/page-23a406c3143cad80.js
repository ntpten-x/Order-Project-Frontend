(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3468,4390,3749],{67601:function(e,t,r){Promise.resolve().then(r.bind(r,48815))},86955:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(2265),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M468 128H160c-17.7 0-32 14.3-32 32v308c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V136c0-4.4-3.6-8-8-8zm-56 284H192V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210H136c-4.4 0-8 3.6-8 8v308c0 17.7 14.3 32 32 32h308c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zm-56 284H192V612h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm590-630H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V160c0-17.7-14.3-32-32-32zm-32 284H612V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210h-48c-4.4 0-8 3.6-8 8v134h-78V556c0-4.4-3.6-8-8-8H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h78v102c0 4.4 3.6 8 8 8h190c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zM746 832h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm142 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"qrcode",theme:"outlined"},i=r(55015);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var s=n.forwardRef((e,t)=>n.createElement(i.Z,o({},e,{ref:t,icon:a})))},89245:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(2265),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},i=r(55015);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var s=n.forwardRef((e,t)=>n.createElement(i.Z,o({},e,{ref:t,icon:a})))},20955:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(2265),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 464H528V448h312v128zm0 264H184V184h656v200H496c-17.7 0-32 14.3-32 32v192c0 17.7 14.3 32 32 32h344v200zM580 512a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"wallet",theme:"outlined"},i=r(55015);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var s=n.forwardRef((e,t)=>n.createElement(i.Z,o({},e,{ref:t,icon:a})))},48815:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Q}});var n=r(57437),a=r(2265),i=r(39486),o=r(80009),s=r(80336),l=r(50742),c=r(53743),d=r(34029),u=r(24783),f=r(88589),p=r(24725),h=r(8056),g=r(20955),m=r(86955),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M894 462c30.9 0 43.8-39.7 18.7-58L530.8 126.2a31.81 31.81 0 00-37.6 0L111.3 404c-25.1 18.2-12.2 58 18.8 58H192v374h-72c-4.4 0-8 3.6-8 8v52c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-52c0-4.4-3.6-8-8-8h-72V462h62zM512 196.7l271.1 197.2H240.9L512 196.7zM264 462h117v374H264V462zm189 0h117v374H453V462zm307 374H642V462h118v374z"}}]},name:"bank",theme:"outlined"},y=r(55015);function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let v=a.forwardRef((e,t)=>a.createElement(y.Z,b({},e,{ref:t,icon:x})));var w=r(99458),k=r(13377),j=r(26349),S=r(89245),z=r(96473),C=r(29436),E=r(99376),Z=r(3369),P=r(26972),F=r(24675),O=r(97235),M=r(67918),T=r(67697),I=r(73814),R=r(12028),H=r(63836),_=r(55170),B=r(12093),D=r(2938),L=r(25193),A=r(37410),N=r(27623),W=r(20148),U=r(2786);let{Text:V}=i.default,G="pos:payment-methods:v2",X=e=>{let{total:t,active:r,inactive:a}=e;return(0,n.jsxs)("div",{style:{background:"#fff",borderRadius:16,border:"1px solid #e2e8f0",display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:8,padding:14},children:[(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("span",{style:{fontSize:24,fontWeight:700,color:"#0f172a",display:"block"},children:t}),(0,n.jsx)(V,{style:{fontSize:12,color:"#64748b"},children:"ทั้งหมด"})]}),(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("span",{style:{fontSize:24,fontWeight:700,color:"#0f766e",display:"block"},children:r}),(0,n.jsx)(V,{style:{fontSize:12,color:"#64748b"},children:"ใช้งาน"})]}),(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("span",{style:{fontSize:24,fontWeight:700,color:"#b91c1c",display:"block"},children:a}),(0,n.jsx)(V,{style:{fontSize:12,color:"#64748b"},children:"ปิดใช้งาน"})]})]})},J=e=>{let t=e.toLowerCase();return t.includes("cash")||t.includes("เงินสด")?(0,n.jsx)(g.Z,{}):t.includes("promptpay")||t.includes("พร้อมเพย์")||t.includes("qr")?(0,n.jsx)(m.Z,{}):t.includes("bank")||t.includes("โอน")?(0,n.jsx)(v,{}):(0,n.jsx)(w.Z,{})},q=e=>{if(!e)return"-";let t=new Date(e);return Number.isNaN(t.getTime())?"-":new Intl.DateTimeFormat("th-TH",{dateStyle:"medium",timeStyle:"short"}).format(t)},Y=e=>{let{paymentMethod:t,onEdit:r,onDelete:a,onToggleActive:i,updatingStatusId:c}=e,d=J(t.payment_method_name);return(0,n.jsx)("div",{className:"payment-method-card",style:{..._.R.paymentMethodCard(t.is_active),borderRadius:16},onClick:()=>r(t),children:(0,n.jsxs)("div",{style:_.R.paymentMethodCardInner,children:[(0,n.jsx)("div",{style:{width:52,height:52,borderRadius:14,background:t.is_active?"linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%)":"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,boxShadow:t.is_active?"0 4px 10px rgba(16, 185, 129, 0.18)":"none"},children:(0,n.jsx)("div",{style:{fontSize:20,color:t.is_active?"#059669":"#94a3b8"},children:d})}),(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[(0,n.jsx)(V,{strong:!0,style:{fontSize:16,color:"#0f172a"},ellipsis:{tooltip:t.display_name},children:t.display_name}),(0,n.jsx)(o.Z,{color:t.is_active?"green":"default",children:t.is_active?"ใช้งาน":"ปิดใช้งาน"})]}),(0,n.jsx)(V,{type:"secondary",style:{display:"block",marginBottom:4},ellipsis:{tooltip:t.payment_method_name},children:t.payment_method_name}),(0,n.jsxs)(V,{type:"secondary",style:{fontSize:12},children:["สร้างเมื่อ ",q(t.create_date)]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[(0,n.jsx)(s.Z,{size:"small",checked:t.is_active,loading:c===t.id,onClick:(e,r)=>{null==r||r.stopPropagation(),i(t,e)}}),(0,n.jsx)(l.ZP,{type:"text",icon:(0,n.jsx)(k.Z,{}),onClick:e=>{e.stopPropagation(),r(t)},style:{borderRadius:10,color:"#065f46",background:"#ecfdf5",width:36,height:36}}),(0,n.jsx)(l.ZP,{type:"text",danger:!0,icon:(0,n.jsx)(j.Z,{}),onClick:e=>{e.stopPropagation(),a(t)},style:{borderRadius:10,background:"#fef2f2",width:36,height:36}})]})]})})};function Q(){let e=(0,E.useRouter)(),[t,r]=(0,a.useState)([]),[i,o]=(0,a.useState)(1),[s,g]=(0,a.useState)(0),[m,x]=(0,a.useState)(1),[y,b]=(0,a.useState)(""),[v,k]=(0,a.useState)("all"),[V,J]=(0,a.useState)(null),q=(0,B.c)(y.trim(),350),{execute:Q}=(0,P.J)(),{showLoading:K}=(0,Z.x)(),{socket:$}=(0,F.s)(),{isAuthorized:ee,isChecking:et}=(0,M.e)({allowedRoles:["Admin","Manager"]});(0,a.useEffect)(()=>{(0,O.P)()},[]),(0,a.useEffect)(()=>{o(1)},[q]),(0,a.useEffect)(()=>{var e;if(q||1!==i)return;let t=(0,I.t)(G,3e5);(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.length)&&(r(t.data),g(t.total),x(t.last_page))},[q,i]);let er=(0,a.useCallback)(async()=>{Q(async()=>{let e=new URLSearchParams;e.set("page",i.toString()),e.set("limit","50"),q&&e.set("q",q);let t=await H.E.getAll(void 0,e);r(t.data||[]),g(t.total||0),x(t.last_page||1),q||1!==i||(0,I.v)(G,t)},"กำลังโหลดข้อมูลวิธีการชำระเงิน...")},[q,Q,i]);(0,a.useEffect)(()=>{ee&&er()},[ee,er]),(0,T.D)({socket:$,events:[R.b.paymentMethods.create,R.b.paymentMethods.update,R.b.paymentMethods.delete],onRefresh:()=>er(),intervalMs:2e4,debounceMs:800});let en=(0,a.useMemo)(()=>"all"===v?t:"active"===v?t.filter(e=>e.is_active):t.filter(e=>!e.is_active),[t,v]),ea=()=>{K("กำลังเปิดหน้าจัดการวิธีการชำระเงิน..."),e.push("/pos/paymentMethod/manager/add")},ei=t=>{K("กำลังเปิดหน้าแก้ไขวิธีการชำระเงิน..."),e.push("/pos/paymentMethod/manager/edit/".concat(t.id))},eo=e=>{c.Z.confirm({title:"ยืนยันการลบวิธีการชำระเงิน",content:'คุณต้องการลบวิธีการชำระเงิน "'.concat(e.display_name,'" หรือไม่?'),okText:"ลบ",okType:"danger",cancelText:"ยกเลิก",centered:!0,icon:(0,n.jsx)(j.Z,{style:{color:"#ff4d4f"}}),onOk:async()=>{await Q(async()=>{let t=await (0,O.P)();if(!(await fetch("/api/pos/paymentMethod/delete/".concat(e.id),{method:"DELETE",headers:{"X-CSRF-Token":t}})).ok)throw Error("ไม่สามารถลบวิธีการชำระเงินได้");r(t=>t.filter(t=>t.id!==e.id)),g(e=>Math.max(e-1,0)),d.ZP.success('ลบวิธีการชำระเงิน "'.concat(e.display_name,'" สำเร็จ'))},"กำลังลบวิธีการชำระเงิน...")}})},es=async(e,t)=>{J(e.id);try{let n=await (0,O.P)(),a=await fetch("/api/pos/paymentMethod/update/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-Token":n},body:JSON.stringify({is_active:t})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.error||e.message||"ไม่สามารถเปลี่ยนสถานะวิธีการชำระเงินได้")}let i=await a.json();r(t=>t.map(t=>t.id===e.id?i:t)),d.ZP.success(t?"เปิดใช้งานวิธีชำระเงินแล้ว":"ปิดใช้งานวิธีชำระเงินแล้ว")}catch(e){console.error(e),d.ZP.error(e instanceof Error?e.message:"ไม่สามารถเปลี่ยนสถานะวิธีการชำระเงินได้")}finally{J(null)}};if(et)return(0,n.jsx)(D.H,{message:"กำลังตรวจสอบสิทธิ์การใช้งาน..."});if(!ee)return(0,n.jsx)(D.H,{message:"คุณไม่มีสิทธิ์เข้าถึงหน้านี้ กำลังพากลับ...",tone:"danger"});let el=t.filter(e=>e.is_active).length,ec=t.filter(e=>!e.is_active).length;return(0,n.jsxs)("div",{className:"payment-method-page",style:_.R.container,children:[(0,n.jsx)("style",{children:_.W}),(0,n.jsx)(W.Z,{title:"วิธีการชำระเงิน",subtitle:"ทั้งหมด ".concat(s," รายการ"),icon:(0,n.jsx)(w.Z,{}),actions:(0,n.jsxs)(u.Z,{size:8,wrap:!0,children:[(0,n.jsx)(l.ZP,{icon:(0,n.jsx)(S.Z,{}),onClick:er}),(0,n.jsx)(l.ZP,{type:"primary",icon:(0,n.jsx)(z.Z,{}),onClick:ea,children:"เพิ่มวิธีชำระเงิน"})]})}),(0,n.jsx)(L.Z,{children:(0,n.jsxs)(N.Z,{children:[(0,n.jsx)(X,{total:t.length,active:el,inactive:ec}),(0,n.jsx)(A.Z,{title:"ค้นหาและตัวกรอง",children:(0,n.jsxs)("div",{style:{display:"grid",gap:10,gridTemplateColumns:"1fr"},children:[(0,n.jsx)(f.default,{allowClear:!0,placeholder:"ค้นหาวิธีการชำระเงิน...",prefix:(0,n.jsx)(C.Z,{style:{color:"#94A3B8"}}),value:y,onChange:e=>b(e.target.value)}),(0,n.jsx)(p.Z,{options:[{label:"ทั้งหมด",value:"all"},{label:"ใช้งาน",value:"active"},{label:"ปิดใช้งาน",value:"inactive"}],value:v,onChange:e=>k(e)})]})}),(0,n.jsx)(A.Z,{title:"รายการวิธีการชำระเงิน",extra:(0,n.jsx)("span",{style:{fontWeight:600},children:en.length}),children:en.length>0?(0,n.jsxs)(n.Fragment,{children:[en.map(e=>(0,n.jsx)(Y,{paymentMethod:e,onEdit:ei,onDelete:eo,onToggleActive:es,updatingStatusId:V},e.id)),m>1?(0,n.jsx)("div",{style:{marginTop:16,display:"flex",justifyContent:"center"},children:(0,n.jsx)(h.Z,{current:i,total:s,pageSize:50,onChange:e=>o(e),showSizeChanger:!1})}):null]}):(0,n.jsx)(U.Z,{title:y.trim()?"ไม่พบรายการที่ค้นหา":"ยังไม่มีวิธีการชำระเงิน",description:y.trim()?"ลองเปลี่ยนคำค้น หรือตัวกรองสถานะ":"เพิ่มวิธีการชำระเงินแรกเพื่อเริ่มใช้งาน",action:y.trim()?null:(0,n.jsx)(l.ZP,{type:"primary",icon:(0,n.jsx)(z.Z,{}),onClick:ea,children:"เพิ่มวิธีชำระเงิน"})})})]})})]})}},2938:function(e,t,r){"use strict";r.d(t,{H:function(){return p}});var n=r(57437),a=r(29),i=r.n(a);r(2265);var o=r(39486),s=r(47213),l=r(48651),c=r(48636),d=r(61935);let{Text:u,Title:f}=o.default,p=e=>{let{message:t,tone:r="secondary"}=e;return(0,n.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 access-guard-container",children:[(0,n.jsx)(s.ZP,{theme:{token:{colorPrimary:"#3b82f6"}},children:(0,n.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 content-wrapper",children:["danger"===r?(0,n.jsx)("div",{className:"jsx-e041fd1637d3b0f2 icon-circle danger",children:(0,n.jsx)(c.Z,{style:{fontSize:32,color:"#ef4444"}})}):(0,n.jsx)("div",{className:"jsx-e041fd1637d3b0f2 spinner-wrapper",children:(0,n.jsx)(l.Z,{indicator:(0,n.jsx)(d.Z,{style:{fontSize:40},spin:!0})})}),(0,n.jsxs)("div",{className:"jsx-e041fd1637d3b0f2 text-content",children:[(0,n.jsx)(f,{level:4,style:{margin:0,color:"#1e293b"},children:"danger"===r?"Access Denied":"Loading"}),(0,n.jsx)(u,{type:r,style:{fontSize:16},children:t})]})]})}),(0,n.jsx)(i(),{id:"e041fd1637d3b0f2",children:".access-guard-container.jsx-e041fd1637d3b0f2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:100vh;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:#f8fafc}.content-wrapper.jsx-e041fd1637d3b0f2{background:white;padding:40px;-webkit-border-radius:24px;-moz-border-radius:24px;border-radius:24px;-webkit-box-shadow:0 20px 40px rgba(0,0,0,.05);-moz-box-shadow:0 20px 40px rgba(0,0,0,.05);box-shadow:0 20px 40px rgba(0,0,0,.05);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:24px;text-align:center;min-width:320px;-webkit-animation:fadeIn.5s ease-out;-moz-animation:fadeIn.5s ease-out;-o-animation:fadeIn.5s ease-out;animation:fadeIn.5s ease-out}.icon-circle.jsx-e041fd1637d3b0f2{width:80px;height:80px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff1f2}.spinner-wrapper.jsx-e041fd1637d3b0f2{padding:20px}.text-content.jsx-e041fd1637d3b0f2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:8px}@-webkit-keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeIn{from{opacity:0;-moz-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeIn{from{opacity:0;-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(10px);-moz-transform:translatey(10px);-o-transform:translatey(10px);transform:translatey(10px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}"})]})}},25193:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(57437);r(2265);var a=r(38616),i=r(87530);function o(e){let{children:t,maxWidth:r=i.H.pageMaxWidth,style:o}=e,s=a.default.useBreakpoint().md?i.H.pagePaddingXDesktop:i.H.pagePaddingXMobile;return(0,n.jsx)("div",{style:{width:"100%",maxWidth:r,margin:"0 auto",padding:"".concat(i.H.pagePaddingY,"px ").concat(s,"px"),...o},children:t})}},20148:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(57437);r(2265);var a=r(17588),i=r(2651),o=r(38616),s=r(10868),l=r(50742),c=r(39486),d=r(87530);function u(e){let{title:t,subtitle:r,icon:u,onBack:f,actions:p,style:h}=e,{token:g}=i.default.useToken(),m=o.default.useBreakpoint().md?d.H.pagePaddingXDesktop:d.H.pagePaddingXMobile;return(0,n.jsx)("div",{style:{padding:"".concat(d.H.pagePaddingY,"px ").concat(m,"px"),background:g.colorBgContainer,borderBottom:"1px solid ".concat(g.colorBorderSecondary),...h},children:(0,n.jsxs)(s.Z,{align:"center",justify:"space-between",wrap:"wrap",gap:12,style:{maxWidth:d.H.pageMaxWidth,margin:"0 auto"},children:[(0,n.jsxs)(s.Z,{align:"center",gap:12,style:{minWidth:0},children:[f&&(0,n.jsx)(l.ZP,{type:"text","aria-label":"ย้อนกลับ",icon:(0,n.jsx)(a.Z,{}),onClick:f,style:{borderRadius:12,width:44,height:44}}),u&&(0,n.jsx)("div",{style:{width:44,height:44,borderRadius:14,display:"grid",placeItems:"center",background:g.colorFillTertiary,color:g.colorText},children:u}),(0,n.jsxs)("div",{style:{minWidth:0},children:[(0,n.jsx)(c.default.Title,{level:4,style:{margin:0},children:t}),r&&(0,n.jsx)(c.default.Text,{type:"secondary",children:r})]})]}),p&&(0,n.jsx)(s.Z,{gap:8,wrap:"wrap",children:p})]})})}},37410:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(57437);r(2265);var a=r(2651),i=r(96931),o=r(10868),s=r(39486),l=r(87530);function c(e){let{title:t,extra:r,children:c,style:d}=e,{token:u}=a.default.useToken();return(0,n.jsx)(i.Z,{size:"small",variant:"outlined",style:{borderRadius:l.H.cardRadiusLG,...d},styles:{header:t?{borderBottomColor:u.colorBorderSecondary}:{display:"none"}},title:t?(0,n.jsxs)(o.Z,{align:"center",justify:"space-between",gap:12,children:[(0,n.jsx)(s.default.Text,{strong:!0,children:t}),r]}):void 0,children:c})}},27623:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(57437);r(2265);var a=r(10868),i=r(87530);function o(e){let{children:t,gap:r=i.H.sectionGap,style:o}=e;return(0,n.jsx)(a.Z,{vertical:!0,gap:r,style:o,children:t})}},2786:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(57437);r(2265);var a=r(96931),i=r(85180),o=r(39486),s=r(87530);function l(e){let{title:t="ไม่มีข้อมูล",description:r,action:l,image:c}=e;return(0,n.jsx)(a.Z,{size:"small",variant:"outlined",style:{borderRadius:s.H.cardRadiusLG},bodyStyle:{padding:20},children:(0,n.jsx)(i.Z,{image:c,description:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,n.jsx)(o.default.Text,{strong:!0,children:t}),r?(0,n.jsx)(o.default.Text,{type:"secondary",children:r}):null]}),children:l})})}},87530:function(e,t,r){"use strict";r.d(t,{H:function(){return n}});let n={pageMaxWidth:1200,pagePaddingXMobile:16,pagePaddingXDesktop:24,pagePaddingY:16,sectionGap:16,cardRadius:16,cardRadiusLG:20,cardShadow:"0 10px 24px rgba(15, 23, 42, 0.08)",surfaceBg:"#ffffff",surfaceBorder:"#e2e8f0"}},14362:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return f},a:function(){return p}});var n=r(57437),a=r(2265),i=r(99376),o=r(5447),s=r(84859),l=r(48651),c=r(3369),d=r(36799);let u=(0,a.createContext)(void 0),f=e=>{let{children:t}=e,[r,f]=(0,a.useState)(null),[p,h]=(0,a.useState)(!0),g=(0,i.useRouter)(),m=(0,i.usePathname)(),x=async()=>{try{let e=await o.O.getMe();f(e)}catch(e){f(null)}finally{h(!1)}};(0,a.useEffect)(()=>{x()},[]);let{showLoading:y,hideLoading:b}=(0,c.x)();(0,a.useEffect)(()=>{p||r||"/login"===m||g.push("/login")},[r,p,m,g]);let v=async e=>{try{y((0,d.t)("auth.loadingLogin"));let t=await o.O.getCsrfToken(),{token:r,...n}=await o.O.login(e,t);f(n),g.push("/")}catch(e){throw e}finally{b()}},w=async()=>{try{y((0,d.t)("auth.loadingLogout")),await o.O.logout(),s.x.clearQueue(),f(null),g.push("/login")}catch(e){console.error("Logout error:",e)}finally{b()}};return p?(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",background:"#ffffff"},children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",padding:"24px",background:"#ffffff",borderRadius:"20px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},children:[(0,n.jsx)(l.Z,{size:"large"}),(0,n.jsx)("div",{style:{color:"#64748b",fontSize:"14px",fontWeight:500},children:"กำลังตรวจสอบสิทธิ์..."})]})}):r||"/login"===m?(0,n.jsx)(u.Provider,{value:{user:r,loading:p,login:v,logout:w,checkAuth:x},children:t}):null},p=()=>{let e=(0,a.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},46252:function(e,t,r){"use strict";r.d(t,{J:function(){return l},SocketProvider:function(){return c}});var n=r(57437),a=r(2265),i=r(68680),o=r(34029),s=r(14362);let l=(0,a.createContext)({socket:null,isConnected:!1}),c=e=>{let{children:t}=e,[r,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),f=(0,a.useRef)(!1),{user:p}=(0,s.a)();return(0,a.useEffect)(()=>{var e;if(!p){r&&(r.disconnect(),c(null),u(!1));return}let t=(null===(e=p.branch)||void 0===e?void 0:e.id)||p.branch_id||null,n=(0,i.io)("http://localhost:3000",{transports:["websocket"],withCredentials:!0,auth:{userId:p.id,branchId:t},reconnection:!0,reconnectionAttempts:5,reconnectionDelay:800,reconnectionDelayMax:8e3});return n.on("connect",()=>{console.log("Socket Connected:",n.id),u(!0),f.current=!1,o.ZP.success({content:"เชื่อมต่อเรียลไทม์แล้ว",key:"socket-status",duration:1.5})}),n.on("disconnect",()=>{console.log("Socket Disconnected"),u(!1),f.current||(f.current=!0,o.ZP.warning({content:"การเชื่อมต่อเรียลไทม์หลุด กำลังพยายามเชื่อมต่อใหม่...",key:"socket-status",duration:2}))}),n.io.on("reconnect_attempt",e=>{console.log("Socket reconnect attempt",e),u(!1)}),n.io.on("reconnect_failed",()=>{console.log("Socket reconnect failed"),o.ZP.error({content:"เชื่อมต่อเรียลไทม์ไม่สำเร็จ",key:"socket-status",duration:2})}),c(n),()=>{n.disconnect()}},[null==p?void 0:p.id]),(0,n.jsx)(l.Provider,{value:{socket:r,isConnected:d},children:t})}},3369:function(e,t,r){"use strict";r.d(t,{GlobalLoadingProvider:function(){return l},O:function(){return d},x:function(){return c}});var n=r(57437),a=r(2265),i=r(48651);let o=(0,a.createContext)(void 0),s=(0,a.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,a.useState)({}),[c,d]=(0,a.useState)(void 0),u=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";l(e=>({...e,[t]:(e[t]||0)+1})),e&&d(e)},[]),f=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";l(t=>{if(!t[e])return t;let r={...t};return r[e]-=1,r[e]<=0&&delete r[e],r})},[]),p=(0,a.useCallback)(()=>{l({}),d(void 0)},[]),h=Object.keys(r).length>0,g=(0,a.useMemo)(()=>({isLoading:h,loadingMessage:c}),[h,c]),m=(0,a.useMemo)(()=>({showLoading:u,hideLoading:f,resetLoading:p}),[u,f,p]);return(0,n.jsx)(s.Provider,{value:m,children:(0,n.jsxs)(o.Provider,{value:g,children:[t,h&&(0,n.jsx)("div",{role:"status","aria-live":"polite",className:"global-loading-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:13e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255, 255, 255, 0.7)",backdropFilter:"blur(6px)",WebkitBackdropFilter:"blur(6px)",transition:"opacity 0.25s ease"},children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16,background:"rgba(255, 255, 255, 0.95)",padding:"28px 40px",borderRadius:20,boxShadow:"0 10px 32px rgba(15, 23, 42, 0.14)",border:"1px solid rgba(148, 163, 184, 0.35)",minWidth:240,textAlign:"center"},children:[(0,n.jsx)(i.Z,{size:"large"}),c&&(0,n.jsx)("div",{style:{fontSize:16,color:"#334155",fontWeight:600,letterSpacing:"0.01em"},children:c})]})})]})})};function c(){let e=(0,a.useContext)(o),t=(0,a.useContext)(s);if(!e||!t)throw Error("useGlobalLoading must be used within a GlobalLoadingProvider");return(0,a.useMemo)(()=>({...e,...t}),[e,t])}function d(){let e=(0,a.useContext)(s);if(!e)throw Error("useGlobalLoadingDispatch must be used within a GlobalLoadingProvider");return e}},26972:function(e,t,r){"use strict";r.d(t,{J:function(){return o}});var n=r(2265),a=r(53743),i=r(3369);let o=()=>{let{showLoading:e,hideLoading:t}=(0,i.x)();return{execute:(0,n.useCallback)(async function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"กำลังดำเนินการ...",i=(arguments.length>2&&arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"เกิดข้อผิดพลาด");try{return e(n,"async"),await r()}catch(t){console.error("Async action error:",t);let e=i;if("string"==typeof t)e=t;else if(t instanceof Error)e=t.message;else if("object"==typeof t&&null!==t){var o,s,l,c;e=null!==(c=null!==(l=null===(s=t.response)||void 0===s?void 0:null===(o=s.data)||void 0===o?void 0:o.message)&&void 0!==l?l:t.message)&&void 0!==c?c:(()=>{try{return JSON.stringify(t)}catch(e){return"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ (Unknown Error)"}})()}a.Z.error({title:"ข้อผิดพลาด",content:e});return}finally{t("async")}},[e,t])}}},24675:function(e,t,r){"use strict";r.d(t,{s:function(){return i}});var n=r(2265),a=r(46252);let i=()=>(0,n.useContext)(a.J)},84859:function(e,t,r){"use strict";r.d(t,{M:function(){return l},x:function(){return s}});let n="pos_offline_queue",a=()=>{let e=localStorage.getItem(n);return e?JSON.parse(e):[]},i=e=>{let t=Date.now();return e.filter(e=>t-e.timestamp<=6048e5)},o=e=>{localStorage.setItem(n,JSON.stringify(e))},s={addToQueue:(e,t)=>{let r=i(a()),n={id:"offline-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:e,payload:t,timestamp:Date.now(),retryCount:0};return o([...r,n]),n},getQueue:()=>a(),removeFromQueue:e=>{o(a().filter(t=>t.id!==e))},incrementRetry:(e,t)=>{o(a().map(r=>r.id===e?{...r,retryCount:r.retryCount+1,lastError:t}:r))},clearQueue:()=>{localStorage.removeItem(n)},pruneExceeded:()=>{o(i(a()).filter(e=>e.retryCount<=5))}},l={maxRetry:5,backoff:e=>Math.min(3e4,2e3*e)}},63836:function(e,t,r){"use strict";r.d(t,{E:function(){return l}});var n=r(2913),a=r(71567),i=r(98170);let o=a.q.POS.PAYMENT_METHODS,s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",r={};return t&&(r["Content-Type"]=t),e&&(r.Cookie=e),r},l={getAll:async(e,t)=>{let r=(0,n.b)("GET",o),a=new URLSearchParams(t||"");a.has("page")||a.set("page","1"),a.has("limit")||a.set("limit","200");let l=a.toString();l&&(r+="?".concat(l));let c=s(e,""),d=await fetch(r,{cache:"no-store",headers:c,credentials:"include"});if(!d.ok){var u;let e=await d.json().catch(()=>({}));throw Error((null==e?void 0:null===(u=e.error)||void 0===u?void 0:u.message)||e.error||e.message||"Failed to fetch payment methods")}return(0,i.XO)(await d.json())},getById:async(e,t)=>{let r=(0,n.b)("GET","".concat(o,"/").concat(e)),a=s(t,""),l=await fetch(r,{cache:"no-store",headers:a,credentials:"include"});if(!l.ok){var c;let e=await l.json().catch(()=>({}));throw Error((null==e?void 0:null===(c=e.error)||void 0===c?void 0:c.message)||e.error||e.message||"Failed to fetch payment method")}return(0,i.hH)(await l.json())},getByName:async(e,t)=>{let r=(0,n.b)("GET","".concat(o,"/getByName/").concat(e)),a=s(t,""),l=await fetch(r,{cache:"no-store",headers:a,credentials:"include"});if(!l.ok){var c;let e=await l.json().catch(()=>({}));throw Error((null==e?void 0:null===(c=e.error)||void 0===c?void 0:c.message)||e.error||e.message||"Failed to fetch payment method")}return(0,i.hH)(await l.json())},create:async(e,t,r)=>{let a=(0,n.b)("POST","".concat(o)),l=s(t);r&&(l["X-CSRF-Token"]=r);let c=await fetch(a,{method:"POST",headers:l,credentials:"include",body:JSON.stringify(e)});if(!c.ok){var d;let e=await c.json().catch(()=>({}));throw Error((null==e?void 0:null===(d=e.error)||void 0===d?void 0:d.message)||e.error||e.message||"Failed to create payment method")}return(0,i.hH)(await c.json())},update:async(e,t,r,a)=>{let l=(0,n.b)("PUT","".concat(o,"/").concat(e)),c=s(r);a&&(c["X-CSRF-Token"]=a);let d=await fetch(l,{method:"PUT",headers:c,credentials:"include",body:JSON.stringify(t)});if(!d.ok){var u;let e=await d.json().catch(()=>({}));throw Error((null==e?void 0:null===(u=e.error)||void 0===u?void 0:u.message)||e.error||e.message||"Failed to update payment method")}return(0,i.hH)(await d.json())},delete:async(e,t,r)=>{let a=(0,n.b)("DELETE","".concat(o,"/").concat(e)),i=s(t,"");r&&(i["X-CSRF-Token"]=r);let l=await fetch(a,{method:"DELETE",headers:i,credentials:"include"});if(!l.ok){var c;let e=await l.json().catch(()=>({}));throw Error((null==e?void 0:null===(c=e.error)||void 0===c?void 0:c.message)||e.error||e.message||"Failed to delete payment method")}}}},55170:function(e,t,r){"use strict";r.d(t,{R:function(){return a},W:function(){return i}});var n=r(69397);let a={...(0,n.yf)("linear-gradient(135deg, #10b981 0%, #059669 100%)"),paymentMethodCard:n.YO,paymentMethodCardInner:n.lv},i=(0,n.IU)(".payment-method-page",".payment-method-card")},69397:function(e,t,r){"use strict";r.d(t,{IU:function(){return l},YO:function(){return o},lv:function(){return s},yf:function(){return i}});let n={colors:{primary:"#6366F1",primaryLight:"#EEF2FF",success:"#10B981",successLight:"#ECFDF5",warning:"#F59E0B",warningLight:"#FFFBEB",error:"#EF4444",errorLight:"#FEF2F2",info:"#3B82F6",infoLight:"#EFF6FF",bg:"#F8FAFC",card:"#FFFFFF",border:"#E2E8F0",borderLight:"#F1F5F9",text:"#1E293B",textSecondary:"#64748B",textMuted:"#94A3B8"},radius:{sm:8,md:12,lg:16,xl:20},shadow:{sm:"0 1px 2px rgba(0, 0, 0, 0.04)",md:"0 4px 12px rgba(0, 0, 0, 0.06)",lg:"0 8px 24px rgba(0, 0, 0, 0.08)"}},a={container:{paddingBottom:100,backgroundColor:n.colors.bg,minHeight:"100dvh",width:"100%",overflowX:"hidden"},header:{background:"linear-gradient(135deg, ".concat(n.colors.primary," 0%, #4F46E5 100%)"),padding:"16px 16px 48px 16px",position:"relative",overflow:"hidden",borderBottomLeftRadius:n.radius.xl,borderBottomRightRadius:n.radius.xl},headerDecoCircle1:{position:"absolute",top:-40,right:-40,width:120,height:120,borderRadius:"50%",background:"rgba(255,255,255,0.08)"},headerDecoCircle2:{position:"absolute",bottom:-20,left:-20,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.06)"},headerContent:{position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},headerLeft:{display:"flex",alignItems:"center",gap:12,flex:1},headerIconBox:{width:44,height:44,borderRadius:n.radius.md,background:"rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)",flexShrink:0},headerTitle:{color:"#fff",margin:0,fontSize:18,fontWeight:600},headerSubtitle:{color:"rgba(255,255,255,0.8)",fontSize:13,margin:0},headerActions:{display:"flex",gap:8,flexShrink:0},statsCard:{margin:"-32px 16px 0 16px",padding:16,background:n.colors.card,borderRadius:n.radius.lg,boxShadow:n.shadow.md,display:"flex",justifyContent:"space-around",position:"relative",zIndex:10},statItem:{textAlign:"center",flex:1},statNumber:{fontSize:22,fontWeight:700,display:"block",color:n.colors.text},statLabel:{fontSize:12,color:n.colors.textMuted,marginTop:2},listContainer:{padding:"16px 16px 0 16px"},sectionTitle:{display:"flex",alignItems:"center",gap:8,marginBottom:12,fontSize:15,fontWeight:600,color:n.colors.text}},i=e=>({...a,header:{...a.header,background:e}}),o=e=>({marginBottom:12,borderRadius:n.radius.lg,border:"1px solid ".concat(e?n.colors.border:n.colors.borderLight),boxShadow:e?n.shadow.sm:"none",overflow:"hidden",transition:"all 0.2s ease",background:n.colors.card,opacity:e?1:.6}),s={padding:16,display:"flex",alignItems:"center",gap:12};n.radius.md;let l=(e,t)=>"\n  /* Card animations */\n  ".concat(t," {\n    animation: fadeSlideIn 0.3s ease both;\n  }\n  \n  ").concat(t,":hover {\n    transform: translateY(-2px);\n    box-shadow: ").concat(n.shadow.md," !important;\n  }\n  \n  ").concat(t,":active {\n    transform: scale(0.99);\n  }\n  \n  /* Scrollbar */\n  ").concat(e," *::-webkit-scrollbar {\n    width: 5px;\n    height: 5px;\n  }\n  ").concat(e," *::-webkit-scrollbar-track {\n    background: transparent;\n  }\n  ").concat(e," *::-webkit-scrollbar-thumb {\n    background: #CBD5E1;\n    border-radius: 3px;\n  }\n  ").concat(e," *::-webkit-scrollbar-thumb:hover {\n    background: #94A3B8;\n  }\n")},67918:function(e,t,r){"use strict";r.d(t,{e:function(){return s}});var n=r(2265),a=r(34029),i=r(99376),o=r(14362);function s(){let{allowedRoles:e,requiredRole:t="Admin",redirectUnauthenticated:r="/login",redirectUnauthorized:s="/pos",unauthorizedMessage:l="คุณไม่มีสิทธิ์เข้าถึงหน้านี้"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=(0,i.useRouter)(),{user:d,loading:u}=(0,o.a)(),f=(0,n.useMemo)(()=>e&&e.length>0?e:t?[t]:void 0,[e,t]),p=(0,n.useMemo)(()=>(function(e,t,r){if(t)return"checking";if(!e)return"unauthenticated";if(r&&r.length>0){var n;let t="Admin"===(n=e.role)||"Manager"===n||"Employee"===n?n:null;if(!t||!(r.includes(t)||"Admin"===t))return"unauthorized"}return"authorized"})(d,u,f),[d,u,f]),h=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{if("unauthenticated"===p){c.replace(r);return}"unauthorized"===p&&(h.current||(h.current=!0,a.ZP.error(l)),c.replace(s))},[p,c,r,s,l]),{status:p,isAuthorized:"authorized"===p,isChecking:"checking"===p,user:d}}},73814:function(e,t,r){"use strict";r.d(t,{t:function(){return a},v:function(){return i}});let n=()=>!0,a=(e,t)=>{if(!n())return null;try{var r;let n=window.localStorage.getItem(e);if(!n)return null;let a=JSON.parse(n);if(!(null==a?void 0:a.ts)||Date.now()-a.ts>t)return null;return null!==(r=a.data)&&void 0!==r?r:null}catch(e){return null}},i=(e,t)=>{if(n())try{let r={ts:Date.now(),data:t};window.localStorage.setItem(e,JSON.stringify(r))}catch(e){}}},97235:function(e,t,r){"use strict";r.d(t,{P:function(){return s}});var n=r(5447);let a=null,i=0,o=null;async function s(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Date.now();return!e&&a&&t-i<6e5?a:(o||(o=n.O.getCsrfToken().then(e=>(a=e||"",i=Date.now(),a)).finally(()=>{o=null})),o)}},67697:function(e,t,r){"use strict";r.d(t,{D:function(){return o},v:function(){return i}});var n=r(2265);let a=e=>{if("string"==typeof e)return e;if(e&&"object"==typeof e){var t;if("id"in e&&e.id)return e.id;if("data"in e&&(null===(t=e.data)||void 0===t?void 0:t.id))return e.data.id}};function i(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e.id,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>!0;(0,n.useEffect)(()=>{if(!e)return;let n=e=>{if(!o(e))return;let t=i(e);r(r=>r.some(e=>i(e)===t)?r:[...r,e])},s=e=>{let t=i(e);r(r=>o(e)?r.some(e=>i(e)===t)?r.map(r=>i(r)===t?e:r):[...r,e]:r.filter(e=>i(e)!==t))},l=e=>{let t=a(e);t&&r(e=>e.filter(e=>i(e)!==t))};return e.on(t.create,n),e.on(t.update,s),e.on(t.delete,l),()=>{e.off(t.create,n),e.off(t.update,s),e.off(t.delete,l)}},[e,t.create,t.update,t.delete,i,r,o])}function o(e){let{socket:t,events:r=[],onRefresh:a,intervalMs:i,enabled:o=!0,debounceMs:s}=e;(0,n.useEffect)(()=>{if(!o||!t||0===r.length)return;let e=null,n=()=>{if(!s||s<=0){a();return}e&&clearTimeout(e),e=setTimeout(()=>{e=null,a()},s)};return r.forEach(e=>t.on(e,n)),()=>{e&&clearTimeout(e),r.forEach(e=>t.off(e,n))}},[o,t,r,a,s]),(0,n.useEffect)(()=>{if(!o||!i)return;let e=setInterval(a,i);return()=>clearInterval(e)},[o,i,a])}},12028:function(e,t,r){"use strict";r.d(t,{b:function(){return n},g:function(){return a}});let n={system:{announcement:"system:announcement"},users:{create:"users:create",update:"users:update",delete:"users:delete",status:"users:update-status"},roles:{create:"roles:create",update:"roles:update",delete:"roles:delete"},branches:{create:"branches:create",update:"branches:update",delete:"branches:delete"},products:{create:"products:create",update:"products:update",delete:"products:delete"},productsUnit:{create:"productsUnit:create",update:"productsUnit:update",delete:"productsUnit:delete"},categories:{create:"category:create",update:"category:update",delete:"category:delete"},tables:{create:"tables:create",update:"tables:update",delete:"tables:delete"},orders:{create:"orders:create",update:"orders:update",delete:"orders:delete"},payments:{create:"payments:create",update:"payments:update",delete:"payments:delete"},discounts:{create:"discounts:create",update:"discounts:update",delete:"discounts:delete"},delivery:{create:"delivery:create",update:"delivery:update",delete:"delivery:delete"},shifts:{update:"shifts:update"},orderQueue:{added:"order-queue:added",updated:"order-queue:updated",removed:"order-queue:removed",reordered:"order-queue:reordered"},ingredients:{create:"ingredients:create",update:"ingredients:update",delete:"ingredients:delete"},ingredientsUnit:{create:"ingredientsUnit:create",update:"ingredientsUnit:update",delete:"ingredientsUnit:delete"},stock:{update:"stock:update"},stockOrders:{create:"stock:orders:create",update:"stock:orders:update",status:"stock:orders:status",delete:"stock:orders:delete",detailUpdate:"stock:orders:detail:update"},paymentAccounts:{create:"payment-accounts:create",update:"payment-accounts:update",delete:"payment-accounts:delete"},paymentMethods:{create:"paymentMethod:create",update:"paymentMethod:update",delete:"paymentMethod:delete"},shopProfile:{update:"shopProfile:update"},salesOrderItem:{create:"salesOrderItem:create",update:"salesOrderItem:update",delete:"salesOrderItem:delete"},salesOrderDetail:{create:"salesOrderDetail:create",update:"salesOrderDetail:update",delete:"salesOrderDetail:delete"}},a={stockOrdersUpdated:"orders_updated"}},12093:function(e,t,r){"use strict";r.d(t,{c:function(){return a}});var n=r(2265);let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,[r,a]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let r=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(r)}},[e,t]),r}}},function(e){e.O(0,[253,1522,3418,742,9486,4252,3916,8651,6931,4159,3831,2224,3248,2401,9,8879,8589,9845,3834,8056,4725,4480,2243,9385,2971,2117,1744],function(){return e(e.s=67601)}),_N_E=e.O()}]);