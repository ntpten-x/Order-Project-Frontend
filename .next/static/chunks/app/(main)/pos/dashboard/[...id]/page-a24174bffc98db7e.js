(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9224],{12873:function(e,s,t){Promise.resolve().then(t.bind(t,30066))},30066:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return q}});var d=t(57437),n=t(2265),i=t(60283),a=t(34029),l=t(48651),o=t(50742),r=t(3019),c=t(53743),x=t(62376),p=t(93132),h=t(52539),m=t(29107),j=t(83669),b=t(81770),y=t(17588),u=t(60392),g=t(15883),f=t(48998),v=t(99458),N=t(5540),S=t(99376),w=t(53286),k=t(19135),C=t(32446),F=t(92723),_=t(71096),z=t.n(_);t(6729);var E=t(29),D=t.n(E);z().locale("th");let A=(0,n.forwardRef)((e,s)=>{var t,n,i,a;let{order:l,shopName:o,shopAddress:r,shopPhone:c,shopTaxId:x,shopLogo:p}=e,h=l.items||[],m=l.payments||[],j={display:"flex",justifyContent:"space-between",marginBottom:"4px"};return(0,d.jsxs)("div",{className:"jsx-8bea46dc162791d5 receipt-container",children:[(0,d.jsxs)("div",{ref:s,className:"jsx-8bea46dc162791d5 receipt-paper",children:[(0,d.jsxs)("div",{className:"jsx-8bea46dc162791d5 text-center mb-4",children:[p&&(0,d.jsx)("img",{src:p,alt:"Logo",className:"jsx-8bea46dc162791d5 receipt-logo"}),(0,d.jsx)("div",{className:"jsx-8bea46dc162791d5 shop-name",children:o||"ร้านค้า POS"}),r&&(0,d.jsx)("div",{className:"jsx-8bea46dc162791d5 shop-info",children:r}),c&&(0,d.jsxs)("div",{className:"jsx-8bea46dc162791d5 shop-info",children:["โทร: ",c]}),x&&(0,d.jsxs)("div",{className:"jsx-8bea46dc162791d5 shop-info",children:["TAX ID: ",x]})]}),(0,d.jsx)("div",{className:"jsx-8bea46dc162791d5 dashed-line"}),(0,d.jsxs)("div",{className:"jsx-8bea46dc162791d5 section",children:[(0,d.jsxs)("div",{style:j,className:"jsx-8bea46dc162791d5",children:[(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:"เลขที่ออเดอร์:"}),(0,d.jsxs)("span",{className:"jsx-8bea46dc162791d5 font-bold",children:["#",l.order_no]})]}),(0,d.jsxs)("div",{style:j,className:"jsx-8bea46dc162791d5",children:[(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:"วันที่:"}),(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:z()(l.create_date).format("DD/MM/YYYY HH:mm")})]}),(0,d.jsxs)("div",{style:j,className:"jsx-8bea46dc162791d5",children:[(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:"ประเภท:"}),(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:(e=>{switch(e){case C.m.DineIn:return"ทานที่ร้าน";case C.m.TakeAway:return"สั่งกลับบ้าน";case C.m.Delivery:return"เดลิเวอรี่";default:return e}})(l.order_type)})]}),l.order_type===C.m.DineIn&&l.table&&(0,d.jsxs)("div",{style:j,className:"jsx-8bea46dc162791d5",children:[(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:"โต๊ะ:"}),(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:l.table.table_name})]}),(0,d.jsxs)("div",{style:j,className:"jsx-8bea46dc162791d5",children:[(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:"พนักงาน:"}),(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:(null===(t=l.created_by)||void 0===t?void 0:t.name)||(null===(n=l.created_by)||void 0===n?void 0:n.username)||"-"})]})]}),(0,d.jsx)("div",{className:"jsx-8bea46dc162791d5 dashed-line"}),(0,d.jsxs)("div",{className:"jsx-8bea46dc162791d5 section",children:[(0,d.jsx)("div",{className:"jsx-8bea46dc162791d5 section-header",children:"รายการสินค้า"}),h.map((e,s)=>{var t,n;return(0,d.jsxs)("div",{className:"jsx-8bea46dc162791d5 item-row",children:[(0,d.jsx)("div",{style:j,className:"jsx-8bea46dc162791d5",children:(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:(null===(t=e.product)||void 0===t?void 0:t.display_name)||(null===(n=e.product)||void 0===n?void 0:n.product_name)||"สินค้า"})}),(0,d.jsxs)("div",{style:{...j,paddingLeft:10,fontSize:"11px",color:"#4b5563"},className:"jsx-8bea46dc162791d5",children:[(0,d.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:[e.quantity," x ฿",Number(e.price).toLocaleString()]}),(0,d.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["฿",Number(e.total_price).toLocaleString()]})]}),e.notes&&(0,d.jsxs)("div",{className:"jsx-8bea46dc162791d5 item-note",children:["*",e.notes]})]},e.id||s)})]}),(0,d.jsx)("div",{className:"jsx-8bea46dc162791d5 dashed-line"}),(0,d.jsxs)("div",{className:"jsx-8bea46dc162791d5 section",children:[(0,d.jsxs)("div",{style:j,className:"jsx-8bea46dc162791d5",children:[(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:"รวมรายการ:"}),(0,d.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["฿",Number(l.sub_total).toLocaleString()]})]}),l.discount_amount>0&&(0,d.jsxs)("div",{style:j,className:"jsx-8bea46dc162791d5",children:[(0,d.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["ส่วนลด (",(null===(i=l.discount)||void 0===i?void 0:i.display_name)||(null===(a=l.discount)||void 0===a?void 0:a.discount_name)||"ส่วนลด","):"]}),(0,d.jsxs)("span",{style:{color:"#ef4444"},className:"jsx-8bea46dc162791d5",children:["-฿",Number(l.discount_amount).toLocaleString()]})]}),l.vat>0&&(0,d.jsxs)("div",{style:j,className:"jsx-8bea46dc162791d5",children:[(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:"VAT 7%:"}),(0,d.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["฿",Number(l.vat).toLocaleString()]})]}),(0,d.jsxs)("div",{className:"jsx-8bea46dc162791d5 total-row",children:[(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:"ยอดสุทธิ:"}),(0,d.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["฿",Number(l.total_amount).toLocaleString()]})]})]}),(0,d.jsx)("div",{className:"jsx-8bea46dc162791d5 dashed-line"}),m.length>0&&(0,d.jsxs)("div",{className:"jsx-8bea46dc162791d5 section",children:[(0,d.jsx)("div",{className:"jsx-8bea46dc162791d5 section-header",children:"การชำระเงิน"}),m.map((e,s)=>{var t,n;return(0,d.jsxs)("div",{style:j,className:"jsx-8bea46dc162791d5",children:[(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:(null===(t=e.payment_method)||void 0===t?void 0:t.display_name)||(null===(n=e.payment_method)||void 0===n?void 0:n.payment_method_name)||"ไม่ระบุ"}),(0,d.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["฿",Number(e.amount).toLocaleString()]})]},e.id||s)}),m.some(e=>e.change_amount>0)&&(0,d.jsxs)("div",{style:j,className:"jsx-8bea46dc162791d5",children:[(0,d.jsx)("span",{className:"jsx-8bea46dc162791d5",children:"เงินทอน:"}),(0,d.jsxs)("span",{className:"jsx-8bea46dc162791d5",children:["฿",m.reduce((e,s)=>e+Number(s.change_amount||0),0).toLocaleString()]})]})]}),(0,d.jsx)("div",{className:"jsx-8bea46dc162791d5 dashed-line"}),(0,d.jsxs)("div",{className:"jsx-8bea46dc162791d5 receipt-footer",children:[(0,d.jsx)("div",{style:{fontSize:"12px",fontWeight:600,marginBottom:4},className:"jsx-8bea46dc162791d5",children:"ขอบคุณที่ใช้บริการ"}),(0,d.jsx)("div",{style:{fontSize:"10px",color:"#666"},className:"jsx-8bea46dc162791d5",children:"Thank you for your purchase!"}),(0,d.jsxs)("div",{style:{fontSize:"9px",color:"#999",marginTop:8},className:"jsx-8bea46dc162791d5",children:["พิมพ์เมื่อ: ",z()().format("DD/MM/YYYY HH:mm:ss")]})]})]}),(0,d.jsx)(D(),{id:"8bea46dc162791d5",children:'.receipt-container.jsx-8bea46dc162791d5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:20px;background:#f0f2f5}.receipt-paper.jsx-8bea46dc162791d5{font-family:"Courier New",Courier,monospace;font-size:12px;width:80mm;padding:16px;background-color:#fff;color:#000;margin:0 auto;-webkit-box-shadow:0 4px 12px rgba(0,0,0,.1);-moz-box-shadow:0 4px 12px rgba(0,0,0,.1);box-shadow:0 4px 12px rgba(0,0,0,.1);position:relative}.dashed-line.jsx-8bea46dc162791d5{border-top:1px dashed#000;margin:12px 0;opacity:.5}.text-center.jsx-8bea46dc162791d5{text-align:center}.mb-4.jsx-8bea46dc162791d5{margin-bottom:16px}.font-bold.jsx-8bea46dc162791d5{fontweight:bold}.receipt-logo.jsx-8bea46dc162791d5{width:60px;height:60px;-o-object-fit:contain;object-fit:contain;margin-bottom:8px;-webkit-filter:grayscale(100%);filter:grayscale(100%)}.shop-name.jsx-8bea46dc162791d5{font-weight:bold;font-size:16px;margin-bottom:4px}.shop-info.jsx-8bea46dc162791d5{font-size:10px;margin-bottom:2px}.section.jsx-8bea46dc162791d5{margin-bottom:8px}.section-header.jsx-8bea46dc162791d5{font-weight:bold;margin-bottom:8px;font-size:13px}.item-row.jsx-8bea46dc162791d5{margin-bottom:6px}.item-note.jsx-8bea46dc162791d5{padding-left:10px;font-size:10px;font-style:italic;color:#666}.total-row.jsx-8bea46dc162791d5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-weight:bold;font-size:16px;margin-top:12px;border-top:2px solid#000;padding-top:8px}.receipt-footer.jsx-8bea46dc162791d5{text-align:center;margin-top:16px}@media print{.receipt-container.jsx-8bea46dc162791d5{padding:0;background:none}.receipt-paper.jsx-8bea46dc162791d5{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;width:100%;max-width:80mm}}'})]})});A.displayName="ReceiptTemplate";var I=t(68779);let Z=e=>[...e].sort((e,s)=>{let t=e.status===I.M.Cancelled,d=s.status===I.M.Cancelled;return t&&!d?1:!t&&d?-1:0}),B=e=>e===I.M.Cancelled?{color:"#f5222d",fontWeight:"bold"}:{};var R=t(7806),L=t(24675),T=t(67697),P=t(12028),W=t(25193);let{Title:M,Text:H}=i.default;z().locale("th");let Y=["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],O=e=>{let s=z()(e);return"".concat(s.date()," ").concat(Y[s.month()]," ").concat(s.format("HH:mm"))};function q(e){var s,t,i;let{params:_}=e,z=(0,S.useRouter)(),E=_.id[0],{socket:D}=(0,L.s)(),[Y,q]=(0,n.useState)(null),[V,G]=(0,n.useState)(!0),[X,J]=(0,n.useState)(null),[K,Q]=(0,n.useState)(!1),U=(0,n.useRef)(null),$=(0,n.useCallback)(async()=>{if(E){G(!0);try{let e=await w.x.getById(E);q(e)}catch(e){console.error("Fetch order detail error:",e),a.ZP.error("ไม่พบข้อมูลออเดอร์")}finally{G(!1)}}},[E]);(0,n.useEffect)(()=>{$()},[$]),(0,T.D)({socket:D,events:[P.b.orders.update,P.b.orders.delete,P.b.payments.create,P.b.payments.update],onRefresh:()=>$(),intervalMs:2e4});let ee=(0,n.useCallback)(async()=>{try{let e=await k.n.getProfile();J(e)}catch(e){console.warn("Could not fetch shop profile",e)}},[]);(0,n.useEffect)(()=>{ee()},[ee]),(0,T.D)({socket:D,events:[P.b.shopProfile.update],onRefresh:()=>ee(),debounceMs:800});let es=(0,n.useMemo)(()=>Z((0,R.S)((null==Y?void 0:Y.items)||[])),[null==Y?void 0:Y.items]);if(V)return(0,d.jsx)(W.Z,{maxWidth:99999,style:{padding:0},children:(0,d.jsx)("div",{style:{minHeight:"100vh",background:"#F8FAFC",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,d.jsx)(l.Z,{size:"large"})})});if(!Y)return(0,d.jsx)(W.Z,{maxWidth:99999,style:{padding:0},children:(0,d.jsx)("div",{style:{minHeight:"100vh",background:"#F8FAFC",padding:24},children:(0,d.jsxs)("div",{style:{textAlign:"center",paddingTop:60},children:[(0,d.jsx)(x.Z,{style:{fontSize:48,color:"#CBD5E1",marginBottom:16}}),(0,d.jsx)(M,{level:4,style:{color:"#64748B"},children:"ไม่พบข้อมูลออเดอร์"}),(0,d.jsx)(o.ZP,{type:"primary",onClick:()=>z.back(),children:"ย้อนกลับ"})]})})});let et=Y.payments||[],ed=(null===(s=Y.created_by)||void 0===s?void 0:s.name)||(null===(t=Y.created_by)||void 0===t?void 0:t.username)||"ไม่ทราบ",en=(null===(i=Y.table)||void 0===i?void 0:i.table_name)||"-",ei=Y.discount,ea=(e=>{switch(e){case C.m.DineIn:return{icon:(0,d.jsx)(p.Z,{}),label:"ทานที่ร้าน",color:"#fff",bg:"#3B82F6"};case C.m.TakeAway:return{icon:(0,d.jsx)(h.Z,{}),label:"กลับบ้าน",color:"#fff",bg:"#22C55E"};case C.m.Delivery:return{icon:(0,d.jsx)(m.Z,{}),label:"เดลิเวอรี่",color:"#fff",bg:"#EC4899"};default:return{icon:(0,d.jsx)(x.Z,{}),label:e,color:"#fff",bg:"#6B7280"}}})(Y.order_type),el=(e=>{switch(e){case C.i.Paid:return{bg:"#DCFCE7",color:"#16A34A",label:"ชำระเงินแล้ว",icon:(0,d.jsx)(j.Z,{})};case C.i.Cancelled:return{bg:"#FEE2E2",color:"#DC2626",label:"ยกเลิก",icon:(0,d.jsx)(b.Z,{})};default:return{bg:"#F3F4F6",color:"#6B7280",label:e,icon:null}}})(Y.status);return(0,d.jsx)(W.Z,{maxWidth:99999,style:{padding:0},children:(0,d.jsxs)("div",{style:{minHeight:"100vh",background:"#F8FAFC",paddingBottom:100},children:[(0,d.jsx)("div",{style:{background:F.Pc.headerGradient,padding:"16px",position:"sticky",top:0,zIndex:100,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,d.jsx)(o.ZP,{type:"text",icon:(0,d.jsx)(y.Z,{style:{fontSize:18,color:"#fff"}}),onClick:()=>z.back(),style:{background:"rgba(255,255,255,0.15)",border:"none",width:40,height:40,borderRadius:12}}),(0,d.jsxs)("div",{children:[(0,d.jsxs)(H,{style:{color:"#fff",fontSize:18,fontWeight:700,display:"block"},children:["#",Y.order_no]}),(0,d.jsxs)(H,{style:{color:"rgba(255,255,255,0.8)",fontSize:12},children:["\uD83D\uDCC5 ",O(Y.create_date)]})]})]}),(0,d.jsx)(o.ZP,{icon:(0,d.jsx)(u.Z,{}),onClick:()=>{Q(!0),setTimeout(()=>{if(U.current){let e=U.current.innerHTML,s=window.open("","","width=400,height=600");s&&(s.document.write("\n                        <html>\n                            <head>\n                                <title>ใบเสร็จ #".concat(null==Y?void 0:Y.order_no,"</title>\n                                <style>\n                                    body { font-family: 'Courier New', Courier, monospace; padding: 0; margin: 0; }\n                                    @media print {\n                                        body { -webkit-print-color-adjust: exact; }\n                                    }\n                                </style>\n                            </head>\n                            <body>").concat(e,"</body>\n                        </html>\n                    ")),s.document.close(),s.focus(),s.print(),s.close())}Q(!1)},500)},style:{background:"#fff",color:F.Pc.primary,border:"none",borderRadius:10,fontWeight:600,height:36},children:"พิมพ์"})]})}),(0,d.jsxs)("div",{style:{padding:"16px",maxWidth:600,margin:"0 auto"},children:[(0,d.jsxs)("div",{style:{background:"white",borderRadius:16,padding:"20px",marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[(0,d.jsxs)("span",{style:{padding:"6px 14px",borderRadius:8,background:el.bg,color:el.color,fontWeight:700,fontSize:13,display:"inline-flex",alignItems:"center",gap:6},children:[el.icon,el.label]}),(0,d.jsxs)(H,{style:{fontSize:26,fontWeight:800,color:F.Pc.salesColor},children:["฿",Number(Y.total_amount).toLocaleString()]})]}),(0,d.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:[(0,d.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[(0,d.jsx)("span",{style:{width:36,height:36,borderRadius:10,background:ea.bg,color:ea.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:ea.icon}),(0,d.jsxs)("div",{children:[(0,d.jsx)(H,{type:"secondary",style:{fontSize:11,display:"block"},children:"ประเภท"}),(0,d.jsx)(H,{strong:!0,style:{fontSize:13},children:ea.label})]})]}),(0,d.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[(0,d.jsx)("span",{style:{width:36,height:36,borderRadius:10,background:"#EEF2FF",color:"#6366F1",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:(0,d.jsx)(p.Z,{})}),(0,d.jsxs)("div",{children:[(0,d.jsx)(H,{type:"secondary",style:{fontSize:11,display:"block"},children:"โต๊ะ"}),(0,d.jsx)(H,{strong:!0,style:{fontSize:13},children:en})]})]}),(0,d.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[(0,d.jsx)("span",{style:{width:36,height:36,borderRadius:10,background:"#FEF3C7",color:"#D97706",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:(0,d.jsx)(g.Z,{})}),(0,d.jsxs)("div",{children:[(0,d.jsx)(H,{type:"secondary",style:{fontSize:11,display:"block"},children:"พนักงาน"}),(0,d.jsx)(H,{strong:!0,style:{fontSize:13},children:ed})]})]}),(0,d.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[(0,d.jsx)("span",{style:{width:36,height:36,borderRadius:10,background:ei?"#FEE2E2":"#F3F4F6",color:ei?"#DC2626":"#9CA3AF",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:(0,d.jsx)(f.Z,{})}),(0,d.jsxs)("div",{children:[(0,d.jsx)(H,{type:"secondary",style:{fontSize:11,display:"block"},children:"ส่วนลด"}),ei?(0,d.jsxs)(H,{strong:!0,style:{fontSize:13,color:"#DC2626"},children:["-฿",Number(Y.discount_amount).toLocaleString()]}):(0,d.jsx)(H,{type:"secondary",style:{fontSize:13},children:"ไม่มี"})]})]})]})]}),(0,d.jsxs)("div",{style:{background:"white",borderRadius:16,overflow:"hidden",marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,d.jsxs)("div",{style:{padding:"16px",borderBottom:"1px solid #F1F5F9",display:"flex",alignItems:"center",gap:8},children:[(0,d.jsx)(x.Z,{style:{color:F.Pc.primary,fontSize:18}}),(0,d.jsxs)(H,{strong:!0,style:{fontSize:15},children:["รายการสินค้า (",es.length,")"]})]}),(0,d.jsx)("div",{style:{padding:"8px 0"},children:es.map((e,s)=>{var t,n,i,a;let l=B(e.status),o=e.status===I.M.Cancelled;return(0,d.jsxs)("div",{style:{padding:"12px 16px",borderBottom:s<es.length-1?"1px solid #F8FAFC":"none",display:"flex",gap:12,opacity:o?.5:1},children:[(0,d.jsx)("div",{style:{width:56,height:56,borderRadius:10,overflow:"hidden",flexShrink:0,background:"#F8FAFC",border:"1px solid #E5E7EB"},children:(null===(t=e.product)||void 0===t?void 0:t.img_url)?(0,d.jsx)(r.Z,{src:e.product.img_url,width:56,height:56,style:{objectFit:"cover"},preview:!1,alt:(null===(n=e.product)||void 0===n?void 0:n.product_name)||"product"}):(0,d.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)(x.Z,{style:{color:"#CBD5E1",fontSize:20}})})}),(0,d.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:8},children:[(0,d.jsx)(H,{strong:!0,style:{fontSize:14,...l},children:(null===(i=e.product)||void 0===i?void 0:i.display_name)||(null===(a=e.product)||void 0===a?void 0:a.product_name)||"สินค้า"}),(0,d.jsxs)(H,{strong:!0,style:{fontSize:14,color:F.Pc.salesColor,flexShrink:0,...l},children:["฿",Number(e.total_price).toLocaleString()]})]}),(0,d.jsxs)("div",{style:{marginTop:4,display:"flex",alignItems:"center",gap:8},children:[(0,d.jsxs)(H,{type:"secondary",style:{fontSize:12},children:["x",e.quantity," • ฿",Number(e.price).toLocaleString(),"/ชิ้น"]}),o&&(0,d.jsx)("span",{style:{fontSize:10,padding:"2px 6px",borderRadius:4,background:"#FEE2E2",color:"#DC2626",fontWeight:600},children:"ยกเลิก"})]}),e.details&&e.details.length>0&&(0,d.jsx)("div",{style:{marginTop:6},children:e.details.map((e,s)=>(0,d.jsxs)(H,{style:{fontSize:11,display:"block",color:"#16A34A",fontWeight:500},children:["+ ",e.detail_name," ",e.extra_price>0&&(0,d.jsxs)("span",{style:{color:"#16A34A"},children:["(+฿",Number(e.extra_price).toLocaleString(),")"]})]},s))}),e.notes&&(0,d.jsx)("div",{style:{marginTop:6,background:"#FEF3C7",padding:"4px 8px",borderRadius:6,display:"inline-block"},children:(0,d.jsxs)(H,{style:{fontSize:11,color:"#B45309"},children:["\uD83D\uDCDD ",e.notes]})})]})]},e.id)})}),(0,d.jsxs)("div",{style:{background:"#F8FAFC",padding:"12px 16px",borderTop:"1px solid #F1F5F9"},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[(0,d.jsx)(H,{type:"secondary",style:{fontSize:13},children:"รวมรายการ"}),(0,d.jsxs)(H,{style:{fontSize:13},children:["฿",Number(Y.sub_total).toLocaleString()]})]}),Y.discount_amount>0&&(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[(0,d.jsx)(H,{type:"secondary",style:{fontSize:13},children:"ส่วนลด"}),(0,d.jsxs)(H,{style:{fontSize:13,color:"#DC2626"},children:["-฿",Number(Y.discount_amount).toLocaleString()]})]}),Y.vat>0&&(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[(0,d.jsx)(H,{type:"secondary",style:{fontSize:13},children:"VAT 7%"}),(0,d.jsxs)(H,{style:{fontSize:13},children:["฿",Number(Y.vat).toLocaleString()]})]}),(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:8,borderTop:"1px dashed #E2E8F0"},children:[(0,d.jsx)(H,{strong:!0,style:{fontSize:15},children:"ยอดสุทธิ"}),(0,d.jsxs)(H,{strong:!0,style:{fontSize:18,color:F.Pc.salesColor},children:["฿",Number(Y.total_amount).toLocaleString()]})]})]})]}),(0,d.jsxs)("div",{style:{background:"white",borderRadius:16,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,d.jsxs)("div",{style:{padding:"16px",borderBottom:"1px solid #F1F5F9",display:"flex",alignItems:"center",gap:8},children:[(0,d.jsx)(v.Z,{style:{color:"#22C55E",fontSize:18}}),(0,d.jsxs)(H,{strong:!0,style:{fontSize:15},children:["การชำระเงิน (",et.length,")"]})]}),et.length>0?(0,d.jsx)("div",{style:{padding:"8px 0"},children:et.map((e,s)=>{var t,n;return(0,d.jsxs)("div",{style:{padding:"14px 16px",borderBottom:s<et.length-1?"1px solid #F8FAFC":"none"},children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,d.jsx)("span",{style:{width:8,height:8,borderRadius:"50%",background:"Success"===e.status?"#22C55E":"#EF4444"}}),(0,d.jsx)(H,{strong:!0,style:{fontSize:14},children:(null===(t=e.payment_method)||void 0===t?void 0:t.display_name)||(null===(n=e.payment_method)||void 0===n?void 0:n.payment_method_name)||"ไม่ระบุ"})]}),(0,d.jsxs)(H,{strong:!0,style:{fontSize:15,color:F.Pc.salesColor},children:["฿",Number(e.amount).toLocaleString()]})]}),(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,d.jsxs)(H,{type:"secondary",style:{fontSize:12},children:[(0,d.jsx)(N.Z,{style:{marginRight:4}}),O(e.payment_date)]}),e.amount_received>0&&(0,d.jsxs)(H,{type:"secondary",style:{fontSize:12},children:["รับมา ฿",Number(e.amount_received).toLocaleString(),e.change_amount>0&&" • ทอน ฿".concat(Number(e.change_amount).toLocaleString())]})]})]},e.id)})}):(0,d.jsxs)("div",{style:{padding:"30px 16px",textAlign:"center"},children:[(0,d.jsx)(v.Z,{style:{fontSize:32,color:"#CBD5E1",marginBottom:8}}),(0,d.jsx)(H,{type:"secondary",style:{display:"block"},children:"ไม่มีข้อมูลการชำระเงิน"})]})]})]}),(0,d.jsx)(c.Z,{open:K,footer:null,closable:!1,width:380,centered:!0,children:(0,d.jsxs)("div",{style:{textAlign:"center",padding:20},children:[(0,d.jsx)(l.Z,{size:"large"}),(0,d.jsx)("div",{style:{marginTop:16},children:"กำลังเตรียมพิมพ์..."})]})}),(0,d.jsx)("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:(0,d.jsx)(A,{ref:U,order:Y,shopName:null==X?void 0:X.shop_name,shopAddress:null==X?void 0:X.address,shopPhone:null==X?void 0:X.phone,shopTaxId:null==X?void 0:X.tax_id,shopLogo:null==X?void 0:X.logo_url})})]})})}}},function(e){e.O(0,[8024,4736,8592,1744],function(){return e(e.s=12873)}),_N_E=e.O()}]);