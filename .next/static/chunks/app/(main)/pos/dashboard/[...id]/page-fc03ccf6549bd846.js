(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9224],{12873:function(e,t,n){Promise.resolve().then(n.bind(n,30066))},30066:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var a=n(57437),s=n(2265),i=n(39486),l=n(34029),o=n(48651),c=n(50742),r=n(38382),d=n(53743),x=n(62376),f=n(93132),p=n(52539),m=n(29107),h=n(83669),u=n(81770),j=n(17588),y=n(60392),g=n(15883),b=n(48998),v=n(99458),w=n(5540),k=n(99376),N=n(53286),S=n(19135),C=n(32446),z=n(92723),_=n(71096),F=n.n(_);n(6729);var E=n(29),D=n.n(E),I=n(7806),A=n(5105);F().locale("th");let Z=(0,s.forwardRef)((e,t)=>{var n,s,i,l;let{order:o,shopName:c,shopAddress:r,shopPhone:d,shopTaxId:x,shopLogo:f}=e,p=(o.items||[]).filter(e=>e.status!==A.M.Cancelled),m=o.payments||[],h=p.reduce((e,t)=>e+Number(t.total_price||0),0),u=Number(o.discount_amount||0),j=o.vat>0?(h-u)*.07:0;return(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 receipt-container",children:[(0,a.jsxs)("div",{ref:t,className:"jsx-ac80ffc1703a8a53 receipt-paper",children:[(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 text-center mb-4",children:[f&&(0,a.jsx)("img",{src:f,alt:"Logo",className:"jsx-ac80ffc1703a8a53 receipt-logo"}),(0,a.jsx)("div",{className:"jsx-ac80ffc1703a8a53 shop-name",children:c||"ร้านค้า POS"}),r&&(0,a.jsx)("div",{className:"jsx-ac80ffc1703a8a53 shop-info",children:r}),d&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 shop-info shop-phone",children:["โทร: ",d]}),x&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 shop-info",children:["TAX ID: ",x]})]}),(0,a.jsx)("div",{className:"jsx-ac80ffc1703a8a53 dashed-line"}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 section",children:[(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:"เลขที่ออเดอร์:"}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53 font-bold",children:["#",o.order_no]})]}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:"วันที่:"}),(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:F()(o.create_date).format("DD/MM/YYYY HH:mm")})]}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:"ประเภท:"}),(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:(e=>{switch(e){case C.m.DineIn:return"ทานที่ร้าน";case C.m.TakeAway:return"สั่งกลับบ้าน";case C.m.Delivery:return"เดลิเวอรี่";default:return e}})(o.order_type)})]}),o.order_type===C.m.DineIn&&o.table&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:"โต๊ะ:"}),(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:o.table.table_name})]}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:"พนักงาน:"}),(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:(null===(n=o.created_by)||void 0===n?void 0:n.name)||(null===(s=o.created_by)||void 0===s?void 0:s.username)||"-"})]})]}),(0,a.jsx)("div",{className:"jsx-ac80ffc1703a8a53 dashed-line"}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 section",children:[(0,a.jsx)("div",{className:"jsx-ac80ffc1703a8a53 section-header",children:"รายการสินค้า"}),(0,I.S)(p).map((e,t)=>{var n,s;return(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 item-row",children:[(0,a.jsx)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:(null===(n=e.product)||void 0===n?void 0:n.display_name)||(null===(s=e.product)||void 0===s?void 0:s.product_name)||"สินค้า"})}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 item-details",children:[(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:[e.quantity," x ฿",Number(e.price).toLocaleString()]}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["฿",Number(e.total_price).toLocaleString()]})]}),e.details&&e.details.map((e,t)=>(0,a.jsxs)("div",{style:{color:"#16a34a",fontStyle:"normal"},className:"jsx-ac80ffc1703a8a53 item-note",children:["+ ",e.detail_name," ",e.extra_price>0&&"(+฿".concat(Number(e.extra_price).toLocaleString(),")")]},t)),e.notes&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 item-note",children:["*",e.notes]})]},e.id||t)})]}),(0,a.jsx)("div",{className:"jsx-ac80ffc1703a8a53 dashed-line"}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 section",children:[(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:"รวมรายการ:"}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["฿",Number(h).toLocaleString()]})]}),u>0&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["ส่วนลด (",(null===(i=o.discount)||void 0===i?void 0:i.display_name)||(null===(l=o.discount)||void 0===l?void 0:l.discount_name)||"ส่วนลด","):"]}),(0,a.jsxs)("span",{style:{color:"#ef4444"},className:"jsx-ac80ffc1703a8a53",children:["-฿",Number(u).toLocaleString()]})]}),j>0&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:"VAT 7%:"}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["฿",Number(j).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 total-row",children:[(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:"ยอดสุทธิ:"}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["฿",Number(h-u+j).toLocaleString()]})]})]}),(0,a.jsx)("div",{className:"jsx-ac80ffc1703a8a53 dashed-line"}),m.length>0&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 section",children:[(0,a.jsx)("div",{className:"jsx-ac80ffc1703a8a53 section-header",children:"การชำระเงิน"}),m.map((e,t)=>{var n,s;return(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:(null===(n=e.payment_method)||void 0===n?void 0:n.display_name)||(null===(s=e.payment_method)||void 0===s?void 0:s.payment_method_name)||"ไม่ระบุ"}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["฿",Number(e.amount).toLocaleString()]})]},e.id||t)}),m.some(e=>e.change_amount>0)&&(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 flex-between",children:[(0,a.jsx)("span",{className:"jsx-ac80ffc1703a8a53",children:"เงินทอน:"}),(0,a.jsxs)("span",{className:"jsx-ac80ffc1703a8a53",children:["฿",m.reduce((e,t)=>e+Number(t.change_amount||0),0).toLocaleString()]})]})]}),(0,a.jsx)("div",{className:"jsx-ac80ffc1703a8a53 dashed-line"}),(0,a.jsxs)("div",{className:"jsx-ac80ffc1703a8a53 receipt-footer",children:[(0,a.jsx)("div",{style:{fontSize:"12px",fontWeight:600,marginBottom:4},className:"jsx-ac80ffc1703a8a53",children:"ขอบคุณที่ใช้บริการ"}),(0,a.jsx)("div",{style:{fontSize:"10px",color:"#666"},className:"jsx-ac80ffc1703a8a53",children:"Thank you for your purchase!"}),(0,a.jsxs)("div",{style:{fontSize:"9px",color:"#999",marginTop:8},className:"jsx-ac80ffc1703a8a53",children:["พิมพ์เมื่อ: ",F()().format("DD/MM/YYYY HH:mm:ss")]})]})]}),(0,a.jsx)(D(),{id:"ac80ffc1703a8a53",children:'.receipt-container.jsx-ac80ffc1703a8a53{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:20px;background:#f0f2f5}.receipt-paper.jsx-ac80ffc1703a8a53{font-family:"Courier New",Courier,monospace;font-size:12px;width:80mm;padding:16px;background-color:#fff;color:#000;margin:0 auto;-webkit-box-shadow:0 4px 12px rgba(0,0,0,.1);-moz-box-shadow:0 4px 12px rgba(0,0,0,.1);box-shadow:0 4px 12px rgba(0,0,0,.1);position:relative}.text-center.jsx-ac80ffc1703a8a53{text-align:center;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%}.mb-4.jsx-ac80ffc1703a8a53{margin-bottom:16px}.dashed-line.jsx-ac80ffc1703a8a53{border-top:1px dashed#000;margin:12px 0;opacity:.5}.shop-name.jsx-ac80ffc1703a8a53{font-weight:900;font-size:28px;margin-bottom:4px;text-align:center;width:100%}.shop-info.jsx-ac80ffc1703a8a53{font-size:12px;margin-bottom:2px;text-align:center;width:100%}.shop-phone.jsx-ac80ffc1703a8a53{font-size:16px;font-weight:700;margin-top:4px}.section.jsx-ac80ffc1703a8a53{margin-bottom:8px}.section-header.jsx-ac80ffc1703a8a53{font-weight:bold;margin-bottom:8px;font-size:13px}.flex-between.jsx-ac80ffc1703a8a53{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:4px}.font-bold.jsx-ac80ffc1703a8a53{font-weight:bold}.receipt-logo.jsx-ac80ffc1703a8a53{width:60px;height:60px;-o-object-fit:contain;object-fit:contain;margin-bottom:8px;margin-left:auto;margin-right:auto;display:block;-webkit-filter:grayscale(100%);filter:grayscale(100%)}.item-row.jsx-ac80ffc1703a8a53{margin-bottom:6px}.item-details.jsx-ac80ffc1703a8a53{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding-left:10px;font-size:12px;font-weight:600;color:#000}.item-note.jsx-ac80ffc1703a8a53{padding-left:10px;font-size:9px;font-weight:300;font-style:italic;color:#4b5563}.total-row.jsx-ac80ffc1703a8a53{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-weight:900;font-size:26px;margin-top:12px;border-top:2px solid#000;padding-top:8px}.receipt-footer.jsx-ac80ffc1703a8a53{text-align:center;margin-top:16px}@media print{.receipt-container.jsx-ac80ffc1703a8a53{padding:0;background:none}.receipt-paper.jsx-ac80ffc1703a8a53{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;width:100%;max-width:80mm}}'})]})});Z.displayName="ReceiptTemplate";let R=e=>[...e].sort((e,t)=>{let n=e.status===A.M.Cancelled,a=t.status===A.M.Cancelled;return n&&!a?1:!n&&a?-1:0}),B=e=>e===A.M.Cancelled?{color:"#f5222d",fontWeight:"bold"}:{};var L=n(24675),T=n(67697),P=n(12028),M=n(25193);let{Title:W,Text:H}=i.default;F().locale("th");let Y=["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],q=e=>{let t=F()(e);return"".concat(t.date()," ").concat(Y[t.month()]," ").concat(t.format("HH:mm"))};function O(e){var t,n,i;let{params:_}=e,F=(0,k.useRouter)(),E=_.id[0],{socket:D}=(0,L.s)(),[Y,O]=(0,s.useState)(null),[G,J]=(0,s.useState)(!0),[U,V]=(0,s.useState)(null),[X,K]=(0,s.useState)(!1),Q=(0,s.useRef)(null),$=(0,s.useCallback)(async()=>{if(E){J(!0);try{let e=await N.x.getById(E);O(e)}catch(e){console.error("Fetch order detail error:",e),l.ZP.error("ไม่พบข้อมูลออเดอร์")}finally{J(!1)}}},[E]);(0,s.useEffect)(()=>{$()},[$]),(0,T.D)({socket:D,events:[P.b.orders.update,P.b.orders.delete,P.b.payments.create,P.b.payments.update],onRefresh:()=>$(),intervalMs:2e4});let ee=(0,s.useCallback)(async()=>{try{let e=await S.n.getProfile();V(e)}catch(e){console.warn("Could not fetch shop profile",e)}},[]);(0,s.useEffect)(()=>{ee()},[ee]),(0,T.D)({socket:D,events:[P.b.shopProfile.update],onRefresh:()=>ee(),debounceMs:800});let et=(0,s.useMemo)(()=>R((0,I.S)((null==Y?void 0:Y.items)||[])),[null==Y?void 0:Y.items]);if(G)return(0,a.jsx)(M.Z,{maxWidth:99999,style:{padding:0},children:(0,a.jsx)("div",{style:{minHeight:"100vh",background:"#F8FAFC",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)(o.Z,{size:"large"})})});if(!Y)return(0,a.jsx)(M.Z,{maxWidth:99999,style:{padding:0},children:(0,a.jsx)("div",{style:{minHeight:"100vh",background:"#F8FAFC",padding:24},children:(0,a.jsxs)("div",{style:{textAlign:"center",paddingTop:60},children:[(0,a.jsx)(x.Z,{style:{fontSize:48,color:"#CBD5E1",marginBottom:16}}),(0,a.jsx)(W,{level:4,style:{color:"#64748B"},children:"ไม่พบข้อมูลออเดอร์"}),(0,a.jsx)(c.ZP,{type:"primary",onClick:()=>F.back(),children:"ย้อนกลับ"})]})})});let en=Y.payments||[],ea=(null===(t=Y.created_by)||void 0===t?void 0:t.name)||(null===(n=Y.created_by)||void 0===n?void 0:n.username)||"ไม่ทราบ",es=(null===(i=Y.table)||void 0===i?void 0:i.table_name)||"-",ei=Y.discount,el=(e=>{switch(e){case C.m.DineIn:return{icon:(0,a.jsx)(f.Z,{}),label:"ทานที่ร้าน",color:"#fff",bg:"#3B82F6"};case C.m.TakeAway:return{icon:(0,a.jsx)(p.Z,{}),label:"กลับบ้าน",color:"#fff",bg:"#22C55E"};case C.m.Delivery:return{icon:(0,a.jsx)(m.Z,{}),label:"เดลิเวอรี่",color:"#fff",bg:"#EC4899"};default:return{icon:(0,a.jsx)(x.Z,{}),label:e,color:"#fff",bg:"#6B7280"}}})(Y.order_type),eo=(e=>{switch(e){case C.i.Paid:return{bg:"#DCFCE7",color:"#16A34A",label:"ชำระเงินแล้ว",icon:(0,a.jsx)(h.Z,{})};case C.i.Cancelled:return{bg:"#FEE2E2",color:"#DC2626",label:"ยกเลิก",icon:(0,a.jsx)(u.Z,{})};default:return{bg:"#F3F4F6",color:"#6B7280",label:e,icon:null}}})(Y.status);return(0,a.jsx)(M.Z,{maxWidth:99999,style:{padding:0},children:(0,a.jsxs)("div",{style:{minHeight:"100vh",background:"#F8FAFC",paddingBottom:100},children:[(0,a.jsx)("div",{style:{background:z.Pc.headerGradient,padding:"16px",position:"sticky",top:0,zIndex:100,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,a.jsx)(c.ZP,{type:"text",icon:(0,a.jsx)(j.Z,{style:{fontSize:18,color:"#fff"}}),onClick:()=>F.back(),style:{background:"rgba(255,255,255,0.15)",border:"none",width:40,height:40,borderRadius:12}}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(H,{style:{color:"#fff",fontSize:18,fontWeight:700,display:"block"},children:["#",Y.order_no]}),(0,a.jsxs)(H,{style:{color:"rgba(255,255,255,0.8)",fontSize:12},children:["\uD83D\uDCC5 ",q(Y.create_date)]})]})]}),(0,a.jsx)(c.ZP,{icon:(0,a.jsx)(y.Z,{}),onClick:()=>{K(!0),setTimeout(()=>{if(Q.current){let e=Q.current.innerHTML,t=window.open("","","width=400,height=600");t&&(t.document.write("\n                        <html>\n                            <head>\n                                <title>ใบเสร็จ #".concat(null==Y?void 0:Y.order_no,"</title>\n                                <style>\n                                    body { \n                                        font-family: 'Courier New', Courier, monospace; \n                                        padding: 0; \n                                        margin: 0; \n                                        background: #fff;\n                                    }\n                                    .receipt-paper {\n                                        width: 80mm;\n                                        padding: 16px;\n                                        margin: 0 auto;\n                                    }\n                                    .text-center { \n                                        text-align: center;\n                                        display: flex;\n                                        flex-direction: column;\n                                        align-items: center;\n                                        justify-content: center;\n                                        width: 100%;\n                                    }\n                                    .shop-name {\n                                        font-weight: 900;\n                                        font-size: 28px;\n                                        margin-bottom: 4px;\n                                        text-align: center;\n                                        width: 100%;\n                                    }\n                                    .shop-info {\n                                        font-size: 12px;\n                                        margin-bottom: 2px;\n                                        text-align: center;\n                                        width: 100%;\n                                    }\n                                    .shop-phone {\n                                        font-size: 16px;\n                                        font-weight: 700;\n                                        margin-top: 4px;\n                                    }\n                                    .receipt-logo {\n                                        width: 60px;\n                                        height: 60px;\n                                        object-fit: contain;\n                                        margin-bottom: 8px;\n                                        margin-left: auto;\n                                        margin-right: auto;\n                                        display: block;\n                                        filter: grayscale(100%);\n                                    }\n                                    .dashed-line {\n                                        border-top: 1px dashed #000;\n                                        margin: 12px 0;\n                                        opacity: 0.5;\n                                    }\n                                    .section { margin-bottom: 8px; }\n                                    .flex-between {\n                                        display: flex;\n                                        justify-content: space-between;\n                                        margin-bottom: 4px;\n                                    }\n                                    .font-bold { font-weight: bold; }\n                                    .item-details {\n                                        display: flex;\n                                        justify-content: space-between;\n                                        padding-left: 10px;\n                                        font-size: 12px;\n                                        font-weight: 600;\n                                        color: #000;\n                                    }\n                                    .item-note {\n                                        padding-left: 10px;\n                                        font-size: 9px;\n                                        font-weight: 300;\n                                        font-style: italic;\n                                        color: #4b5563;\n                                    }\n                                    .total-row {\n                                        display: flex;\n                                        justify-content: space-between;\n                                        font-weight: 900;\n                                        font-size: 26px;\n                                        margin-top: 12px;\n                                        border-top: 2px solid #000;\n                                        padding-top: 8px;\n                                    }\n                                    .receipt-footer {\n                                        text-align: center;\n                                        margin-top: 16px;\n                                    }\n                                    @media print {\n                                        body { -webkit-print-color-adjust: exact; }\n                                        .receipt-paper { width: 100%; max-width: 80mm; box-shadow: none; }\n                                    }\n                                </style>\n                            </head>\n                            <body>\n                                <div class=\"receipt-paper\">\n                                    ").concat(e,"\n                                </div>\n                            </body>\n                        </html>\n                    ")),t.document.close(),t.focus(),t.print(),t.close())}K(!1)},500)},style:{background:"#fff",color:z.Pc.primary,border:"none",borderRadius:10,fontWeight:600,height:36},children:"พิมพ์"})]})}),(0,a.jsxs)("div",{style:{padding:"16px",maxWidth:600,margin:"0 auto"},children:[(0,a.jsxs)("div",{style:{background:"white",borderRadius:16,padding:"20px",marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[(0,a.jsxs)("span",{style:{padding:"6px 14px",borderRadius:8,background:eo.bg,color:eo.color,fontWeight:700,fontSize:13,display:"inline-flex",alignItems:"center",gap:6},children:[eo.icon,eo.label]}),(0,a.jsxs)(H,{style:{fontSize:26,fontWeight:800,color:z.Pc.salesColor},children:["฿",Number(Y.total_amount).toLocaleString()]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:[(0,a.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[(0,a.jsx)("span",{style:{width:36,height:36,borderRadius:10,background:el.bg,color:el.color,display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:el.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)(H,{type:"secondary",style:{fontSize:11,display:"block"},children:"ประเภท"}),(0,a.jsx)(H,{strong:!0,style:{fontSize:13},children:el.label})]})]}),(0,a.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[(0,a.jsx)("span",{style:{width:36,height:36,borderRadius:10,background:"#EEF2FF",color:"#6366F1",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:(0,a.jsx)(f.Z,{})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(H,{type:"secondary",style:{fontSize:11,display:"block"},children:"โต๊ะ"}),(0,a.jsx)(H,{strong:!0,style:{fontSize:13},children:es})]})]}),(0,a.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[(0,a.jsx)("span",{style:{width:36,height:36,borderRadius:10,background:"#FEF3C7",color:"#D97706",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:(0,a.jsx)(g.Z,{})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(H,{type:"secondary",style:{fontSize:11,display:"block"},children:"พนักงาน"}),(0,a.jsx)(H,{strong:!0,style:{fontSize:13},children:ea})]})]}),(0,a.jsxs)("div",{style:{background:"#F8FAFC",borderRadius:12,padding:"12px",display:"flex",alignItems:"center",gap:10},children:[(0,a.jsx)("span",{style:{width:36,height:36,borderRadius:10,background:ei?"#FEE2E2":"#F3F4F6",color:ei?"#DC2626":"#9CA3AF",display:"flex",alignItems:"center",justifyContent:"center",fontSize:16},children:(0,a.jsx)(b.Z,{})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(H,{type:"secondary",style:{fontSize:11,display:"block"},children:"ส่วนลด"}),ei?(0,a.jsxs)(H,{strong:!0,style:{fontSize:13,color:"#DC2626"},children:["-฿",Number(Y.discount_amount).toLocaleString()]}):(0,a.jsx)(H,{type:"secondary",style:{fontSize:13},children:"ไม่มี"})]})]})]})]}),(0,a.jsxs)("div",{style:{background:"white",borderRadius:16,overflow:"hidden",marginBottom:16,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,a.jsxs)("div",{style:{padding:"16px",borderBottom:"1px solid #F1F5F9",display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)(x.Z,{style:{color:z.Pc.primary,fontSize:18}}),(0,a.jsxs)(H,{strong:!0,style:{fontSize:15},children:["รายการสินค้า (",et.length,")"]})]}),(0,a.jsx)("div",{style:{padding:"8px 0"},children:et.map((e,t)=>{var n,s,i,l;let o=B(e.status),c=e.status===A.M.Cancelled;return(0,a.jsxs)("div",{style:{padding:"12px 16px",borderBottom:t<et.length-1?"1px solid #F8FAFC":"none",display:"flex",gap:12,opacity:c?.5:1},children:[(0,a.jsx)("div",{style:{width:56,height:56,borderRadius:10,overflow:"hidden",flexShrink:0,background:"#F8FAFC",border:"1px solid #E5E7EB"},children:(null===(n=e.product)||void 0===n?void 0:n.img_url)?(0,a.jsx)(r.Z,{src:e.product.img_url,width:56,height:56,style:{objectFit:"cover"},preview:!1,alt:(null===(s=e.product)||void 0===s?void 0:s.product_name)||"product"}):(0,a.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(x.Z,{style:{color:"#CBD5E1",fontSize:20}})})}),(0,a.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:8},children:[(0,a.jsx)(H,{strong:!0,style:{fontSize:14,...o},children:(null===(i=e.product)||void 0===i?void 0:i.display_name)||(null===(l=e.product)||void 0===l?void 0:l.product_name)||"สินค้า"}),(0,a.jsxs)(H,{strong:!0,style:{fontSize:14,color:z.Pc.salesColor,flexShrink:0,...o},children:["฿",Number(e.total_price).toLocaleString()]})]}),(0,a.jsxs)("div",{style:{marginTop:4,display:"flex",alignItems:"center",gap:8},children:[(0,a.jsxs)(H,{type:"secondary",style:{fontSize:12},children:["x",e.quantity," • ฿",Number(e.price).toLocaleString(),"/ชิ้น"]}),c&&(0,a.jsx)("span",{style:{fontSize:10,padding:"2px 6px",borderRadius:4,background:"#FEE2E2",color:"#DC2626",fontWeight:600},children:"ยกเลิก"})]}),e.details&&e.details.length>0&&(0,a.jsx)("div",{style:{marginTop:6},children:e.details.map((e,t)=>(0,a.jsxs)(H,{style:{fontSize:11,display:"block",color:"#16A34A",fontWeight:500},children:["+ ",e.detail_name," ",e.extra_price>0&&(0,a.jsxs)("span",{style:{color:"#16A34A"},children:["(+฿",Number(e.extra_price).toLocaleString(),")"]})]},t))}),e.notes&&(0,a.jsx)("div",{style:{marginTop:6,background:"#FEF3C7",padding:"4px 8px",borderRadius:6,display:"inline-block"},children:(0,a.jsxs)(H,{style:{fontSize:11,color:"#B45309"},children:["\uD83D\uDCDD ",e.notes]})})]})]},e.id)})}),(0,a.jsxs)("div",{style:{background:"#F8FAFC",padding:"12px 16px",borderTop:"1px solid #F1F5F9"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[(0,a.jsx)(H,{type:"secondary",style:{fontSize:13},children:"รวมรายการ"}),(0,a.jsxs)(H,{style:{fontSize:13},children:["฿",et.filter(e=>e.status!==A.M.Cancelled).reduce((e,t)=>e+Number(t.total_price||0),0).toLocaleString()]})]}),Y.discount_amount>0&&(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[(0,a.jsx)(H,{type:"secondary",style:{fontSize:13},children:"ส่วนลด"}),(0,a.jsxs)(H,{style:{fontSize:13,color:"#DC2626"},children:["-฿",Number(Y.discount_amount).toLocaleString()]})]}),Y.vat>0&&(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[(0,a.jsx)(H,{type:"secondary",style:{fontSize:13},children:"VAT 7%"}),(0,a.jsxs)(H,{style:{fontSize:13},children:["฿",Number(Y.vat).toLocaleString()]})]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:8,borderTop:"1px dashed #E2E8F0"},children:[(0,a.jsx)(H,{strong:!0,style:{fontSize:15},children:"ยอดสุทธิ"}),(0,a.jsxs)(H,{strong:!0,style:{fontSize:18,color:z.Pc.salesColor},children:["฿",(et.filter(e=>e.status!==A.M.Cancelled).reduce((e,t)=>e+Number(t.total_price||0),0)-Number(Y.discount_amount||0)+Number(Y.vat||0)).toLocaleString()]})]})]})]}),(0,a.jsxs)("div",{style:{background:"white",borderRadius:16,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},children:[(0,a.jsxs)("div",{style:{padding:"16px",borderBottom:"1px solid #F1F5F9",display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)(v.Z,{style:{color:"#22C55E",fontSize:18}}),(0,a.jsxs)(H,{strong:!0,style:{fontSize:15},children:["การชำระเงิน (",en.length,")"]})]}),en.length>0?(0,a.jsx)("div",{style:{padding:"8px 0"},children:en.map((e,t)=>{var n,s;return(0,a.jsxs)("div",{style:{padding:"14px 16px",borderBottom:t<en.length-1?"1px solid #F8FAFC":"none"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)("span",{style:{width:8,height:8,borderRadius:"50%",background:"Success"===e.status?"#22C55E":"#EF4444"}}),(0,a.jsx)(H,{strong:!0,style:{fontSize:14},children:(null===(n=e.payment_method)||void 0===n?void 0:n.display_name)||(null===(s=e.payment_method)||void 0===s?void 0:s.payment_method_name)||"ไม่ระบุ"})]}),(0,a.jsxs)(H,{strong:!0,style:{fontSize:15,color:z.Pc.salesColor},children:["฿",Number(e.amount).toLocaleString()]})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,a.jsxs)(H,{type:"secondary",style:{fontSize:12},children:[(0,a.jsx)(w.Z,{style:{marginRight:4}}),q(e.payment_date)]}),e.amount_received>0&&(0,a.jsxs)(H,{type:"secondary",style:{fontSize:12},children:["รับมา ฿",Number(e.amount_received).toLocaleString(),e.change_amount>0&&" • ทอน ฿".concat(Number(e.change_amount).toLocaleString())]})]})]},e.id)})}):(0,a.jsxs)("div",{style:{padding:"30px 16px",textAlign:"center"},children:[(0,a.jsx)(v.Z,{style:{fontSize:32,color:"#CBD5E1",marginBottom:8}}),(0,a.jsx)(H,{type:"secondary",style:{display:"block"},children:"ไม่มีข้อมูลการชำระเงิน"})]})]})]}),(0,a.jsx)(d.Z,{open:X,footer:null,closable:!1,width:380,centered:!0,children:(0,a.jsxs)("div",{style:{textAlign:"center",padding:20},children:[(0,a.jsx)(o.Z,{size:"large"}),(0,a.jsx)("div",{style:{marginTop:16},children:"กำลังเตรียมพิมพ์..."})]})}),(0,a.jsx)("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:(0,a.jsx)(Z,{ref:Q,order:Y,shopName:null==U?void 0:U.shop_name,shopAddress:null==U?void 0:U.address,shopPhone:null==U?void 0:U.phone,shopTaxId:null==U?void 0:U.tax_id,shopLogo:null==U?void 0:U.logo_url})})]})})}},19135:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var a=n(2913),s=n(98170);let i="/pos/shopProfile",l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",n={};return t&&(n["Content-Type"]=t),e&&(n.Cookie=e),n},o={getProfile:async e=>{let t=(0,a.b)("GET",i),n=l(e,""),o=await fetch(t,{cache:"no-store",headers:n,credentials:"include"});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error((0,s.i_)(e,"ไม่สามารถดึงข้อมูลร้านค้าได้"))}return(0,s.hH)(await o.json())},updateProfile:async(e,t,n)=>{let o=(0,a.b)("PUT",i),c=l(t);n&&(c["X-CSRF-Token"]=n);let r=await fetch(o,{method:"PUT",headers:c,credentials:"include",body:JSON.stringify(e)});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error((0,s.i_)(e,"ไม่สามารถอัปเดตข้อมูลร้านค้าได้"))}return(0,s.hH)(await r.json())}}},5105:function(e,t,n){"use strict";var a,s;n.d(t,{M:function(){return a}}),(s=a||(a={})).Pending="Pending",s.Cooking="Cooking",s.Served="Served",s.Cancelled="Cancelled"},7806:function(e,t,n){"use strict";n.d(t,{S:function(){return a}});let a=e=>{if(!(null==e?void 0:e.length))return[];let t=new Map;for(let x of e){var n,a,s,i,l,o,c,r,d;let e=(null===(n=x.details)||void 0===n?void 0:n.length)?JSON.stringify(x.details.map(e=>({n:e.detail_name,p:e.extra_price})).sort((e,t)=>e.n.localeCompare(t.n))):"[]",f=(null!==(s=x.notes)&&void 0!==s?s:"").trim().toLowerCase(),p=String(null!==(i=x.status)&&void 0!==i?i:""),m=null!==(o=null!==(l=null===(a=x.product)||void 0===a?void 0:a.id)&&void 0!==l?l:x.product_id)&&void 0!==o?o:"unknown",h="".concat(m,"|").concat(e,"|").concat(f,"|").concat(p),u=t.get(h);if(u){u.quantity+=Number(x.quantity),u.total_price+=Number(null!==(c=x.total_price)&&void 0!==c?c:0),u.originalItems.push(x);continue}let j={...x,id:String(null!==(r=null==x?void 0:x.id)&&void 0!==r?r:h),quantity:Number(x.quantity),total_price:Number(null!==(d=x.total_price)&&void 0!==d?d:0),originalItems:[x]};t.set(h,j)}return Array.from(t.values())}}},function(e){e.O(0,[253,1522,3418,742,9486,4252,8651,4159,3831,2224,3248,2401,19,6905,924,7884,9385,4572,2971,2117,1744],function(){return e(e.s=12873)}),_N_E=e.O()}]);