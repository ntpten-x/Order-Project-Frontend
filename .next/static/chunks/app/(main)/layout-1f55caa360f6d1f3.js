(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4095],{59339:function(e,t,r){Promise.resolve().then(r.bind(r,30736))},30736:function(e,t,r){"use strict";r.d(t,{CartProvider:function(){return u},j:function(){return o}});var i=r(57437),n=r(2265);let a=(0,n.createContext)(void 0),u=e=>{let{children:t}=e,[r,u]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=localStorage.getItem("shopping_cart");if(e)try{u(JSON.parse(e))}catch(e){console.error("Failed to parse cart from local storage",e)}},[]),(0,n.useEffect)(()=>{localStorage.setItem("shopping_cart",JSON.stringify(r))},[r]);let o=(0,n.useCallback)(e=>{u(t=>t.find(t=>t.ingredient.id===e.id)?t.map(t=>t.ingredient.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{ingredient:e,quantity:1}])},[]),s=(0,n.useCallback)(e=>{u(t=>t.filter(t=>t.ingredient.id!==e))},[]),c=(0,n.useCallback)((e,t)=>{if(t<=0){s(e);return}u(r=>r.map(r=>r.ingredient.id===e?{...r,quantity:t}:r))},[s]),l=(0,n.useCallback)(()=>{u([])},[]),d=r.reduce((e,t)=>e+t.quantity,0),f=n.useMemo(()=>({items:r,addToCart:o,removeFromCart:s,updateQuantity:c,clearCart:l,itemCount:d}),[r,o,s,c,l,d]);return(0,i.jsx)(a.Provider,{value:f,children:t})},o=()=>{let e=(0,n.useContext)(a);if(!e)throw Error("useCart must be used within a CartProvider");return e}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=59339)}),_N_E=e.O()}]);