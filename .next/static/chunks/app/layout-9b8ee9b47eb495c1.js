(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{1742:function(e,r,t){Promise.resolve().then(t.t.bind(t,7438,23)),Promise.resolve().then(t.t.bind(t,16588,23)),Promise.resolve().then(t.t.bind(t,2778,23)),Promise.resolve().then(t.bind(t,22032)),Promise.resolve().then(t.bind(t,57059)),Promise.resolve().then(t.bind(t,20852)),Promise.resolve().then(t.bind(t,14362)),Promise.resolve().then(t.bind(t,3369)),Promise.resolve().then(t.bind(t,46252)),Promise.resolve().then(t.bind(t,23174)),Promise.resolve().then(t.bind(t,22335))},22032:function(e,r,t){"use strict";var n=t(57437),o=t(13817),i=t(19683),s=t(24783),l=t(79326),a=t(91652),c=t(50742),d=t(52539),u=t(15883),f=t(55322),g=t(40428),h=t(70464),p=t(14362),x=t(99376);let{Header:b}=o.default,{Text:v}=i.default;r.default=()=>{let{user:e,logout:r}=(0,p.a)(),t=(0,x.usePathname)();return e&&"/login"!==t?(0,n.jsxs)(b,{style:{position:"fixed",top:0,width:"100%",zIndex:1e3,height:"64px",padding:"0 24px",display:"flex",alignItems:"center",justifyContent:"space-between",background:"#0f172a",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)"},children:[(0,n.jsxs)(s.Z,{size:16,align:"center",children:[(0,n.jsx)("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 0 15px rgba(16, 185, 129, 0.3)",cursor:"pointer",transition:"transform 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"},children:(0,n.jsx)(d.Z,{style:{fontSize:"20px",color:"#fff"}})}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",lineHeight:1},children:[(0,n.jsx)(v,{strong:!0,style:{fontSize:"18px",color:"#f8fafc",fontWeight:700,letterSpacing:"-0.02em"},children:"POS System"}),(0,n.jsx)(v,{style:{fontSize:"12px",fontWeight:500,color:"#94a3b8"},children:"Management"})]})]}),e&&(0,n.jsx)(l.Z,{content:(0,n.jsxs)("div",{style:{width:240},children:[(0,n.jsx)("div",{style:{padding:"16px",background:"#f8fafc",borderRadius:"12px 12px 0 0",borderBottom:"1px solid #f1f5f9"},children:(0,n.jsxs)(s.Z,{align:"center",size:12,children:[(0,n.jsx)(a.Z,{size:48,icon:(0,n.jsx)(u.Z,{}),style:{background:"#fff",color:"#10b981",border:"2px solid #e2e8f0"}}),(0,n.jsxs)("div",{children:[(0,n.jsx)(v,{strong:!0,style:{fontSize:"15px",display:"block",color:"#1e293b"},children:(null==e?void 0:e.name)||(null==e?void 0:e.username)||"Guest"}),(0,n.jsx)(v,{type:"secondary",style:{fontSize:"12px"},children:(null==e?void 0:e.role)||"Staff"})]})]})}),(0,n.jsxs)("div",{style:{padding:"8px",display:"flex",flexDirection:"column",gap:4},children:[(0,n.jsx)(c.ZP,{type:"text",icon:(0,n.jsx)(f.Z,{}),style:{textAlign:"left",height:40,borderRadius:8,color:"#64748b"},block:!0,children:"การตั้งค่า"}),(0,n.jsx)(c.ZP,{type:"text",danger:!0,icon:(0,n.jsx)(g.Z,{}),style:{textAlign:"left",height:40,borderRadius:8},onClick:r,block:!0,children:"ออกจากระบบ"})]})]}),trigger:"click",placement:"bottomRight",overlayInnerStyle:{padding:0,borderRadius:12,boxShadow:"0 10px 40px rgba(0,0,0,0.08)"},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",padding:"6px 8px 6px 6px",borderRadius:"30px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.15)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:[(0,n.jsx)(a.Z,{size:32,icon:(0,n.jsx)(u.Z,{}),style:{background:"#334155",color:"#fff",border:"none"}}),(0,n.jsx)(v,{strong:!0,style:{fontSize:"14px",color:"#e2e8f0",paddingRight:4},children:(null==e?void 0:e.name)||(null==e?void 0:e.username)}),(0,n.jsx)(h.Z,{style:{fontSize:"10px",color:"#94a3b8"}})]})})]}):null}},57059:function(e,r,t){"use strict";t.d(r,{default:function(){return v}});var n=t(57437),o=t(99376),i=t(2265),s=t(3369),l=t(24453),a=t(97235);let c=e=>{try{let r=window.location.origin;return new URL(e,r)}catch(e){return null}},d=e=>{let r=c(e);return!!r&&r.pathname.startsWith("/api")},u=e=>{let r=c(e);return!!r&&"/api/csrf"===r.pathname},f=e=>{if(!e)return!1;let r=new Headers(e);return r.has("x-skip-loading")||r.has("x-no-loading")},g=e=>["POST","PUT","PATCH","DELETE"].includes(e.toUpperCase()),h=(e,r)=>!(!d(e)||u(e)||f(null==r?void 0:r.headers)),p=(e,r,t)=>!(!d(e)||u(e)||new Headers(null==t?void 0:t.headers).has("X-CSRF-Token"))&&(g(r),!0),x=(e,r)=>{if(!e&&!r)return"";if(e&&/^https?:\/\//i.test(e))return e;if(r&&/^https?:\/\//i.test(r))return new URL(e||"",r).toString();let t=r?r.replace(/\/$/,""):"",n=e?e.replace(/^\//,""):"";return t||n?t?n?"".concat(t,"/").concat(n):t:"/".concat(n):""},b=()=>{let{showLoading:e,hideLoading:r,loadingMessage:t}=(0,s.x)(),n=(0,i.useRef)(0),o=(0,i.useRef)(null),c=(0,i.useRef)(t);(0,i.useEffect)(()=>{c.current=t},[t]),(0,i.useEffect)(()=>{let t=()=>{n.current+=1,1===n.current&&(o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{n.current>0&&e(c.current?void 0:"กำลังโหลดข้อมูล...","network")},150))},i=()=>{n.current=Math.max(0,n.current-1),0===n.current&&(o.current&&(clearTimeout(o.current),o.current=null),r("network"))},s=window.fetch.bind(window);window.fetch=async(e,r)=>{let n=e instanceof Request?e:null,o="string"==typeof e?e:(null==n?void 0:n.url)||"",l=((null==r?void 0:r.method)||(null==n?void 0:n.method)||"GET").toUpperCase(),c=h(o,r);c&&t();try{let t=r;if(p(o,l,r)){let e=new Headers((null==r?void 0:r.headers)||(null==n?void 0:n.headers)||{}),i=await (0,a.P)();i?e.set("X-CSRF-Token",i):console.warn("[CSRF] Failed to get CSRF token for request:",l,o),t={...r,headers:e}}return await s(e,t)}finally{c&&i()}};let d=l.Z.interceptors.request.use(async e=>{let r=x(e.url,e.baseURL),n=!!r&&h(r,{headers:e.headers});return e._trackLoading=n,n&&t(),e},e=>(((null==e?void 0:e.config)||{})._trackLoading&&i(),Promise.reject(e))),u=l.Z.interceptors.response.use(e=>((e.config||{})._trackLoading&&i(),e),e=>(((null==e?void 0:e.config)||{})._trackLoading&&i(),Promise.reject(e)));return()=>{window.fetch=s,l.Z.interceptors.request.eject(d),l.Z.interceptors.response.eject(u),o.current&&(clearTimeout(o.current),o.current=null)}},[e,r])};var v=e=>{let{children:r}=e,t=(0,o.usePathname)(),{resetLoading:l}=(0,s.x)();b(),(0,i.useEffect)(()=>{l()},[t,l]);let a="/login"===t;return(0,n.jsx)("main",{style:{paddingTop:a?"0":"64px",paddingBottom:a?"0":"80px",minHeight:"100vh",background:a?"#fff":"#f8fafc",transition:"all 0.3s ease"},children:r})}},20852:function(e,r,t){"use strict";t.d(r,{default:function(){return s}});var n=t(2265);let o=!!("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e,r){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{let t=e.installing;null!=t&&(t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("[SW] New content available; please refresh."),r&&r.onUpdate&&r.onUpdate(e)):(console.log("[SW] Content cached for offline use."),r&&r.onSuccess&&r.onSuccess(e)))})}}).catch(e=>{console.error("[SW] Error during service worker registration:",e)})}function s(){return(0,n.useEffect)(()=>{var e;e={onSuccess:()=>{console.log("[SW] Service worker registered successfully")},onUpdate:()=>{console.log("[SW] New service worker available")}},"serviceWorker"in navigator&&new URL("http://localhost:3000",window.location.href).origin===window.location.origin&&window.addEventListener("load",()=>{let r="".concat("http://localhost:3000","/sw.js");o?(function(e,r){fetch(e,{headers:{"Service-Worker":"script"}}).then(t=>{let n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):i(e,r)}).catch(()=>{console.log("[SW] No internet connection found. App is running in offline mode.")})}(r,e),navigator.serviceWorker.ready.then(()=>{console.log("[SW] Service worker ready")})):i(r,e)})},[]),null}},23174:function(e,r,t){"use strict";t.d(r,{default:function(){return d}});var n=t(57437),o=t(2265),i=t(25917),s=t(99376),l=t(47213),a=t(64625),c={token:{fontSize:15,fontFamily:"'Inter', 'Sarabun', -apple-system, BlinkMacSystemFont, sans-serif",colorPrimary:"#6366F1",colorSuccess:"#10B981",colorWarning:"#F59E0B",colorError:"#EF4444",colorInfo:"#3B82F6",colorTextHeading:"#1E293B",colorText:"#1E293B",colorTextSecondary:"#64748B",colorTextDescription:"#94A3B8",colorBgContainer:"#FFFFFF",colorBgLayout:"#F8FAFC",colorBorder:"#E2E8F0",colorBorderSecondary:"#F1F5F9",borderRadius:12,borderRadiusLG:16,borderRadiusSM:8,controlHeight:44,controlHeightLG:52,controlHeightSM:36,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04)",boxShadowSecondary:"0 4px 12px rgba(0, 0, 0, 0.08)"},components:{Button:{controlHeight:48,controlHeightLG:56,controlHeightSM:40,borderRadius:12,algorithm:!0,fontSize:15,fontWeight:600,paddingInline:20},Input:{controlHeight:48,borderRadius:12,paddingInline:16},Select:{controlHeight:48,borderRadius:12},Card:{borderRadiusLG:16,paddingLG:20,boxShadowTertiary:"0 2px 8px rgba(0, 0, 0, 0.06)"},Modal:{borderRadiusLG:20,paddingContentHorizontalLG:24},Table:{borderRadius:12,headerBg:"#F8FAFC",rowHoverBg:"#F1F5F9"},Tag:{borderRadiusSM:6},Typography:{lineHeightHeading1:1.2,lineHeightHeading2:1.3,lineHeightHeading3:1.4},Layout:{headerBg:"#FFFFFF",bodyBg:"#F8FAFC",siderBg:"#FFFFFF"},Menu:{itemBorderRadius:10,itemMarginInline:8},Tabs:{itemActiveColor:"#6366F1",inkBarColor:"#6366F1"},Divider:{colorSplit:"#E2E8F0"}}},d=e=>{let{children:r}=e,t=o.useMemo(()=>(0,i.Df)(),[]),[d,u]=(0,o.useState)(!1);return(0,s.useServerInsertedHTML)(()=>{if(!d)return u(!0),(0,n.jsx)("style",{id:"antd",dangerouslySetInnerHTML:{__html:(0,i.EN)(t,!0)}})}),(0,n.jsx)(i.V9,{cache:t,children:(0,n.jsx)(l.ZP,{theme:c,children:(0,n.jsx)(a.Z,{children:r})})})}},22335:function(e,r,t){"use strict";t.d(r,{default:function(){return x}});var n=t(57437),o=t(17026),i=t(76451),s=t(51737),l=t(15658),a=t(11559),c=t(29827),d=t(2265),u=t(3369),f=t(34029);let g=()=>{let e=(0,o.y)(),r=(0,i.B)(),{showLoading:t,hideLoading:n}=(0,u.x)(),s=(0,d.useRef)(!1),l=e+r>0;return(0,d.useEffect)(()=>{if(l&&!s.current){s.current=!0,t("กำลังโหลดข้อมูล...","query");return}!l&&s.current&&(s.current=!1,n("query"))},[l,t,n]),null};function h(e){if(e instanceof Error){var r,t;return(null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)?e.response.data.message:e.message}return"string"==typeof e?e:"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ"}function p(){return new s.S({queryCache:new l.t({onError:(e,r)=>{void 0!==r.state.data&&f.ZP.error(h(e))}}),mutationCache:new a.L({onError:(e,r,t,n)=>{var o;(null===(o=n.meta)||void 0===o?void 0:o.skipErrorToast)!==!0&&f.ZP.error(h(e))}}),defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,retry:(e,r)=>{var t;let n=null==r?void 0:null===(t=r.response)||void 0===t?void 0:t.status;return(!n||!(n>=400)||!(n<500))&&e<2},retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,refetchOnReconnect:"always",networkMode:"offlineFirst"},mutations:{retry:1,retryDelay:1e3,networkMode:"offlineFirst"}}})}function x(e){let{children:r}=e,[t]=(0,d.useState)(p);return(0,n.jsxs)(c.aH,{client:t,children:[(0,n.jsx)(g,{}),r]})}}},function(e){e.O(0,[2251,2461,8024,4736,8592,1744],function(){return e(e.s=1742)}),_N_E=e.O()}]);