"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2785],{42785:function(e,t,a){a.d(t,{DR:function(){return s},mk:function(){return u},yV:function(){return d}});var o=a(29827),r=a(2265),n=a(53286),i=a(47799),c=a(2838),l=a(86198);function s(){let e=(0,o.NL)();(0,r.useEffect)(()=>{(async()=>{try{await Promise.all([e.prefetchQuery({queryKey:["products",1,20,"all"],queryFn:()=>i.R.findAll(1,20,void 0,new URLSearchParams),staleTime:3e5}),e.prefetchQuery({queryKey:["categories"],queryFn:()=>c.G.findAll(),staleTime:6e5})])}catch(e){console.debug("Prefetch failed:",e)}})()},[e])}function d(){let e=(0,o.NL)();(0,r.useEffect)(()=>{(async()=>{try{await e.prefetchQuery({queryKey:["ordersSummary",1,50,"all","all",""],queryFn:()=>n.x.getAllSummary(void 0,1,50),staleTime:3e3})}catch(e){console.debug("Order list prefetch failed:",e)}})()},[e])}function u(){let e=(0,o.NL)();(0,r.useEffect)(()=>{(async()=>{try{await e.prefetchQuery({queryKey:["orderQueue","all"],queryFn:()=>l.e.getAll(),staleTime:2e3})}catch(e){console.debug("Queue prefetch failed:",e)}})()},[e])}},2838:function(e,t,a){a.d(t,{G:function(){return i}});var o=a(2913),r=a(98170);let n="/pos/category",i={findAll:async(e,t)=>{let a=(0,o.b)("GET",n);t&&(a+="?".concat(t.toString()));let i={};e&&(i.Cookie=e);let c=await fetch(a,{cache:"no-store",credentials:"include",headers:i});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error((0,r.i_)(e,"Failed to fetch categories"))}let l=await c.json(),s=(0,r.hH)(l);if(Array.isArray(s))return s;throw Error("Invalid categories response format")},findOne:async(e,t)=>{let a=(0,o.b)("GET","".concat(n,"/").concat(e)),i={};t&&(i.Cookie=t);let c=await fetch(a,{cache:"no-store",credentials:"include",headers:i});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error((0,r.i_)(e,"Failed to fetch category"))}return(0,r.hH)(await c.json())},findOneByName:async(e,t)=>{let a=(0,o.b)("GET","".concat(n,"/name/").concat(e)),i={};t&&(i.Cookie=t);let c=await fetch(a,{cache:"no-store",credentials:"include",headers:i});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error((0,r.i_)(e,"Failed to fetch category by name"))}return(0,r.hH)(await c.json())},create:async(e,t,a)=>{let i=(0,o.b)("POST",n),c={"Content-Type":"application/json"};t&&(c.Cookie=t),a&&(c["X-CSRF-Token"]=a);let l=await fetch(i,{method:"POST",headers:c,body:JSON.stringify(e),credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,r.i_)(e,"Failed to create category"))}return(0,r.hH)(await l.json())},update:async(e,t,a,i)=>{let c=(0,o.b)("PUT","".concat(n,"/").concat(e)),l={"Content-Type":"application/json"};a&&(l.Cookie=a),i&&(l["X-CSRF-Token"]=i);let s=await fetch(c,{method:"PUT",headers:l,body:JSON.stringify(t),credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error((0,r.i_)(e,"Failed to update category"))}return(0,r.hH)(await s.json())},delete:async(e,t,a)=>{let i=(0,o.b)("DELETE","".concat(n,"/").concat(e)),c={};t&&(c.Cookie=t),a&&(c["X-CSRF-Token"]=a);let l=await fetch(i,{method:"DELETE",headers:c,credentials:"include"});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error((0,r.i_)(e,"Failed to delete category"))}}}},86198:function(e,t,a){a.d(t,{e:function(){return l}});var o=a(2913),r=a(71567),n=a(97235);let i=r.q.POS.ORDER_QUEUE,c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/json",a={};return t&&(a["Content-Type"]=t),e&&(a.Cookie=e),a},l={getAll:async(e,t)=>{let a=new URLSearchParams;t&&a.append("status",t);let r=a.toString()?"".concat(i,"?").concat(a.toString()):i,n=(0,o.b)("GET",r),l=c(e,""),s=await fetch(n,{cache:"no-store",headers:l,credentials:"include"});if(!s.ok){var d;let e=await s.json().catch(()=>({}));throw Error((null===(d=e.error)||void 0===d?void 0:d.message)||e.message||"ไม่สามารถดึงข้อมูลคิวได้")}let u=await s.json();return u.success&&Array.isArray(u.data)?u.data:Array.isArray(u)?u:[]},addToQueue:async(e,t)=>{let a=(0,o.b)("POST",i),r=c(t),l=await (0,n.P)();l&&(r["X-CSRF-Token"]=l);let s=await fetch(a,{method:"POST",headers:r,credentials:"include",body:JSON.stringify({orderId:e.orderId,priority:e.priority||"Normal"})});if(!s.ok){var d;let e=await s.json().catch(()=>({}));throw Error((null===(d=e.error)||void 0===d?void 0:d.message)||e.message||"ไม่สามารถเพิ่มออเดอร์เข้าคิวได้")}let u=await s.json();return u.success&&u.data?u.data:u},updateStatus:async(e,t,a)=>{let r=(0,o.b)("PATCH","".concat(i,"/").concat(e,"/status")),l=c(a),s=await (0,n.P)();s&&(l["X-CSRF-Token"]=s);let d=await fetch(r,{method:"PATCH",headers:l,credentials:"include",body:JSON.stringify(t)});if(!d.ok){var u;let e=await d.json().catch(()=>({}));throw Error((null===(u=e.error)||void 0===u?void 0:u.message)||e.message||"ไม่สามารถอัปเดตสถานะได้")}let h=await d.json();return h.success&&h.data?h.data:h},removeFromQueue:async(e,t)=>{let a=(0,o.b)("DELETE","".concat(i,"/").concat(e)),r=c(t,""),l=await (0,n.P)();l&&(r["X-CSRF-Token"]=l);let s=await fetch(a,{method:"DELETE",headers:r,credentials:"include"});if(!s.ok){var d;let e=await s.json().catch(()=>({}));throw Error((null===(d=e.error)||void 0===d?void 0:d.message)||e.message||"ไม่สามารถลบออกจากคิวได้")}},reorderQueue:async e=>{let t=(0,o.b)("POST","".concat(i,"/reorder")),a=c(e),r=await (0,n.P)();r&&(a["X-CSRF-Token"]=r);let l=await fetch(t,{method:"POST",headers:a,credentials:"include"});if(!l.ok){var s;let e=await l.json().catch(()=>({}));throw Error((null===(s=e.error)||void 0===s?void 0:s.message)||e.message||"ไม่สามารถจัดเรียงคิวใหม่ได้")}}}},47799:function(e,t,a){a.d(t,{R:function(){return d}});var o=a(2913),r=a(71567),n=a(20019);let i=n.Ryn({id:n.Z_8(),product_name:n.Z_8(),display_name:n.Z_8(),description:n.Z_8().optional().or(n.Z_8()),price:n.Rxh().or(n.Z_8().transform(e=>Number(e))),price_delivery:n.Rxh().or(n.Z_8().transform(e=>Number(e))).optional(),category_id:n.Z_8(),unit_id:n.Z_8(),img_url:n.Z_8().nullable().optional(),create_date:n.Z_8().or(n.hTZ()).transform(e=>new Date(e)),update_date:n.Z_8().or(n.hTZ()).transform(e=>new Date(e)),is_active:n.O72().optional().default(!0),category:n.YjB().optional(),unit:n.YjB().optional()}).transform(e=>{var t;return{...e,price_delivery:null!==(t=e.price_delivery)&&void 0!==t?t:e.price}}),c=n.Ryn({data:n.IXX(i),total:n.Rxh(),page:n.Rxh(),last_page:n.Rxh()});var l=a(98170);let s=r.q.POS.PRODUCTS,d={findAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=(0,o.b)("GET",s),i=new URLSearchParams(r||"");i.append("page",e.toString()),i.append("limit",t.toString()),n+="?".concat(i.toString());let d={};a&&(d.Cookie=a);let u=await fetch(n,{cache:"no-store",credentials:"include",headers:d});if(!u.ok){let e=await u.json().catch(()=>({}));throw Error((0,l.i_)(e,"Failed to fetch products"))}let h=await u.json(),f=(0,l.XO)(h);return c.parse(f)},findOne:async(e,t)=>{let a=(0,o.b)("GET","".concat(s,"/").concat(e)),r={};t&&(r.Cookie=t);let n=await fetch(a,{cache:"no-store",credentials:"include",headers:r});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error((0,l.i_)(e,"Failed to fetch product"))}let c=await n.json();return i.parse((0,l.hH)(c))},findOneByName:async(e,t)=>{let a=(0,o.b)("GET","".concat(s,"/name/").concat(e)),r={};t&&(r.Cookie=t);let n=await fetch(a,{cache:"no-store",credentials:"include",headers:r});if(!n.ok){let e=await n.json().catch(()=>({}));throw Error((0,l.i_)(e,"Failed to fetch product by name"))}let c=await n.json();return i.parse((0,l.hH)(c))},create:async(e,t,a)=>{let r=(0,o.b)("POST",s),n={"Content-Type":"application/json"};t&&(n.Cookie=t),a&&(n["X-CSRF-Token"]=a);let i=await fetch(r,{method:"POST",headers:n,body:JSON.stringify(e),credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,l.i_)(e,"Failed to create product"))}let c=await i.json();return(0,l.hH)(c)},update:async(e,t,a,r)=>{let n=(0,o.b)("PUT","".concat(s,"/").concat(e)),i={"Content-Type":"application/json"};a&&(i.Cookie=a),r&&(i["X-CSRF-Token"]=r);let c=await fetch(n,{method:"PUT",headers:i,body:JSON.stringify(t),credentials:"include"});if(!c.ok){let e=await c.json().catch(()=>({}));throw Error((0,l.i_)(e,"Failed to update product"))}let d=await c.json();return(0,l.hH)(d)},delete:async(e,t,a)=>{let r=(0,o.b)("DELETE","".concat(s,"/").concat(e)),n={};t&&(n.Cookie=t),a&&(n["X-CSRF-Token"]=a);let i=await fetch(r,{method:"DELETE",headers:n,credentials:"include"});if(!i.ok){let e=await i.json().catch(()=>({}));throw Error((0,l.i_)(e,"Failed to delete product"))}}}},97235:function(e,t,a){a.d(t,{P:function(){return c}});var o=a(5447);let r=null,n=0,i=null;async function c(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Date.now();return!e&&r&&t-n<6e5?r:(i||(i=o.O.getCsrfToken().then(e=>(r=e||"",n=Date.now(),r)).finally(()=>{i=null})),i)}}}]);