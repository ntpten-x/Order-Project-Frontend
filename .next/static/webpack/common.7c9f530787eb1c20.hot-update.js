"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("common",{

/***/ "(app-pages-browser)/./src/services/pos/orders.service.ts":
/*!********************************************!*\
  !*** ./src/services/pos/orders.service.ts ***!
  \********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ordersService: function() { return /* binding */ ordersService; }\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(app-pages-browser)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/proxy-utils */ \"(app-pages-browser)/./src/lib/proxy-utils.ts\");\n/* harmony import */ var _config_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../config/api */ \"(app-pages-browser)/./src/config/api.ts\");\n/* harmony import */ var _schemas_api_pos_orders_schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../schemas/api/pos/orders.schema */ \"(app-pages-browser)/./src/schemas/api/pos/orders.schema.ts\");\n/* harmony import */ var _utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/api/backendResponse */ \"(app-pages-browser)/./src/utils/api/backendResponse.ts\");\n\n\n\n\n\nconst BASE_PATH = _config_api__WEBPACK_IMPORTED_MODULE_1__.API_ROUTES.POS.ORDERS;\nconst getHeaders = function(cookie) {\n    let contentType = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : \"application/json\";\n    const headers = {};\n    if (contentType) headers[\"Content-Type\"] = contentType;\n    if (cookie) headers.Cookie = cookie;\n    return headers;\n};\nconst ordersService = {\n    getAll: async function(cookie) {\n        let page = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1, limit = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 50, status = arguments.length > 3 ? arguments[3] : void 0, type = arguments.length > 4 ? arguments[4] : void 0, query = arguments.length > 5 ? arguments[5] : void 0;\n        // Construct URL with query parameters manually or use URLSearchParams\n        const queryParams = new URLSearchParams({\n            page: page.toString(),\n            limit: limit.toString(),\n            ...status && {\n                status\n            },\n            ...type && {\n                type\n            },\n            ...query && {\n                q: query\n            }\n        });\n        const endpoint = \"\".concat(BASE_PATH, \"?\").concat(queryParams.toString());\n        const url = (0,_lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__.getProxyUrl)(\"GET\", endpoint);\n        const headers = getHeaders(cookie, \"\");\n        const response = await fetch(url, {\n            cache: \"no-store\",\n            headers,\n            credentials: \"include\"\n        });\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>({}));\n            throw new Error((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.getBackendErrorMessage)(errorData, \"ไม่สามารถดึงข้อมูลออเดอร์ได้\"));\n        }\n        const json = await response.json();\n        try {\n            return _schemas_api_pos_orders_schema__WEBPACK_IMPORTED_MODULE_2__.OrdersResponseSchema.parse((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.normalizeBackendPaginated)(json));\n        } catch (error) {\n            console.error(\"Zod Validation Error in ordersService.getAll:\", error);\n            if (error instanceof zod__WEBPACK_IMPORTED_MODULE_4__.ZodError) {\n                console.error(\"Zod Issues:\", error.issues);\n            }\n            throw error;\n        }\n    },\n    getAllSummary: async function(cookie) {\n        let page = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1, limit = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 50, status = arguments.length > 3 ? arguments[3] : void 0, type = arguments.length > 4 ? arguments[4] : void 0, query = arguments.length > 5 ? arguments[5] : void 0;\n        const queryParams = new URLSearchParams({\n            page: page.toString(),\n            limit: limit.toString(),\n            ...status && {\n                status\n            },\n            ...type && {\n                type\n            },\n            ...query && {\n                q: query\n            }\n        });\n        const endpoint = \"\".concat(BASE_PATH, \"/summary?\").concat(queryParams.toString());\n        const url = (0,_lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__.getProxyUrl)(\"GET\", endpoint);\n        const headers = getHeaders(cookie, \"\");\n        const response = await fetch(url, {\n            cache: \"no-store\",\n            headers,\n            credentials: \"include\"\n        });\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>({}));\n            throw new Error((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.getBackendErrorMessage)(errorData, \"ไม่สามารถดึงข้อมูลออเดอร์ได้\"));\n        }\n        const json = await response.json();\n        try {\n            return _schemas_api_pos_orders_schema__WEBPACK_IMPORTED_MODULE_2__.OrdersSummaryResponseSchema.parse((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.normalizeBackendPaginated)(json));\n        } catch (error) {\n            console.error(\"Zod Validation Error in ordersService.getAllSummary:\", error);\n            if (error instanceof zod__WEBPACK_IMPORTED_MODULE_4__.ZodError) {\n                console.error(\"Zod Issues:\", error.issues);\n            }\n            throw error;\n        }\n    },\n    getStats: async (cookie)=>{\n        const url = (0,_lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__.getProxyUrl)(\"GET\", _config_api__WEBPACK_IMPORTED_MODULE_1__.API_ROUTES.POS.CHANNELS.STATS);\n        const headers = getHeaders(cookie, \"\");\n        const response = await fetch(url, {\n            cache: \"no-store\",\n            headers,\n            credentials: \"include\"\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"Order Stats Backend Error:\", errorText);\n            const errorData = await JSON.parse(errorText).catch(()=>({}));\n            throw new Error((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.getBackendErrorMessage)(errorData, \"ไม่สามารถดึงข้อมูลสถิติได้\"));\n        }\n        const json = await response.json();\n        return (0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.unwrapBackendData)(json);\n    },\n    getById: async (id, cookie)=>{\n        const url = (0,_lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__.getProxyUrl)(\"GET\", \"\".concat(BASE_PATH, \"/\").concat(id));\n        const headers = getHeaders(cookie, \"\");\n        const response = await fetch(url, {\n            cache: \"no-store\",\n            headers,\n            credentials: \"include\"\n        });\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>({}));\n            throw new Error((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.getBackendErrorMessage)(errorData, \"ไม่สามารถดึงข้อมูลออเดอร์ได้\"));\n        }\n        const json = await response.json();\n        try {\n            const payload = (0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.unwrapBackendData)(json);\n            if (Array.isArray(payload)) {\n                if (payload.length === 0) throw new Error(\"Order not found\");\n                return _schemas_api_pos_orders_schema__WEBPACK_IMPORTED_MODULE_2__.SalesOrderSchema.parse(payload[0]);\n            }\n            return _schemas_api_pos_orders_schema__WEBPACK_IMPORTED_MODULE_2__.SalesOrderSchema.parse(payload);\n        } catch (error) {\n            console.error(\"Zod Validation Error in ordersService.getById:\", error);\n            if (error instanceof zod__WEBPACK_IMPORTED_MODULE_4__.ZodError) {\n                console.error(\"Zod Issues:\", error.issues);\n            }\n            throw error;\n        }\n    },\n    create: async (data, cookie, csrfToken)=>{\n        const url = (0,_lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__.getProxyUrl)(\"POST\", \"\".concat(BASE_PATH));\n        const headers = getHeaders(cookie);\n        if (csrfToken) headers[\"X-CSRF-Token\"] = csrfToken;\n        const response = await fetch(url, {\n            method: \"POST\",\n            headers,\n            credentials: \"include\",\n            body: JSON.stringify(data)\n        });\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>({}));\n            throw new Error((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.getBackendErrorMessage)(errorData, \"ไม่สามารถสร้างออเดอร์ได้\"));\n        }\n        return (0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.unwrapBackendData)(await response.json());\n    },\n    update: async (id, data, cookie, csrfToken)=>{\n        const url = (0,_lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__.getProxyUrl)(\"PUT\", \"\".concat(BASE_PATH, \"/\").concat(id));\n        const headers = getHeaders(cookie);\n        if (csrfToken) headers[\"X-CSRF-Token\"] = csrfToken;\n        const response = await fetch(url, {\n            method: \"PUT\",\n            headers,\n            credentials: \"include\",\n            body: JSON.stringify(data)\n        });\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>({}));\n            throw new Error((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.getBackendErrorMessage)(errorData, \"ไม่สามารถแก้ไขออเดอร์ได้\"));\n        }\n        return (0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.unwrapBackendData)(await response.json());\n    },\n    delete: async (id, cookie, csrfToken)=>{\n        const url = (0,_lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__.getProxyUrl)(\"DELETE\", \"\".concat(BASE_PATH, \"/\").concat(id));\n        const headers = getHeaders(cookie, \"\");\n        if (csrfToken) headers[\"X-CSRF-Token\"] = csrfToken;\n        const response = await fetch(url, {\n            method: \"DELETE\",\n            headers,\n            credentials: \"include\"\n        });\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>({}));\n            throw new Error((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.getBackendErrorMessage)(errorData, \"ไม่สามารถลบออเดอร์ได้\"));\n        }\n    },\n    updateItemStatus: async (itemId, status, cookie, csrfToken)=>{\n        const url = (0,_lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__.getProxyUrl)(\"PATCH\", \"\".concat(BASE_PATH, \"/items/\").concat(itemId, \"/status\"));\n        const headers = getHeaders(cookie);\n        if (csrfToken) headers[\"X-CSRF-Token\"] = csrfToken;\n        const response = await fetch(url, {\n            method: \"PATCH\",\n            headers,\n            credentials: \"include\",\n            body: JSON.stringify({\n                status\n            })\n        });\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>({}));\n            throw new Error((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.getBackendErrorMessage)(errorData, \"ไม่สามารถอัปเดตสถานะรายการได้\"));\n        }\n    },\n    getItems: async (status, cookie)=>{\n        const query = status ? \"?status=\".concat(status) : \"\";\n        const url = (0,_lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__.getProxyUrl)(\"GET\", \"\".concat(BASE_PATH, \"/items\").concat(query));\n        const headers = getHeaders(cookie, \"\");\n        const response = await fetch(url, {\n            cache: \"no-store\",\n            headers,\n            credentials: \"include\"\n        });\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>({}));\n            throw new Error((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.getBackendErrorMessage)(errorData, \"ไม่สามารถดึงข้อมูลรายการได้\"));\n        }\n        const payload = (0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.unwrapBackendData)(await response.json());\n        if (Array.isArray(payload)) return payload;\n        if (payload && typeof payload === \"object\" && \"data\" in payload) {\n            const data = payload.data;\n            if (Array.isArray(data)) return data;\n        }\n        return payload;\n    },\n    addItem: async (orderId, itemData, cookie, csrfToken)=>{\n        const url = (0,_lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__.getProxyUrl)(\"POST\", \"\".concat(BASE_PATH, \"/\").concat(orderId, \"/items\"));\n        const headers = getHeaders(cookie);\n        if (csrfToken) headers[\"X-CSRF-Token\"] = csrfToken;\n        const response = await fetch(url, {\n            method: \"POST\",\n            headers,\n            credentials: \"include\",\n            body: JSON.stringify(itemData)\n        });\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>({}));\n            throw new Error((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.getBackendErrorMessage)(errorData, \"ไม่สามารถเพิ่มรายการได้\"));\n        }\n        return (0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.unwrapBackendData)(await response.json());\n    },\n    updateItem: async (itemId, data, cookie, csrfToken)=>{\n        const url = (0,_lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__.getProxyUrl)(\"PUT\", \"\".concat(BASE_PATH, \"/items/\").concat(itemId));\n        const headers = getHeaders(cookie, \"application/json\");\n        if (csrfToken) headers[\"X-CSRF-Token\"] = csrfToken;\n        const response = await fetch(url, {\n            method: \"PUT\",\n            headers,\n            credentials: \"include\",\n            body: JSON.stringify(data)\n        });\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>({}));\n            throw new Error((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.getBackendErrorMessage)(errorData, \"ไม่สามารถแก้ไขรายการได้\"));\n        }\n        return (0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.unwrapBackendData)(await response.json());\n    },\n    deleteItem: async (itemId, cookie, csrfToken)=>{\n        const url = (0,_lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__.getProxyUrl)(\"DELETE\", \"\".concat(BASE_PATH, \"/items/\").concat(itemId));\n        const headers = getHeaders(cookie, \"\");\n        if (csrfToken) headers[\"X-CSRF-Token\"] = csrfToken;\n        const response = await fetch(url, {\n            method: \"DELETE\",\n            headers,\n            credentials: \"include\"\n        });\n        if (!response.ok) {\n            const errorData = await response.json().catch(()=>({}));\n            throw new Error((0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.getBackendErrorMessage)(errorData, \"ไม่สามารถลบรายการได้\"));\n        }\n        return (0,_utils_api_backendResponse__WEBPACK_IMPORTED_MODULE_3__.unwrapBackendData)(await response.json());\n    },\n    updateStatus: async (orderId, status, csrfToken)=>{\n        const headers = {\n            \"Content-Type\": \"application/json\"\n        };\n        if (csrfToken) headers[\"X-CSRF-Token\"] = csrfToken;\n        // Use existing update method or create specific endpoint if backend supports patch status\n        // Checking backend controller... usually generic update works if fields allowed\n        // But let's assume update(id, { status }) works\n        const url = (0,_lib_proxy_utils__WEBPACK_IMPORTED_MODULE_0__.getProxyUrl)(\"PUT\", \"\".concat(BASE_PATH, \"/\").concat(orderId));\n        const response = await fetch(url, {\n            method: \"PUT\",\n            headers,\n            body: JSON.stringify({\n                status\n            }),\n            credentials: \"include\"\n        });\n        if (!response.ok) {\n            throw new Error(\"Failed to update status\");\n        }\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zZXJ2aWNlcy9wb3Mvb3JkZXJzLnNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQytCO0FBQ3FCO0FBRU47QUFDNEU7QUFDSDtBQUV2SCxNQUFNUyxZQUFZUCxtREFBVUEsQ0FBQ1EsR0FBRyxDQUFDQyxNQUFNO0FBRXZDLE1BQU1DLGFBQWEsU0FBQ0M7UUFBaUJDLCtFQUFzQjtJQUN2RCxNQUFNQyxVQUFrQyxDQUFDO0lBQ3pDLElBQUlELGFBQWFDLE9BQU8sQ0FBQyxlQUFlLEdBQUdEO0lBQzNDLElBQUlELFFBQVFFLFFBQVFDLE1BQU0sR0FBR0g7SUFDN0IsT0FBT0U7QUFDWDtBQUVPLE1BQU1FLGdCQUFnQjtJQUN6QkMsUUFBUSxlQUFPTDtZQUFpQk0sd0VBQWUsR0FBR0MseUVBQWdCLElBQUlDLHVEQUFpQkMscURBQWVDO1FBQ2xHLHNFQUFzRTtRQUN0RSxNQUFNQyxjQUFjLElBQUlDLGdCQUFnQjtZQUNwQ04sTUFBTUEsS0FBS08sUUFBUTtZQUNuQk4sT0FBT0EsTUFBTU0sUUFBUTtZQUNyQixHQUFJTCxVQUFVO2dCQUFFQTtZQUFPLENBQUM7WUFDeEIsR0FBSUMsUUFBUTtnQkFBRUE7WUFBSyxDQUFDO1lBQ3BCLEdBQUlDLFNBQVM7Z0JBQUVJLEdBQUdKO1lBQU0sQ0FBQztRQUM3QjtRQUNBLE1BQU1LLFdBQVcsR0FBZ0JKLE9BQWJmLFdBQVUsS0FBMEIsT0FBdkJlLFlBQVlFLFFBQVE7UUFDckQsTUFBTUcsTUFBTTVCLDZEQUFXQSxDQUFDLE9BQU8yQjtRQUMvQixNQUFNYixVQUFVSCxXQUFXQyxRQUFRO1FBRW5DLE1BQU1pQixXQUFXLE1BQU1DLE1BQU1GLEtBQU07WUFDL0JHLE9BQU87WUFDUGpCO1lBQ0FrQixhQUFhO1FBQ2pCO1FBQ0EsSUFBSSxDQUFDSCxTQUFTSSxFQUFFLEVBQUU7WUFDZCxNQUFNQyxZQUFZLE1BQU1MLFNBQVNNLElBQUksR0FBR0MsS0FBSyxDQUFDLElBQU8sRUFB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QUFXQSxDQUFDLE9BQU8sR0FBZ0JtRSxPQUFiM0QsV0FBVSxLQUFXLE9BQVIyRDtRQUMvQyxNQUFNdEMsV0FBVyxNQUFNQyxNQUFNRixLQUFNO1lBQy9COEIsUUFBUTtZQUNSNUM7WUFDQTZDLE1BQU1YLEtBQUtZLFNBQVMsQ0FBQztnQkFBRXhDO1lBQU87WUFDOUJZLGFBQWE7UUFDakI7UUFFQSxJQUFJLENBQUNILFNBQVNJLEVBQUUsRUFBRTtZQUNkLE1BQU0sSUFBSUksTUFBTTtRQUNwQjtJQUNKO0FBQ0osRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvc2VydmljZXMvcG9zL29yZGVycy5zZXJ2aWNlLnRzPzQxYWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2FsZXNPcmRlciwgU2FsZXNPcmRlclN1bW1hcnksIENyZWF0ZVNhbGVzT3JkZXJEVE8sIENyZWF0ZU9yZGVySXRlbURUTyB9IGZyb20gXCIuLi8uLi90eXBlcy9hcGkvcG9zL3NhbGVzT3JkZXJcIjtcbmltcG9ydCB7IFpvZEVycm9yIH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgZ2V0UHJveHlVcmwgfSBmcm9tIFwiLi4vLi4vbGliL3Byb3h5LXV0aWxzXCI7XG5pbXBvcnQgeyBTYWxlc09yZGVySXRlbSB9IGZyb20gXCIuLi8uLi90eXBlcy9hcGkvcG9zL3NhbGVzT3JkZXJJdGVtXCI7XG5pbXBvcnQgeyBBUElfUk9VVEVTIH0gZnJvbSBcIi4uLy4uL2NvbmZpZy9hcGlcIjtcbmltcG9ydCB7IE9yZGVyc1Jlc3BvbnNlU2NoZW1hLCBPcmRlcnNTdW1tYXJ5UmVzcG9uc2VTY2hlbWEsIFNhbGVzT3JkZXJTY2hlbWEgfSBmcm9tIFwiLi4vLi4vc2NoZW1hcy9hcGkvcG9zL29yZGVycy5zY2hlbWFcIjtcbmltcG9ydCB7IGdldEJhY2tlbmRFcnJvck1lc3NhZ2UsIG5vcm1hbGl6ZUJhY2tlbmRQYWdpbmF0ZWQsIHVud3JhcEJhY2tlbmREYXRhIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2FwaS9iYWNrZW5kUmVzcG9uc2VcIjtcblxuY29uc3QgQkFTRV9QQVRIID0gQVBJX1JPVVRFUy5QT1MuT1JERVJTO1xuXG5jb25zdCBnZXRIZWFkZXJzID0gKGNvb2tpZT86IHN0cmluZywgY29udGVudFR5cGU6IHN0cmluZyA9IFwiYXBwbGljYXRpb24vanNvblwiKTogSGVhZGVyc0luaXQgPT4ge1xuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICBpZiAoY29udGVudFR5cGUpIGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPSBjb250ZW50VHlwZTtcbiAgICBpZiAoY29va2llKSBoZWFkZXJzLkNvb2tpZSA9IGNvb2tpZTtcbiAgICByZXR1cm4gaGVhZGVycztcbn07XG5cbmV4cG9ydCBjb25zdCBvcmRlcnNTZXJ2aWNlID0ge1xuICAgIGdldEFsbDogYXN5bmMgKGNvb2tpZT86IHN0cmluZywgcGFnZTogbnVtYmVyID0gMSwgbGltaXQ6IG51bWJlciA9IDUwLCBzdGF0dXM/OiBzdHJpbmcsIHR5cGU/OiBzdHJpbmcsIHF1ZXJ5Pzogc3RyaW5nKTogUHJvbWlzZTx7IGRhdGE6IFNhbGVzT3JkZXJbXSwgdG90YWw6IG51bWJlciwgcGFnZTogbnVtYmVyLCBsYXN0X3BhZ2U6IG51bWJlciB9PiA9PiB7XG4gICAgICAgIC8vIENvbnN0cnVjdCBVUkwgd2l0aCBxdWVyeSBwYXJhbWV0ZXJzIG1hbnVhbGx5IG9yIHVzZSBVUkxTZWFyY2hQYXJhbXNcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgIHBhZ2U6IHBhZ2UudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIGxpbWl0OiBsaW1pdC50b1N0cmluZygpLFxuICAgICAgICAgICAgLi4uKHN0YXR1cyAmJiB7IHN0YXR1cyB9KSxcbiAgICAgICAgICAgIC4uLih0eXBlICYmIHsgdHlwZSB9KSxcbiAgICAgICAgICAgIC4uLihxdWVyeSAmJiB7IHE6IHF1ZXJ5IH0pXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBlbmRwb2ludCA9IGAke0JBU0VfUEFUSH0/JHtxdWVyeVBhcmFtcy50b1N0cmluZygpfWA7XG4gICAgICAgIGNvbnN0IHVybCA9IGdldFByb3h5VXJsKFwiR0VUXCIsIGVuZHBvaW50KTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoY29va2llLCBcIlwiKTtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCEsIHtcbiAgICAgICAgICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZ2V0QmFja2VuZEVycm9yTWVzc2FnZShlcnJvckRhdGEsIFwi4LmE4Lih4LmI4Liq4Liy4Lih4Liy4Lij4LiW4LiU4Li24LiH4LiC4LmJ4Lit4Lih4Li54Lil4Lit4Lit4LmA4LiU4Lit4Lij4LmM4LmE4LiU4LmJXCIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gT3JkZXJzUmVzcG9uc2VTY2hlbWEucGFyc2Uobm9ybWFsaXplQmFja2VuZFBhZ2luYXRlZDxTYWxlc09yZGVyPihqc29uKSkgYXMgdW5rbm93biBhcyB7IGRhdGE6IFNhbGVzT3JkZXJbXSwgdG90YWw6IG51bWJlciwgcGFnZTogbnVtYmVyLCBsYXN0X3BhZ2U6IG51bWJlciB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlpvZCBWYWxpZGF0aW9uIEVycm9yIGluIG9yZGVyc1NlcnZpY2UuZ2V0QWxsOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBab2RFcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJab2QgSXNzdWVzOlwiLCBlcnJvci5pc3N1ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0QWxsU3VtbWFyeTogYXN5bmMgKFxuICAgICAgICBjb29raWU/OiBzdHJpbmcsXG4gICAgICAgIHBhZ2U6IG51bWJlciA9IDEsXG4gICAgICAgIGxpbWl0OiBudW1iZXIgPSA1MCxcbiAgICAgICAgc3RhdHVzPzogc3RyaW5nLFxuICAgICAgICB0eXBlPzogc3RyaW5nLFxuICAgICAgICBxdWVyeT86IHN0cmluZ1xuICAgICk6IFByb21pc2U8eyBkYXRhOiBTYWxlc09yZGVyU3VtbWFyeVtdLCB0b3RhbDogbnVtYmVyLCBwYWdlOiBudW1iZXIsIGxhc3RfcGFnZT86IG51bWJlciB9PiA9PiB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICBwYWdlOiBwYWdlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBsaW1pdDogbGltaXQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIC4uLihzdGF0dXMgJiYgeyBzdGF0dXMgfSksXG4gICAgICAgICAgICAuLi4odHlwZSAmJiB7IHR5cGUgfSksXG4gICAgICAgICAgICAuLi4ocXVlcnkgJiYgeyBxOiBxdWVyeSB9KVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHtCQVNFX1BBVEh9L3N1bW1hcnk/JHtxdWVyeVBhcmFtcy50b1N0cmluZygpfWA7XG4gICAgICAgIGNvbnN0IHVybCA9IGdldFByb3h5VXJsKFwiR0VUXCIsIGVuZHBvaW50KTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoY29va2llLCBcIlwiKTtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCEsIHtcbiAgICAgICAgICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZ2V0QmFja2VuZEVycm9yTWVzc2FnZShlcnJvckRhdGEsIFwi4LmE4Lih4LmI4Liq4Liy4Lih4Liy4Lij4LiW4LiU4Li24LiH4LiC4LmJ4Lit4Lih4Li54Lil4Lit4Lit4LmA4LiU4Lit4Lij4LmM4LmE4LiU4LmJXCIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gT3JkZXJzU3VtbWFyeVJlc3BvbnNlU2NoZW1hLnBhcnNlKG5vcm1hbGl6ZUJhY2tlbmRQYWdpbmF0ZWQ8U2FsZXNPcmRlclN1bW1hcnk+KGpzb24pKSBhcyB1bmtub3duIGFzIHsgZGF0YTogU2FsZXNPcmRlclN1bW1hcnlbXSwgdG90YWw6IG51bWJlciwgcGFnZTogbnVtYmVyLCBsYXN0X3BhZ2U/OiBudW1iZXIgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJab2QgVmFsaWRhdGlvbiBFcnJvciBpbiBvcmRlcnNTZXJ2aWNlLmdldEFsbFN1bW1hcnk6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFpvZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlpvZCBJc3N1ZXM6XCIsIGVycm9yLmlzc3Vlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXRTdGF0czogYXN5bmMgKGNvb2tpZT86IHN0cmluZyk6IFByb21pc2U8eyBkaW5lSW46IG51bWJlciwgdGFrZWF3YXk6IG51bWJlciwgZGVsaXZlcnk6IG51bWJlciwgdG90YWw6IG51bWJlciB9PiA9PiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGdldFByb3h5VXJsKFwiR0VUXCIsIEFQSV9ST1VURVMuUE9TLkNIQU5ORUxTLlNUQVRTKTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoY29va2llLCBcIlwiKTtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCEsIHtcbiAgICAgICAgICAgIGNhY2hlOiBcIm5vLXN0b3JlXCIsXG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiT3JkZXIgU3RhdHMgQmFja2VuZCBFcnJvcjpcIiwgZXJyb3JUZXh0KTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IEpTT04ucGFyc2UoZXJyb3JUZXh0KS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihnZXRCYWNrZW5kRXJyb3JNZXNzYWdlKGVycm9yRGF0YSwgXCLguYTguKHguYjguKrguLLguKHguLLguKPguJbguJTguLbguIfguILguYnguK3guKHguLnguKXguKrguJbguLTguJXguLTguYTguJTguYlcIikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHJldHVybiB1bndyYXBCYWNrZW5kRGF0YShqc29uKSBhcyB7IGRpbmVJbjogbnVtYmVyOyB0YWtlYXdheTogbnVtYmVyOyBkZWxpdmVyeTogbnVtYmVyOyB0b3RhbDogbnVtYmVyIH07XG4gICAgfSxcblxuXG4gICAgZ2V0QnlJZDogYXN5bmMgKGlkOiBzdHJpbmcsIGNvb2tpZT86IHN0cmluZyk6IFByb21pc2U8U2FsZXNPcmRlcj4gPT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBnZXRQcm94eVVybChcIkdFVFwiLCBgJHtCQVNFX1BBVEh9LyR7aWR9YCk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzKGNvb2tpZSwgXCJcIik7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwhLCB7XG4gICAgICAgICAgICBjYWNoZTogXCJuby1zdG9yZVwiLFxuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBcImluY2x1ZGVcIlxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGdldEJhY2tlbmRFcnJvck1lc3NhZ2UoZXJyb3JEYXRhLCBcIuC5hOC4oeC5iOC4quC4suC4oeC4suC4o+C4luC4lOC4tuC4h+C4guC5ieC4reC4oeC4ueC4peC4reC4reC5gOC4lOC4reC4o+C5jOC5hOC4lOC5iVwiKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHVud3JhcEJhY2tlbmREYXRhKGpzb24pIGFzIHVua25vd247XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXlsb2FkKSkge1xuICAgICAgICAgICAgICAgIGlmIChwYXlsb2FkLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKFwiT3JkZXIgbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBTYWxlc09yZGVyU2NoZW1hLnBhcnNlKHBheWxvYWRbMF0pIGFzIHVua25vd24gYXMgU2FsZXNPcmRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBTYWxlc09yZGVyU2NoZW1hLnBhcnNlKHBheWxvYWQpIGFzIHVua25vd24gYXMgU2FsZXNPcmRlcjtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJab2QgVmFsaWRhdGlvbiBFcnJvciBpbiBvcmRlcnNTZXJ2aWNlLmdldEJ5SWQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFpvZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlpvZCBJc3N1ZXM6XCIsIGVycm9yLmlzc3Vlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBjcmVhdGU6IGFzeW5jIChkYXRhOiBDcmVhdGVTYWxlc09yZGVyRFRPLCBjb29raWU/OiBzdHJpbmcsIGNzcmZUb2tlbj86IHN0cmluZyk6IFByb21pc2U8U2FsZXNPcmRlcj4gPT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBnZXRQcm94eVVybChcIlBPU1RcIiwgYCR7QkFTRV9QQVRIfWApO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gZ2V0SGVhZGVycyhjb29raWUpIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gICAgICAgIGlmIChjc3JmVG9rZW4pIGhlYWRlcnNbXCJYLUNTUkYtVG9rZW5cIl0gPSBjc3JmVG9rZW47XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwhLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBcImluY2x1ZGVcIixcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGdldEJhY2tlbmRFcnJvck1lc3NhZ2UoZXJyb3JEYXRhLCBcIuC5hOC4oeC5iOC4quC4suC4oeC4suC4o+C4luC4quC4o+C5ieC4suC4h+C4reC4reC5gOC4lOC4reC4o+C5jOC5hOC4lOC5iVwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVud3JhcEJhY2tlbmREYXRhKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgU2FsZXNPcmRlcjtcbiAgICB9LFxuXG4gICAgdXBkYXRlOiBhc3luYyAoaWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxTYWxlc09yZGVyPiwgY29va2llPzogc3RyaW5nLCBjc3JmVG9rZW4/OiBzdHJpbmcpOiBQcm9taXNlPFNhbGVzT3JkZXI+ID0+IHtcbiAgICAgICAgY29uc3QgdXJsID0gZ2V0UHJveHlVcmwoXCJQVVRcIiwgYCR7QkFTRV9QQVRIfS8ke2lkfWApO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gZ2V0SGVhZGVycyhjb29raWUpIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gICAgICAgIGlmIChjc3JmVG9rZW4pIGhlYWRlcnNbXCJYLUNTUkYtVG9rZW5cIl0gPSBjc3JmVG9rZW47XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwhLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZ2V0QmFja2VuZEVycm9yTWVzc2FnZShlcnJvckRhdGEsIFwi4LmE4Lih4LmI4Liq4Liy4Lih4Liy4Lij4LiW4LmB4LiB4LmJ4LmE4LiC4Lit4Lit4LmA4LiU4Lit4Lij4LmM4LmE4LiU4LmJXCIpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW53cmFwQmFja2VuZERhdGEoYXdhaXQgcmVzcG9uc2UuanNvbigpKSBhcyBTYWxlc09yZGVyO1xuICAgIH0sXG5cbiAgICBkZWxldGU6IGFzeW5jIChpZDogc3RyaW5nLCBjb29raWU/OiBzdHJpbmcsIGNzcmZUb2tlbj86IHN0cmluZyk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBnZXRQcm94eVVybChcIkRFTEVURVwiLCBgJHtCQVNFX1BBVEh9LyR7aWR9YCk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzKGNvb2tpZSwgXCJcIik7XG4gICAgICAgIGlmIChjc3JmVG9rZW4pIChoZWFkZXJzIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pW1wiWC1DU1JGLVRva2VuXCJdID0gY3NyZlRva2VuO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsISwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBcImluY2x1ZGVcIlxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGdldEJhY2tlbmRFcnJvck1lc3NhZ2UoZXJyb3JEYXRhLCBcIuC5hOC4oeC5iOC4quC4suC4oeC4suC4o+C4luC4peC4muC4reC4reC5gOC4lOC4reC4o+C5jOC5hOC4lOC5iVwiKSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdXBkYXRlSXRlbVN0YXR1czogYXN5bmMgKGl0ZW1JZDogc3RyaW5nLCBzdGF0dXM6IHN0cmluZywgY29va2llPzogc3RyaW5nLCBjc3JmVG9rZW4/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgICAgY29uc3QgdXJsID0gZ2V0UHJveHlVcmwoXCJQQVRDSFwiLCBgJHtCQVNFX1BBVEh9L2l0ZW1zLyR7aXRlbUlkfS9zdGF0dXNgKTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoY29va2llKSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAgICAgICBpZiAoY3NyZlRva2VuKSBoZWFkZXJzW1wiWC1DU1JGLVRva2VuXCJdID0gY3NyZlRva2VuO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsISwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzdGF0dXMgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihnZXRCYWNrZW5kRXJyb3JNZXNzYWdlKGVycm9yRGF0YSwgXCLguYTguKHguYjguKrguLLguKHguLLguKPguJbguK3guLHguJvguYDguJTguJXguKrguJbguLLguJnguLDguKPguLLguKLguIHguLLguKPguYTguJTguYlcIikpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGdldEl0ZW1zOiBhc3luYyAoc3RhdHVzPzogc3RyaW5nLCBjb29raWU/OiBzdHJpbmcpOiBQcm9taXNlPFNhbGVzT3JkZXJJdGVtW10+ID0+IHtcbiAgICAgICAgY29uc3QgcXVlcnkgPSBzdGF0dXMgPyBgP3N0YXR1cz0ke3N0YXR1c31gIDogJyc7XG4gICAgICAgIGNvbnN0IHVybCA9IGdldFByb3h5VXJsKFwiR0VUXCIsIGAke0JBU0VfUEFUSH0vaXRlbXMke3F1ZXJ5fWApO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gZ2V0SGVhZGVycyhjb29raWUsIFwiXCIpO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsISwge1xuICAgICAgICAgICAgY2FjaGU6IFwibm8tc3RvcmVcIixcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICBjcmVkZW50aWFsczogXCJpbmNsdWRlXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihnZXRCYWNrZW5kRXJyb3JNZXNzYWdlKGVycm9yRGF0YSwgXCLguYTguKHguYjguKrguLLguKHguLLguKPguJbguJTguLbguIfguILguYnguK3guKHguLnguKXguKPguLLguKLguIHguLLguKPguYTguJTguYlcIikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSB1bndyYXBCYWNrZW5kRGF0YShhd2FpdCByZXNwb25zZS5qc29uKCkpIGFzIHVua25vd247XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBheWxvYWQpKSByZXR1cm4gcGF5bG9hZCBhcyBTYWxlc09yZGVySXRlbVtdO1xuICAgICAgICBpZiAocGF5bG9hZCAmJiB0eXBlb2YgcGF5bG9hZCA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiAocGF5bG9hZCBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSAocGF5bG9hZCBhcyB7IGRhdGE6IHVua25vd24gfSkuZGF0YTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSByZXR1cm4gZGF0YSBhcyBTYWxlc09yZGVySXRlbVtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXlsb2FkIGFzIFNhbGVzT3JkZXJJdGVtW107XG4gICAgfSxcblxuICAgIGFkZEl0ZW06IGFzeW5jIChvcmRlcklkOiBzdHJpbmcsIGl0ZW1EYXRhOiBDcmVhdGVPcmRlckl0ZW1EVE8sIGNvb2tpZT86IHN0cmluZywgY3NyZlRva2VuPzogc3RyaW5nKTogUHJvbWlzZTxTYWxlc09yZGVyPiA9PiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGdldFByb3h5VXJsKFwiUE9TVFwiLCBgJHtCQVNFX1BBVEh9LyR7b3JkZXJJZH0vaXRlbXNgKTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGdldEhlYWRlcnMoY29va2llKSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAgICAgICBpZiAoY3NyZlRva2VuKSBoZWFkZXJzW1wiWC1DU1JGLVRva2VuXCJdID0gY3NyZlRva2VuO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsISwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICBjcmVkZW50aWFsczogXCJpbmNsdWRlXCIsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShpdGVtRGF0YSlcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihnZXRCYWNrZW5kRXJyb3JNZXNzYWdlKGVycm9yRGF0YSwgXCLguYTguKHguYjguKrguLLguKHguLLguKPguJbguYDguJ7guLTguYjguKHguKPguLLguKLguIHguLLguKPguYTguJTguYlcIikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bndyYXBCYWNrZW5kRGF0YShhd2FpdCByZXNwb25zZS5qc29uKCkpIGFzIFNhbGVzT3JkZXI7XG4gICAgfSxcblxuICAgIHVwZGF0ZUl0ZW06IGFzeW5jIChpdGVtSWQ6IHN0cmluZywgZGF0YTogeyBxdWFudGl0eT86IG51bWJlciwgbm90ZXM/OiBzdHJpbmcsIGRldGFpbHM/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPltdIH0sIGNvb2tpZT86IHN0cmluZywgY3NyZlRva2VuPzogc3RyaW5nKTogUHJvbWlzZTxTYWxlc09yZGVyPiA9PiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGdldFByb3h5VXJsKFwiUFVUXCIsIGAke0JBU0VfUEFUSH0vaXRlbXMvJHtpdGVtSWR9YCk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRIZWFkZXJzKGNvb2tpZSwgXCJhcHBsaWNhdGlvbi9qc29uXCIpIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gICAgICAgIGlmIChjc3JmVG9rZW4pIGhlYWRlcnNbXCJYLUNTUkYtVG9rZW5cIl0gPSBjc3JmVG9rZW47XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwhLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZ2V0QmFja2VuZEVycm9yTWVzc2FnZShlcnJvckRhdGEsIFwi4LmE4Lih4LmI4Liq4Liy4Lih4Liy4Lij4LiW4LmB4LiB4LmJ4LmE4LiC4Lij4Liy4Lii4LiB4Liy4Lij4LmE4LiU4LmJXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHVud3JhcEJhY2tlbmREYXRhKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgU2FsZXNPcmRlcjtcbiAgICB9LFxuXG4gICAgZGVsZXRlSXRlbTogYXN5bmMgKGl0ZW1JZDogc3RyaW5nLCBjb29raWU/OiBzdHJpbmcsIGNzcmZUb2tlbj86IHN0cmluZyk6IFByb21pc2U8U2FsZXNPcmRlcj4gPT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBnZXRQcm94eVVybChcIkRFTEVURVwiLCBgJHtCQVNFX1BBVEh9L2l0ZW1zLyR7aXRlbUlkfWApO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gZ2V0SGVhZGVycyhjb29raWUsIFwiXCIpO1xuICAgICAgICBpZiAoY3NyZlRva2VuKSAoaGVhZGVycyBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KVtcIlgtQ1NSRi1Ub2tlblwiXSA9IGNzcmZUb2tlbjtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCEsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICBjcmVkZW50aWFsczogXCJpbmNsdWRlXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihnZXRCYWNrZW5kRXJyb3JNZXNzYWdlKGVycm9yRGF0YSwgXCLguYTguKHguYjguKrguLLguKHguLLguKPguJbguKXguJrguKPguLLguKLguIHguLLguKPguYTguJTguYlcIikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bndyYXBCYWNrZW5kRGF0YShhd2FpdCByZXNwb25zZS5qc29uKCkpIGFzIFNhbGVzT3JkZXI7XG4gICAgfSxcblxuICAgIHVwZGF0ZVN0YXR1czogYXN5bmMgKG9yZGVySWQ6IHN0cmluZywgc3RhdHVzOiBzdHJpbmcsIGNzcmZUb2tlbj86IHN0cmluZyk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgICAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0geyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9O1xuICAgICAgICBpZiAoY3NyZlRva2VuKSBoZWFkZXJzW1wiWC1DU1JGLVRva2VuXCJdID0gY3NyZlRva2VuO1xuXG4gICAgICAgIC8vIFVzZSBleGlzdGluZyB1cGRhdGUgbWV0aG9kIG9yIGNyZWF0ZSBzcGVjaWZpYyBlbmRwb2ludCBpZiBiYWNrZW5kIHN1cHBvcnRzIHBhdGNoIHN0YXR1c1xuICAgICAgICAvLyBDaGVja2luZyBiYWNrZW5kIGNvbnRyb2xsZXIuLi4gdXN1YWxseSBnZW5lcmljIHVwZGF0ZSB3b3JrcyBpZiBmaWVsZHMgYWxsb3dlZFxuICAgICAgICAvLyBCdXQgbGV0J3MgYXNzdW1lIHVwZGF0ZShpZCwgeyBzdGF0dXMgfSkgd29ya3NcblxuICAgICAgICBjb25zdCB1cmwgPSBnZXRQcm94eVVybChcIlBVVFwiLCBgJHtCQVNFX1BBVEh9LyR7b3JkZXJJZH1gKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwhLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzdGF0dXMgfSksXG4gICAgICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgc3RhdHVzXCIpO1xuICAgICAgICB9XG4gICAgfVxufTtcbiJdLCJuYW1lcyI6WyJab2RFcnJvciIsImdldFByb3h5VXJsIiwiQVBJX1JPVVRFUyIsIk9yZGVyc1Jlc3BvbnNlU2NoZW1hIiwiT3JkZXJzU3VtbWFyeVJlc3BvbnNlU2NoZW1hIiwiU2FsZXNPcmRlclNjaGVtYSIsImdldEJhY2tlbmRFcnJvck1lc3NhZ2UiLCJub3JtYWxpemVCYWNrZW5kUGFnaW5hdGVkIiwidW53cmFwQmFja2VuZERhdGEiLCJCQVNFX1BBVEgiLCJQT1MiLCJPUkRFUlMiLCJnZXRIZWFkZXJzIiwiY29va2llIiwiY29udGVudFR5cGUiLCJoZWFkZXJzIiwiQ29va2llIiwib3JkZXJzU2VydmljZSIsImdldEFsbCIsInBhZ2UiLCJsaW1pdCIsInN0YXR1cyIsInR5cGUiLCJxdWVyeSIsInF1ZXJ5UGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwidG9TdHJpbmciLCJxIiwiZW5kcG9pbnQiLCJ1cmwiLCJyZXNwb25zZSIsImZldGNoIiwiY2FjaGUiLCJjcmVkZW50aWFscyIsIm9rIiwiZXJyb3JEYXRhIiwianNvbiIsImNhdGNoIiwiRXJyb3IiLCJwYXJzZSIsImVycm9yIiwiY29uc29sZSIsImlzc3VlcyIsImdldEFsbFN1bW1hcnkiLCJnZXRTdGF0cyIsIkNIQU5ORUxTIiwiU1RBVFMiLCJlcnJvclRleHQiLCJ0ZXh0IiwiSlNPTiIsImdldEJ5SWQiLCJpZCIsInBheWxvYWQiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJjcmVhdGUiLCJkYXRhIiwiY3NyZlRva2VuIiwibWV0aG9kIiwiYm9keSIsInN0cmluZ2lmeSIsInVwZGF0ZSIsImRlbGV0ZSIsInVwZGF0ZUl0ZW1TdGF0dXMiLCJpdGVtSWQiLCJnZXRJdGVtcyIsImFkZEl0ZW0iLCJvcmRlcklkIiwiaXRlbURhdGEiLCJ1cGRhdGVJdGVtIiwiZGVsZXRlSXRlbSIsInVwZGF0ZVN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/services/pos/orders.service.ts\n"));

/***/ })

});